function aa(e){var t=e.cloneNode;delete e.cloneNode,e.cloneNode=function(e){return e===g&&(e=j),t.call(this,e)}}function ba(e){(e=e.__proto__||e.constructor.prototype)&&e!==Array.prototype&&ca.forEach(function(t){e[t]||(e[t]=Array.prototype[t])})}function v(e,t,n){return da.call(e,t,q.call(arguments,2))}function w(e,t){for(var n=1;n<arguments.length;n++){var i,r=arguments[n];for(i in r)u(r,i)&&!u(e,i)&&(e[i]=r[i])}return e}function x(e,t){if(e==k&&!t)throw new TypeError;return ha&&"string"==typeof e&&e?r.call(e,""):Object(e)}function ja(e){var t=Object.create(DOMException.prototype);throw t.code=DOMException[e],t.message=e+": DOM Exception "+t.code,t}function ka(){return l}function la(e){return e}function Ja(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}function Ka(e){try{return e.sentinel2=0,0===Object.getOwnPropertyDescriptor(e,"sentinel2").value}catch(t){}}function _log(e,t){if(_canLog){var n=Array.prototype.slice.apply(arguments,[1]),i=new Date,r=i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds();n[0]=r+" - "+n[0];try{switch(e){case"info":window.console.info.apply(window.console,n);break;case"warn":window.console.warn.apply(window.console,n);break;default:window.console.log.apply(window.console,n)}}catch(a){window.console||(_canLog=!1)}}}function logMsg(e){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}function uiCodemirrorDirective(e,t){function n(e,n,s,l){var c=angular.extend({value:n.text()},t.codemirror||{},e.$eval(s.uiCodemirror),e.$eval(s.uiCodemirrorOpts)),u=i(n,c);r(u,s.uiCodemirror||s.uiCodemirrorOpts,e),a(u,l,e),o(u,s.uiRefresh,e),e.$on("CodeMirror",function(e,t){if(!angular.isFunction(t))throw new Error("the CodeMirror event requires a callback function");t(u)}),angular.isFunction(c.onLoad)&&c.onLoad(u)}function i(e,t){var n;return"TEXTAREA"===e[0].tagName?n=window.CodeMirror.fromTextArea(e[0],t):(e.html(""),n=new window.CodeMirror(function(t){e.append(t)},t)),n}function r(e,t,n){function i(t,n){angular.isObject(t)&&r.forEach(function(i){if(t.hasOwnProperty(i)){if(n&&t[i]===n[i])return;e.setOption(i,t[i])}})}if(t){var r=Object.keys(window.CodeMirror.defaults);n.$watch(t,i,!0)}}function a(e,t,n){t&&(t.$formatters.push(function(e){if(angular.isUndefined(e)||null===e)return"";if(angular.isObject(e)||angular.isArray(e))throw new Error("ui-codemirror cannot use an object or an array as a model");return e}),t.$render=function(){var n=t.$viewValue||"";e.setValue(n)},e.on("change",function(e){var i=e.getValue();i!==t.$viewValue&&n.$evalAsync(function(){t.$setViewValue(i)})}))}function o(t,n,i){n&&i.$watch(n,function(n,i){n!==i&&e(function(){t.refresh()})})}return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror needs CodeMirror to work... (o rly?)");return n}}}var g=void 0,j=!0,k=null,l=!1,n=window,o,p=Object.prototype,da=Function.prototype.apply,q=Array.prototype.slice,r=String.prototype.split,ea=Array.prototype.splice,s,fa,ga,t=Function.prototype.bind||function(e,t){var n=this,i=q.call(arguments,1);return function(){return da.call(n,e,i.concat(q.call(arguments)))}},u=t.call(Function.prototype.call,p.hasOwnProperty),ha="a"!=Object("a")[0]||!(0 in Object("a")),ia=p.toString,ca="every filter forEach indexOf join lastIndexOf map reduce reduceRight reverse slice some toString".split(" "),y=n.Element&&n.Element.prototype||{},z=t.call(document.__orig__createElement__||document.createElement,document),A=z("p"),B,ma=/\\s+$/g,na=/\\s+/g,C=1,D,oa=/^(\w+)?((?:\.(?:[\w\-]+))+)?$|^#([\w\-]+$)/,pa=/\s*([,>+~ ])\s*/g,qa,E,F,G,I,J,K,ra,sa,ta,ua,L,va,M,N="	\n\f\r   ᠎             　\u2028\u2029\ufeff",wa,xa,ya,za,O,Q,Aa,Ba,R,S=n.Date,T,Ca,U,V,W,Da,Ga,X,Y;for(W={},W.names=(W.agent=navigator.userAgent.toLowerCase()).match(/(mozilla|compatible|chrome|webkit|safari|opera|msie|iphone|ipod|ipad)/gi),D=W.names&&W.names.length||0;0<D--;)W[W.names[D]]=j;W.mozilla=W.mozilla&&!W.compatible&&!W.webkit,W.safari=W.safari&&!W.chrome,W.msie=W.msie&&!W.opera,o=W.msie||g,n.browser=W,n.HTMLDocument||(n.HTMLDocument=n.Document),n.Document||(n.Document=n.HTMLDocument),Object.append=w,Object.extend||(Object.extend=function(e,t){for(var n=1;n<arguments.length;n++){var i,r=arguments[n];for(i in r)u(r,i)&&(e[i]=r[i])}return e}),Object.inherit=function(e,t){(e.prototype=Object.create(e.superclass=t.prototype)).constructor=e},Function.prototype.bind||(Function.prototype.bind=function(e,t){function n(){return da.call(i,this instanceof n?this:e,r.concat(q.call(arguments)))}if("function"!=typeof this&&(!o||0!==M.call(this+"").indexOf("function")))throw new TypeError("Function.prototype.bind called on incompatible "+this);var i=this,r=q.call(arguments,1);return i.prototype&&(n.prototype=Object.create(i.prototype)),n});var $="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),Ha=!{toString:k}.propertyIsEnumerable($[0]),Ia=$.length;if(w(Object,{keys:function(e){if("object"!=typeof e&&"function"!=typeof e||e===k)throw new TypeError("Object.keys called on a non-object");var t,n=[];for(t in e)u(e,t)&&n.push(t);if(Ha)for(t=0;Ia>t;t++)u(e,$[t])&&n.push($[t]);return n},getOwnPropertyNames:function(e){return Object.keys(e)},seal:la,freeze:la,preventExtensions:la,isSealed:ka,isFrozen:ka,isExtensible:function(e){if(Object(e)!==e)throw new TypeError;for(var t="";u(e,t);)t+="?";e[t]=j;var n=u(e,t);return delete e[t],n},getPrototypeOf:function(e){return e.__proto__||(e.constructor?e.constructor.prototype:p)},create:function(e,t){var n;if(e===k)n={__proto__:k};else{if("object"!=typeof e)throw new TypeError("typeof prototype["+typeof e+"] != 'object'");n=function(){},n.prototype=e,n=new n,n.__proto__=e}return t&&Object.defineProperties(n,t),n},is:function(e,t){return e===t?0===e?1/e===1/t:j:e!==e&&t!==t},isnt:function(e,t){return!Object.is(e,t)}}),!Object.defineProperty||(ya=Ja({}),za=Ja(A),ya&&za)||(O=Object.defineProperty,Q=Object.defineProperties),(!Object.defineProperty||O)&&(Object.defineProperty=function(e,t,n){if("object"!=typeof e&&"function"!=typeof e||e===k)throw new TypeError("Object.defineProperty called on non-object: "+e);if("object"!=typeof n&&"function"!=typeof n||n===k)throw new TypeError("Property description must be an object: "+n);if(O)try{return O.call(Object,e,t,n)}catch(i){if(-2146823252===i.number){n.enumerable=l;try{return O.call(Object,e,t,n)}catch(r){}}}if(n.value!==g)if(e.__defineGetter__&&(e.__lookupGetter__(t)||e.__lookupSetter__(t))){var a=e.__proto__;e.__proto__=p,delete e[t],e[t]=n.value,e.__proto__=a}else e[t]=n.value;else if(e.__defineGetter__)n.get!==g&&e.__defineGetter__(t,n.get),n.set!==g&&e.__defineSetter__(t,n.set);else{if(!Object.defineProperty.ielt8)throw new TypeError("getters & setters not supported");n.get!==g&&(e["get"+t]=n.get),n.set!==g&&(e["set"+t]=n.set)}return e}),y.ie&&8>o&&(y.ielt8=Object.defineProperty.ielt8=j),(!Object.defineProperties||Q)&&(Object.defineProperties=function(e,t){if(Q)try{return Q.call(Object,e,t)}catch(n){}for(var i in t)u(t,i)&&Object.defineProperty(e,i,t[i]);return e}),!Object.getOwnPropertyDescriptor||(Aa=Ka({}),Ba=Ka(A),Ba&&Aa)||(R=Object.getOwnPropertyDescriptor),(!Object.getOwnPropertyDescriptor||R)&&(Object.getOwnPropertyDescriptor=function(e,t){if("object"!=typeof e&&"function"!=typeof e||e===k)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+e);if(R)try{return R.call(Object,e,t)}catch(n){}if(u(e,t)){var i,r,a={enumerable:j,configurable:j};if(e.__defineGetter__){var o=e.__proto__;e.__proto__=p,i=e.__lookupGetter__(t),r=e.__lookupSetter__(t),e.__proto__=o}else Object.defineProperty.ielt8&&(i=e["get"+t],r=e["set"+t]);return i||r?(i&&(a.get=i),r&&(a.set=r),a):(a.value=e[t],a)}}),2!=[1,2].splice(0).length&&(Array.prototype.splice=function(e,t){return e===g&&t===g?[]:ea.apply(this,[e===g?0:e,t===g?this.length-e:t].concat(q.call(arguments,2)))}),ga=function(e){if(e instanceof Array||Array.isArray(e))return e;if(e.k)return e.k();var t,e=x(e,j),n=e.length>>>0;try{t=q.call(e)}catch(i){}if(t&&t.length===n)return t;t=[];for(var r=0;n>r;r++)r in e&&(t[r]=e[r]);return t},w(Array,{isArray:function(e){return"[object Array]"==ia.call(e)},from:ga,of:function(e){return q.call(arguments)}}),w(Array.prototype,{reduce:function(e,t){var n=x(this),i=n.length>>>0,r=0;if(0===i&&arguments.length<=1)throw new TypeError("Array length is 0 and no second argument");for(t===g&&(++r,t=n[0]);i>r;++r)r in n&&(t=v(e,g,t,n[r],r,n));return t},reduceRight:function(e,t){var n=x(this),i=n.length>>>0;if(0===i&&arguments.length<=1)throw new TypeError("Array length is 0 and no second argument");for(--i,t===g&&(--i,t=n[i+1]);i>=0;--i)i in n&&(t=v(e,g,t,n[i],i,n));return t},forEach:function(e,t){for(var n=x(this),i=n.length>>>0,r=-1;++r<i;)r in n&&v(e,t,n[r],r,n)},indexOf:function(e,t){var n=x(this),i=n.length>>>0;if((t=~~t)>i)return-1;for(t=(i+t)%i;i>t&&(!(t in n)||n[t]!==e);t++);return t^i?t:-1},lastIndexOf:function(e,t){var n,i=x(this),r=i.length>>>0;if(!r)return-1;for(n=r-1,t!==g&&(n=Math.min(n,Number.toInteger(t))),n=n>=0?n:r-Math.abs(n);n>=0;n--)if(n in i&&i[n]===e)return n;return-1},every:function(e,t,n){n===g&&(n=j);var i=n;return L(this,function(r,a){i==n&&(i=!!v(e,t,r,a,this))},this),i},some:function(e,t){return va.call(this,e,t,l)},filter:function(e,t){for(var n,i=x(this),r=i.length>>>0,a=[],o=0;r>o;o++)o in i&&(n=i[o],v(e,t,n,o,i)&&a.push(n));return a},map:function(e,t){for(var n=x(this),i=n.length>>>0,r=[],a=0;i>a;a++)a in n&&(r[a]=v(e,t,n[a],a,this));return r},contains:function(e){return!!~this.indexOf(e)}}),!Array.prototype.unique){var La=function(e,t,n){return n.indexOf(e,t+1)<0};Array.prototype.unique=function(){return this.filter(La)}}L=t.call(Function.prototype.call,Array.prototype.forEach),fa=Array.prototype.map,va=Array.prototype.every,String.random||(String.random=function(e){return!e||0>e?"":Array(++e).join(0).replace(/./g,function(){return(0|32*Math.random()).toString(32)})}),(!String.prototype.trim||N.trim())&&(N="["+N+"]",wa=RegExp("^"+N+N+"*"),xa=RegExp(N+N+"*$"),String.prototype.trim=function(){return String(this).replace(wa,"").replace(xa,"")}),M=String.prototype.trim,"0".split(g,0).length&&(String.prototype.split=function(e,t){return e===g&&0===t?[]:r.call(this,e,t)}),s=function(e,t){return!!~this.indexOf(e,t)},w(String.prototype,{repeat:function(e){return Array(++e).join(this+"")},startsWith:function(e,t){return this.lastIndexOf(e,t)===(t||0)},endsWith:function(e,t){return e+="",this.substr(-e.length-(t||0),t)==e},contains:s,toArray:function(){return r.call(this,"")},reverse:function(){return Array.prototype.reverse.call(r.call(this+"","")).join("")}}),w(Number,{isFinite:function(e){return"number"==typeof e&&n.i(e)},isInteger:function(e){return Number.isFinite(e)&&e>=-9007199254740992&&9007199254740992>=e&&Math.floor(e)===e},isNaN:function(e){return Object.is(e,0/0)},toInteger:function(e){return e=+e,Number.isNaN(e)?0:0!==e&&n.i(e)?(0>e?-1:1)*Math.floor(Math.abs(e)):e}}),E=function(e,t){var n=document.createEvent("Events"),t=t||{};return n.initEvent(e,t.bubbles||l,t.cancelable||l),"isTrusted"in n||(n.j=l),n};try{G=Event.prototype,new Event("click")}catch(Ma){n.Event=E,G&&(E.prototype=G)}F=function(e,t){var n,i;try{n=document.createEvent("CustomEvent")}catch(r){n=document.createEvent("Event")}return t=t||{},i=t.detail!==g?t.detail:k,(n.initCustomEvent||(n.detail=i,n.initEvent)).call(n,e,t.bubbles||l,t.cancelable||l,i),"isTrusted"in n||(n.j=l),n};try{I=(n.CustomEvent||Event).prototype,new CustomEvent("magic")}catch(Na){n.CustomEvent=F,(I||G)&&(F.prototype=I||G)}if(G.stopImmediatePropagation||(J=function(e){var t=this.f,n=this.g;if("function"!=typeof t){if(!("handleEvent"in t))return;n=t,t=t.handleEvent}return e.__stopNow?void e.stopPropagation():t.apply(n,arguments)},G.stopImmediatePropagation=function(){this.__stopNow=j}),"addEventListener"in A&&!A.addEventListener.__shim__){D=0;try{B=function(){D++},A.addEventListener("click",B),A.addEventListener("click",B),A.click?A.click():A.dispatchEvent(new E("click"))}catch(Oa){}finally{if(0==D||2==D||J){var Pa=2==D;L([n.HTMLDocument&&n.HTMLDocument.prototype||n.document,n.Window&&n.Window.prototype||n,y],function(e){if(e){var n=e.addEventListener,i=e.removeEventListener;n&&(e.addEventListener=function(e,i,r){var a,o,r=r||l;if(Pa||J){if(o="_e_8vj"+(r?"-":"")+(i.__UUID__||(i.__UUID__=++C))+e,(a=this._)||(a=this._={}),o in a)return;i=a[o]=J?t.call(J,{f:i,g:this}):g}return n.call(this,e,i,r)},i&&(e.removeEventListener=function(e,t,n){var r,a,n=n||l;return(Pa||J)&&(r=this._)&&r[a="_e_8vj"+(n?"-":"")+t.__UUID__+e]&&(t=r[a],delete r[a]),i.call(this,e,t,n)}))}})}}}K=function(e,t,n){this.e=e,this.a=t,this.c=n,this.length=0,this.value="",this.b("1")},ra=function(e,t){var n=t||"",i=!!e.length;if(i){for(;e.length>0;)delete e[--e.length];e.value=""}n&&((n=M.call(n))&&r.call(n,na).forEach(sa,e),e.value=t),i&&e.a&&e.a.call(e.c,e.value)},sa=function(e){this[this.length++]=e},w(K.prototype,{b:function(e){var t=this.e.call(this.c);t!=this.value&&ra(this,t),""===e&&ja("SYNTAX_ERR"),s.call(e+""," ")&&ja("INVALID_CHARACTER_ERR")},add:function(e){var t=this.value;this.contains(e)||(this.value=this.value+((t&&!t.match(ma)?" ":"")+e),this[this.length++]=e,this.a&&this.a.call(this.c,this.value))},remove:function(e){this.b(e);var t;for(this.value=this.value.replace(RegExp("((?: +|^)"+e+"(?: +|$))","g"),function(e,t,n,i){return n&&e.length+n<i.length?" ":""}),t=r.call(this.value," "),e=this.length-1;e>0;--e)(this[e]=t[e])||(this.length--,delete this[e]);this.a&&this.a.call(this.c,this.value)},contains:function(e){return this.b(e),s.call(" "+this.value+" "," "+e+" ")},item:function(e){return this.b("1"),this[e]||k},toggle:function(e){var t=thisObj.contains(e);return this[t?"add":"remove"](e),t}}),K.prototype.toString=function(){return this.value||""},ua=function(e){this.className=e},ta=function(){return this.className},n.Utils||(n.Utils={}),n.Utils.Dom||(n.Utils.Dom={}),n.Utils.Dom.DOMStringCollection=K,G.AT_TARGET||(G.AT_TARGET=2,G.BUBBLING_PHASE=3,G.CAPTURING_PHASE=1),Event.AT_TARGET||(Event.AT_TARGET=2,Event.BUBBLING_PHASE=3,Event.CAPTURING_PHASE=1);try{n.getComputedStyle(A)}catch(Qa){n.getComputedStyle=t(function(e,t){return this.call(n,e,t||k)},n.getComputedStyle)}if("classList"in A||Object.defineProperty(y,"classList",{get:function(){if(this.tagName){var e=this._||(this._={});return e._ccl_||(e._ccl_=new K(ta,ua,this)),e._ccl_}}}),"parentElement"in A||Object.defineProperty(y,"parentElement",{get:function(){var e=this.parentNode;return e&&1===e.nodeType?e:k}}),"contains"in A||(n.Node.prototype.contains=function(e){return!!(16&this.compareDocumentPosition(e))}),"insertAdjacentHTML"in A||(n.HTMLElement.prototype.insertAdjacentHTML=function(e,t){var n,i=this.ownerDocument.createElement("_"),r={beforebegin:"before",afterbegin:"prepend",beforeend:"append",afterend:"after"};i.innerHTML=t,(i=i.childNodes)&&i.length&&(n=this[r[e]])&&n.apply(this,i)}),document.importNode&&!document.importNode.shim)try{document.importNode(A)}catch(Ra){var Sa=document.importNode;delete document.importNode,document.importNode=function(e,t){return t===g&&(t=j),Sa.call(this,e,t)}}try{A.cloneNode()}catch(Ta){[Node.prototype,y,Document.prototype,DocumentFragment.prototype].forEach(aa)}A.prepend||(B=function(e){var t,n=k,i=0,r=e.length,e=fa.call(e,function(e){return"string"==typeof e?document.createTextNode(e):e});if(1===r)n=e[0];else for(n=document.createDocumentFragment(),i=0,r=e.length;i<(t=e.length);++i)i-=r-t,n.appendChild(e[i]);return n},y.after=function(){this.parentNode&&this.parentNode.insertBefore(B(arguments),this.nextSibling)},y.before=function(){this.parentNode&&this.parentNode.insertBefore(B(arguments),this)},y.append=function(){this.appendChild(B(arguments))},y.prepend=function(){this.insertBefore(B(arguments),this.firstChild)},y.replace=function(){this.parentNode&&this.parentNode.replaceChild(B(arguments),this)},y.remove=function(){this.parentNode&&this.parentNode.removeChild(this)},"prepend"in document||(document.prepend=function(){y.prepend.apply(this.documentElement,arguments)},document.append=function(){y.append.apply(this.documentElement,arguments)})),y.matchesSelector||(y.matchesSelector=y.webkitMatchesSelector||y.mozMatchesSelector||y.msMatchesSelector||y.oMatchesSelector||function(e,t){if(!e)return l;if("*"===e)return j;var n,i,r,a,o,c,u=0;t?"length"in t?n=t[0]:(n=t,t=g):n=this;do if(c=l,n===document.documentElement?c=":root"===e:n===document.body&&(c="BODY"===e.toUpperCase()),!c){if(e=M.call(e.replace(pa,"$1")),a=e.match(oa))switch(e.charAt(0)){case"#":c=n.id===e.slice(1);break;default:if((c=!(a[1]&&"tagName"in n&&n.tagName.toUpperCase()!==a[1].toUpperCase()))&&a[2])for(r=-1,o=a[2].slice(1).split("."),a=" "+n.className+" ";o[++r]&&c;)c=s.call(a," "+o[r]+" ")}if(!/([,>+~ ])/.test(e)&&(i=n.parentNode)&&i.querySelector&&(c=i.querySelector(e)===n),!c&&(i=n.ownerDocument))for(o=i.querySelectorAll(e),r=-1;!c&&o[++r];)c=o[r]===n}while(c&&t&&(n=t[++u]));return t&&"length"in t?c&&t.length==u:c}),document.documentElement.matchesSelector||(document.documentElement.matchesSelector=y.matchesSelector),"matches"in y||(y.matches=document.documentElement.matches=y.matchesSelector),"find"in document||(qa=/(\:scope)(?=[ >~+])/,document.find=DocumentFragment.prototype.find=function(e,t){t&&("length"in t||(t=[t]))||(t=[this]);var n,i,r=0,a=t.length;do i=t[r],e=e.replace(qa,9==i.nodeType?":root":document_find_scopedreplacer=function(){return"#"+(i.id||(i.id="find"+ ++C))}),n=i.querySelector(e);while(!n&&++r<a);return n||k},document.findAll=DocumentFragment.prototype.findAll=function(e,t){t&&("length"in t||(t=[t]))||(t=[this]);var n,i,r,a,o,s,c=[],u=0,d=t.length,p={};do for(n=t[u],e=e.replace(qa,9==n.nodeType?":root":document_find_scopedreplacer=function(){return"#"+(n.id||(n.id="find"+ ++C))}),i=n.querySelectorAll(e),a=0,o=i.length;o>a;++a)r=i[a],s=l,r=r.__UUID__||(s=j,r.__UUID__=++C),!s&&r in p||(p[r]=g,c.push(i[a]));while(++u<d);return c}),"find"in y||(y.find=y.querySelector,y.findAll=y.querySelectorAll),"labels"in z("input")||Object.defineProperty(y,"labels",{enumerable:j,get:function(){if(s.call(" INPUT BUTTON KEYGEN METER OUTPUT PROGRESS TEXTAREA SELECT "," "+this.nodeName.toUpperCase()+" ")){for(var e=this,t=this.id?ga(document.querySelectorAll("label[for='"+this.id+"']")):[],n=t.length-1;(e=e.parentNode)&&(!e.h||e.h===this);)if("LABEL"===e.nodeName.toUpperCase()){for(;t[n]&&2&t[n].compareDocumentPosition(e);)n--;ea.call(t,n+1,0,e)}return t}}}),"control"in z("label")||(Da=function(e,t){for(var n=0,i=e.length;i>n;n++){var r=e[n],a=t(r);if(a)return a;if(r.childNodes&&r.childNodes.length>0&&(a=Da(r.childNodes,t)))return a}},Object.defineProperty(n.HTMLLabelElement&&n.HTMLLabelElement.prototype||y,"control",{enumerable:j,get:function(){return"LABEL"!==this.nodeName.toUpperCase()?g:this.hasAttribute("for")?document.getElementById(this.htmlFor):Da(this.childNodes,function(e){return s.call(" INPUT BUTTON KEYGEN METER OUTPUT PROGRESS TEXTAREA SELECT "," "+e.nodeName.toUpperCase()+" ")?e:void 0})||k}})),"reversed"in z("ol")||(Ga=function(e){var t,n,i=e.getAttribute("reversed"),r=e._;r||(r=e._={}),"olreversed"in r&&r.olreversed==(i!==k)||(t=e.children,n=e.getAttribute("start"),n!==k&&(n=Number(n),isNaN(n)&&(n=k)),i!==k?(r.olreversed=j,n===k&&(n=t.length),L(t,function(e){e.value=n--})):(r.olreversed=l,t[0]&&(t[0].value=n||0),L(t,function(e){e.removeAttribute("value")})))},Object.defineProperty(n.HTMLOListElement&&n.HTMLOListElement.prototype||y,"reversed",{get:function(){return"OL"!==(this.nodeName||"").toUpperCase()?g:this.getAttribute("reversed")!==k},set:function(e){return"OL"===(this.nodeName||"").toUpperCase()?(this[(e?"set":"remove")+"Attribute"]("reversed",""),Ga(this),e):void 0}}),X=function(){document.removeEventListener("DOMContentLoaded",X,l),X=g,L(document.getElementsByTagName("ol"),Ga)},"complete"==document.readyState?X():document.addEventListener("DOMContentLoaded",X,l)),document.getElementsByClassName&&ba(document.getElementsByClassName("")),document.querySelectorAll&&ba(document.querySelectorAll("#z")),Y=n.XHR=function(e,t){e=w(e||{},Y.d),Object.keys(Y.d).forEach(function(t){"object"==typeof this[t]&&w(e[t],this[t])},Y.d);var n=new XMLHttpRequest,i=e.data||"",r="post"==e.method.toLowerCase(),a=e.uri;"object"==typeof i&&e==Y.d.headers["Content-Type"]&&(i=Object.keys(i).map(function(e){var t=this[e];return"object"==typeof t?Object.keys(t).map(function(t){return e+"="+this[t]},t).join("&"):e+"="+t},i).join("&")),n.onreadystatechange=function(){4===this.readyState&&t.call(this,k,this.response||this.responseText||this.responseXML)},n.onerror=function(e){t.call(this,e)};try{n.open(e.method,a+(r?"":a.indexOf("?")?"&":"?"+i)),e.headers&&Object.keys(e.headers).forEach(function(t){n.setRequestHeader(t,e.headers[t])}),n.send(r&&i||k)}catch(o){t.call(this,o)}return n},Y.d={headers:{"X-Requested-With":"HTTPRequest","Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}},(!S.prototype.toISOString||s.call(new S(-621987552e5).toISOString(),"-000001")||"1969-12-31T23:59:59.999Z"!==new S(-1).toISOString())&&(S.prototype.toISOString=function(){var e,t,n,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(i=this.getUTCFullYear(),e=this.getUTCMonth(),i+=~~(e/12),e=[(e%12+12)%12+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],i=(0>i?"-":i>9999?"+":"")+("00000"+Math.abs(i)).slice(i>=0&&9999>=i?-4:-6),t=e.length;t--;)n=e[t],10>n&&(e[t]="0"+n);return i+"-"+e.slice(0,2).join("-")+"T"+e.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"}),S.now||(S.now=function(){return(new S).getTime()});var Ua;if(!(Ua=!S.prototype.toJSON)){var Va;if(!(Va=s.call(new S(-621987552e5).toJSON(),"-000001"))){var Wa;e:{try{Wa=S.prototype.toJSON.call({toISOString:function(){return-1}});break e}catch(Xa){}Wa=g}Va=~Wa}Ua=Va}if(Ua&&(S.prototype.toJSON=function(){return v(this.toISOString,this)}),!S.parse){T=function(e,t,n,i,r,a,o){var s=arguments.length;return this instanceof S?(s=1==s&&String(e)===e?new S(T.parse(e)):s>=7?new S(e,t,n,i,r,a,o):s>=6?new S(e,t,n,i,r,a):s>=5?new S(e,t,n,i,r):s>=4?new S(e,t,n,i):s>=3?new S(e,t,n):s>=2?new S(e,t):s>=1?new S(e):new S,s.constructor=T,s):S.apply(this,arguments)},Ca=RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),U=[0,31,59,90,120,151,181,212,243,273,304,334,365],V=function(e){return Math.ceil(e/4)-Math.ceil(e/100)+Math.ceil(e/400)};for(D in S)T[D]=S[D];T.now=S.now,T.UTC=S.UTC,T.prototype=S.prototype,T.prototype.constructor=T,T.parse=function(e){var t=Ca.exec(e);if(t){var n=Number(t[1]),i=Number(t[2]||1),r=Number(t[3]||1),a=Number(t[4]||0),o=Number(t[5]||0),s=Number(t[6]||0),l=Number(t[7]||0),c=t[8]?0:Number(new Date(1970,0)),u="-"===t[9]?1:-1,d=Number(t[10]||0),t=Number(t[11]||0),p=V(n),h=V(n+1);return(o>0||s>0||l>0?24:25)>a&&60>o&&60>s&&1e3>l&&24>d&&60>t&&i>0&&13>i&&r>0&&r<1+U[i]-U[i-1]+(2===i?h-p:0)&&(n=365*(n-1970)+(i>2?h:p)-V(1970)+U[i-1]+r-1,n=1e3*(60*(60*(24*n+a+d*u)+o+t*u)+s)+l+c,n>=-864e13&&864e13>=n)?n:0/0}return S.parse.apply(this,arguments)},n.Date=T}if((D=n._)&&D.ielt9shims&&(D.ielt9shims.forEach(v),n._=D.orig_),w=D=A=ca=z=E=F=G=I=y=T=ka=g,function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=Z.type(e);return"function"===n||Z.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(Z.isFunction(t))return Z.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return Z.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(se.test(t))return Z.filter(t,e,n);t=Z.filter(t,e)}return Z.grep(e,function(e){return W.call(t,e)>=0!==n})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){var t=fe[e]={};return Z.each(e.match(he)||[],function(e,n){t[n]=!0}),t}function o(){J.removeEventListener("DOMContentLoaded",o,!1),e.removeEventListener("load",o,!1),Z.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+s.uid++}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(we,"-$1").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:be.test(n)?Z.parseJSON(n):n}catch(r){}ye.set(e,t,n)}else n=void 0;return n}function c(){return!0}function u(){return!1}function d(){try{return J.activeElement}catch(e){}}function p(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Oe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,i=e.length;i>n;n++)ve.set(e[n],"globalEval",!t||ve.get(t[n],"globalEval"))}function m(e,t){var n,i,r,a,o,s,l,c;if(1===t.nodeType){if(ve.hasData(e)&&(a=ve.access(e),o=ve.set(t,a),c=a.events)){delete o.handle,o.events={};for(r in c)for(n=0,i=c[r].length;i>n;n++)Z.event.add(t,r,c[r][n])}ye.hasData(e)&&(s=ye.access(e),l=Z.extend({},s),ye.set(t,l))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Se.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function b(t,n){var i,r=Z(n.createElement(t)).appendTo(n.body),a=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:Z.css(r[0],"display");return r.detach(),a}function w(e){var t=J,n=Ue[e];return n||(n=b(e,t),"none"!==n&&n||(Fe=(Fe||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Fe[0].contentDocument,t.write(),t.close(),n=b(e,t),Fe.detach()),Ue[e]=n),n}function x(e,t,n){var i,r,a,o,s=e.style;return n=n||Be(e),n&&(o=n.getPropertyValue(t)||n[t]),n&&(""!==o||Z.contains(e.ownerDocument,e)||(o=Z.style(e,t)),qe.test(o)&&ze.test(t)&&(i=s.width,r=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=i,s.minWidth=r,s.maxWidth=a)),void 0!==o?o+"":o}function k(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function C(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),i=t,r=Xe.length;r--;)if(t=Xe[r]+n,t in e)return t;return i}function S(e,t,n){var i=Ve.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function _(e,t,n,i,r){for(var a=n===(i?"border":"content")?4:"width"===t?1:0,o=0;4>a;a+=2)"margin"===n&&(o+=Z.css(e,n+ke[a],!0,r)),i?("content"===n&&(o-=Z.css(e,"padding"+ke[a],!0,r)),"margin"!==n&&(o-=Z.css(e,"border"+ke[a]+"Width",!0,r))):(o+=Z.css(e,"padding"+ke[a],!0,r),"padding"!==n&&(o+=Z.css(e,"border"+ke[a]+"Width",!0,r)));return o}function T(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,a=Be(e),o="border-box"===Z.css(e,"boxSizing",!1,a);if(0>=r||null==r){if(r=x(e,t,a),(0>r||null==r)&&(r=e.style[t]),qe.test(r))return r;i=o&&(Y.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+_(e,t,n||(o?"border":"content"),i,a)+"px"}function $(e,t){for(var n,i,r,a=[],o=0,s=e.length;s>o;o++)i=e[o],i.style&&(a[o]=ve.get(i,"olddisplay"),n=i.style.display,t?(a[o]||"none"!==n||(i.style.display=""),""===i.style.display&&Ce(i)&&(a[o]=ve.access(i,"olddisplay",w(i.nodeName)))):(r=Ce(i),"none"===n&&r||ve.set(i,"olddisplay",r?n:Z.css(i,"display"))));for(o=0;s>o;o++)i=e[o],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?a[o]||"":"none"));return e}function A(e,t,n,i,r){return new A.prototype.init(e,t,n,i,r)}function E(){return setTimeout(function(){Ye=void 0}),Ye=Z.now()}function P(e,t){var n,i=0,r={height:e};for(t=t?1:0;4>i;i+=2-t)n=ke[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function I(e,t,n){for(var i,r=(nt[t]||[]).concat(nt["*"]),a=0,o=r.length;o>a;a++)if(i=r[a].call(n,t,e))return i}function D(e,t,n){var i,r,a,o,s,l,c,u,d=this,p={},h=e.style,f=e.nodeType&&Ce(e),g=ve.get(e,"fxshow");n.queue||(s=Z._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,Z.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],c=Z.css(e,"display"),u="none"===c?ve.get(e,"olddisplay")||w(e.nodeName):c,"inline"===u&&"none"===Z.css(e,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",d.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],Qe.exec(r)){if(delete t[i],a=a||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;f=!0}p[i]=g&&g[i]||Z.style(e,i)}else c=void 0;if(Z.isEmptyObject(p))"inline"===("none"===c?w(e.nodeName):c)&&(h.display=c);else{g?"hidden"in g&&(f=g.hidden):g=ve.access(e,"fxshow",{}),a&&(g.hidden=!f),f?Z(e).show():d.done(function(){Z(e).hide()}),d.done(function(){var t;ve.remove(e,"fxshow");for(t in p)Z.style(e,t,p[t])});for(i in p)o=I(f?g[i]:0,i,d),i in g||(g[i]=o.start,f&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}}function M(e,t){var n,i,r,a,o;for(n in e)if(i=Z.camelCase(n),r=t[i],a=e[n],Z.isArray(a)&&(r=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),o=Z.cssHooks[i],o&&"expand"in o){a=o.expand(a),delete e[i];for(n in a)n in e||(e[n]=a[n],t[n]=r)}else t[i]=r}function N(e,t,n){var i,r,a=0,o=tt.length,s=Z.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Ye||E(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,a=1-i,o=0,l=c.tweens.length;l>o;o++)c.tweens[o].run(a);return s.notifyWith(e,[c,a,n]),1>a&&l?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Ye||E(),duration:n.duration,tweens:[],createTween:function(t,n){var i=Z.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)c.tweens[n].run(1);return t?s.resolveWith(e,[c,t]):s.rejectWith(e,[c,t]),this}}),u=c.props;for(M(u,c.opts.specialEasing);o>a;a++)if(i=tt[a].call(c,e,u,c.opts))return i;return Z.map(u,I,c),Z.isFunction(c.opts.start)&&c.opts.start.call(e,c),Z.fx.timer(Z.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function j(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,a=t.toLowerCase().match(he)||[];if(Z.isFunction(n))for(;i=a[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function O(e,t,n,i){function r(s){var l;return a[s]=!0,Z.each(e[s]||[],function(e,s){var c=s(t,n,i);return"string"!=typeof c||o||a[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}var a={},o=e===bt;return r(t.dataTypes[0])||!a["*"]&&r("*")}function L(e,t){var n,i,r=Z.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&Z.extend(!0,e,i),e}function R(e,t,n){for(var i,r,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)a=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}o||(o=r)}a=a||o}return a?(a!==l[0]&&l.unshift(a),n[a]):void 0}function F(e,t,n,i){var r,a,o,s,l,c={},u=e.dataTypes.slice();

if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(a=u.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=u.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(o=c[l+" "+a]||c["* "+a],!o)for(r in c)if(s=r.split(" "),s[1]===a&&(o=c[l+" "+s[0]]||c["* "+s[0]])){o===!0?o=c[r]:c[r]!==!0&&(a=s[0],u.unshift(s[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(d){return{state:"parsererror",error:o?d:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}function U(e,t,n,i){var r;if(Z.isArray(t))Z.each(t,function(t,r){n||St.test(e)?i(e,r):U(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==Z.type(t))i(e,t);else for(r in t)U(e+"["+r+"]",t[r],n,i)}function z(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var q=[],B=q.slice,H=q.concat,V=q.push,W=q.indexOf,G={},K=G.toString,X=G.hasOwnProperty,Y={},J=e.document,Q="2.1.4",Z=function(e,t){return new Z.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,ie=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:Q,constructor:Z,selector:"",length:0,toArray:function(){return B.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:B.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(B.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:q.sort,splice:q.splice},Z.extend=Z.fn.extend=function(){var e,t,n,i,r,a,o=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[s]||{},s++),"object"==typeof o||Z.isFunction(o)||(o={}),s===l&&(o=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)n=o[t],i=e[t],o!==i&&(c&&i&&(Z.isPlainObject(i)||(r=Z.isArray(i)))?(r?(r=!1,a=n&&Z.isArray(n)?n:[]):a=n&&Z.isPlainObject(n)?n:{},o[t]=Z.extend(c,a,i)):void 0!==i&&(o[t]=i));return o},Z.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==Z.type(e)||e.nodeType||Z.isWindow(e)?!1:e.constructor&&!X.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?G[K.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,ie)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,a=0,o=e.length,s=n(e);if(i){if(s)for(;o>a&&(r=t.apply(e[a],i),r!==!1);a++);else for(a in e)if(r=t.apply(e[a],i),r===!1)break}else if(s)for(;o>a&&(r=t.call(e[a],a,e[a]),r!==!1);a++);else for(a in e)if(r=t.call(e[a],a,e[a]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?Z.merge(i,"string"==typeof e?[e]:e):V.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:W.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],a=0,o=e.length,s=!n;o>a;a++)i=!t(e[a],a),i!==s&&r.push(e[a]);return r},map:function(e,t,i){var r,a=0,o=e.length,s=n(e),l=[];if(s)for(;o>a;a++)r=t(e[a],a,i),null!=r&&l.push(r);else for(a in e)r=t(e[a],a,i),null!=r&&l.push(r);return H.apply([],l)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),Z.isFunction(e)?(i=B.call(arguments,2),r=function(){return e.apply(t||this,i.concat(B.call(arguments)))},r.guid=e.guid=e.guid||Z.guid++,r):void 0},now:Date.now,support:Y}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){G["[object "+t+"]"]=t.toLowerCase()});var re=function(e){function t(e,t,n,i){var r,a,o,s,l,c,d,h,f,g;if((t?t.ownerDocument||t:U)!==D&&I(t),t=t||D,n=n||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return n;if(!i&&N){if(11!==s&&(r=ye.exec(e)))if(o=r[1]){if(9===s){if(a=t.getElementById(o),!a||!a.parentNode)return n;if(a.id===o)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(o))&&R(t,a)&&a.id===o)return n.push(a),n}else{if(r[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((o=r[3])&&x.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(o)),n}if(x.qsa&&(!j||!j.test(e))){if(h=d=F,f=t,g=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=_(e),(d=t.getAttribute("id"))?h=d.replace(we,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",l=c.length;l--;)c[l]=h+p(c[l]);f=be.test(e)&&u(t.parentNode)||t,g=c.join(",")}if(g)try{return Q.apply(n,f.querySelectorAll(g)),n}catch(m){}finally{d||t.removeAttribute("id")}}}return $(e.replace(le,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>k.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[F]=!0,e}function r(e){var t=D.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),i=e.length;i--;)k.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var r,a=e([],n.length,t),o=a.length;o--;)n[r=a[o]]&&(n[r]=!(i[r]=n[r]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function h(e,t,n){var i=t.dir,r=n&&"parentNode"===i,a=q++;return t.first?function(t,n,a){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,a)}:function(t,n,o){var s,l,c=[z,a];if(o){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,o))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[F]||(t[F]={}),(s=l[i])&&s[0]===z&&s[1]===a)return c[2]=s[2];if(l[i]=c,c[2]=e(t,n,o))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function g(e,n,i){for(var r=0,a=n.length;a>r;r++)t(e,n[r],i);return i}function m(e,t,n,i,r){for(var a,o=[],s=0,l=e.length,c=null!=t;l>s;s++)(a=e[s])&&(!n||n(a,i,r))&&(o.push(a),c&&t.push(s));return o}function v(e,t,n,r,a,o){return r&&!r[F]&&(r=v(r)),a&&!a[F]&&(a=v(a,o)),i(function(i,o,s,l){var c,u,d,p=[],h=[],f=o.length,v=i||g(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?v:m(v,p,e,s,l),b=n?a||(i?e:f||r)?[]:o:y;if(n&&n(y,b,s,l),r)for(c=m(b,h),r(c,[],s,l),u=c.length;u--;)(d=c[u])&&(b[h[u]]=!(y[h[u]]=d));if(i){if(a||e){if(a){for(c=[],u=b.length;u--;)(d=b[u])&&c.push(y[u]=d);a(null,b=[],c,l)}for(u=b.length;u--;)(d=b[u])&&(c=a?ee(i,d):p[u])>-1&&(i[c]=!(o[c]=d))}}else b=m(b===o?b.splice(f,b.length):b),a?a(null,o,b,l):Q.apply(o,b)})}function y(e){for(var t,n,i,r=e.length,a=k.relative[e[0].type],o=a||k.relative[" "],s=a?1:0,l=h(function(e){return e===t},o,!0),c=h(function(e){return ee(t,e)>-1},o,!0),u=[function(e,n,i){var r=!a&&(i||n!==A)||((t=n).nodeType?l(e,n,i):c(e,n,i));return t=null,r}];r>s;s++)if(n=k.relative[e[s].type])u=[h(f(u),n)];else{if(n=k.filter[e[s].type].apply(null,e[s].matches),n[F]){for(i=++s;r>i&&!k.relative[e[i].type];i++);return v(s>1&&f(u),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(le,"$1"),n,i>s&&y(e.slice(s,i)),r>i&&y(e=e.slice(i)),r>i&&p(e))}u.push(n)}return f(u)}function b(e,n){var r=n.length>0,a=e.length>0,o=function(i,o,s,l,c){var u,d,p,h=0,f="0",g=i&&[],v=[],y=A,b=i||a&&k.find.TAG("*",c),w=z+=null==y?1:Math.random()||.1,x=b.length;for(c&&(A=o!==D&&o);f!==x&&null!=(u=b[f]);f++){if(a&&u){for(d=0;p=e[d++];)if(p(u,o,s)){l.push(u);break}c&&(z=w)}r&&((u=!p&&u)&&h--,i&&g.push(u))}if(h+=f,r&&f!==h){for(d=0;p=n[d++];)p(g,v,o,s);if(i){if(h>0)for(;f--;)g[f]||v[f]||(v[f]=Y.call(l));v=m(v)}Q.apply(l,v),c&&!i&&v.length>0&&h+n.length>1&&t.uniqueSort(l)}return c&&(z=w,A=y),g};return r?i(o):o}var w,x,k,C,S,_,T,$,A,E,P,I,D,M,N,j,O,L,R,F="sizzle"+1*new Date,U=e.document,z=0,q=0,B=n(),H=n(),V=n(),W=function(e,t){return e===t&&(P=!0),0},G=1<<31,K={}.hasOwnProperty,X=[],Y=X.pop,J=X.push,Q=X.push,Z=X.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=ie.replace("w","w#"),ae="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",oe=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),de=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),pe=new RegExp(oe),he=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,we=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),ke=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Ce=function(){I()};try{Q.apply(X=Z.call(U.childNodes),U.childNodes),X[U.childNodes.length].nodeType}catch(Se){Q={apply:X.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}x=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},I=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:U;return i!==D&&9===i.nodeType&&i.documentElement?(D=i,M=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),N=!S(i),x.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=ve.test(i.getElementsByClassName),x.getById=r(function(e){return M.appendChild(e).id=F,!i.getElementsByName||!i.getElementsByName(F).length}),x.getById?(k.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&N){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},k.filter.ID=function(e){var t=e.replace(xe,ke);return function(e){return e.getAttribute("id")===t}}):(delete k.find.ID,k.filter.ID=function(e){var t=e.replace(xe,ke);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),k.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},k.find.CLASS=x.getElementsByClassName&&function(e,t){return N?t.getElementsByClassName(e):void 0},O=[],j=[],(x.qsa=ve.test(i.querySelectorAll))&&(r(function(e){M.appendChild(e).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&j.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||j.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+F+"-]").length||j.push("~="),e.querySelectorAll(":checked").length||j.push(":checked"),e.querySelectorAll("a#"+F+"+*").length||j.push(".#.+[+~]")}),r(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&j.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||j.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),j.push(",.*:")})),(x.matchesSelector=ve.test(L=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&r(function(e){x.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),O.push("!=",oe)}),j=j.length&&new RegExp(j.join("|")),O=O.length&&new RegExp(O.join("|")),t=ve.test(M.compareDocumentPosition),R=t||ve.test(M.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return P=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===U&&R(U,e)?-1:t===i||t.ownerDocument===U&&R(U,t)?1:E?ee(E,e)-ee(E,t):0:4&n?-1:1)}:function(e,t){if(e===t)return P=!0,0;var n,r=0,a=e.parentNode,s=t.parentNode,l=[e],c=[t];if(!a||!s)return e===i?-1:t===i?1:a?-1:s?1:E?ee(E,e)-ee(E,t):0;if(a===s)return o(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[r]===c[r];)r++;return r?o(l[r],c[r]):l[r]===U?-1:c[r]===U?1:0},i):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==D&&I(e),n=n.replace(de,"='$1']"),!(!x.matchesSelector||!N||O&&O.test(n)||j&&j.test(n)))try{var i=L.call(e,n);if(i||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&I(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&I(e);var n=k.attrHandle[t.toLowerCase()],i=n&&K.call(k.attrHandle,t.toLowerCase())?n(e,t,!N):void 0;return void 0!==i?i:x.attributes||!N?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(P=!x.detectDuplicates,E=!x.sortStable&&e.slice(0),e.sort(W),P){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return E=null,e},C=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=C(t);return n},k=t.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xe,ke),e[3]=(e[3]||e[4]||e[5]||"").replace(xe,ke),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&pe.test(n)&&(t=_(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xe,ke).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=B[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&B(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var a=t.attr(r,e);return null==a?"!="===n:n?(a+="","="===n?a===i:"!="===n?a!==i:"^="===n?i&&0===a.indexOf(i):"*="===n?i&&a.indexOf(i)>-1:"$="===n?i&&a.slice(-i.length)===i:"~="===n?(" "+a.replace(se," ")+" ").indexOf(i)>-1:"|="===n?a===i||a.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,p,h,f,g=a!==o?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(m){if(a){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&y){for(u=m[F]||(m[F]={}),c=u[e]||[],h=c[0]===z&&c[1],p=c[0]===z&&c[2],d=h&&m.childNodes[h];d=++h&&d&&d[g]||(p=h=0)||f.pop();)if(1===d.nodeType&&++p&&d===t){u[e]=[z,h,p];break}}else if(y&&(c=(t[F]||(t[F]={}))[e])&&c[0]===z)p=c[1];else for(;(d=++h&&d&&d[g]||(p=h=0)||f.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++p||(y&&((d[F]||(d[F]={}))[e]=[z,p]),d!==t)););return p-=r,p===i||p%i===0&&p/i>=0}}},PSEUDO:function(e,n){var r,a=k.pseudos[e]||k.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[F]?a(n):a.length>1?(r=[e,e,"",n],k.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=a(e,n),o=r.length;o--;)i=ee(e,r[o]),e[i]=!(t[i]=r[o])}):function(e){return a(e,0,r)}):a}},pseudos:{not:i(function(e){var t=[],n=[],r=T(e.replace(le,"$1"));return r[F]?i(function(e,t,n,i){for(var a,o=r(e,null,i,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,i,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(xe,ke),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:i(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xe,ke).toLowerCase(),function(t){var n;do if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},k.pseudos.nth=k.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})k.pseudos[w]=l(w);return d.prototype=k.filters=k.pseudos,k.setFilters=new d,_=t.tokenize=function(e,n){var i,r,a,o,s,l,c,u=H[e+" "];if(u)return n?0:u.slice(0);for(s=e,l=[],c=k.preFilter;s;){(!i||(r=ce.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(a=[])),i=!1,(r=ue.exec(s))&&(i=r.shift(),a.push({value:i,type:r[0].replace(le," ")}),s=s.slice(i.length));for(o in k.filter)!(r=fe[o].exec(s))||c[o]&&!(r=c[o](r))||(i=r.shift(),a.push({value:i,type:o,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):H(e,l).slice(0)},T=t.compile=function(e,t){var n,i=[],r=[],a=V[e+" "];if(!a){for(t||(t=_(e)),n=t.length;n--;)a=y(t[n]),a[F]?i.push(a):r.push(a);a=V(e,b(r,i)),a.selector=e}return a},$=t.select=function(e,t,n,i){var r,a,o,s,l,c="function"==typeof e&&e,d=!i&&_(e=c.selector||e);if(n=n||[],1===d.length){if(a=d[0]=d[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&x.getById&&9===t.nodeType&&N&&k.relative[a[1].type]){if(t=(k.find.ID(o.matches[0].replace(xe,ke),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(r=fe.needsContext.test(e)?0:a.length;r--&&(o=a[r],!k.relative[s=o.type]);)if((l=k.find[s])&&(i=l(o.matches[0].replace(xe,ke),be.test(a[0].type)&&u(t.parentNode)||t))){if(a.splice(r,1),e=i.length&&p(a),!e)return Q.apply(n,i),n;break}}return(c||T(e,d))(i,t,!N,n,be.test(e)&&u(t.parentNode)||t),n},x.sortStable=F.split("").sort(W).join("")===F,x.detectDuplicates=!!P,I(),x.sortDetached=r(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||a(te,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);Z.find=re,Z.expr=re.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=re.uniqueSort,Z.text=re.getText,Z.isXMLDoc=re.isXML,Z.contains=re.contains;var ae=Z.expr.match.needsContext,oe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?Z.find.matchesSelector(i,e)?[i]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){for(t=0;n>t;t++)if(Z.contains(r[t],this))return!0}));for(t=0;n>t;t++)Z.find(e,r[t],i);return i=this.pushStack(n>1?Z.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ae.test(e)?Z(e):e||[],!1).length}});var le,ce=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ue=Z.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ce.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||le).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),oe.test(n[1])&&Z.isPlainObject(t))for(n in t)Z.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return i=J.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof le.ready?le.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};ue.prototype=Z.fn,le=Z(J);var de=/^(?:parents|prev(?:Until|All))/,pe={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&Z(e).is(n))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Z.fn.extend({has:function(e){var t=Z(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,a=[],o=ae.test(e)||"string"!=typeof e?Z(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?Z.unique(a):a)},index:function(e){return e?"string"==typeof e?W.call(Z(e),this[0]):W.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Z.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Z.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Z.dir(e,"previousSibling",n)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(n,i){var r=Z.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=Z.filter(i,r)),this.length>1&&(pe[e]||Z.unique(r),de.test(e)&&r.reverse()),this.pushStack(r)}});var he=/\S+/g,fe={};Z.Callbacks=function(e){e="string"==typeof e?fe[e]||a(e):Z.extend({},e);var t,n,i,r,o,s,l=[],c=!e.once&&[],u=function(a){for(t=e.memory&&a,n=!0,s=r||0,r=0,o=l.length,i=!0;l&&o>s;s++)if(l[s].apply(a[0],a[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,l&&(c?c.length&&u(c.shift()):t?l=[]:d.disable())},d={add:function(){if(l){var n=l.length;!function a(t){Z.each(t,function(t,n){var i=Z.type(n);"function"===i?e.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==i&&a(n)})}(arguments),i?o=l.length:t&&(r=n,u(t))}return this},remove:function(){return l&&Z.each(arguments,function(e,t){for(var n;(n=Z.inArray(t,l,n))>-1;)l.splice(n,1),i&&(o>=n&&o--,s>=n&&s--)}),this},has:function(e){return e?Z.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=c=t=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,t||d.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!l||n&&!c||(t=t||[],t=[e,t.slice?t.slice():t],i?c.push(t):u(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(n){Z.each(t,function(t,a){var o=Z.isFunction(e[t])&&e[t];r[a[1]](function(){var e=o&&o.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a[0]+"With"](this===i?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,i):i}},r={};return i.pipe=i.then,Z.each(t,function(e,a){var o=a[2],s=a[3];i[a[1]]=o.add,s&&o.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[a[0]]=function(){return r[a[0]+"With"](this===r?i:this,arguments),this},r[a[0]+"With"]=o.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,a=B.call(arguments),o=a.length,s=1!==o||e&&Z.isFunction(e.promise)?o:0,l=1===s?e:Z.Deferred(),c=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?B.call(arguments):r,i===t?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(o>1)for(t=new Array(o),n=new Array(o),i=new Array(o);o>r;r++)a[r]&&Z.isFunction(a[r].promise)?a[r].promise().done(c(r,i,a)).fail(l.reject).progress(c(r,n,t)):--s;return s||l.resolveWith(i,a),l.promise()}});var ge;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(ge.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(t){return ge||(ge=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",o,!1))),ge.promise(t)},Z.ready.promise();var me=Z.access=function(e,t,n,i,r,a,o){var s=0,l=e.length,c=null==n;if("object"===Z.type(n)){r=!0;for(s in n)Z.access(e,t,s,n[s],!0,a,o)}else if(void 0!==i&&(r=!0,Z.isFunction(i)||(o=!0),c&&(o?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(Z(e),n)})),t))for(;l>s;s++)t(e[s],n,o?i:i.call(e[s],s,t(e[s],n)));return r?e:c?t.call(e):l?t(e[0],n):a};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=Z.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=s.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,Z.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),a=this.cache[r];if("string"==typeof t)a[t]=n;else if(Z.isEmptyObject(a))Z.extend(this.cache[r],t);else for(i in t)a[i]=t[i];return a},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,Z.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,a=this.key(e),o=this.cache[a];if(void 0===t)this.cache[a]={};else{Z.isArray(t)?i=t.concat(t.map(Z.camelCase)):(r=Z.camelCase(t),t in o?i=[t,r]:(i=r,i=i in o?[i]:i.match(he)||[])),n=i.length;for(;n--;)delete o[i[n]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ve=new s,ye=new s,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,we=/([A-Z])/g;Z.extend({hasData:function(e){return ye.hasData(e)||ve.hasData(e)},data:function(e,t,n){return ye.access(e,t,n)},removeData:function(e,t){ye.remove(e,t)},_data:function(e,t,n){return ve.access(e,t,n)},_removeData:function(e,t){ve.remove(e,t)}}),Z.fn.extend({data:function(e,t){var n,i,r,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(r=ye.get(a),1===a.nodeType&&!ve.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(i=o[n].name,0===i.indexOf("data-")&&(i=Z.camelCase(i.slice(5)),l(a,i,r[i])));ve.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ye.set(this,e)}):me(this,function(t){
var n,i=Z.camelCase(e);if(a&&void 0===t){if(n=ye.get(a,e),void 0!==n)return n;if(n=ye.get(a,i),void 0!==n)return n;if(n=l(a,i,void 0),void 0!==n)return n}else this.each(function(){var n=ye.get(this,i);ye.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&ye.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),Z.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=ve.get(e,t),n&&(!i||Z.isArray(n)?i=ve.access(e,t,Z.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Z.queue(e,t),i=n.length,r=n.shift(),a=Z._queueHooks(e,t),o=function(){Z.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete a.stop,r.call(e,o,a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ve.get(e,n)||ve.access(e,n,{empty:Z.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",n])})})}}),Z.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Z.queue(this[0],e):void 0===t?this:this.each(function(){var n=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=Z.Deferred(),a=this,o=this.length,s=function(){--i||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)n=ve.get(a[o],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var xe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ke=["Top","Right","Bottom","Left"],Ce=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},Se=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),Y.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Y.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var _e="undefined";Y.focusinBubbles="onfocusin"in e;var Te=/^key/,$e=/^(?:mouse|pointer|contextmenu)|click/,Ae=/^(?:focusinfocus|focusoutblur)$/,Ee=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,n,i,r){var a,o,s,l,c,u,d,p,h,f,g,m=ve.get(e);if(m)for(n.handler&&(a=n,n=a.handler,r=a.selector),n.guid||(n.guid=Z.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(t){return typeof Z!==_e&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(he)||[""],c=t.length;c--;)s=Ee.exec(t[c])||[],h=g=s[1],f=(s[2]||"").split(".").sort(),h&&(d=Z.event.special[h]||{},h=(r?d.delegateType:d.bindType)||h,d=Z.event.special[h]||{},u=Z.extend({type:h,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&Z.expr.match.needsContext.test(r),namespace:f.join(".")},a),(p=l[h])||(p=l[h]=[],p.delegateCount=0,d.setup&&d.setup.call(e,i,f,o)!==!1||e.addEventListener&&e.addEventListener(h,o,!1)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,u):p.push(u),Z.event.global[h]=!0)},remove:function(e,t,n,i,r){var a,o,s,l,c,u,d,p,h,f,g,m=ve.hasData(e)&&ve.get(e);if(m&&(l=m.events)){for(t=(t||"").match(he)||[""],c=t.length;c--;)if(s=Ee.exec(t[c])||[],h=g=s[1],f=(s[2]||"").split(".").sort(),h){for(d=Z.event.special[h]||{},h=(i?d.delegateType:d.bindType)||h,p=l[h]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=p.length;a--;)u=p[a],!r&&g!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(p.splice(a,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));o&&!p.length&&(d.teardown&&d.teardown.call(e,f,m.handle)!==!1||Z.removeEvent(e,h,m.handle),delete l[h])}else for(h in l)Z.event.remove(e,h+t[c],n,i,!0);Z.isEmptyObject(l)&&(delete m.handle,ve.remove(e,"events"))}},trigger:function(t,n,i,r){var a,o,s,l,c,u,d,p=[i||J],h=X.call(t,"type")?t.type:t,f=X.call(t,"namespace")?t.namespace.split("."):[];if(o=s=i=i||J,3!==i.nodeType&&8!==i.nodeType&&!Ae.test(h+Z.event.triggered)&&(h.indexOf(".")>=0&&(f=h.split("."),h=f.shift(),f.sort()),c=h.indexOf(":")<0&&"on"+h,t=t[Z.expando]?t:new Z.Event(h,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:Z.makeArray(n,[t]),d=Z.event.special[h]||{},r||!d.trigger||d.trigger.apply(i,n)!==!1)){if(!r&&!d.noBubble&&!Z.isWindow(i)){for(l=d.delegateType||h,Ae.test(l+h)||(o=o.parentNode);o;o=o.parentNode)p.push(o),s=o;s===(i.ownerDocument||J)&&p.push(s.defaultView||s.parentWindow||e)}for(a=0;(o=p[a++])&&!t.isPropagationStopped();)t.type=a>1?l:d.bindType||h,u=(ve.get(o,"events")||{})[t.type]&&ve.get(o,"handle"),u&&u.apply(o,n),u=c&&o[c],u&&u.apply&&Z.acceptData(o)&&(t.result=u.apply(o,n),t.result===!1&&t.preventDefault());return t.type=h,r||t.isDefaultPrevented()||d._default&&d._default.apply(p.pop(),n)!==!1||!Z.acceptData(i)||c&&Z.isFunction(i[h])&&!Z.isWindow(i)&&(s=i[c],s&&(i[c]=null),Z.event.triggered=h,i[h](),Z.event.triggered=void 0,s&&(i[c]=s)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,n,i,r,a,o=[],s=B.call(arguments),l=(ve.get(this,"events")||{})[e.type]||[],c=Z.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(o=Z.event.handlers.call(this,e,l),t=0;(r=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,i=((Z.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,s),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,a,o=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(i=[],n=0;s>n;n++)a=t[n],r=a.selector+" ",void 0===i[r]&&(i[r]=a.needsContext?Z(r,this).index(l)>=0:Z.find(r,this,null,[l]).length),i[r]&&i.push(a);i.length&&o.push({elem:l,handlers:i})}return s<t.length&&o.push({elem:this,handlers:t.slice(s)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,a=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,n,i,r=e.type,a=e,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=$e.test(r)?this.mouseHooks:Te.test(r)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,e=new Z.Event(a),t=i.length;t--;)n=i[t],e[n]=a[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==d()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===d()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=Z.extend(new Z.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?Z.event.trigger(r,null,t):Z.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?c:u):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,a=e.handleObj;return(!r||r!==i&&!Z.contains(i,r))&&(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),Y.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=ve.access(i,t);r||i.addEventListener(e,n,!0),ve.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=ve.access(i,t)-1;r?ve.access(i,t,r):(i.removeEventListener(e,n,!0),ve.remove(i,t))}}}),Z.fn.extend({on:function(e,t,n,i,r){var a,o;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=u;else if(!i)return this;return 1===r&&(a=i,i=function(e){return Z().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Z(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=u),this.each(function(){Z.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Z.event.trigger(e,t,n,!0):void 0}});var Pe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ie=/<([\w:]+)/,De=/<|&#?\w+;/,Me=/<(?:script|style|link)/i,Ne=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^$|\/(?:java|ecma)script/i,Oe=/^true\/(.*)/,Le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Re={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Re.optgroup=Re.option,Re.tbody=Re.tfoot=Re.colgroup=Re.caption=Re.thead,Re.th=Re.td,Z.extend({clone:function(e,t,n){var i,r,a,o,s=e.cloneNode(!0),l=Z.contains(e.ownerDocument,e);if(!(Y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(o=v(s),a=v(e),i=0,r=a.length;r>i;i++)y(a[i],o[i]);if(t)if(n)for(a=a||v(e),o=o||v(s),i=0,r=a.length;r>i;i++)m(a[i],o[i]);else m(e,s);return o=v(s,"script"),o.length>0&&g(o,!l&&v(e,"script")),s},buildFragment:function(e,t,n,i){for(var r,a,o,s,l,c,u=t.createDocumentFragment(),d=[],p=0,h=e.length;h>p;p++)if(r=e[p],r||0===r)if("object"===Z.type(r))Z.merge(d,r.nodeType?[r]:r);else if(De.test(r)){for(a=a||u.appendChild(t.createElement("div")),o=(Ie.exec(r)||["",""])[1].toLowerCase(),s=Re[o]||Re._default,a.innerHTML=s[1]+r.replace(Pe,"<$1></$2>")+s[2],c=s[0];c--;)a=a.lastChild;Z.merge(d,a.childNodes),a=u.firstChild,a.textContent=""}else d.push(t.createTextNode(r));for(u.textContent="",p=0;r=d[p++];)if((!i||-1===Z.inArray(r,i))&&(l=Z.contains(r.ownerDocument,r),a=v(u.appendChild(r),"script"),l&&g(a),n))for(c=0;r=a[c++];)je.test(r.type||"")&&n.push(r);return u},cleanData:function(e){for(var t,n,i,r,a=Z.event.special,o=0;void 0!==(n=e[o]);o++){if(Z.acceptData(n)&&(r=n[ve.expando],r&&(t=ve.cache[r]))){if(t.events)for(i in t.events)a[i]?Z.event.remove(n,i):Z.removeEvent(n,i,t.handle);ve.cache[r]&&delete ve.cache[r]}delete ye.cache[n[ye.expando]]}}}),Z.fn.extend({text:function(e){return me(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?Z.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||Z.cleanData(v(n)),n.parentNode&&(t&&Z.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return me(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Me.test(e)&&!Re[(Ie.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Pe,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(Z.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=H.apply([],e);var n,i,r,a,o,s,l=0,c=this.length,u=this,d=c-1,p=e[0],g=Z.isFunction(p);if(g||c>1&&"string"==typeof p&&!Y.checkClone&&Ne.test(p))return this.each(function(n){var i=u.eq(n);g&&(e[0]=p.call(this,n,i.html())),i.domManip(e,t)});if(c&&(n=Z.buildFragment(e,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(r=Z.map(v(n,"script"),h),a=r.length;c>l;l++)o=n,l!==d&&(o=Z.clone(o,!0,!0),a&&Z.merge(r,v(o,"script"))),t.call(this[l],o,l);if(a)for(s=r[r.length-1].ownerDocument,Z.map(r,f),l=0;a>l;l++)o=r[l],je.test(o.type||"")&&!ve.access(o,"globalEval")&&Z.contains(s,o)&&(o.src?Z._evalUrl&&Z._evalUrl(o.src):Z.globalEval(o.textContent.replace(Le,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var n,i=[],r=Z(e),a=r.length-1,o=0;a>=o;o++)n=o===a?this:this.clone(!0),Z(r[o])[t](n),V.apply(i,n.get());return this.pushStack(i)}});var Fe,Ue={},ze=/^margin/,qe=new RegExp("^("+xe+")(?!px)[a-z%]+$","i"),Be=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",r.appendChild(a);var t=e.getComputedStyle(o,null);n="1%"!==t.top,i="4px"===t.width,r.removeChild(a)}var n,i,r=J.documentElement,a=J.createElement("div"),o=J.createElement("div");o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===o.style.backgroundClip,a.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",a.appendChild(o),e.getComputedStyle&&Z.extend(Y,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},reliableMarginRight:function(){var t,n=o.appendChild(J.createElement("div"));return n.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",o.style.width="1px",r.appendChild(a),t=!parseFloat(e.getComputedStyle(n,null).marginRight),r.removeChild(a),o.removeChild(n),t}}))}(),Z.swap=function(e,t,n,i){var r,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];r=n.apply(e,i||[]);for(a in t)e.style[a]=o[a];return r};var He=/^(none|table(?!-c[ea]).+)/,Ve=new RegExp("^("+xe+")(.*)$","i"),We=new RegExp("^([+-])=("+xe+")","i"),Ge={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"},Xe=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=x(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,o,s=Z.camelCase(t),l=e.style;return t=Z.cssProps[s]||(Z.cssProps[s]=C(l,s)),o=Z.cssHooks[t]||Z.cssHooks[s],void 0===n?o&&"get"in o&&void 0!==(r=o.get(e,!1,i))?r:l[t]:(a=typeof n,"string"===a&&(r=We.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(Z.css(e,t)),a="number"),null!=n&&n===n&&("number"!==a||Z.cssNumber[s]||(n+="px"),Y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,i))||(l[t]=n)),void 0)}},css:function(e,t,n,i){var r,a,o,s=Z.camelCase(t);return t=Z.cssProps[s]||(Z.cssProps[s]=C(e.style,s)),o=Z.cssHooks[t]||Z.cssHooks[s],o&&"get"in o&&(r=o.get(e,!0,n)),void 0===r&&(r=x(e,t,i)),"normal"===r&&t in Ke&&(r=Ke[t]),""===n||n?(a=parseFloat(r),n===!0||Z.isNumeric(a)?a||0:r):r}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,n,i){return n?He.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,Ge,function(){return T(e,t,i)}):T(e,t,i):void 0},set:function(e,n,i){var r=i&&Be(e);return S(e,n,i?_(e,t,i,"border-box"===Z.css(e,"boxSizing",!1,r),r):0)}}}),Z.cssHooks.marginRight=k(Y.reliableMarginRight,function(e,t){return t?Z.swap(e,{display:"inline-block"},x,[e,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(n){for(var i=0,r={},a="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+ke[i]+t]=a[i]||a[i-2]||a[0];return r}},ze.test(e)||(Z.cssHooks[e+t].set=S)}),Z.fn.extend({css:function(e,t){return me(this,function(e,t,n){var i,r,a={},o=0;if(Z.isArray(t)){for(i=Be(e),r=t.length;r>o;o++)a[t[o]]=Z.css(e,t[o],!1,i);return a}return void 0!==n?Z.style(e,t,n):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return $(this,!0)},hide:function(){return $(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ce(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=A,A.prototype={constructor:A,init:function(e,t,n,i,r,a){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(Z.cssNumber[n]?"":"px")},cur:function(){var e=A.propHooks[this.prop];return e&&e.get?e.get(this):A.propHooks._default.get(this)},run:function(e){var t,n=A.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=A.prototype.init,Z.fx.step={};var Ye,Je,Qe=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+xe+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[D],nt={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=Ze.exec(t),a=r&&r[3]||(Z.cssNumber[e]?"":"px"),o=(Z.cssNumber[e]||"px"!==a&&+i)&&Ze.exec(Z.css(n.elem,e)),s=1,l=20;if(o&&o[3]!==a){a=a||o[3],r=r||[],o=+i||1;do s=s||".5",o/=s,Z.style(n.elem,e,o+a);while(s!==(s=n.cur()/i)&&1!==s&&--l)}return r&&(o=n.start=+o||+i||0,n.unit=a,n.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),n}]};Z.Animation=Z.extend(N,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),Z.speed=function(e,t,n){var i=e&&"object"==typeof e?Z.extend({},e):{complete:n||!n&&t||Z.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Z.isFunction(t)&&t};return i.duration=Z.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Z.fx.speeds?Z.fx.speeds[i.duration]:Z.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Z.isFunction(i.old)&&i.old.call(this),i.queue&&Z.dequeue(this,i.queue)},i},Z.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ce).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=Z.isEmptyObject(e),a=Z.speed(t,n,i),o=function(){var t=N(this,Z.extend({},e),a);(r||ve.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||a.queue===!1?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",a=Z.timers,o=ve.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&et.test(r)&&i(o[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(n),t=!1,a.splice(r,1));(t||!n)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ve.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],a=Z.timers,o=i?i.length:0;for(n.finish=!0,Z.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;o>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var n=Z.fn[t];Z.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(P(t,!0),e,i,r)}}),Z.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,n=Z.timers;for(Ye=Z.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Z.fx.stop(),Ye=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Je||(Je=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Je),Je=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",Y.checkOn=""!==e.value,Y.optSelected=n.selected,t.disabled=!0,Y.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",Y.radioValue="t"===e.value}();var it,rt,at=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return me(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,n){var i,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===_e?Z.prop(e,t,n):(1===a&&Z.isXMLDoc(e)||(t=t.toLowerCase(),i=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?rt:it)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=Z.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void Z.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,a=t&&t.match(he);if(a&&1===e.nodeType)for(;n=a[r++];)i=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!Y.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),rt={set:function(e,t,n){return t===!1?Z.removeAttr(e,n):e.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var n=at[t]||Z.find.attr;at[t]=function(e,t,i){var r,a;return i||(a=at[t],at[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,at[t]=a),r}});var ot=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return me(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return a=1!==o||!Z.isXMLDoc(e),a&&(t=Z.propFix[t]||t,r=Z.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||ot.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Y.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var st=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,n,i,r,a,o,s="string"==typeof e&&e,l=0,c=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(he)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(st," "):" ")){for(a=0;r=t[a++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o=Z.trim(i),n.className!==o&&(n.className=o)}return this},removeClass:function(e){var t,n,i,r,a,o,s=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(he)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(st," "):"")){for(a=0;r=t[a++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");o=e?Z.trim(i):"",n.className!==o&&(n.className=o)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(Z.isFunction(e)?function(n){Z(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=Z(this),a=e.match(he)||[];t=a[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===_e||"boolean"===n)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(st," ").indexOf(t)>=0)return!0;return!1}});var lt=/\r/g;Z.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=Z.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,Z(this).val()):e,null==r?r="":"number"==typeof r?r+="":Z.isArray(r)&&(r=Z.map(r,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=Z.valHooks[r.type]||Z.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(lt,""):null==n?"":n)}}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,a="select-one"===e.type||0>r,o=a?null:[],s=a?r+1:i.length,l=0>r?s:a?r:0;s>l;l++)if(n=i[l],!(!n.selected&&l!==r||(Y.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Z.nodeName(n.parentNode,"optgroup"))){if(t=Z(n).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var n,i,r=e.options,a=Z.makeArray(t),o=r.length;o--;)i=r[o],(i.selected=Z.inArray(i.value,a)>=0)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},Y.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var ct=Z.now(),ut=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var dt=/#.*$/,pt=/([?&])_=[^&]*/,ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,ft=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gt=/^(?:GET|HEAD)$/,mt=/^\/\//,vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yt={},bt={},wt="*/".concat("*"),xt=e.location.href,kt=vt.exec(xt.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt,type:"GET",isLocal:ft.test(kt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?L(L(e,Z.ajaxSettings),t):L(Z.ajaxSettings,e)},ajaxPrefilter:j(yt),ajaxTransport:j(bt),ajax:function(e,t){function n(e,t,n,o){var l,u,v,y,w,k=t;2!==b&&(b=2,s&&clearTimeout(s),i=void 0,
a=o||"",x.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&(y=R(d,x,n)),y=F(d,y,x,l),l?(d.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(Z.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(Z.etag[r]=w)),204===e||"HEAD"===d.type?k="nocontent":304===e?k="notmodified":(k=y.state,u=y.data,v=y.error,l=!v)):(v=k,(e||!k)&&(k="error",0>e&&(e=0))),x.status=e,x.statusText=(t||k)+"",l?f.resolveWith(p,[u,k,x]):f.rejectWith(p,[x,k,v]),x.statusCode(m),m=void 0,c&&h.trigger(l?"ajaxSuccess":"ajaxError",[x,d,l?u:v]),g.fireWith(p,[x,k]),c&&(h.trigger("ajaxComplete",[x,d]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,a,o,s,l,c,u,d=Z.ajaxSetup({},t),p=d.context||d,h=d.context&&(p.nodeType||p.jquery)?Z(p):Z.event,f=Z.Deferred(),g=Z.Callbacks("once memory"),m=d.statusCode||{},v={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o)for(o={};t=ht.exec(a);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return i&&i.abort(t),n(0,t),this}};if(f.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,d.url=((e||d.url||xt)+"").replace(dt,"").replace(mt,kt[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=Z.trim(d.dataType||"*").toLowerCase().match(he)||[""],null==d.crossDomain&&(l=vt.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]===kt[1]&&l[2]===kt[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(kt[3]||("http:"===kt[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=Z.param(d.data,d.traditional)),O(yt,d,t,x),2===b)return x;c=Z.event&&d.global,c&&0===Z.active++&&Z.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!gt.test(d.type),r=d.url,d.hasContent||(d.data&&(r=d.url+=(ut.test(r)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=pt.test(r)?r.replace(pt,"$1_="+ct++):r+(ut.test(r)?"&":"?")+"_="+ct++)),d.ifModified&&(Z.lastModified[r]&&x.setRequestHeader("If-Modified-Since",Z.lastModified[r]),Z.etag[r]&&x.setRequestHeader("If-None-Match",Z.etag[r])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+wt+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)x.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(p,x,d)===!1||2===b))return x.abort();w="abort";for(u in{success:1,error:1,complete:1})x[u](d[u]);if(i=O(bt,d,t,x)){x.readyState=1,c&&h.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){x.abort("timeout")},d.timeout));try{b=1,i.send(v,n)}catch(k){if(!(2>b))throw k;n(-1,k)}}else n(-1,"No Transport");return x},getJSON:function(e,t,n){return Z.get(e,t,n,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,n,i,r){return Z.isFunction(n)&&(r=r||i,i=n,n=void 0),Z.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Z.isFunction(e)?function(t){Z(this).wrapInner(e.call(this,t))}:function(){var t=Z(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(n){Z(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var Ct=/%20/g,St=/\[\]$/,_t=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,$t=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var n,i=[],r=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){r(this.name,this.value)});else for(n in e)U(n,e[n],t,r);return i.join("&").replace(Ct,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&$t.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!Se.test(e))}).map(function(e,t){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(e){return{name:t.name,value:e.replace(_t,"\r\n")}}):{name:t.name,value:n.replace(_t,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var At=0,Et={},Pt={0:200,1223:204},It=Z.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Et)Et[e]()}),Y.cors=!!It&&"withCredentials"in It,Y.ajax=It=!!It,Z.ajaxTransport(function(e){var t;return Y.cors||It&&!e.crossDomain?{send:function(n,i){var r,a=e.xhr(),o=++At;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)a[r]=e.xhrFields[r];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)a.setRequestHeader(r,n[r]);t=function(e){return function(){t&&(delete Et[o],t=a.onload=a.onerror=null,"abort"===e?a.abort():"error"===e?i(a.status,a.statusText):i(Pt[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:void 0,a.getAllResponseHeaders()))}},a.onload=t(),a.onerror=t("error"),t=Et[o]=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(s){if(t)throw s}},abort:function(){t&&t()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Dt=[],Mt=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Dt.pop()||Z.expando+"_"+ct++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,n,i){var r,a,o,s=t.jsonp!==!1&&(Mt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Mt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Mt,"$1"+r):t.jsonp!==!1&&(t.url+=(ut.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||Z.error(r+" was not called"),o[0]},t.dataTypes[0]="json",a=e[r],e[r]=function(){o=arguments},i.always(function(){e[r]=a,t[r]&&(t.jsonpCallback=n.jsonpCallback,Dt.push(r)),o&&Z.isFunction(a)&&a(o[0]),o=a=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var i=oe.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=Z.buildFragment([e],t,r),r&&r.length&&Z(r).remove(),Z.merge([],i.childNodes))};var Nt=Z.fn.load;Z.fn.load=function(e,t,n){if("string"!=typeof e&&Nt)return Nt.apply(this,arguments);var i,r,a,o=this,s=e.indexOf(" ");return s>=0&&(i=Z.trim(e.slice(s)),e=e.slice(0,s)),Z.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),o.length>0&&Z.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){a=arguments,o.html(i?Z("<div>").append(Z.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){o.each(n,a||[e.responseText,t,e])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var jt=e.document.documentElement;Z.offset={setOffset:function(e,t,n){var i,r,a,o,s,l,c,u=Z.css(e,"position"),d=Z(e),p={};"static"===u&&(e.style.position="relative"),s=d.offset(),a=Z.css(e,"top"),l=Z.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(a+l).indexOf("auto")>-1,c?(i=d.position(),o=i.top,r=i.left):(o=parseFloat(a)||0,r=parseFloat(l)||0),Z.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(p.top=t.top-s.top+o),null!=t.left&&(p.left=t.left-s.left+r),"using"in t?t.using.call(e,p):d.css(p)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},a=i&&i.ownerDocument;if(a)return t=a.documentElement,Z.contains(t,i)?(typeof i.getBoundingClientRect!==_e&&(r=i.getBoundingClientRect()),n=z(a),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===Z.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(i=e.offset()),i.top+=Z.css(e[0],"borderTopWidth",!0),i.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-Z.css(n,"marginTop",!0),left:t.left-i.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||jt;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||jt})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i="pageYOffset"===n;Z.fn[t]=function(r){return me(this,function(t,r,a){var o=z(t);return void 0===a?o?o[n]:t[r]:void(o?o.scrollTo(i?e.pageXOffset:a,i?a:e.pageYOffset):t[r]=a)},t,r,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=k(Y.pixelPosition,function(e,n){return n?(n=x(e,t),qe.test(n)?Z(e).position()[t]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){Z.fn[i]=function(i,r){var a=arguments.length&&(n||"boolean"!=typeof i),o=n||(i===!0||r===!0?"margin":"border");return me(this,function(t,n,i){var r;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?Z.css(t,n,o):Z.style(t,n,i,o)},t,a?i:void 0,a,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Ot=e.jQuery,Lt=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=Lt),t&&e.jQuery===Z&&(e.jQuery=Ot),Z},typeof t===_e&&(e.jQuery=e.$=Z),Z}),function(e,t,n){"use strict";function i(e,t){return t=t||Error,function(){var n,i,r=arguments[0],a="["+(e?e+":":"")+r+"] ",o=arguments[1],s=arguments;for(n=a+o.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);return t+2<s.length?pe(s[t+2]):e}),n=n+"\nhttp://errors.angularjs.org/1.3.17/"+(e?e+"/":"")+r,i=2;i<arguments.length;i++)n=n+(2==i?"?":"&")+"p"+(i-2)+"="+encodeURIComponent(pe(arguments[i]));return new t(n)}}function r(e){if(null==e||_(e))return!1;var t="length"in Object(e)&&e.length;return e.nodeType===bi&&t?!0:w(e)||pi(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function a(e,t,n){var i,o;if(e)if(C(e))for(i in e)"prototype"==i||"length"==i||"name"==i||e.hasOwnProperty&&!e.hasOwnProperty(i)||t.call(n,e[i],i,e);else if(pi(e)||r(e)){var s="object"!=typeof e;for(i=0,o=e.length;o>i;i++)(s||i in e)&&t.call(n,e[i],i,e)}else if(e.forEach&&e.forEach!==a)e.forEach(t,n,e);else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e);return e}function o(e){return Object.keys(e).sort()}function s(e,t,n){for(var i=o(e),r=0;r<i.length;r++)t.call(n,e[i[r]],i[r]);return i}function l(e){return function(t,n){e(n,t)}}function c(){return++ui}function u(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function d(e){for(var t=e.$$hashKey,n=1,i=arguments.length;i>n;n++){var r=arguments[n];if(r)for(var a=Object.keys(r),o=0,s=a.length;s>o;o++){var l=a[o];e[l]=r[l]}}return u(e,t),e}function p(e){return parseInt(e,10)}function h(e,t){return d(Object.create(e),t)}function f(){}function g(e){return e}function m(e){return function(){return e}}function v(e){return"undefined"==typeof e}function y(e){return"undefined"!=typeof e}function b(e){return null!==e&&"object"==typeof e}function w(e){return"string"==typeof e}function x(e){return"number"==typeof e}function k(e){return"[object Date]"===si.call(e)}function C(e){return"function"==typeof e}function S(e){return"[object RegExp]"===si.call(e)}function _(e){return e&&e.window===e}function T(e){return e&&e.$evalAsync&&e.$watch}function $(e){return"[object File]"===si.call(e)}function A(e){return"[object FormData]"===si.call(e)}function E(e){return"[object Blob]"===si.call(e)}function P(e){return"boolean"==typeof e}function I(e){return e&&C(e.then)}function D(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function M(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}function N(e){return Xn(e.nodeName||e[0]&&e[0].nodeName)}function j(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),t}function O(e,t,n,i){if(_(e)||T(e))throw li("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(t){if(e===t)throw li("cpi","Can't copy! Source and destination are identical.");if(n=n||[],i=i||[],b(e)){var r=n.indexOf(e);if(-1!==r)return i[r];n.push(e),i.push(t)}var o;if(pi(e)){t.length=0;for(var s=0;s<e.length;s++)o=O(e[s],null,n,i),b(e[s])&&(n.push(e[s]),i.push(o)),t.push(o)}else{var l=t.$$hashKey;pi(t)?t.length=0:a(t,function(e,n){delete t[n]});for(var c in e)e.hasOwnProperty(c)&&(o=O(e[c],null,n,i),b(e[c])&&(n.push(e[c]),i.push(o)),t[c]=o);u(t,l)}}else if(t=e,e)if(pi(e))t=O(e,[],n,i);else if(k(e))t=new Date(e.getTime());else if(S(e))t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex;else if(b(e)){var d=Object.create(Object.getPrototypeOf(e));t=O(e,d,n,i)}return t}function L(e,t){if(pi(e)){t=t||[];for(var n=0,i=e.length;i>n;n++)t[n]=e[n]}else if(b(e)){t=t||{};for(var r in e)("$"!==r.charAt(0)||"$"!==r.charAt(1))&&(t[r]=e[r])}return t||e}function R(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var i,r,a,o=typeof e,s=typeof t;if(o==s&&"object"==o){if(!pi(e)){if(k(e))return k(t)?R(e.getTime(),t.getTime()):!1;if(S(e))return S(t)?e.toString()==t.toString():!1;if(T(e)||T(t)||_(e)||_(t)||pi(t)||k(t)||S(t))return!1;a={};for(r in e)if("$"!==r.charAt(0)&&!C(e[r])){if(!R(e[r],t[r]))return!1;a[r]=!0}for(r in t)if(!a.hasOwnProperty(r)&&"$"!==r.charAt(0)&&t[r]!==n&&!C(t[r]))return!1;return!0}if(!pi(t))return!1;if((i=e.length)==t.length){for(r=0;i>r;r++)if(!R(e[r],t[r]))return!1;return!0}}return!1}function F(e,t,n){return e.concat(ri.call(t,n))}function U(e,t){return ri.call(e,t||0)}function z(e,t){var n=arguments.length>2?U(arguments,2):[];return!C(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,F(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function q(e,i){var r=i;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=n:_(i)?r="$WINDOW":i&&t===i?r="$DOCUMENT":T(i)&&(r="$SCOPE"),r}function B(e,t){return"undefined"==typeof e?n:(x(t)||(t=t?2:null),JSON.stringify(e,q,t))}function H(e){return w(e)?JSON.parse(e):e}function V(e){e=ti(e).clone();try{e.empty()}catch(t){}var n=ti("<div>").append(e).html();try{return e[0].nodeType===xi?Xn(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+Xn(t)})}catch(t){return Xn(n)}}function W(e){try{return decodeURIComponent(e)}catch(t){}}function G(e){var t,n,i={};return a((e||"").split("&"),function(e){if(e&&(t=e.replace(/\+/g,"%20").split("="),n=W(t[0]),y(n))){var r=y(t[1])?W(t[1]):!0;Yn.call(i,n)?pi(i[n])?i[n].push(r):i[n]=[i[n],r]:i[n]=r}}),i}function K(e){var t=[];return a(e,function(e,n){pi(e)?a(e,function(e){t.push(Y(n,!0)+(e===!0?"":"="+Y(e,!0)))}):t.push(Y(n,!0)+(e===!0?"":"="+Y(e,!0)))}),t.length?t.join("&"):""}function X(e){return Y(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Y(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function J(e,t){var n,i,r=mi.length;for(e=ti(e),i=0;r>i;++i)if(n=mi[i]+t,w(n=e.attr(n)))return n;return null}function Q(e,t){var n,i,r={};a(mi,function(t){var r=t+"app";!n&&e.hasAttribute&&e.hasAttribute(r)&&(n=e,i=e.getAttribute(r))}),a(mi,function(t){var r,a=t+"app";!n&&(r=e.querySelector("["+a.replace(":","\\:")+"]"))&&(n=r,i=r.getAttribute(a))}),n&&(r.strictDi=null!==J(n,"strict-di"),t(n,i?[i]:[],r))}function Z(n,i,r){b(r)||(r={});var o={strictDi:!1};r=d(o,r);var s=function(){if(n=ti(n),n.injector()){var e=n[0]===t?"document":V(n);throw li("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}i=i||[],i.unshift(["$provide",function(e){e.value("$rootElement",n)}]),r.debugInfoEnabled&&i.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),i.unshift("ng");var a=He(i,r.strictDi);return a.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,i){e.$apply(function(){t.data("$injector",i),n(t)(e)})}]),a},l=/^NG_ENABLE_DEBUG_INFO!/,c=/^NG_DEFER_BOOTSTRAP!/;return e&&l.test(e.name)&&(r.debugInfoEnabled=!0,e.name=e.name.replace(l,"")),e&&!c.test(e.name)?s():(e.name=e.name.replace(c,""),ci.resumeBootstrap=function(e){return a(e,function(e){i.push(e)}),s()},void(C(ci.resumeDeferredBootstrap)&&ci.resumeDeferredBootstrap()))}function ee(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function te(e){var t=ci.element(e).injector();if(!t)throw li("test","no injector found for element argument to getTestability");return t.get("$$testability")}function ne(e,t){return t=t||"_",e.replace(vi,function(e,n){return(n?t:"")+e.toLowerCase()})}function ie(){var t;yi||(ni=e.jQuery,ni&&ni.fn.on?(ti=ni,d(ni.fn,{scope:Fi.scope,isolateScope:Fi.isolateScope,controller:Fi.controller,injector:Fi.injector,inheritedData:Fi.inheritedData}),t=ni.cleanData,ni.cleanData=function(e){var n;if(di)di=!1;else for(var i,r=0;null!=(i=e[r]);r++)n=ni._data(i,"events"),n&&n.$destroy&&ni(i).triggerHandler("$destroy");t(e)}):ti=we,ci.element=ti,yi=!0)}function re(e,t,n){if(!e)throw li("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function ae(e,t,n){return n&&pi(e)&&(e=e[e.length-1]),re(C(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function oe(e,t){if("hasOwnProperty"===e)throw li("badname","hasOwnProperty is not a valid {0} name",t)}function se(e,t,n){if(!t)return e;for(var i,r=t.split("."),a=e,o=r.length,s=0;o>s;s++)i=r[s],e&&(e=(a=e)[i]);return!n&&C(e)?z(a,e):e}function le(e){var t=e[0],n=e[e.length-1],i=[t];do{if(t=t.nextSibling,!t)break;i.push(t)}while(t!==n);return ti(i)}function ce(){return Object.create(null)}function ue(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=i("$injector"),r=i("ng"),a=t(e,"angular",Object);return a.$$minErr=a.$$minErr||i,t(a,"module",function(){var e={};return function(i,a,o){var s=function(e,t){if("hasOwnProperty"===e)throw r("badname","hasOwnProperty is not a valid {0} name",t)};return s(i,"module"),a&&e.hasOwnProperty(i)&&(e[i]=null),t(e,i,function(){function e(e,n,i,r){return r||(r=t),function(){return r[i||"push"]([e,n,arguments]),c}}if(!a)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var t=[],r=[],s=[],l=e("$injector","invoke","push",r),c={_invokeQueue:t,_configBlocks:r,_runBlocks:s,requires:a,name:i,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:l,run:function(e){return s.push(e),this}};return o&&l(o),c})}})}function de(e){var t=[];return JSON.stringify(e,function(e,n){if(n=q(e,n),b(n)){if(t.indexOf(n)>=0)return"<<already seen>>";t.push(n)}return n})}function pe(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?de(e):e}function he(t){d(t,{bootstrap:Z,copy:O,extend:d,equals:R,element:ti,forEach:a,injector:He,noop:f,bind:z,toJson:B,fromJson:H,identity:g,isUndefined:v,isDefined:y,isString:w,isFunction:C,isObject:b,isNumber:x,isElement:D,isArray:pi,version:_i,isDate:k,lowercase:Xn,uppercase:Jn,callbacks:{counter:0},getTestability:te,$$minErr:i,$$csp:gi,reloadWithDebugInfo:ee}),ii=ue(e);try{ii("ngLocale")}catch(n){ii("ngLocale",[]).provider("$locale",mt)}ii("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Kt}),e.provider("$compile",Je).directive({a:Ir,input:Kr,textarea:Kr,form:Or,script:La,select:Ua,style:qa,option:za,ngBind:Jr,ngBindHtml:Zr,ngBindTemplate:Qr,ngClass:ta,ngClassEven:ia,ngClassOdd:na,ngCloak:ra,ngController:aa,ngForm:Lr,ngHide:Ia,ngIf:la,ngInclude:ca,ngInit:da,ngNonBindable:_a,ngPluralize:Ta,ngRepeat:$a,ngShow:Pa,ngStyle:Da,ngSwitch:Ma,ngSwitchWhen:Na,ngSwitchDefault:ja,ngOptions:Fa,ngTransclude:Oa,ngModel:ka,ngList:pa,ngChange:ea,pattern:Ha,ngPattern:Ha,required:Ba,ngRequired:Ba,minlength:Wa,ngMinlength:Wa,maxlength:Va,ngMaxlength:Va,ngValue:Yr,ngModelOptions:Sa}).directive({ngInclude:ua}).directive(Dr).directive(oa),e.provider({$anchorScroll:Ve,$animate:Xi,$browser:Ke,$cacheFactory:Xe,$controller:tt,$document:nt,$exceptionHandler:it,$filter:sn,$interpolate:ft,$interval:gt,$http:ut,$httpBackend:pt,$location:Pt,$log:It,$parse:qt,$rootScope:Gt,$q:Bt,$$q:Ht,$sce:Qt,$sceDelegate:Jt,$sniffer:Zt,$templateCache:Ye,$templateRequest:en,$$testability:tn,$timeout:nn,$window:on,$$rAF:Wt,$$asyncCallback:We,$$jqLite:Fe})}])}function fe(){return++$i}function ge(e){return e.replace(Pi,function(e,t,n,i){return i?n.toUpperCase():n}).replace(Ii,"Moz$1")}function me(e){return!ji.test(e)}function ve(e){var t=e.nodeType;return t===bi||!t||t===Ci}function ye(e,t){var n,i,r,o,s=t.createDocumentFragment(),l=[];if(me(e))l.push(t.createTextNode(e));else{for(n=n||s.appendChild(t.createElement("div")),i=(Oi.exec(e)||["",""])[1].toLowerCase(),r=Ri[i]||Ri._default,n.innerHTML=r[1]+e.replace(Li,"<$1></$2>")+r[2],o=r[0];o--;)n=n.lastChild;l=F(l,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",a(l,function(e){s.appendChild(e)}),s}function be(e,n){n=n||t;var i;return(i=Ni.exec(e))?[n.createElement(i[1])]:(i=ye(e,n))?i.childNodes:[]}function we(e){if(e instanceof we)return e;var t;if(w(e)&&(e=hi(e),t=!0),!(this instanceof we)){if(t&&"<"!=e.charAt(0))throw Mi("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new we(e)}t?Pe(this,be(e)):Pe(this,e)}function xe(e){return e.cloneNode(!0)}function ke(e,t){if(t||Se(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),i=0,r=n.length;r>i;i++)Se(n[i])}function Ce(e,t,n,i){if(y(i))throw Mi("offargs","jqLite#off() does not support the `selector` argument");var r=_e(e),o=r&&r.events,s=r&&r.handle;if(s)if(t)a(t.split(" "),function(t){if(y(n)){var i=o[t];if(j(i||[],n),i&&i.length>0)return}Ei(e,t,s),delete o[t]});else for(t in o)"$destroy"!==t&&Ei(e,t,s),delete o[t]}function Se(e,t){var i=e.ng339,r=i&&Ti[i];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),Ce(e)),delete Ti[i],e.ng339=n}}function _e(e,t){var i=e.ng339,r=i&&Ti[i];return t&&!r&&(e.ng339=i=fe(),r=Ti[i]={events:{},data:{},handle:n}),r}function Te(e,t,n){if(ve(e)){var i=y(n),r=!i&&t&&!b(t),a=!t,o=_e(e,!r),s=o&&o.data;if(i)s[t]=n;else{if(a)return s;if(r)return s&&s[t];d(s,t)}}}function $e(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function Ae(e,t){t&&e.setAttribute&&a(t.split(" "),function(t){e.setAttribute("class",hi((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+hi(t)+" "," ")))})}function Ee(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");a(t.split(" "),function(e){e=hi(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",hi(n))}}function Pe(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var i=0;n>i;i++)e[e.length++]=t[i]}else e[e.length++]=t}}function Ie(e,t){return De(e,"$"+(t||"ngController")+"Controller")}function De(e,t,i){e.nodeType==Ci&&(e=e.documentElement);for(var r=pi(t)?t:[t];e;){for(var a=0,o=r.length;o>a;a++)if((i=ti.data(e,r[a]))!==n)return i;e=e.parentNode||e.nodeType===Si&&e.host}}function Me(e){for(ke(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Ne(e,t){t||ke(e);var n=e.parentNode;n&&n.removeChild(e)}function je(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):ti(n).on("load",t)}function Oe(e,t){var n=Ui[t.toLowerCase()];return n&&zi[N(e)]&&n}function Le(e,t){var n=e.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&qi[t]}function Re(e,t){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=t[i||n.type],a=r?r.length:0;if(a){if(v(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),o&&o.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},a>1&&(r=L(r));for(var s=0;a>s;s++)n.isImmediatePropagationStopped()||r[s].call(e,n)}};return n.elem=e,n}function Fe(){this.$get=function(){return d(we,{hasClass:function(e,t){return e.attr&&(e=e[0]),$e(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Ee(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Ae(e,t)}})}}function Ue(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var i=typeof e;return n="function"==i||"object"==i&&null!==e?e.$$hashKey=i+":"+(t||c)():i+":"+e}function ze(e,t){if(t){var n=0;this.nextUid=function(){return++n}}a(e,this.put,this)}function qe(e){var t=e.toString().replace(Wi,""),n=t.match(Bi);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Be(e,t,n){var i,r,o,s;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw w(n)&&n||(n=e.name||qe(e)),Gi("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);r=e.toString().replace(Wi,""),o=r.match(Bi),a(o[1].split(Hi),function(e){e.replace(Vi,function(e,t,n){i.push(n)})})}e.$inject=i}}else pi(e)?(s=e.length-1,ae(e[s],"fn"),i=e.slice(0,s)):ae(e,"fn",!0);return i}function He(e,t){function i(e){return function(t,n){return b(t)?void a(t,l(e)):e(t,n)}}function r(e,t){if(oe(e,"service"),(C(t)||pi(t))&&(t=T.instantiate(t)),!t.$get)throw Gi("pget","Provider '{0}' must define $get factory method.",e);return _[e+x]=t}function o(e,t){return function(){var n=A.invoke(t,this);if(v(n))throw Gi("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function s(e,t,n){return r(e,{$get:n!==!1?o(e,t):t})}function c(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function u(e,t){return s(e,m(t),!1)}function d(e,t){oe(e,"constant"),_[e]=t,$[e]=t}function p(e,t){var n=T.get(e+x),i=n.$get;n.$get=function(){var e=A.invoke(i,n);return A.invoke(t,null,{$delegate:e})}}function h(e){var t,n=[];return a(e,function(e){function i(e){var t,n;for(t=0,n=e.length;n>t;t++){var i=e[t],r=T.get(i[0]);r[i[1]].apply(r,i[2])}}if(!S.get(e)){S.put(e,!0);try{w(e)?(t=ii(e),n=n.concat(h(t.requires)).concat(t._runBlocks),i(t._invokeQueue),i(t._configBlocks)):C(e)?n.push(T.invoke(e)):pi(e)?n.push(T.invoke(e)):ae(e,"module")}catch(r){throw pi(e)&&(e=e[e.length-1]),r.message&&r.stack&&-1==r.stack.indexOf(r.message)&&(r=r.message+"\n"+r.stack),Gi("modulerr","Failed to instantiate module {0} due to:\n{1}",e,r.stack||r.message||r)}}}),n}function g(e,n){function i(t,i){if(e.hasOwnProperty(t)){if(e[t]===y)throw Gi("cdep","Circular dependency found: {0}",t+" <- "+k.join(" <- "));return e[t]}try{return k.unshift(t),e[t]=y,e[t]=n(t,i)}catch(r){throw e[t]===y&&delete e[t],r}finally{k.shift()}}function r(e,n,r,a){"string"==typeof r&&(a=r,r=null);var o,s,l,c=[],u=He.$$annotate(e,t,a);for(s=0,o=u.length;o>s;s++){if(l=u[s],"string"!=typeof l)throw Gi("itkn","Incorrect injection token! Expected service name as string, got {0}",l);c.push(r&&r.hasOwnProperty(l)?r[l]:i(l,a))}return pi(e)&&(e=e[o]),e.apply(n,c)}function a(e,t,n){var i=Object.create((pi(e)?e[e.length-1]:e).prototype||null),a=r(e,i,t,n);return b(a)||C(a)?a:i}return{invoke:r,instantiate:a,get:i,annotate:He.$$annotate,has:function(t){return _.hasOwnProperty(t+x)||e.hasOwnProperty(t)}}}t=t===!0;var y={},x="Provider",k=[],S=new ze([],!0),_={$provide:{provider:i(r),factory:i(s),service:i(c),value:i(u),constant:i(d),decorator:p}},T=_.$injector=g(_,function(e,t){throw ci.isString(t)&&k.push(t),Gi("unpr","Unknown provider: {0}",k.join(" <- "))}),$={},A=$.$injector=g($,function(e,t){var i=T.get(e+x,t);return A.invoke(i.$get,i,n,e)});return a(h(e),function(e){A.invoke(e||f)}),A}function Ve(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,i){function r(e){var t=null;return Array.prototype.some.call(e,function(e){return"a"===N(e)?(t=e,!0):void 0}),t}function a(){var e=s.yOffset;if(C(e))e=e();else if(D(e)){var n=e[0],i=t.getComputedStyle(n);e="fixed"!==i.position?0:n.getBoundingClientRect().bottom}else x(e)||(e=0);return e}function o(e){if(e){e.scrollIntoView();var n=a();if(n){var i=e.getBoundingClientRect().top;t.scrollBy(0,i-n)}}else t.scrollTo(0,0)}function s(){var e,t=n.hash();t?(e=l.getElementById(t))?o(e):(e=r(l.getElementsByName(t)))?o(e):"top"===t&&o(null):o(null)}var l=t.document;return e&&i.$watch(function(){return n.hash()},function(e,t){(e!==t||""!==e)&&je(function(){i.$evalAsync(s)})}),s}]}function We(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function Ge(e,t,i,r){function o(e){try{e.apply(null,U(arguments,1))}finally{if(S--,0===S)for(;_.length;)try{_.pop()()}catch(t){i.error(t)}}}function s(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}function l(e,t){!function n(){a($,function(e){e()}),T=t(n,e)}()}function c(){d(),p()}function u(){try{return b.state}catch(e){}}function d(){A=u(),A=v(A)?null:A,R(A,j)&&(A=j),j=A}function p(){(P!==g.url()||E!==A)&&(P=g.url(),E=A,a(M,function(e){e(g.url(),A)}))}function h(e){try{return decodeURIComponent(e)}catch(t){return e}}var g=this,m=t[0],y=e.location,b=e.history,x=e.setTimeout,k=e.clearTimeout,C={};g.isMock=!1;var S=0,_=[];g.$$completeOutstandingRequest=o,g.$$incOutstandingRequestCount=function(){S++},g.notifyWhenNoOutstandingRequests=function(e){a($,function(e){e()}),0===S?e():_.push(e)};var T,$=[];g.addPollFn=function(e){return v(T)&&l(100,x),$.push(e),e};var A,E,P=y.href,I=t.find("base"),D=null;

d(),E=A,g.url=function(t,n,i){if(v(i)&&(i=null),y!==e.location&&(y=e.location),b!==e.history&&(b=e.history),t){var a=E===i;if(P===t&&(!r.history||a))return g;var o=P&&xt(P)===xt(t);return P=t,E=i,!r.history||o&&a?((!o||D)&&(D=t),n?y.replace(t):o?y.hash=s(t):y.href=t):(b[n?"replaceState":"pushState"](i,"",t),d(),E=A),g}return D||y.href.replace(/%27/g,"'")},g.state=function(){return A};var M=[],N=!1,j=null;g.onUrlChange=function(t){return N||(r.history&&ti(e).on("popstate",c),ti(e).on("hashchange",c),N=!0),M.push(t),t},g.$$checkUrlChange=p,g.baseHref=function(){var e=I.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var O={},L="",F=g.baseHref();g.cookies=function(e,t){var r,a,o,s,l;if(!e){if(m.cookie!==L)for(L=m.cookie,a=L.split("; "),O={},s=0;s<a.length;s++)o=a[s],l=o.indexOf("="),l>0&&(e=h(o.substring(0,l)),O[e]===n&&(O[e]=h(o.substring(l+1))));return O}t===n?m.cookie=encodeURIComponent(e)+"=;path="+F+";expires=Thu, 01 Jan 1970 00:00:00 GMT":w(t)&&(r=(m.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path="+F).length+1,r>4096&&i.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+r+" > 4096 bytes)!"))},g.defer=function(e,t){var n;return S++,n=x(function(){delete C[n],o(e)},t||0),C[n]=!0,n},g.defer.cancel=function(e){return C[e]?(delete C[e],k(e),o(f),!0):!1}}function Ke(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,i){return new Ge(e,i,t,n)}]}function Xe(){this.$get=function(){function e(e,n){function r(e){e!=p&&(h?h==e&&(h=e.n):h=e,a(e.n,e.p),a(e,p),p=e,p.n=null)}function a(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var o=0,s=d({},n,{id:e}),l={},c=n&&n.capacity||Number.MAX_VALUE,u={},p=null,h=null;return t[e]={put:function(e,t){if(c<Number.MAX_VALUE){var n=u[e]||(u[e]={key:e});r(n)}if(!v(t))return e in l||o++,l[e]=t,o>c&&this.remove(h.key),t},get:function(e){if(c<Number.MAX_VALUE){var t=u[e];if(!t)return;r(t)}return l[e]},remove:function(e){if(c<Number.MAX_VALUE){var t=u[e];if(!t)return;t==p&&(p=t.p),t==h&&(h=t.n),a(t.n,t.p),delete u[e]}delete l[e],o--},removeAll:function(){l={},o=0,u={},p=h=null},destroy:function(){l=null,s=null,u=null,delete t[e]},info:function(){return d({},s,{size:o})}}}var t={};return e.info=function(){var e={};return a(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function Ye(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Je(e,i){function r(e,t){var n=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,i={};return a(e,function(e,r){var a=e.match(n);if(!a)throw Yi("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,r,e);i[r]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||r}}),i}function o(e){var t=e.charAt(0);if(!t||t!==Xn(t))throw Yi("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",e);return e}var s={},c="Directive",u=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,p=/(([\w\-]+)(?:\:([^;]+))?;?)/,v=M("ngSrc,ngSrcset,src,srcset"),x=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,k=/^(on[a-z]+|formaction)$/;this.directive=function _(t,n){return oe(t,"directive"),w(t)?(o(t),re(n,"directiveFactory"),s.hasOwnProperty(t)||(s[t]=[],e.factory(t+c,["$injector","$exceptionHandler",function(e,n){var i=[];return a(s[t],function(a,o){try{var s=e.invoke(a);C(s)?s={compile:m(s)}:!s.compile&&s.link&&(s.compile=m(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||t,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA",b(s.scope)&&(s.$$isolateBindings=r(s.scope,s.name)),i.push(s)}catch(l){n(l)}}),i}])),s[t].push(n)):a(t,l(_)),this},this.aHrefSanitizationWhitelist=function(e){return y(e)?(i.aHrefSanitizationWhitelist(e),this):i.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return y(e)?(i.imgSrcSanitizationWhitelist(e),this):i.imgSrcSanitizationWhitelist()};var S=!0;this.debugInfoEnabled=function(e){return y(e)?(S=e,this):S},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,i,r,o,l,m,y,_,$,A,E){function P(e,t){try{e.addClass(t)}catch(n){}}function I(e,t,n,i,r){e instanceof ti||(e=ti(e)),a(e,function(t,n){t.nodeType==xi&&t.nodeValue.match(/\S+/)&&(e[n]=ti(t).wrap("<span></span>").parent()[0])});var o=M(e,t,e,n,i,r);I.$$addScopeClass(e);var s=null;return function(t,n,i){re(t,"scope"),i=i||{};var r=i.parentBoundTranscludeFn,a=i.transcludeControllers,l=i.futureParentElement;r&&r.$$boundTransclude&&(r=r.$$boundTransclude),s||(s=D(l));var c;if(c="html"!==s?ti(Q(s,ti("<div>").append(e).html())):n?Fi.clone.call(e):e,a)for(var u in a)c.data("$"+u+"Controller",a[u].instance);return I.$$addScopeInfo(c,t),n&&n(c,t),o&&o(t,c,c,r),c}}function D(e){var t=e&&e[0];return t&&"foreignobject"!==N(t)&&t.toString().match(/SVG/)?"svg":"html"}function M(e,t,i,r,a,o){function s(e,i,r,a){var o,s,l,c,u,d,p,h,m;if(f){var v=i.length;for(m=new Array(v),u=0;u<g.length;u+=3)p=g[u],m[p]=i[p]}else m=i;for(u=0,d=g.length;d>u;)l=m[g[u++]],o=g[u++],s=g[u++],o?(o.scope?(c=e.$new(),I.$$addScopeInfo(ti(l),c)):c=e,h=o.transcludeOnThisElement?O(e,o.transclude,a,o.elementTranscludeOnThisElement):!o.templateOnThisElement&&a?a:!a&&t?O(e,t):null,o(s,c,l,r,h)):s&&s(e,l.childNodes,n,a)}for(var l,c,u,d,p,h,f,g=[],m=0;m<e.length;m++)l=new oe,c=L(e[m],[],l,0===m?r:n,a),u=c.length?q(c,e[m],l,t,i,null,[],[],o):null,u&&u.scope&&I.$$addScopeClass(l.$$element),p=u&&u.terminal||!(d=e[m].childNodes)||!d.length?null:M(d,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:t),(u||p)&&(g.push(m,u,p),h=!0,f=f||u),o=null;return h?s:null}function O(e,t,n,i){var r=function(i,r,a,o,s){return i||(i=e.$new(!1,s),i.$$transcluded=!0),t(i,r,{parentBoundTranscludeFn:n,transcludeControllers:a,futureParentElement:o})};return r}function L(e,t,n,i,r){var a,o,s=e.nodeType,l=n.$attr;switch(s){case bi:H(t,Qe(N(e)),"E",i,r);for(var c,d,h,f,g,m,v=e.attributes,y=0,x=v&&v.length;x>y;y++){var k=!1,C=!1;c=v[y],d=c.name,g=hi(c.value),f=Qe(d),(m=de.test(f))&&(d=d.replace(Ji,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var S=f.replace(/(Start|End)$/,"");W(S)&&f===S+"Start"&&(k=d,C=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),h=Qe(d.toLowerCase()),l[h]=d,(m||!n.hasOwnProperty(h))&&(n[h]=g,Oe(e,h)&&(n[h]=!0)),ee(e,t,g,h,m),H(t,h,"A",i,r,k,C)}if(o=e.className,b(o)&&(o=o.animVal),w(o)&&""!==o)for(;a=p.exec(o);)h=Qe(a[2]),H(t,h,"C",i,r)&&(n[h]=hi(a[3])),o=o.substr(a.index+a[0].length);break;case xi:J(t,e.nodeValue);break;case ki:try{a=u.exec(e.nodeValue),a&&(h=Qe(a[1]),H(t,h,"M",i,r)&&(n[h]=hi(a[2])))}catch(_){}}return t.sort(X),t}function F(e,t,n){var i=[],r=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw Yi("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==bi&&(e.hasAttribute(t)&&r++,e.hasAttribute(n)&&r--),i.push(e),e=e.nextSibling}while(r>0)}else i.push(e);return ti(i)}function z(e,t,n){return function(i,r,a,o,s){return r=F(r[0],t,n),e(i,r,a,o,s)}}function q(e,o,s,c,u,d,p,h,f){function g(e,t,n,i){e&&(n&&(e=z(e,n,i)),e.require=_.require,e.directiveName=$,(N===_||_.$$isolateScope)&&(e=ie(e,{isolateScope:!0})),p.push(e)),t&&(n&&(t=z(t,n,i)),t.require=_.require,t.directiveName=$,(N===_||_.$$isolateScope)&&(t=ie(t,{isolateScope:!0})),h.push(t))}function v(e,t,n,i){var r,o,s="data",l=!1,c=n;if(w(t)){if(o=t.match(x),t=t.substring(o[0].length),o[3]&&(o[1]?o[3]=null:o[1]=o[3]),"^"===o[1]?s="inheritedData":"^^"===o[1]&&(s="inheritedData",c=n.parent()),"?"===o[2]&&(l=!0),r=null,i&&"data"===s&&(r=i[t])&&(r=r.instance),r=r||c[s]("$"+t+"Controller"),!r&&!l)throw Yi("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return r||null}return pi(t)&&(r=[],a(t,function(t){r.push(v(e,t,n,i))})),r}function y(e,t,r,c,u){function d(e,t,i){var r;return T(e)||(i=t,t=e,e=n),W&&(r=x),i||(i=W?C.parent():C),u(e,t,r,i,E)}var f,g,y,b,w,x,k,C,_;if(o===r?(_=s,C=s.$$element):(C=ti(r),_=new oe(C,s)),N&&(w=t.$new(!0)),u&&(k=d,k.$$boundTransclude=u),M&&(S={},x={},a(M,function(e){var n,i={$scope:e===N||e.$$isolateScope?w:t,$element:C,$attrs:_,$transclude:k};b=e.controller,"@"==b&&(b=_[e.name]),n=m(b,i,!0,e.controllerAs),x[e.name]=n,W||C.data("$"+e.name+"Controller",n.instance),S[e.name]=n})),N){I.$$addScopeInfo(C,w,!0,!(j&&(j===N||j===N.$$originalDirective))),I.$$addScopeClass(C,!0);var $=S&&S[N.name],A=w;$&&$.identifier&&N.bindToController===!0&&(A=$.instance),a(w.$$isolateBindings=N.$$isolateBindings,function(e,n){var r,a,o,s,c=e.attrName,u=e.optional,d=e.mode;switch(d){case"@":_.$observe(c,function(e){A[n]=e}),_.$$observers[c].$$scope=t,_[c]&&(A[n]=i(_[c])(t));break;case"=":if(u&&!_[c])return;a=l(_[c]),s=a.literal?R:function(e,t){return e===t||e!==e&&t!==t},o=a.assign||function(){throw r=A[n]=a(t),Yi("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",_[c],N.name)},r=A[n]=a(t);var p=function(e){return s(e,A[n])||(s(e,r)?o(t,e=A[n]):A[n]=e),r=e};p.$stateful=!0;var h;h=e.collection?t.$watchCollection(_[c],p):t.$watch(l(_[c],p),null,a.literal),w.$on("$destroy",h);break;case"&":a=l(_[c]),A[n]=function(e){return a(t,e)}}})}for(S&&(a(S,function(e){e()}),S=null),f=0,g=p.length;g>f;f++)y=p[f],ae(y,y.isolateScope?w:t,C,_,y.require&&v(y.directiveName,y.require,C,x),k);var E=t;for(N&&(N.template||null===N.templateUrl)&&(E=w),e&&e(E,r.childNodes,n,u),f=h.length-1;f>=0;f--)y=h[f],ae(y,y.isolateScope?w:t,C,_,y.require&&v(y.directiveName,y.require,C,x),k)}f=f||{};for(var k,S,_,$,A,E,P,D=-Number.MAX_VALUE,M=f.controllerDirectives,N=f.newIsolateScopeDirective,j=f.templateDirective,O=f.nonTlbTranscludeDirective,q=!1,H=!1,W=f.hasElementTranscludeDirective,X=s.$$element=ti(o),J=d,Z=c,ee=0,ne=e.length;ne>ee;ee++){_=e[ee];var re=_.$$start,se=_.$$end;if(re&&(X=F(o,re,se)),A=n,D>_.priority)break;if((P=_.scope)&&(_.templateUrl||(b(P)?(Y("new/isolated scope",N||k,_,X),N=_):Y("new/isolated scope",N,_,X)),k=k||_),$=_.name,!_.templateUrl&&_.controller&&(P=_.controller,M=M||{},Y("'"+$+"' controller",M[$],_,X),M[$]=_),(P=_.transclude)&&(q=!0,_.$$tlb||(Y("transclusion",O,_,X),O=_),"element"==P?(W=!0,D=_.priority,A=X,X=s.$$element=ti(t.createComment(" "+$+": "+s[$]+" ")),o=X[0],te(u,U(A),o),Z=I(A,c,D,J&&J.name,{nonTlbTranscludeDirective:O})):(A=ti(xe(o)).contents(),X.empty(),Z=I(A,c))),_.template)if(H=!0,Y("template",j,_,X),j=_,P=C(_.template)?_.template(X,s):_.template,P=ue(P),_.replace){if(J=_,A=me(P)?[]:et(Q(_.templateNamespace,hi(P))),o=A[0],1!=A.length||o.nodeType!==bi)throw Yi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",$,"");te(u,X,o);var le={$attr:{}},ce=L(o,[],le),de=e.splice(ee+1,e.length-(ee+1));N&&B(ce),e=e.concat(ce).concat(de),G(s,le),ne=e.length}else X.html(P);if(_.templateUrl)H=!0,Y("template",j,_,X),j=_,_.replace&&(J=_),y=K(e.splice(ee,e.length-ee),X,s,u,q&&Z,p,h,{controllerDirectives:M,newIsolateScopeDirective:N,templateDirective:j,nonTlbTranscludeDirective:O}),ne=e.length;else if(_.compile)try{E=_.compile(X,s,Z),C(E)?g(null,E,re,se):E&&g(E.pre,E.post,re,se)}catch(pe){r(pe,V(X))}_.terminal&&(y.terminal=!0,D=Math.max(D,_.priority))}return y.scope=k&&k.scope===!0,y.transcludeOnThisElement=q,y.elementTranscludeOnThisElement=W,y.templateOnThisElement=H,y.transclude=Z,f.hasElementTranscludeDirective=W,y}function B(e){for(var t=0,n=e.length;n>t;t++)e[t]=h(e[t],{$$isolateScope:!0})}function H(t,i,a,o,l,u,d){if(i===l)return null;var p=null;if(s.hasOwnProperty(i))for(var f,g=e.get(i+c),m=0,v=g.length;v>m;m++)try{f=g[m],(o===n||o>f.priority)&&-1!=f.restrict.indexOf(a)&&(u&&(f=h(f,{$$start:u,$$end:d})),t.push(f),p=f)}catch(y){r(y)}return p}function W(t){if(s.hasOwnProperty(t))for(var n,i=e.get(t+c),r=0,a=i.length;a>r;r++)if(n=i[r],n.multiElement)return!0;return!1}function G(e,t){var n=t.$attr,i=e.$attr,r=e.$$element;a(e,function(i,r){"$"!=r.charAt(0)&&(t[r]&&t[r]!==i&&(i+=("style"===r?";":" ")+t[r]),e.$set(r,i,!0,n[r]))}),a(t,function(t,a){"class"==a?(P(r,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==a?(r.attr("style",r.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==a.charAt(0)||e.hasOwnProperty(a)||(e[a]=t,i[a]=n[a])})}function K(e,t,n,i,r,s,l,c){var u,d,p=[],f=t[0],g=e.shift(),m=h(g,{templateUrl:null,transclude:null,replace:null,$$originalDirective:g}),v=C(g.templateUrl)?g.templateUrl(t,n):g.templateUrl,y=g.templateNamespace;return t.empty(),o(v).then(function(o){var h,w,x,k;if(o=ue(o),g.replace){if(x=me(o)?[]:et(Q(y,hi(o))),h=x[0],1!=x.length||h.nodeType!==bi)throw Yi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g.name,v);w={$attr:{}},te(i,t,h);var C=L(h,[],w);b(g.scope)&&B(C),e=C.concat(e),G(n,w)}else h=f,t.html(o);for(e.unshift(m),u=q(e,h,n,r,t,g,s,l,c),a(i,function(e,n){e==h&&(i[n]=t[0])}),d=M(t[0].childNodes,r);p.length;){var S=p.shift(),_=p.shift(),T=p.shift(),$=p.shift(),A=t[0];if(!S.$$destroyed){if(_!==f){var E=_.className;c.hasElementTranscludeDirective&&g.replace||(A=xe(h)),te(T,ti(_),A),P(ti(A),E)}k=u.transcludeOnThisElement?O(S,u.transclude,$):$,u(d,S,A,i,k)}}p=null}),function(e,t,n,i,r){var a=r;t.$$destroyed||(p?p.push(t,n,i,a):(u.transcludeOnThisElement&&(a=O(t,u.transclude,r)),u(d,t,n,i,a)))}}function X(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function Y(e,t,n,i){if(t)throw Yi("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,V(i))}function J(e,t){var n=i(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),i=!!t.length;return i&&I.$$addBindingClass(t),function(e,t){var r=t.parent();i||I.$$addBindingClass(r),I.$$addBindingInfo(r,n.expressions),e.$watch(n,function(e){t[0].nodeValue=e})}}})}function Q(e,n){switch(e=Xn(e||"html")){case"svg":case"math":var i=t.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function Z(e,t){if("srcdoc"==t)return $.HTML;var n=N(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?$.RESOURCE_URL:void 0}function ee(e,t,n,r,a){var o=Z(e,r);a=v[r]||a;var s=i(n,!0,o,a);if(s){if("multiple"===r&&"select"===N(e))throw Yi("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",V(e));t.push({priority:100,compile:function(){return{pre:function(e,t,l){var c=l.$$observers||(l.$$observers={});if(k.test(r))throw Yi("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var u=l[r];u!==n&&(s=u&&i(u,!0,o,a),n=u),s&&(l[r]=s(e),(c[r]||(c[r]=[])).$$inter=!0,(l.$$observers&&l.$$observers[r].$$scope||e).$watch(s,function(e,t){"class"===r&&e!=t?l.$updateClass(e,t):l.$set(r,e)}))}}}})}}function te(e,n,i){var r,a,o=n[0],s=n.length,l=o.parentNode;if(e)for(r=0,a=e.length;a>r;r++)if(e[r]==o){e[r++]=i;for(var c=r,u=c+s-1,d=e.length;d>c;c++,u++)d>u?e[c]=e[u]:delete e[c];e.length-=s-1,e.context===o&&(e.context=i);break}l&&l.replaceChild(i,o);var p=t.createDocumentFragment();p.appendChild(o),ti(i).data(ti(o).data()),ni?(di=!0,ni.cleanData([o])):delete ti.cache[o[ti.expando]];for(var h=1,f=n.length;f>h;h++){var g=n[h];ti(g).remove(),p.appendChild(g),delete n[h]}n[0]=i,n.length=1}function ie(e,t){return d(function(){return e.apply(null,arguments)},e,t)}function ae(e,t,n,i,a,o){try{e(t,n,i,a,o)}catch(s){r(s,V(n))}}var oe=function(e,t){if(t){var n,i,r,a=Object.keys(t);for(n=0,i=a.length;i>n;n++)r=a[n],this[r]=t[r]}else this.$attr={};this.$$element=e};oe.prototype={$normalize:Qe,$addClass:function(e){e&&e.length>0&&A.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&A.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Ze(e,t);n&&n.length&&A.addClass(this.$$element,n);var i=Ze(t,e);i&&i.length&&A.removeClass(this.$$element,i)},$set:function(e,t,i,o){var s,l=this.$$element[0],c=Oe(l,e),u=Le(l,e),d=e;if(c?(this.$$element.prop(e,t),o=c):u&&(this[u]=t,d=u),this[e]=t,o?this.$attr[e]=o:(o=this.$attr[e],o||(this.$attr[e]=o=ne(e,"-"))),s=N(this.$$element),"a"===s&&"href"===e||"img"===s&&"src"===e)this[e]=t=E(t,"src"===e);else if("img"===s&&"srcset"===e){for(var p="",h=hi(t),f=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,g=/\s/.test(h)?f:/(,)/,m=h.split(g),v=Math.floor(m.length/2),y=0;v>y;y++){var b=2*y;p+=E(hi(m[b]),!0),p+=" "+hi(m[b+1])}var w=hi(m[2*y]).split(/\s/);p+=E(hi(w[0]),!0),2===w.length&&(p+=" "+hi(w[1])),this[e]=t=p}i!==!1&&(null===t||t===n?this.$$element.removeAttr(o):this.$$element.attr(o,t));var x=this.$$observers;x&&a(x[d],function(e){try{e(t)}catch(n){r(n)}})},$observe:function(e,t){var n=this,i=n.$$observers||(n.$$observers=ce()),r=i[e]||(i[e]=[]);return r.push(t),y.$evalAsync(function(){!r.$$inter&&n.hasOwnProperty(e)&&t(n[e])}),function(){j(r,t)}}};var se=i.startSymbol(),le=i.endSymbol(),ue="{{"==se||"}}"==le?g:function(e){return e.replace(/\{\{/g,se).replace(/}}/g,le)},de=/^ngAttr[A-Z]/;return I.$$addBindingInfo=S?function(e,t){var n=e.data("$binding")||[];pi(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:f,I.$$addBindingClass=S?function(e){P(e,"ng-binding")}:f,I.$$addScopeInfo=S?function(e,t,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(r,t)}:f,I.$$addScopeClass=S?function(e,t){P(e,t?"ng-isolate-scope":"ng-scope")}:f,I}]}function Qe(e){return ge(e.replace(Ji,""))}function Ze(e,t){var n="",i=e.split(/\s+/),r=t.split(/\s+/);e:for(var a=0;a<i.length;a++){for(var o=i[a],s=0;s<r.length;s++)if(o==r[s])continue e;n+=(n.length>0?" ":"")+o}return n}function et(e){e=ti(e);var t=e.length;if(1>=t)return e;for(;t--;){var n=e[t];n.nodeType===ki&&ai.call(e,t,1)}return e}function tt(){var e={},t=!1,r=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,n){oe(t,"controller"),b(t)?d(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(a,o){function s(e,t,n,r){if(!e||!b(e.$scope))throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,t);e.$scope[t]=n}return function(i,l,c,u){var p,h,f,g;if(c=c===!0,u&&w(u)&&(g=u),w(i)){if(h=i.match(r),!h)throw Qi("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",i);f=h[1],g=g||h[3],i=e.hasOwnProperty(f)?e[f]:se(l.$scope,f,!0)||(t?se(o,f,!0):n),ae(i,f,!0)}if(c){var m=(pi(i)?i[i.length-1]:i).prototype;return p=Object.create(m||null),g&&s(l,g,p,f||i.name),d(function(){return a.invoke(i,p,l,f),p},{instance:p,identifier:g})}return p=a.instantiate(i,l,f),g&&s(l,g,p,f||i.name),p}}]}function nt(){this.$get=["$window",function(e){return ti(e.document)}]}function it(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function rt(e,t){if(w(e)){var n=e.replace(ir,"").trim();if(n){var i=t("Content-Type");(i&&0===i.indexOf(Zi)||at(n))&&(e=H(n))}}return e}function at(e){var t=e.match(tr);return t&&nr[t[0]].test(e)}function ot(e){var t,n,i,r=ce();return e?(a(e.split("\n"),function(e){i=e.indexOf(":"),t=Xn(hi(e.substr(0,i))),n=hi(e.substr(i+1)),t&&(r[t]=r[t]?r[t]+", "+n:n)}),r):r}function st(e){var t=b(e)?e:n;return function(n){if(t||(t=ot(e)),n){var i=t[Xn(n)];return void 0===i&&(i=null),i}return t}}function lt(e,t,n,i){return C(i)?i(e,t,n):(a(i,function(i){e=i(e,t,n)}),e)}function ct(e){return e>=200&&300>e}function ut(){var e=this.defaults={transformResponse:[rt],transformRequest:[function(e){return!b(e)||$(e)||E(e)||A(e)?e:B(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:L(er),put:L(er),patch:L(er)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},t=!1;this.useApplyAsync=function(e){return y(e)?(t=!!e,this):t};var r=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(o,l,c,u,p,h){function f(t){function r(e){var t=d({},e);return t.data=e.data?lt(e.data,e.headers,e.status,l.transformResponse):e.data,ct(e.status)?t:p.reject(t)}function o(e){var t,n={};return a(e,function(e,i){C(e)?(t=e(),null!=t&&(n[i]=t)):n[i]=e}),n}function s(t){var n,i,r,a=e.headers,s=d({},t.headers);a=d({},a.common,a[Xn(t.method)]);e:for(n in a){i=Xn(n);for(r in s)if(Xn(r)===i)continue e;s[n]=a[n]}return o(s)}if(!ci.isObject(t))throw i("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);var l=d({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},t);l.headers=s(t),l.method=Jn(l.method);var c=function(t){var i=t.headers,o=lt(t.data,st(i),n,t.transformRequest);return v(o)&&a(i,function(e,t){"content-type"===Xn(t)&&delete i[t]}),v(t.withCredentials)&&!v(e.withCredentials)&&(t.withCredentials=e.withCredentials),x(t,o).then(r,r)},u=[c,n],h=p.when(l);for(a(T,function(e){(e.request||e.requestError)&&u.unshift(e.request,e.requestError),(e.response||e.responseError)&&u.push(e.response,e.responseError)});u.length;){var f=u.shift(),g=u.shift();h=h.then(f,g)}return h.success=function(e){return ae(e,"fn"),h.then(function(t){e(t.data,t.status,t.headers,l)}),h},h.error=function(e){return ae(e,"fn"),h.then(null,function(t){e(t.data,t.status,t.headers,l)}),h},h}function g(e){a(arguments,function(e){f[e]=function(t,n){return f(d(n||{},{method:e,url:t}))}})}function m(e){a(arguments,function(e){f[e]=function(t,n,i){return f(d(i||{},{method:e,url:t,data:n}))}})}function x(i,r){function a(e,n,i,r){function a(){s(n,e,i,r)}h&&(ct(e)?h.put(k,[e,n,ot(i),r]):h.remove(k)),t?u.$applyAsync(a):(a(),u.$$phase||u.$apply())}function s(e,t,n,r){t=Math.max(t,0),(ct(t)?m.resolve:m.reject)({data:e,status:t,headers:st(n),config:i,statusText:r})}function c(e){s(e.data,e.status,L(e.headers()),e.statusText)}function d(){var e=f.pendingRequests.indexOf(i);-1!==e&&f.pendingRequests.splice(e,1)}var h,g,m=p.defer(),w=m.promise,x=i.headers,k=S(i.url,i.params);if(f.pendingRequests.push(i),w.then(d,d),!i.cache&&!e.cache||i.cache===!1||"GET"!==i.method&&"JSONP"!==i.method||(h=b(i.cache)?i.cache:b(e.cache)?e.cache:_),h&&(g=h.get(k),y(g)?I(g)?g.then(c,c):pi(g)?s(g[1],g[0],L(g[2]),g[3]):s(g,200,{},"OK"):h.put(k,w)),v(g)){var C=an(i.url)?l.cookies()[i.xsrfCookieName||e.xsrfCookieName]:n;C&&(x[i.xsrfHeaderName||e.xsrfHeaderName]=C),o(i.method,k,r,a,x,i.timeout,i.withCredentials,i.responseType)}return w}function S(e,t){if(!t)return e;var n=[];return s(t,function(e,t){null===e||v(e)||(pi(e)||(e=[e]),a(e,function(e){b(e)&&(e=k(e)?e.toISOString():B(e)),n.push(Y(t)+"="+Y(e))}))}),n.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+n.join("&")),e}var _=c("$http"),T=[];return a(r,function(e){T.unshift(w(e)?h.get(e):h.invoke(e))}),f.pendingRequests=[],g("get","delete","head","jsonp"),m("post","put","patch"),f.defaults=e,f}]}function dt(){return new e.XMLHttpRequest}function pt(){this.$get=["$browser","$window","$document",function(e,t,n){return ht(e,dt,e.defer,t.angular.callbacks,n[0])}]}function ht(e,t,i,r,o){function s(e,t,n){var i=o.createElement("script"),a=null;return i.type="text/javascript",i.src=e,i.async=!0,a=function(e){Ei(i,"load",a),Ei(i,"error",a),o.body.removeChild(i),i=null;var s=-1,l="unknown";e&&("load"!==e.type||r[t].called||(e={type:"error"}),l=e.type,s="error"===e.type?404:200),n&&n(s,l)},Ai(i,"load",a),Ai(i,"error",a),o.body.appendChild(i),a}return function(o,l,c,u,d,p,h,g){function m(){w&&w(),x&&x.abort()}function v(t,r,a,o,s){S!==n&&i.cancel(S),w=x=null,t(r,a,o,s),e.$$completeOutstandingRequest(f)}if(e.$$incOutstandingRequestCount(),l=l||e.url(),"jsonp"==Xn(o)){var b="_"+(r.counter++).toString(36);r[b]=function(e){r[b].data=e,r[b].called=!0};var w=s(l.replace("JSON_CALLBACK","angular.callbacks."+b),b,function(e,t){v(u,e,r[b].data,"",t),r[b]=f})}else{var x=t();x.open(o,l,!0),a(d,function(e,t){y(e)&&x.setRequestHeader(t,e)}),x.onload=function(){var e=x.statusText||"",t="response"in x?x.response:x.responseText,n=1223===x.status?204:x.status;0===n&&(n=t?200:"file"==rn(l).protocol?404:0),v(u,n,t,x.getAllResponseHeaders(),e)};var k=function(){v(u,-1,null,null,"")};if(x.onerror=k,x.onabort=k,h&&(x.withCredentials=!0),g)try{x.responseType=g}catch(C){if("json"!==g)throw C}x.send(c||null)}if(p>0)var S=i(m,p);else I(p)&&p.then(m)}}function ft(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){function a(e){return"\\\\\\"+e}function o(a,o,p,h){function f(n){return n.replace(c,e).replace(u,t)}function g(e){try{return e=E(e),h&&!y(e)?e:P(e)}catch(t){var n=rr("interr","Can't interpolate: {0}\n{1}",a,t.toString());i(n)}}h=!!h;for(var m,b,w,x=0,k=[],S=[],_=a.length,T=[],$=[];_>x;){if(-1==(m=a.indexOf(e,x))||-1==(b=a.indexOf(t,m+s))){x!==_&&T.push(f(a.substring(x)));break}x!==m&&T.push(f(a.substring(x,m))),w=a.substring(m+s,b),k.push(w),S.push(n(w,g)),x=b+l,$.push(T.length),T.push("")}if(p&&T.length>1)throw rr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",a);if(!o||k.length){var A=function(e){for(var t=0,n=k.length;n>t;t++){if(h&&v(e[t]))return;T[$[t]]=e[t]}return T.join("")},E=function(e){return p?r.getTrusted(p,e):r.valueOf(e)},P=function(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=B(e)}return e};return d(function(e){var t=0,n=k.length,r=new Array(n);try{for(;n>t;t++)r[t]=S[t](e);return A(r)}catch(o){var s=rr("interr","Can't interpolate: {0}\n{1}",a,o.toString());i(s)}},{exp:a,expressions:k,$$watchDelegate:function(e,t,n){var i;return e.$watchGroup(S,function(n,r){var a=A(n);C(t)&&t.call(this,a,n!==r?i:a,e),i=a},n)}})}}var s=e.length,l=t.length,c=new RegExp(e.replace(/./g,a),"g"),u=new RegExp(t.replace(/./g,a),"g");return o.startSymbol=function(){return e},o.endSymbol=function(){return t},o}]}function gt(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,i){function r(r,o,s,l){var c=t.setInterval,u=t.clearInterval,d=0,p=y(l)&&!l,h=(p?i:n).defer(),f=h.promise;return s=y(s)?s:0,f.then(null,null,r),f.$$intervalId=c(function(){h.notify(d++),s>0&&d>=s&&(h.resolve(d),u(f.$$intervalId),delete a[f.$$intervalId]),p||e.$apply()},o),a[f.$$intervalId]=h,f}var a={};return r.cancel=function(e){return e&&e.$$intervalId in a?(a[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete a[e.$$intervalId],!0):!1},r}]}function mt(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(e){return 1===e?"one":"other"}}}}function vt(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=X(t[n]);return t.join("/")}function yt(e,t){var n=rn(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=p(n.port)||or[n.protocol]||null}function bt(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var i=rn(e);t.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),t.$$search=G(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function wt(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function xt(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function kt(e){return e.replace(/(#.+)|#$/,"$1")}function Ct(e){return e.substr(0,xt(e).lastIndexOf("/")+1)}function St(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function _t(e,t){this.$$html5=!0,t=t||"";var i=Ct(e);yt(e,this),this.$$parse=function(e){var t=wt(i,e);if(!w(t))throw sr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,i);bt(t,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=K(this.$$search),t=this.$$hash?"#"+X(this.$$hash):"";this.$$url=vt(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=i+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,a){if(a&&"#"===a[0])return this.hash(a.slice(1)),!0;var o,s,l;return(o=wt(e,r))!==n?(s=o,l=(o=wt(t,o))!==n?i+(wt("/",o)||o):e+s):(o=wt(i,r))!==n?l=i+o:i==r+"/"&&(l=i),l&&this.$$parse(l),!!l}}function Tt(e,t){var n=Ct(e);yt(e,this),this.$$parse=function(i){function r(e,t,n){var i,r=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),r.exec(t)?e:(i=r.exec(e),i?i[1]:e)}var a,o=wt(e,i)||wt(n,i);v(o)||"#"!==o.charAt(0)?this.$$html5?a=o:(a="",v(o)&&(e=i,this.replace())):(a=wt(t,o),v(a)&&(a=o)),bt(a,this),this.$$path=r(this.$$path,a,e),this.$$compose()},this.$$compose=function(){var n=K(this.$$search),i=this.$$hash?"#"+X(this.$$hash):"";this.$$url=vt(this.$$path)+(n?"?"+n:"")+i,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return xt(e)==xt(t)?(this.$$parse(t),!0):!1}}function $t(e,t){this.$$html5=!0,Tt.apply(this,arguments);var n=Ct(e);this.$$parseLinkUrl=function(i,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var a,o;return e==xt(i)?a=i:(o=wt(n,i))?a=e+t+o:n===i+"/"&&(a=n),a&&this.$$parse(a),!!a},this.$$compose=function(){var n=K(this.$$search),i=this.$$hash?"#"+X(this.$$hash):"";this.$$url=vt(this.$$path)+(n?"?"+n:"")+i,this.$$absUrl=e+t+this.$$url}}function At(e){return function(){return this[e]}}function Et(e,t){return function(n){return v(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Pt(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return y(t)?(e=t,this):e},this.html5Mode=function(e){return P(e)?(t.enabled=e,this):b(e)?(P(e.enabled)&&(t.enabled=e.enabled),P(e.requireBase)&&(t.requireBase=e.requireBase),P(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,a,o){function s(e,t,n){var r=c.url(),a=c.$$state;try{i.url(e,t,n),c.$$state=i.state()}catch(o){throw c.url(r),c.$$state=a,o}}function l(e,t){n.$broadcast("$locationChangeSuccess",c.absUrl(),e,c.$$state,t)}var c,u,d,p=i.baseHref(),h=i.url();if(t.enabled){if(!p&&t.requireBase)throw sr("nobase","$location in HTML5 mode requires a <base> tag to be present!");d=St(h)+(p||"/"),u=r.history?_t:$t}else d=xt(h),u=Tt;c=new u(d,"#"+e),c.$$parseLinkUrl(h,h),c.$$state=i.state();var f=/^\s*(javascript|mailto):/i;a.on("click",function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var r=ti(e.target);"a"!==N(r[0]);)if(r[0]===a[0]||!(r=r.parent())[0])return;var s=r.prop("href"),l=r.attr("href")||r.attr("xlink:href");b(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=rn(s.animVal).href),f.test(s)||!s||r.attr("target")||e.isDefaultPrevented()||c.$$parseLinkUrl(s,l)&&(e.preventDefault(),c.absUrl()!=i.url()&&(n.$apply(),o.angular["ff-684208-preventDefault"]=!0))}}),kt(c.absUrl())!=kt(h)&&i.url(c.absUrl(),!0);var g=!0;return i.onUrlChange(function(e,t){n.$evalAsync(function(){var i,r=c.absUrl(),a=c.$$state;c.$$parse(e),c.$$state=t,i=n.$broadcast("$locationChangeStart",e,r,t,a).defaultPrevented,c.absUrl()===e&&(i?(c.$$parse(r),c.$$state=a,s(r,!1,a)):(g=!1,l(r,a)))}),n.$$phase||n.$digest()}),n.$watch(function(){var e=kt(i.url()),t=kt(c.absUrl()),a=i.state(),o=c.$$replace,u=e!==t||c.$$html5&&r.history&&a!==c.$$state;(g||u)&&(g=!1,n.$evalAsync(function(){var t=c.absUrl(),i=n.$broadcast("$locationChangeStart",t,e,c.$$state,a).defaultPrevented;c.absUrl()===t&&(i?(c.$$parse(e),c.$$state=a):(u&&s(t,o,a===c.$$state?null:c.$$state),
l(e,a)))})),c.$$replace=!1}),c}]}function It(){var e=!0,t=this;this.debugEnabled=function(t){return y(t)?(e=t,this):e},this.$get=["$window",function(n){function i(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function r(e){var t=n.console||{},r=t[e]||t.log||f,o=!1;try{o=!!r.apply}catch(s){}return o?function(){var e=[];return a(arguments,function(t){e.push(i(t))}),r.apply(t,e)}:function(e,t){r(e,null==t?"":t)}}return{log:r("log"),info:r("info"),warn:r("warn"),error:r("error"),debug:function(){var n=r("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function Dt(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw cr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function Mt(e,t){if(e){if(e.constructor===e)throw cr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw cr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw cr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw cr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function Nt(e,t){if(e){if(e.constructor===e)throw cr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===ur||e===dr||e===pr)throw cr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function jt(e){return e.constant}function Ot(e,t,n,i,r){Mt(e,r),Mt(t,r);for(var a,o=n.split("."),s=0;o.length>1;s++){a=Dt(o.shift(),r);var l=0===s&&t&&t[a]||e[a];l||(l={},e[a]=l),e=Mt(l,r)}return a=Dt(o.shift(),r),Mt(e[a],r),e[a]=i,i}function Lt(e){return"constructor"==e}function Rt(e,t,i,r,a,o,s){Dt(e,o),Dt(t,o),Dt(i,o),Dt(r,o),Dt(a,o);var l=function(e){return Mt(e,o)},c=s||Lt(e)?l:g,u=s||Lt(t)?l:g,d=s||Lt(i)?l:g,p=s||Lt(r)?l:g,h=s||Lt(a)?l:g;return function(o,s){var l=s&&s.hasOwnProperty(e)?s:o;return null==l?l:(l=c(l[e]),t?null==l?n:(l=u(l[t]),i?null==l?n:(l=d(l[i]),r?null==l?n:(l=p(l[r]),a?null==l?n:l=h(l[a]):l):l):l):l)}}function Ft(e,t){return function(n,i){return e(n,i,Mt,t)}}function Ut(e,t,i){var r=t.expensiveChecks,o=r?br:yr,s=o[e];if(s)return s;var l=e.split("."),c=l.length;if(t.csp)s=6>c?Rt(l[0],l[1],l[2],l[3],l[4],i,r):function(e,t){var a,o=0;do a=Rt(l[o++],l[o++],l[o++],l[o++],l[o++],i,r)(e,t),t=n,e=a;while(c>o);return a};else{var u="";r&&(u+="s = eso(s, fe);\nl = eso(l, fe);\n");var d=r;a(l,function(e,t){Dt(e,i);var n=(t?"s":'((l&&l.hasOwnProperty("'+e+'"))?l:s)')+"."+e;(r||Lt(e))&&(n="eso("+n+", fe)",d=!0),u+="if(s == null) return undefined;\ns="+n+";\n"}),u+="return s;";var p=new Function("s","l","eso","fe",u);p.toString=m(u),d&&(p=Ft(p,i)),s=p}return s.sharedGetter=!0,s.assign=function(t,n,i){return Ot(t,i,e,n,e)},o[e]=s,s}function zt(e){return C(e.valueOf)?e.valueOf():wr.call(e)}function qt(){var e=ce(),t=ce();this.$get=["$filter","$sniffer",function(n,i){function r(e){var t=e;return e.sharedGetter&&(t=function(t,n){return e(t,n)},t.literal=e.literal,t.constant=e.constant,t.assign=e.assign),t}function o(e,t){for(var n=0,i=e.length;i>n;n++){var r=e[n];r.constant||(r.inputs?o(r.inputs,t):-1===t.indexOf(r)&&t.push(r))}return t}function s(e,t){return null==e||null==t?e===t:"object"==typeof e&&(e=zt(e),"object"==typeof e)?!1:e===t||e!==e&&t!==t}function l(e,t,n,i){var r,a=i.$$inputs||(i.$$inputs=o(i.inputs,[]));if(1===a.length){var l=s;return a=a[0],e.$watch(function(e){var t=a(e);return s(t,l)||(r=i(e),l=t&&zt(t)),r},t,n)}for(var c=[],u=0,d=a.length;d>u;u++)c[u]=s;return e.$watch(function(e){for(var t=!1,n=0,o=a.length;o>n;n++){var l=a[n](e);(t||(t=!s(l,c[n])))&&(c[n]=l&&zt(l))}return t&&(r=i(e)),r},t,n)}function c(e,t,n,i){var r,a;return r=e.$watch(function(e){return i(e)},function(e,n,i){a=e,C(t)&&t.apply(this,arguments),y(e)&&i.$$postDigest(function(){y(a)&&r()})},n)}function u(e,t,n,i){function r(e){var t=!0;return a(e,function(e){y(e)||(t=!1)}),t}var o,s;return o=e.$watch(function(e){return i(e)},function(e,n,i){s=e,C(t)&&t.call(this,e,n,i),r(e)&&i.$$postDigest(function(){r(s)&&o()})},n)}function d(e,t,n,i){var r;return r=e.$watch(function(e){return i(e)},function(e,n,i){C(t)&&t.apply(this,arguments),r()},n)}function p(e,t){if(!t)return e;var n=e.$$watchDelegate,i=n!==u&&n!==c,r=i?function(n,i){var r=e(n,i);return t(r,n,i)}:function(n,i){var r=e(n,i),a=t(r,n,i);return y(r)?a:r};return e.$$watchDelegate&&e.$$watchDelegate!==l?r.$$watchDelegate=e.$$watchDelegate:t.$stateful||(r.$$watchDelegate=l,r.inputs=[e]),r}var h={csp:i.csp,expensiveChecks:!1},g={csp:i.csp,expensiveChecks:!0};return function(i,a,o){var s,m,v;switch(typeof i){case"string":v=i=i.trim();var y=o?t:e;if(s=y[v],!s){":"===i.charAt(0)&&":"===i.charAt(1)&&(m=!0,i=i.substring(2));var b=o?g:h,w=new mr(b),x=new vr(w,n,b);s=x.parse(i),s.constant?s.$$watchDelegate=d:m?(s=r(s),s.$$watchDelegate=s.literal?u:c):s.inputs&&(s.$$watchDelegate=l),y[v]=s}return p(s,a);case"function":return p(i,a);default:return p(f,a)}}}]}function Bt(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Vt(function(t){e.$evalAsync(t)},t)}]}function Ht(){this.$get=["$browser","$exceptionHandler",function(e,t){return Vt(function(t){e.defer(t)},t)}]}function Vt(e,t){function r(e,t,n){function i(t){return function(n){r||(r=!0,t.call(e,n))}}var r=!1;return[i(t),i(n)]}function o(){this.$$state={status:0}}function s(e,t){return function(n){t.call(e,n)}}function l(e){var i,r,a;a=e.pending,e.processScheduled=!1,e.pending=n;for(var o=0,s=a.length;s>o;++o){r=a[o][0],i=a[o][e.status];try{C(i)?r.resolve(i(e.value)):1===e.status?r.resolve(e.value):r.reject(e.value)}catch(l){r.reject(l),t(l)}}}function c(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){l(t)}))}function u(){this.promise=new o,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function d(e){var t=new u,n=0,i=pi(e)?[]:{};return a(e,function(e,r){n++,v(e).then(function(e){i.hasOwnProperty(r)||(i[r]=e,--n||t.resolve(i))},function(e){i.hasOwnProperty(r)||t.reject(e)})}),0===n&&t.resolve(i),t.promise}var p=i("$q",TypeError),h=function(){return new u};o.prototype={then:function(e,t,n){var i=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,e,t,n]),this.$$state.status>0&&c(this.$$state),i.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return m(t,!0,e)},function(t){return m(t,!1,e)},t)}},u.prototype={resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(p("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){var n,i;i=r(this,this.$$resolve,this.$$reject);try{(b(e)||C(e))&&(n=e&&e.then),C(n)?(this.promise.$$state.status=-1,n.call(e,i[0],i[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,c(this.promise.$$state))}catch(a){i[1](a),t(a)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,c(this.promise.$$state)},notify:function(n){var i=this.promise.$$state.pending;this.promise.$$state.status<=0&&i&&i.length&&e(function(){for(var e,r,a=0,o=i.length;o>a;a++){r=i[a][0],e=i[a][3];try{r.notify(C(e)?e(n):n)}catch(s){t(s)}}})}};var f=function(e){var t=new u;return t.reject(e),t.promise},g=function(e,t){var n=new u;return t?n.resolve(e):n.reject(e),n.promise},m=function(e,t,n){var i=null;try{C(n)&&(i=n())}catch(r){return g(r,!1)}return I(i)?i.then(function(){return g(e,t)},function(e){return g(e,!1)}):g(e,t)},v=function(e,t,n,i){var r=new u;return r.resolve(e),r.promise.then(t,n,i)},y=function w(e){function t(e){i.resolve(e)}function n(e){i.reject(e)}if(!C(e))throw p("norslvr","Expected resolverFn, got '{0}'",e);if(!(this instanceof w))return new w(e);var i=new u;return e(t,n),i.promise};return y.defer=h,y.reject=f,y.when=v,y.all=d,y}function Wt(){this.$get=["$window","$timeout",function(e,t){function n(){for(var e=0;e<u.length;e++){var t=u[e];t&&(u[e]=null,t())}c=u.length=0}function i(e){var t=u.length;return c++,u.push(e),0===t&&(l=s(n)),function(){t>=0&&(u[t]=null,t=null,0===--c&&l&&(l(),l=null,u.length=0))}}var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame,a=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,o=!!r,s=o?function(e){var t=r(e);return function(){a(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};i.supported=o;var l,c=0,u=[];return i}]}function Gt(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=c(),this.$$ChildScope=null}return t.prototype=e,t}var t=10,n=i("$rootScope"),o=null,s=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(i,l,u,d){function p(e){e.currentScope.$$destroyed=!0}function h(){this.$id=c(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function g(e){if(S.$$phase)throw n("inprog","{0} already in progress",S.$$phase);S.$$phase=e}function m(){S.$$phase=null}function y(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function w(){}function x(){for(;$.length;)try{$.shift()()}catch(e){l(e)}s=null}function k(){null===s&&(s=d.defer(function(){S.$apply(x)}))}h.prototype={constructor:h,$new:function(t,n){var i;return n=n||this,t?(i=new h,i.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),i=new this.$$ChildScope),i.$parent=n,i.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=i,n.$$childTail=i):n.$$childHead=n.$$childTail=i,(t||n!=this)&&i.$on("$destroy",p),i},$watch:function(e,t,n){var i=u(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,n,i);var r=this,a=r.$$watchers,s={fn:t,last:w,get:i,exp:e,eq:!!n};return o=null,C(t)||(s.fn=f),a||(a=r.$$watchers=[]),a.unshift(s),function(){j(a,s),o=null}},$watchGroup:function(e,t){function n(){l=!1,c?(c=!1,t(r,r,s)):t(r,i,s)}var i=new Array(e.length),r=new Array(e.length),o=[],s=this,l=!1,c=!0;if(!e.length){var u=!0;return s.$evalAsync(function(){u&&t(r,r,s)}),function(){u=!1}}return 1===e.length?this.$watch(e[0],function(e,n,a){r[0]=e,i[0]=n,t(r,e===n?r:i,a)}):(a(e,function(e,t){var a=s.$watch(e,function(e,a){r[t]=e,i[t]=a,l||(l=!0,s.$evalAsync(n))});o.push(a)}),function(){for(;o.length;)o.shift()()})},$watchCollection:function(e,t){function n(e){a=e;var t,n,i,s,l;if(!v(a)){if(b(a))if(r(a)){o!==h&&(o=h,m=o.length=0,d++),t=a.length,m!==t&&(d++,o.length=m=t);for(var c=0;t>c;c++)l=o[c],s=a[c],i=l!==l&&s!==s,i||l===s||(d++,o[c]=s)}else{o!==f&&(o=f={},m=0,d++),t=0;for(n in a)a.hasOwnProperty(n)&&(t++,s=a[n],l=o[n],n in o?(i=l!==l&&s!==s,i||l===s||(d++,o[n]=s)):(m++,o[n]=s,d++));if(m>t){d++;for(n in o)a.hasOwnProperty(n)||(m--,delete o[n])}}else o!==a&&(o=a,d++);return d}}function i(){if(g?(g=!1,t(a,a,l)):t(a,s,l),c)if(b(a))if(r(a)){s=new Array(a.length);for(var e=0;e<a.length;e++)s[e]=a[e]}else{s={};for(var n in a)Yn.call(a,n)&&(s[n]=a[n])}else s=a}n.$stateful=!0;var a,o,s,l=this,c=t.length>1,d=0,p=u(e,n),h=[],f={},g=!0,m=0;return this.$watch(p,i)},$digest:function(){var e,i,r,a,c,u,p,h,f,v,y=t,b=this,k=[];g("$digest"),d.$$checkUrlChange(),this===S&&null!==s&&(d.defer.cancel(s),x()),o=null;do{for(u=!1,h=b;_.length;){try{v=_.shift(),v.scope.$eval(v.expression,v.locals)}catch($){l($)}o=null}e:do{if(a=h.$$watchers)for(c=a.length;c--;)try{if(e=a[c])if((i=e.get(h))===(r=e.last)||(e.eq?R(i,r):"number"==typeof i&&"number"==typeof r&&isNaN(i)&&isNaN(r))){if(e===o){u=!1;break e}}else u=!0,o=e,e.last=e.eq?O(i,null):i,e.fn(i,r===w?i:r,h),5>y&&(f=4-y,k[f]||(k[f]=[]),k[f].push({msg:C(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:i,oldVal:r}))}catch($){l($)}if(!(p=h.$$childHead||h!==b&&h.$$nextSibling))for(;h!==b&&!(p=h.$$nextSibling);)h=h.$parent}while(h=p);if((u||_.length)&&!y--)throw m(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,k)}while(u||_.length);for(m();T.length;)try{T.shift()()}catch($){l($)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==S){for(var t in this.$$listenerCount)y(this,this.$$listenerCount[t],t);e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=f,this.$on=this.$watch=this.$watchGroup=function(){return f},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(e,t){return u(e)(this,t)},$evalAsync:function(e,t){S.$$phase||_.length||d.defer(function(){_.length&&S.$digest()}),_.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){T.push(e)},$apply:function(e){try{return g("$apply"),this.$eval(e)}catch(t){l(t)}finally{m();try{S.$digest()}catch(t){throw l(t),t}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&$.push(t),k()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var i=this;do i.$$listenerCount[e]||(i.$$listenerCount[e]=0),i.$$listenerCount[e]++;while(i=i.$parent);var r=this;return function(){var i=n.indexOf(t);-1!==i&&(n[i]=null,y(r,1,e))}},$emit:function(e,t){var n,i,r,a=[],o=this,s=!1,c={name:e,targetScope:o,stopPropagation:function(){s=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},u=F([c],arguments,1);do{for(n=o.$$listeners[e]||a,c.currentScope=o,i=0,r=n.length;r>i;i++)if(n[i])try{n[i].apply(null,u)}catch(d){l(d)}else n.splice(i,1),i--,r--;if(s)return c.currentScope=null,c;o=o.$parent}while(o);return c.currentScope=null,c},$broadcast:function(e,t){var n=this,i=n,r=n,a={name:e,targetScope:n,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return a;for(var o,s,c,u=F([a],arguments,1);i=r;){for(a.currentScope=i,o=i.$$listeners[e]||[],s=0,c=o.length;c>s;s++)if(o[s])try{o[s].apply(null,u)}catch(d){l(d)}else o.splice(s,1),s--,c--;if(!(r=i.$$listenerCount[e]&&i.$$childHead||i!==n&&i.$$nextSibling))for(;i!==n&&!(r=i.$$nextSibling);)i=i.$parent}return a.currentScope=null,a}};var S=new h,_=S.$$asyncQueue=[],T=S.$$postDigestQueue=[],$=S.$$applyAsyncQueue=[];return S}]}function Kt(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return y(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return y(e)?(t=e,this):t},this.$get=function(){return function(n,i){var r,a=i?t:e;return r=rn(n).href,""===r||r.match(a)?n:"unsafe:"+r}}}function Xt(e){if("self"===e)return e;if(w(e)){if(e.indexOf("***")>-1)throw xr("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=fi(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(S(e))return new RegExp("^"+e.source+"$");throw xr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Yt(e){var t=[];return y(e)&&a(e,function(e){t.push(Xt(e))}),t}function Jt(){this.SCE_CONTEXTS=kr;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Yt(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Yt(e)),t},this.$get=["$injector",function(i){function r(e,t){return"self"===e?an(t):!!e.exec(t.href)}function a(n){var i,a,o=rn(n.toString()),s=!1;for(i=0,a=e.length;a>i;i++)if(r(e[i],o)){s=!0;break}if(s)for(i=0,a=t.length;a>i;i++)if(r(t[i],o)){s=!1;break}return s}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function s(e,t){var i=p.hasOwnProperty(e)?p[e]:null;if(!i)throw xr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===n||""===t)return t;if("string"!=typeof t)throw xr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new i(t)}function l(e){return e instanceof d?e.$$unwrapTrustedValue():e}function c(e,t){if(null===t||t===n||""===t)return t;var i=p.hasOwnProperty(e)?p[e]:null;if(i&&t instanceof i)return t.$$unwrapTrustedValue();if(e===kr.RESOURCE_URL){if(a(t))return t;throw xr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===kr.HTML)return u(t);throw xr("unsafe","Attempting to use an unsafe value in a safe context.")}var u=function(e){throw xr("unsafe","Attempting to use an unsafe value in a safe context.")};i.has("$sanitize")&&(u=i.get("$sanitize"));var d=o(),p={};return p[kr.HTML]=o(d),p[kr.CSS]=o(d),p[kr.URL]=o(d),p[kr.JS]=o(d),p[kr.RESOURCE_URL]=o(p[kr.URL]),{trustAs:s,getTrusted:c,valueOf:l}}]}function Qt(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&8>ei)throw xr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=L(kr);i.isEnabled=function(){return e},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=g),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:t(n,function(t){return i.getTrusted(e,t)})};var r=i.parseAs,o=i.getTrusted,s=i.trustAs;return a(kr,function(e,t){var n=Xn(t);i[ge("parse_as_"+n)]=function(t){return r(e,t)},i[ge("get_trusted_"+n)]=function(t){return o(e,t)},i[ge("trust_as_"+n)]=function(t){return s(e,t)}}),i}]}function Zt(){this.$get=["$window","$document",function(e,t){var n,i,r={},a=p((/android (\d+)/.exec(Xn((e.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},l=/^(Moz|webkit|ms)(?=[A-Z])/,c=s.body&&s.body.style,u=!1,d=!1;if(c){for(var h in c)if(i=l.exec(h)){n=i[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in c&&"webkit"),u=!!("transition"in c||n+"Transition"in c),d=!!("animation"in c||n+"Animation"in c),!a||u&&d||(u=w(s.body.style.webkitTransition),d=w(s.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>a||o),hasEvent:function(e){if("input"===e&&11>=ei)return!1;if(v(r[e])){var t=s.createElement("div");r[e]="on"+e in t}return r[e]},csp:gi(),vendorPrefix:n,transitions:u,animations:d,android:a}}]}function en(){this.$get=["$templateCache","$http","$q","$sce",function(e,t,n,i){function r(a,o){function s(e){if(!o)throw Yi("tpload","Failed to load template: {0}",a);return n.reject(e)}r.totalPendingRequests++,w(a)&&e.get(a)||(a=i.getTrustedResourceUrl(a));var l=t.defaults&&t.defaults.transformResponse;pi(l)?l=l.filter(function(e){return e!==rt}):l===rt&&(l=null);var c={cache:e,transformResponse:l};return t.get(a,c)["finally"](function(){r.totalPendingRequests--}).then(function(e){return e.data},s)}return r.totalPendingRequests=0,r}]}function tn(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var i={};return i.findBindings=function(e,t,n){var i=e.getElementsByClassName("ng-binding"),r=[];return a(i,function(e){var i=ci.element(e).data("$binding");i&&a(i,function(i){if(n){var a=new RegExp("(^|\\s)"+fi(t)+"(\\s|\\||$)");a.test(i)&&r.push(e)}else-1!=i.indexOf(t)&&r.push(e)})}),r},i.findModels=function(e,t,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var a=n?"=":"*=",o="["+i[r]+"model"+a+'"'+t+'"]',s=e.querySelectorAll(o);if(s.length)return s}},i.getLocation=function(){return n.url()},i.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},i.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},i}]}function nn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,i,r){function a(a,s,l){var c,u=y(l)&&!l,d=(u?i:n).defer(),p=d.promise;return c=t.defer(function(){try{d.resolve(a())}catch(t){d.reject(t),r(t)}finally{delete o[p.$$timeoutId]}u||e.$apply()},s),p.$$timeoutId=c,o[c]=d,p}var o={};return a.cancel=function(e){return e&&e.$$timeoutId in o?(o[e.$$timeoutId].reject("canceled"),delete o[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},a}]}function rn(e){var t=e;return ei&&(Cr.setAttribute("href",t),t=Cr.href),Cr.setAttribute("href",t),{href:Cr.href,protocol:Cr.protocol?Cr.protocol.replace(/:$/,""):"",host:Cr.host,search:Cr.search?Cr.search.replace(/^\?/,""):"",hash:Cr.hash?Cr.hash.replace(/^#/,""):"",hostname:Cr.hostname,port:Cr.port,pathname:"/"===Cr.pathname.charAt(0)?Cr.pathname:"/"+Cr.pathname}}function an(e){var t=w(e)?rn(e):e;return t.protocol===Sr.protocol&&t.host===Sr.host}function on(){this.$get=m(e)}function sn(e){function t(i,r){if(b(i)){var o={};return a(i,function(e,n){o[n]=t(n,e)}),o}return e.factory(i+n,r)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",dn),t("date",Sn),t("filter",ln),t("json",_n),t("limitTo",Tn),t("lowercase",Er),t("number",pn),t("orderBy",$n),t("uppercase",Pr)}function ln(){return function(e,t,n){if(!pi(e))return e;var i,r,a=null!==t?typeof t:"null";switch(a){case"function":i=t;break;case"boolean":case"null":case"number":case"string":r=!0;case"object":i=cn(t,n,r);break;default:return e}return e.filter(i)}}function cn(e,t,n){var i,r=b(e)&&"$"in e;return t===!0?t=R:C(t)||(t=function(e,t){return v(e)?!1:null===e||null===t?e===t:b(e)||b(t)?!1:(e=Xn(""+e),t=Xn(""+t),-1!==e.indexOf(t))}),i=function(i){return r&&!b(i)?un(i,e.$,t,!1):un(i,e,t,n)}}function un(e,t,n,i,r){var a=null!==e?typeof e:"null",o=null!==t?typeof t:"null";if("string"===o&&"!"===t.charAt(0))return!un(e,t.substring(1),n,i);if(pi(e))return e.some(function(e){return un(e,t,n,i)});switch(a){case"object":var s;if(i){for(s in e)if("$"!==s.charAt(0)&&un(e[s],t,n,!0))return!0;return r?!1:un(e,t,n,!1)}if("object"===o){for(s in t){var l=t[s];if(!C(l)&&!v(l)){var c="$"===s,u=c?e:e[s];if(!un(u,l,n,c,c))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function dn(e){var t=e.NUMBER_FORMATS;return function(e,n,i){return v(n)&&(n=t.CURRENCY_SYM),v(i)&&(i=t.PATTERNS[1].maxFrac),null==e?e:hn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function pn(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:hn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function hn(e,t,n,i,r){if(!isFinite(e)||b(e))return"";var a=0>e;e=Math.abs(e);var o=e+"",s="",l=[],c=!1;if(-1!==o.indexOf("e")){var u=o.match(/([\d\.]+)e(-?)(\d+)/);u&&"-"==u[2]&&u[3]>r+1?e=0:(s=o,c=!0)}if(c)r>0&&1>e&&(s=e.toFixed(r),e=parseFloat(s));else{var d=(o.split(_r)[1]||"").length;v(r)&&(r=Math.min(Math.max(t.minFrac,d),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+r)).toString()+"e"+-r);var p=(""+e).split(_r),h=p[0];p=p[1]||"";var f,g=0,m=t.lgSize,y=t.gSize;if(h.length>=m+y)for(g=h.length-m,f=0;g>f;f++)(g-f)%y===0&&0!==f&&(s+=n),s+=h.charAt(f);for(f=g;f<h.length;f++)(h.length-f)%m===0&&0!==f&&(s+=n),s+=h.charAt(f);for(;p.length<r;)p+="0";r&&"0"!==r&&(s+=i+p.substr(0,r))}return 0===e&&(a=!1),l.push(a?t.negPre:t.posPre,s,a?t.negSuf:t.posSuf),l.join("")}function fn(e,t,n){var i="";for(0>e&&(i="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),i+e}function gn(e,t,n,i){return n=n||0,function(r){var a=r["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&-12==n&&(a=12),fn(a,t,i)}}function mn(e,t){return function(n,i){var r=n["get"+e](),a=Jn(t?"SHORT"+e:e);return i[a][r]}}function vn(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=fn(Math[t>0?"floor":"ceil"](t/60),2)+fn(Math.abs(t%60),2)}function yn(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function bn(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function wn(e){return function(t){var n=yn(t.getFullYear()),i=bn(t),r=+i-+n,a=1+Math.round(r/6048e5);return fn(a,e)}}function xn(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function kn(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function Cn(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function Sn(e){function t(e){var t;if(t=e.match(n)){var i=new Date(0),r=0,a=0,o=t[8]?i.setUTCFullYear:i.setFullYear,s=t[8]?i.setUTCHours:i.setHours;t[9]&&(r=p(t[9]+t[10]),a=p(t[9]+t[11])),o.call(i,p(t[1]),p(t[2])-1,p(t[3]));var l=p(t[4]||0)-r,c=p(t[5]||0)-a,u=p(t[6]||0),d=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(i,l,c,u,d),i}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var o,s,l="",c=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,w(n)&&(n=Ar.test(n)?p(n):t(n)),x(n)&&(n=new Date(n)),!k(n))return n;for(;i;)s=$r.exec(i),s?(c=F(c,s,1),i=c.pop()):(c.push(i),i=null);return r&&"UTC"===r&&(n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+n.getTimezoneOffset())),a(c,function(t){o=Tr[t],l+=o?o(n,e.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}}function _n(){return function(e,t){return v(t)&&(t=2),B(e,t)}}function Tn(){return function(e,t){return x(e)&&(e=e.toString()),pi(e)||w(e)?(t=Math.abs(Number(t))===1/0?Number(t):p(t),t?t>0?e.slice(0,t):e.slice(t):w(e)?"":[]):e}}function $n(e){return function(t,n,i){function a(e,t){for(var i=0;i<n.length;i++){var r=n[i](e,t);if(0!==r)return r}return 0}function o(e,t){return t?function(t,n){return e(n,t)}:e}function s(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function l(e){return null===e?"null":"function"==typeof e.valueOf&&(e=e.valueOf(),s(e))?e:"function"==typeof e.toString&&(e=e.toString(),s(e))?e:""}function c(e,t){var n=typeof e,i=typeof t;return n===i&&"object"===n&&(e=l(e),t=l(t)),n===i?("string"===n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:t>e?-1:1):i>n?-1:1}return r(t)?(n=pi(n)?n:[n],0===n.length&&(n=["+"]),n=n.map(function(t){var n=!1,i=t||g;if(w(t)){if(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),""===t)return o(c,n);if(i=e(t),i.constant){var r=i();return o(function(e,t){return c(e[r],t[r])},n)}}return o(function(e,t){return c(i(e),i(t))},n)}),ri.call(t).sort(o(a,i))):t}}function An(e){return C(e)&&(e={link:e}),e.restrict=e.restrict||"AC",m(e)}function En(e,t){e.$name=t}function Pn(e,t,i,r,o){var s=this,l=[],c=s.$$parentForm=e.parent().controller("form")||Mr;s.$error={},s.$$success={},s.$pending=n,s.$name=o(t.name||t.ngForm||"")(i),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,c.$addControl(s),s.$rollbackViewValue=function(){a(l,function(e){e.$rollbackViewValue()})},s.$commitViewValue=function(){a(l,function(e){e.$commitViewValue()})},s.$addControl=function(e){oe(e.$name,"input"),l.push(e),e.$name&&(s[e.$name]=e)},s.$$renameControl=function(e,t){var n=e.$name;s[n]===e&&delete s[n],s[t]=e,e.$name=t},s.$removeControl=function(e){e.$name&&s[e.$name]===e&&delete s[e.$name],a(s.$pending,function(t,n){s.$setValidity(n,null,e)}),a(s.$error,function(t,n){s.$setValidity(n,null,e)}),a(s.$$success,function(t,n){s.$setValidity(n,null,e)}),j(l,e)},Vn({ctrl:this,$element:e,set:function(e,t,n){var i=e[t];if(i){var r=i.indexOf(n);-1===r&&i.push(n)}else e[t]=[n]},unset:function(e,t,n){var i=e[t];i&&(j(i,n),0===i.length&&delete e[t])},parentForm:c,$animate:r}),s.$setDirty=function(){r.removeClass(e,ga),r.addClass(e,ma),s.$dirty=!0,s.$pristine=!1,c.$setDirty()},s.$setPristine=function(){r.setClass(e,ga,ma+" "+Nr),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,a(l,function(e){e.$setPristine()})},s.$setUntouched=function(){a(l,function(e){e.$setUntouched()})},s.$setSubmitted=function(){r.addClass(e,Nr),s.$submitted=!0,c.$setSubmitted()}}function In(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function Dn(e,t,n,i,r,a){Mn(e,t,n,i,r,a),In(i)}function Mn(e,t,n,i,r,a){var o=Xn(t[0].type);if(!r.android){var s=!1;t.on("compositionstart",function(e){s=!0}),t.on("compositionend",function(){s=!1,l()})}var l=function(e){if(c&&(a.defer.cancel(c),c=null),!s){var r=t.val(),l=e&&e.type;"password"===o||n.ngTrim&&"false"===n.ngTrim||(r=hi(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,l)}};if(r.hasEvent("input"))t.on("input",l);else{var c,u=function(e,t,n){c||(c=a.defer(function(){c=null,t&&t.value===n||l(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||u(e,this,this.value)}),r.hasEvent("paste")&&t.on("paste cut",u)}t.on("change",l),i.$render=function(){t.val(i.$isEmpty(i.$viewValue)?"":i.$viewValue)}}function Nn(e,t){if(k(e))return e;if(w(e)){Hr.lastIndex=0;var n=Hr.exec(e);if(n){var i=+n[1],r=+n[2],a=0,o=0,s=0,l=0,c=yn(i),u=7*(r-1);return t&&(a=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds()),new Date(i,0,c.getDate()+u,a,o,s,l)}}return 0/0}function jn(e,t){return function(n,i){var r,o;if(k(n))return n;if(w(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Rr.test(n))return new Date(n);if(e.lastIndex=0,r=e.exec(n))return r.shift(),o=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},a(r,function(e,n){n<t.length&&(o[t[n]]=+e)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return 0/0}}function On(e,t,i,r){return function(a,o,s,l,c,u,d){function p(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function h(e){return y(e)?k(e)?e:i(e):n}Ln(a,o,s,l),Mn(a,o,s,l,c,u);var f,g=l&&l.$options&&l.$options.timezone;if(l.$$parserName=e,l.$parsers.push(function(e){if(l.$isEmpty(e))return null;if(t.test(e)){var r=i(e,f);return"UTC"===g&&r.setMinutes(r.getMinutes()-r.getTimezoneOffset()),r}return n}),l.$formatters.push(function(e){if(e&&!k(e))throw wa("datefmt","Expected `{0}` to be a date",e);if(p(e)){if(f=e,f&&"UTC"===g){var t=6e4*f.getTimezoneOffset();f=new Date(f.getTime()+t)}return d("date")(e,r,g)}return f=null,""}),y(s.min)||s.ngMin){var m;l.$validators.min=function(e){return!p(e)||v(m)||i(e)>=m},s.$observe("min",function(e){m=h(e),l.$validate()})}if(y(s.max)||s.ngMax){var b;l.$validators.max=function(e){return!p(e)||v(b)||i(e)<=b},s.$observe("max",function(e){b=h(e),l.$validate()})}}}function Ln(e,t,i,r){var a=t[0],o=r.$$hasNativeValidators=b(a.validity);o&&r.$parsers.push(function(e){var i=t.prop(Kn)||{};return i.badInput&&!i.typeMismatch?n:e})}function Rn(e,t,i,r,a,o){if(Ln(e,t,i,r),Mn(e,t,i,r,a,o),r.$$parserName="number",r.$parsers.push(function(e){return r.$isEmpty(e)?null:zr.test(e)?parseFloat(e):n}),r.$formatters.push(function(e){if(!r.$isEmpty(e)){if(!x(e))throw wa("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}),y(i.min)||i.ngMin){var s;r.$validators.min=function(e){return r.$isEmpty(e)||v(s)||e>=s},i.$observe("min",function(e){y(e)&&!x(e)&&(e=parseFloat(e,10)),s=x(e)&&!isNaN(e)?e:n,r.$validate()})}if(y(i.max)||i.ngMax){var l;r.$validators.max=function(e){return r.$isEmpty(e)||v(l)||l>=e},i.$observe("max",function(e){y(e)&&!x(e)&&(e=parseFloat(e,10)),l=x(e)&&!isNaN(e)?e:n,r.$validate();

})}}function Fn(e,t,n,i,r,a){Mn(e,t,n,i,r,a),In(i),i.$$parserName="url",i.$validators.url=function(e,t){var n=e||t;return i.$isEmpty(n)||Fr.test(n)}}function Un(e,t,n,i,r,a){Mn(e,t,n,i,r,a),In(i),i.$$parserName="email",i.$validators.email=function(e,t){var n=e||t;return i.$isEmpty(n)||Ur.test(n)}}function zn(e,t,n,i){v(n.name)&&t.attr("name",c());var r=function(e){t[0].checked&&i.$setViewValue(n.value,e&&e.type)};t.on("click",r),i.$render=function(){var e=n.value;t[0].checked=e==i.$viewValue},n.$observe("value",i.$render)}function qn(e,t,n,r,a){var o;if(y(r)){if(o=e(r),!o.constant)throw i("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(t)}return a}function Bn(e,t,n,i,r,a,o,s){var l=qn(s,e,"ngTrueValue",n.ngTrueValue,!0),c=qn(s,e,"ngFalseValue",n.ngFalseValue,!1),u=function(e){i.$setViewValue(t[0].checked,e&&e.type)};t.on("click",u),i.$render=function(){t[0].checked=i.$viewValue},i.$isEmpty=function(e){return e===!1},i.$formatters.push(function(e){return R(e,l)}),i.$parsers.push(function(e){return e?l:c})}function Hn(e,t){return e="ngClass"+e,["$animate",function(n){function i(e,t){var n=[];e:for(var i=0;i<e.length;i++){for(var r=e[i],a=0;a<t.length;a++)if(r==t[a])continue e;n.push(r)}return n}function r(e){if(pi(e))return e;if(w(e))return e.split(" ");if(b(e)){var t=[];return a(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t}return e}return{restrict:"AC",link:function(o,s,l){function c(e){var t=d(e,1);l.$addClass(t)}function u(e){var t=d(e,-1);l.$removeClass(t)}function d(e,t){var n=s.data("$classCounts")||{},i=[];return a(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&i.push(e))}),s.data("$classCounts",n),i.join(" ")}function p(e,t){var r=i(t,e),a=i(e,t);r=d(r,1),a=d(a,-1),r&&r.length&&n.addClass(s,r),a&&a.length&&n.removeClass(s,a)}function h(e){if(t===!0||o.$index%2===t){var n=r(e||[]);if(f){if(!R(e,f)){var i=r(f);p(i,n)}}else c(n)}f=L(e)}var f;o.$watch(l[e],h,!0),l.$observe("class",function(t){h(o.$eval(l[e]))}),"ngClass"!==e&&o.$watch("$index",function(n,i){var a=1&n;if(a!==(1&i)){var s=r(o.$eval(l[e]));a===t?c(s):u(s)}})}}}]}function Vn(e){function t(e,t,l){t===n?i("$pending",e,l):r("$pending",e,l),P(t)?t?(d(s.$error,e,l),u(s.$$success,e,l)):(u(s.$error,e,l),d(s.$$success,e,l)):(d(s.$error,e,l),d(s.$$success,e,l)),s.$pending?(a(ba,!0),s.$valid=s.$invalid=n,o("",null)):(a(ba,!1),s.$valid=Wn(s.$error),s.$invalid=!s.$valid,o("",s.$valid));var c;c=s.$pending&&s.$pending[e]?n:s.$error[e]?!1:s.$$success[e]?!0:null,o(e,c),p.$setValidity(e,c,s)}function i(e,t,n){s[e]||(s[e]={}),u(s[e],t,n)}function r(e,t,i){s[e]&&d(s[e],t,i),Wn(s[e])&&(s[e]=n)}function a(e,t){t&&!c[e]?(h.addClass(l,e),c[e]=!0):!t&&c[e]&&(h.removeClass(l,e),c[e]=!1)}function o(e,t){e=e?"-"+ne(e,"-"):"",a(ha+e,t===!0),a(fa+e,t===!1)}var s=e.ctrl,l=e.$element,c={},u=e.set,d=e.unset,p=e.parentForm,h=e.$animate;c[fa]=!(c[ha]=l.hasClass(ha)),s.$setValidity=t}function Wn(e){if(e)for(var t in e)return!1;return!0}var Gn=/^\/(.+)\/([a-z]*)$/,Kn="validity",Xn=function(e){return w(e)?e.toLowerCase():e},Yn=Object.prototype.hasOwnProperty,Jn=function(e){return w(e)?e.toUpperCase():e},Qn=function(e){return w(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Zn=function(e){return w(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(Xn=Qn,Jn=Zn);var ei,ti,ni,ii,ri=[].slice,ai=[].splice,oi=[].push,si=Object.prototype.toString,li=i("ng"),ci=e.angular||(e.angular={}),ui=0;ei=t.documentMode,f.$inject=[],g.$inject=[];var di,pi=Array.isArray,hi=function(e){return w(e)?e.trim():e},fi=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},gi=function(){if(y(gi.isActive_))return gi.isActive_;var e=!(!t.querySelector("[ng-csp]")&&!t.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(n){e=!0}return gi.isActive_=e},mi=["ng-","data-ng-","ng:","x-ng-"],vi=/[A-Z]/g,yi=!1,bi=1,wi=2,xi=3,ki=8,Ci=9,Si=11,_i={full:"1.3.17",major:1,minor:3,dot:17,codeName:"tsktskskly-euouae"};we.expando="ng339";var Ti=we.cache={},$i=1,Ai=function(e,t,n){e.addEventListener(t,n,!1)},Ei=function(e,t,n){e.removeEventListener(t,n,!1)};we._data=function(e){return this.cache[e[this.expando]]||{}};var Pi=/([\:\-\_]+(.))/g,Ii=/^moz([A-Z])/,Di={mouseleave:"mouseout",mouseenter:"mouseover"},Mi=i("jqLite"),Ni=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ji=/<|&#?\w+;/,Oi=/<([\w:]+)/,Li=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ri={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ri.optgroup=Ri.option,Ri.tbody=Ri.tfoot=Ri.colgroup=Ri.caption=Ri.thead,Ri.th=Ri.td;var Fi=we.prototype={ready:function(n){function i(){r||(r=!0,n())}var r=!1;"complete"===t.readyState?setTimeout(i):(this.on("DOMContentLoaded",i),we(e).on("load",i))},toString:function(){var e=[];return a(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return ti(e>=0?this[e]:this[this.length+e])},length:0,push:oi,sort:[].sort,splice:[].splice},Ui={};a("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Ui[Xn(e)]=e});var zi={};a("input,select,option,textarea,button,form,details".split(","),function(e){zi[e]=!0});var qi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};a({data:Te,removeData:Se},function(e,t){we[t]=e}),a({data:Te,inheritedData:De,scope:function(e){return ti.data(e,"$scope")||De(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return ti.data(e,"$isolateScope")||ti.data(e,"$isolateScopeNoTemplate")},controller:Ie,injector:function(e){return De(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:$e,css:function(e,t,n){return t=ge(t),y(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,i){var r=e.nodeType;if(r!==xi&&r!==wi&&r!==ki){var a=Xn(t);if(Ui[a]){if(!y(i))return e[t]||(e.attributes.getNamedItem(t)||f).specified?a:n;i?(e[t]=!0,e.setAttribute(t,a)):(e[t]=!1,e.removeAttribute(a))}else if(y(i))e.setAttribute(t,i);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?n:o}}},prop:function(e,t,n){return y(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(v(t)){var n=e.nodeType;return n===bi||n===xi?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(v(t)){if(e.multiple&&"select"===N(e)){var n=[];return a(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return v(t)?e.innerHTML:(ke(e,!0),void(e.innerHTML=t))},empty:Me},function(e,t){we.prototype[t]=function(t,i){var r,a,o=this.length;if(e!==Me&&(2==e.length&&e!==$e&&e!==Ie?t:i)===n){if(b(t)){for(r=0;o>r;r++)if(e===Te)e(this[r],t);else for(a in t)e(this[r],a,t[a]);return this}for(var s=e.$dv,l=s===n?Math.min(o,1):o,c=0;l>c;c++){var u=e(this[c],t,i);s=s?s+u:u}return s}for(r=0;o>r;r++)e(this[r],t,i);return this}}),a({removeData:Se,on:function Ga(e,t,n,i){if(y(i))throw Mi("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ve(e)){var r=_e(e,!0),a=r.events,o=r.handle;o||(o=r.handle=Re(e,a));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],l=s.length;l--;){t=s[l];var c=a[t];c||(a[t]=[],"mouseenter"===t||"mouseleave"===t?Ga(e,Di[t],function(e){var n=this,i=e.relatedTarget;(!i||i!==n&&!n.contains(i))&&o(e,t)}):"$destroy"!==t&&Ai(e,t,o),c=a[t]),c.push(n)}}},off:Ce,one:function(e,t,n){e=ti(e),e.on(t,function i(){e.off(t,n),e.off(t,i)}),e.on(t,n)},replaceWith:function(e,t){var n,i=e.parentNode;ke(e),a(new we(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return a(e.childNodes,function(e){e.nodeType===bi&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===bi||n===Si){t=new we(t);for(var i=0,r=t.length;r>i;i++){var a=t[i];e.appendChild(a)}}},prepend:function(e,t){if(e.nodeType===bi){var n=e.firstChild;a(new we(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=ti(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:Ne,detach:function(e){Ne(e,!0)},after:function(e,t){var n=e,i=e.parentNode;t=new we(t);for(var r=0,a=t.length;a>r;r++){var o=t[r];i.insertBefore(o,n.nextSibling),n=o}},addClass:Ee,removeClass:Ae,toggleClass:function(e,t,n){t&&a(t.split(" "),function(t){var i=n;v(i)&&(i=!$e(e,t)),(i?Ee:Ae)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==Si?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:xe,triggerHandler:function(e,t,n){var i,r,o,s=t.type||t,l=_e(e),c=l&&l.events,u=c&&c[s];u&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:f,type:s,target:e},t.type&&(i=d(i,t)),r=L(u),o=n?[i].concat(n):[i],a(r,function(t){i.isImmediatePropagationStopped()||t.apply(e,o)}))}},function(e,t){we.prototype[t]=function(t,n,i){for(var r,a=0,o=this.length;o>a;a++)v(r)?(r=e(this[a],t,n,i),y(r)&&(r=ti(r))):Pe(r,e(this[a],t,n,i));return y(r)?r:this},we.prototype.bind=we.prototype.on,we.prototype.unbind=we.prototype.off}),ze.prototype={put:function(e,t){this[Ue(e,this.nextUid)]=t},get:function(e){return this[Ue(e,this.nextUid)]},remove:function(e){var t=this[e=Ue(e,this.nextUid)];return delete this[e],t}};var Bi=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Hi=/,/,Vi=/^\s*(_?)(\S+?)\1\s*$/,Wi=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Gi=i("$injector");He.$$annotate=Be;var Ki=i("$animate"),Xi=["$provide",function(e){this.$$selectors={},this.register=function(t,n){var i=t+"-animation";if(t&&"."!=t.charAt(0))throw Ki("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=i,e.factory(i,n)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(e,t,n){function i(t){var i,r=e.defer();return r.promise.$$cancelFn=function(){i&&i()},n.$$postDigest(function(){i=t(function(){r.resolve()})}),r.promise}function r(e,t){var n=[],i=[],r=ce();return a((e.attr("class")||"").split(/\s+/),function(e){r[e]=!0}),a(t,function(e,t){var a=r[t];e===!1&&a?i.push(t):e!==!0||a||n.push(t)}),n.length+i.length>0&&[n.length?n:null,i.length?i:null]}function o(e,t,n){for(var i=0,r=t.length;r>i;++i){var a=t[i];e[a]=n}}function s(){return c||(c=e.defer(),t(function(){c.resolve(),c=null})),c.promise}function l(e,t){if(ci.isObject(t)){var n=d(t.from||{},t.to||{});e.css(n)}}var c;return{animate:function(e,t,n){return l(e,{from:t,to:n}),s()},enter:function(e,t,n,i){return l(e,i),n?n.after(e):t.prepend(e),s()},leave:function(e,t){return l(e,t),e.remove(),s()},move:function(e,t,n,i){return this.enter(e,t,n,i)},addClass:function(e,t,n){return this.setClass(e,t,[],n)},$$addClassImmediately:function(e,t,n){return e=ti(e),t=w(t)?t:pi(t)?t.join(" "):"",a(e,function(e){Ee(e,t)}),l(e,n),s()},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},$$removeClassImmediately:function(e,t,n){return e=ti(e),t=w(t)?t:pi(t)?t.join(" "):"",a(e,function(e){Ae(e,t)}),l(e,n),s()},setClass:function(e,t,n,a){var s=this,l="$$animateClasses",c=!1;e=ti(e);var u=e.data(l);u?a&&u.options&&(u.options=ci.extend(u.options||{},a)):(u={classes:{},options:a},c=!0);var d=u.classes;return t=pi(t)?t:t.split(" "),n=pi(n)?n:n.split(" "),o(d,t,!0),o(d,n,!1),c&&(u.promise=i(function(t){var n=e.data(l);if(e.removeData(l),n){var i=r(e,n.classes);i&&s.$$setClassImmediately(e,i[0],i[1],n.options)}t()}),e.data(l,u)),u.promise},$$setClassImmediately:function(e,t,n,i){return t&&this.$$addClassImmediately(e,t),n&&this.$$removeClassImmediately(e,n),l(e,i),s()},enabled:f,cancel:f}}]}],Yi=i("$compile");Je.$inject=["$provide","$$sanitizeUriProvider"];var Ji=/^((?:x|data)[\:\-_])/i,Qi=i("$controller"),Zi="application/json",er={"Content-Type":Zi+";charset=utf-8"},tr=/^\[|^\{(?!\{)/,nr={"[":/]$/,"{":/}$/},ir=/^\)\]\}',?\n/,rr=i("$interpolate"),ar=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,or={http:80,https:443,ftp:21},sr=i("$location"),lr={$$html5:!1,$$replace:!1,absUrl:At("$$absUrl"),url:function(e){if(v(e))return this.$$url;var t=ar.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:At("$$protocol"),host:At("$$host"),port:At("$$port"),path:Et("$$path",function(e){return e=null!==e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(w(e)||x(e))e=e.toString(),this.$$search=G(e);else{if(!b(e))throw sr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=O(e,{}),a(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:v(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Et("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};a([$t,Tt,_t],function(e){e.prototype=Object.create(lr),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==_t||!this.$$html5)throw sr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=v(t)?null:t,this}});var cr=i("$parse"),ur=Function.prototype.call,dr=Function.prototype.apply,pr=Function.prototype.bind,hr=ce();a({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(e,t){e.constant=e.literal=e.sharedGetter=!0,hr[t]=e}),hr["this"]=function(e){return e},hr["this"].sharedGetter=!0;var fr=d(ce(),{"+":function(e,t,i,r){return i=i(e,t),r=r(e,t),y(i)?y(r)?i+r:i:y(r)?r:n},"-":function(e,t,n,i){return n=n(e,t),i=i(e,t),(y(n)?n:0)-(y(i)?i:0)},"*":function(e,t,n,i){return n(e,t)*i(e,t)},"/":function(e,t,n,i){return n(e,t)/i(e,t)},"%":function(e,t,n,i){return n(e,t)%i(e,t)},"===":function(e,t,n,i){return n(e,t)===i(e,t)},"!==":function(e,t,n,i){return n(e,t)!==i(e,t)},"==":function(e,t,n,i){return n(e,t)==i(e,t)},"!=":function(e,t,n,i){return n(e,t)!=i(e,t)},"<":function(e,t,n,i){return n(e,t)<i(e,t)},">":function(e,t,n,i){return n(e,t)>i(e,t)},"<=":function(e,t,n,i){return n(e,t)<=i(e,t)},">=":function(e,t,n,i){return n(e,t)>=i(e,t)},"&&":function(e,t,n,i){return n(e,t)&&i(e,t)},"||":function(e,t,n,i){return n(e,t)||i(e,t)},"!":function(e,t,n){return!n(e,t)},"=":!0,"|":!0}),gr={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},mr=function(e){this.options=e};mr.prototype={constructor:mr,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),i=n+this.peek(2),r=fr[t],a=fr[n],o=fr[i];if(r||a||o){var s=o?i:a?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||" "===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var i=y(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw cr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,i,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Xn(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var i=this.peek();if("e"==n&&this.isExpOperator(i))e+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){for(var e=this.index;this.index<this.text.length;){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",i=e,r=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(i+=a,r){if("u"===a){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{var s=gr[a];n+=s||a}r=!1}else if("\\"===a)r=!0;else{if(a===e)return this.index++,void this.tokens.push({index:t,text:i,constant:!0,value:n});n+=a}this.index++}this.throwError("Unterminated quote",t)}};var vr=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};vr.ZERO=d(function(){return 0},{sharedGetter:!0,constant:!0}),vr.prototype={constructor:vr,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.peek().identifier&&this.peek().text in hr?e=hr[this.consume().text]:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t,n;t=this.expect("(","[",".");)"("===t.text?(e=this.functionCall(e,n),n=null):"["===t.text?(n=e,e=this.objectIndex(e)):"."===t.text?(n=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw cr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw cr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,i){return this.peekAhead(0,e,t,n,i)},peekAhead:function(e,t,n,i,r){if(this.tokens.length>e){var a=this.tokens[e],o=a.text;if(o===t||o===n||o===i||o===r||!t&&!n&&!i&&!r)return a}return!1},expect:function(e,t,n,i){var r=this.peek(e,t,n,i);return r?(this.tokens.shift(),r):!1},consume:function(e){if(0===this.tokens.length)throw cr("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},unaryFn:function(e,t){var n=fr[e];return d(function(e,i){return n(e,i,t)},{constant:t.constant,inputs:[t]})},binaryFn:function(e,t,n,i){var r=fr[t];return d(function(t,i){return r(t,i,e,n)},{constant:e.constant&&n.constant,inputs:!i&&[e,n]})},identifier:function(){for(var e=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)e+=this.consume().text+this.consume().text;return Ut(e,this.options,this.text)},constant:function(){var e=this.consume().value;return d(function(){return e},{constant:!0,literal:!0})},statements:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain()),!this.expect(";"))return 1===e.length?e[0]:function(t,n){for(var i,r=0,a=e.length;a>r;r++)i=e[r](t,n);return i}},filterChain:function(){for(var e,t=this.expression();e=this.expect("|");)t=this.filter(t);return t},filter:function(e){var t,i,r=this.$filter(this.consume().text);if(this.peek(":"))for(t=[],i=[];this.expect(":");)t.push(this.expression());var a=[e].concat(t||[]);return d(function(a,o){var s=e(a,o);if(i){i[0]=s;for(var l=t.length;l--;)i[l+1]=t[l](a,o);return r.apply(n,i)}return r(s)},{constant:!r.$stateful&&a.every(jt),inputs:!r.$stateful&&a})},expression:function(){return this.assignment()},assignment:function(){var e,t,n=this.ternary();return(t=this.expect("="))?(n.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),e=this.ternary(),d(function(t,i){return n.assign(t,e(t,i),i)},{inputs:[n,e]})):n},ternary:function(){var e,t,n=this.logicalOR();if((t=this.expect("?"))&&(e=this.assignment(),this.consume(":"))){var i=this.assignment();return d(function(t,r){return n(t,r)?e(t,r):i(t,r)},{constant:n.constant&&e.constant&&i.constant})}return n},logicalOR:function(){for(var e,t=this.logicalAND();e=this.expect("||");)t=this.binaryFn(t,e.text,this.logicalAND(),!0);return t},logicalAND:function(){for(var e,t=this.equality();e=this.expect("&&");)t=this.binaryFn(t,e.text,this.equality(),!0);return t},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t=this.binaryFn(t,e.text,this.relational());return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t=this.binaryFn(t,e.text,this.additive());return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=this.binaryFn(t,e.text,this.multiplicative());return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=this.binaryFn(t,e.text,this.unary());return t},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(vr.ZERO,e.text,this.unary()):(e=this.expect("!"))?this.unaryFn(e.text,this.unary()):this.primary()},fieldAccess:function(e){var t=this.identifier();return d(function(i,r,a){var o=a||e(i,r);return null==o?n:t(o)},{assign:function(n,i,r){var a=e(n,r);return a||e.assign(n,a={},r),t.assign(a,i)}})},objectIndex:function(e){var t=this.text,i=this.expression();return this.consume("]"),d(function(r,a){var o,s=e(r,a),l=i(r,a);return Dt(l,t),s?o=Mt(s[l],t):n},{assign:function(n,r,a){var o=Dt(i(n,a),t),s=Mt(e(n,a),t);return s||e.assign(n,s={},a),s[o]=r}})},functionCall:function(e,t){var i=[];if(")"!==this.peekToken().text)do i.push(this.expression());while(this.expect(","));this.consume(")");var r=this.text,a=i.length?[]:null;return function(o,s){var l=t?t(o,s):y(t)?n:o,c=e(o,s,l)||f;if(a)for(var u=i.length;u--;)a[u]=Mt(i[u](o,s),r);Mt(l,r),Nt(c,r);var d=c.apply?c.apply(l,a):c(a[0],a[1],a[2],a[3],a[4]);return a&&(a.length=0),Mt(d,r)}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),d(function(t,n){for(var i=[],r=0,a=e.length;a>r;r++)i.push(e[r](t,n));return i},{literal:!0,constant:e.every(jt),inputs:e})},object:function(){var e=[],t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var n=this.consume();n.constant?e.push(n.value):n.identifier?e.push(n.text):this.throwError("invalid key",n),this.consume(":"),t.push(this.expression())}while(this.expect(","));return this.consume("}"),d(function(n,i){for(var r={},a=0,o=t.length;o>a;a++)r[e[a]]=t[a](n,i);return r},{literal:!0,constant:t.every(jt),inputs:t})}};var yr=ce(),br=ce(),wr=Object.prototype.valueOf,xr=i("$sce"),kr={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Yi=i("$compile"),Cr=t.createElement("a"),Sr=rn(e.location.href);sn.$inject=["$provide"],dn.$inject=["$locale"],pn.$inject=["$locale"];var _r=".",Tr={yyyy:gn("FullYear",4),yy:gn("FullYear",2,0,!0),y:gn("FullYear",1),MMMM:mn("Month"),MMM:mn("Month",!0),MM:gn("Month",2,1),M:gn("Month",1,1),dd:gn("Date",2),d:gn("Date",1),HH:gn("Hours",2),H:gn("Hours",1),hh:gn("Hours",2,-12),h:gn("Hours",1,-12),mm:gn("Minutes",2),m:gn("Minutes",1),ss:gn("Seconds",2),s:gn("Seconds",1),sss:gn("Milliseconds",3),EEEE:mn("Day"),EEE:mn("Day",!0),a:xn,Z:vn,ww:wn(2),w:wn(1),G:kn,GG:kn,GGG:kn,GGGG:Cn},$r=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Ar=/^\-?\d+$/;Sn.$inject=["$locale"];var Er=m(Xn),Pr=m(Jn);$n.$inject=["$parse"];var Ir=m({restrict:"E",compile:function(e,t){return t.href||t.xlinkHref||t.name?void 0:function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===si.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),Dr={};a(Ui,function(e,t){if("multiple"!=e){var n=Qe("ng-"+t);Dr[n]=function(){return{restrict:"A",priority:100,link:function(e,i,r){e.$watch(r[n],function(e){r.$set(t,!!e)})}}}}}),a(qi,function(e,t){Dr[t]=function(){return{priority:100,link:function(e,n,i){if("ngPattern"===t&&"/"==i.ngPattern.charAt(0)){var r=i.ngPattern.match(Gn);if(r)return void i.$set("ngPattern",new RegExp(r[1],r[2]))}e.$watch(i[t],function(e){i.$set(t,e)})}}}}),a(["src","srcset","href"],function(e){var t=Qe("ng-"+e);Dr[t]=function(){return{priority:99,link:function(n,i,r){var a=e,o=e;"href"===e&&"[object SVGAnimatedString]"===si.call(i.prop("href"))&&(o="xlinkHref",r.$attr[o]="xlink:href",a=null),r.$observe(t,function(t){return t?(r.$set(o,t),void(ei&&a&&i.prop(a,r[o]))):void("href"===e&&r.$set(o,null))})}}}});var Mr={$addControl:f,$$renameControl:En,$removeControl:f,$setValidity:f,$setDirty:f,$setPristine:f,$setSubmitted:f},Nr="ng-submitted";Pn.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var jr=function(e){return["$timeout",function(t){var i={name:"form",restrict:e?"EAC":"E",controller:Pn,compile:function(i,r){i.addClass(ga).addClass(ha);var a=r.name?"name":e&&r.ngForm?"ngForm":!1;return{pre:function(e,i,r,o){if(!("action"in r)){var s=function(t){e.$apply(function(){o.$commitViewValue(),o.$setSubmitted()}),t.preventDefault()};Ai(i[0],"submit",s),i.on("$destroy",function(){t(function(){Ei(i[0],"submit",s)},0,!1)})}var l=o.$$parentForm;a&&(Ot(e,null,o.$name,o,o.$name),r.$observe(a,function(t){o.$name!==t&&(Ot(e,null,o.$name,n,o.$name),l.$$renameControl(o,t),Ot(e,null,o.$name,o,o.$name))})),i.on("$destroy",function(){l.$removeControl(o),a&&Ot(e,null,r[a],n,o.$name),d(o,Mr)})}}}};return i}]},Or=jr(),Lr=jr(!0),Rr=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Fr=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Ur=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,zr=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,qr=/^(\d{4})-(\d{2})-(\d{2})$/,Br=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Hr=/^(\d{4})-W(\d\d)$/,Vr=/^(\d{4})-(\d\d)$/,Wr=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Gr={text:Dn,date:On("date",qr,jn(qr,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":On("datetimelocal",Br,jn(Br,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:On("time",Wr,jn(Wr,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:On("week",Hr,Nn,"yyyy-Www"),month:On("month",Vr,jn(Vr,["yyyy","MM"]),"yyyy-MM"),number:Rn,url:Fn,email:Un,radio:zn,checkbox:Bn,hidden:f,button:f,submit:f,reset:f,file:f},Kr=["$browser","$sniffer","$filter","$parse",function(e,t,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,a,o,s){s[0]&&(Gr[Xn(o.type)]||Gr.text)(r,a,o,s[0],t,e,n,i)}}}}],Xr=/^(true|false|\d+)$/,Yr=function(){return{restrict:"A",priority:100,compile:function(e,t){return Xr.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Jr=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,i,r){e.$$addBindingInfo(i,r.ngBind),i=i[0],t.$watch(r.ngBind,function(e){i.textContent=e===n?"":e})}}}}],Qr=["$interpolate","$compile",function(e,t){return{compile:function(i){return t.$$addBindingClass(i),function(i,r,a){var o=e(r.attr(a.$attr.ngBindTemplate));t.$$addBindingInfo(r,o.expressions),r=r[0],a.$observe("ngBindTemplate",function(e){r.textContent=e===n?"":e})}}}}],Zr=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(i,r){var a=t(r.ngBindHtml),o=t(r.ngBindHtml,function(e){return(e||"").toString()});return n.$$addBindingClass(i),function(t,i,r){n.$$addBindingInfo(i,r.ngBindHtml),t.$watch(o,function(){i.html(e.getTrustedHtml(a(t))||"")})}}}}],ea=m({restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),ta=Hn("",!0),na=Hn("Odd",0),ia=Hn("Even",1),ra=An({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),aa=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],oa={},sa={blur:!0,focus:!0};a("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Qe("ng-"+e);oa[t]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,a){var o=n(a[t],null,!0);return function(t,n){n.on(e,function(n){var r=function(){o(t,{$event:n})};sa[e]&&i.$$phase?t.$evalAsync(r):t.$apply(r)})}}}}]});var la=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,a,o){var s,l,c;n.$watch(r.ngIf,function(n){n?l||o(function(n,a){l=a,n[n.length++]=t.createComment(" end ngIf: "+r.ngIf+" "),s={clone:n},e.enter(n,i.parent(),i)}):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),s&&(c=le(s.clone),e.leave(c).then(function(){c=null}),s=null))})}}}],ca=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ci.noop,compile:function(i,r){var a=r.ngInclude||r.src,o=r.onload||"",s=r.autoscroll;return function(i,r,l,c,u){var d,p,h,f=0,g=function(){p&&(p.remove(),p=null),d&&(d.$destroy(),d=null),h&&(n.leave(h).then(function(){p=null}),p=h,h=null)};i.$watch(a,function(a){var l=function(){!y(s)||s&&!i.$eval(s)||t()},p=++f;a?(e(a,!0).then(function(e){if(p===f){var t=i.$new();c.template=e;var s=u(t,function(e){g(),n.enter(e,null,r).then(l)});d=t,h=s,d.$emit("$includeContentLoaded",a),i.$eval(o)}},function(){p===f&&(g(),i.$emit("$includeContentError",a))}),i.$emit("$includeContentRequested",a)):(g(),c.template=null)})}}}}],ua=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,a){return/SVG/.test(i[0].toString())?(i.empty(),void e(ye(a.template,t).childNodes)(n,function(e){i.append(e)},{futureParentElement:i})):(i.html(a.template),void e(i.contents())(n))}}}],da=An({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),pa=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,i,r){var o=t.attr(i.$attr.ngList)||", ",s="false"!==i.ngTrim,l=s?hi(o):o,c=function(e){if(!v(e)){var t=[];return e&&a(e.split(l),function(e){e&&t.push(s?hi(e):e)}),t}};r.$parsers.push(c),r.$formatters.push(function(e){return pi(e)?e.join(o):n}),r.$isEmpty=function(e){return!e||!e.length}}}},ha="ng-valid",fa="ng-invalid",ga="ng-pristine",ma="ng-dirty",va="ng-untouched",ya="ng-touched",ba="ng-pending",wa=new i("ngModel"),xa=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,i,r,o,s,l,c,u,d){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],
this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=d(i.name||"",!1)(e);var p,h=o(i.ngModel),g=h.assign,m=h,b=g,w=null,k=this;this.$$setOptions=function(e){if(k.$options=e,e&&e.getterSetter){var t=o(i.ngModel+"()"),n=o(i.ngModel+"($$$p)");m=function(e){var n=h(e);return C(n)&&(n=t(e)),n},b=function(e,t){C(h(e))?n(e,{$$$p:k.$modelValue}):g(e,k.$modelValue)}}else if(!h.assign)throw wa("nonassign","Expression '{0}' is non-assignable. Element: {1}",i.ngModel,V(r))},this.$render=f,this.$isEmpty=function(e){return v(e)||""===e||null===e||e!==e};var S=r.inheritedData("$formController")||Mr,_=0;Vn({ctrl:this,$element:r,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},parentForm:S,$animate:s}),this.$setPristine=function(){k.$dirty=!1,k.$pristine=!0,s.removeClass(r,ma),s.addClass(r,ga)},this.$setDirty=function(){k.$dirty=!0,k.$pristine=!1,s.removeClass(r,ga),s.addClass(r,ma),S.$setDirty()},this.$setUntouched=function(){k.$touched=!1,k.$untouched=!0,s.setClass(r,va,ya)},this.$setTouched=function(){k.$touched=!0,k.$untouched=!1,s.setClass(r,ya,va)},this.$rollbackViewValue=function(){l.cancel(w),k.$viewValue=k.$$lastCommittedViewValue,k.$render()},this.$validate=function(){if(!x(k.$modelValue)||!isNaN(k.$modelValue)){var e=k.$$lastCommittedViewValue,t=k.$$rawModelValue,i=k.$valid,r=k.$modelValue,a=k.$options&&k.$options.allowInvalid;k.$$runValidators(t,e,function(e){a||i===e||(k.$modelValue=e?t:n,k.$modelValue!==r&&k.$$writeModelToScope())})}},this.$$runValidators=function(e,t,i){function r(){var e=k.$$parserName||"parse";return p!==n?(p||(a(k.$validators,function(e,t){l(t,null)}),a(k.$asyncValidators,function(e,t){l(t,null)})),l(e,p),p):(l(e,null),!0)}function o(){var n=!0;return a(k.$validators,function(i,r){var a=i(e,t);n=n&&a,l(r,a)}),n?!0:(a(k.$asyncValidators,function(e,t){l(t,null)}),!1)}function s(){var i=[],r=!0;a(k.$asyncValidators,function(a,o){var s=a(e,t);if(!I(s))throw wa("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",s);l(o,n),i.push(s.then(function(){l(o,!0)},function(e){r=!1,l(o,!1)}))}),i.length?u.all(i).then(function(){c(r)},f):c(!0)}function l(e,t){d===_&&k.$setValidity(e,t)}function c(e){d===_&&i(e)}_++;var d=_;return r()&&o()?void s():void c(!1)},this.$commitViewValue=function(){var e=k.$viewValue;l.cancel(w),(k.$$lastCommittedViewValue!==e||""===e&&k.$$hasNativeValidators)&&(k.$$lastCommittedViewValue=e,k.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function t(){k.$modelValue!==o&&k.$$writeModelToScope()}var i=k.$$lastCommittedViewValue,r=i;if(p=v(r)?n:!0)for(var a=0;a<k.$parsers.length;a++)if(r=k.$parsers[a](r),v(r)){p=!1;break}x(k.$modelValue)&&isNaN(k.$modelValue)&&(k.$modelValue=m(e));var o=k.$modelValue,s=k.$options&&k.$options.allowInvalid;k.$$rawModelValue=r,s&&(k.$modelValue=r,t()),k.$$runValidators(r,k.$$lastCommittedViewValue,function(e){s||(k.$modelValue=e?r:n,t())})},this.$$writeModelToScope=function(){b(e,k.$modelValue),a(k.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){k.$viewValue=e,(!k.$options||k.$options.updateOnDefault)&&k.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,i=0,r=k.$options;r&&y(r.debounce)&&(n=r.debounce,x(n)?i=n:x(n[t])?i=n[t]:x(n["default"])&&(i=n["default"])),l.cancel(w),i?w=l(function(){k.$commitViewValue()},i):c.$$phase?k.$commitViewValue():e.$apply(function(){k.$commitViewValue()})},e.$watch(function(){var t=m(e);if(t!==k.$modelValue&&(k.$modelValue===k.$modelValue||t===t)){k.$modelValue=k.$$rawModelValue=t,p=n;for(var i=k.$formatters,r=i.length,a=t;r--;)a=i[r](a);k.$viewValue!==a&&(k.$viewValue=k.$$lastCommittedViewValue=a,k.$render(),k.$$runValidators(t,a,f))}return t})}],ka=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:xa,priority:1,compile:function(t){return t.addClass(ga).addClass(va).addClass(ha),{pre:function(e,t,n,i){var r=i[0],a=i[1]||Mr;r.$$setOptions(i[2]&&i[2].$options),a.$addControl(r),n.$observe("name",function(e){r.$name!==e&&a.$$renameControl(r,e)}),e.$on("$destroy",function(){a.$removeControl(r)})},post:function(t,n,i,r){var a=r[0];a.$options&&a.$options.updateOn&&n.on(a.$options.updateOn,function(e){a.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(n){a.$touched||(e.$$phase?t.$evalAsync(a.$setTouched):t.$apply(a.$setTouched))})}}}}}],Ca=/(\s+|^)default(\s+|$)/,Sa=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var i=this;this.$options=e.$eval(t.ngModelOptions),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=hi(this.$options.updateOn.replace(Ca,function(){return i.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},_a=An({terminal:!0,priority:1e3}),Ta=["$locale","$interpolate",function(e,t){var n=/{}/g,i=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(r,o,s){function l(e){o.text(e||"")}var c,u=s.count,d=s.$attr.when&&o.attr(s.$attr.when),p=s.offset||0,h=r.$eval(d)||{},f={},g=t.startSymbol(),m=t.endSymbol(),v=g+u+"-"+p+m,y=ci.noop;a(s,function(e,t){var n=i.exec(t);if(n){var r=(n[1]?"-":"")+Xn(n[2]);h[r]=o.attr(s.$attr[t])}}),a(h,function(e,i){f[i]=t(e.replace(n,v))}),r.$watch(u,function(t){var n=parseFloat(t),i=isNaN(n);i||n in h||(n=e.pluralCat(n-p)),n===c||i&&isNaN(c)||(y(),y=r.$watch(f[n],l),c=n)})}}}],$a=["$parse","$animate",function(e,o){var s="$$NG_REMOVED",l=i("ngRepeat"),c=function(e,t,n,i,r,a,o){e[n]=i,r&&(e[r]=a),e.$index=t,e.$first=0===t,e.$last=t===o-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},u=function(e){return e.clone[0]},d=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,p){var h=p.ngRepeat,f=t.createComment(" end ngRepeat: "+h+" "),g=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!g)throw l("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",h);var m=g[1],v=g[2],y=g[3],b=g[4];if(g=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!g)throw l("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",m);var w=g[3]||g[1],x=g[2];if(y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw l("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);var k,C,S,_,T={$id:Ue};return b?k=e(b):(S=function(e,t){return Ue(t)},_=function(e){return e}),function(e,t,i,p,g){k&&(C=function(t,n,i){return x&&(T[x]=t),T[w]=n,T.$index=i,k(e,T)});var m=ce();e.$watchCollection(v,function(i){var p,v,b,k,T,$,A,E,P,I,D,M,N=t[0],j=ce();if(y&&(e[y]=i),r(i))P=i,E=C||S;else{E=C||_,P=[];for(var O in i)i.hasOwnProperty(O)&&"$"!=O.charAt(0)&&P.push(O);P.sort()}for(k=P.length,D=new Array(k),p=0;k>p;p++)if(T=i===P?p:P[p],$=i[T],A=E(T,$,p),m[A])I=m[A],delete m[A],j[A]=I,D[p]=I;else{if(j[A])throw a(D,function(e){e&&e.scope&&(m[e.id]=e)}),l("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",h,A,$);D[p]={id:A,scope:n,clone:n},j[A]=!0}for(var L in m){if(I=m[L],M=le(I.clone),o.leave(M),M[0].parentNode)for(p=0,v=M.length;v>p;p++)M[p][s]=!0;I.scope.$destroy()}for(p=0;k>p;p++)if(T=i===P?p:P[p],$=i[T],I=D[p],I.scope){b=N;do b=b.nextSibling;while(b&&b[s]);u(I)!=b&&o.move(le(I.clone),null,ti(N)),N=d(I),c(I.scope,p,w,$,x,T,k)}else g(function(e,t){I.scope=t;var n=f.cloneNode(!1);e[e.length++]=n,o.enter(e,null,ti(N)),N=n,I.clone=e,j[I.id]=I,c(I.scope,p,w,$,x,T,k)});m=j})}}}}],Aa="ng-hide",Ea="ng-hide-animate",Pa=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngShow,function(t){e[t?"removeClass":"addClass"](n,Aa,{tempClasses:Ea})})}}}],Ia=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngHide,function(t){e[t?"addClass":"removeClass"](n,Aa,{tempClasses:Ea})})}}}],Da=An(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&a(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),Ma=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,o){var s=r.ngSwitch||r.on,l=[],c=[],u=[],d=[],p=function(e,t){return function(){e.splice(t,1)}};n.$watch(s,function(n){var i,r;for(i=0,r=u.length;r>i;++i)e.cancel(u[i]);for(u.length=0,i=0,r=d.length;r>i;++i){var s=le(c[i].clone);d[i].$destroy();var h=u[i]=e.leave(s);h.then(p(u,i))}c.length=0,d.length=0,(l=o.cases["!"+n]||o.cases["?"])&&a(l,function(n){n.transclude(function(i,r){d.push(r);var a=n.element;i[i.length++]=t.createComment(" end ngSwitchWhen: ");var o={clone:i};c.push(o),e.enter(i,a.parent(),a)})})})}}}],Na=An({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["!"+n.ngSwitchWhen]=i.cases["!"+n.ngSwitchWhen]||[],i.cases["!"+n.ngSwitchWhen].push({transclude:r,element:t})}}),ja=An({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:t})}}),Oa=An({restrict:"EAC",link:function(e,t,n,r,a){if(!a)throw i("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",V(t));a(function(e){t.empty(),t.append(e)})}}),La=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var i=n.id,r=t[0].text;e.put(i,r)}}}}],Ra=i("ngOptions"),Fa=m({restrict:"A",terminal:!0}),Ua=["$compile","$parse",function(e,i){var r=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:f};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var i,r,a=this,o={},l=s;a.databound=n.ngModel,a.init=function(e,t,n){l=e,i=t,r=n},a.addOption=function(t,n){oe(t,'"option value"'),o[t]=!0,l.$viewValue==t&&(e.val(t),r.parent()&&r.remove()),n&&n[0].hasAttribute("selected")&&(n[0].selected=!0)},a.removeOption=function(e){this.hasOption(e)&&(delete o[e],l.$viewValue===e&&this.renderUnknownOption(e))},a.renderUnknownOption=function(t){var n="? "+Ue(t)+" ?";r.val(n),e.prepend(r),e.val(n),r.prop("selected",!0)},a.hasOption=function(e){return o.hasOwnProperty(e)},t.$on("$destroy",function(){a.renderUnknownOption=f})}],link:function(s,l,c,u){function d(e,t,n,i){n.$render=function(){var e=n.$viewValue;i.hasOption(e)?(S.parent()&&S.remove(),t.val(e),""===e&&f.prop("selected",!0)):null==e&&f?t.val(""):i.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){S.parent()&&S.remove(),n.$setViewValue(t.val())})})}function p(e,t,n){var i;n.$render=function(){var e=new ze(n.$viewValue);a(t.find("option"),function(t){t.selected=y(e.get(t.value))})},e.$watch(function(){R(i,n.$viewValue)||(i=L(n.$viewValue),n.$render())}),t.on("change",function(){e.$apply(function(){var e=[];a(t.find("option"),function(t){t.selected&&e.push(t.value)}),n.$setViewValue(e)})})}function h(t,s,l){function c(e,n,i){return R[$]=i,P&&(R[P]=n),e(t,R)}function u(){t.$apply(function(){var e,n=M(t)||[];if(v)e=[],a(s.val(),function(t){t=j?O[t]:t,e.push(d(t,n[t]))});else{var i=j?O[s.val()]:s.val();e=d(i,n[i])}l.$setViewValue(e),S()})}function d(e,t){if("?"===e)return n;if(""===e)return null;var i=E?E:D;return c(i,e,t)}function p(){var e,n=M(t);if(n&&pi(n)){e=new Array(n.length);for(var i=0,r=n.length;r>i;i++)e[i]=c(T,i,n[i]);return e}if(n){e={};for(var a in n)n.hasOwnProperty(a)&&(e[a]=c(T,a,n[a]))}return e}function h(e){var t;if(v)if(j&&pi(e)){t=new ze([]);for(var n=0;n<e.length;n++)t.put(c(j,null,e[n]),!0)}else t=new ze(e);else j&&(e=c(j,null,e));return function(n,i){var r;return r=j?j:E?E:D,v?y(t.remove(c(r,n,i))):e===c(r,n,i)}}function f(){x||(t.$$postDigest(S),x=!0)}function m(e,t,n){e[t]=e[t]||0,e[t]+=n?1:-1}function S(){x=!1;var e,n,i,r,u,d,p,f,b,S,_,$,A,E,D,N,F,U={"":[]},z=[""],q=l.$viewValue,B=M(t)||[],H=P?o(B):B,V={},W=h(q),G=!1;for(O={},$=0;S=H.length,S>$;$++)p=$,P&&(p=H[$],"$"===p.charAt(0))||(f=B[p],e=c(I,p,f)||"",(n=U[e])||(n=U[e]=[],z.push(e)),A=W(p,f),G=G||A,N=c(T,p,f),N=y(N)?N:"",F=j?j(t,R):P?H[$]:$,j&&(O[F]=p),n.push({id:F,label:N,selected:A}));for(v||(w||null===q?U[""].unshift({id:"",label:"",selected:!G}):G||U[""].unshift({id:"?",label:"",selected:!0})),_=0,b=z.length;b>_;_++){for(e=z[_],n=U[e],L.length<=_?(r={element:C.clone().attr("label",e),label:n.label},u=[r],L.push(u),s.append(r.element)):(u=L[_],r=u[0],r.label!=e&&r.element.attr("label",r.label=e)),E=null,$=0,S=n.length;S>$;$++)i=n[$],(d=u[$+1])?(E=d.element,d.label!==i.label&&(m(V,d.label,!1),m(V,i.label,!0),E.text(d.label=i.label),E.prop("label",d.label)),d.id!==i.id&&E.val(d.id=i.id),E[0].selected!==i.selected&&(E.prop("selected",d.selected=i.selected),ei&&E.prop("selected",d.selected))):(""===i.id&&w?D=w:(D=k.clone()).val(i.id).prop("selected",i.selected).attr("selected",i.selected).prop("label",i.label).text(i.label),u.push(d={element:D,label:i.label,id:i.id,selected:i.selected}),m(V,i.label,!0),E?E.after(D):r.element.append(D),E=D);for($++;u.length>$;)i=u.pop(),m(V,i.label,!1),i.element.remove()}for(;L.length>_;){for(n=L.pop(),$=1;$<n.length;++$)m(V,n[$].label,!1);n[0].element.remove()}a(V,function(e,t){e>0?g.addOption(t):0>e&&g.removeOption(t)})}var _;if(!(_=b.match(r)))throw Ra("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",b,V(s));var T=i(_[2]||_[1]),$=_[4]||_[6],A=/ as /.test(_[0])&&_[1],E=A?i(A):null,P=_[5],I=i(_[3]||""),D=i(_[2]?_[1]:$),M=i(_[7]),N=_[8],j=N?i(_[8]):null,O={},L=[[{element:s,label:""}]],R={};w&&(e(w)(t),w.removeClass("ng-scope"),w.remove()),s.empty(),s.on("change",u),l.$render=S,t.$watchCollection(M,f),t.$watchCollection(p,f),v&&t.$watchCollection(function(){return l.$modelValue},f)}if(u[1]){for(var f,g=u[0],m=u[1],v=c.multiple,b=c.ngOptions,w=!1,x=!1,k=ti(t.createElement("option")),C=ti(t.createElement("optgroup")),S=k.clone(),_=0,T=l.children(),$=T.length;$>_;_++)if(""===T[_].value){f=w=T.eq(_);break}g.init(m,w,S),v&&(m.$isEmpty=function(e){return!e||0===e.length}),b?h(s,l,m):v?p(s,l,m):d(s,l,m,g)}}}}],za=["$interpolate",function(e){var t={addOption:f,removeOption:f};return{restrict:"E",priority:100,compile:function(n,i){if(v(i.value)){var r=e(n.text(),!0);r||i.$set("value",n.text())}return function(e,n,i){var a="$selectController",o=n.parent(),s=o.data(a)||o.parent().data(a);s&&s.databound||(s=t),r?e.$watch(r,function(e,t){i.$set("value",e),t!==e&&s.removeOption(t),s.addOption(e,n)}):s.addOption(i.value,n),n.on("$destroy",function(){s.removeOption(i.value)})}}}}],qa=m({restrict:"E",terminal:!1}),Ba=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){i&&(n.required=!0,i.$validators.required=function(e,t){return!n.required||!i.$isEmpty(t)},n.$observe("required",function(){i.$validate()}))}}},Ha=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,a){if(a){var o,s=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(w(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,e,V(t));o=e||n,a.$validate()}),a.$validators.pattern=function(e){return a.$isEmpty(e)||v(o)||o.test(e)}}}}},Va=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=-1;n.$observe("maxlength",function(e){var t=p(e);r=isNaN(t)?-1:t,i.$validate()}),i.$validators.maxlength=function(e,t){return 0>r||i.$isEmpty(t)||t.length<=r}}}}},Wa=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=0;n.$observe("minlength",function(e){r=p(e)||0,i.$validate()}),i.$validators.minlength=function(e,t){return i.$isEmpty(t)||t.length>=r}}}}};return e.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(ie(),he(ci),void ti(t).ready(function(){Q(t,Z)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),function(e,t,n){"use strict";function i(){this.$get=["$$sanitizeUri",function(e){return function(t){var n=[];return o(t,c(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}function r(e){var n=[],i=c(n,t.noop);return i.chars(e),n.join("")}function a(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}function o(e,n){function i(e,i,a,o){if(i=t.lowercase(i),_[i])for(;b.last()&&T[b.last()];)r("",b.last());S[i]&&b.last()==i&&r("",i),o=x[i]||!!o,o||b.push(i);var l={};a.replace(h,function(e,t,n,i,r){var a=n||i||r||"";l[t]=s(a)}),n.start&&n.start(i,l,o)}function r(e,i){var r,a=0;if(i=t.lowercase(i))for(a=b.length-1;a>=0&&b[a]!=i;a--);if(a>=0){for(r=b.length-1;r>=a;r--)n.end&&n.end(b[r]);b.length=a}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var a,o,l,c,b=[],w=e;for(b.last=function(){return b[b.length-1]};e;){if(c="",o=!0,b.last()&&A[b.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+b.last()+"[^>]*>","i"),function(e,t){return t=t.replace(m,"$1").replace(y,"$1"),n.chars&&n.chars(s(t)),""}),r("",b.last())):(0===e.indexOf("<!--")?(a=e.indexOf("--",4),a>=0&&e.lastIndexOf("-->",a)===a&&(n.comment&&n.comment(e.substring(4,a)),e=e.substring(a+3),o=!1)):v.test(e)?(l=e.match(v),l&&(e=e.replace(l[0],""),o=!1)):g.test(e)?(l=e.match(p),l&&(e=e.substring(l[0].length),l[0].replace(p,r),o=!1)):f.test(e)&&(l=e.match(d),l?(l[4]&&(e=e.substring(l[0].length),l[0].replace(d,i)),o=!1):(c+="<",e=e.substring(1))),o&&(a=e.indexOf("<"),c+=0>a?e:e.substring(0,a),e=0>a?"":e.substring(a),n.chars&&n.chars(s(c)))),e==w)throw u("badparse","The sanitizer was unable to parse the following block of html: {0}",e);w=e}r()}function s(e){return e?(N.innerHTML=e.replace(/</g,"&lt;"),N.textContent):""}function l(e){return e.replace(/&/g,"&amp;").replace(b,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(w,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(e,n){var i=!1,r=t.bind(e,e.push);return{start:function(e,a,o){e=t.lowercase(e),!i&&A[e]&&(i=e),i||E[e]!==!0||(r("<"),r(e),t.forEach(a,function(i,a){var o=t.lowercase(a),s="img"===e&&"src"===o||"background"===o;M[o]!==!0||P[o]===!0&&!n(i,s)||(r(" "),r(a),r('="'),r(l(i)),r('"'))}),r(o?"/>":">"))},end:function(e){e=t.lowercase(e),i||E[e]!==!0||(r("</"),r(e),r(">")),e==i&&(i=!1)},chars:function(e){i||r(l(e))}}}var u=t.$$minErr("$sanitize"),d=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,p=/^<\/\s*([\w:-]+)[^>]*>/,h=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,f=/^</,g=/^<\//,m=/<!--(.*?)-->/g,v=/<!DOCTYPE([^>]*?)>/i,y=/<!\[CDATA\[(.*?)]]>/g,b=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w=/([^\#-~| |!])/g,x=a("area,br,col,hr,img,wbr"),k=a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),C=a("rp,rt"),S=t.extend({},C,k),_=t.extend({},k,a("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),T=t.extend({},C,a("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),$=a("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),A=a("script,style"),E=t.extend({},x,_,T,S,$),P=a("background,cite,href,longdesc,src,usemap,xlink:href"),I=a("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),D=a("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),M=t.extend({},P,D,I),N=document.createElement("pre");t.module("ngSanitize",[]).provider("$sanitize",i),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/i,i=/^mailto:/i;return function(a,o){function s(e){e&&h.push(r(e))}function l(e,n){h.push("<a "),t.isDefined(o)&&h.push('target="',o,'" '),h.push('href="',e.replace(/"/g,"&quot;"),'">'),s(n),h.push("</a>")}if(!a)return a;for(var c,u,d,p=a,h=[];c=p.match(n);)u=c[0],c[2]||c[4]||(u=(c[3]?"http://":"mailto:")+u),d=c.index,s(p.substr(0,d)),l(u,c[0].replace(i,"")),p=p.substring(d+c[0].length);return s(p),e(h.join(""))}}])}(window,window.angular),function(e){"use strict";var t={};t.VERSION="0.9.14";var n,i={},r=function(e,t){return function(){return t.apply(e,arguments)}},a=function(){var e,t,n=arguments,i=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in i||!n[t].hasOwnProperty(e)||(i[e]=n[t][e]);return i},o=function(e,t){return{value:e,name:t}};t.DEBUG=o(1,"DEBUG"),t.INFO=o(2,"INFO"),t.WARN=o(4,"WARN"),t.ERROR=o(8,"ERROR"),t.OFF=o(99,"OFF");var s=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};s.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(t.DEBUG,arguments)},info:function(){this.invoke(t.INFO,arguments)},warn:function(){this.invoke(t.WARN,arguments)},error:function(){this.invoke(t.ERROR,arguments)},invoke:function(e,t){n&&this.enabledFor(e)&&n(t,a({level:e},this.context))}};var l=new s({filterLevel:t.OFF});!function(){var e=t;e.enabledFor=r(l,l.enabledFor),e.debug=r(l,l.debug),e.info=r(l,l.info),e.warn=r(l,l.warn),e.error=r(l,l.error),e.log=e.info}(),t.setHandler=function(e){n=e},t.setLevel=function(e){l.setLevel(e);for(var t in i)i.hasOwnProperty(t)&&i[t].setLevel(e)},t.get=function(e){return i[e]||(i[e]=new s(a({name:e},l.context)))},t.useDefaults=function(e){"undefined"!=typeof console&&(t.setLevel(e||t.DEBUG),t.setHandler(function(e,n){var i=console.log;n.name&&(e[0]="["+n.name+"] "+e[0]),n.level===t.WARN&&console.warn?i=console.warn:n.level===t.ERROR&&console.error?i=console.error:n.level===t.INFO&&console.info&&(i=console.info),Function.prototype.apply.call(i,console,e)}))},"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&module.exports?module.exports=t:(t._prevLogger=e.Logger,t.noConflict=function(){return e.Logger=t._prevLogger,t},e.Logger=t)}(this),Logger.setLevel(Logger.INFO),Logger.storagePrefix="hawtio",Logger.oldGet=Logger.get,Logger.loggers={},Logger.get=function(e){var t=Logger.oldGet(e);return Logger.loggers[e]=t,t},window.LogBuffer=100,"localStorage"in window){"logLevel"in window.localStorage||(window.localStorage.logLevel=JSON.stringify(Logger.INFO));var logLevel=Logger.DEBUG;try{logLevel=JSON.parse(window.localStorage.logLevel)}catch(e){console.error("Failed to parse log level setting: ",e)}if(Logger.setLevel(logLevel),"showLog"in window.localStorage){var showLog=window.localStorage.showLog;if("true"===showLog){var container=document.getElementById("log-panel");container&&container.setAttribute("style","bottom: 50%;")}}if("logBuffer"in window.localStorage){var logBuffer=window.localStorage.logBuffer;window.LogBuffer=parseInt(logBuffer,10)}else window.localStorage.logBuffer=window.LogBuffer;if("childLoggers"in window.localStorage){var childLoggers=[];try{childLoggers=JSON.parse(localStorage.childLoggers)}catch(e){}childLoggers.forEach(function(e){Logger.get(e.logger).setLevel(Logger[e.level])})}}var consoleLogger=null;"console"in window&&(window.JSConsole=window.console,consoleLogger=function(e,t){var n=window.JSConsole,i=n.log;if(t.name&&(e[0]="["+t.name+"] "+e[0]),t.level===Logger.WARN&&"warn"in n?i=n.warn:t.level===Logger.ERROR&&"error"in n?i=n.error:t.level===Logger.INFO&&"info"in n&&(i=n.info),i&&i.apply)try{i.apply(n,e)}catch(r){n.log(e)}}),Logger.getType=function(e){return Object.prototype.toString.call(e).slice(8,-1)},Logger.isError=function(e){return e&&"Error"===Logger.getType(e)},Logger.isArray=function(e){return e&&"Array"===Logger.getType(e)},Logger.isObject=function(e){return e&&"Object"===Logger.getType(e)},Logger.isString=function(e){return e&&"String"===Logger.getType(e)},window.logInterceptors=[],Logger.formatStackTraceString=function(e){var t=e.split("\n");if(t.length>100){var n=20,i=t.length-2*n;t.splice(n,i,">>> snipped "+i+" frames <<<")}for(var r='<div class="log-stack-trace">\n',a=0;a<t.length;a++){var o=t[a];0!==o.trim().length&&(r=r+"<p>"+o+"</p>\n")}return r+="</div>\n"},Logger.setHandler(function(e,t){function n(){r&&i&&(r.appendChild(i),r.childNodes.length>parseInt(window.LogBuffer)&&r.removeChild(r.firstChild),g&&(r.scrollTop=r.scrollHeight)),consoleLogger&&consoleLogger(e,t);for(var n=window.logInterceptors,a=0;a<n.length;a++)n[a](t.level.name,o)}var i=void 0,r=void 0,a=document.getElementById("hawtio-log-panel");a&&(r=document.getElementById("hawtio-log-panel-statements"),i=document.createElement("li"));var o="",s=[];if("ERROR"===t.level.name&&1===e.length&&Logger.isString(e[0])){var l=e[0],c=l.split(/\n/);if(c.length>1){var u="Error: Jolokia-Error: ";if(0===c[0].search(u)){var d=c[0].slice(u.length);window.JSConsole.info("msg: ",d);try{var p=JSON.parse(d),h=new Error;h.message=p.error,h.stack=p.stacktrace.replace("\\t","&nbsp;&nbsp").replace("\\n","\n"),e=[h]}catch(f){}}else{var h=new Error;h.message=c[0],h.stack=l,e=[h]}}}var g=!1;if(i){for(var m=0;m<e.length;m++){var l=e[m];if(Logger.isArray(l)||Logger.isObject(l)){var v="";try{v='<pre data-language="javascript">'+JSON.stringify(l,null,2)+"</pre>"}catch(h){v=l+" (failed to convert) "}o+=v}else Logger.isError(l)?("message"in l&&(o+=l.message),"stack"in l&&s.push(function(){var e=Logger.formatStackTraceString(l.stack),n=Logger;t.name&&(n=Logger.get(t.name)),n.info("Stack trace: ",e)})):o+=l}t.name&&(o='[<span class="green">'+t.name+"</span>] "+o),i.innerHTML=o,i.className=t.level.name,a&&(0===a.scrollHeight&&(g=!0),r.scrollTop>r.scrollHeight-a.scrollHeight-200&&(g=!0))}n(),s.forEach(function(e){e()})});var hawtioPluginLoader=function(e){function t(e,t){angular.isArray(t)||(t=[t]);var n=[];return t.forEach(function(t){e.forEach(function(e){t===e&&n.push(e)})}),n}var n=Logger.get("hawtio-loader");return e.log=n,e.urls=[],e.modules=[],e.tasks=[],e.registerPreBootstrapTask=function(t,i){var r=t,a="unnamed-task-"+(e.tasks.length+1);angular.isFunction(t)&&(n.debug("Adding legacy task"),r={name:a,task:t}),t.name||(t.name=a),t.depends&&!angular.isArray(t.depends)&&"*"!==t.depends&&(t.depends=[t.depends]),i?e.tasks.unshift(r):e.tasks.push(r)},e.addModule=function(t){n.debug("Adding module: "+t),e.modules.push(t)},e.addUrl=function(t){n.debug("Adding URL: "+t),e.urls.push(t)},e.getModules=function(){return e.modules},e.loaderCallback=null,e.setLoaderCallback=function(t){e.loaderCallback=t},e.loadPlugins=function(i){var r=e.loaderCallback,a={},o=e.urls.length,s=o,l=function(){var n=[],r=[];e.registerPreBootstrapTask({name:"Hawtio Bootstrap",depends:"*",task:function(){r.length>0&&(e.log.debug("Orphaned tasks: "),r.forEach(function(t){e.log.debug("  name: "+t.name+" depends: ",t.depends)})),e.log.debug("Executed tasks: ",n),i()}});var a=function(){var i=null,o=[];for(0===e.tasks.length&&(i=r.shift());!i&&r.length>0;){var s=r.shift();if("*"===s.depends)e.tasks.length>0?o.push(s):i=s;else{var l=t(n,s.depends);l.length===s.depends.length?i=s:o.push(s)}}if(o.length>0&&o.forEach(function(e){r.push(e)}),i||(i=e.tasks.shift()),i&&i.depends&&e.tasks.length>0)if(e.log.debug("Task '"+i.name+"' has dependencies: ",i.depends),"*"===i.depends){if(e.tasks.length>0)return e.log.debug("Task '"+i.name+"' wants to run after all other tasks, deferring"),r.push(i),void a()}else{var l=t(n,i.depends);if(l.length!=i.depends.length)return e.log.debug("Deferring task: '"+i.name+"'"),r.push(i),void a()}i?(e.log.debug("Executing task: '"+i.name+"'"),n.push(i.name),i.task(a)):e.log.debug("All tasks executed")};a()},c=function(){var e=0;$.each(a,function(t,n){e+=n.Scripts.length});var t=e,i=function(){$.ajaxSetup({async:!0}),e-=1,r&&r.scriptLoaderCallback(r,t,e+1),0===e&&l()};e>0?$.each(a,function(e,t){t.Scripts.forEach(function(e){var r=t.Context+"/"+e;n.debug("Fetching script: ",r),$.ajaxSetup({async:!1}),$.getScript(r).done(function(e){n.debug("Loaded script: ",r)}).fail(function(e,t,i){n.info('Failed loading script: "',i.message,'" (<a href="',r,":",i.lineNumber,'">',r,":",i.lineNumber,"</a>)")}).always(i)})}):($.ajaxSetup({async:!0}),l())};if(0===o)c();else{var u=function(){o-=1,r&&r.urlLoaderCallback(r,s,o+1),0===o&&c()},d=new RegExp(/^jolokia:/);$.each(e.urls,function(e,t){if(d.test(t)){var i=t.split(":");i=i.reverse(),i.pop(),t=i.pop();var r=i.reverse().join(":"),o=new Jolokia(t);try{var s=o.getAttribute(r,null);$.extend(a,s)}catch(l){}u()}else n.debug("Trying url: ",t),$.get(t,function(e){if(angular.isString(e))try{e=angular.fromJson(e)}catch(t){return}$.extend(a,e)}).always(function(){u()})})}},e.debug=function(){n.debug("urls and modules"),n.debug(e.urls),n.debug(e.modules)},e.setLoaderCallback({scriptLoaderCallback:function(e,t,i){n.debug("Total scripts: ",t," Remaining: ",i)},urlLoaderCallback:function(e,t,i){n.debug("Total URLs: ",t," Remaining: ",i)}}),e}(hawtioPluginLoader||{},window,void 0),HawtioCore;!function(e){e.injector=null,e.pluginName="hawtio-core";var t=Logger.get(e.pluginName),n=angular.module(e.pluginName,[]);n.config(["$locationProvider",function(e){e.html5Mode(!0)}]),n.run(["documentBase",function(e){t.debug("loaded")}]);var i={length:0,key:function(e){return void 0},getItem:function(e){return i[e]},setItem:function(e,t){i[e]=t},removeItem:function(e){var t=i[e];return delete i[e],t},clear:function(){}};e.dummyLocalStorage=i,n.factory("localStorage",function(){return window.localStorage||i}),n.factory("documentBase",["$document",function(e){var n=e.find("base"),i="/";

return n&&n.length>0?i=n.attr("href"):t.warn("Document is missing a 'base' tag, defaulting to '/'"),t.debug("Document base: ",i),i}]),n.factory("viewRegistry",function(){return{}}),n.factory("helpRegistry",function(){return{addUserDoc:function(){},addDevDoc:function(){},addSubTopic:function(){},getOrCreateTopic:function(){return void 0},mapTopicName:function(){return void 0},mapSubTopicName:function(){return void 0},getTopics:function(){return void 0},disableAutodiscover:function(){},discoverHelpFiles:function(){}}}),n.factory("preferencesRegistry",function(){return{addTab:function(){},getTab:function(){return void 0},getTabs:function(){return void 0}}}),n.factory("pageTitle",function(){return{addTitleElement:function(){},getTitle:function(){return void 0},getTitleWithSeparator:function(){return void 0},getTitleExcluding:function(){return void 0},getTitleArrayExcluding:function(){return void 0}}}),n.factory("toastr",["$window",function(e){var t=e.toastr;return t||(t={},e.toastr=t),t}]),n.factory("HawtioDashboard",function(){return{hasDashboard:!1,inDashboard:!1,getAddLink:function(){return""}}}),n.factory("branding",function(){return{}}),n.factory("userDetails",function(){return{logout:function(){t.debug("Dummy userDetails.logout()")}}}),hawtioPluginLoader.addModule("ng"),hawtioPluginLoader.addModule("ngSanitize"),hawtioPluginLoader.addModule(e.pluginName),$(function(){if(jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},!jQuery.browser){var n=jQuery.uaMatch(navigator.userAgent),i={};n.browser&&(i[n.browser]=!0,i.version=n.version),i.chrome?i.webkit=!0:i.webkit&&(i.safari=!0),jQuery.browser=i}hawtioPluginLoader.loadPlugins(function(){e.injector?t.debug("Application already bootstrapped"):(e.injector=angular.bootstrap(document,hawtioPluginLoader.getModules()),t.debug("Bootstrapped application"))})})}(HawtioCore||(HawtioCore={})),function(){function e(e,t){if(e!==t){var n=e===e,i=t===t;if(e>t||!n||"undefined"==typeof e&&i)return 1;if(t>e||!i||"undefined"==typeof t&&n)return-1}return 0}function t(e,t,n){if(t!==t)return p(e,n);for(var i=(n||0)-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function i(e){return"string"==typeof e?e:null==e?"":e+""}function r(e){return e.charCodeAt(0)}function a(e,t){for(var n=-1,i=e.length;++n<i&&t.indexOf(e.charAt(n))>-1;);return n}function o(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function s(t,n){return e(t.criteria,n.criteria)||t.index-n.index}function l(t,n){for(var i=-1,r=t.criteria,a=n.criteria,o=r.length;++i<o;){var s=e(r[i],a[i]);if(s)return s}return t.index-n.index}function c(e){return Re[e]}function u(e){return Fe[e]}function d(e){return"\\"+qe[e]}function p(e,t,n){for(var i=e.length,r=n?t||i:(t||0)-1;n?r--:++r<i;){var a=e[r];if(a!==a)return r}return-1}function h(e){return e&&"object"==typeof e||!1}function f(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function g(e,t){for(var n=-1,i=e.length,r=-1,a=[];++n<i;)e[n]===t&&(e[n]=U,a[++r]=n);return a}function m(e,t){for(var n,i=-1,r=e.length,a=-1,o=[];++i<r;){var s=e[i],l=t?t(s,i,e):s;i&&n===l||(n=l,o[++a]=s)}return o}function v(e){for(var t=-1,n=e.length;++t<n&&f(e.charCodeAt(t)););return t}function y(e){for(var t=e.length;t--&&f(e.charCodeAt(t)););return t}function b(e){return Ue[e]}function w(f){function G(e){if(h(e)&&!Yo(e)&&!(e instanceof Z)){if(e instanceof J)return e;if(Za.call(e,"__chain__")&&Za.call(e,"__wrapped__"))return jn(e)}return new J(e)}function J(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function Z(e){this.__wrapped__=e,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Po,this.__views__=null}function Re(){var e=this.__actions__,t=this.__iteratees__,n=this.__views__,i=new Z(this.__wrapped__);return i.__actions__=e?Je(e):null,i.__dir__=this.__dir__,i.__dropCount__=this.__dropCount__,i.__filtered__=this.__filtered__,i.__iteratees__=t?Je(t):null,i.__takeCount__=this.__takeCount__,i.__views__=n?Je(n):null,i}function Fe(){if(this.__filtered__){var e=new Z(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Ue(){var e=this.__wrapped__.value();if(!Yo(e))return Kt(e,this.__actions__);var t=this.__dir__,n=0>t,i=yn(0,e.length,this.__views__),r=i.start,a=i.end,o=a-r,s=this.__dropCount__,l=So(o,this.__takeCount__),c=n?a:r-1,u=this.__iteratees__,d=u?u.length:0,p=0,h=[];e:for(;o--&&l>p;){c+=t;for(var f=-1,g=e[c];++f<d;){var m=u[f],v=m.iteratee,y=v(g,c,e),b=m.type;if(b==L)g=y;else if(!y){if(b==O)continue e;break e}}s?s--:h[p++]=g}return h}function ze(){this.__data__={}}function qe(e){return this.has(e)&&delete this.__data__[e]}function He(e){return"__proto__"==e?x:this.__data__[e]}function Ve(e){return"__proto__"!=e&&Za.call(this.__data__,e)}function We(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Ge(e){var t=e?e.length:0;for(this.data={hash:wo(null),set:new ho};t--;)this.push(e[t])}function Xe(e,t){var n=e.data,i="string"==typeof t||$r(t)?n.set.has(t):n.hash[t];return i?0:-1}function Ye(e){var t=this.data;"string"==typeof e||$r(e)?t.set.add(e):t.hash[e]=!0}function Je(e,t){var n=-1,i=e.length;for(t||(t=Ra(i));++n<i;)t[n]=e[n];return t}function Qe(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e}function Ze(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function et(e,t){for(var n=-1,i=e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function tt(e,t){for(var n=-1,i=e.length,r=-1,a=[];++n<i;){var o=e[n];t(o,n,e)&&(a[++r]=o)}return a}function nt(e,t){for(var n=-1,i=e.length,r=Ra(i);++n<i;)r[n]=t(e[n],n,e);return r}function it(e){for(var t=-1,n=e.length,i=Eo;++t<n;){var r=e[t];r>i&&(i=r)}return i}function rt(e){for(var t=-1,n=e.length,i=Po;++t<n;){var r=e[t];i>r&&(i=r)}return i}function at(e,t,n,i){var r=-1,a=e.length;for(i&&a&&(n=e[++r]);++r<a;)n=t(n,e[r],r,e);return n}function ot(e,t,n,i){var r=e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function st(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function lt(e,t){return"undefined"==typeof e?t:e}function ct(e,t,n,i){return"undefined"!=typeof e&&Za.call(i,n)?e:t}function ut(e,t,n){var i=es(t);if(!n)return pt(t,e,i);for(var r=-1,a=i.length;++r<a;){var o=i[r],s=e[o],l=n(s,t[o],o,e,t);(l===l?l===s:s!==s)&&("undefined"!=typeof s||o in e)||(e[o]=l)}return e}function dt(e,t){for(var n=-1,i=e.length,r=_n(i),a=t.length,o=Ra(a);++n<a;){var s=t[n];r?(s=parseFloat(s),o[n]=Cn(s,i)?e[s]:x):o[n]=e[s]}return o}function pt(e,t,n){n||(n=t,t={});for(var i=-1,r=n.length;++i<r;){var a=n[i];t[a]=e[a]}return t}function ht(e,t){for(var n=-1,i=t.length;++n<i;){var r=t[n];e[r]=dn(e[r],C,e)}return e}function ft(e,t,n){var i=typeof e;return"function"==i?"undefined"!=typeof t&&kn(e)?Jt(e,t,n):e:null==e?$a:"object"==i?Ot(e):"undefined"==typeof t?Ut(e+""):Lt(e+"",t)}function gt(e,t,n,i,r,a,o){var s;if(n&&(s=r?n(e,i,r):n(e)),"undefined"!=typeof s)return s;if(!$r(e))return e;var l=Yo(e);if(l){if(s=bn(e),!t)return Je(e,s)}else{var c=to.call(e),u=c==W;if(c!=X&&c!=z&&(!u||r))return Oe[c]?xn(e,c,t):r?e:{};if(s=wn(u?{}:e),!t)return pt(e,s,es(e))}a||(a=[]),o||(o=[]);for(var d=a.length;d--;)if(a[d]==e)return o[d];return a.push(e),o.push(s),(l?Qe:At)(e,function(i,r){s[r]=gt(i,t,n,r,e,a,o)}),s}function mt(e,t,n,i){if("function"!=typeof e)throw new Ga(F);return fo(function(){e.apply(x,Ht(n,i))},t)}function vt(e,n){var i=e?e.length:0,r=[];if(!i)return r;var a=-1,o=vn(),s=o==t,l=s&&n.length>=200&&Uo(n),c=n.length;l&&(o=Xe,s=!1,n=l);e:for(;++a<i;){var u=e[a];if(s&&u===u){for(var d=c;d--;)if(n[d]===u)continue e;r.push(u)}else o(n,u)<0&&r.push(u)}return r}function yt(e,t){var n=e?e.length:0;if(!_n(n))return At(e,t);for(var i=-1,r=Nn(e);++i<n&&t(r[i],i,r)!==!1;);return e}function bt(e,t){var n=e?e.length:0;if(!_n(n))return Et(e,t);for(var i=Nn(e);n--&&t(i[n],n,i)!==!1;);return e}function wt(e,t){var n=!0;return yt(e,function(e,i,r){return n=!!t(e,i,r)}),n}function xt(e,t,n,i){var r=e.length;for(n=null==n?0:+n||0,0>n&&(n=-n>r?0:r+n),i="undefined"==typeof i||i>r?r:+i||0,0>i&&(i+=r),r=n>i?0:i>>>0,n>>>=0;r>n;)e[n++]=t;return e}function kt(e,t){var n=[];return yt(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function Ct(e,t,n,i){var r;return n(e,function(e,n,a){return t(e,n,a)?(r=i?n:e,!1):void 0}),r}function St(e,t,n,i){for(var r=(i||0)-1,a=e.length,o=-1,s=[];++r<a;){var l=e[r];if(h(l)&&_n(l.length)&&(Yo(l)||br(l))){t&&(l=St(l,t,n));var c=-1,u=l.length;for(s.length+=u;++c<u;)s[++o]=l[c]}else n||(s[++o]=l)}return s}function _t(e,t,n){for(var i=-1,r=Nn(e),a=n(e),o=a.length;++i<o;){var s=a[i];if(t(r[s],s,r)===!1)break}return e}function Tt(e,t,n){for(var i=Nn(e),r=n(e),a=r.length;a--;){var o=r[a];if(t(i[o],o,i)===!1)break}return e}function $t(e,t){return _t(e,t,Yr)}function At(e,t){return _t(e,t,es)}function Et(e,t){return Tt(e,t,es)}function Pt(e,t){for(var n=-1,i=t.length,r=-1,a=[];++n<i;){var o=t[n];Tr(e[o])&&(a[++r]=o)}return a}function It(e,t,n){var i=-1,r="function"==typeof t,a=e?e.length:0,o=_n(a)?Ra(a):[];return yt(e,function(e){var a=r?t:null!=e&&e[t];o[++i]=a?a.apply(e,n):x}),o}function Dt(e,t,n,i,r,a){if(e===t)return 0!==e||1/e==1/t;var o=typeof e,s=typeof t;return"function"!=o&&"object"!=o&&"function"!=s&&"object"!=s||null==e||null==t?e!==e&&t!==t:Mt(e,t,Dt,n,i,r,a)}function Mt(e,t,n,i,r,a,o){var s=Yo(e),l=Yo(t),c=q,u=q;s||(c=to.call(e),c==z?c=X:c!=X&&(s=jr(e))),l||(u=to.call(t),u==z?u=X:u!=X&&(l=jr(t)));var d=c==X,p=u==X,h=c==u;if(h&&!s&&!d)return hn(e,t,c);var f=d&&Za.call(e,"__wrapped__"),g=p&&Za.call(t,"__wrapped__");if(f||g)return n(f?e.value():e,g?t.value():t,i,r,a,o);if(!h)return!1;a||(a=[]),o||(o=[]);for(var m=a.length;m--;)if(a[m]==e)return o[m]==t;a.push(e),o.push(t);var v=(s?pn:fn)(e,t,n,i,r,a,o);return a.pop(),o.pop(),v}function Nt(e,t,n,i,r){var a=t.length;if(null==e)return!a;for(var o=-1,s=!r;++o<a;)if(s&&i[o]?n[o]!==e[t[o]]:!Za.call(e,t[o]))return!1;for(o=-1;++o<a;){var l=t[o];if(s&&i[o])var c=Za.call(e,l);else{var u=e[l],d=n[o];c=r?r(u,d,l):x,"undefined"==typeof c&&(c=Dt(d,u,r,!0))}if(!c)return!1}return!0}function jt(e,t){var n=[];return yt(e,function(e,i,r){n.push(t(e,i,r))}),n}function Ot(e){var t=es(e),n=t.length;if(1==n){var i=t[0],r=e[i];if(Tn(r))return function(e){return null!=e&&e[i]===r&&Za.call(e,i)}}for(var a=Ra(n),o=Ra(n);n--;)r=e[t[n]],a[n]=r,o[n]=Tn(r);return function(e){return Nt(e,t,a,o)}}function Lt(e,t){return Tn(t)?function(n){return null!=n&&n[e]===t}:function(n){return null!=n&&Dt(t,n[e],null,!0)}}function Rt(e,t,n,i,r){var a=_n(t.length)&&(Yo(t)||jr(t));return(a?Qe:At)(t,function(t,o,s){if(h(t))return i||(i=[]),r||(r=[]),Ft(e,s,o,Rt,n,i,r);var l=e[o],c=n?n(l,t,o,e,s):x,u="undefined"==typeof c;u&&(c=t),!a&&"undefined"==typeof c||!u&&(c===c?c===l:l!==l)||(e[o]=c)}),e}function Ft(e,t,n,i,r,a,o){for(var s=a.length,l=t[n];s--;)if(a[s]==l)return void(e[n]=o[s]);var c=e[n],u=r?r(c,l,n,e,t):x,d="undefined"==typeof u;d&&(u=l,_n(l.length)&&(Yo(l)||jr(l))?u=Yo(c)?c:c?Je(c):[]:Qo(l)||br(l)?u=br(c)?Rr(c):Qo(c)?c:{}:d=!1),a.push(l),o.push(u),d?e[n]=i(u,l,r,a,o):(u===u?u!==c:c===c)&&(e[n]=u)}function Ut(e){return function(t){return null==t?x:t[e]}}function zt(t,n){var i=n.length,r=dt(t,n);for(n.sort(e);i--;){var a=parseFloat(n[i]);if(a!=o&&Cn(a)){var o=a;go.call(t,a,1)}}return r}function qt(e,t){return e+lo(Ao()*(t-e+1))}function Bt(e,t,n,i,r){return r(e,function(e,r,a){n=i?(i=!1,e):t(n,e,r,a)}),n}function Ht(e,t,n){var i=-1,r=e.length;t=null==t?0:+t||0,0>t&&(t=-t>r?0:r+t),n="undefined"==typeof n||n>r?r:+n||0,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var a=Ra(r);++i<r;)a[i]=e[i+t];return a}function Vt(e,t){var n;return yt(e,function(e,i,r){return n=t(e,i,r),!n}),!!n}function Wt(e,n){var i=-1,r=vn(),a=e.length,o=r==t,s=o&&a>=200,l=s&&Uo(),c=[];l?(r=Xe,o=!1):(s=!1,l=n?[]:c);e:for(;++i<a;){var u=e[i],d=n?n(u,i,e):u;if(o&&u===u){for(var p=l.length;p--;)if(l[p]===d)continue e;n&&l.push(d),c.push(u)}else r(l,d)<0&&((n||s)&&l.push(d),c.push(u))}return c}function Gt(e,t){for(var n=-1,i=t.length,r=Ra(i);++n<i;)r[n]=e[t[n]];return r}function Kt(e,t){var n=e;n instanceof Z&&(n=n.value());for(var i=-1,r=t.length;++i<r;){var a=[n],o=t[i];uo.apply(a,o.args),n=o.func.apply(o.thisArg,a)}return n}function Xt(e,t,n){var i=0,r=e?e.length:i;if("number"==typeof t&&t===t&&Mo>=r){for(;r>i;){var a=i+r>>>1,o=e[a];(n?t>=o:t>o)?i=a+1:r=a}return r}return Yt(e,t,$a,n)}function Yt(e,t,n,i){t=n(t);for(var r=0,a=e?e.length:0,o=t!==t,s="undefined"==typeof t;a>r;){var l=lo((r+a)/2),c=n(e[l]),u=c===c;if(o)var d=u||i;else d=s?u&&(i||"undefined"!=typeof c):i?t>=c:t>c;d?r=l+1:a=l}return So(a,Do)}function Jt(e,t,n){if("function"!=typeof e)return $a;if("undefined"==typeof t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,a){return e.call(t,n,i,r,a)};case 5:return function(n,i,r,a,o){return e.call(t,n,i,r,a,o)}}return function(){return e.apply(t,arguments)}}function Qt(e){return ao.call(e,0)}function Zt(e,t,n){for(var i=n.length,r=-1,a=Co(e.length-i,0),o=-1,s=t.length,l=Ra(a+s);++o<s;)l[o]=t[o];for(;++r<i;)l[n[r]]=e[r];for(;a--;)l[o++]=e[r++];return l}function en(e,t,n){for(var i=-1,r=n.length,a=-1,o=Co(e.length-r,0),s=-1,l=t.length,c=Ra(o+l);++a<o;)c[a]=e[a];for(var u=a;++s<l;)c[u+s]=t[s];for(;++i<r;)c[u+n[i]]=e[a++];return c}function tn(e,t){return function(n,i,r){var a=t?t():{};if(i=mn(i,r,3),Yo(n))for(var o=-1,s=n.length;++o<s;){var l=n[o];e(a,l,i(l,o,n),n)}else yt(n,function(t,n,r){e(a,t,i(t,n,r),r)});return a}}function nn(e){return function(){var t=arguments.length,n=arguments[0];if(2>t||null==n)return n;if(t>3&&Sn(arguments[1],arguments[2],arguments[3])&&(t=2),t>3&&"function"==typeof arguments[t-2])var i=Jt(arguments[--t-1],arguments[t--],5);else t>2&&"function"==typeof arguments[t-1]&&(i=arguments[--t]);for(var r=0;++r<t;){var a=arguments[r];a&&e(n,a,i)}return n}}function rn(e,t){function n(){return(this instanceof n?i:e).apply(t,arguments)}var i=on(e);return n}function an(e){return function(t){for(var n=-1,i=Ca(sa(t)),r=i.length,a="";++n<r;)a=e(a,i[n],n);return a}}function on(e){return function(){var t=Ro(e.prototype),n=e.apply(t,arguments);return $r(n)?n:t}}function sn(e,t){return function(n,i,a){a&&Sn(n,i,a)&&(i=null);var o=mn(),s=null==i;if(o===ft&&s||(s=!1,i=o(i,a,3)),s){var l=Yo(n);if(l||!Nr(n))return e(l?n:Mn(n));i=r}return gn(n,i,t)}}function ln(e,t,n,i,r,a,o,s,l,c){function u(){for(var w=arguments.length,x=w,k=Ra(w);x--;)k[x]=arguments[x];if(i&&(k=Zt(k,i,r)),a&&(k=en(k,a,o)),f||v){var _=u.placeholder,T=g(k,_);if(w-=T.length,c>w){var $=s?Je(s):null,P=Co(c-w,0),I=f?T:null,D=f?null:T,M=f?k:null,N=f?null:k;t|=f?A:E,t&=~(f?E:A),m||(t&=~(C|S));var j=ln(e,t,n,M,I,N,D,$,l,P);return j.placeholder=_,j}}var O=p?n:this;return h&&(e=O[b]),s&&(k=Pn(k,s)),d&&l<k.length&&(k.length=l),(this instanceof u?y||on(e):e).apply(O,k)}var d=t&I,p=t&C,h=t&S,f=t&T,m=t&_,v=t&$,y=!h&&on(e),b=e;return u}function cn(e,t,n){var i=e.length;if(t=+t,i>=t||!xo(t))return"";var r=t-i;return n=null==n?" ":n+"",ga(n,oo(r/n.length)).slice(0,r)}function un(e,t,n,i){function r(){for(var t=-1,s=arguments.length,l=-1,c=i.length,u=Ra(s+c);++l<c;)u[l]=i[l];for(;s--;)u[l++]=arguments[++t];return(this instanceof r?o:e).apply(a?n:this,u)}var a=t&C,o=on(e);return r}function dn(e,t,n,i,r,a,o,s){var l=t&S;if(!l&&"function"!=typeof e)throw new Ga(F);var c=i?i.length:0;if(c||(t&=~(A|E),i=r=null),c-=r?r.length:0,t&E){var u=i,d=r;i=r=null}var p=!l&&zo(e),h=[e,t,n,i,r,u,d,a,o,s];if(p&&p!==!0&&($n(h,p),t=h[1],s=h[9]),h[9]=null==s?l?0:e.length:Co(s-c,0)||0,t==C)var f=rn(h[0],h[2]);else f=t!=A&&t!=(C|A)||h[4].length?ln.apply(x,h):un.apply(x,h);var g=p?Fo:qo;return g(f,h)}function pn(e,t,n,i,r,a,o){var s=-1,l=e.length,c=t.length,u=!0;if(l!=c&&!(r&&c>l))return!1;for(;u&&++s<l;){var d=e[s],p=t[s];if(u=x,i&&(u=r?i(p,d,s):i(d,p,s)),"undefined"==typeof u)if(r)for(var h=c;h--&&(p=t[h],!(u=d&&d===p||n(d,p,i,r,a,o))););else u=d&&d===p||n(d,p,i,r,a,o)}return!!u}function hn(e,t,n){switch(n){case B:case H:return+e==+t;case V:return e.name==t.name&&e.message==t.message;case K:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case Y:case Q:return e==t+""}return!1}function fn(e,t,n,i,r,a,o){var s=es(e),l=s.length,c=es(t),u=c.length;if(l!=u&&!r)return!1;for(var d,p=-1;++p<l;){var h=s[p],f=Za.call(t,h);if(f){var g=e[h],m=t[h];f=x,i&&(f=r?i(m,g,h):i(g,m,h)),"undefined"==typeof f&&(f=g&&g===m||n(g,m,i,r,a,o))}if(!f)return!1;d||(d="constructor"==h)}if(!d){var v=e.constructor,y=t.constructor;if(v!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y))return!1}return!0}function gn(e,t,n){var i=n?Po:Eo,r=i,a=r;return yt(e,function(e,o,s){var l=t(e,o,s);((n?r>l:l>r)||l===i&&l===a)&&(r=l,a=e)}),a}function mn(e,t,n){var i=G.callback||_a;return i=i===_a?ft:i,n?i(e,t,n):i}function vn(e,n,i){var r=G.indexOf||Xn;return r=r===Xn?t:r,e?r(e,n,i):r}function yn(e,t,n){for(var i=-1,r=n?n.length:0;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=So(t,e+o);break;case"takeRight":e=Co(e,t-o)}}return{start:e,end:t}}function bn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Za.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function wn(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Ha),new t}function xn(e,t,n){var i=e.constructor;switch(t){case ee:return Qt(e);case B:case H:return new i(+e);case te:case ne:case ie:case re:case ae:case oe:case se:case le:case ce:var r=e.buffer;return new i(n?Qt(r):r,e.byteOffset,e.length);case K:case Q:return new i(e);case Y:var a=new i(e.source,xe.exec(e));a.lastIndex=e.lastIndex}return a}function kn(e){var t=G.support,n=!(t.funcNames?e.name:t.funcDecomp);if(!n){var i=Ja.call(e);t.funcNames||(n=!ke.test(i)),n||(n=Ee.test(i)||Pr(e),Fo(e,n))}return n}function Cn(e,t){return e=+e,t=null==t?jo:t,e>-1&&e%1==0&&t>e}function Sn(e,t,n){if(!$r(n))return!1;var i=typeof t;if("number"==i)var r=n.length,a=_n(r)&&Cn(t,r);else a="string"==i&&t in n;return a&&n[t]===e}function _n(e){return"number"==typeof e&&e>-1&&e%1==0&&jo>=e}function Tn(e){return e===e&&(0===e?1/e>0:!$r(e))}function $n(e,t){var n=e[1],i=t[1],r=n|i,a=I|P,o=C|S,s=a|o|_|$,l=n&I&&!(i&I),c=n&P&&!(i&P),u=(c?e:t)[7],d=(l?e:t)[8],p=!(n>=P&&i>o||n>o&&i>=P),h=r>=a&&s>=r&&(P>n||(c||l)&&u.length<=d);if(!p&&!h)return e;i&C&&(e[2]=t[2],r|=n&C?0:_);var f=t[3];if(f){var m=e[3];e[3]=m?Zt(m,f,t[4]):Je(f),e[4]=m?g(e[3],U):Je(t[4])}return f=t[5],f&&(m=e[5],e[5]=m?en(m,f,t[6]):Je(f),e[6]=m?g(e[5],U):Je(t[6])),f=t[7],f&&(e[7]=Je(f)),i&I&&(e[8]=null==e[8]?t[8]:So(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}function An(e,t){e=Nn(e);for(var n=-1,i=t.length,r={};++n<i;){var a=t[n];a in e&&(r[a]=e[a])}return r}function En(e,t){var n={};return $t(e,function(e,i,r){t(e,i,r)&&(n[i]=e)}),n}function Pn(e,t){for(var n=e.length,i=So(t.length,n),r=Je(e);i--;){var a=t[i];e[i]=Cn(a,n)?r[a]:x}return e}function In(e){{var t;G.support}if(!h(e)||to.call(e)!=X||!Za.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return $t(e,function(e,t){n=t}),"undefined"==typeof n||Za.call(e,n)}function Dn(e){for(var t=Yr(e),n=t.length,i=n&&e.length,r=G.support,a=i&&_n(i)&&(Yo(e)||r.nonEnumArgs&&br(e)),o=-1,s=[];++o<n;){var l=t[o];(a&&Cn(l,i)||Za.call(e,l))&&s.push(l)}return s}function Mn(e){return null==e?[]:_n(e.length)?$r(e)?e:Ha(e):ia(e)}function Nn(e){return $r(e)?e:Ha(e)}function jn(e){return e instanceof Z?e.clone():new J(e.__wrapped__,e.__chain__,Je(e.__actions__))}function On(e,t,n){t=(n?Sn(e,t,n):null==t)?1:Co(+t||1,1);for(var i=0,r=e?e.length:0,a=-1,o=Ra(oo(r/t));r>i;)o[++a]=Ht(e,i,i+=t);return o}function Ln(e){for(var t=-1,n=e?e.length:0,i=-1,r=[];++t<n;){var a=e[t];a&&(r[++i]=a)}return r}function Rn(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Yo(n)||br(n))break}return vt(n,St(arguments,!1,!0,++e))}function Fn(e,t,n){var i=e?e.length:0;return i?((n?Sn(e,t,n):null==t)&&(t=1),Ht(e,0>t?0:t)):[]}function Un(e,t,n){var i=e?e.length:0;return i?((n?Sn(e,t,n):null==t)&&(t=1),t=i-(+t||0),Ht(e,0,0>t?0:t)):[]}function zn(e,t,n){var i=e?e.length:0;if(!i)return[];for(t=mn(t,n,3);i--&&t(e[i],i,e););return Ht(e,0,i+1)}function qn(e,t,n){var i=e?e.length:0;if(!i)return[];var r=-1;for(t=mn(t,n,3);++r<i&&t(e[r],r,e););return Ht(e,r)}function Bn(e,t,n,i){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Sn(e,t,n)&&(n=0,i=r),xt(e,t,n,i)):[]}function Hn(e,t,n){var i=-1,r=e?e.length:0;for(t=mn(t,n,3);++i<r;)if(t(e[i],i,e))return i;return-1}function Vn(e,t,n){var i=e?e.length:0;for(t=mn(t,n,3);i--;)if(t(e[i],i,e))return i;return-1}function Wn(e){return e?e[0]:x}function Gn(e,t,n){var i=e?e.length:0;return n&&Sn(e,t,n)&&(t=!1),i?St(e,t):[]}function Kn(e){var t=e?e.length:0;return t?St(e,!0):[]}function Xn(e,n,i){var r=e?e.length:0;if(!r)return-1;if("number"==typeof i)i=0>i?Co(r+i,0):i||0;else if(i){var a=Xt(e,n),o=e[a];return(n===n?n===o:o!==o)?a:-1}return t(e,n,i)}function Yn(e){return Un(e,1)}function Jn(){for(var e=[],n=-1,i=arguments.length,r=[],a=vn(),o=a==t;++n<i;){var s=arguments[n];(Yo(s)||br(s))&&(e.push(s),r.push(o&&s.length>=120&&Uo(n&&s)))}i=e.length;var l=e[0],c=-1,u=l?l.length:0,d=[],p=r[0];e:for(;++c<u;)if(s=l[c],(p?Xe(p,s):a(d,s))<0){for(n=i;--n;){var h=r[n];if((h?Xe(h,s):a(e[n],s))<0)continue e}p&&p.push(s),d.push(s)}return d}function Qn(e){var t=e?e.length:0;return t?e[t-1]:x}function Zn(e,t,n){var i=e?e.length:0;if(!i)return-1;var r=i;if("number"==typeof n)r=(0>n?Co(i+n,0):So(n||0,i-1))+1;else if(n){r=Xt(e,t,!0)-1;var a=e[r];return(t===t?t===a:a!==a)?r:-1}if(t!==t)return p(e,r,!0);for(;r--;)if(e[r]===t)return r;return-1}function ei(){var e=arguments[0];if(!e||!e.length)return e;for(var t=0,n=vn(),i=arguments.length;++t<i;)for(var r=0,a=arguments[t];(r=n(e,a,r))>-1;)go.call(e,r,1);return e}function ti(e){return zt(e||[],St(arguments,!1,!1,1))}function ni(e,t,n){var i=-1,r=e?e.length:0,a=[];for(t=mn(t,n,3);++i<r;){var o=e[i];t(o,i,e)&&(a.push(o),go.call(e,i--,1),r--)}return a}function ii(e){return Fn(e,1)}function ri(e,t,n){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Sn(e,t,n)&&(t=0,n=i),Ht(e,t,n)):[]}function ai(e,t,n,i){var r=mn(n);return r===ft&&null==n?Xt(e,t):Yt(e,t,r(n,i,1))}function oi(e,t,n,i){var r=mn(n);return r===ft&&null==n?Xt(e,t,!0):Yt(e,t,r(n,i,1),!0)}function si(e,t,n){var i=e?e.length:0;return i?((n?Sn(e,t,n):null==t)&&(t=1),Ht(e,0,0>t?0:t)):[]}function li(e,t,n){var i=e?e.length:0;return i?((n?Sn(e,t,n):null==t)&&(t=1),t=i-(+t||0),Ht(e,0>t?0:t)):[]}function ci(e,t,n){var i=e?e.length:0;if(!i)return[];for(t=mn(t,n,3);i--&&t(e[i],i,e););return Ht(e,i+1)}function ui(e,t,n){var i=e?e.length:0;if(!i)return[];var r=-1;for(t=mn(t,n,3);++r<i&&t(e[r],r,e););return Ht(e,0,r)}function di(){return Wt(St(arguments,!1,!0))}function pi(e,n,i,r){var a=e?e.length:0;if(!a)return[];"boolean"!=typeof n&&null!=n&&(r=i,i=Sn(e,n,r)?null:n,n=!1);var o=mn();return(o!==ft||null!=i)&&(i=o(i,r,3)),n&&vn()==t?m(e,i):Wt(e,i)}function hi(e){for(var t=-1,n=(e&&e.length&&it(nt(e,Qa)))>>>0,i=Ra(n);++t<n;)i[t]=nt(e,Ut(t));return i}function fi(e){return vt(e,Ht(arguments,1))}function gi(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Yo(n)||br(n))var i=i?vt(i,n).concat(vt(n,i)):n}return i?Wt(i):[]}function mi(){for(var e=arguments.length,t=Ra(e);e--;)t[e]=arguments[e];return hi(t)}function vi(e,t){var n=-1,i=e?e.length:0,r={};for(!i||t||Yo(e[0])||(t=[]);++n<i;){var a=e[n];t?r[a]=t[n]:a&&(r[a[0]]=a[1])}return r}function yi(e){var t=G(e);return t.__chain__=!0,t}function bi(e,t,n){return t.call(n,e),e}function wi(e,t,n){return t.call(n,e)}function xi(){return yi(this)}function ki(){return new J(this.value(),this.__chain__)}function Ci(e){for(var t,n=this;n instanceof J;){var i=jn(n);t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t}function Si(){var e=this.__wrapped__;return e instanceof Z?(this.__actions__.length&&(e=new Z(this)),new J(e.reverse(),this.__chain__)):this.thru(function(e){return e.reverse()})}function _i(){return this.value()+""}function Ti(){return Kt(this.__wrapped__,this.__actions__)}function $i(e){var t=e?e.length:0;return _n(t)&&(e=Mn(e)),dt(e,St(arguments,!1,!1,1))}function Ai(e,t,n){var i=e?e.length:0;return _n(i)||(e=ia(e),i=e.length),i?(n="number"==typeof n?0>n?Co(i+n,0):n||0:0,"string"==typeof e||!Yo(e)&&Nr(e)?i>n&&e.indexOf(t,n)>-1:vn(e,t,n)>-1):!1}function Ei(e,t,n){var i=Yo(e)?et:wt;return("function"!=typeof t||"undefined"!=typeof n)&&(t=mn(t,n,3)),i(e,t)}function Pi(e,t,n){var i=Yo(e)?tt:kt;return t=mn(t,n,3),i(e,t)}function Ii(e,t,n){if(Yo(e)){var i=Hn(e,t,n);return i>-1?e[i]:x}return t=mn(t,n,3),Ct(e,t,yt)}function Di(e,t,n){return t=mn(t,n,3),Ct(e,t,bt)}function Mi(e,t){return Ii(e,Ot(t))}function Ni(e,t,n){return"function"==typeof t&&"undefined"==typeof n&&Yo(e)?Qe(e,t):yt(e,Jt(t,n,3))}function ji(e,t,n){return"function"==typeof t&&"undefined"==typeof n&&Yo(e)?Ze(e,t):bt(e,Jt(t,n,3))}function Oi(e,t){return It(e,t,Ht(arguments,2))}function Li(e,t,n){var i=Yo(e)?nt:jt;return t=mn(t,n,3),i(e,t)}function Ri(e,t){return Li(e,Ut(t))}function Fi(e,t,n,i){var r=Yo(e)?at:Bt;return r(e,mn(t,i,4),n,arguments.length<3,yt)}function Ui(e,t,n,i){var r=Yo(e)?ot:Bt;return r(e,mn(t,i,4),n,arguments.length<3,bt)}function zi(e,t,n){var i=Yo(e)?tt:kt;return t=mn(t,n,3),i(e,function(e,n,i){return!t(e,n,i)})}function qi(e,t,n){if(n?Sn(e,t,n):null==t){e=Mn(e);var i=e.length;return i>0?e[qt(0,i-1)]:x}var r=Bi(e);return r.length=So(0>t?0:+t||0,r.length),r}function Bi(e){e=Mn(e);for(var t=-1,n=e.length,i=Ra(n);++t<n;){var r=qt(0,t);t!=r&&(i[t]=i[r]),i[r]=e[t]}return i}function Hi(e){var t=e?e.length:0;return _n(t)?t:es(e).length}function Vi(e,t,n){var i=Yo(e)?st:Vt;return("function"!=typeof t||"undefined"!=typeof n)&&(t=mn(t,n,3)),i(e,t)}function Wi(e,t,i){var r=-1,a=e?e.length:0,o=_n(a)?Ra(a):[];return i&&Sn(e,t,i)&&(t=null),t=mn(t,i,3),yt(e,function(e,n,i){o[++r]={criteria:t(e,n,i),index:r,value:e}}),n(o,s)}function Gi(e){var t=arguments;t.length>3&&Sn(t[1],t[2],t[3])&&(t=[e,t[1]]);var i=-1,r=e?e.length:0,a=St(t,!1,!1,1),o=_n(r)?Ra(r):[];return yt(e,function(e){for(var t=a.length,n=Ra(t);t--;)n[t]=null==e?x:e[a[t]];o[++i]={criteria:n,index:i,value:e}}),n(o,l)}function Ki(e,t){return Pi(e,Ot(t))}function Xi(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Ga(F);var n=e;e=t,t=n}return e=xo(e=+e)?e:0,function(){return--e<1?t.apply(this,arguments):void 0}}function Yi(e,t,n){return n&&Sn(e,t,n)&&(t=null),t=e&&null==t?e.length:Co(+t||0,0),dn(e,I,null,null,null,null,t)}function Ji(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Ga(F);var i=e;e=t,t=i}return function(){return--e>0?n=t.apply(this,arguments):t=null,n}}function Qi(e,t){var n=C;if(arguments.length>2){var i=Ht(arguments,2),r=g(i,Qi.placeholder);n|=A}return dn(e,n,t,i,r)}function Zi(e){return ht(e,arguments.length>1?St(arguments,!1,!1,1):Gr(e))}function er(e,t){var n=C|S;if(arguments.length>2){var i=Ht(arguments,2),r=g(i,er.placeholder);n|=A}return dn(t,n,e,i,r)}function tr(e,t,n){n&&Sn(e,t,n)&&(t=null);var i=dn(e,T,null,null,null,null,null,t);return i.placeholder=tr.placeholder,i}function nr(e,t,n){n&&Sn(e,t,n)&&(t=null);var i=dn(e,$,null,null,null,null,null,t);return i.placeholder=nr.placeholder,i}function ir(e,t,n){function i(){p&&so(p),l&&so(l),l=p=h=x}function r(){var n=t-(Xo()-u);if(0>=n||n>t){l&&so(l);var i=h;l=p=h=x,i&&(f=Xo(),c=e.apply(d,s),p||l||(s=d=null))}else p=fo(r,n)}function a(){p&&so(p),l=p=h=x,(m||g!==t)&&(f=Xo(),c=e.apply(d,s),p||l||(s=d=null))}function o(){if(s=arguments,u=Xo(),d=this,h=m&&(p||!v),g===!1)var n=v&&!p;else{l||v||(f=u);var i=g-(u-f),o=0>=i||i>g;o?(l&&(l=so(l)),f=u,c=e.apply(d,s)):l||(l=fo(a,i))}return o&&p?p=so(p):p||t===g||(p=fo(r,t)),n&&(o=!0,c=e.apply(d,s)),!o||p||l||(s=d=null),c}var s,l,c,u,d,p,h,f=0,g=!1,m=!0;if("function"!=typeof e)throw new Ga(F);if(t=0>t?0:t,n===!0){var v=!0;m=!1}else $r(n)&&(v=n.leading,g="maxWait"in n&&Co(+n.maxWait||0,t),m="trailing"in n?n.trailing:m);return o.cancel=i,o}function rr(e){return mt(e,1,arguments,1)}function ar(e,t){return mt(e,t,arguments,2)}function or(){var e=arguments,t=e.length;if(!t)return function(){return arguments[0]};if(!et(e,Tr))throw new Ga(F);return function(){for(var n=0,i=e[n].apply(this,arguments);++n<t;)i=e[n].call(this,i);return i}}function sr(){var e=arguments,t=e.length-1;if(0>t)return function(){return arguments[0]};if(!et(e,Tr))throw new Ga(F);return function(){for(var n=t,i=e[n].apply(this,arguments);n--;)i=e[n].call(this,i);return i}}function lr(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Ga(F);var n=function(){var i=n.cache,r=t?t.apply(this,arguments):arguments[0];if(i.has(r))return i.get(r);var a=e.apply(this,arguments);return i.set(r,a),a};return n.cache=new lr.Cache,n}function cr(e){if("function"!=typeof e)throw new Ga(F);return function(){return!e.apply(this,arguments)}}function ur(e){return Ji(e,2)}function dr(e){var t=Ht(arguments,1),n=g(t,dr.placeholder);return dn(e,A,null,t,n)}function pr(e){var t=Ht(arguments,1),n=g(t,pr.placeholder);return dn(e,E,null,t,n)}function hr(e){var t=St(arguments,!1,!1,1);return dn(e,P,null,null,null,t)}function fr(e){if("function"!=typeof e)throw new Ga(F);return function(t){return e.apply(this,t)}}function gr(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new Ga(F);return n===!1?i=!1:$r(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Le.leading=i,Le.maxWait=+t,Le.trailing=r,ir(e,t,Le)}function mr(e,t){return t=null==t?$a:t,dn(t,A,null,[e],[])}function vr(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=Sn(e,t,i)?null:t,t=!1),n="function"==typeof n&&Jt(n,i,1),gt(e,t,n)}function yr(e,t,n){return t="function"==typeof t&&Jt(t,n,1),gt(e,!0,t)}function br(e){var t=h(e)?e.length:x;return _n(t)&&to.call(e)==z||!1}function wr(e){return e===!0||e===!1||h(e)&&to.call(e)==B||!1}function xr(e){return h(e)&&to.call(e)==H||!1}function kr(e){return e&&1===e.nodeType&&h(e)&&to.call(e).indexOf("Element")>-1||!1}function Cr(e){if(null==e)return!0;var t=e.length;return _n(t)&&(Yo(e)||Nr(e)||br(e)||h(e)&&Tr(e.splice))?!t:!es(e).length}function Sr(e,t,n,i){if(n="function"==typeof n&&Jt(n,i,3),!n&&Tn(e)&&Tn(t))return e===t;var r=n?n(e,t):x;return"undefined"==typeof r?Dt(e,t,n):!!r}function _r(e){return h(e)&&"string"==typeof e.message&&to.call(e)==V||!1}function Tr(e){return"function"==typeof e||!1}function $r(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}function Ar(e,t,n,i){var r=es(t),a=r.length;if(n="function"==typeof n&&Jt(n,i,3),!n&&1==a){var o=r[0],s=t[o];if(Tn(s))return null!=e&&s===e[o]&&Za.call(e,o)}for(var l=Ra(a),c=Ra(a);a--;)s=l[a]=t[r[a]],c[a]=Tn(s);return Nt(e,r,l,c,n)}function Er(e){return Dr(e)&&e!=+e}function Pr(e){return null==e?!1:to.call(e)==W?io.test(Ja.call(e)):h(e)&&Se.test(e)||!1}function Ir(e){return null===e}function Dr(e){return"number"==typeof e||h(e)&&to.call(e)==K||!1}function Mr(e){return h(e)&&to.call(e)==Y||!1}function Nr(e){return"string"==typeof e||h(e)&&to.call(e)==Q||!1}function jr(e){return h(e)&&_n(e.length)&&je[to.call(e)]||!1}function Or(e){return"undefined"==typeof e}function Lr(e){var t=e?e.length:0;return _n(t)?t?Je(e):[]:ia(e)}function Rr(e){return pt(e,Yr(e))}function Fr(e,t,n){var i=Ro(e);return n&&Sn(e,t,n)&&(t=null),t?pt(t,i,es(t)):i}function Ur(e){if(null==e)return e;var t=Je(arguments);return t.push(lt),Zo.apply(x,t)}function zr(e,t,n){return t=mn(t,n,3),Ct(e,t,At,!0)}function qr(e,t,n){return t=mn(t,n,3),Ct(e,t,Et,!0)}function Br(e,t,n){return("function"!=typeof t||"undefined"!=typeof n)&&(t=Jt(t,n,3)),_t(e,t,Yr)}function Hr(e,t,n){
return t=Jt(t,n,3),Tt(e,t,Yr)}function Vr(e,t,n){return("function"!=typeof t||"undefined"!=typeof n)&&(t=Jt(t,n,3)),At(e,t)}function Wr(e,t,n){return t=Jt(t,n,3),Tt(e,t,es)}function Gr(e){return Pt(e,Yr(e))}function Kr(e,t){return e?Za.call(e,t):!1}function Xr(e,t,n){n&&Sn(e,t,n)&&(t=null);for(var i=-1,r=es(e),a=r.length,o={};++i<a;){var s=r[i],l=e[s];t?Za.call(o,l)?o[l].push(s):o[l]=[s]:o[l]=s}return o}function Yr(e){if(null==e)return[];$r(e)||(e=Ha(e));var t=e.length;t=t&&_n(t)&&(Yo(e)||Lo.nonEnumArgs&&br(e))&&t||0;for(var n=e.constructor,i=-1,r="function"==typeof n&&n.prototype===e,a=Ra(t),o=t>0;++i<t;)a[i]=i+"";for(var s in e)o&&Cn(s,t)||"constructor"==s&&(r||!Za.call(e,s))||a.push(s);return a}function Jr(e,t,n){var i={};return t=mn(t,n,3),At(e,function(e,n,r){i[n]=t(e,n,r)}),i}function Qr(e,t,n){if(null==e)return{};if("function"!=typeof t){var i=nt(St(arguments,!1,!1,1),Wa);return An(e,vt(Yr(e),i))}return t=Jt(t,n,3),En(e,function(e,n,i){return!t(e,n,i)})}function Zr(e){for(var t=-1,n=es(e),i=n.length,r=Ra(i);++t<i;){var a=n[t];r[t]=[a,e[a]]}return r}function ea(e,t,n){return null==e?{}:"function"==typeof t?En(e,Jt(t,n,3)):An(e,St(arguments,!1,!1,1))}function ta(e,t,n){var i=null==e?x:e[t];return"undefined"==typeof i&&(i=n),Tr(i)?i.call(e):i}function na(e,t,n,i){var r=Yo(e)||jr(e);if(t=mn(t,i,4),null==n)if(r||$r(e)){var a=e.constructor;n=r?Yo(e)?new a:[]:Ro(Tr(a)&&a.prototype)}else n={};return(r?Qe:At)(e,function(e,i,r){return t(n,e,i,r)}),n}function ia(e){return Gt(e,es(e))}function ra(e){return Gt(e,Yr(e))}function aa(e,t,n){n&&Sn(e,t,n)&&(t=n=null);var i=null==e,r=null==t;if(null==n&&(r&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,r=!0)),i&&r&&(t=1,r=!1),e=+e||0,r?(t=e,e=0):t=+t||0,n||e%1||t%1){var a=Ao();return So(e+a*(t-e+parseFloat("1e-"+((a+"").length-1))),t)}return qt(e,t)}function oa(e){return e=i(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function sa(e){return e=i(e),e&&e.replace(_e,c)}function la(e,t,n){e=i(e),t+="";var r=e.length;return n=("undefined"==typeof n?r:So(0>n?0:+n||0,r))-t.length,n>=0&&e.indexOf(t,n)==n}function ca(e){return e=i(e),e&&me.test(e)?e.replace(fe,u):e}function ua(e){return e=i(e),e&&Ae.test(e)?e.replace($e,"\\$&"):e}function da(e,t,n){e=i(e),t=+t;var r=e.length;if(r>=t||!xo(t))return e;var a=(t-r)/2,o=lo(a),s=oo(a);return n=cn("",s,n),n.slice(0,o)+e+n}function pa(e,t,n){return e=i(e),e&&cn(e,t,n)+e}function ha(e,t,n){return e=i(e),e&&e+cn(e,t,n)}function fa(e,t,n){return n&&Sn(e,t,n)&&(t=0),$o(e,t)}function ga(e,t){var n="";if(e=i(e),t=+t,1>t||!e||!xo(t))return n;do t%2&&(n+=e),t=lo(t/2),e+=e;while(t);return n}function ma(e,t,n){return e=i(e),n=null==n?0:So(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function va(e,t,n){var r=G.templateSettings;n&&Sn(e,t,n)&&(t=n=null),e=i(e),t=ut(ut({},n||t),r,ct);var a,o,s=ut(ut({},t.imports),r.imports,ct),l=es(s),c=Gt(s,l),u=0,p=t.interpolate||Te,h="__p += '",f=Va((t.escape||Te).source+"|"+p.source+"|"+(p===be?we:Te).source+"|"+(t.evaluate||Te).source+"|$","g"),g="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Ne+"]")+"\n";e.replace(f,function(t,n,i,r,s,l){return i||(i=r),h+=e.slice(u,l).replace(Pe,d),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+t.length,t}),h+="';\n";var m=t.variable;m||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(ue,""):h).replace(de,"$1").replace(pe,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=Sa(function(){return za(l,g+"return "+h).apply(x,c)});if(v.source=h,_r(v))throw v;return v}function ya(e,t,n){var r=e;return(e=i(e))?(n?Sn(r,t,n):null==t)?e.slice(v(e),y(e)+1):(t+="",e.slice(a(e,t),o(e,t)+1)):e}function ba(e,t,n){var r=e;return e=i(e),e?e.slice((n?Sn(r,t,n):null==t)?v(e):a(e,t+"")):e}function wa(e,t,n){var r=e;return e=i(e),e?(n?Sn(r,t,n):null==t)?e.slice(0,y(e)+1):e.slice(0,o(e,t+"")+1):e}function xa(e,t,n){n&&Sn(e,t,n)&&(t=null);var r=D,a=M;if(null!=t)if($r(t)){var o="separator"in t?t.separator:o;r="length"in t?+t.length||0:r,a="omission"in t?i(t.omission):a}else r=+t||0;if(e=i(e),r>=e.length)return e;var s=r-a.length;if(1>s)return a;var l=e.slice(0,s);if(null==o)return l+a;if(Mr(o)){if(e.slice(s).search(o)){var c,u,d=e.slice(0,s);for(o.global||(o=Va(o.source,(xe.exec(o)||"")+"g")),o.lastIndex=0;c=o.exec(d);)u=c.index;l=l.slice(0,null==u?s:u)}}else if(e.indexOf(o,s)!=s){var p=l.lastIndexOf(o);p>-1&&(l=l.slice(0,p))}return l+a}function ka(e){return e=i(e),e&&ge.test(e)?e.replace(he,b):e}function Ca(e,t,n){return n&&Sn(e,t,n)&&(t=null),e=i(e),e.match(t||Ie)||[]}function Sa(e){try{return e.apply(x,Ht(arguments,1))}catch(t){return _r(t)?t:new Ua(t)}}function _a(e,t,n){return n&&Sn(e,t,n)&&(t=null),h(e)?Aa(e):ft(e,t)}function Ta(e){return function(){return e}}function $a(e){return e}function Aa(e){return Ot(gt(e,!0))}function Ea(e,t){return Lt(e+"",gt(t,!0))}function Pa(e,t,n){if(null==n){var i=$r(t),r=i&&es(t),a=r&&r.length&&Pt(t,r);(a?a.length:i)||(a=!1,n=t,t=e,e=this)}a||(a=Pt(t,es(t)));var o=!0,s=-1,l=Tr(e),c=a.length;n===!1?o=!1:$r(n)&&"chain"in n&&(o=n.chain);for(;++s<c;){var u=a[s],d=t[u];e[u]=d,l&&(e.prototype[u]=function(t){return function(){var n=this.__chain__;if(o||n){var i=e(this.__wrapped__);return(i.__actions__=Je(this.__actions__)).push({func:t,args:arguments,thisArg:e}),i.__chain__=n,i}var r=[this.value()];return uo.apply(r,arguments),t.apply(e,r)}}(d))}return e}function Ia(){return f._=no,this}function Da(){}function Ma(e){return Ut(e+"")}function Na(e){return function(t){return null==e?x:e[t]}}function ja(e,t,n){n&&Sn(e,t,n)&&(t=n=null),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var i=-1,r=Co(oo((t-e)/(n||1)),0),a=Ra(r);++i<r;)a[i]=e,e+=n;return a}function Oa(e,t,n){if(e=+e,1>e||!xo(e))return[];var i=-1,r=Ra(So(e,Io));for(t=Jt(t,n,1);++i<e;)Io>i?r[i]=t(i):t(i);return r}function La(e){var t=++eo;return i(e)+t}f=f?Ke.defaults(Be.Object(),f,Ke.pick(Be,Me)):Be;var Ra=f.Array,Fa=f.Date,Ua=f.Error,za=f.Function,qa=f.Math,Ba=f.Number,Ha=f.Object,Va=f.RegExp,Wa=f.String,Ga=f.TypeError,Ka=Ra.prototype,Xa=Ha.prototype,Ya=(Ya=f.window)&&Ya.document,Ja=za.prototype.toString,Qa=Ut("length"),Za=Xa.hasOwnProperty,eo=0,to=Xa.toString,no=f._,io=Va("^"+ua(to).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ro=Pr(ro=f.ArrayBuffer)&&ro,ao=Pr(ao=ro&&new ro(0).slice)&&ao,oo=qa.ceil,so=f.clearTimeout,lo=qa.floor,co=Pr(co=Ha.getPrototypeOf)&&co,uo=Ka.push,po=Xa.propertyIsEnumerable,ho=Pr(ho=f.Set)&&ho,fo=f.setTimeout,go=Ka.splice,mo=Pr(mo=f.Uint8Array)&&mo,vo=Pr(vo=f.WeakMap)&&vo,yo=function(){try{var e=Pr(e=f.Float64Array)&&e,t=new e(new ro(10),0,1)&&e}catch(n){}return t}(),bo=Pr(bo=Ra.isArray)&&bo,wo=Pr(wo=Ha.create)&&wo,xo=f.isFinite,ko=Pr(ko=Ha.keys)&&ko,Co=qa.max,So=qa.min,_o=Pr(_o=Fa.now)&&_o,To=Pr(To=Ba.isFinite)&&To,$o=f.parseInt,Ao=qa.random,Eo=Ba.NEGATIVE_INFINITY,Po=Ba.POSITIVE_INFINITY,Io=qa.pow(2,32)-1,Do=Io-1,Mo=Io>>>1,No=yo?yo.BYTES_PER_ELEMENT:0,jo=qa.pow(2,53)-1,Oo=vo&&new vo,Lo=G.support={};!function(e){Lo.funcDecomp=!Pr(f.WinRTError)&&Ee.test(w),Lo.funcNames="string"==typeof za.name;try{Lo.dom=11===Ya.createDocumentFragment().nodeType}catch(t){Lo.dom=!1}try{Lo.nonEnumArgs=!po.call(arguments,1)}catch(t){Lo.nonEnumArgs=!0}}(0,0),G.templateSettings={escape:ve,evaluate:ye,interpolate:be,variable:"",imports:{_:G}};var Ro=function(){function e(){}return function(t){if($r(t)){e.prototype=t;var n=new e;e.prototype=null}return n||f.Object()}}(),Fo=Oo?function(e,t){return Oo.set(e,t),e}:$a;ao||(Qt=ro&&mo?function(e){var t=e.byteLength,n=yo?lo(t/No):0,i=n*No,r=new ro(t);if(n){var a=new yo(r,0,n);a.set(new yo(e,0,n))}return t!=i&&(a=new mo(r,i),a.set(new mo(e,i))),r}:Ta(null));var Uo=wo&&ho?function(e){return new Ge(e)}:Ta(null),zo=Oo?function(e){return Oo.get(e)}:Da,qo=function(){var e=0,t=0;return function(n,i){var r=Xo(),a=j-(r-t);if(t=r,a>0){if(++e>=N)return n}else e=0;return Fo(n,i)}}(),Bo=tn(function(e,t,n){Za.call(e,n)?++e[n]:e[n]=1}),Ho=tn(function(e,t,n){Za.call(e,n)?e[n].push(t):e[n]=[t]}),Vo=tn(function(e,t,n){e[n]=t}),Wo=sn(it),Go=sn(rt,!0),Ko=tn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Xo=_o||function(){return(new Fa).getTime()},Yo=bo||function(e){return h(e)&&_n(e.length)&&to.call(e)==q||!1};Lo.dom||(kr=function(e){return e&&1===e.nodeType&&h(e)&&!Qo(e)||!1});var Jo=To||function(e){return"number"==typeof e&&xo(e)};(Tr(/x/)||mo&&!Tr(mo))&&(Tr=function(e){return to.call(e)==W});var Qo=co?function(e){if(!e||to.call(e)!=X)return!1;var t=e.valueOf,n=Pr(t)&&(n=co(t))&&co(n);return n?e==n||co(e)==n:In(e)}:In,Zo=nn(ut),es=ko?function(e){if(e)var t=e.constructor,n=e.length;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&n&&_n(n)?Dn(e):$r(e)?ko(e):[]}:Dn,ts=nn(Rt),ns=an(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),is=an(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});8!=$o(De+"08")&&(fa=function(e,t,n){return(n?Sn(e,t,n):null==t)?t=0:t&&(t=+t),e=ya(e),$o(e,t||(Ce.test(e)?16:10))});var rs=an(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),as=an(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))});return J.prototype=Ro(G.prototype),Z.prototype=Ro(J.prototype),Z.prototype.constructor=Z,ze.prototype["delete"]=qe,ze.prototype.get=He,ze.prototype.has=Ve,ze.prototype.set=We,Ge.prototype.push=Ye,lr.Cache=ze,G.after=Xi,G.ary=Yi,G.assign=Zo,G.at=$i,G.before=Ji,G.bind=Qi,G.bindAll=Zi,G.bindKey=er,G.callback=_a,G.chain=yi,G.chunk=On,G.compact=Ln,G.constant=Ta,G.countBy=Bo,G.create=Fr,G.curry=tr,G.curryRight=nr,G.debounce=ir,G.defaults=Ur,G.defer=rr,G.delay=ar,G.difference=Rn,G.drop=Fn,G.dropRight=Un,G.dropRightWhile=zn,G.dropWhile=qn,G.fill=Bn,G.filter=Pi,G.flatten=Gn,G.flattenDeep=Kn,G.flow=or,G.flowRight=sr,G.forEach=Ni,G.forEachRight=ji,G.forIn=Br,G.forInRight=Hr,G.forOwn=Vr,G.forOwnRight=Wr,G.functions=Gr,G.groupBy=Ho,G.indexBy=Vo,G.initial=Yn,G.intersection=Jn,G.invert=Xr,G.invoke=Oi,G.keys=es,G.keysIn=Yr,G.map=Li,G.mapValues=Jr,G.matches=Aa,G.matchesProperty=Ea,G.memoize=lr,G.merge=ts,G.mixin=Pa,G.negate=cr,G.omit=Qr,G.once=ur,G.pairs=Zr,G.partial=dr,G.partialRight=pr,G.partition=Ko,G.pick=ea,G.pluck=Ri,G.property=Ma,G.propertyOf=Na,G.pull=ei,G.pullAt=ti,G.range=ja,G.rearg=hr,G.reject=zi,G.remove=ni,G.rest=ii,G.shuffle=Bi,G.slice=ri,G.sortBy=Wi,G.sortByAll=Gi,G.spread=fr,G.take=si,G.takeRight=li,G.takeRightWhile=ci,G.takeWhile=ui,G.tap=bi,G.throttle=gr,G.thru=wi,G.times=Oa,G.toArray=Lr,G.toPlainObject=Rr,G.transform=na,G.union=di,G.uniq=pi,G.unzip=hi,G.values=ia,G.valuesIn=ra,G.where=Ki,G.without=fi,G.wrap=mr,G.xor=gi,G.zip=mi,G.zipObject=vi,G.backflow=sr,G.collect=Li,G.compose=sr,G.each=Ni,G.eachRight=ji,G.extend=Zo,G.iteratee=_a,G.methods=Gr,G.object=vi,G.select=Pi,G.tail=ii,G.unique=pi,Pa(G,G),G.attempt=Sa,G.camelCase=ns,G.capitalize=oa,G.clone=vr,G.cloneDeep=yr,G.deburr=sa,G.endsWith=la,G.escape=ca,G.escapeRegExp=ua,G.every=Ei,G.find=Ii,G.findIndex=Hn,G.findKey=zr,G.findLast=Di,G.findLastIndex=Vn,G.findLastKey=qr,G.findWhere=Mi,G.first=Wn,G.has=Kr,G.identity=$a,G.includes=Ai,G.indexOf=Xn,G.isArguments=br,G.isArray=Yo,G.isBoolean=wr,G.isDate=xr,G.isElement=kr,G.isEmpty=Cr,G.isEqual=Sr,G.isError=_r,G.isFinite=Jo,G.isFunction=Tr,G.isMatch=Ar,G.isNaN=Er,G.isNative=Pr,G.isNull=Ir,G.isNumber=Dr,G.isObject=$r,G.isPlainObject=Qo,G.isRegExp=Mr,G.isString=Nr,G.isTypedArray=jr,G.isUndefined=Or,G.kebabCase=is,G.last=Qn,G.lastIndexOf=Zn,G.max=Wo,G.min=Go,G.noConflict=Ia,G.noop=Da,G.now=Xo,G.pad=da,G.padLeft=pa,G.padRight=ha,G.parseInt=fa,G.random=aa,G.reduce=Fi,G.reduceRight=Ui,G.repeat=ga,G.result=ta,G.runInContext=w,G.size=Hi,G.snakeCase=rs,G.some=Vi,G.sortedIndex=ai,G.sortedLastIndex=oi,G.startCase=as,G.startsWith=ma,G.template=va,G.trim=ya,G.trimLeft=ba,G.trimRight=wa,G.trunc=xa,G.unescape=ka,G.uniqueId=La,G.words=Ca,G.all=Ei,G.any=Vi,G.contains=Ai,G.detect=Ii,G.foldl=Fi,G.foldr=Ui,G.head=Wn,G.include=Ai,G.inject=Fi,Pa(G,function(){var e={};return At(G,function(t,n){G.prototype[n]||(e[n]=t)}),e}(),!1),G.sample=qi,G.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return qi(t,e)}):qi(this.value())},G.VERSION=k,Qe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){G[e].placeholder=G}),Qe(["filter","map","takeWhile"],function(e,t){var n=t==O,i=t==R;Z.prototype[e]=function(e,r){var a=this.clone(),o=a.__filtered__,s=a.__iteratees__||(a.__iteratees__=[]);return a.__filtered__=o||n||i&&a.__dir__<0,s.push({iteratee:mn(e,r,3),type:t}),a}}),Qe(["drop","take"],function(e,t){var n="__"+e+"Count__",i=e+"While";Z.prototype[e]=function(i){i=null==i?1:Co(lo(i)||0,0);var r=this.clone();if(r.__filtered__){var a=r[n];r[n]=t?So(a,i):a+i}else{var o=r.__views__||(r.__views__=[]);o.push({size:i,type:e+(r.__dir__<0?"Right":"")})}return r},Z.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},Z.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[i](e,t).reverse()}}),Qe(["first","last"],function(e,t){var n="take"+(t?"Right":"");Z.prototype[e]=function(){return this[n](1).value()[0]}}),Qe(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Z.prototype[e]=function(){return this[n](1)}}),Qe(["pluck","where"],function(e,t){var n=t?"filter":"map",i=t?Ot:Ut;Z.prototype[e]=function(e){return this[n](i(e))}}),Z.prototype.compact=function(){return this.filter($a)},Z.prototype.dropWhile=function(e,t){var n;return e=mn(e,t,3),this.filter(function(t,i,r){return n||(n=!e(t,i,r))})},Z.prototype.reject=function(e,t){return e=mn(e,t,3),this.filter(function(t,n,i){return!e(t,n,i)})},Z.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=0>e?this.takeRight(-e):this.drop(e);return"undefined"!=typeof t&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n},Z.prototype.toArray=function(){return this.drop(0)},At(Z.prototype,function(e,t){var n=G[t],i=/^(?:first|last)$/.test(t);G.prototype[t]=function(){var t=this.__wrapped__,r=arguments,a=this.__chain__,o=!!this.__actions__.length,s=t instanceof Z,l=s&&!o;if(i&&!a)return l?e.call(t):n.call(G,this.value());var c=function(e){var t=[e];return uo.apply(t,r),n.apply(G,t)};if(s||Yo(t)){var u=l?t:new Z(this),d=e.apply(u,r);if(!i&&(o||d.__actions__)){var p=d.__actions__||(d.__actions__=[]);p.push({func:wi,args:[c],thisArg:G})}return new J(d,a)}return this.thru(c)}}),Qe(["concat","join","pop","push","shift","sort","splice","unshift"],function(e){var t=Ka[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:join|pop|shift)$/.test(e);G.prototype[e]=function(){var e=arguments;return i&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),Z.prototype.clone=Re,Z.prototype.reverse=Fe,Z.prototype.value=Ue,G.prototype.chain=xi,G.prototype.commit=ki,G.prototype.plant=Ci,G.prototype.reverse=Si,G.prototype.toString=_i,G.prototype.run=G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=Ti,G.prototype.collect=G.prototype.map,G.prototype.head=G.prototype.first,G.prototype.select=G.prototype.filter,G.prototype.tail=G.prototype.rest,G}var x,k="3.2.0",C=1,S=2,_=4,T=8,$=16,A=32,E=64,P=128,I=256,D=30,M="...",N=150,j=16,O=0,L=1,R=2,F="Expected a function",U="__lodash_placeholder__",z="[object Arguments]",q="[object Array]",B="[object Boolean]",H="[object Date]",V="[object Error]",W="[object Function]",G="[object Map]",K="[object Number]",X="[object Object]",Y="[object RegExp]",J="[object Set]",Q="[object String]",Z="[object WeakMap]",ee="[object ArrayBuffer]",te="[object Float32Array]",ne="[object Float64Array]",ie="[object Int8Array]",re="[object Int16Array]",ae="[object Int32Array]",oe="[object Uint8Array]",se="[object Uint8ClampedArray]",le="[object Uint16Array]",ce="[object Uint32Array]",ue=/\b__p \+= '';/g,de=/\b(__p \+=) '' \+/g,pe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,he=/&(?:amp|lt|gt|quot|#39|#96);/g,fe=/[&<>"'`]/g,ge=RegExp(he.source),me=RegExp(fe.source),ve=/<%-([\s\S]+?)%>/g,ye=/<%([\s\S]+?)%>/g,be=/<%=([\s\S]+?)%>/g,we=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xe=/\w*$/,ke=/^\s*function[ \n\r\t]+\w/,Ce=/^0[xX]/,Se=/^\[object .+?Constructor\]$/,_e=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Te=/($^)/,$e=/[.*+?^${}()|[\]\/\\]/g,Ae=RegExp($e.source),Ee=/\bthis\b/,Pe=/['\n\r\u2028\u2029\\]/g,Ie=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"{2,}(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),De=" 	\f \ufeff\n\r\u2028\u2029 ᠎             　",Me=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],Ne=-1,je={};je[te]=je[ne]=je[ie]=je[re]=je[ae]=je[oe]=je[se]=je[le]=je[ce]=!0,je[z]=je[q]=je[ee]=je[B]=je[H]=je[V]=je[W]=je[G]=je[K]=je[X]=je[Y]=je[J]=je[Q]=je[Z]=!1;var Oe={};Oe[z]=Oe[q]=Oe[ee]=Oe[B]=Oe[H]=Oe[te]=Oe[ne]=Oe[ie]=Oe[re]=Oe[ae]=Oe[K]=Oe[X]=Oe[Y]=Oe[Q]=Oe[oe]=Oe[se]=Oe[le]=Oe[ce]=!0,Oe[V]=Oe[W]=Oe[G]=Oe[J]=Oe[Z]=!1;var Le={leading:!1,maxWait:0,trailing:!1},Re={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Fe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ue={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},ze={"function":!0,object:!0},qe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Be=ze[typeof window]&&window!==(this&&this.window)?window:this,He=ze[typeof exports]&&exports&&!exports.nodeType&&exports,Ve=ze[typeof module]&&module&&!module.nodeType&&module,We=He&&Ve&&"object"==typeof global&&global;!We||We.global!==We&&We.window!==We&&We.self!==We||(Be=We);var Ge=Ve&&Ve.exports===He&&He,Ke=w();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Be._=Ke,define(function(){return Ke})):He&&Ve?Ge?(Ve.exports=Ke)._=Ke:He._=Ke:Be._=Ke}.call(this),function(e,t,n){"use strict";function i(){function e(e,n){return t.extend(Object.create(e),n)}function n(e,t){var n=t.caseInsensitiveMatch,i={originalPath:e,regexp:e},r=i.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,t,n,i){var a="?"===i?i:null,o="*"===i?i:null;return r.push({name:n,optional:!!a}),t=t||"",""+(a?"":t)+"(?:"+(a?t:"")+(o&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1"),i.regexp=new RegExp("^"+e+"$",n?"i":""),i}var i={};this.when=function(e,r){var a=t.copy(r);if(t.isUndefined(a.reloadOnSearch)&&(a.reloadOnSearch=!0),t.isUndefined(a.caseInsensitiveMatch)&&(a.caseInsensitiveMatch=this.caseInsensitiveMatch),i[e]=t.extend(a,e&&n(e,a)),e){var o="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";i[o]=t.extend({redirectTo:e},n(o,a))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(n,r,a,o,s,c,u){function d(e,t){var n=t.keys,i={};if(!t.regexp)return null;var r=t.regexp.exec(e);if(!r)return null;for(var a=1,o=r.length;o>a;++a){var s=n[a-1],l=r[a];s&&l&&(i[s.name]=l)}return i}function p(e){var i=b.current;m=f(),v=m&&i&&m.$$route===i.$$route&&t.equals(m.pathParams,i.pathParams)&&!m.reloadOnSearch&&!y,v||!i&&!m||n.$broadcast("$routeChangeStart",m,i).defaultPrevented&&e&&e.preventDefault()}function h(){var e=b.current,i=m;v?(e.params=i.params,t.copy(e.params,a),n.$broadcast("$routeUpdate",e)):(i||e)&&(y=!1,b.current=i,i&&i.redirectTo&&(t.isString(i.redirectTo)?r.path(g(i.redirectTo,i.params)).search(i.params).replace():r.url(i.redirectTo(i.pathParams,r.path(),r.search())).replace()),o.when(i).then(function(){if(i){var e,n,r=t.extend({},i.resolve);return t.forEach(r,function(e,n){r[n]=t.isString(e)?s.get(e):s.invoke(e,null,null,n)}),t.isDefined(e=i.template)?t.isFunction(e)&&(e=e(i.params)):t.isDefined(n=i.templateUrl)&&(t.isFunction(n)&&(n=n(i.params)),t.isDefined(n)&&(i.loadedTemplateUrl=u.valueOf(n),e=c(n))),t.isDefined(e)&&(r.$template=e),o.all(r)}}).then(function(r){i==b.current&&(i&&(i.locals=r,t.copy(i.params,a)),n.$broadcast("$routeChangeSuccess",i,e))},function(t){i==b.current&&n.$broadcast("$routeChangeError",i,e,t)}))}function f(){var n,a;return t.forEach(i,function(i,o){!a&&(n=d(r.path(),i))&&(a=e(i,{params:t.extend({},r.search(),n),pathParams:n}),a.$$route=i)}),a||i[null]&&e(i[null],{params:{},pathParams:{}})}function g(e,n){var i=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)i.push(e);else{var r=e.match(/(\w+)(?:[?*])?(.*)/),a=r[1];i.push(n[a]),i.push(r[2]||""),delete n[a]}}),i.join("")}var m,v,y=!1,b={routes:i,reload:function(){y=!0,n.$evalAsync(function(){p(),h()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw l("norout","Tried updating route when with no current route");e=t.extend({},this.current.params,e),r.path(g(this.current.$$route.originalPath,e)),r.search(e)}};return n.$on("$locationChangeStart",p),n.$on("$locationChangeSuccess",h),b}]}function r(){this.$get=function(){return{}}}function a(e,n,i){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(r,a,o,s,l){function c(){h&&(i.cancel(h),h=null),d&&(d.$destroy(),d=null),p&&(h=i.leave(p),h.then(function(){h=null}),p=null)}function u(){var o=e.current&&e.current.locals,s=o&&o.$template;if(t.isDefined(s)){var u=r.$new(),h=e.current,m=l(u,function(e){i.enter(e,null,p||a).then(function(){!t.isDefined(f)||f&&!r.$eval(f)||n()}),c()});p=m,d=h.scope=u,d.$emit("$viewContentLoaded"),d.$eval(g)}else c()}var d,p,h,f=o.autoscroll,g=o.onload||"";r.$on("$routeChangeSuccess",u),u()}}}function o(e,t,n){return{restrict:"ECA",priority:-400,link:function(i,r){var a=n.current,o=a.locals;r.html(o.$template);var s=e(r.contents());if(a.controller){o.$scope=i;var l=t(a.controller,o);a.controllerAs&&(i[a.controllerAs]=l),r.data("$ngControllerController",l),r.children().data("$ngControllerController",l)}s(i)}}}var s=t.module("ngRoute",["ng"]).provider("$route",i),l=t.$$minErr("ngRoute");s.provider("$routeParams",r),s.directive("ngView",a),s.directive("ngView",o),a.$inject=["$route","$anchorScroll","$animate"],o.$inject=["$compile","$controller","$route"]}(window,window.angular),function(e,t){"use strict";"object"==typeof exports?module.exports=t(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],t):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)}(this,function(e,t,n,i){"use strict";function r(e,t){return this instanceof r?(void 0===e&&(e="undefined"!=typeof location?location.href+"":""),this.href(e),void 0!==t?this.absoluteTo(t):this):new r(e,t)}function a(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function o(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function s(e){return"Array"===o(e)}function l(e,t){var n,i,r={};if(s(t))for(n=0,i=t.length;i>n;n++)r[t[n]]=!0;else r[t]=!0;for(n=0,i=e.length;i>n;n++)void 0!==r[e[n]]&&(e.splice(n,1),i--,n--);return e}function c(e,t){var n,i;if(s(t)){for(n=0,i=t.length;i>n;n++)if(!c(e,t[n]))return!1;return!0}var r=o(t);for(n=0,i=e.length;i>n;n++)if("RegExp"===r){if("string"==typeof e[n]&&e[n].match(t))return!0}else if(e[n]===t)return!0;return!1}function u(e,t){if(!s(e)||!s(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,i=e.length;i>n;n++)if(e[n]!==t[n])return!1;return!0}function d(e){return escape(e)}function p(e){return encodeURIComponent(e).replace(/[!'()*]/g,d).replace(/\*/g,"%2A")}function h(e){return function(t,n){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!n),this)}}function f(e,t){return function(n,i){return void 0===n?this._parts[e]||"":(null!==n&&(n+="",n.charAt(0)===t&&(n=n.substring(1))),this._parts[e]=n,this.build(!i),this)}}var g=i&&i.URI;r.version="1.14.2";var m=r.prototype,v=Object.prototype.hasOwnProperty;r._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:r.duplicateQueryParameters,escapeQuerySpace:r.escapeQuerySpace}},r.duplicateQueryParameters=!1,r.escapeQuerySpace=!0,r.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,r.idn_expression=/[^a-z0-9\.-]/i,r.punycode_expression=/(xn--)/i,r.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,r.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},r.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},r.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,r.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},r.getDomAttribute=function(e){if(!e||!e.nodeName)return void 0;var t=e.nodeName.toLowerCase();return"input"===t&&"image"!==e.type?void 0:r.domAttributes[t]},r.encode=p,r.decode=decodeURIComponent,r.iso8859=function(){r.encode=escape,r.decode=unescape},r.unicode=function(){r.encode=p,r.decode=decodeURIComponent},r.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},r.encodeQuery=function(e,t){var n=r.encode(e+"");return void 0===t&&(t=r.escapeQuerySpace),t?n.replace(/%20/g,"+"):n},r.decodeQuery=function(e,t){e+="",void 0===t&&(t=r.escapeQuerySpace);try{return r.decode(t?e.replace(/\+/g,"%20"):e)}catch(n){return e}},r.recodePath=function(e){for(var t=(e+"").split("/"),n=0,i=t.length;i>n;n++)t[n]=r.encodePathSegment(r.decode(t[n]));return t.join("/")},r.decodePath=function(e){for(var t=(e+"").split("/"),n=0,i=t.length;i>n;n++)t[n]=r.decodePathSegment(t[n]);return t.join("/")};var y,b={encode:"encode",decode:"decode"},w=function(e,t){return function(n){try{return r[t](n+"").replace(r.characters[e][t].expression,function(n){return r.characters[e][t].map[n]})}catch(i){return n}}};for(y in b)r[y+"PathSegment"]=w("pathname",b[y]);r.encodeReserved=w("reserved","encode"),r.parse=function(e,t){var n;return t||(t={}),n=e.indexOf("#"),n>-1&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),n=e.indexOf("?"),n>-1&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=r.parseAuthority(e,t)):(n=e.indexOf(":"),n>-1&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(r.protocol_expression)?t.protocol=void 0:"//"===e.substring(n+1,n+3)?(e=e.substring(n+3),e=r.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0))),t.path=e,t},r.parseHost=function(e,t){var n,i,r=e.indexOf("/");if(-1===r&&(r=e.length),"["===e.charAt(0))n=e.indexOf("]"),t.hostname=e.substring(1,n)||null,t.port=e.substring(n+2,r)||null,"/"===t.port&&(t.port=null);else{var a=e.indexOf(":"),o=e.indexOf("/"),s=e.indexOf(":",a+1);-1!==s&&(-1===o||o>s)?(t.hostname=e.substring(0,r)||null,t.port=null):(i=e.substring(0,r).split(":"),t.hostname=i[0]||null,t.port=i[1]||null)}return t.hostname&&"/"!==e.substring(r).charAt(0)&&(r++,e="/"+e),e.substring(r)||"/"},r.parseAuthority=function(e,t){return e=r.parseUserinfo(e,t),r.parseHost(e,t)},r.parseUserinfo=function(e,t){var n,i=e.indexOf("/"),a=e.lastIndexOf("@",i>-1?i:e.length-1);return a>-1&&(-1===i||i>a)?(n=e.substring(0,a).split(":"),t.username=n[0]?r.decode(n[0]):null,n.shift(),t.password=n[0]?r.decode(n.join(":")):null,e=e.substring(a+1)):(t.username=null,t.password=null),e},r.parseQuery=function(e,t){if(!e)return{};if(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!e)return{};for(var n,i,a,o={},s=e.split("&"),l=s.length,c=0;l>c;c++)n=s[c].split("="),i=r.decodeQuery(n.shift(),t),a=n.length?r.decodeQuery(n.join("="),t):null,v.call(o,i)?("string"==typeof o[i]&&(o[i]=[o[i]]),o[i].push(a)):o[i]=a;return o},r.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=r.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},r.buildHost=function(e){var t="";return e.hostname?(t+=r.ip6_expression.test(e.hostname)?"["+e.hostname+"]":e.hostname,e.port&&(t+=":"+e.port),t):""},r.buildAuthority=function(e){return r.buildUserinfo(e)+r.buildHost(e)},r.buildUserinfo=function(e){var t="";return e.username&&(t+=r.encode(e.username),e.password&&(t+=":"+r.encode(e.password)),t+="@"),t},r.buildQuery=function(e,t,n){var i,a,o,l,c="";for(a in e)if(v.call(e,a)&&a)if(s(e[a]))for(i={},o=0,l=e[a].length;l>o;o++)void 0!==e[a][o]&&void 0===i[e[a][o]+""]&&(c+="&"+r.buildQueryParameter(a,e[a][o],n),t!==!0&&(i[e[a][o]+""]=!0));else void 0!==e[a]&&(c+="&"+r.buildQueryParameter(a,e[a],n));return c.substring(1)},r.buildQueryParameter=function(e,t,n){return r.encodeQuery(e,n)+(null!==t?"="+r.encodeQuery(t,n):"")},r.addQuery=function(e,t,n){if("object"==typeof t)for(var i in t)v.call(t,i)&&r.addQuery(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=n);"string"==typeof e[t]&&(e[t]=[e[t]]),s(n)||(n=[n]),e[t]=(e[t]||[]).concat(n)}},r.removeQuery=function(e,t,n){var i,a,o;if(s(t))for(i=0,a=t.length;a>i;i++)e[t[i]]=void 0;else if("object"==typeof t)for(o in t)v.call(t,o)&&r.removeQuery(e,o,t[o]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==n?e[t]===n?e[t]=void 0:s(e[t])&&(e[t]=l(e[t],n)):e[t]=void 0}},r.hasQuery=function(e,t,n,i){if("object"==typeof t){
for(var a in t)if(v.call(t,a)&&!r.hasQuery(e,a,t[a]))return!1;return!0}if("string"!=typeof t)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(o(n)){case"Undefined":return t in e;case"Boolean":var l=Boolean(s(e[t])?e[t].length:e[t]);return n===l;case"Function":return!!n(e[t],t,e);case"Array":if(!s(e[t]))return!1;var d=i?c:u;return d(e[t],n);case"RegExp":return s(e[t])?i?c(e[t],n):!1:Boolean(e[t]&&e[t].match(n));case"Number":n=String(n);case"String":return s(e[t])?i?c(e[t],n):!1:e[t]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.commonPath=function(e,t){var n,i=Math.min(e.length,t.length);for(n=0;i>n;n++)if(e.charAt(n)!==t.charAt(n)){n--;break}return 1>n?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":(("/"!==e.charAt(n)||"/"!==t.charAt(n))&&(n=e.substring(0,n).lastIndexOf("/")),e.substring(0,n+1))},r.withinString=function(e,t,n){n||(n={});var i=n.start||r.findUri.start,a=n.end||r.findUri.end,o=n.trim||r.findUri.trim,s=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var l=i.exec(e);if(!l)break;var c=l.index;if(n.ignoreHtml){var u=e.slice(Math.max(c-3,0),c);if(u&&s.test(u))continue}var d=c+e.slice(c).search(a),p=e.slice(c,d).replace(o,"");if(!n.ignore||!n.ignore.test(p)){d=c+p.length;var h=t(p,c,d,e);e=e.slice(0,c)+h+e.slice(d),i.lastIndex=c+h.length}}return i.lastIndex=0,e},r.ensureValidHostname=function(t){if(t.match(r.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(e.toASCII(t).match(r.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]')}},r.noConflict=function(e){if(e){var t={URI:this.noConflict()};return i.URITemplate&&"function"==typeof i.URITemplate.noConflict&&(t.URITemplate=i.URITemplate.noConflict()),i.IPv6&&"function"==typeof i.IPv6.noConflict&&(t.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&"function"==typeof i.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=i.SecondLevelDomains.noConflict()),t}return i.URI===this&&(i.URI=g),this},m.build=function(e){return e===!0?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=r.build(this._parts),this._deferred_build=!1),this},m.clone=function(){return new r(this)},m.valueOf=m.toString=function(){return this.build(!1)._string},m.protocol=h("protocol"),m.username=h("username"),m.password=h("password"),m.hostname=h("hostname"),m.port=h("port"),m.query=f("query","?"),m.fragment=f("fragment","#"),m.search=function(e,t){var n=this.query(e,t);return"string"==typeof n&&n.length?"?"+n:n},m.hash=function(e,t){var n=this.fragment(e,t);return"string"==typeof n&&n.length?"#"+n:n},m.pathname=function(e,t){if(void 0===e||e===!0){var n=this._parts.path||(this._parts.hostname?"/":"");return e?r.decodePath(n):n}return this._parts.path=e?r.recodePath(e):"/",this.build(!t),this},m.path=m.pathname,m.href=function(e,t){var n;if(void 0===e)return this.toString();this._string="",this._parts=r._parts();var i=e instanceof r,a="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName){var o=r.getDomAttribute(e);e=e[o]||"",a=!1}if(!i&&a&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=r.parse(String(e),this._parts);else{if(!i&&!a)throw new TypeError("invalid input");var s=i?e._parts:e;for(n in s)v.call(this._parts,n)&&(this._parts[n]=s[n])}return this.build(!t),this},m.is=function(e){var t=!1,i=!1,a=!1,o=!1,s=!1,l=!1,c=!1,u=!this._parts.urn;switch(this._parts.hostname&&(u=!1,i=r.ip4_expression.test(this._parts.hostname),a=r.ip6_expression.test(this._parts.hostname),t=i||a,o=!t,s=o&&n&&n.has(this._parts.hostname),l=o&&r.idn_expression.test(this._parts.hostname),c=o&&r.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return u;case"absolute":return!u;case"domain":case"name":return o;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return a;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var x=m.protocol,k=m.port,C=m.hostname;m.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(r.protocol_expression)))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return x.call(this,e,t)},m.scheme=m.protocol,m.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError('Port "'+e+'" contains characters other than [0-9]');return k.call(this,e,t)},m.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var n={};r.parseHost(e,n),e=n.hostname}return C.call(this,e,t)},m.host=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?r.buildHost(this._parts):"":(r.parseHost(e,this._parts),this.build(!t),this)},m.authority=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?r.buildAuthority(this._parts):"":(r.parseAuthority(e,this._parts),this.build(!t),this)},m.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.username)return"";var n=r.buildUserinfo(this._parts);return n.substring(0,n.length-1)}return"@"!==e[e.length-1]&&(e+="@"),r.parseUserinfo(e,this._parts),this.build(!t),this},m.resource=function(e,t){var n;return void 0===e?this.path()+this.search()+this.hash():(n=r.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},m.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var i=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,i),s=new RegExp("^"+a(o));return e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&r.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(s,e),this.build(!t),this},m.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var i=this._parts.hostname.length-this.tld(t).length-1;return i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||""}if(!e)throw new TypeError("cannot set domain empty");if(r.ensureValidHostname(e),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var o=new RegExp(a(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,e)}return this.build(!t),this},m.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),r=this._parts.hostname.substring(i+1);return t!==!0&&n&&n.list[r.toLowerCase()]?n.get(this._parts.hostname)||r:r}var o;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');o=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");o=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,e)}return this.build(!t),this},m.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?r.decodePath(i):i}var o=this._parts.path.length-this.filename().length,s=this._parts.path.substring(0,o),l=new RegExp("^"+a(s));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=r.recodePath(e),this._parts.path=this._parts.path.replace(l,e),this.build(!t),this},m.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(n+1);return e?r.decodePathSegment(i):i}var o=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(o=!0);var s=new RegExp(a(this.filename())+"$");return e=r.recodePath(e),this._parts.path=this._parts.path.replace(s,e),o?this.normalizePath(t):this.build(!t),this},m.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n,i,o=this.filename(),s=o.lastIndexOf(".");return-1===s?"":(n=o.substring(s+1),i=/^[a-z0-9%]+$/i.test(n)?n:"",e?r.decodePathSegment(i):i)}"."===e.charAt(0)&&(e=e.substring(1));var l,c=this.suffix();if(c)l=new RegExp(e?a(c)+"$":a("."+c)+"$");else{if(!e)return this;this._parts.path+="."+r.recodePath(e)}return l&&(e=r.recodePath(e),this._parts.path=this._parts.path.replace(l,e)),this.build(!t),this},m.segment=function(e,t,n){var i=this._parts.urn?":":"/",r=this.path(),a="/"===r.substring(0,1),o=r.split(i);if(void 0!==e&&"number"!=typeof e&&(n=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(a&&o.shift(),0>e&&(e=Math.max(o.length+e,0)),void 0===t)return void 0===e?o:o[e];if(null===e||void 0===o[e])if(s(t)){o=[];for(var l=0,c=t.length;c>l;l++)(t[l].length||o.length&&o[o.length-1].length)&&(o.length&&!o[o.length-1].length&&o.pop(),o.push(t[l]))}else(t||"string"==typeof t)&&(""===o[o.length-1]?o[o.length-1]=t:o.push(t));else t?o[e]=t:o.splice(e,1);return a&&o.unshift(""),this.path(o.join(i),n)},m.segmentCoded=function(e,t,n){var i,a,o;if("number"!=typeof e&&(n=t,t=e,e=void 0),void 0===t){if(i=this.segment(e,t,n),s(i))for(a=0,o=i.length;o>a;a++)i[a]=r.decode(i[a]);else i=void 0!==i?r.decode(i):void 0;return i}if(s(t))for(a=0,o=t.length;o>a;a++)t[a]=r.decode(t[a]);else t="string"==typeof t||t instanceof String?r.encode(t):t;return this.segment(e,t,n)};var S=m.query;return m.query=function(e,t){if(e===!0)return r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var n=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=e.call(this,n);return this._parts.query=r.buildQuery(i||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=r.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):S.call(this,e,t)},m.setQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)i[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var a in e)v.call(e,a)&&(i[a]=e[a])}return this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},m.addQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.addQuery(i,e,void 0===t?null:t),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},m.removeQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.removeQuery(i,e,t),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},m.hasQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.hasQuery(i,e,t,n)},m.setSearch=m.setQuery,m.addSearch=m.addQuery,m.removeSearch=m.removeQuery,m.hasSearch=m.hasQuery,m.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},m.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},m.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},m.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===r.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},m.normalizePath=function(e){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var t,n,i,a=this._parts.path,o="";for("/"!==a.charAt(0)&&(t=!0,a="/"+a),a=a.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(o=a.substring(1).match(/^(\.\.\/)+/)||"",o&&(o=o[0]));;){if(n=a.indexOf("/.."),-1===n)break;0!==n?(i=a.substring(0,n).lastIndexOf("/"),-1===i&&(i=n),a=a.substring(0,i)+a.substring(n+3)):a=a.substring(3)}return t&&this.is("relative")&&(a=o+a.substring(1)),a=r.recodePath(a),this._parts.path=a,this.build(!e),this},m.normalizePathname=m.normalizePath,m.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(r.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},m.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},m.normalizeSearch=m.normalizeQuery,m.normalizeHash=m.normalizeFragment,m.iso8859=function(){var e=r.encode,t=r.decode;return r.encode=escape,r.decode=decodeURIComponent,this.normalize(),r.encode=e,r.decode=t,this},m.unicode=function(){var e=r.encode,t=r.decode;return r.encode=p,r.decode=unescape,this.normalize(),r.encode=e,r.decode=t,this},m.readable=function(){var t=this.clone();t.username("").password("").normalize();var n="";if(t._parts.protocol&&(n+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(n+=e.toUnicode(t._parts.hostname),t._parts.port&&(n+=":"+t._parts.port)):n+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(n+="/"),n+=t.path(!0),t._parts.query){for(var i="",a=0,o=t._parts.query.split("&"),s=o.length;s>a;a++){var l=(o[a]||"").split("=");i+="&"+r.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==l[1]&&(i+="="+r.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+i.substring(1)}return n+=r.decodeQuery(t.hash(),!0)},m.absoluteTo=function(e){var t,n,i,a=this.clone(),o=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof r||(e=new r(e)),a._parts.protocol||(a._parts.protocol=e._parts.protocol),this._parts.hostname)return a;for(n=0;i=o[n];n++)a._parts[i]=e._parts[i];return a._parts.path?".."===a._parts.path.substring(-2)&&(a._parts.path+="/"):(a._parts.path=e._parts.path,a._parts.query||(a._parts.query=e._parts.query)),"/"!==a.path().charAt(0)&&(t=e.directory(),a._parts.path=(t?t+"/":"")+a._parts.path,a.normalizePath()),a.build(),a},m.relativeTo=function(e){var t,n,i,a,o,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new r(e).normalize(),t=s._parts,n=e._parts,a=s.path(),o=e.path(),"/"!==a.charAt(0))throw new Error("URI is already relative");if("/"!==o.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===n.protocol&&(t.protocol=null),t.username!==n.username||t.password!==n.password)return s.build();if(null!==t.protocol||null!==t.username||null!==t.password)return s.build();if(t.hostname!==n.hostname||t.port!==n.port)return s.build();if(t.hostname=null,t.port=null,a===o)return t.path="",s.build();if(i=r.commonPath(s.path(),e.path()),!i)return s.build();var l=n.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=l+t.path.substring(i.length),s.build()},m.equals=function(e){var t,n,i,a=this.clone(),o=new r(e),l={},c={},d={};if(a.normalize(),o.normalize(),a.toString()===o.toString())return!0;if(t=a.query(),n=o.query(),a.query(""),o.query(""),a.toString()!==o.toString())return!1;if(t.length!==n.length)return!1;l=r.parseQuery(t,this._parts.escapeQuerySpace),c=r.parseQuery(n,this._parts.escapeQuerySpace);for(i in l)if(v.call(l,i)){if(s(l[i])){if(!u(l[i],c[i]))return!1}else if(l[i]!==c[i])return!1;d[i]=!0}for(i in c)if(v.call(c,i)&&!d[i])return!1;return!0},m.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},m.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},r}),function(e,t){"use strict";"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.IPv6=t(e)}(this,function(e){"use strict";function t(e){var t=e.toLowerCase(),n=t.split(":"),i=n.length,r=8;""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[i-1]&&""===n[i-2]&&n.pop(),i=n.length,-1!==n[i-1].indexOf(".")&&(r=7);var a;for(a=0;i>a&&""!==n[a];a++);if(r>a){for(n.splice(a,1,"0000");n.length<r;)n.splice(a,0,"0000");i=n.length}for(var o,s=0;r>s;s++){o=n[s].split("");for(var l=0;3>l&&("0"===o[0]&&o.length>1);l++)o.splice(0,1);n[s]=o.join("")}var c=-1,u=0,d=0,p=-1,h=!1;for(s=0;r>s;s++)h?"0"===n[s]?d+=1:(h=!1,d>u&&(c=p,u=d)):"0"===n[s]&&(h=!0,p=s,d=1);d>u&&(c=p,u=d),u>1&&n.splice(c,u,""),i=n.length;var f="";for(""===n[0]&&(f=":"),s=0;i>s&&(f+=n[s],s!==i-1);s++)f+=":";return""===n[i-1]&&(f+=":"),f}function n(){return e.IPv6===this&&(e.IPv6=i),this}var i=e&&e.IPv6;return{best:t,noConflict:n}}),function(e,t){"use strict";"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.SecondLevelDomains=t(e)}(this,function(e){"use strict";var t=e&&e.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(e){var t=e.lastIndexOf(".");if(0>=t||t>=e.length-1)return!1;var i=e.lastIndexOf(".",t-1);if(0>=i||i>=t-1)return!1;var r=n.list[e.slice(t+1)];return r?r.indexOf(" "+e.slice(i+1,t)+" ")>=0:!1},is:function(e){var t=e.lastIndexOf(".");if(0>=t||t>=e.length-1)return!1;var i=e.lastIndexOf(".",t-1);if(i>=0)return!1;var r=n.list[e.slice(t+1)];return r?r.indexOf(" "+e.slice(0,t)+" ")>=0:!1},get:function(e){var t=e.lastIndexOf(".");if(0>=t||t>=e.length-1)return null;var i=e.lastIndexOf(".",t-1);if(0>=i||i>=t-1)return null;var r=n.list[e.slice(t+1)];return r?r.indexOf(" "+e.slice(i+1,t)+" ")<0?null:e.slice(i+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return n}),function(e){function t(e){throw RangeError(P[e])}function n(e,t){for(var n=e.length;n--;)e[n]=t(e[n]);return e}function i(e,t){return n(e.split(E),t).join(".")}function r(e){for(var t,n,i=[],r=0,a=e.length;a>r;)t=e.charCodeAt(r++),t>=55296&&56319>=t&&a>r?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--)):i.push(t);return i}function a(e){return n(e,function(e){var t="";return e>65535&&(e-=65536,t+=M(e>>>10&1023|55296),e=56320|1023&e),t+=M(e)}).join("")}function o(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:b}function s(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function l(e,t,n){var i=0;for(e=n?D(e/C):e>>1,e+=D(e/t);e>I*x>>1;i+=b)e=D(e/I);return D(i+(I+1)*e/(e+k))}function c(e){var n,i,r,s,c,u,d,p,h,f,g=[],m=e.length,v=0,k=_,C=S;for(i=e.lastIndexOf(T),0>i&&(i=0),r=0;i>r;++r)e.charCodeAt(r)>=128&&t("not-basic"),g.push(e.charCodeAt(r));for(s=i>0?i+1:0;m>s;){for(c=v,u=1,d=b;s>=m&&t("invalid-input"),p=o(e.charCodeAt(s++)),(p>=b||p>D((y-v)/u))&&t("overflow"),v+=p*u,h=C>=d?w:d>=C+x?x:d-C,!(h>p);d+=b)f=b-h,u>D(y/f)&&t("overflow"),u*=f;n=g.length+1,C=l(v-c,n,0==c),D(v/n)>y-k&&t("overflow"),k+=D(v/n),v%=n,g.splice(v++,0,k)}return a(g)}function u(e){var n,i,a,o,c,u,d,p,h,f,g,m,v,k,C,$=[];for(e=r(e),m=e.length,n=_,i=0,c=S,u=0;m>u;++u)g=e[u],128>g&&$.push(M(g));for(a=o=$.length,o&&$.push(T);m>a;){for(d=y,u=0;m>u;++u)g=e[u],g>=n&&d>g&&(d=g);for(v=a+1,d-n>D((y-i)/v)&&t("overflow"),i+=(d-n)*v,n=d,u=0;m>u;++u)if(g=e[u],n>g&&++i>y&&t("overflow"),g==n){for(p=i,h=b;f=c>=h?w:h>=c+x?x:h-c,!(f>p);h+=b)C=p-f,k=b-f,$.push(M(s(f+C%k,0))),p=D(C/k);$.push(M(s(p,0))),c=l(i,v,a==o),i=0,++a}++i,++n}return $.join("")}function d(e){return i(e,function(e){return $.test(e)?c(e.slice(4).toLowerCase()):e})}function p(e){return i(e,function(e){return A.test(e)?"xn--"+u(e):e})}var h="object"==typeof exports&&exports,f="object"==typeof module&&module&&module.exports==h&&module,g="object"==typeof global&&global;(g.global===g||g.window===g)&&(e=g);var m,v,y=2147483647,b=36,w=1,x=26,k=38,C=700,S=72,_=128,T="-",$=/^xn--/,A=/[^ -~]/,E=/\x2E|\u3002|\uFF0E|\uFF61/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=b-w,D=Math.floor,M=String.fromCharCode;if(m={version:"1.2.3",ucs2:{decode:r,encode:a},decode:c,encode:u,toASCII:p,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return m});else if(h&&!h.nodeType)if(f)f.exports=m;else for(v in m)m.hasOwnProperty(v)&&(h[v]=m[v]);else e.punycode=m}(this),function(e,t){"use strict";"object"==typeof exports?module.exports=t(require("./URI")):"function"==typeof define&&define.amd?define(["./URI"],t):e.URITemplate=t(e.URI,e)}(this,function(e,t){"use strict";function n(e){return n._cache[e]?n._cache[e]:this instanceof n?(this.expression=e,n._cache[e]=this,this):new n(e)}function i(e){this.data=e,this.cache={}}var r=t&&t.URITemplate,a=Object.prototype.hasOwnProperty,o=n.prototype,s={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};return n._cache={},n.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g,n.VARIABLE_PATTERN=/^([^*:]+)((\*)|:(\d+))?$/,n.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_]/,n.expand=function(e,t){var i,r,a,o=s[e.operator],l=o.named?"Named":"Unnamed",c=e.variables,u=[];for(a=0;r=c[a];a++)i=t.get(r.name),i.val.length?u.push(n["expand"+l](i,o,r.explode,r.explode&&o.separator||",",r.maxlength,r.name)):i.type&&u.push("");return u.length?o.prefix+u.join(o.separator):""},n.expandNamed=function(t,n,i,r,a,o){var s,l,c,u="",d=n.encode,p=n.empty_name_separator,h=!t[d].length,f=2===t.type?"":e[d](o);for(l=0,c=t.val.length;c>l;l++)a?(s=e[d](t.val[l][1].substring(0,a)),2===t.type&&(f=e[d](t.val[l][0].substring(0,a)))):h?(s=e[d](t.val[l][1]),2===t.type?(f=e[d](t.val[l][0]),t[d].push([f,s])):t[d].push([void 0,s])):(s=t[d][l][1],2===t.type&&(f=t[d][l][0])),u&&(u+=r),i?u+=f+(p||s?"=":"")+s:(l||(u+=e[d](o)+(p||s?"=":"")),2===t.type&&(u+=f+","),u+=s);return u},n.expandUnnamed=function(t,n,i,r,a){var o,s,l,c,u="",d=n.encode,p=n.empty_name_separator,h=!t[d].length;for(l=0,c=t.val.length;c>l;l++)a?s=e[d](t.val[l][1].substring(0,a)):h?(s=e[d](t.val[l][1]),t[d].push([2===t.type?e[d](t.val[l][0]):void 0,s])):s=t[d][l][1],u&&(u+=r),2===t.type&&(o=a?e[d](t.val[l][0].substring(0,a)):t[d][l][0],u+=o,u+=i?p||s?"=":"":","),u+=s;return u},n.noConflict=function(){return t.URITemplate===n&&(t.URITemplate=r),n},o.expand=function(e){var t="";this.parts&&this.parts.length||this.parse(),e instanceof i||(e=new i(e));for(var r=0,a=this.parts.length;a>r;r++)t+="string"==typeof this.parts[r]?this.parts[r]:n.expand(this.parts[r],e);return t},o.parse=function(){var e,t,i,r=this.expression,a=n.EXPRESSION_PATTERN,o=n.VARIABLE_PATTERN,l=n.VARIABLE_NAME_PATTERN,c=[],u=0;for(a.lastIndex=0;;){if(t=a.exec(r),null===t){c.push(r.substring(u));break}if(c.push(r.substring(u,t.index)),u=t.index+t[0].length,
!s[t[1]])throw new Error('Unknown Operator "'+t[1]+'" in "'+t[0]+'"');if(!t[3])throw new Error('Unclosed Expression "'+t[0]+'"');e=t[2].split(",");for(var d=0,p=e.length;p>d;d++){if(i=e[d].match(o),null===i)throw new Error('Invalid Variable "'+e[d]+'" in "'+t[0]+'"');if(i[1].match(l))throw new Error('Invalid Variable Name "'+i[1]+'" in "'+t[0]+'"');e[d]={name:i[1],explode:!!i[3],maxlength:i[4]&&parseInt(i[4],10)}}if(!e.length)throw new Error('Expression Missing Variable(s) "'+t[0]+'"');c.push({expression:t[0],operator:t[1],variables:e})}return c.length||c.push(r),this.parts=c,this},i.prototype.get=function(e){var t,n,i,r=this.data,o={type:0,val:[],encode:[],encodeReserved:[]};if(void 0!==this.cache[e])return this.cache[e];if(this.cache[e]=o,i="[object Function]"===String(Object.prototype.toString.call(r))?r(e):"[object Function]"===String(Object.prototype.toString.call(r[e]))?r[e](e):r[e],void 0===i||null===i)return o;if("[object Array]"===String(Object.prototype.toString.call(i))){for(t=0,n=i.length;n>t;t++)void 0!==i[t]&&null!==i[t]&&o.val.push([void 0,String(i[t])]);o.val.length&&(o.type=3)}else if("[object Object]"===String(Object.prototype.toString.call(i))){for(t in i)a.call(i,t)&&void 0!==i[t]&&null!==i[t]&&o.val.push([t,String(i[t])]);o.val.length&&(o.type=2)}else o.type=1,o.val.push([void 0,String(i)]);return o},e.expand=function(t,i){var r=new n(t),a=r.expand(i);return new e(a)},n}),function(e,t){"use strict";"object"==typeof exports?module.exports=t(require("jquery","./URI")):"function"==typeof define&&define.amd?define(["jquery","./URI"],t):t(e.jQuery,e.URI)}(this,function(e,t){"use strict";function n(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function i(e){var n=e.nodeName.toLowerCase(),i=t.domAttributes[n];return"input"===n&&"image"!==e.type?void 0:i}function r(t){return{get:function(n){return e(n).uri()[t]()},set:function(n,i){return e(n).uri()[t](i),i}}}function a(t,n){var r,a,l;return i(t)&&n?(r=n.match(u),r&&(r[5]||":"===r[2]||s[r[2]])?(l=e(t).uri(),r[5]?l.is(r[5]):":"===r[2]?(a=r[1].toLowerCase()+":",s[a]?s[a](l,r[4]):!1):(a=r[1].toLowerCase(),o[a]?s[r[2]](l[a](),r[4],a):!1)):!1):!1}var o={},s={"=":function(e,t){return e===t},"^=":function(e,t){return!!(e+"").match(new RegExp("^"+n(t),"i"))},"$=":function(e,t){return!!(e+"").match(new RegExp(n(t)+"$","i"))},"*=":function(e,t,i){return"directory"===i&&(e+="/"),!!(e+"").match(new RegExp(n(t),"i"))},"equals:":function(e,t){return e.equals(t)},"is:":function(e,t){return e.is(t)}};e.each("authority directory domain filename fragment hash host hostname href password path pathname port protocol query resource scheme search subdomain suffix tld username".split(" "),function(t,n){o[n]=!0,e.attrHooks["uri:"+n]=r(n)});var l={get:function(t){return e(t).uri()},set:function(t,n){return e(t).uri().href(n).toString()}};e.each(["src","href","action","uri","cite"],function(t,n){e.attrHooks[n]={set:l.set}}),e.attrHooks.uri.get=l.get,e.fn.uri=function(e){var n=this.first(),r=n.get(0),a=i(r);if(!a)throw new Error('Element "'+r.nodeName+'" does not have either property: href, src, action, cite');if(void 0!==e){var o=n.data("uri");if(o)return o.href(e);e instanceof t||(e=t(e||""))}else{if(e=n.data("uri"))return e;e=t(n.attr(a)||"")}return e._dom_element=r,e._dom_attribute=a,e.normalize(),n.data("uri",e),e},t.prototype.build=function(e){return this._dom_element?(this._string=t.build(this._parts),this._deferred_build=!1,this._dom_element.setAttribute(this._dom_attribute,this._string),this._dom_element[this._dom_attribute]=this._string):e===!0?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=t.build(this._parts),this._deferred_build=!1),this};var c,u=/^([a-zA-Z]+)\s*([\^\$*]?=|:)\s*(['"]?)(.+)\3|^\s*([a-zA-Z0-9]+)\s*$/;return c=e.expr.createPseudo?e.expr.createPseudo(function(e){return function(t){return a(t,e)}}):function(e,t,n){return a(e,n[3])},e.expr[":"].uri=c,e}),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.IPv6=t(e)}(this,function(e){var t=e&&e.IPv6;return{best:function(e){e=e.toLowerCase().split(":");var t=e.length,n=8;""===e[0]&&""===e[1]&&""===e[2]?(e.shift(),e.shift()):""===e[0]&&""===e[1]?e.shift():""===e[t-1]&&""===e[t-2]&&e.pop(),t=e.length,-1!==e[t-1].indexOf(".")&&(n=7);var i;for(i=0;t>i&&""!==e[i];i++);if(n>i)for(e.splice(i,1,"0000");e.length<n;)e.splice(i,0,"0000");for(i=0;n>i;i++){for(var t=e[i].split(""),r=0;3>r&&("0"===t[0]&&1<t.length);r++)t.splice(0,1);e[i]=t.join("")}var t=-1,a=r=0,o=-1,s=!1;for(i=0;n>i;i++)s?"0"===e[i]?a+=1:(s=!1,a>r&&(t=o,r=a)):"0"===e[i]&&(s=!0,o=i,a=1);for(a>r&&(t=o,r=a),r>1&&e.splice(t,r,""),t=e.length,n="",""===e[0]&&(n=":"),i=0;t>i&&(n+=e[i],i!==t-1);i++)n+=":";return""===e[t-1]&&(n+=":"),n},noConflict:function(){return e.IPv6===this&&(e.IPv6=t),this}}}),function(e){function t(e){throw RangeError(y[e])}function n(e,t){for(var n=e.length;n--;)e[n]=t(e[n]);return e}function i(e,t){return n(e.split(v),t).join(".")}function r(e){for(var t,n,i=[],r=0,a=e.length;a>r;)t=e.charCodeAt(r++),t>=55296&&56319>=t&&a>r?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--)):i.push(t);return i}function a(e){return n(e,function(e){var t="";return e>65535&&(e-=65536,t+=w(e>>>10&1023|55296),e=56320|1023&e),t+=w(e)}).join("")}function o(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function s(e,t,n){var i=0;for(e=n?b(e/700):e>>1,e+=b(e/t);e>455;i+=36)e=b(e/35);return b(i+36*e/(e+38))}function l(e){var n,i,r,o,l,c,u=[],d=e.length,p=0,h=128,f=72;for(i=e.lastIndexOf("-"),0>i&&(i=0),r=0;i>r;++r)128<=e.charCodeAt(r)&&t("not-basic"),u.push(e.charCodeAt(r));for(i=i>0?i+1:0;d>i;){for(r=p,n=1,o=36;i>=d&&t("invalid-input"),l=e.charCodeAt(i++),l=10>l-48?l-22:26>l-65?l-65:26>l-97?l-97:36,(l>=36||l>b((2147483647-p)/n))&&t("overflow"),p+=l*n,c=f>=o?1:o>=f+26?26:o-f,!(c>l);o+=36)l=36-c,n>b(2147483647/l)&&t("overflow"),n*=l;n=u.length+1,f=s(p-r,n,0==r),b(p/n)>2147483647-h&&t("overflow"),h+=b(p/n),p%=n,u.splice(p++,0,h)}return a(u)}function c(e){var n,i,a,l,c,u,d,p,h,f,g,m,v=[];for(e=r(e),f=e.length,n=128,i=0,c=72,u=0;f>u;++u)h=e[u],128>h&&v.push(w(h));for((a=l=v.length)&&v.push("-");f>a;){for(d=2147483647,u=0;f>u;++u)h=e[u],h>=n&&d>h&&(d=h);for(g=a+1,d-n>b((2147483647-i)/g)&&t("overflow"),i+=(d-n)*g,n=d,u=0;f>u;++u)if(h=e[u],n>h&&2147483647<++i&&t("overflow"),h==n){for(p=i,d=36;h=c>=d?1:d>=c+26?26:d-c,!(h>p);d+=36)m=p-h,p=36-h,v.push(w(o(h+m%p,0))),p=b(m/p);v.push(w(o(p,0))),c=s(i,g,a==l),i=0,++a}++i,++n}return v.join("")}var u="object"==typeof exports&&exports,d="object"==typeof module&&module&&module.exports==u&&module,p="object"==typeof global&&global;(p.global===p||p.window===p)&&(e=p);var h,f,g=/^xn--/,m=/[^ -~]/,v=/\x2E|\u3002|\uFF0E|\uFF61/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=Math.floor,w=String.fromCharCode;if(h={version:"1.2.3",ucs2:{decode:r,encode:a},decode:l,encode:c,toASCII:function(e){return i(e,function(e){return m.test(e)?"xn--"+c(e):e})},toUnicode:function(e){return i(e,function(e){return g.test(e)?l(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return h});else if(u&&!u.nodeType)if(d)d.exports=h;else for(f in h)h.hasOwnProperty(f)&&(u[f]=h[f]);else e.punycode=h}(this),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.SecondLevelDomains=t(e)}(this,function(e){var t=e&&e.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(e){var t=e.lastIndexOf(".");if(0>=t||t>=e.length-1)return!1;var i=e.lastIndexOf(".",t-1);if(0>=i||i>=t-1)return!1;var r=n.list[e.slice(t+1)];return r?0<=r.indexOf(" "+e.slice(i+1,t)+" "):!1},is:function(e){var t=e.lastIndexOf(".");if(0>=t||t>=e.length-1||0<=e.lastIndexOf(".",t-1))return!1;var i=n.list[e.slice(t+1)];return i?0<=i.indexOf(" "+e.slice(0,t)+" "):!1},get:function(e){var t=e.lastIndexOf(".");if(0>=t||t>=e.length-1)return null;var i=e.lastIndexOf(".",t-1);if(0>=i||i>=t-1)return null;var r=n.list[e.slice(t+1)];return!r||0>r.indexOf(" "+e.slice(i+1,t)+" ")?null:e.slice(i+1)},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return n}),function(e,t){"object"==typeof exports?module.exports=t(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],t):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)}(this,function(e,t,n,i){function r(e,t){return this instanceof r?(void 0===e&&(e="undefined"!=typeof location?location.href+"":""),this.href(e),void 0!==t?this.absoluteTo(t):this):new r(e,t)}function a(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function o(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function s(e){return"Array"===o(e)}function l(e,t){var n,i;if(s(t)){for(n=0,i=t.length;i>n;n++)if(!l(e,t[n]))return!1;return!0}var r=o(t);for(n=0,i=e.length;i>n;n++)if("RegExp"===r){if("string"==typeof e[n]&&e[n].match(t))return!0}else if(e[n]===t)return!0;return!1}function c(e,t){if(!s(e)||!s(t)||e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,i=e.length;i>n;n++)if(e[n]!==t[n])return!1;return!0}function u(e){return escape(e)}function d(e){return encodeURIComponent(e).replace(/[!'()*]/g,u).replace(/\*/g,"%2A")}function p(e){return function(t,n){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!n),this)}}function h(e,t){return function(n,i){return void 0===n?this._parts[e]||"":(null!==n&&(n+="",n.charAt(0)===t&&(n=n.substring(1))),this._parts[e]=n,this.build(!i),this)}}var f=i&&i.URI;r.version="1.14.2";var g=r.prototype,m=Object.prototype.hasOwnProperty;r._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:r.duplicateQueryParameters,escapeQuerySpace:r.escapeQuerySpace}},r.duplicateQueryParameters=!1,r.escapeQuerySpace=!0,r.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,r.idn_expression=/[^a-z0-9\.-]/i,r.punycode_expression=/(xn--)/i,r.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/gi,r.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/},r.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},r.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,r.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},r.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();return"input"===t&&"image"!==e.type?void 0:r.domAttributes[t]}},r.encode=d,r.decode=decodeURIComponent,r.iso8859=function(){r.encode=escape,r.decode=unescape},r.unicode=function(){r.encode=d,r.decode=decodeURIComponent},r.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},r.encodeQuery=function(e,t){var n=r.encode(e+"");return void 0===t&&(t=r.escapeQuerySpace),t?n.replace(/%20/g,"+"):n},r.decodeQuery=function(e,t){e+="",void 0===t&&(t=r.escapeQuerySpace);try{return r.decode(t?e.replace(/\+/g,"%20"):e)}catch(n){return e}},r.recodePath=function(e){e=(e+"").split("/");for(var t=0,n=e.length;n>t;t++)e[t]=r.encodePathSegment(r.decode(e[t]));return e.join("/")},r.decodePath=function(e){e=(e+"").split("/");for(var t=0,n=e.length;n>t;t++)e[t]=r.decodePathSegment(e[t]);return e.join("/")};var v,y={encode:"encode",decode:"decode"},b=function(e,t){return function(n){try{return r[t](n+"").replace(r.characters[e][t].expression,function(n){return r.characters[e][t].map[n]})}catch(i){return n}}};for(v in y)r[v+"PathSegment"]=b("pathname",y[v]);r.encodeReserved=b("reserved","encode"),r.parse=function(e,t){var n;return t||(t={}),n=e.indexOf("#"),n>-1&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),n=e.indexOf("?"),n>-1&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=r.parseAuthority(e,t)):(n=e.indexOf(":"),n>-1&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(r.protocol_expression)?t.protocol=void 0:"//"===e.substring(n+1,n+3)?(e=e.substring(n+3),e=r.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0))),t.path=e,t},r.parseHost=function(e,t){var n,i=e.indexOf("/");if(-1===i&&(i=e.length),"["===e.charAt(0))n=e.indexOf("]"),t.hostname=e.substring(1,n)||null,t.port=e.substring(n+2,i)||null,"/"===t.port&&(t.port=null);else{var r=e.indexOf(":");n=e.indexOf("/"),r=e.indexOf(":",r+1),-1!==r&&(-1===n||n>r)?(t.hostname=e.substring(0,i)||null,t.port=null):(n=e.substring(0,i).split(":"),t.hostname=n[0]||null,t.port=n[1]||null)}return t.hostname&&"/"!==e.substring(i).charAt(0)&&(i++,e="/"+e),e.substring(i)||"/"},r.parseAuthority=function(e,t){return e=r.parseUserinfo(e,t),r.parseHost(e,t)},r.parseUserinfo=function(e,t){var n=e.indexOf("/"),i=e.lastIndexOf("@",n>-1?n:e.length-1);return i>-1&&(-1===n||n>i)?(n=e.substring(0,i).split(":"),t.username=n[0]?r.decode(n[0]):null,n.shift(),t.password=n[0]?r.decode(n.join(":")):null,e=e.substring(i+1)):(t.username=null,t.password=null),e},r.parseQuery=function(e,t){if(!e)return{};if(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!e)return{};for(var n,i,a={},o=e.split("&"),s=o.length,l=0;s>l;l++)n=o[l].split("="),i=r.decodeQuery(n.shift(),t),n=n.length?r.decodeQuery(n.join("="),t):null,m.call(a,i)?("string"==typeof a[i]&&(a[i]=[a[i]]),a[i].push(n)):a[i]=n;return a},r.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=r.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},r.buildHost=function(e){var t="";return e.hostname?(t=r.ip6_expression.test(e.hostname)?t+("["+e.hostname+"]"):t+e.hostname,e.port&&(t+=":"+e.port),t):""},r.buildAuthority=function(e){return r.buildUserinfo(e)+r.buildHost(e)},r.buildUserinfo=function(e){var t="";return e.username&&(t+=r.encode(e.username),e.password&&(t+=":"+r.encode(e.password)),t+="@"),t},r.buildQuery=function(e,t,n){var i,a,o,l,c="";for(a in e)if(m.call(e,a)&&a)if(s(e[a]))for(i={},o=0,l=e[a].length;l>o;o++)void 0!==e[a][o]&&void 0===i[e[a][o]+""]&&(c+="&"+r.buildQueryParameter(a,e[a][o],n),!0!==t&&(i[e[a][o]+""]=!0));else void 0!==e[a]&&(c+="&"+r.buildQueryParameter(a,e[a],n));return c.substring(1)},r.buildQueryParameter=function(e,t,n){return r.encodeQuery(e,n)+(null!==t?"="+r.encodeQuery(t,n):"")},r.addQuery=function(e,t,n){if("object"==typeof t)for(var i in t)m.call(t,i)&&r.addQuery(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");void 0===e[t]?e[t]=n:("string"==typeof e[t]&&(e[t]=[e[t]]),s(n)||(n=[n]),e[t]=(e[t]||[]).concat(n))}},r.removeQuery=function(e,t,n){var i;if(s(t))for(n=0,i=t.length;i>n;n++)e[t[n]]=void 0;else if("object"==typeof t)for(i in t)m.call(t,i)&&r.removeQuery(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");if(void 0!==n){if(e[t]===n)e[t]=void 0;else if(s(e[t])){i=e[t];var a,o,l={};if(s(n))for(a=0,o=n.length;o>a;a++)l[n[a]]=!0;else l[n]=!0;for(a=0,o=i.length;o>a;a++)void 0!==l[i[a]]&&(i.splice(a,1),o--,a--);e[t]=i}}else e[t]=void 0}},r.hasQuery=function(e,t,n,i){if("object"==typeof t){for(var a in t)if(m.call(t,a)&&!r.hasQuery(e,a,t[a]))return!1;return!0}if("string"!=typeof t)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(o(n)){case"Undefined":return t in e;case"Boolean":return e=Boolean(s(e[t])?e[t].length:e[t]),n===e;case"Function":return!!n(e[t],t,e);case"Array":return s(e[t])?(i?l:c)(e[t],n):!1;case"RegExp":return s(e[t])?i?l(e[t],n):!1:Boolean(e[t]&&e[t].match(n));case"Number":n=String(n);case"String":return s(e[t])?i?l(e[t],n):!1:e[t]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.commonPath=function(e,t){var n,i=Math.min(e.length,t.length);for(n=0;i>n;n++)if(e.charAt(n)!==t.charAt(n)){n--;break}return 1>n?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":(("/"!==e.charAt(n)||"/"!==t.charAt(n))&&(n=e.substring(0,n).lastIndexOf("/")),e.substring(0,n+1))},r.withinString=function(e,t,n){n||(n={});var i=n.start||r.findUri.start,a=n.end||r.findUri.end,o=n.trim||r.findUri.trim,s=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var l=i.exec(e);if(!l)break;if(l=l.index,n.ignoreHtml){var c=e.slice(Math.max(l-3,0),l);if(c&&s.test(c))continue}var c=l+e.slice(l).search(a),u=e.slice(l,c).replace(o,"");n.ignore&&n.ignore.test(u)||(c=l+u.length,u=t(u,l,c,e),e=e.slice(0,l)+u+e.slice(c),i.lastIndex=l+u.length)}return i.lastIndex=0,e},r.ensureValidHostname=function(t){if(t.match(r.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(e.toASCII(t).match(r.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]')}},r.noConflict=function(e){return e?(e={URI:this.noConflict()},i.URITemplate&&"function"==typeof i.URITemplate.noConflict&&(e.URITemplate=i.URITemplate.noConflict()),i.IPv6&&"function"==typeof i.IPv6.noConflict&&(e.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&"function"==typeof i.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=i.SecondLevelDomains.noConflict()),e):(i.URI===this&&(i.URI=f),this)},g.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=r.build(this._parts),this._deferred_build=!1),this},g.clone=function(){return new r(this)},g.valueOf=g.toString=function(){return this.build(!1)._string},g.protocol=p("protocol"),g.username=p("username"),g.password=p("password"),g.hostname=p("hostname"),g.port=p("port"),g.query=h("query","?"),g.fragment=h("fragment","#"),g.search=function(e,t){var n=this.query(e,t);return"string"==typeof n&&n.length?"?"+n:n},g.hash=function(e,t){var n=this.fragment(e,t);return"string"==typeof n&&n.length?"#"+n:n},g.pathname=function(e,t){if(void 0===e||!0===e){var n=this._parts.path||(this._parts.hostname?"/":"");return e?r.decodePath(n):n}return this._parts.path=e?r.recodePath(e):"/",this.build(!t),this},g.path=g.pathname,g.href=function(e,t){var n;if(void 0===e)return this.toString();this._string="",this._parts=r._parts();var i=e instanceof r,a="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName&&(a=r.getDomAttribute(e),e=e[a]||"",a=!1),!i&&a&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=r.parse(String(e),this._parts);else{if(!i&&!a)throw new TypeError("invalid input");for(n in i=i?e._parts:e)m.call(this._parts,n)&&(this._parts[n]=i[n])}return this.build(!t),this},g.is=function(e){var t=!1,i=!1,a=!1,o=!1,s=!1,l=!1,c=!1,u=!this._parts.urn;switch(this._parts.hostname&&(u=!1,i=r.ip4_expression.test(this._parts.hostname),a=r.ip6_expression.test(this._parts.hostname),t=i||a,s=(o=!t)&&n&&n.has(this._parts.hostname),l=o&&r.idn_expression.test(this._parts.hostname),c=o&&r.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return u;case"absolute":return!u;case"domain":case"name":return o;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return a;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var w=g.protocol,x=g.port,k=g.hostname;g.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(r.protocol_expression)))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return w.call(this,e,t)},g.scheme=g.protocol,g.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError('Port "'+e+'" contains characters other than [0-9]');return x.call(this,e,t)},g.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var n={};r.parseHost(e,n),e=n.hostname}return k.call(this,e,t)},g.host=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?r.buildHost(this._parts):"":(r.parseHost(e,this._parts),this.build(!t),this)},g.authority=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?r.buildAuthority(this._parts):"":(r.parseAuthority(e,this._parts),this.build(!t),this)},g.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.username)return"";var n=r.buildUserinfo(this._parts);return n.substring(0,n.length-1)}return"@"!==e[e.length-1]&&(e+="@"),r.parseUserinfo(e,this._parts),this.build(!t),this},g.resource=function(e,t){var n;return void 0===e?this.path()+this.search()+this.hash():(n=r.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},g.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}return n=this._parts.hostname.length-this.domain().length,n=this._parts.hostname.substring(0,n),n=new RegExp("^"+a(n)),e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&r.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(n,e),this.build(!t),this},g.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);return n&&2>n.length?this._parts.hostname:(n=this._parts.hostname.length-this.tld(t).length-1,n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||"")}if(!e)throw new TypeError("cannot set domain empty");return r.ensureValidHostname(e),!this._parts.hostname||this.is("IP")?this._parts.hostname=e:(n=new RegExp(a(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(n,e)),this.build(!t),this},g.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),i=this._parts.hostname.substring(i+1);return!0!==t&&n&&n.list[i.toLowerCase()]?n.get(this._parts.hostname)||i:i}if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');

i=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");i=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,e)}return this.build(!t),this},g.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?r.decodePath(n):n}return n=this._parts.path.length-this.filename().length,n=this._parts.path.substring(0,n),n=new RegExp("^"+a(n)),this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=r.recodePath(e),this._parts.path=this._parts.path.replace(n,e),this.build(!t),this},g.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(n+1);return e?r.decodePathSegment(n):n}n=!1,"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(n=!0);var i=new RegExp(a(this.filename())+"$");return e=r.recodePath(e),this._parts.path=this._parts.path.replace(i,e),n?this.normalizePath(t):this.build(!t),this},g.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var n=this.filename(),i=n.lastIndexOf(".");return-1===i?"":(n=n.substring(i+1),n=/^[a-z0-9%]+$/i.test(n)?n:"",e?r.decodePathSegment(n):n)}if("."===e.charAt(0)&&(e=e.substring(1)),n=this.suffix())i=new RegExp(e?a(n)+"$":a("."+n)+"$");else{if(!e)return this;this._parts.path+="."+r.recodePath(e)}return i&&(e=r.recodePath(e),this._parts.path=this._parts.path.replace(i,e)),this.build(!t),this},g.segment=function(e,t,n){var i=this._parts.urn?":":"/",r=this.path(),a="/"===r.substring(0,1),r=r.split(i);if(void 0!==e&&"number"!=typeof e&&(n=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw Error('Bad segment "'+e+'", must be 0-based integer');if(a&&r.shift(),0>e&&(e=Math.max(r.length+e,0)),void 0===t)return void 0===e?r:r[e];if(null===e||void 0===r[e])if(s(t)){r=[],e=0;for(var o=t.length;o>e;e++)(t[e].length||r.length&&r[r.length-1].length)&&(r.length&&!r[r.length-1].length&&r.pop(),r.push(t[e]))}else(t||"string"==typeof t)&&(""===r[r.length-1]?r[r.length-1]=t:r.push(t));else t?r[e]=t:r.splice(e,1);return a&&r.unshift(""),this.path(r.join(i),n)},g.segmentCoded=function(e,t,n){var i,a;if("number"!=typeof e&&(n=t,t=e,e=void 0),void 0===t){if(e=this.segment(e,t,n),s(e))for(i=0,a=e.length;a>i;i++)e[i]=r.decode(e[i]);else e=void 0!==e?r.decode(e):void 0;return e}if(s(t))for(i=0,a=t.length;a>i;i++)t[i]=r.decode(t[i]);else t="string"==typeof t||t instanceof String?r.encode(t):t;return this.segment(e,t,n)};var C=g.query;return g.query=function(e,t){if(!0===e)return r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var n=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=e.call(this,n);return this._parts.query=r.buildQuery(i||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=r.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):C.call(this,e,t)},g.setQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)i[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var a in e)m.call(e,a)&&(i[a]=e[a])}return this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},g.addQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.addQuery(i,e,void 0===t?null:t),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},g.removeQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.removeQuery(i,e,t),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},g.hasQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.hasQuery(i,e,t,n)},g.setSearch=g.setQuery,g.addSearch=g.addQuery,g.removeSearch=g.removeQuery,g.hasSearch=g.hasQuery,g.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},g.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},g.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},g.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===r.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},g.normalizePath=function(e){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var t,n,i,a=this._parts.path,o="";for("/"!==a.charAt(0)&&(t=!0,a="/"+a),a=a.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(o=a.substring(1).match(/^(\.\.\/)+/)||"")&&(o=o[0]);n=a.indexOf("/.."),-1!==n;)0!==n?(i=a.substring(0,n).lastIndexOf("/"),-1===i&&(i=n),a=a.substring(0,i)+a.substring(n+3)):a=a.substring(3);return t&&this.is("relative")&&(a=o+a.substring(1)),a=r.recodePath(a),this._parts.path=a,this.build(!e),this},g.normalizePathname=g.normalizePath,g.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(r.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},g.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},g.normalizeSearch=g.normalizeQuery,g.normalizeHash=g.normalizeFragment,g.iso8859=function(){var e=r.encode,t=r.decode;return r.encode=escape,r.decode=decodeURIComponent,this.normalize(),r.encode=e,r.decode=t,this},g.unicode=function(){var e=r.encode,t=r.decode;return r.encode=d,r.decode=unescape,this.normalize(),r.encode=e,r.decode=t,this},g.readable=function(){var t=this.clone();t.username("").password("").normalize();var n="";if(t._parts.protocol&&(n+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(n+=e.toUnicode(t._parts.hostname),t._parts.port&&(n+=":"+t._parts.port)):n+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(n+="/"),n+=t.path(!0),t._parts.query){for(var i="",a=0,o=t._parts.query.split("&"),s=o.length;s>a;a++){var l=(o[a]||"").split("="),i=i+("&"+r.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==l[1]&&(i+="="+r.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+i.substring(1)}return n+=r.decodeQuery(t.hash(),!0)},g.absoluteTo=function(e){var t,n,i=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(e instanceof r||(e=new r(e)),i._parts.protocol||(i._parts.protocol=e._parts.protocol),this._parts.hostname)return i;for(t=0;n=a[t];t++)i._parts[n]=e._parts[n];return i._parts.path?".."===i._parts.path.substring(-2)&&(i._parts.path+="/"):(i._parts.path=e._parts.path,i._parts.query||(i._parts.query=e._parts.query)),"/"!==i.path().charAt(0)&&(e=e.directory(),i._parts.path=(e?e+"/":"")+i._parts.path,i.normalizePath()),i.build(),i},g.relativeTo=function(e){var t,n,i,a,o=this.clone().normalize();if(o._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(e=new r(e).normalize(),t=o._parts,n=e._parts,i=o.path(),a=e.path(),"/"!==i.charAt(0))throw Error("URI is already relative");if("/"!==a.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");return t.protocol===n.protocol&&(t.protocol=null),t.username!==n.username||t.password!==n.password||null!==t.protocol||null!==t.username||null!==t.password||t.hostname!==n.hostname||t.port!==n.port?o.build():(t.hostname=null,t.port=null,i===a?(t.path="",o.build()):(e=r.commonPath(o.path(),e.path()))?(n=n.path.substring(e.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../"),t.path=n+t.path.substring(e.length),o.build()):o.build())},g.equals=function(e){var t=this.clone();e=new r(e);var n,i={},a={},o={};if(t.normalize(),e.normalize(),t.toString()===e.toString())return!0;if(i=t.query(),a=e.query(),t.query(""),e.query(""),t.toString()!==e.toString()||i.length!==a.length)return!1;i=r.parseQuery(i,this._parts.escapeQuerySpace),a=r.parseQuery(a,this._parts.escapeQuerySpace);for(n in i)if(m.call(i,n)){if(s(i[n])){if(!c(i[n],a[n]))return!1}else if(i[n]!==a[n])return!1;o[n]=!0}for(n in a)if(m.call(a,n)&&!o[n])return!1;return!0},g.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},g.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},r}),function(e,t){"object"==typeof exports?module.exports=t(require("./URI")):"function"==typeof define&&define.amd?define(["./URI"],t):e.URITemplate=t(e.URI,e)}(this,function(e,t){function n(e){return n._cache[e]?n._cache[e]:this instanceof n?(this.expression=e,n._cache[e]=this,this):new n(e)}function i(e){this.data=e,this.cache={}}var r=t&&t.URITemplate,a=Object.prototype.hasOwnProperty,o=n.prototype,s={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};return n._cache={},n.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g,n.VARIABLE_PATTERN=/^([^*:]+)((\*)|:(\d+))?$/,n.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_]/,n.expand=function(e,t){var i,r,a,o=s[e.operator],l=o.named?"Named":"Unnamed",c=e.variables,u=[];for(a=0;r=c[a];a++)i=t.get(r.name),i.val.length?u.push(n["expand"+l](i,o,r.explode,r.explode&&o.separator||",",r.maxlength,r.name)):i.type&&u.push("");return u.length?o.prefix+u.join(o.separator):""},n.expandNamed=function(t,n,i,r,a,o){var s="",l=n.encode;n=n.empty_name_separator;var c,u,d,p=!t[l].length,h=2===t.type?"":e[l](o);for(u=0,d=t.val.length;d>u;u++)a?(c=e[l](t.val[u][1].substring(0,a)),2===t.type&&(h=e[l](t.val[u][0].substring(0,a)))):p?(c=e[l](t.val[u][1]),2===t.type?(h=e[l](t.val[u][0]),t[l].push([h,c])):t[l].push([void 0,c])):(c=t[l][u][1],2===t.type&&(h=t[l][u][0])),s&&(s+=r),i?s+=h+(n||c?"=":"")+c:(u||(s+=e[l](o)+(n||c?"=":"")),2===t.type&&(s+=h+","),s+=c);return s},n.expandUnnamed=function(t,n,i,r,a){var o="",s=n.encode;n=n.empty_name_separator;var l,c,u,d,p=!t[s].length;for(u=0,d=t.val.length;d>u;u++)a?c=e[s](t.val[u][1].substring(0,a)):p?(c=e[s](t.val[u][1]),t[s].push([2===t.type?e[s](t.val[u][0]):void 0,c])):c=t[s][u][1],o&&(o+=r),2===t.type&&(l=a?e[s](t.val[u][0].substring(0,a)):t[s][u][0],o+=l,o=i?o+(n||c?"=":""):o+","),o+=c;return o},n.noConflict=function(){return t.URITemplate===n&&(t.URITemplate=r),n},o.expand=function(e){var t="";this.parts&&this.parts.length||this.parse(),e instanceof i||(e=new i(e));for(var r=0,a=this.parts.length;a>r;r++)t+="string"==typeof this.parts[r]?this.parts[r]:n.expand(this.parts[r],e);return t},o.parse=function(){var e,t,i,r=this.expression,a=n.EXPRESSION_PATTERN,o=n.VARIABLE_PATTERN,l=n.VARIABLE_NAME_PATTERN,c=[],u=0;for(a.lastIndex=0;;){if(t=a.exec(r),null===t){c.push(r.substring(u));break}if(c.push(r.substring(u,t.index)),u=t.index+t[0].length,!s[t[1]])throw Error('Unknown Operator "'+t[1]+'" in "'+t[0]+'"');if(!t[3])throw Error('Unclosed Expression "'+t[0]+'"');e=t[2].split(",");for(var d=0,p=e.length;p>d;d++){if(i=e[d].match(o),null===i)throw Error('Invalid Variable "'+e[d]+'" in "'+t[0]+'"');if(i[1].match(l))throw Error('Invalid Variable Name "'+i[1]+'" in "'+t[0]+'"');e[d]={name:i[1],explode:!!i[3],maxlength:i[4]&&parseInt(i[4],10)}}if(!e.length)throw Error('Expression Missing Variable(s) "'+t[0]+'"');c.push({expression:t[0],operator:t[1],variables:e})}return c.length||c.push(r),this.parts=c,this},i.prototype.get=function(e){var t,n=this.data,i={type:0,val:[],encode:[],encodeReserved:[]};if(void 0!==this.cache[e])return this.cache[e];if(this.cache[e]=i,n="[object Function]"===String(Object.prototype.toString.call(n))?n(e):"[object Function]"===String(Object.prototype.toString.call(n[e]))?n[e](e):n[e],void 0!==n&&null!==n)if("[object Array]"===String(Object.prototype.toString.call(n))){for(t=0,e=n.length;e>t;t++)void 0!==n[t]&&null!==n[t]&&i.val.push([void 0,String(n[t])]);i.val.length&&(i.type=3)}else if("[object Object]"===String(Object.prototype.toString.call(n))){for(t in n)a.call(n,t)&&void 0!==n[t]&&null!==n[t]&&i.val.push([t,String(n[t])]);i.val.length&&(i.type=2)}else i.type=1,i.val.push([void 0,String(n)]);return i},e.expand=function(t,i){var r=new n(t).expand(i);return new e(r)},n}),function(e,t){"object"==typeof exports?module.exports=t(require("jquery","./URI")):"function"==typeof define&&define.amd?define(["jquery","./URI"],t):t(e.jQuery,e.URI)}(this,function(e,t){function n(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function i(e){var n=e.nodeName.toLowerCase();return"input"===n&&"image"!==e.type?void 0:t.domAttributes[n]}function r(t){return{get:function(n){return e(n).uri()[t]()},set:function(n,i){return e(n).uri()[t](i),i}}}function a(t,n){var r,a,l;return i(t)&&n?(r=n.match(u),r&&(r[5]||":"===r[2]||s[r[2]])?(l=e(t).uri(),r[5]?l.is(r[5]):":"===r[2]?(a=r[1].toLowerCase()+":",s[a]?s[a](l,r[4]):!1):(a=r[1].toLowerCase(),o[a]?s[r[2]](l[a](),r[4],a):!1)):!1):!1}var o={},s={"=":function(e,t){return e===t},"^=":function(e,t){return!!(e+"").match(new RegExp("^"+n(t),"i"))},"$=":function(e,t){return!!(e+"").match(new RegExp(n(t)+"$","i"))},"*=":function(e,t,i){return"directory"===i&&(e+="/"),!!(e+"").match(new RegExp(n(t),"i"))},"equals:":function(e,t){return e.equals(t)},"is:":function(e,t){return e.is(t)}};e.each("authority directory domain filename fragment hash host hostname href password path pathname port protocol query resource scheme search subdomain suffix tld username".split(" "),function(t,n){o[n]=!0,e.attrHooks["uri:"+n]=r(n)});var l=function(t,n){return e(t).uri().href(n).toString()};e.each(["src","href","action","uri","cite"],function(t,n){e.attrHooks[n]={set:l}}),e.attrHooks.uri.get=function(t){return e(t).uri()},e.fn.uri=function(e){var n=this.first(),r=n.get(0),a=i(r);if(!a)throw Error('Element "'+r.nodeName+'" does not have either property: href, src, action, cite');if(void 0!==e){var o=n.data("uri");if(o)return o.href(e);e instanceof t||(e=t(e||""))}else{if(e=n.data("uri"))return e;e=t(n.attr(a)||"")}return e._dom_element=r,e._dom_attribute=a,e.normalize(),n.data("uri",e),e},t.prototype.build=function(e){return this._dom_element?(this._string=t.build(this._parts),this._deferred_build=!1,this._dom_element.setAttribute(this._dom_attribute,this._string),this._dom_element[this._dom_attribute]=this._string):!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=t.build(this._parts),this._deferred_build=!1),this};var c,u=/^([a-zA-Z]+)\s*([\^\$*]?=|:)\s*(['"]?)(.+)\3|^\s*([a-zA-Z0-9]+)\s*$/;return c=e.expr.createPseudo?e.expr.createPseudo(function(e){return function(t){return a(t,e)}}):function(e,t,n){return a(e,n[3])},e.expr[":"].uri=c,e}),function(e,t){"use strict";"object"==typeof exports?module.exports=t(require("./URI")):"function"==typeof define&&define.amd?define(["./URI"],t):t(e.URI)}(this,function(e){"use strict";var t=e.prototype,n=t.fragment;e.fragmentPrefix="?";var i=e._parts;return e._parts=function(){var t=i();return t.fragmentPrefix=e.fragmentPrefix,t},t.fragmentPrefix=function(e){return this._parts.fragmentPrefix=e,this},t.fragment=function(t,i){var r=this._parts.fragmentPrefix,a=this._parts.fragment||"";return t===!0?a.substring(0,r.length)!==r?{}:e.parseQuery(a.substring(r.length)):void 0!==t&&"string"!=typeof t?(this._parts.fragment=r+e.buildQuery(t),this.build(!i),this):n.call(this,t,i)},t.addFragment=function(t,n,i){var r=this._parts.fragmentPrefix,a=e.parseQuery((this._parts.fragment||"").substring(r.length));return e.addQuery(a,t,n),this._parts.fragment=r+e.buildQuery(a),"string"!=typeof t&&(i=n),this.build(!i),this},t.removeFragment=function(t,n,i){var r=this._parts.fragmentPrefix,a=e.parseQuery((this._parts.fragment||"").substring(r.length));return e.removeQuery(a,t,n),this._parts.fragment=r+e.buildQuery(a),"string"!=typeof t&&(i=n),this.build(!i),this},t.addHash=t.addFragment,t.removeHash=t.removeFragment,e}),function(e,t){"use strict";"object"==typeof exports?module.exports=t(require("./URI")):"function"==typeof define&&define.amd?define(["./URI"],t):t(e.URI)}(this,function(e){"use strict";var t=e.prototype,n=t.fragment,i=t.build;e.fragmentPrefix="!";var r=e._parts;return e._parts=function(){var t=r();return t.fragmentPrefix=e.fragmentPrefix,t},t.fragmentPrefix=function(e){return this._parts.fragmentPrefix=e,this},t.fragment=function(t,i){var r,a=this._parts.fragmentPrefix,o=this._parts.fragment||"";return t===!0?(r=o.substring(0,a.length)!==a?e(""):new e(o.substring(a.length)),this._fragmentURI=r,r._parentURI=this,r):void 0!==t&&"string"!=typeof t?(this._fragmentURI=t,t._parentURI=t,this._parts.fragment=a+t.toString(),this.build(!i),this):("string"==typeof t&&(this._fragmentURI=void 0),n.call(this,t,i))},t.build=function(e){var t=i.call(this,e);return e!==!1&&this._parentURI&&this._parentURI.fragment(this),t},e}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}window.CustomEvent||(e.prototype=window.Event.prototype,window.CustomEvent=e)}();var HawtioMainNav;!function(e){function t(e){var t=e.find("base");return t.attr("href")}function n(e,t){return e&&t&&(_.startsWith(e,t)||0===e.indexOf(t))?e.substring(t.length):e}function i(e){return new d(e)}function r(e){return"isValid"in e?_.isFunction(e.isValid)?e.isValid():!1:!0}function a(e,t){!("isSelected"in t)&&"href"in t&&(t.isSelected=function(){f.attr("href",t.href());var e=new URI(f[0].href),i=n(e.path(),"/");if(""===i)return c.debug("nav item: ",t.id," returning empty href, can't be selected"),!1;var r=new URI,a=n(r.path(),"/"),o=r.query(!0),s=o["main-tab"],l=o["sub-tab"];if(""!==i&&!s&&!l){if(t.isSubTab&&_.startsWith(a,i))return!0;if(t.tabs){var u=_.any(t.tabs,function(e){var t=e.isSelected();return t});if(u)return!0}}var u=!1;return u=t.isSubTab?l?l===t.id:_.startsWith(a,i):s?s===t.id:_.startsWith(a,i)})}function o(e,t,n,i,a){if(r(a)){var o=n.$new();a.hide=function(){return a.show&&!a.show()},o.item=a;var s=null;if(s=_.isFunction(a.template)?a.template():e.get("templates/main-nav/navItem.html"),a.attributes||a.linkAttributes){var l=$(s);a.attributes&&l.attr(a.attributes),a.linkAttributes&&l.find("a").attr(a.linkAttributes),s=l.prop("outerHTML")}i.append(t(s)(o))}}function s(e){var t=[];return e.forEach(function(e){l(e,t)}),t}function l(e,t){if(!("rank"in e)||0===t.length)return void t.push(e);var n=_.findIndex(t,function(t){return"rank"in t&&e.rank>t.rank?!0:void 0});"rank"in t[0]||(n=0),0>n?t.push(e):t.splice(n,0,e)}e.pluginName="hawtio-nav";var c=Logger.get(e.pluginName),u=function(){function e(){}return Object.defineProperty(e,"ADD",{get:function(){return"hawtio-main-nav-add"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"REMOVE",{get:function(){return"hawtio-main-nav-remove"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CHANGED",{get:function(){return"hawtio-main-nav-change"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"REDRAW",{get:function(){return"hawtio-main-nav-redraw"},enumerable:!0,configurable:!0}),e}();e.Actions=u;var d=function(){function t(e){this.items=[],this.root=e}return t.prototype.builder=function(){return new e.NavItemBuilderImpl},t.prototype.add=function(t){for(var n=this,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var a=_.union([t],i);this.items=_.union(this.items,a),a.forEach(function(t){n.root.dispatchEvent(new CustomEvent(e.Actions.ADD,{detail:{item:t}}))}),this.root.dispatchEvent(new CustomEvent(e.Actions.CHANGED,{detail:{items:this.items}})),this.root.dispatchEvent(new CustomEvent(e.Actions.REDRAW,{detail:{}}))},t.prototype.remove=function(t){var n=this,i=_.remove(this.items,t);return i.forEach(function(t){n.root.dispatchEvent(new CustomEvent(e.Actions.REMOVE,{detail:{item:t}}))}),this.root.dispatchEvent(new CustomEvent(e.Actions.CHANGED,{detail:{items:this.items}})),this.root.dispatchEvent(new CustomEvent(e.Actions.REDRAW,{detail:{}})),i},t.prototype.iterate=function(e){this.items.forEach(e)},t.prototype.selected=function(){var e=_.find(this.items,function(e){var t=!1;if(!e.isSelected)return t;var t=e.isSelected();return t});return e},t.prototype.on=function(t,n,i){var r=this;switch(t){case e.Actions.ADD:this.root.addEventListener(e.Actions.ADD,function(e){i(e.detail.item)}),this.items.length>0&&this.items.forEach(function(t){r.root.dispatchEvent(new CustomEvent(e.Actions.ADD,{detail:{item:t}}))});break;case e.Actions.REMOVE:this.root.addEventListener(e.Actions.REMOVE,function(e){i(e.detail.item)});break;case e.Actions.CHANGED:this.root.addEventListener(e.Actions.CHANGED,function(e){i(e.detail.items)}),this.items.length>0&&this.root.dispatchEvent(new CustomEvent(e.Actions.CHANGED,{detail:{items:r.items}}));break;case e.Actions.REDRAW:this.root.addEventListener(e.Actions.REDRAW,function(e){i(e)});var a=new CustomEvent(e.Actions.REDRAW,{detail:{text:""}});this.root.dispatchEvent(a)}},t}();e.createRegistry=i;var p=function(){function e(){this.self={id:""}}return e.join=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=[],i=e.length-1;e.forEach(function(e,t){e&&""!==e&&(0!==t&&"/"===e.charAt(0)&&(e=e.slice(1)),t!==i&&"/"===e.charAt(e.length)&&(e=e.slice(0,e.length-1)),e&&""!==e&&n.push(e))});var r=n.join("/");return r},e.prototype.id=function(e){return this.self.id=e,this},e.prototype.rank=function(e){return this.self.rank=e,this},e.prototype.title=function(e){return this.self.title=e,this},e.prototype.tooltip=function(e){return this.self.tooltip=e,this},e.prototype.page=function(e){return this.self.page=e,this},e.prototype.reload=function(e){return this.self.reload=e,this},e.prototype.attributes=function(e){return this.self.attributes=e,this},e.prototype.linkAttributes=function(e){return this.self.linkAttributes=e,this},e.prototype.context=function(e){return this.self.context=e,this},e.prototype.href=function(e){return this.self.href=e,this},e.prototype.click=function(e){return this.self.click=e,this},e.prototype.isSelected=function(e){return this.self.isSelected=e,this},e.prototype.isValid=function(e){return this.self.isValid=e,this},e.prototype.show=function(e){return this.self.show=e,this},e.prototype.template=function(e){return this.self.template=e,this},e.prototype.defaultPage=function(e){return this.self.defaultPage=e,this},e.prototype.tabs=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.self.tabs=_.union(this.self.tabs,[e],t),this},e.prototype.subPath=function(t,n,i,r,a,o){var s=this.self;this.self.tabs||(this.self.tabs=[]);var l={id:s.id+"-"+n,title:function(){return t},href:function(){return s.href?e.join(s.href(),n):n}};return _.isUndefined(i)||(l.page=function(){return i}),_.isUndefined(r)||(l.rank=r),_.isUndefined(a)||(l.reload=a),_.isUndefined(o)||(l.isValid=o),this.self.tabs.push(l),this},e.prototype.build=function(){var e=_.cloneDeep(this.self);return this.self={id:""},e},e}();e.NavItemBuilderImpl=p,e.createBuilder=function(){return new e.NavItemBuilderImpl};var h=angular.module(e.pluginName,["ngRoute"]);e._module=h,h.constant("layoutFull","templates/main-nav/layoutFull.html"),h.config(["$locationProvider","$routeProvider",function(e,t){e.html5Mode({enabled:!0,requireBase:!0}),t.otherwise({templateUrl:"templates/main-nav/welcome.html"})}]),h.controller("HawtioNav.WelcomeController",["$scope","$location","WelcomePageRegistry","HawtioNav","$timeout","$document",function(e,i,r,a,o,l){function u(e){if(e&&e.href){var r=n(e.href(),t(l)),a=new URI(r),s=_.merge(i.search(),a.query(!0));c.debug("Going to item id: ",e.id," href: ",a.path()," query: ",s),o(function(){i.path(a.path()).search(s)},10)}}function d(){var e=[];a.iterate(function(t){var n=t.isValid||function(){return!0},i=t.show||function(){return!0};n()&&i()&&e.push(t)});var t=s(e);u(t[0])}o(function(){function e(){0===r.pages.length&&(c.debug("No welcome pages, going to first available nav"),d());var e=_.sortBy(r.pages,function(e){return e.rank}),t=_.find(e,function(e){return"isValid"in e?e.isValid():!0});t?u(t):d()}function t(n){if(0===n.length)return void e();var i=n.pop(),r=n;if(c.debug("Trying candidate: ",i," remaining: ",r),!i)return void e();var a=i.defaultPage.isValid;if(a){var o=function(){u(i)},s=function(){t(r)};try{a(o,s)}catch(l){c.debug("Failed to eval item: ",i.id," error: ",l),s()}}else t(r)}var n=i.search();if(n.tab){var o,s=n.tab;if(a.iterate(function(e){o||e.id!==s||(o=e)}),o)return void u(o)}var l=[];a.iterate(function(e){if("defaultPage"in e){var t=e.defaultPage;if(!("rank"in t))return void l.push(e);var n=_.findIndex(l,function(t){return"rank"in t&&e.rank>t.rank?!0:void 0});0>n?l.push(e):l.splice(n,0,e)}}),t(l)},500)}]),h.controller("HawtioNav.ViewController",["$scope","$route","$location","layoutFull","viewRegistry",function(e,t,n,i,r){function a(e){var t=void 0;if(!e||0===_.keys(e).length)return void c.debug("No query, skipping query matching");var n=_.keys(r),i=_.filter(n,function(e){return"{"===e.charAt(0)});return i.forEach(function(n){if(!t)try{var i=angular.fromJson(n);_.isObject(i)&&_.merge(i,e,function(e,i){e&&(t=e===i?r[n]:void 0)})}catch(a){c.debug("Unable to parse json: ",n)}}),t}function o(e){var t=void 0;return _.forIn(r,function(n,i){if(!t)try{var r=new RegExp(i,"");r.exec(e)&&(t=n)}catch(a){c.debug("Invalid RegExp "+i+" for viewRegistry value: "+n)}}),t}function s(){var t=null,r=n.search();if(t=a(r),t&&c.debug("View partial matched on query"),!t){var s=n.path();s&&(t=o(s),t&&c.debug("View partial matched on path name"))}return t||(t=i,c.debug("Using default view partial")),e.viewPartial=t,c.debug("Using view partial: "+t),t}s(),e.$on("$routeChangeSuccess",function(e,t,n){s()})}]),h.run(["HawtioNav","$rootScope","$route","$document",function(n,i,r,a){function o(e){e.preBase||(e.preBase=e.href,e.href=function(){if(s){var t=e.preBase();if(t&&"/"===t.charAt(0))return t=t.substr(1),s+t}return e.preBase()})}n.on(e.Actions.CHANGED,"$apply",function(e){i.$$phase||i.$apply()});var s=t(a);n.on(e.Actions.ADD,"htmlBaseRewriter",function(e){e.href&&(o(e),_.forEach(e.tabs,o))}),n.on(e.Actions.ADD,"$apply",function(e){var t=e.click;e.click=function(e){if(!(e instanceof jQuery.Event))try{i.$apply()}catch(n){}t&&t(e)}}),r.reload(),c.debug("loaded")}]),hawtioPluginLoader.addModule(e.pluginName),hawtioPluginLoader.addModule("ngRoute");var f=$("<a>");e._module.directive("hawtioSubTabs",["HawtioNav","$templateCache","$compile","$location","$rootScope",function(e,t,n,i,r){return{restrict:"A",link:function(i,r,a){i.$watch(_.debounce(function(){var t=e.selected();i.selected!==t&&(i.selected=t,i.$broadcast("hawtio-nav-subtab-redraw"),i.$apply())},100,{trailing:!0})),i.$on("hawtio-nav-subtab-redraw",function(){c.debug("Redrawing sub-tabs"),r.empty();var e=i.selected;if(e&&e.tabs){if(a.showHeading){var l=angular.extend({},e,{template:function(){return t.get("templates/main-nav/subTabHeader.html")}});o(t,n,i,r,l)}var u=s(e.tabs);u.forEach(function(e){o(t,n,i,r,e)})}}),i.$broadcast("hawtio-nav-subtab-redraw")}}}]),e._module.directive("hawtioMainNav",["HawtioNav","$templateCache","$compile","$location","$rootScope",function(t,n,i,u,d){var p={nav:{},numKeys:0,numValid:0},h=function(e){r(e)&&(p.numValid=p.numValid+1)};return t.on(e.Actions.ADD,"subTabEnricher",function(e){e.tabs&&e.tabs.length>0&&e.tabs.forEach(function(t){t.isSubTab=!0,t.oldHref||(t.oldHref=t.href,t.href=function(){var n=new URI(t.oldHref());return""===n.path()?"":(n.search(function(i){_.merge(i,n.query(!0)),i["main-tab"]||(i["main-tab"]=e.id),i["sub-tab"]=t.id}),n.toString())})})}),t.on(e.Actions.ADD,"hrefEnricher",function(e){e.isSubTab=!1,e.href&&!e.oldHref&&(e.oldHref=e.href,e.href=function(){var t=e.oldHref();if(!t)return c.debug("Item: ",e.id," returning null for href()"),"";var n=new URI(t);return""===n.path()?"":(n.search(function(t){if(t["main-tab"]||(t["main-tab"]=e.id),_.merge(t,n.query(!0)),!t["sub-tab"]&&e.tabs&&e.tabs.length>0){var i=s(e.tabs);t["sub-tab"]=i[0].id}}),n.toString())})}),t.on(e.Actions.ADD,"isSelectedEnricher",function(e){a(u,e),e.tabs&&e.tabs.forEach(function(e){a(u,e)})}),t.on(e.Actions.ADD,"PrimaryController",function(e){p.nav[e.id]=e}),t.on(e.Actions.REMOVE,"PrimaryController",function(e){delete p.nav[e.id]}),t.on(e.Actions.CHANGED,"PrimaryController",function(e){p.numKeys=e.length,p.numValid=0,e.forEach(h)}),{restrict:"A",replace:!1,controller:["$scope","$element","$attrs",function(e,r,a){e.config=p,e.$on("hawtio-nav-redraw",function(){c.debug("Redrawing main nav"),r.empty();var a=[];t.iterate(function(e){"context"in e&&e.context&&l(e,a)}),a.forEach(function(t){o(n,i,e,r,t)});var s=[];t.iterate(function(e){e.context||l(e,s)}),s.forEach(function(t){o(n,i,e,r,t)})})}],link:function(e,n,i){e.$watch(_.debounce(function(){var n=p.numValid,i=p.numKeys;p.numValid=0,p.numKeys=0,t.iterate(h),(p.numValid!==n||p.numKeys!==i)&&(e.$broadcast("hawtio-nav-redraw"),e.$apply())},500,{trailing:!0})),e.$broadcast("hawtio-nav-redraw")}}}]),e._module.provider("HawtioNavBuilder",[function(){function t(e,t){c.debug("Setting route: ",t.href()," to template URL: ",t.page());var n={templateUrl:t.page()};_.isUndefined(t.reload)||(n.reloadOnSearch=t.reload),e.when(t.href(),n)}this.$get=function(){return{}},this.create=function(){return e.createBuilder()},this.join=p.join,this.configureRouting=function(e,n){if(_.isUndefined(n.page)){if(n.tabs){var i=_.first(n.tabs).href;i&&(c.debug("Setting route: ",n.href()," to redirect to ",i()),e.when(n.href(),{reloadOnSearch:n.reload,redirectTo:i()}))}}else t(e,n);n.tabs&&n.tabs.forEach(function(n){return t(e,n)})}}]),e._module.factory("HawtioPerspective",[function(){var e=Logger.get("hawtio-dummy-perspective");return{add:function(t,n){e.debug("add called for id: ",t)},remove:function(t){return void e.debug("remove called for id: ",t)},setCurrent:function(t){e.debug("setCurrent called for id: ",t)},getCurrent:function(t){return void e.debug("getCurrent called for id: ",t)},getLabels:function(){return[]}}}]),e._module.factory("WelcomePageRegistry",[function(){return{pages:[]}}]),e._module.factory("HawtioNav",["$window","$rootScope",function(t,n){var i=e.createRegistry(window);return i}])}(HawtioMainNav||(HawtioMainNav={})),angular.module("hawtio-nav").run(["$templateCache",function(e){
e.put("templates/main-nav/layoutFull.html","<div ng-view></div>\n\n\n"),e.put("templates/main-nav/layoutTest.html","<div>\n  <h1>Test Layout</h1>\n  <div ng-view>\n\n\n  </div>\n</div>\n\n\n"),e.put("templates/main-nav/navItem.html",'<li ng-class="{ active: item.isSelected() }" ng-hide="item.hide()">\n  <a ng-href="{{item.href()}}" ng-click="item.click($event)" ng-bind-html="item.title()" title="{{item.tooltip()}}"></a>\n</li>\n'),e.put("templates/main-nav/subTabHeader.html",'<li class="header">\n  <a href=""><strong>{{item.title()}}</strong></a>\n</li>\n'),e.put("templates/main-nav/welcome.html",'<div ng-controller="HawtioNav.WelcomeController"></div>\n')}]),function(){function e(e){return function(){return e}}function t(e){var t="Array"===e&&dt.isArray||function(t,n){return(n||yt.call(t))==="[object "+e+"]"};return Ct[e]=t}function n(e,t){function n(n){return g(n)?yt.call(n)==="[object "+t+"]":typeof n===e}return Ct[t]=n}function i(e){e.SugarMethods||(l(e,"SugarMethods",{}),r(e,!1,!0,{extend:function(t,n,i){r(e,!1!==i,n,t)},sugarRestore:function(){return o(this,e,arguments,function(e,t,n){l(e,t,n.method)})},sugarRevert:function(){return o(this,e,arguments,function(e,t,n){n.existed?l(e,t,n.original):delete e[t]})}}))}function r(e,t,n,r){var a=t?e.prototype:e;i(e),y(r,function(i,r){var o=a[i],c=f(a,i);Dt(n)&&o&&(r=s(o,r,n)),!1===n&&o||l(a,i,r),e.SugarMethods[i]={method:r,existed:c,original:o,instance:t}})}function a(e,t,n,i,a){var o={};i=At(i)?i.split(","):i,i.forEach(function(e,t){a(o,e,t)}),r(e,t,n,o)}function o(e,t,n,i){var r=0===n.length,a=c(n),o=!1;return y(t.SugarMethods,function(t,n){(r||-1!==a.indexOf(t))&&(o=!0,i(n.instance?e.prototype:e,t,n))}),o}function s(e,t,n){return function(i){return n.apply(this,arguments)?t.apply(this,arguments):e.apply(this,arguments)}}function l(e,t,n){wt?ut.defineProperty(e,t,{value:n,configurable:!0,enumerable:!1,writable:!0}):e[t]=n}function c(e,t,n){var i=[];n=n||0;var r;for(r=e.length;r>n;n++)i.push(e[n]),t&&t.call(e,e[n],n);return i}function u(e,t,n){var i=e[n||0];Et(i)&&(e=i,n=0),c(e,t,n)}function d(e){if(!e||!e.call)throw new TypeError("Callback is not callable")}function p(e){return void 0!==e}function h(e){return void 0===e}function f(e,t){return!!e&&bt.call(e,t)}function g(e){return!!e&&("object"==typeof e||xt&&It(e))}function m(e){var t=typeof e;return null==e||"string"===t||"number"===t||"boolean"===t}function v(e,t){t=t||yt.call(e);try{if(e&&e.constructor&&!f(e,"constructor")&&!f(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}return!!e&&"[object Object]"===t&&"hasOwnProperty"in e}function y(e,t){for(var n in e)if(f(e,n)&&!1===t.call(e,n,e[n],e))break}function b(e,t){for(var n=0;e>n;n++)t(n)}function w(e,t){return y(t,function(n){e[n]=t[n]}),e}function x(e){if(m(e)&&(e=ut(e)),kt&&At(e))for(var t,n=e,i=0;t=n.charAt(i);)n[i++]=t;return e}function k(e){w(this,x(e))}function C(e,t,n){var i=jt(10,Nt(t||0));return n=n||Rt,0>t&&(i=1/i),n(e*i)/i}function S(){return"	\n\f\r   ᠎             \u2028\u2029　\ufeff"}function _(e,t){var n="";for(e=e.toString();t>0;)1&t&&(n+=e),(t>>=1)&&(e+=e);return n}function T(e,t){var n,i;return n=e.replace(Mt,function(e){return e=Gt[e],e===Vt&&(i=!0),e}),i?parseFloat(n):parseInt(n,t||10)}function $(e,t,n,i){return i=Nt(e).toString(i||10),i=_("0",t-i.replace(/\.\d+/,"").length)+i,(n||0>e)&&(i=(0>e?"-":"+")+i),i}function A(e){if(e>=11&&13>=e)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function E(e,t){function n(e,n){(e||-1<t.indexOf(n))&&(i+=n)}var i="";return t=t||"",n(e.multiline,"m"),n(e.ignoreCase,"i"),n(e.global,"g"),n(e.u,"y"),i}function P(e){return At(e)||(e=ft(e)),e.replace(/([\\/\'*+?|()\[\]{}.^$])/g,"\\$1")}function I(e,t){return e["get"+(e._utc?"UTC":"")+t]()}function D(e,t,n){return e["set"+(e._utc&&"ISOWeek"!=t?"UTC":"")+t](n)}function M(e,t){var n,i,r,a,o,s,l,c=typeof e;if("string"===c)return e;if(r=yt.call(e),n=v(e,r),i=Et(e,r),null!=e&&n||i){if(t||(t=[]),1<t.length)for(s=t.length;s--;)if(t[s]===e)return"CYC";for(t.push(e),n=e.valueOf()+ft(e.constructor),a=i?e:ut.keys(e).sort(),s=0,l=a.length;l>s;s++)o=i?s:a[s],n+=o+M(e[o],t);t.pop()}else n=-(1/0)===1/e?"-0":ft(e&&e.valueOf?e.valueOf():e);return c+r+n}function N(e,t){return e===t?0!==e||1/e===1/t:j(e)&&j(t)?M(e)===M(t):!1}function j(e){var t=yt.call(e);return St.test(t)||v(e,t)}function O(e,t,n){var i,r=e.length,a=t.length,o=!1!==t[a-1];return a>(o?1:2)?(i=[],c(t,function(t){return Tt(t)?!1:void i.push(L(e,r,t,o,n))}),i):L(e,r,t[0],o,n)}function L(e,t,n,i,r){return i&&(n%=t,0>n&&(n=t+n)),r?e.charAt(n):e[n]}function R(e,t){a(t,!0,!1,e,function(e,t){e[t+("equal"===t?"s":"")]=function(){return ut[t].apply(null,[this].concat(c(arguments)))}})}function F(e,t,n,i){var r=e.length,a=-1==i,o=a?r-1:0;for(n=isNaN(n)?o:parseInt(n>>0),0>n&&(n=r+n),(!a&&0>n||a&&n>=r)&&(n=o);a&&n>=0||!a&&r>n;){if(e[n]===t)return n;n+=i}return-1}function U(e,t,n,i){var r=e.length,a=0,o=p(n);if(d(t),0==r&&!o)throw new TypeError("Reduce called on empty array with no initial value");for(o||(n=e[i?r-1:a],a++);r>a;)o=i?r-a-1:a,o in e&&(n=t(n,e[o],o,e)),a++;return n}function z(e){if(0===e.length)throw new TypeError("First argument must be defined")}function q(e){return e=pt(e),function(t){return e.test(t)}}function B(e){var t=e.getTime();return function(e){return!(!e||!e.getTime)&&e.getTime()===t}}function H(e){return function(t,n,i){return t===e||e.call(this,t,n,i)}}function V(e){return function(t,n,i){return t===e||e.call(i,n,t,i)}}function W(e,t){var n={};return function(i,r,a){var o;if(!g(i))return!1;for(o in e)if(n[o]=n[o]||K(e[o],t),!1===n[o].call(a,i[o],r,a))return!1;return!0}}function G(e){return function(t){return t===e||N(t,e)}}function K(e,t){if(!m(e)){if(It(e))return q(e);if(Pt(e))return B(e);if(Dt(e))return t?V(e):H(e);if(v(e))return W(e,t)}return G(e)}function X(e,t,n,i){return t?t.apply?t.apply(n,i||[]):Dt(e[t])?e[t].call(e):e[t]:e}function Y(e,t,n,i){var r=+e.length;for(0>n&&(n=e.length+n),n=isNaN(n)?0:n,!0===i&&(r+=n);r>n;){if(i=n%e.length,!(i in e)){J(e,t,n);break}if(!1===t.call(e,e[i],i,e))break;n++}}function J(e,t,n){var i,r=[];for(i in e)i in e&&i>>>0==i&&4294967295!=i&&i>=n&&r.push(parseInt(i));r.sort().each(function(n){return t.call(e,e[n],n,e)})}function Q(e,t,n,i,r,a){var o,s,l;return 0<e.length&&(l=K(t),Y(e,function(t,n){return l.call(a,t,n,e)?(o=t,s=n,!1):void 0},n,i)),r?s:o}function Z(e,t){var n,i=[],r={};return Y(e,function(a,o){n=t?X(a,t,e,[a,o,e]):a,re(r,n)||i.push(a)}),i}function ee(e,t,n){var i=[],r={};return t.each(function(e){re(r,e)}),e.each(function(e){var t=M(e),a=!j(e);if(ie(r,t,e,a)!==n){var o=0;if(a)for(t=r[t];o<t.length;)t[o]===e?t.splice(o,1):o+=1;else delete r[t];i.push(e)}}),i}function te(e,t,n){t=t||1/0,n=n||0;var i=[];return Y(e,function(e){Et(e)&&t>n?i=i.concat(te(e,t,n+1)):i.push(e)}),i}function ne(e){var t=[];return c(e,function(e){t=t.concat(e)}),t}function ie(e,t,n,i){var r=t in e;return i&&(e[t]||(e[t]=[]),r=-1!==e[t].indexOf(n)),r}function re(e,t){var n=M(t),i=!j(t),r=ie(e,n,t,i);return i?e[n].push(t):e[n]=t,r}function ae(e,t,n,i){var r,a,o,s=[],l="max"===n,c="min"===n,u=dt.isArray(e);for(r in e)if(e.hasOwnProperty(r)){if(n=e[r],o=X(n,t,e,u?[n,parseInt(r),e]:[]),h(o))throw new TypeError("Cannot compare with undefined");o===a?s.push(n):(h(a)||l&&o>a||c&&a>o)&&(s=[n],a=o)}return u||(s=te(s,1)),i?s:s[0]}function oe(e,t){var n,i,r,a,o=0,s=0;n=dt[Jt],i=dt[Qt];var l=dt[Zt],c=dt[Yt],u=dt[en];e=se(e,n,i),t=se(t,n,i);do n=e.charAt(o),r=l[n]||n,n=t.charAt(o),a=l[n]||n,n=r?c.indexOf(r):null,i=a?c.indexOf(a):null,-1===n||-1===i?(n=e.charCodeAt(o)||null,i=t.charCodeAt(o)||null,u&&(n>=zt&&qt>=n||n>=Bt&&Ht>=n)&&(i>=zt&&qt>=i||i>=Bt&&Ht>=i)&&(n=T(e.slice(o)),i=T(t.slice(o)))):(r=r!==e.charAt(o),a=a!==t.charAt(o),r!==a&&0===s&&(s=r-a)),o+=1;while(null!=n&&null!=i&&n===i);return n===i?s:n-i}function se(e,t,n){return At(e)||(e=ft(e)),n&&(e=e.toLowerCase()),t&&(e=e.replace(t,"")),e}function le(e,t){a(ut,!1,!0,e,function(e,n){e[n]=function(e,i,r){var a,o=ut.keys(x(e));return t||(a=K(i,!0)),r=dt.prototype[n].call(o,function(n){var r=e[n];return t?X(r,i,e,[n,r,e]):a(r,n,e)},r),Et(r)&&(r=r.reduce(function(t,n){return t[n]=e[n],t},{})),r}}),R(e,k)}function ce(e){w(this,e),this.g=fn.concat()}function ue(e,t,n){var i,r,a=t[0],o=t[1],s=t[2];return t=e[n]||e.relative,Dt(t)?t.call(e,a,o,s,n):(r=e.units[8*(e.plural&&a>1?1:0)+o]||e.units[o],e.capitalizeUnit&&(r=ve(r)),i=e.modifiers.filter(function(e){return"sign"==e.name&&e.value==(s>0?1:-1)})[0],t.replace(/\{(.*?)\}/g,function(e,t){switch(t){case"num":return a;case"unit":return r;case"sign":return i.src}}))}function de(e,t){return t=t||e.code,"en"===t||"en-US"===t?!0:e.variant}function pe(e,t){return t.replace(pt(e.num,"g"),function(t){return he(e,t)||""})}function he(e,t){var n;return $t(t)?t:t&&-1!==(n=e.numbers.indexOf(t))?(n+1)%10:1}function fe(e,t){var n;if(At(e)||(e=""),n=yn[e]||yn[e.slice(0,2)],!1===t&&!n)throw new TypeError("Invalid locale.");return n||sn}function ge(e,t){function n(e){var t=s[e];At(t)?s[e]=t.split(","):t||(s[e]=[])}function i(e,t){e=e.split("+").map(function(e){return e.replace(/(.+):(.+)$/,function(e,t,n){return n.split("|").map(function(e){return t+e}).join("|")})}).join("|"),e.split("|").forEach(t)}function r(e,t,n){var r=[];s[e].forEach(function(e,a){t&&(e+="+"+e.slice(0,3)),i(e,function(e,t){r[t*n+a]=e.toLowerCase()})}),s[e]=r}function a(e,t,n){return e="\\d{"+e+","+t+"}",n&&(e+="|(?:"+ye(s.numbers)+")+"),e}function o(e,t){s[e]=s[e]||t}var s,l;return s=new ce(t),n("modifiers"),"months weekdays units numbers articles tokens timeMarker ampm timeSuffixes dateParse timeParse".split(" ").forEach(n),l=!s.monthSuffix,r("months",l,12),r("weekdays",l,7),r("units",!1,8),r("numbers",!1,10),o("code",e),o("date",a(1,2,s.digitDate)),o("year","'\\d{2}|"+a(4,4)),o("num",function(){var e=["-?\\d+"].concat(s.articles);return s.numbers&&(e=e.concat(s.numbers)),ye(e)}()),function(){var e=[];s.i={},s.modifiers.push({name:"day",src:"yesterday",value:-1}),s.modifiers.push({name:"day",src:"today",value:0}),s.modifiers.push({name:"day",src:"tomorrow",value:1}),s.modifiers.forEach(function(t){var n=t.name;i(t.src,function(i){var r=s[n];s.i[i]=t,e.push({name:n,src:i,value:t.value}),s[n]=r?r+"|"+i:i})}),s.day+="|"+ye(s.weekdays),s.modifiers=e}(),s.monthSuffix&&(s.month=a(1,2),s.months="1 2 3 4 5 6 7 8 9 10 11 12".split(" ").map(function(e){return e+s.monthSuffix})),s.full_month=a(1,2)+"|"+ye(s.months),0<s.timeSuffixes.length&&s.addFormat(Le(s),!1,dn),s.addFormat("{day}",!0),s.addFormat("{month}"+(s.monthSuffix||"")),s.addFormat("{year}"+(s.yearSuffix||"")),s.timeParse.forEach(function(e){s.addFormat(e,!0)}),s.dateParse.forEach(function(e){s.addFormat(e)}),yn[e]=s}function me(e,t,n,i){e.g.unshift({r:i,locale:e,q:pt("^"+t+"$","i"),to:n})}function ve(e){return e.slice(0,1).toUpperCase()+e.slice(1)}function ye(e){return e.filter(function(e){return!!e}).join("|")}function be(){var e=ht.SugarNewDate;return e?e():new ht}function we(e,t){var n;return g(e[0])?e:$t(e[0])&&!$t(e[1])?[e[0]]:At(e[0])&&t?[xe(e[0]),e[1]]:(n={},cn.forEach(function(t,i){n[t.name]=e[i]}),[n])}function xe(e){var t,n={};return(e=e.match(/^(\d+)?\s?(\w+?)s?$/i))&&(h(t)&&(t=parseInt(e[1])||1),n[e[2].toLowerCase()]=t),n}function ke(e,t,n){var i;for(h(n)&&(n=un.length),t=t||0;n>t&&(i=un[t],!1!==e(i.name,i,t));t++);}function Ce(e,t){var n,i,r={};return t.forEach(function(t,a){n=e[a+1],h(n)||""===n||("year"===t&&(r.t=n.replace(/'/,"")),i=parseFloat(n.replace(/'/,"").replace(/,/,".")),r[t]=isNaN(i)?n.toLowerCase():i)}),r}function Se(e){return e=e.trim().replace(/^just (?=now)|\.+$/i,""),_e(e)}function _e(e){return e.replace(ln,function(e,t,n){var i,r,a=0,o=1;return t?e:(n.split("").reverse().forEach(function(e){e=hn[e];var t=e>9;t?(i&&(a+=o),o*=e/(r||1),r=e):(!1===i&&(o*=10),a+=o*e),i=t}),i&&(a+=o),a)})}function Te(e,t,n,i){function r(e){h.push(e)}function a(){h.forEach(function(e){e.call()})}function o(){var e=c.getWeekday();c.setWeekday(7*(m.num-1)+(e>w?w+7:w))}function s(){var e=f.i[m.edge];ke(function(e){return p(m[e])?(v=e,!1):void 0},4),"year"===v?m.e="month":("month"===v||"week"===v)&&(m.e="day"),c[(0>e.value?"endOf":"beginningOf")+ve(v)](),-2===e.value&&c.reset()}function l(){var e;ke(function(t,n,i){if("day"===t&&(t="date"),p(m[t])){if(i>=b)return c.setTime(0/0),!1;e=e||{},e[t]=m[t],delete m[t]}}),e&&r(function(){c.set(e,!0)})}var c,u,d,h,f,m,v,b,w,x,k;return c=be(),h=[],c.utc(i),Pt(e)?c.utc(e.isUTC()).setTime(e.getTime()):$t(e)?c.setTime(e):g(e)?(c.set(e,!0),m=e):At(e)&&(d=fe(t),e=Se(e),d&&y(d.o?[d.o].concat(d.g):d.g,function(n,i){var a=e.match(i.q);return a?(f=i.locale,m=Ce(a,i.to),f.o=i,m.utc&&c.utc(),m.timestamp?(m=m.timestamp,!1):(i.r&&!At(m.month)&&(At(m.date)||de(d,t))&&(k=m.month,m.month=m.date,m.date=k),m.year&&2===m.t.length&&(m.year=100*Rt(I(be(),"FullYear")/100)-100*Rt(m.year/100)+m.year),m.month&&(m.month=f.getMonth(m.month),m.shift&&!m.unit&&(m.unit=f.units[7])),m.weekday&&m.date?delete m.weekday:m.weekday&&(m.weekday=f.getWeekday(m.weekday),m.shift&&!m.unit&&(m.unit=f.units[5])),m.day&&(k=f.i[m.day])?(m.day=k.value,c.reset(),u=!0):m.day&&-1<(w=f.getWeekday(m.day))&&(delete m.day,m.num&&m.month?(r(o),m.day=1):m.weekday=w),m.date&&!$t(m.date)&&(m.date=pe(f,m.date)),m.ampm&&m.ampm===f.ampm[1]&&12>m.hour?m.hour+=12:m.ampm===f.ampm[0]&&12===m.hour&&(m.hour=0),("offset_hours"in m||"offset_minutes"in m)&&(c.utc(),m.offset_minutes=m.offset_minutes||0,m.offset_minutes+=60*m.offset_hours,"-"===m.offset_sign&&(m.offset_minutes*=-1),m.minute-=m.offset_minutes),m.unit&&(u=!0,x=he(f,m.num),b=f.units.indexOf(m.unit)%8,v=on.units[b],l(),m.shift&&(x*=(k=f.i[m.shift])?k.value:0),m.sign&&(k=f.i[m.sign])&&(x*=k.value),p(m.weekday)&&(c.set({weekday:m.weekday},!0),delete m.weekday),m[v]=(m[v]||0)+x),m.edge&&r(s),"-"===m.year_sign&&(m.year*=-1),ke(function(e,t,n){t=m[e];var i=t%1;i&&(m[un[n-1].name]=Rt(i*("second"===e?1e3:60)),m[e]=Lt(t))},1,4),!1)):void 0}),m?u?c.advance(m):(c._utc&&c.reset(),Oe(c,m,!0,!1,n)):("now"!==e&&(c=new ht(e)),i&&c.addMinutes(-c.getTimezoneOffset())),a(),c.utc(!1)),{c:c,set:m}}function $e(e){var t,n=Nt(e),i=n,r=0;return ke(function(e,a,o){t=Lt(C(n/a.b(),1)),t>=1&&(i=t,r=o)},1),[i,r,e]}function Ae(e){var t=$e(e.millisecondsFromNow());return(6===t[1]||5===t[1]&&4===t[0]&&e.daysFromNow()>=be().daysInMonth())&&(t[0]=Nt(e.monthsFromNow()),t[1]=6),t}function Ee(e,t,n){function i(e,n){var i=I(e,"Month");return fe(n).months[i+12*t]}Pe(e,i,n),Pe(ve(e),i,n,1)}function Pe(e,t,n,i){mn[e]=function(e,r){var a=t(e,r);return n&&(a=a.slice(0,n)),i&&(a=a.slice(0,i).toUpperCase()+a.slice(i)),a}}function Ie(e,t,n){mn[e]=t,mn[e+e]=function(e,n){return $(t(e,n),2)},n&&(mn[e+e+e]=function(e,n){return $(t(e,n),3)},mn[e+e+e+e]=function(e,n){return $(t(e,n),4)})}function De(e){var t=e.match(/(\{\w+\})|[^{}]+/g);gn[e]=t.map(function(e){return e.replace(/\{(\w+)\}/,function(t,n){return e=mn[n]||n,n}),e})}function Me(e,t,n,i){var r;if(!e.isValid())return"Invalid Date";if(Date[t]?t=Date[t]:Dt(t)&&(r=Ae(e),t=t.apply(e,r.concat(fe(i)))),!t&&n)return r=r||Ae(e),0===r[1]&&(r[1]=1,r[0]=1),e=fe(i),ue(e,r,0<r[2]?"future":"past");t=t||"long",("short"===t||"long"===t||"full"===t)&&(t=fe(i)[t]),gn[t]||De(t);var a,o;for(r="",t=gn[t],a=0,n=t.length;n>a;a++)o=t[a],r+=Dt(o)?o(e,i):o;return r}function Ne(e,t,n,i,r){var a,o,s,l=0,c=0,u=0;return a=Te(t,n,null,r),i>0&&(c=u=i,o=!0),a.c.isValid()?(a.set&&a.set.e&&(vn.forEach(function(t){t.name===a.set.e&&(l=t.b(a.c,e-a.c)-1)}),t=ve(a.set.e),(a.set.edge||a.set.shift)&&a.c["beginningOf"+t](),"month"===a.set.e&&(s=a.c.clone()["endOf"+t]().getTime()),!o&&a.set.sign&&"millisecond"!=a.set.e&&(c=50,u=-50)),o=e.getTime(),t=a.c.getTime(),s=je(e,t,s||t+l),o>=t-c&&s+u>=o):!1}function je(e,t,n){return t=new ht(t),e=new ht(n).utc(e.isUTC()),23!==I(e,"Hours")&&(t=t.getTimezoneOffset(),e=e.getTimezoneOffset(),t!==e&&(n+=(e-t).minutes())),n}function Oe(e,t,n,i,r){function a(e){return p(t[e])?t[e]:t[e+"s"]}function o(e){return p(a(e))}var s;if($t(t)&&i)t={milliseconds:t};else if($t(t))return e.setTime(t),e;p(t.date)&&(t.day=t.date),ke(function(i,r,a){var l="day"===i;return o(i)||l&&o("weekday")?(t.e=i,s=+a,!1):void(!n||"week"===i||l&&o("week")||D(e,r.method,l?1:0))}),vn.forEach(function(n){var r=n.name;n=n.method;var s;s=a(r),h(s)||(i?("week"===r&&(s=(t.day||0)+7*s,n="Date"),s=s*i+I(e,n)):"month"===r&&o("day")&&D(e,"Date",15),D(e,n,s),i&&"month"===r&&(r=s,0>r&&(r=r%12+12),r%12!=I(e,"Month")&&D(e,"Date",0)))}),i||o("day")||!o("weekday")||e.setWeekday(a("weekday"));var l;e:{switch(r){case-1:l=e>be();break e;case 1:l=e<be();break e}l=void 0}return l&&ke(function(t,n){return(n.k||"week"===t&&o("weekday"))&&!(o(t)||"day"===t&&o("weekday"))?(e[n.j](r),!1):void 0},s+1),e}function Le(e,t){var n,i=pn,r={h:0,m:1,s:2};return e=e||on,i.replace(/{([a-z])}/g,function(i,a){var o=[],s="h"===a,l=s&&!t;return"t"===a?e.ampm.join("|"):(s&&o.push(":"),(n=e.timeSuffixes[r[a]])&&o.push(n+"\\s*"),0===o.length?"":"(?:"+o.join("|")+")"+(l?"":"?"))})}function Re(e,t,n){var i,r;return $t(e[1])?i=we(e)[0]:(i=e[0],r=e[1]),Te(i,r,t,n).c}function Fe(e,t){function n(){return Rt(this*t)}function i(){return Re(arguments)[e.j](this)}function r(){return Re(arguments)[e.j](-this)}var a=e.name,o={};o[a]=n,o[a+"s"]=n,o[a+"Before"]=r,o[a+"sBefore"]=r,o[a+"Ago"]=r,o[a+"sAgo"]=r,o[a+"After"]=i,o[a+"sAfter"]=i,o[a+"FromNow"]=i,o[a+"sFromNow"]=i,gt.extend(o)}function Ue(e,t,n,i,r){1/0!==t&&(e.timers||(e.timers=[]),$t(t)||(t=1),e.n=!1,e.timers.push(setTimeout(function(){e.n||n.apply(i,r||[])},t)))}function ze(e,t,n,i,r,a){var o=e.toFixed(20),s=o.search(/\./),o=o.search(/[1-9]/),s=s-o;return s>0&&(s-=1),r=Ut(Ft(Lt(s/3),!1===r?n.length:r),-i),i=n.charAt(r+i-1),-9>s&&(r=-3,t=Nt(s)-9,i=n.slice(0,1)),n=a?jt(2,10*r):jt(10,3*r),C(e/n,t||0).format()+i.trim()}function qe(e,t,n,i){var r,a,o;(a=t.match(/^(.+?)(\[.*\])$/))?(o=a[1],t=a[2].replace(/^\[|\]$/g,"").split("]["),t.forEach(function(t){r=!t||t.match(/^\d+$/),!o&&Et(e)&&(o=e.length),f(e,o)||(e[o]=r?[]:{}),e=e[o],o=t}),!o&&r&&(o=e.length.toString()),qe(e,o,n,i)):e[t]=i&&"true"===n?!0:i&&"false"===n?!1:n}function Be(e,t){var n;return Et(t)||g(t)&&t.toString===yt?(n=[],y(t,function(t,i){e&&(t=e+"["+t+"]"),n.push(Be(t,i))}),n.join("&")):e?He(e)+"="+(Pt(t)?t.getTime():He(t)):""}function He(e){return e||!1===e||0===e?encodeURIComponent(e).replace(/%20/g,"+"):""}function Ve(e,t,n){var i,r=e instanceof k?new k:{};return y(e,function(e,a){i=!1,u(t,function(t){(It(t)?t.test(e):g(t)?t[e]===a:e===ft(t))&&(i=!0)},1),i===n&&(r[e]=a)}),r}function We(e,t){this.start=Ge(e),this.end=Ge(t)}function Ge(e){return Pt(e)?new ht(e.getTime()):null==e?e:Pt(e)?e.getTime():e.valueOf()}function Ke(e){return e=null==e?e:Pt(e)?e.getTime():e.valueOf(),!!e||0===e}function Xe(e,t){var n,i,r,a;return $t(t)?new ht(e.getTime()+t):(n=t[0],i=t[1],r=I(e,i),a=new ht(e.getTime()),D(a,i,r+n),a)}function Ye(e,t){return ft.fromCharCode(e.charCodeAt(0)+t)}function Je(e,t){return e+t}function Qe(e){if(e=+e,0>e||1/0===e)throw new RangeError("Invalid number");return e}function Ze(e,t){return _(p(t)?t:" ",e)}function et(e,t,n,i,r){var a;if(e.length<=t)return e.toString();switch(i=h(i)?"...":i,n){case"left":return e=r?tt(e,t,!0):e.slice(e.length-t),i+e;case"middle":return n=Ot(t/2),a=Lt(t/2),t=r?tt(e,n):e.slice(0,n),e=r?tt(e,a,!0):e.slice(e.length-a),t+i+e;default:return t=r?tt(e,t):e.slice(0,t),t+i}}function tt(e,t,n){if(n)return tt(e.reverse(),t).reverse();n=pt("(?=["+S()+"])");var i=0;return e.split(n).filter(function(e){return i+=e.length,t>=i}).join("")}function nt(e,t,n){return At(t)&&(t=e.indexOf(t),-1===t&&(t=n?e.length:0)),t}function it(e){var t=$n;e=t.indexOf(e),e>-1&&t.splice(e,1)}function rt(e,t,n){At(t)&&it(t),it(n),e.unshift({l:t,p:n})}function at(e,t){return e==t||"all"==e||!e}function ot(e){return $n.some(function(t){return new pt("\\b"+t+"$","i").test(e)})}function st(e,t){return e=At(e)?e.toString():"",e.isBlank()||ot(e)?e:lt(e,t?_n:Tn)}function lt(e,t){return y(t,function(t,n){return e.match(n.l)?(e=e.replace(n.l,n.p),!1):void 0}),e}function ct(e){return e.replace(/^\W*[a-z]/,function(e){return e.toUpperCase()})}var ut=Object,dt=Array,pt=RegExp,ht=Date,ft=String,gt=Number,mt=Math,vt="undefined"!=typeof global?global:this,yt=ut.prototype.toString,bt=ut.prototype.hasOwnProperty,wt=ut.defineProperty&&ut.defineProperties,xt="function"==typeof pt(),kt=!("0"in new ft("a")),Ct={},St=/^\[object Date|Array|String|Number|RegExp|Boolean|Arguments\]$/,_t="Boolean Number String Array Date RegExp Function".split(" "),Tt=n("boolean",_t[0]),$t=n("number",_t[1]),At=n("string",_t[2]),Et=t(_t[3]),Pt=t(_t[4]),It=t(_t[5]),Dt=t(_t[6]);k.prototype.constructor=ut;var Mt,Nt=mt.abs,jt=mt.pow,Ot=mt.ceil,Lt=mt.floor,Rt=mt.round,Ft=mt.min,Ut=mt.max,zt=48,qt=57,Bt=65296,Ht=65305,Vt=".",Wt="",Gt={};i(ut),y(_t,function(e,t){i(vt[t])});var Kt,Xt;for(Xt=0;9>=Xt;Xt++)Kt=ft.fromCharCode(Xt+Bt),Wt+=Kt,Gt[Kt]=ft.fromCharCode(Xt+zt);Gt[","]="",Gt["．"]=Vt,Gt[Vt]=Vt,Mt=pt("["+Wt+"．,"+Vt+"]","g"),r(ut,!1,!1,{keys:function(e){var t=[];if(!g(e)&&!It(e)&&!Dt(e))throw new TypeError("Object required");return y(e,function(e){t.push(e)}),t}}),r(dt,!1,!1,{isArray:function(e){return Et(e)}}),r(dt,!0,!1,{every:function(e,t){var n=this.length,i=0;for(z(arguments);n>i;){if(i in this&&!e.call(t,this[i],i,this))return!1;i++}return!0},some:function(e,t){var n=this.length,i=0;for(z(arguments);n>i;){if(i in this&&e.call(t,this[i],i,this))return!0;i++}return!1},map:function(e,t){t=arguments[1];var n=this.length,i=0,r=Array(n);for(z(arguments);n>i;)i in this&&(r[i]=e.call(t,this[i],i,this)),i++;return r},filter:function(e){var t=arguments[1],n=this.length,i=0,r=[];for(z(arguments);n>i;)i in this&&e.call(t,this[i],i,this)&&r.push(this[i]),i++;return r},indexOf:function(e,t){return At(this)?this.indexOf(e,t):F(this,e,t,1)},lastIndexOf:function(e,t){return At(this)?this.lastIndexOf(e,t):F(this,e,t,-1)},forEach:function(e,t){var n=this.length,i=0;for(d(e);n>i;)i in this&&e.call(t,this[i],i,this),i++},reduce:function(e,t){return U(this,e,t)},reduceRight:function(e,t){return U(this,e,t,!0)}}),r(Function,!0,!1,{bind:function(e){var t,n=this,i=c(arguments,null,1);if(!Dt(this))throw new TypeError("Function.prototype.bind called on a non-function");return t=function(){return n.apply(n.prototype&&this instanceof n?this:e,i.concat(c(arguments)))},t.prototype=this.prototype,t}}),r(ht,!1,!1,{now:function(){return(new ht).getTime()}}),function(){var e=S().match(/^\s+$/);try{ft.prototype.trim.call([1])}catch(t){e=!1}r(ft,!0,!e,{trim:function(){return this.toString().trimLeft().trimRight()},trimLeft:function(){return this.replace(pt("^["+S()+"]+"),"")},trimRight:function(){return this.replace(pt("["+S()+"]+$"),"")}})}(),function(){var e=new ht(ht.UTC(1999,11,31)),e=e.toISOString&&"1999-12-31T00:00:00.000Z"===e.toISOString();a(ht,!0,!e,"toISOString,toJSON",function(e,t){e[t]=function(){return $(this.getUTCFullYear(),4)+"-"+$(this.getUTCMonth()+1,2)+"-"+$(this.getUTCDate(),2)+"T"+$(this.getUTCHours(),2)+":"+$(this.getUTCMinutes(),2)+":"+$(this.getUTCSeconds(),2)+"."+$(this.getUTCMilliseconds(),3)+"Z"}})}();var Yt="AlphanumericSortOrder",Jt="AlphanumericSortIgnore",Qt="AlphanumericSortIgnoreCase",Zt="AlphanumericSortEquivalents",en="AlphanumericSortNatural";r(dt,!1,!0,{create:function(){var e=[];return c(arguments,function(t){(!m(t)&&"length"in t&&("[object Arguments]"===yt.call(t)||t.callee)||!m(t)&&"length"in t&&!At(t)&&!v(t))&&(t=dt.prototype.slice.call(t,0)),e=e.concat(t)}),e}}),r(dt,!0,!1,{find:function(e,t){return d(e),Q(this,e,0,!1,!1,t)},findIndex:function(e,t){var n;return d(e),n=Q(this,e,0,!1,!0,t),h(n)?-1:n}}),r(dt,!0,!0,{findFrom:function(e,t,n){return Q(this,e,t,n)},findIndexFrom:function(e,t,n){return t=Q(this,e,t,n,!0),h(t)?-1:t},findAll:function(e,t,n){var i,r=[];return 0<this.length&&(i=K(e),Y(this,function(e,t,n){i(e,t,n)&&r.push(e)},t,n)),r},count:function(e){return h(e)?this.length:this.findAll(e).length},removeAt:function(e,t){return h(e)?this:(h(t)&&(t=e),this.splice(e,t-e+1),this)},include:function(e,t){return this.clone().add(e,t)},exclude:function(){return dt.prototype.remove.apply(this.clone(),arguments)},clone:function(){return w([],this)},unique:function(e){return Z(this,e)},flatten:function(e){return te(this,e)},union:function(){return Z(this.concat(ne(arguments)))},intersect:function(){return ee(this,ne(arguments),!1)},subtract:function(e){return ee(this,ne(arguments),!0)},at:function(){return O(this,arguments)},first:function(e){return h(e)?this[0]:(0>e&&(e=0),this.slice(0,e))},last:function(e){return h(e)?this[this.length-1]:this.slice(0>this.length-e?0:this.length-e)},from:function(e){return this.slice(e)},to:function(e){return h(e)&&(e=this.length),this.slice(0,e)},min:function(e,t){return ae(this,e,"min",t)},max:function(e,t){return ae(this,e,"max",t)},least:function(e,t){return ae(this.groupBy.apply(this,[e]),"length","min",t)},most:function(e,t){return ae(this.groupBy.apply(this,[e]),"length","max",t)},sum:function(e){return e=e?this.map(e):this,0<e.length?e.reduce(function(e,t){return e+t}):0},average:function(e){return e=e?this.map(e):this,0<e.length?e.sum()/e.length:0},inGroups:function(e,t){var n=1<arguments.length,i=this,r=[],a=Ot(this.length/e);return b(e,function(e){e*=a;var o=i.slice(e,e+a);n&&o.length<a&&b(a-o.length,function(){o=o.add(t)}),r.push(o)}),r},inGroupsOf:function(e,t){var n,i=[],r=this.length,a=this;return 0===r||0===e?a:(h(e)&&(e=1),h(t)&&(t=null),b(Ot(r/e),function(r){for(n=a.slice(e*r,e*r+e);n.length<e;)n.push(t);i.push(n)}),i)},isEmpty:function(){return 0==this.compact().length},sortBy:function(e,t){var n=this.clone();return n.sort(function(i,r){var a,o;return a=X(i,e,n,[i]),o=X(r,e,n,[r]),(At(a)&&At(o)?oe(a,o):o>a?-1:a>o?1:0)*(t?-1:1)}),n},randomize:function(){for(var e,t,n=this.concat(),i=n.length;i;)e=mt.random()*i|0,t=n[--i],n[i]=n[e],n[e]=t;return n},zip:function(){var e=c(arguments);return this.map(function(t,n){return[t].concat(e.map(function(e){return n in e?e[n]:null}))})},sample:function(e){var t=this.randomize();return 0<arguments.length?t.slice(0,e):t[0]},each:function(e,t,n){return Y(this,e,t,n),this},add:function(e,t){return(!$t(gt(t))||isNaN(t))&&(t=this.length),dt.prototype.splice.apply(this,[t,0].concat(e)),this},remove:function(){var e=this;return c(arguments,function(t){var n=0;for(t=K(t);n<e.length;)t(e[n],n,e)?e.splice(n,1):n++}),e},compact:function(e){var t=[];return Y(this,function(n){Et(n)?t.push(n.compact()):e&&n?t.push(n):e||null==n||n.valueOf()!==n.valueOf()||t.push(n)}),t},groupBy:function(e,t){var n,i=this,r={};return Y(i,function(t,a){n=X(t,e,i,[t,a,i]),r[n]||(r[n]=[]),r[n].push(t)}),t&&y(r,t),r},none:function(){return!this.any.apply(this,arguments)}}),r(dt,!0,!0,{all:dt.prototype.every,any:dt.prototype.some,insert:dt.prototype.add}),r(ut,!1,!0,{map:function(e,t){var n,i,r={};for(n in e)f(e,n)&&(i=e[n],r[n]=X(i,t,e,[n,i,e]));return r},reduce:function(e){var t=ut.keys(x(e)).map(function(t){return e[t]});return t.reduce.apply(t,c(arguments,null,1))},each:function(e,t){return d(t),y(e,t),e},size:function(e){return ut.keys(x(e)).length}});var tn="any all none count find findAll isEmpty".split(" "),nn="sum average min max least most".split(" "),rn=["map","reduce","size"],an=tn.concat(nn).concat(rn);!function(){function e(){var e=arguments;return 0<e.length&&!Dt(e[0])}var t=dt.prototype.map;a(dt,!0,e,"every,all,some,filter,any,none,find,findIndex",function(e,t){var n=dt.prototype[t];e[t]=function(e){var t=K(e);return n.call(this,function(e,n){return t(e,n,this)})}}),r(dt,!0,e,{map:function(e){return t.call(this,function(t,n){return X(t,e,this,[t,n,this])})}})}(),function(){dt[Yt]="AÁÀÂÃĄBCĆČÇDĎÐEÉÈĚÊËĘFGĞHıIÍÌİÎÏJKLŁMNŃŇÑOÓÒÔPQRŘSŚŠŞTŤUÚÙŮÛÜVWXYÝZŹŻŽÞÆŒØÕÅÄÖ".split("").map(function(e){return e+e.toLowerCase()}).join("");var e={};Y("AÁÀÂÃÄ CÇ EÉÈÊË IÍÌİÎÏ OÓÒÔÕÖ Sß UÚÙÛÜ".split(" "),function(t){var n=t.charAt(0);Y(t.slice(1).split(""),function(t){e[t]=n,e[t.toLowerCase()]=n.toLowerCase()})}),dt[en]=!0,dt[Qt]=!0,dt[Zt]=e}(),le(tn),le(nn,!0),R(rn,k),dt.AlphanumericSort=oe;var on,sn,ln,cn,un,dn="ampm hour minute second ampm utc offset_sign offset_hours offset_minutes ampm".split(" "),pn="({t})?\\s*(\\d{1,2}(?:[,.]\\d+)?)(?:{h}([0-5]\\d(?:[,.]\\d+)?)?{m}(?::?([0-5]\\d(?:[,.]\\d+)?){s})?\\s*(?:({t})|(Z)|(?:([+-])(\\d{2,2})(?::?(\\d{2,2}))?)?)?|\\s*({t}))",hn={},fn=[],gn={},mn={yyyy:function(e){return I(e,"FullYear")},yy:function(e){return I(e,"FullYear")%100},ord:function(e){return e=I(e,"Date"),e+A(e)},tz:function(e){return e.getUTCOffset()},isotz:function(e){return e.getUTCOffset(!0)},Z:function(e){return e.getUTCOffset()},ZZ:function(e){return e.getUTCOffset().replace(/(\d{2})$/,":$1")}},vn=[{name:"year",method:"FullYear",k:!0,b:function(e){return 864e5*(365+(e?e.isLeapYear()?1:0:.25))}},{name:"month",error:.919,method:"Month",k:!0,b:function(e,t){var n,i=30.4375;return e&&(n=e.daysInMonth(),t<=n.days()&&(i=n)),864e5*i}},{name:"week",method:"ISOWeek",b:e(6048e5)},{name:"day",error:.958,method:"Date",k:!0,b:e(864e5)},{name:"hour",method:"Hours",b:e(36e5)},{name:"minute",method:"Minutes",b:e(6e4)},{name:"second",method:"Seconds",b:e(1e3)},{name:"millisecond",method:"Milliseconds",b:e(1)}],yn={};ce.prototype={getMonth:function(e){return $t(e)?e-1:this.months.indexOf(e)%12},getWeekday:function(e){return this.weekdays.indexOf(e)%7},addFormat:function(e,t,n,i,r){var a,o=n||[],s=this;e=e.replace(/\s+/g,"[,. ]*"),e=e.replace(/\{([^,]+?)\}/g,function(e,t){var i,r,a,l=t.match(/\?$/);a=t.match(/^(\d+)\??$/);var c=t.match(/(\d)(?:-(\d))?/),u=t.replace(/[^a-z]+$/,"");return a?i=s.tokens[a[1]]:s[u]?i=s[u]:s[u+"s"]&&(i=s[u+"s"],c&&(r=[],i.forEach(function(e,t){var n=t%(s.units?8:i.length);n>=c[1]&&n<=(c[2]||c[1])&&r.push(e)}),i=r),i=ye(i)),a?a="(?:"+i+")":(n||o.push(u),a="("+i+")"),l&&(a+="?"),a}),t?(t=Le(s,r),r=["t","[\\s\\u3000]"].concat(s.timeMarker),a=e.match(/\\d\{\d,\d\}\)+\??$/),me(s,"(?:"+t+")[,\\s\\u3000]+?"+e,dn.concat(o),i),me(s,e+"(?:[,\\s]*(?:"+r.join("|")+(a?"+":"*")+")"+t+")?",o.concat(dn),i)):me(s,e,o,i)}},r(ht,!1,!0,{create:function(){return Re(arguments)},past:function(){return Re(arguments,-1)},future:function(){return Re(arguments,1)},addLocale:function(e,t){return ge(e,t)},setLocale:function(e){var t=fe(e,!1);return sn=t,e&&e!=t.code&&(t.code=e),t},getLocale:function(e){return e?fe(e,!1):sn},addFormat:function(e,t,n){me(fe(n),e,t)}}),r(ht,!0,!0,{set:function(){var e=we(arguments);return Oe(this,e[0],e[1])},setWeekday:function(e){return h(e)?void 0:D(this,"Date",I(this,"Date")+e-I(this,"Day"))},setISOWeek:function(e){var t=I(this,"Day")||7;return h(e)?void 0:(this.set({month:0,date:4}),this.set({weekday:1}),e>1&&this.addWeeks(e-1),1!==t&&this.advance({days:t-1}),this.getTime())},getISOWeek:function(){var e;e=this.clone();var t=I(e,"Day")||7;return e.addDays(4-t).reset(),1+Lt(e.daysSince(e.clone().beginningOfYear())/7)},beginningOfISOWeek:function(){var e=this.getDay();return 0===e?e=-6:1!==e&&(e=1),this.setWeekday(e),this.reset()},endOfISOWeek:function(){return 0!==this.getDay()&&this.setWeekday(7),this.endOfDay()},getUTCOffset:function(e){var t=this._utc?0:this.getTimezoneOffset(),n=!0===e?":":"";return!t&&e?"Z":$(Lt(-t/60),2,!0)+n+$(Nt(t%60),2)},utc:function(e){return l(this,"_utc",!0===e||0===arguments.length),this},isUTC:function(){return!!this._utc||0===this.getTimezoneOffset()},advance:function(){var e=we(arguments,!0);return Oe(this,e[0],e[1],1)},rewind:function(){var e=we(arguments,!0);return Oe(this,e[0],e[1],-1)},isValid:function(){return!isNaN(this.getTime())},isAfter:function(e,t){return this.getTime()>ht.create(e).getTime()-(t||0)},isBefore:function(e,t){return this.getTime()<ht.create(e).getTime()+(t||0)},isBetween:function(e,t,n){var i=this.getTime();e=ht.create(e).getTime();var r=ht.create(t).getTime();return t=Ft(e,r),e=Ut(e,r),n=n||0,i>t-n&&e+n>i},isLeapYear:function(){var e=I(this,"FullYear");return 0===e%4&&0!==e%100||0===e%400},daysInMonth:function(){return 32-I(new ht(I(this,"FullYear"),I(this,"Month"),32),"Date")},format:function(e,t){return Me(this,e,!1,t)},relative:function(e,t){
return At(e)&&(t=e,e=null),Me(this,e,!0,t)},is:function(e,t,n){var i,r;if(this.isValid()){if(At(e))switch(e=e.trim().toLowerCase(),r=this.clone().utc(n),!0){case"future"===e:return this.getTime()>be().getTime();case"past"===e:return this.getTime()<be().getTime();case"weekday"===e:return 0<I(r,"Day")&&6>I(r,"Day");case"weekend"===e:return 0===I(r,"Day")||6===I(r,"Day");case-1<(i=on.weekdays.indexOf(e)%7):return I(r,"Day")===i;case-1<(i=on.months.indexOf(e)%12):return I(r,"Month")===i}return Ne(this,e,null,t,n)}},reset:function(e){var t,n={};return e=e||"hours","date"===e&&(e="days"),t=vn.some(function(t){return e===t.name||e===t.name+"s"}),n[e]=e.match(/^days?/)?1:0,t?this.set(n,!0):this},clone:function(){var e=new ht(this.getTime());return e.utc(!!this._utc),e}}),r(ht,!0,!0,{iso:function(){return this.toISOString()},getWeekday:ht.prototype.getDay,getUTCWeekday:ht.prototype.getUTCDay}),r(gt,!0,!0,{duration:function(e){return e=fe(e),ue(e,$e(this),"duration")}}),on=sn=ht.addLocale("en",{plural:!0,timeMarker:"at",ampm:"am,pm",months:"January,February,March,April,May,June,July,August,September,October,November,December",weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",units:"millisecond:|s,second:|s,minute:|s,hour:|s,day:|s,week:|s,month:|s,year:|s",numbers:"one,two,three,four,five,six,seven,eight,nine,ten",articles:"a,an,the",tokens:"the,st|nd|rd|th,of","short":"{Month} {d}, {yyyy}","long":"{Month} {d}, {yyyy} {h}:{mm}{tt}",full:"{Weekday} {Month} {d}, {yyyy} {h}:{mm}:{ss}{tt}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",modifiers:[{name:"sign",src:"ago|before",value:-1},{name:"sign",src:"from now|after|from|in|later",value:1},{name:"edge",src:"last day",value:-2},{name:"edge",src:"end",value:-1},{name:"edge",src:"first day|beginning",value:1},{name:"shift",src:"last",value:-1},{name:"shift",src:"the|this",value:0},{name:"shift",src:"next",value:1}],dateParse:["{month} {year}","{shift} {unit=5-7}","{0?} {date}{1}","{0?} {edge} of {shift?} {unit=4-7?}{month?}{year?}"],timeParse:"{num} {unit} {sign};{sign} {num} {unit};{0} {num}{1} {day} of {month} {year?};{weekday?} {month} {date}{1?} {year?};{date} {month} {year};{date} {month};{shift} {weekday};{shift} week {weekday};{weekday} {2?} {shift} week;{num} {unit=4-5} {sign} {day};{0?} {date}{1} of {month};{0?}{month?} {date?}{1?} of {shift} {unit=6-7}".split(";")}),un=vn.concat().reverse(),cn=vn.concat(),cn.splice(2,1),a(ht,!0,!0,vn,function(e,t,n){function i(e){e/=l;var n=e%1,i=t.error||.999;return n&&Nt(n%1)>i&&(e=Rt(e)),0>e?Ot(e):Lt(e)}var r,a,o=t.name,s=ve(o),l=t.b();t.j="add"+s+"s",r=function(e,t){return i(this.getTime()-ht.create(e,t).getTime())},a=function(e,t){return i(ht.create(e,t).getTime()-this.getTime())},e[o+"sAgo"]=a,e[o+"sUntil"]=a,e[o+"sSince"]=r,e[o+"sFromNow"]=r,e[t.j]=function(e,t){var n={};return n[o]=e,this.advance(n,t)},Fe(t,l),3>n&&["Last","This","Next"].forEach(function(t){e["is"+t+s]=function(){return Ne(this,t+" "+o,"en")}}),4>n&&(e["beginningOf"+s]=function(){var e={};switch(o){case"year":e.year=I(this,"FullYear");break;case"month":e.month=I(this,"Month");break;case"day":e.day=I(this,"Date");break;case"week":e.weekday=0}return this.set(e,!0)},e["endOf"+s]=function(){var e={hours:23,minutes:59,seconds:59,milliseconds:999};switch(o){case"year":e.month=11,e.day=31;break;case"month":e.day=this.daysInMonth();break;case"week":e.weekday=6}return this.set(e,!0)})}),on.addFormat("([+-])?(\\d{4,4})[-.]?{full_month}[-.]?(\\d{1,2})?",!0,["year_sign","year","month","date"],!1,!0),on.addFormat("(\\d{1,2})[-.\\/]{full_month}(?:[-.\\/](\\d{2,4}))?",!0,["date","month","year"],!0),on.addFormat("{full_month}[-.](\\d{4,4})",!1,["month","year"]),on.addFormat("\\/Date\\((\\d+(?:[+-]\\d{4,4})?)\\)\\/",!1,["timestamp"]),on.addFormat(Le(on),!1,dn),fn=on.g.slice(0,7).reverse(),on.g=on.g.slice(7).concat(fn),Ie("f",function(e){return I(e,"Milliseconds")},!0),Ie("s",function(e){return I(e,"Seconds")}),Ie("m",function(e){return I(e,"Minutes")}),Ie("h",function(e){return I(e,"Hours")%12||12}),Ie("H",function(e){return I(e,"Hours")}),Ie("d",function(e){return I(e,"Date")}),Ie("M",function(e){return I(e,"Month")+1}),function(){function e(e,t){var n=I(e,"Hours");return fe(t).ampm[Lt(n/12)]||""}Pe("t",e,1),Pe("tt",e),Pe("T",e,1,1),Pe("TT",e,null,2)}(),function(){function e(e,t){var n=I(e,"Day");return fe(t).weekdays[n]}Pe("dow",e,3),Pe("Dow",e,3,1),Pe("weekday",e),Pe("Weekday",e,null,1)}(),Ee("mon",0,3),Ee("month",0),Ee("month2",1),Ee("month3",2),mn.ms=mn.f,mn.milliseconds=mn.f,mn.seconds=mn.s,mn.minutes=mn.m,mn.hours=mn.h,mn["24hr"]=mn.H,mn["12hr"]=mn.h,mn.date=mn.d,mn.day=mn.d,mn.year=mn.yyyy,a(ht,!0,!0,"short,long,full",function(e,t){e[t]=function(e){return Me(this,t,!1,e)}}),"〇一二三四五六七八九十百千万".split("").forEach(function(e,t){t>9&&(t=jt(10,t-9)),hn[e]=t}),w(hn,Gt),ln=pt("([期週周])?([〇一二三四五六七八九十百千万"+Wt+"]+)(?!昨)","g"),function(){var e=on.weekdays.slice(0,7),t=on.months.slice(0,12);a(ht,!0,!0,"today yesterday tomorrow weekday weekend future past".split(" ").concat(e).concat(t),function(e,t){e["is"+ve(t)]=function(e){return this.is(t,0,e)}})}(),ht.utc||(ht.utc={create:function(){return Re(arguments,0,!0)},past:function(){return Re(arguments,-1,!0)},future:function(){return Re(arguments,1,!0)}}),r(ht,!1,!0,{RFC1123:"{Dow}, {dd} {Mon} {yyyy} {HH}:{mm}:{ss} {tz}",RFC1036:"{Weekday}, {dd}-{Mon}-{yy} {HH}:{mm}:{ss} {tz}",ISO8601_DATE:"{yyyy}-{MM}-{dd}",ISO8601_DATETIME:"{yyyy}-{MM}-{dd}T{HH}:{mm}:{ss}.{fff}{isotz}"}),r(Function,!0,!0,{lazy:function(e,t,n){function i(){return c.length<n-(u&&t?1:0)&&c.push([this,arguments]),u||(u=!0,t?r():Ue(i,a,r)),s}var r,a,o,s,l=this,c=[],u=!1;return e=e||1,n=n||1/0,a=Ot(e),o=Rt(a/e)||1,r=function(){var e,t=c.length;if(0!=t){for(e=Ut(t-o,0);t>e;)s=Function.prototype.apply.apply(l,c.shift()),t--;Ue(i,a,function(){u=!1,r()})}},i},throttle:function(e){return this.lazy(e,!0,1)},debounce:function(e){function t(){t.cancel(),Ue(t,e,n,this,arguments)}var n=this;return t},delay:function(e){var t=c(arguments,null,1);return Ue(this,e,this,this,t),this},every:function(e){function t(){n.apply(n,i),Ue(n,e,t)}var n=this,i=arguments,i=1<i.length?c(i,null,1):[];return Ue(n,e,t),n},cancel:function(){var e,t=this.timers;if(Et(t))for(;e=t.shift();)clearTimeout(e);return this.n=!0,this},after:function(e){var t=this,n=0,i=[];if($t(e)){if(0===e)return t.call(),t}else e=1;return function(){var r;return i.push(c(arguments)),n++,n==e?(r=t.call(this,i),n=0,i=[],r):void 0}},once:function(){return this.throttle(1/0,!0)},fill:function(){var e=this,t=c(arguments);return function(){var n=c(arguments);return t.forEach(function(e,t){(null!=e||t>=n.length)&&n.splice(t,0,e)}),e.apply(this,n)}}}),r(gt,!1,!0,{random:function(e,t){var n,i;return 1==arguments.length&&(t=e,e=0),n=Ft(e||0,h(t)?1:t),i=Ut(e||0,h(t)?1:t)+1,Lt(mt.random()*(i-n)+n)}}),r(gt,!0,!0,{log:function(e){return mt.log(this)/(e?mt.log(e):1)},abbr:function(e){return ze(this,e,"kmbt",0,4)},metric:function(e,t){return ze(this,e,"nμm kMGTPE",4,h(t)?1:t)},bytes:function(e,t){return ze(this,e,"kMGTPE",0,h(t)?4:t,!0)+"B"},isInteger:function(){return 0==this%1},isOdd:function(){return!isNaN(this)&&!this.isMultipleOf(2)},isEven:function(){return this.isMultipleOf(2)},isMultipleOf:function(e){return 0===this%e},format:function(e,t,n){var i,r,a,o="";for(h(t)&&(t=","),h(n)&&(n="."),i=($t(e)?C(this,e||0).toFixed(Ut(e,0)):this.toString()).replace(/^-/,"").split("."),r=i[0],a=i[1],i=r.length;i>0;i-=3)i<r.length&&(o=t+o),o=r.slice(Ut(0,i-3),i)+o;return a&&(o+=n+_("0",(e||0)-a.length)+a),(0>this?"-":"")+o},hex:function(e){return this.pad(e||1,!1,16)},times:function(e){if(e)for(var t=0;this>t;t++)e.call(this,t);return this.toNumber()},chr:function(){return ft.fromCharCode(this)},pad:function(e,t,n){return $(this,e,t,n)},ordinalize:function(){var e=Nt(this),e=parseInt(e.toString().slice(-2));return this+A(e)},toNumber:function(){return parseFloat(this,10)}}),function(){function e(e){return function(t){return t?C(this,t,e):e(this)}}r(gt,!0,!0,{ceil:e(Ot),round:e(Rt),floor:e(Lt)}),a(gt,!0,!0,"abs,pow,sin,asin,cos,acos,tan,atan,exp,pow,sqrt",function(e,t){e[t]=function(e,n){return mt[t](this,e,n)}})}();var bn=["isObject","isNaN"],wn="keys values select reject each merge clone equal watch tap has toQueryString".split(" ");r(ut,!1,!0,{watch:function(e,t,n){if(wt){var i=e[t];ut.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return i},set:function(r){i=n.call(e,t,i,r)}})}}}),r(ut,!1,function(){return 1<arguments.length},{keys:function(e,t){var n=ut.keys(e);return n.forEach(function(n){t.call(e,n,e[n])}),n}}),r(ut,!1,!0,{isObject:function(e){return v(e)},isNaN:function(e){return $t(e)&&e.valueOf()!==e.valueOf()},equal:function(e,t){return N(e,t)},extended:function(e){return new k(e)},merge:function(e,t,n,i){var r,a,o,s,l,c,u;if(e&&"string"!=typeof t)for(r in t)if(f(t,r)&&e){if(s=t[r],l=e[r],c=p(l),a=g(s),o=g(l),u=c&&!1===i?l:s,c&&Dt(i)&&(u=i.call(t,r,l,s)),n&&(a||o))if(Pt(s))u=new ht(s.getTime());else{if(!It(s)){o||(e[r]=dt.isArray(s)?[]:{}),ut.merge(e[r],s,n,i);continue}u=new pt(s.source,E(s))}e[r]=u}return e},values:function(e,t){var n=[];return y(e,function(i,r){n.push(r),t&&t.call(e,r)}),n},clone:function(e,t){var n;if(!g(e))return e;if(n=yt.call(e),Pt(e,n)&&e.clone)return e.clone();if(Pt(e,n)||It(e,n))return new e.constructor(e);if(e instanceof k)n=new k;else if(Et(e,n))n=[];else{if(!v(e,n))throw new TypeError("Clone must be a basic data type.");n={}}return ut.merge(n,e,t)},fromQueryString:function(e,t){var n=ut.extended();return e=e&&e.toString?e.toString():"",e.replace(/^.*?\?/,"").split("&").forEach(function(e){e=e.split("="),2===e.length&&qe(n,e[0],decodeURIComponent(e[1]),t)}),n},toQueryString:function(e,t){return Be(t,e)},tap:function(e,t){var n=t;return Dt(t)||(n=function(){t&&e[t]()}),n.call(e,e),e},has:function(e,t){return f(e,t)},select:function(e){return Ve(e,arguments,!0)},reject:function(e){return Ve(e,arguments,!1)}}),a(ut,!1,!0,_t,function(e,t){var n="is"+t;bn.push(n),e[n]=Ct[t]}),r(ut,!1,function(){return 0===arguments.length},{extend:function(){var e=bn.concat(wn);"undefined"!=typeof an&&(e=e.concat(an)),R(e,ut)}}),R(wn,k),We.prototype.toString=function(){return this.isValid()?this.start+".."+this.end:"Invalid Range"},r(We,!0,!0,{isValid:function(){return Ke(this.start)&&Ke(this.end)&&typeof this.start==typeof this.end},span:function(){return this.isValid()?Nt((At(this.end)?this.end.charCodeAt(0):this.end)-(At(this.start)?this.start.charCodeAt(0):this.start))+1:0/0},contains:function(e){return null==e?!1:e.start&&e.end?e.start>=this.start&&e.start<=this.end&&e.end>=this.start&&e.end<=this.end:e>=this.start&&e<=this.end},every:function(e,t){var n,i=this.start,r=this.end,a=i>r,o=i,s=0,l=[];for(Dt(e)&&(t=e,e=null),e=e||1,$t(i)?n=Je:At(i)?n=Ye:Pt(i)&&(n=e,$t(n)?e=n:(i=n.toLowerCase().match(/^(\d+)?\s?(\w+?)s?$/i),n=parseInt(i[1])||1,i=i[2].slice(0,1).toUpperCase()+i[2].slice(1),i.match(/hour|minute|second/i)?i+="s":"Year"===i?i="FullYear":"Day"===i&&(i="Date"),e=[n,i]),n=Xe),a&&e>0&&(e*=-1);a?o>=r:r>=o;)l.push(o),t&&t(o,s),o=n(o,e),s++;return l},union:function(e){return new We(this.start<e.start?this.start:e.start,this.end>e.end?this.end:e.end)},intersect:function(e){return e.start>this.end||e.end<this.start?new We(0/0,0/0):new We(this.start>e.start?this.start:e.start,this.end<e.end?this.end:e.end)},clone:function(){return new We(this.start,this.end)},clamp:function(e){var t=this.start,n=this.end,i=t>n?n:t,t=t>n?t:n;return Ge(i>e?i:e>t?t:e)}}),[gt,ft,ht].forEach(function(e){r(e,!1,!0,{range:function(t,n){return e.create&&(t=e.create(t),n=e.create(n)),new We(t,n)}})}),r(gt,!0,!0,{upto:function(e,t,n){return gt.range(this,e).every(n,t)},clamp:function(e,t){return new We(e,t).clamp(this)},cap:function(e){return this.clamp(void 0,e)}}),r(gt,!0,!0,{downto:gt.prototype.upto}),r(dt,!1,function(e){return e instanceof We},{create:function(e){return e.every()}}),r(pt,!1,!0,{escape:function(e){return P(e)}}),r(pt,!0,!0,{getFlags:function(){return E(this)},setFlags:function(e){return pt(this.source,e)},addFlag:function(e){return this.setFlags(E(this,e))},removeFlag:function(e){return this.setFlags(E(this).replace(e,""))}});var xn,kn;r(ft,!0,!1,{repeat:function(e){return e=Qe(e),_(this,e)}}),r(ft,!0,function(e){return It(e)||2<arguments.length},{startsWith:function(e){var t=arguments,n=t[1],t=t[2],i=this;return n&&(i=i.slice(n)),h(t)&&(t=!0),n=It(e)?e.source.replace("^",""):P(e),pt("^"+n,t?"":"i").test(i)},endsWith:function(e){var t=arguments,n=t[1],t=t[2],i=this;return p(n)&&(i=i.slice(0,n)),h(t)&&(t=!0),n=It(e)?e.source.replace("$",""):P(e),pt(n+"$",t?"":"i").test(i)}}),r(ft,!0,!0,{escapeRegExp:function(){return P(this)},escapeURL:function(e){return e?encodeURIComponent(this):encodeURI(this)},unescapeURL:function(e){return e?decodeURI(this):decodeURIComponent(this)},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2f;")},unescapeHTML:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&#x2f;/g,"/").replace(/&amp;/g,"&")},encodeBase64:function(){return xn(unescape(encodeURIComponent(this)))},decodeBase64:function(){return decodeURIComponent(escape(kn(this)))},each:function(e,t){var n,i,r;if(Dt(e)?(t=e,e=/[\s\S]/g):e?At(e)?e=pt(P(e),"gi"):It(e)&&(e=pt(e.source,E(e,"g"))):e=/[\s\S]/g,n=this.match(e)||[],t)for(i=0,r=n.length;r>i;i++)n[i]=t.call(this,n[i],i,n)||n[i];return n},shift:function(e){var t="";return e=e||0,this.codes(function(n){t+=ft.fromCharCode(n+e)}),t},codes:function(e){var t,n,i=[];for(t=0,n=this.length;n>t;t++){var r=this.charCodeAt(t);i.push(r),e&&e.call(this,r,t)}return i},chars:function(e){return this.each(e)},words:function(e){return this.trim().each(/\S+/g,e)},lines:function(e){return this.trim().each(/^.*$/gm,e)},paragraphs:function(e){var t=this.trim().split(/[\r\n]{2,}/);return t=t.map(function(t){if(e)var n=e.call(t);return n?n:t})},isBlank:function(){return 0===this.trim().length},has:function(e){return-1!==this.search(It(e)?e:P(e))},add:function(e,t){return t=h(t)?this.length:t,this.slice(0,t)+e+this.slice(t)},remove:function(e){return this.replace(e,"")},reverse:function(){return this.split("").reverse().join("")},compact:function(){return this.trim().replace(/([\r\n\s\u3000])+/g,function(e,t){return"　"===t?t:" "})},at:function(){return O(this,arguments,!0)},from:function(e){return this.slice(nt(this,e,!0))},to:function(e){return h(e)&&(e=this.length),this.slice(0,nt(this,e))},dasherize:function(){return this.underscore().replace(/_/g,"-")},underscore:function(){return this.replace(/[-\s]+/g,"_").replace(ft.Inflector&&ft.Inflector.acronymRegExp,function(e,t){return(t>0?"_":"")+e.toLowerCase()}).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase()},camelize:function(e){return this.underscore().replace(/(^|_)([^_]+)/g,function(t,n,i,r){return t=(t=ft.Inflector)&&t.acronyms[i],t=At(t)?t:void 0,r=!1!==e||r>0,t?r?t:t.toLowerCase():r?i.capitalize():i})},spacify:function(){return this.underscore().replace(/_/g," ")},stripTags:function(){var e=this;return u(0<arguments.length?arguments:[""],function(t){e=e.replace(pt("</?"+P(t)+"[^<>]*>","gi"),"")}),e},removeTags:function(){var e=this;return u(0<arguments.length?arguments:["\\S+"],function(t){t=pt("<("+t+")[^<>]*(?:\\/>|>.*?<\\/\\1>)","gi"),e=e.replace(t,"")}),e},truncate:function(e,t,n){return et(this,e,t,n)},truncateOnWord:function(e,t,n){return et(this,e,t,n,!0)},pad:function(e,t){var n,i;return e=Qe(e),n=Ut(0,e-this.length)/2,i=Lt(n),n=Ot(n),Ze(i,t)+this+Ze(n,t)},padLeft:function(e,t){return e=Qe(e),Ze(Ut(0,e-this.length),t)+this},padRight:function(e,t){return e=Qe(e),this+Ze(Ut(0,e-this.length),t)},first:function(e){return h(e)&&(e=1),this.substr(0,e)},last:function(e){return h(e)&&(e=1),this.substr(0>this.length-e?0:this.length-e)},toNumber:function(e){return T(this,e)},capitalize:function(e){var t;return this.toLowerCase().replace(e?/[^']/g:/^\S/,function(e){var n,i=e.toUpperCase();return n=t?e:i,t=i!==e,n})},assign:function(){var e={};return u(arguments,function(t,n){g(t)?w(e,t):e[n+1]=t}),this.replace(/\{([^{]+?)\}/g,function(t,n){return f(e,n)?e[n]:t})}}),r(ft,!0,!0,{insert:ft.prototype.add}),function(e){if(vt.btoa)xn=vt.btoa,kn=vt.atob;else{var t=/[^A-Za-z0-9\+\/\=]/g;xn=function(t){var n,i,r,a,o,s,l="",c=0;do n=t.charCodeAt(c++),i=t.charCodeAt(c++),r=t.charCodeAt(c++),a=n>>2,n=(3&n)<<4|i>>4,o=(15&i)<<2|r>>6,s=63&r,isNaN(i)?o=s=64:isNaN(r)&&(s=64),l=l+e.charAt(a)+e.charAt(n)+e.charAt(o)+e.charAt(s);while(c<t.length);return l},kn=function(n){var i,r,a,o,s,l="",c=0;if(n.match(t))throw Error("String contains invalid base64 characters");n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");do i=e.indexOf(n.charAt(c++)),r=e.indexOf(n.charAt(c++)),o=e.indexOf(n.charAt(c++)),s=e.indexOf(n.charAt(c++)),i=i<<2|r>>4,r=(15&r)<<4|o>>2,a=(3&o)<<6|s,l+=ft.fromCharCode(i),64!=o&&(l+=ft.fromCharCode(r)),64!=s&&(l+=ft.fromCharCode(a));while(c<n.length);return l}}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=");var Cn,Sn,_n=[],Tn=[],$n=[],An=[],En={};Sn={acronym:function(e){En[e.toLowerCase()]=e,e=ut.keys(En).map(function(e){return En[e]}),Sn.acronymRegExp=pt(e.join("|"),"g")},plural:function(e,t){rt(_n,e,t)},singular:function(e,t){rt(Tn,e,t)},irregular:function(e,t){var n=e.first(),i=e.from(1),r=t.first(),a=t.from(1),o=r.toUpperCase(),s=r.toLowerCase(),l=n.toUpperCase(),c=n.toLowerCase();it(e),it(t),l==o?(Sn.plural(new pt("({1}){2}$".assign(n,i),"i"),"$1"+a),Sn.plural(new pt("({1}){2}$".assign(r,a),"i"),"$1"+a),Sn.singular(new pt("({1}){2}$".assign(r,a),"i"),"$1"+i)):(Sn.plural(new pt("{1}{2}$".assign(l,i)),o+a),Sn.plural(new pt("{1}{2}$".assign(c,i)),s+a),Sn.plural(new pt("{1}{2}$".assign(o,a)),o+a),Sn.plural(new pt("{1}{2}$".assign(s,a)),s+a),Sn.singular(new pt("{1}{2}$".assign(o,a)),l+i),Sn.singular(new pt("{1}{2}$".assign(s,a)),c+i))},uncountable:function(e){var t=dt.isArray(e)?e:c(arguments);$n=$n.concat(t)},human:function(e,t){An.unshift({l:e,p:t})},clear:function(e){at(e,"singulars")&&(Tn=[]),at(e,"plurals")&&(_n=[]),at(e,"uncountables")&&($n=[]),at(e,"humans")&&(An=[]),at(e,"acronyms")&&(En={})}},Cn="and or nor a an the so but to of at by from into on onto off out in over with for".split(" "),Sn.plural(/$/,"s"),Sn.plural(/s$/gi,"s"),Sn.plural(/(ax|test)is$/gi,"$1es"),Sn.plural(/(octop|vir|fung|foc|radi|alumn)(i|us)$/gi,"$1i"),Sn.plural(/(census|alias|status)$/gi,"$1es"),Sn.plural(/(bu)s$/gi,"$1ses"),Sn.plural(/(buffal|tomat)o$/gi,"$1oes"),Sn.plural(/([ti])um$/gi,"$1a"),Sn.plural(/([ti])a$/gi,"$1a"),Sn.plural(/sis$/gi,"ses"),Sn.plural(/f+e?$/gi,"ves"),Sn.plural(/(cuff|roof)$/gi,"$1s"),Sn.plural(/([ht]ive)$/gi,"$1s"),Sn.plural(/([^aeiouy]o)$/gi,"$1es"),Sn.plural(/([^aeiouy]|qu)y$/gi,"$1ies"),Sn.plural(/(x|ch|ss|sh)$/gi,"$1es"),Sn.plural(/(matr|vert|ind)(?:ix|ex)$/gi,"$1ices"),Sn.plural(/([ml])ouse$/gi,"$1ice"),Sn.plural(/([ml])ice$/gi,"$1ice"),Sn.plural(/^(ox)$/gi,"$1en"),Sn.plural(/^(oxen)$/gi,"$1"),Sn.plural(/(quiz)$/gi,"$1zes"),Sn.plural(/(phot|cant|hom|zer|pian|portic|pr|quart|kimon)o$/gi,"$1os"),Sn.plural(/(craft)$/gi,"$1"),Sn.plural(/([ft])[eo]{2}(th?)$/gi,"$1ee$2"),Sn.singular(/s$/gi,""),Sn.singular(/([pst][aiu]s)$/gi,"$1"),Sn.singular(/([aeiouy])ss$/gi,"$1ss"),Sn.singular(/(n)ews$/gi,"$1ews"),Sn.singular(/([ti])a$/gi,"$1um"),Sn.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/gi,"$1$2sis"),Sn.singular(/(^analy)ses$/gi,"$1sis"),Sn.singular(/(i)(f|ves)$/i,"$1fe"),Sn.singular(/([aeolr]f?)(f|ves)$/i,"$1f"),Sn.singular(/([ht]ive)s$/gi,"$1"),Sn.singular(/([^aeiouy]|qu)ies$/gi,"$1y"),Sn.singular(/(s)eries$/gi,"$1eries"),Sn.singular(/(m)ovies$/gi,"$1ovie"),Sn.singular(/(x|ch|ss|sh)es$/gi,"$1"),Sn.singular(/([ml])(ous|ic)e$/gi,"$1ouse"),Sn.singular(/(bus)(es)?$/gi,"$1"),Sn.singular(/(o)es$/gi,"$1"),Sn.singular(/(shoe)s?$/gi,"$1"),Sn.singular(/(cris|ax|test)[ie]s$/gi,"$1is"),Sn.singular(/(octop|vir|fung|foc|radi|alumn)(i|us)$/gi,"$1us"),Sn.singular(/(census|alias|status)(es)?$/gi,"$1"),Sn.singular(/^(ox)(en)?/gi,"$1"),Sn.singular(/(vert|ind)(ex|ices)$/gi,"$1ex"),Sn.singular(/(matr)(ix|ices)$/gi,"$1ix"),Sn.singular(/(quiz)(zes)?$/gi,"$1"),Sn.singular(/(database)s?$/gi,"$1"),Sn.singular(/ee(th?)$/gi,"oo$1"),Sn.irregular("person","people"),Sn.irregular("man","men"),Sn.irregular("child","children"),Sn.irregular("sex","sexes"),Sn.irregular("move","moves"),Sn.irregular("save","saves"),Sn.irregular("cow","kine"),Sn.irregular("goose","geese"),Sn.irregular("zombie","zombies"),Sn.uncountable("equipment information rice money species series fish sheep jeans".split(" ")),r(ft,!0,!0,{pluralize:function(){return st(this,!0)},singularize:function(){return st(this,!1)},humanize:function(){var e,t=lt(this,An),t=t.replace(/_id$/g,""),t=t.replace(/(_)?([a-z\d]*)/gi,function(t,n,i){return e=f(En,i)?En[i]:null,(n?" ":"")+(e||i.toLowerCase())});return ct(t)},titleize:function(){var e,t,n,i=/[.:;!]$/;return this.spacify().humanize().words(function(r,a,o){return e=i.test(r),n=0==a||a==o.length-1||e||t,t=e,n||-1===Cn.indexOf(r)?ct(r):r}).join(" ")},parameterize:function(e){var t=this;return void 0===e&&(e="-"),t.normalize&&(t=t.normalize()),t=t.replace(/[^a-z0-9\-_]+/gi,e),e&&(t=t.replace(new pt("^{sep}+|{sep}+$|({sep}){sep}+".assign({sep:P(e)}),"g"),"$1")),encodeURI(t.toLowerCase())}}),ft.Inflector=Sn,ft.Inflector.acronyms=En}(),function(e,t){return"function"==typeof define&&define.amd?void define("angular-file-upload",["angular"],function(e){return t(e)}):t(e)}("undefined"==typeof angular?null:angular,function(e){var t=e.module("angularFileUpload",[]);return t.value("fileUploaderOptions",{url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1}).factory("FileUploader",["fileUploaderOptions","$rootScope","$http","$window","$compile",function(t,n,i,r,a){function o(n){var i=e.copy(t);e.extend(this,i,n,{isUploading:!1,_nextIndex:0,_failFilterIndex:-1,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}function s(e){var t=e;this.lastModifiedDate=null,this.size=null,this.type="like/"+t.slice(t.lastIndexOf(".")+1).toLowerCase(),this.name=t.slice(t.lastIndexOf("/")+t.lastIndexOf("\\")+2)}function l(t,n,i,r){n=t._getFileOrFileLikeObject(n),e.extend(this,{url:t.url,alias:t.alias,headers:e.copy(t.headers),formData:e.copy(t.formData),removeAfterUpload:t.removeAfterUpload,withCredentials:t.withCredentials,method:t.method},i,{uploader:t,file:e.copy(n),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:n}),r&&(this._input=e.element(r),this._replaceNode(this._input))}function c(t){e.extend(this,t),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}function u(e){u.super_.apply(this,arguments),this.uploader.isHTML5||this.element.removeAttr("multiple"),this.element.prop("value",null)}function d(e){d.super_.apply(this,arguments)}function p(e){p.super_.apply(this,arguments)}return o.prototype.isHTML5=!(!r.File||!r.FormData),o.prototype.addToQueue=function(t,n,i){var r=e.isElement(t)?[t]:t,a=this._getFilters(i),s=this.queue.length,l=[];e.forEach(r,function(e){var t=this._getFileOrFileLikeObject(e);if(this._isValidFile(t,a,n)){var i=this.isFile(t)?null:e,r=new o.FileItem(this,t,n,i);l.push(r),this.queue.push(r),this._onAfterAddingFile(r)}else{var s=this.filters[this._failFilterIndex];this._onWhenAddingFileFailed(t,s,n)}},this),this.queue.length!==s&&(this._onAfterAddingAll(l),this.progress=this._getTotalProgress()),this._render(),this.autoUpload&&this.uploadAll()},o.prototype.removeFromQueue=function(e){var t=this.getIndexOfItem(e),n=this.queue[t];n.isUploading&&n.cancel(),this.queue.splice(t,1),n._destroy(),this.progress=this._getTotalProgress()},o.prototype.clearQueue=function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0},o.prototype.uploadItem=function(e){var t=this.getIndexOfItem(e),n=this.queue[t],i=this.isHTML5?"_xhrTransport":"_iframeTransport";n._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[i](n))},o.prototype.cancelItem=function(e){var t=this.getIndexOfItem(e),n=this.queue[t],i=this.isHTML5?"_xhr":"_form";n&&n.isUploading&&n[i].abort()},o.prototype.uploadAll=function(){var t=this.getNotUploadedItems().filter(function(e){return!e.isUploading});t.length&&(e.forEach(t,function(e){e._prepareToUploading()}),t[0].upload())},o.prototype.cancelAll=function(){var t=this.getNotUploadedItems();e.forEach(t,function(e){e.cancel()})},o.prototype.isFile=function(e){var t=r.File;return t&&e instanceof t},o.prototype.isFileLikeObject=function(e){return e instanceof o.FileLikeObject},o.prototype.getIndexOfItem=function(t){return e.isNumber(t)?t:this.queue.indexOf(t)},o.prototype.getNotUploadedItems=function(){return this.queue.filter(function(e){return!e.isUploaded})},o.prototype.getReadyItems=function(){return this.queue.filter(function(e){return e.isReady&&!e.isUploading}).sort(function(e,t){return e.index-t.index})},o.prototype.destroy=function(){e.forEach(this._directives,function(t){e.forEach(this._directives[t],function(e){e.destroy()},this)},this)},o.prototype.onAfterAddingAll=function(e){},o.prototype.onAfterAddingFile=function(e){},o.prototype.onWhenAddingFileFailed=function(e,t,n){},o.prototype.onBeforeUploadItem=function(e){},o.prototype.onProgressItem=function(e,t){},o.prototype.onProgressAll=function(e){},o.prototype.onSuccessItem=function(e,t,n,i){},o.prototype.onErrorItem=function(e,t,n,i){},o.prototype.onCancelItem=function(e,t,n,i){},o.prototype.onCompleteItem=function(e,t,n,i){},o.prototype.onCompleteAll=function(){},o.prototype._getTotalProgress=function(e){if(this.removeAfterUpload)return e||0;var t=this.getNotUploadedItems().length,n=t?this.queue.length-t:this.queue.length,i=100/this.queue.length,r=(e||0)*i/100;return Math.round(n*i+r)},o.prototype._getFilters=function(t){if(e.isUndefined(t))return this.filters;if(e.isArray(t))return t;var n=t.split(/\s*,/);return this.filters.filter(function(e){return-1!==n.indexOf(e.name)},this)},o.prototype._render=function(){n.$$phase||n.$apply()},o.prototype._folderFilter=function(e){return!(!e.size&&!e.type)},o.prototype._queueLimitFilter=function(){return this.queue.length<this.queueLimit},o.prototype._isValidFile=function(e,t,n){return this._failFilterIndex=-1,t.length?t.every(function(t){return this._failFilterIndex++,t.fn.call(this,e,n)},this):!0},o.prototype._getFileOrFileLikeObject=function(e){return this.isFile(e)||this.isFileLikeObject(e)?e:new o.FileLikeObject(e.value)},o.prototype._isSuccessCode=function(e){return e>=200&&300>e||304===e},o.prototype._transformResponse=function(t){return e.forEach(i.defaults.transformResponse,function(e){t=e(t)}),t},o.prototype._parseHeaders=function(t){function n(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function i(e){return e.toLowerCase()}var r,a,o,s={};return t?(e.forEach(t.split("\n"),function(e){o=e.indexOf(":"),r=i(n(e.substr(0,o))),a=n(e.substr(o+1)),r&&(s[r]=s[r]?s[r]+", "+a:a)}),s):s},o.prototype._xhrTransport=function(t){var n=t._xhr=new XMLHttpRequest,i=new FormData,r=this;r._onBeforeUploadItem(t),e.forEach(t.formData,function(t){e.forEach(t,function(e,t){i.append(t,e)})}),i.append(t.alias,t._file),n.upload.onprogress=function(e){var n=Math.round(e.lengthComputable?100*e.loaded/e.total:0);r._onProgressItem(t,n)},n.onload=function(){var e=r._parseHeaders(n.getAllResponseHeaders()),i=r._transformResponse(n.response),a=r._isSuccessCode(n.status)?"Success":"Error",o="_on"+a+"Item";r[o](t,i,n.status,e),r._onCompleteItem(t,i,n.status,e)},n.onerror=function(){var e=r._parseHeaders(n.getAllResponseHeaders()),i=r._transformResponse(n.response);r._onErrorItem(t,i,n.status,e),r._onCompleteItem(t,i,n.status,e)},n.onabort=function(){var e=r._parseHeaders(n.getAllResponseHeaders()),i=r._transformResponse(n.response);r._onCancelItem(t,i,n.status,e),r._onCompleteItem(t,i,n.status,e)},n.open(t.method,t.url,!0),n.withCredentials=t.withCredentials,e.forEach(t.headers,function(e,t){n.setRequestHeader(t,e)}),n.send(i),this._render()},o.prototype._iframeTransport=function(t){var n=e.element('<form style="display: none;" />'),i=e.element('<iframe name="iframeTransport'+Date.now()+'">'),r=t._input,a=this;t._form&&t._form.replaceWith(r),t._form=n,a._onBeforeUploadItem(t),r.prop("name",t.alias),e.forEach(t.formData,function(t){e.forEach(t,function(t,i){n.append(e.element('<input type="hidden" name="'+i+'" value="'+t+'" />'))})}),n.prop({action:t.url,method:"POST",target:i.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),i.bind("load",function(){try{var e=i[0].contentDocument.body.innerHTML}catch(n){}var r={response:e,status:200,dummy:!0},o=a._transformResponse(r.response),s={};a._onSuccessItem(t,o,r.status,s),a._onCompleteItem(t,o,r.status,s)}),n.abort=function(){var e,o={status:0,dummy:!0},s={};i.unbind("load").prop("src","javascript:false;"),n.replaceWith(r),a._onCancelItem(t,e,o.status,s),a._onCompleteItem(t,e,o.status,s)},r.after(n),n.append(r).append(i),n[0].submit(),this._render()},o.prototype._onWhenAddingFileFailed=function(e,t,n){this.onWhenAddingFileFailed(e,t,n)},o.prototype._onAfterAddingFile=function(e){this.onAfterAddingFile(e)},o.prototype._onAfterAddingAll=function(e){this.onAfterAddingAll(e)},o.prototype._onBeforeUploadItem=function(e){e._onBeforeUpload(),this.onBeforeUploadItem(e)},o.prototype._onProgressItem=function(e,t){var n=this._getTotalProgress(t);this.progress=n,e._onProgress(t),this.onProgressItem(e,t),this.onProgressAll(n),this._render()},o.prototype._onSuccessItem=function(e,t,n,i){e._onSuccess(t,n,i),this.onSuccessItem(e,t,n,i)},o.prototype._onErrorItem=function(e,t,n,i){e._onError(t,n,i),this.onErrorItem(e,t,n,i)},o.prototype._onCancelItem=function(e,t,n,i){e._onCancel(t,n,i),this.onCancelItem(e,t,n,i)},o.prototype._onCompleteItem=function(t,n,i,r){t._onComplete(n,i,r),this.onCompleteItem(t,n,i,r);var a=this.getReadyItems()[0];return this.isUploading=!1,e.isDefined(a)?void a.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())},o.isFile=o.prototype.isFile,o.isFileLikeObject=o.prototype.isFileLikeObject,o.isHTML5=o.prototype.isHTML5,o.inherit=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.super_=t},o.FileLikeObject=s,o.FileItem=l,o.FileDirective=c,o.FileSelect=u,o.FileDrop=d,o.FileOver=p,l.prototype.upload=function(){this.uploader.uploadItem(this)},l.prototype.cancel=function(){this.uploader.cancelItem(this)},l.prototype.remove=function(){this.uploader.removeFromQueue(this)},l.prototype.onBeforeUpload=function(){},l.prototype.onProgress=function(e){},l.prototype.onSuccess=function(e,t,n){},l.prototype.onError=function(e,t,n){},l.prototype.onCancel=function(e,t,n){},l.prototype.onComplete=function(e,t,n){},l.prototype._onBeforeUpload=function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()},l.prototype._onProgress=function(e){this.progress=e,this.onProgress(e)},l.prototype._onSuccess=function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(e,t,n)},l.prototype._onError=function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(e,t,n)},l.prototype._onCancel=function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(e,t,n)},l.prototype._onComplete=function(e,t,n){this.onComplete(e,t,n),this.removeAfterUpload&&this.remove();

},l.prototype._destroy=function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input},l.prototype._prepareToUploading=function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0},l.prototype._replaceNode=function(e){var t=a(e.clone())(e.scope());t.prop("value",null),e.css("display","none"),e.after(t)},c.prototype.events={},c.prototype.bind=function(){for(var e in this.events){var t=this.events[e];this.element.bind(e,this[t])}},c.prototype.unbind=function(){for(var e in this.events)this.element.unbind(e,this.events[e])},c.prototype.destroy=function(){var e=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(e,1),this.unbind()},c.prototype._saveLinks=function(){for(var e in this.events){var t=this.events[e];this[t]=this[t].bind(this)}},o.inherit(u,c),u.prototype.events={$destroy:"destroy",change:"onChange"},u.prototype.prop="select",u.prototype.getOptions=function(){},u.prototype.getFilters=function(){},u.prototype.isEmptyAfterSelection=function(){return!!this.element.attr("multiple")},u.prototype.onChange=function(){var e=this.uploader.isHTML5?this.element[0].files:this.element[0],t=this.getOptions(),n=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(e,t,n),this.isEmptyAfterSelection()&&this.element.prop("value",null)},o.inherit(d,c),d.prototype.events={$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},d.prototype.prop="drop",d.prototype.getOptions=function(){},d.prototype.getFilters=function(){},d.prototype.onDrop=function(t){var n=this._getTransfer(t);if(n){var i=this.getOptions(),r=this.getFilters();this._preventAndStop(t),e.forEach(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(n.files,i,r)}},d.prototype.onDragOver=function(t){var n=this._getTransfer(t);this._haveFiles(n.types)&&(n.dropEffect="copy",this._preventAndStop(t),e.forEach(this.uploader._directives.over,this._addOverClass,this))},d.prototype.onDragLeave=function(t){t.target===this.element[0]&&(this._preventAndStop(t),e.forEach(this.uploader._directives.over,this._removeOverClass,this))},d.prototype._getTransfer=function(e){return e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer},d.prototype._preventAndStop=function(e){e.preventDefault(),e.stopPropagation()},d.prototype._haveFiles=function(e){return e?e.indexOf?-1!==e.indexOf("Files"):e.contains?e.contains("Files"):!1:!1},d.prototype._addOverClass=function(e){e.addOverClass()},d.prototype._removeOverClass=function(e){e.removeOverClass()},o.inherit(p,c),p.prototype.events={$destroy:"destroy"},p.prototype.prop="over",p.prototype.overClass="nv-file-over",p.prototype.addOverClass=function(){this.element.addClass(this.getOverClass())},p.prototype.removeOverClass=function(){this.element.removeClass(this.getOverClass())},p.prototype.getOverClass=function(){return this.overClass},o}]).directive("nvFileSelect",["$parse","FileUploader",function(e,t){return{link:function(n,i,r){var a=n.$eval(r.uploader);if(!(a instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');var o=new t.FileSelect({uploader:a,element:i});o.getOptions=e(r.options).bind(o,n),o.getFilters=function(){return r.filters}}}}]).directive("nvFileDrop",["$parse","FileUploader",function(e,t){return{link:function(n,i,r){var a=n.$eval(r.uploader);if(!(a instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');if(a.isHTML5){var o=new t.FileDrop({uploader:a,element:i});o.getOptions=e(r.options).bind(o,n),o.getFilters=function(){return r.filters}}}}}]).directive("nvFileOver",["FileUploader",function(e){return{link:function(t,n,i){var r=t.$eval(i.uploader);if(!(r instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');var a=new e.FileOver({uploader:r,element:n});a.getOverClass=function(){return i.overClass||this.overClass}}}}]),t});var StringHelpers;!function(e){function t(e){return angular.isString(e)?r.test(e):!1}function n(e){return angular.isString(e)?e.chars().map(function(e){return"*"}).join(""):null}function i(t){if(!t)return"{ null }";var n=[];return angular.forEach(t,function(t,r){var a=t;"password"===(""+r).toLowerCase()?a=e.obfusicate(t):angular.isObject(a)&&(a=i(a)),n.push(r+": "+a)}),"{ "+n.join(", ")+" }"}var r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:/i;e.isDate=t,e.obfusicate=n,e.toString=i}(StringHelpers||(StringHelpers={}));var Core;!function(e){function t(e){var t={scheme:"http",host:null,port:null,path:null,useProxy:!0,jolokiaUrl:null,userName:null,password:null,view:null,name:null},n=e||{};return angular.extend(t,n)}function n(e){return t(e)}e.createConnectToServerOptions=t,e.createConnectOptions=n}(Core||(Core={}));var ArrayHelpers;!function(e){function t(e,t,n){void 0===n&&(n="id");var i=e.length;return e.remove(function(e){return!t.any(function(t){return t[n]===e[n]})}),e.length!==i}function n(e,n,i){void 0===i&&(i="id");var r=t(e,n,i);return n&&n.forEach(function(t){var n=e.find(function(e){return e[i]===t[i]});n?t!==n&&(angular.copy(t,n),r=!0):(r=!0,e.push(t))}),r}e.removeElements=t,e.sync=n}(ArrayHelpers||(ArrayHelpers={}));var UrlHelpers;!function(e){function t(e){return e&&e.startsWith("#")?e.last(e.length-1):e}function n(e){return e.has("?")?e.split("?")[0]:e}function i(e,i){var r=n(e);return i.endsWith("/")&&i.startsWith("/")?r.has(i):i.startsWith("/")?t(r).startsWith(i):r.endsWith(i)}function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=[],i=e.length-1;e.forEach(function(e,t){if(!Core.isBlank(e)){if("/"===e)return void n.push("");0!==t&&"/"===e.first(1)&&(e=e.slice(1)),t!==i&&"/"===e.last(1)&&(e=e.slice(0,e.length-1)),Core.isBlank(e)||n.push(e)}});var r=n.join("/");return r}function a(e){var t=new URI(e);return URI.parseQuery(t.query())}function o(e,t){if(e&&e.startsWith("proxy/"))return l.debug("Jolokia URL is proxied, applying proxy to: ",t),r("proxy",t);var n=window.location.origin;return t&&t.startsWith("http")&&!t.startsWith(n)?(l.debug("Url doesn't match page origin: ",n," applying proxy to: ",t),r("proxy",t)):(l.debug("No need to proxy: ",t),t)}function s(e){var t=e;return t=e.startsWith("proxy")?e.replace(/:/g,"\\:"):e.replace(/:([^\/])/,"\\:$1")}var l=Logger.get("UrlHelpers");e.noHash=t,e.extractPath=n,e.contextActive=i,e.join=r,e.parseQueryString=a,e.maybeProxy=o,e.escapeColons=s}(UrlHelpers||(UrlHelpers={}));var Core;!function(e){function t(){D=null}function n(e){return e&&e.startsWith&&e.startsWith("/")&&(D||(D=$("base").attr("href")||"",D.endsWith&&D.endsWith("/")&&(D=D.substring(0,D.length-1))),D)?D+e:e}function i(){return window.location}function r(){return M=[e.url("jolokia"),"/jolokia"]}function a(e,t){return e&&t&&(e.startsWith(t)||0===e.indexOf(t))?e.substring(t.length):e}function o(e,t){return e&&t&&e.endsWith(t)?e.substring(0,e.length-t.length):e}function s(){var e=$(window).height(),t=$("#main-nav").height(),n=e-t;$("#main").css("min-height",""+n+"px")}function l(){var e=!1;try{e=chrome&&chrome.app&&chrome.extension?!0:!1}catch(t){e=!1}return e}function c(e){if("createStyleSheet"in document)document.createStyleSheet(e);else{var t=$("<link>");$("head").append(t),t.attr({rel:"stylesheet",type:"text/css",href:e})}}function u(){var e=window.localStorage||function(){return N}();return e}function d(e){return angular.isArray(e)?e:[e]}function p(e,t){if(void 0===t&&(t=!1),!angular.isDefined(e)||!e)return t;if(e.constructor===Boolean)return e;if(angular.isString(e))switch(e.toLowerCase()){case"true":case"1":case"yes":return!0;default:return!1}if(angular.isNumber(e))return 0!==e;throw new Error("Can't convert value "+e+" to boolean")}function h(e){return angular.isNumber(e)?m(e):angular.toJson(e,!0)}function f(e){return""+e}function g(e,t){if(void 0===t&&(t="integer"),angular.isString(e))try{return parseInt(e)}catch(n){console.log("Failed to parse "+t+" with text '"+e+"'")}else if(angular.isNumber(e))return e;return null}function m(e){return""+e}function v(e,t){if(void 0===t&&(t="float"),angular.isString(e))try{return parseFloat(e)}catch(n){console.log("Failed to parse "+t+" with text '"+e+"'")}else if(angular.isNumber(e))return e;return null}function y(e,t){var n=angular.isArray(t)?t:(t||"").split("."),i=e;return angular.forEach(n,function(e){if(!i)return null;try{i=i[e]}catch(t){return null}}),i}function b(e,t,n){var i=angular.isArray(t)?t:(t||"").split("."),r=e,a=i.length-1;return angular.forEach(i,function(e,t){var i=r[e];(t>=a||!angular.isObject(i))&&(i=a>t?{}:n,r[e]=i),r=i}),r}function w(e){if(e.$$phase)return e.$$phase;if(HawtioCore.injector){var t=HawtioCore.injector.get("$rootScope");if(t)return t.$$phase}}function x(t){w(t)?setTimeout(function(){e.$apply(t)},50):t.$apply()}function k(t,n){void 0===n&&(n=50),setTimeout(function(){e.$apply(t)},n)}function C(e){var t=w(e);t||e.$apply()}function S(e){var t=w(e);t||e.$digest()}function _(e,t){var n=e;return angular.forEach(t,function(e){if(n){var t=$(n).children(e);t&&t.length||($("<"+e+"></"+e+">").appendTo(n),t=$(n).children(e)),n=t}}),n}function T(e){return angular.forEach(j,function(t,n){var i=new RegExp(t,"g");e=e.replace(i,n)}),e=e.replace(/&gt;/g,">")}function A(e){if(angular.isString(e)){for(var t="",n=0;n<e.length;n++){var i=e.charAt(n),i=j[i]||i;t+=i}return t}return e}function E(e){return void 0===e||null===e?!0:angular.isString(e)?e.isBlank():!1}function P(e){if(e){for(;e.endsWith('"')||e.endsWith("'");)e=e.substring(0,e.length-1);for(;e.startsWith('"')||e.startsWith("'");)e=e.substring(1,e.length)}return e}function I(e){if(e){var t=e+"";try{t=t.underscore()}catch(n){}try{t=t.humanize()}catch(n){}return P(t)}return e}var D=null;e.connectionSettingsKey="jvmConnect",e._resetUrlPrefix=t,e.url=n,e.windowLocation=i,String.prototype.unescapeHTML=function(){var e=document.createElement("textarea");return e.innerHTML=this,e.value},Object.keys||(console.debug("Creating hawt.io version of Object.keys()"),Object.keys=function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}),e._resetJolokiaUrls=r;var M=e._resetJolokiaUrls();e.trimLeading=a,e.trimTrailing=o,e.adjustHeight=s,e.isChromeApp=l,e.addCSS=c;var N={};e.getLocalStorage=u,e.asArray=d,e.parseBooleanValue=p,e.toString=h,e.booleanToString=f,e.parseIntValue=g,e.numberToString=m,e.parseFloatValue=v,e.pathGet=y,e.pathSet=b,e.$applyNowOrLater=x,e.$applyLater=k,e.$apply=C,e.$digest=S,e.getOrCreateElements=_;var j={"#":"&#35;","'":"&#39;","<":"&lt;",">":"&gt;",'"':"&quot;"};e.unescapeHtml=T,e.escapeHtml=A,e.isBlank=E,e.trimQuotes=P,e.humanizeValue=I}(Core||(Core={}));var HawtioCompile;!function(e){var t="hawtio-compile",n=Logger.get(t);e._module=angular.module(t,[]),e._module.run(function(){n.debug("loaded")}),e._module.directive("compile",["$compile",function(e){return function(t,n,i){t.$watch(function(e){return e.$eval(i.compile)},function(i){n.html(i),e(n.contents())(t)})}}]),hawtioPluginLoader.addModule(t)}(HawtioCompile||(HawtioCompile={}));var ControllerHelpers;!function(e){function t(e){return function(t,n){return t===n&&t in e?e[t]:""}}function n(e){return function(t){return t in e?e[t]:""}}function i(e,t,n,i,r,a,o){function s(){return c(t.search()[i]||r)}n in e||(e[n]=r);var l=a||Core.doNothing,c=o||Core.doNothing,u=s();Core.pathSet(e,n,u),e.$watch(n,function(e,n){e!==n&&(void 0!==e&&null!==e?t.search(i,l(e)):t.search(i,""))})}function r(e,t,n,i){void 0===i&&(i=["nid"]);var r=angular.copy(n.search());t.$on("$routeUpdate",function(){var t=n.search(),a=[];angular.forEach(i,function(e){t[e]!==r[e]&&a.push(e)}),a.length&&e.reload()})}Logger.get("ControllerHelpers");e.createClassSelector=t,e.createValueClassSelector=n,e.bindModelToSearchParam=i,e.reloadWhenParametersChange=r}(ControllerHelpers||(ControllerHelpers={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},Core;!function(e){var t=Logger.get("hawtio-tasks"),n=function(){function e(){this.tasks={},this.tasksExecuted=!1,this._onComplete=null}return e.prototype.addTask=function(e,t){this.tasks[e]=t,this.tasksExecuted&&this.executeTask(e,t)},e.prototype.executeTask=function(e,n){if(angular.isFunction(n)){t.debug("Executing task : ",e);try{n()}catch(i){t.debug("Failed to execute task: ",e," error: ",i)}}},e.prototype.onComplete=function(e){this._onComplete=e},e.prototype.execute=function(){var e=this;this.tasksExecuted||(angular.forEach(this.tasks,function(t,n){e.executeTask(n,t)}),this.tasksExecuted=!0,angular.isFunction(this._onComplete)&&this._onComplete())},e.prototype.reset=function(){this.tasksExecuted=!1},e}();e.TasksImpl=n;var i=function(e){function n(){var t=this;e.call(this),this.tasks={},this.onComplete(function(){t.reset()})}return __extends(n,e),n.prototype.addTask=function(e,t){this.tasks[e]=t},n.prototype.execute=function(){for(var e=this,n=[],i=0;i<arguments.length;i++)n[i-0]=arguments[i];if(!this.tasksExecuted){var r=n,a=_.keys(this.tasks);a.forEach(function(n){var i=e.tasks[n];if(angular.isFunction(i)){t.debug("Executing task: ",n," with parameters: ",r);try{i.apply(i,r)}catch(a){t.debug("Failed to execute task: ",n," error: ",a)}}}),this.tasksExecuted=!0,angular.isFunction(this._onComplete)&&this._onComplete()}},n}(n);e.ParameterizedTasksImpl=i,e.postLoginTasks=new e.TasksImpl,e.preLogoutTasks=new e.TasksImpl,e.postLogoutTasks=new e.TasksImpl}(Core||(Core={}));var Core;!function(e){function t(e){var t=0;return e&&(t=1,e.toString().each(/\n/,function(){return t++})),t}function n(e){return"boolean"==typeof e?e:"number"==typeof e?e:e?e:""}function i(e,t){if("boolean"==typeof e)return""+e;if("number"==typeof e)return""+e;if("string"==typeof e)return""+e;if("javax.management.openmbean.CompositeData"===t||"[Ljavax.management.openmbean.CompositeData;"===t||"java.util.Map"===t){var n=angular.toJson(e,!0);return n}if("javax.management.ObjectName"===t)return""+(null==e?"":e.canonicalName);if("javax.management.openmbean.TabularData"===t){var i=[];for(var r in e){var a=e[r],o=""+r+"="+a;i.push(o)}return i=i.sortBy(function(e){return e.toString()}),i.join("\n")}return angular.isArray(e)?e.join("\n"):e?""+e:""}function r(e){if(e){if(angular.isArray(e))return e;if(angular.isString(e))return e.split(",")}return[]}function a(e,t){if(e){var n=e.folderNames;if(n)return t.any(function(e){for(var t=0;t<e.length;t++){var i=n[t],r=e[t];if(!i)return!1;var a=r.indexOf(i);if(0>a)return!1}return!0})}return!1}function o(e,t,n){n&&(e.$on("$destroy",function(){s(e,t)}),e.jolokiaHandle=n)}function s(e,t){var n=e.jolokiaHandle;n&&(t.unregister(n),e.jolokiaHandle=null)}function l(t,n){return void 0===n&&(n={}),n.mimeType="application/json",angular.isDefined(t)&&(n.success=t),n.method||(n.method="POST"),n.canonicalNaming=!1,n.canonicalProperties=!1,n.error||(n.error=function(t){e.defaultJolokiaErrorHandler(t,n)}),n}function c(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}function u(t){if(t){var n=t.toString().toLowerCase(),i=e.numberTypeNames[n];return i}return!1}function d(e){return e.replace(/\//g,"!/").replace(":","/").escapeURL()}function p(e){return e.replace(/\//g,"!/").replace(":","/")}function h(e){return e.replace(/\//g,"!/").escapeURL()}function f(e){return e.replace(/\./g,"-")}function g(e){return f(e).replace(/span/g,"sp-an")}function m(){var e=$("#log-panel"),t=$("body");localStorage.showLog="true",e.css({bottom:"50%"}),t.css({"overflow-y":"hidden"})}function v(e){if(e){var t=e[0];if("w"===t||"W"===t)return"warning";if("e"===t||"E"===t)return"error";if("i"===t||"I"===t)return"info";if("d"===t||"D"===t)return""}return""}function y(t){return e.isBlank(t)?t:t.startsWith("#")?t.substring(1):t}function b(e){var t={},n=e.split(":");if(n.length>1){t.domain=n.first(),n=n.exclude(n.first()),n=n.join(":"),t.attributes={};var i=n.split(",");i.forEach(function(e){var n=e.split("="),i=n.first().trim();n=n.exclude(n.first()),t.attributes[i]=n.join("=").trim()})}return t}function w(){e.log.debug("Executing post login tasks"),e.postLoginTasks.execute()}function x(t){e.log.debug("Executing pre logout tasks"),e.preLogoutTasks.onComplete(t),e.preLogoutTasks.execute()}function k(t,n,i,r,a,o){if(void 0===a&&(a=null),void 0===o&&(o=null),t){var s="auth/logout/";e.executePreLogoutTasks(function(){$.ajax(s,{type:"POST",success:function(){n.username=null,n.password=null,n.loginDetails=null,n.rememberMe=!1,delete i.userDetails;var t=angular.fromJson(i.jvmConnect);_.each(t,function(e){delete e.userName,delete e.password}),i.setItem("jvmConnect",angular.toJson(t)),i.removeItem("activemqUserName"),i.removeItem("activemqPassword"),a&&angular.isFunction(a)&&a(),e.$apply(r)},error:function(t,a,s){n.username=null,n.password=null,n.loginDetails=null,n.rememberMe=!1,delete i.userDetails;var l=angular.fromJson(i.jvmConnect);switch(_.each(l,function(e){delete e.userName,delete e.password}),i.setItem("jvmConnect",angular.toJson(l)),i.removeItem("activemqUserName"),i.removeItem("activemqPassword"),t.status){case 401:e.log.debug("Failed to log out, ",s);break;case 403:e.log.debug("Failed to log out, ",s);break;case 0:break;default:e.log.debug("Failed to log out, ",s)}o&&angular.isFunction(o)&&o(),e.$apply(r)}})})}}function C(t,n,i){void 0===i&&(i=null);var r=angular.copy(t.search());i&&angular.forEach(i,function(e){return delete r[e]});var a=e.hashToString(r);if(a){var o=n.indexOf("?")>=0?"&":"?";n+=o+a}return n}function S(e){var t=[];angular.forEach(e,function(e,n){t.push(n+"="+e)});var n=t.join("&");return encodeURI(n)}function T(e){var t={};if(e){var n=decodeURI(e),i=n.split("&");angular.forEach(i,function(e){var n=e.split("="),i=n[0],r=n[1]||i;t[i]=r})}return t}function A(t,n,i,r,a){var o={responseJson:"",success:function(e){var t=angular.toJson(e.value);o.responseJson!==t&&(o.responseJson=t,r(e))}};return angular.extend(o,a),e.register(t,n,i,l(void 0,o))}function E(e){return e in localStorage||(localStorage[e]=angular.toJson({})),angular.fromJson(localStorage[e])}function P(e){return StringHelpers.toString(e)}function I(t){if(!("type"in t))return null;var n=t.type;switch(n.toLowerCase()){case"exec":n+=":"+t.mbean+":"+t.operation;var i=P(t.arguments);e.isBlank(i)||(n+=":"+i);break;case"read":n+=":"+t.mbean+":"+t.attribute;break;default:return null}return n}function D(e){var t="";return t=angular.isArray(e)?e.map(function(e){return I(e)}).join(":"):I(e)}function M(){return null===we&&(we={},e.log.debug("Created response history",we)),we}function N(e){var t=null,n=null;return angular.forEach(e,function(e,i){e&&e.timestamp?(null===t||e.timestamp<t)&&(t=e.timestamp,n=i):(t=0,n=i)}),n}function j(t,n){var i=M(),r=D(t);if(null===r)return void e.log.debug("key for arguments is null, not caching: ",StringHelpers.toString(t));var a=_.keys(i);if(a.length>=e.MAX_RESPONSE_CACHE_SIZE){e.log.debug("Cache limit (",e.MAX_RESPONSE_CACHE_SIZE,") met or  exceeded (",a.length,"), trimming oldest response");var o=N(i);null!==o?(e.log.debug("Deleting key: ",o),delete i[o]):(e.log.debug("Got null key, could be a cache problem, wiping cache"),a.forEach(function(t){e.log.debug("Deleting key: ",t),delete i[t]}))}i[r]=n}function O(t,n,i){var r=M(),a=D(n);if(null===a)return void t.request(n,i);if(a in r&&"success"in i){var o=r[a];setTimeout(function(){i.success(o)},10)}else e.log.debug("Unable to find existing response for key: ",a),t.request(n,i)}function L(e,t,n,i){angular.isDefined(t.$jhandle)&&angular.isArray(t.$jhandle)||(t.$jhandle=[]),angular.isDefined(t.$on)&&t.$on("$destroy",function(n){R(e,t)});var r=null;if("success"in i){var a=i.success,o=n;i.success=function(e){j(o,e),a(e)}}if(angular.isArray(n)){if(n.length>=1){var o=[i];angular.forEach(n,function(e){return o.push(e)});var s=e.register;r=s.apply(e,o),t.$jhandle.push(r),O(e,n,i)}}else r=e.register(i,n),t.$jhandle.push(r),O(e,n,i);return function(){null!==r&&(t.$jhandle.remove(r),e.unregister(r))}}function R(e,t){angular.isDefined(t.$jhandle)&&(t.$jhandle.forEach(function(t){e.unregister(t)}),delete t.$jhandle)}function F(t,n){void 0===n&&(n={});var i=t.stacktrace;if(i){var r=n.silent;if(r)e.log.debug("Operation ",a," failed due to: ",t.error);else{var a=e.pathGet(t,["request","operation"])||"unknown";i.indexOf("javax.management.InstanceNotFoundException")>=0||i.indexOf("javax.management.AttributeNotFoundException")>=0||i.indexOf("java.lang.IllegalArgumentException: No operation")>=0?e.log.debug("Operation ",a," failed due to: ",t.error):e.log.warn("Operation ",a," failed due to: ",t.error)}}}function U(t){var n=t.stacktrace;if(n){var i=e.pathGet(t,["request","operation"])||"unknown";e.log.info("Operation ",i," failed due to: ",t.error)}}function z(e){try{return(new XMLSerializer).serializeToString(e)}catch(t){try{return e.xml}catch(t){console.log("WARNING: XMLSerializer not supported")}}return!1}function q(e){return e&&3===e.nodeType}function B(e,t){void 0===t&&(t="");var n=t;if(e){var i=e.lastIndexOf(".");i>0&&(n=e.substring(i+1,e.length).toLowerCase())}return n}function H(){var e=new Date,t=1e3*e.getTime()+e.getUTCMilliseconds(),n=Math.floor(65536*(1+Math.random()));return t.toString(16)+n.toString(16)}function V(e){if(e){var t=e.match(xe);if(t&&t.length>4){var n=t[1],i=t[2],r=t[4];if(angular.isDefined(r))return[parseInt(n),parseInt(i),parseInt(r)];if(angular.isDefined(i))return[parseInt(n),parseInt(i)];if(angular.isDefined(n))return[parseInt(n)]}}return null}function W(e,t){return void 0===t&&(t=4),(e||"").split(".").map(function(e){var n=e.length;return n>=t?e:e.padLeft(" ",t-n)}).join(".")}function G(e,t){var n=(new Date).getTime(),i=t(),r=(new Date).getTime()-n;return console.log(e+" "+r),i}function K(e,t){if(e&&!t)return 1;if(!e&&t)return-1;if(e===t)return 0;for(var n=0;n<e.length;n++){var i=e[n];if(n>=t.length)return 1;var r=t[n];if(!angular.isDefined(i))return-1;if(!angular.isDefined(r))return 1;if(i>r)return 1;if(r>i)return-1}return 0}function X(e){if(angular.isArray(e)){var t=e.length;if(t){if(1===t)return X(e[0]);var n="<ul>";return angular.forEach(e,function(e){n+="<li>"+X(e)+"</li>"}),n+"</ul>"}return""}if(angular.isObject(e)){var n="<table>";return angular.forEach(e,function(e,t){n+="<tr><td>"+t+"</td><td>"+X(e)+"</td></tr>"}),n+"</table>"}if(angular.isString(e)){var i=["http://","https://","file://","mailto:"],r=e;return angular.forEach(i,function(t){r.startsWith(t)&&(r="<a href='"+e+"'>"+e+"</a>")}),r}return e}function Y(e){if(e=e.trim(),e.startsWith("[")&&e.endsWith("]")||e.startsWith("{")&&e.endsWith("}"))try{return JSON.parse(e)}catch(t){}return null}function J(e,t){var n=1===e?t:t.pluralize();return""+e+" "+n}function Q(e){var t={};if(e){var n=e.indexOf(":");if(n>0){var i=e.substring(n+1),r=i.split(",");angular.forEach(r,function(e){var n=e.split("="),i=n[0],r=n[1]||i;t[i]=r})}}return t}function Z(e){return e?e.replace(/(\/|\.)/g,"_"):e}function ee(e,t){angular.forEach(e,function(e){var n=e.children;angular.isArray(n)&&n.length>0?ee(n,t):t(e)})}function te(e){var t=e.split("#");if(0===t.length)return e;var n=t[1];if(t.length>1){var i=t.last(t.length-2);i.forEach(function(e){n=n+"#"+e})}return n}function ne(e){return ie(e.username,e.password)}function ie(e,t){var n=e+":"+t;return n=n.encodeBase64(),"Basic "+n}function re(t){if(e.isBlank(t))return null;var n=t.match(ke);if(null===n)return null;var i=n[1],r=n[3],a=n[4],o=null;o=t.split(e.isBlank(a)?r:a);var s=o[1];return s&&s.startsWith("/")&&(s=s.slice(1,s.length)),{scheme:i,host:r,port:a,path:s}}function ae(){var e=document;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function oe(t){if(e.isChromeApp())return t;var n=window.location.host;if(!t.startsWith("http://"+n+"/")&&!t.startsWith("https://"+n+"/")){var i=t.indexOf("://");i>0&&(t=t.substring(i+3)),t=t.replace(":","/"),t=e.trimLeading(t,"/"),t=e.trimTrailing(t,"/"),t=e.url("/proxy/"+t)}return t}function se(t,n,i){angular.isUndefined(n)&&(n=t.scheme());var r=t.host(),a=t.absUrl(),o=a.indexOf("url=");if(o>0){a=a.substr(o+4);var s=decodeURIComponent(a);if(s&&(o=s.indexOf("/proxy/"),o>0)){s=s.substr(o+7),o=s.indexOf("://"),o>0&&(s=s.substr(o+3));var l=s.split("/");if(l.length>=1&&(r=l[0]),angular.isUndefined(i)&&l.length>=2){var c=e.parseIntValue(l[1],"port number");c&&(i=c)}}}angular.isUndefined(i)&&(i=t.port());var u=n+"://"+r;return 80!=i&&(u+=":"+i),u}function le(e){var t=e.url();return t.indexOf("/hawtio/proxy/")>0}function ce(e){return e}function ue(e,t){var n=0,i=null;return function(){var r=Date.now();return r>n&&(n=r+t,i=e()),i}}function de(t,n){void 0===n&&(n="JSON");var i=null;try{i=angular.fromJson(t)}catch(r){e.log.info("Failed to parse "+n+" from: "+t+". "+r)}return i}function pe(t){var n="";return n=t===!0?'<i class="icon-check"></i>':t===!1?'<i class="icon-check-empty"></i>':e.humanizeValue(t)}function he(e,t){var n,i=(e||"").split("?");n=i&&i.length>0?i[1]:"";for(var r=n.split("&"),a=0;a<r.length;a++){var o=r[a].split("=");if(decodeURIComponent(o[0])==t)return decodeURIComponent(o[1])}return null}function fe(e){if(!angular.isNumber(e))return"XXX";var t=e/1e3,n=Math.floor(t/31536e3);if(n)return J(n,"year");var i=Math.floor((t%=31536e3)/86400);if(i)return J(i,"day");var r=Math.floor((t%=86400)/3600);if(r)return J(r,"hour");var a=Math.floor((t%=3600)/60);return a?J(a,"minute"):(t=Math.floor(t%60),t?J(t,"second"):e+" ms")}function ge(){var e=[];try{e=angular.fromJson(localStorage.regexs)}catch(t){delete localStorage.regexs}return e}function me(t){var n=e.getRegexs(),i=function(e){return e.name===t};n.any(i)&&(n=n.exclude(i),e.writeRegexs(n))}function ve(e){localStorage.regexs=angular.toJson(e)}function ye(e){if(e){var t="(.*://.*:)(.*)(@)";e=e.replace(new RegExp(t,"i"),"$1xxxxxx$3")}return e}function be(e,t){if(angular.isUndefined(e)||angular.isUndefined(t))return!0;if(null==e||null==t)return!0;if(e=e.toString().trim().toLowerCase(),t=t.toString().trim().toLowerCase(),0===e.length||0===t.length)return!0;var n=t.split(",");n=n.filter(function(e){return e.length>0}).map(function(e){return e.trim()});var i=n.some(function(t){var n=e.indexOf(t)>-1;return n});return i}e.log=Logger.get("Core"),e.lazyLoaders={},e.numberTypeNames={"byte":!0,"short":!0,"int":!0,"long":!0,"float":!0,"double":!0,"java.lang.byte":!0,"java.lang.short":!0,"java.lang.integer":!0,"java.lang.long":!0,"java.lang.float":!0,"java.lang.double":!0},e.lineCount=t,e.safeNull=n,e.safeNullAsString=i,e.toSearchArgumentArray=r,e.folderMatchesPatterns=a,e.scopeStoreJolokiaHandle=o,e.closeHandle=s,e.onSuccess=l,e.supportsLocalStorage=c,e.isNumberTypeName=u,e.encodeMBeanPath=d,e.escapeMBeanPath=p,e.encodeMBean=h,e.escapeDots=f,e.escapeTreeCssStyles=g,e.showLogPanel=m,e.logLevelClass=v,e.toPath=y,e.parseMBean=b,e.executePostLoginTasks=w,e.executePreLogoutTasks=x,e.logout=k,e.createHref=C,e.hashToString=S,e.stringToHash=T,e.registerForChanges=A;var we=null;e.getOrInitObjectFromLocalStorage=E,e.getResponseHistory=M,e.MAX_RESPONSE_CACHE_SIZE=20,e.register=L,e.unregister=R,e.defaultJolokiaErrorHandler=F,e.logJolokiaStackTrace=U,e.xmlNodeToString=z,e.isTextNode=q,e.fileExtension=B,e.getUUID=H;var xe=/[^\d]*(\d+)\.(\d+)(\.(\d+))?.*/;e.parseVersionNumbers=V,e.versionToSortableString=W,e.time=G,e.compareVersionNumberArrays=K,e.valueToHtml=X,e.tryParseJson=Y,e.maybePlural=J,e.objectNameProperties=Q,e.toSafeDomID=Z,e.forEachLeafFolder=ee,e.extractHashURL=te,e.authHeaderValue=ne,e.getBasicAuthHeader=ie;var ke=new RegExp("^(https?)://(([^:/?#]*)(?::([0-9]+))?)");e.parseUrl=re,e.getDocHeight=ae,e.useProxyIfExternal=oe,e.extractTargetUrl=se,e.isProxyUrl=le,e.doNothing=ce,e.bindModelToSearchParam=ControllerHelpers.bindModelToSearchParam,e.reloadWhenParametersChange=ControllerHelpers.reloadWhenParametersChange,e.throttled=ue,e.parseJsonText=de,e.humanizeValueHtml=pe,e.getQueryParameterValue=he,e.humanizeMilliseconds=fe,e.getRegexs=ge,e.removeRegex=me,e.writeRegexs=ve,e.maskPassword=ye,e.matchFilterIgnoreCase=be}(Core||(Core={}));var CoreFilters;!function(e){var t="hawtio-core-filters",n=angular.module(t,[]);n.filter("valueToHtml",function(){return Core.valueToHtml}),n.filter("humanize",function(){return Core.humanizeValue}),n.filter("humanizeMs",function(){return Core.humanizeMilliseconds}),n.filter("maskPassword",function(){return Core.maskPassword}),hawtioPluginLoader.addModule(t)}(CoreFilters||(CoreFilters={}));var EventServices;!function(e){var t="hawtio-event-tasks",n=Logger.get(t),i=angular.module(t,[]);i.factory("locationChangeStartTasks",function(){return new Core.ParameterizedTasksImpl}),i.factory("postLoginTasks",function(){return Core.postLoginTasks}),i.factory("preLogoutTasks",function(){return Core.preLogoutTasks}),i.factory("postLogoutTasks",function(){return Core.postLogoutTasks}),i.run(["$rootScope","locationChangeStartTasks","postLoginTasks","preLogoutTasks","postLogoutTasks",function(e,t,i,r,a){r.addTask("ResetPreLogoutTasks",function(){r.reset()}),r.addTask("ResetPostLoginTasks",function(){r.reset()}),i.addTask("ResetPostLogoutTasks",function(){a.reset()}),e.$on("$locationChangeStart",function(e,n,i){t.execute(e,n,i)}),n.debug("loaded")}]),hawtioPluginLoader.addModule(t)}(EventServices||(EventServices={}));var FileUpload;!function(e){function t(e,t,n,i){var r=t;r._xhrTransport=function(t){var a=new FileReader;a.onload=function(){if(2===a.readyState){var o=i(a.result);n.request(o,Core.onSuccess(function(n){t.json=a.result,r._onSuccessItem(t,n,n.status,{}),r._onCompleteItem(t,n,n.status,{}),Core.$apply(e)},{error:function(n){r._onErrorItem(t,n,n.status,{}),r._onCompleteItem(t,n,n.status,{}),Core.$apply(e)}}))}},a.readAsText(t._file)}}hawtioPluginLoader.addModule("angularFileUpload"),e.useJolokiaTransport=t}(FileUpload||(FileUpload={}));var FilterHelpers;!function(e){function t(e,t,i,r){void 0===i&&(i=-1),void 0===r&&(r=!0);var a=t.split(" "),o=a.filter(function(t){return n(e,t,i)});return r?o.length===a.length:o.length>0}function n(e,t,i,r){if(void 0===i&&(i=-1),void 0===r&&(r=0),i>0&&r>=i||r>50)return!1;var a=t.toLowerCase(),o=!1;return angular.isString(e)?o=e.toLowerCase().has(a):angular.isNumber(e)?o=(""+e).toLowerCase().has(a):angular.isArray(e)?o=e.some(function(e){return n(e,a,i,r+1)}):angular.isObject(e)&&(o=n(_.values(e),a,i,r)),o}e.log=Logger.get("FilterHelpers"),e.search=t,e.searchObject=n}(FilterHelpers||(FilterHelpers={}));var Core;!function(e){function t(e,t){return t&&0!==t.length?e+"("+t.map(function(e){return angular.isString(e)&&(e=angular.fromJson(e)),e.type}).join(",")+")":e+"()"}e.operationToString=t}(Core||(Core={}));var Log;!function(e){function t(t){if(!t)return"";if(!angular.isArray(t)&&angular.isString(t)&&(t=t.split("\n")),!angular.isArray(t))return"";var n='<ul class="unstyled">\n';return t.each(function(t){n+="<li>"+e.formatStackLine(t)+"</li>\n"}),n+="</ul>\n"}function n(e){var t=i.exec(e);if(t&&t.length>6){var n=t[1],r=t[4],e=t[5],a=t[6];if(n&&r&&a){var o=n,s=n.lastIndexOf(".");s>0&&(o=n.substring(0,s));var l="#/source/view/"+a+"/class/"+o+"/"+r;return angular.isDefined(e)&&(l+="?line="+e),"<div class='stack-line'>  at <a href='"+l+"'>"+n+"</a>(<span class='fileName'>"+r+"</span>:<span class='lineNumber'>"+e+"</span>)[<span class='mavenCoords'>"+a+"</span>]</div>"}}var c=!0;return e&&(e=e.trim(),e.startsWith("at")&&(e="  "+e,c=!1)),c?'<pre class="stack-line bold">'+e+"</pre>":'<pre class="stack-line">'+e+"</pre>"}var i=/\s*at\s+([\w\.$_]+(\.([\w$_]+))*)\((.*)?:(\d+)\).*\[(.*)\]/;e.formatStackTrace=t,e.formatStackLine=n}(Log||(Log={}));var ObjectHelpers;!function(e){function t(e,t,n){if(!e||0===e.length)return{};var i={};return e.forEach(function(e){angular.isObject(e)&&(i[e[t]]=e,angular.isFunction(n)&&n(e))}),i}e.toMap=t}(ObjectHelpers||(ObjectHelpers={}));var PluginHelpers;!function(e){function t(e,t){return function(n,i){return e.controller(t+"."+n,i)}}function n(e){return function(t,n){return void 0===n&&(n=!0),{templateUrl:UrlHelpers.join(e,t),reloadOnSearch:n
}}}e.createControllerFunction=t,e.createRoutingFunction=n}(PluginHelpers||(PluginHelpers={}));var PollHelpers;!function(e){function t(e,t,i,r,a){if(void 0===i&&(i=2e3),e.$hasPoller)return void n.debug("scope already has polling set up, ignoring subsequent polling request");e.$hasPoller=!0,r||(r=HawtioCore.injector.get("$timeout")),a||(a=HawtioCore.injector.get("jolokia"));var o=void 0,s=e.name||"anonymous scope",l=function(){t(function(){var t=e.$keepPolling;angular.isFunction(t)||(t=function(){return!a||a.isRunning()}),t()&&e.$hasPoller&&(o=r(l,i))})};return e.$on&&(e.$on("$destroy",function(){n.debug("scope",s," being destroyed, cancelling polling"),delete e.$hasPoller,r.cancel(o)}),e.$on("$routeChangeStart",function(){n.debug("route changing, cancelling polling for scope: ",s),delete e.$hasPoller,r.cancel(o)})),l}var n=Logger.get("PollHelpers");e.setupPolling=t}(PollHelpers||(PollHelpers={}));var Core;!function(e){function t(t,n){var i=null;return angular.isDefined(t)&&(i=e.parseJsonText(t,"localStorage for "+n)),i}function n(t,n,i){angular.forEach(i,function(i,r){t[r]=i.value;var a=i.converter,o=i.formatter;if(o||(o=function(e){return e}),a||(a=function(e){return e}),r in n){var s=a(n[r]);e.log.debug("from local storage, setting ",r," to ",s),t[r]=s}else{var s=i.value;e.log.debug("from default, setting ",r," to ",s),n[r]=s}var l=i.override;l||(l=function(t,a){if(t!==a){angular.isFunction(i.pre)&&i.pre(t);var s=o(t);e.log.debug("to local storage, setting ",r," to ",s),n[r]=s,angular.isFunction(i.post)&&i.post(t)}}),i.compareAsObject?t.$watch(r,l,!0):t.$watch(r,l)})}function i(e,t,n){return!t||t(e,n)}e.parsePreferencesJson=t,e.initPreferenceScope=n,e.isValidFunction=i}(Core||(Core={}));var SelectionHelpers;!function(e){function t(e){e.forEach(function(e){e.selected=!1})}function n(e,t){e.forEach(function(e){t?t(e)&&(e.selected=!0):e.selected=!0})}function i(e){e.selected=!e.selected}function r(e,n){t(e),i(n)}function a(e,t,n){return t.forEach(function(t){t.selected=e.any(function(e){return e[n]===t[n]})}),t.filter(function(e){return e.selected})}function o(e,t,n){var a=n.ctrlKey;a?i(t):t.selected?i(t):r(e,t)}function s(e,t,n){return h(e.selected,t,n)}function l(e){e.length=0}function c(e,t,n){var i=n||t;e.any(i)?e.remove(i):e.add(t)}function u(e,t){return angular.isDefined(e)?e:t}function d(e){return u(e,!1)}function p(e){return u(e,!0)}function h(e,t,n){return e?p(t):d(n)}function f(e,t,n,i,r){if(!e)return d(i);var a=r||t;return h(e.any(a),n,i)}function g(e,t,n,i,r){if(0===e.length)return p(n);var a=r||t;return angular.isArray(t)?h(e.intersect(t).length===e.length,n,i):h(e.any(a),n,i)}function m(e,t,n){var i=[];e.forEach(n?function(e){var r=t.find(function(t){return e[n]===t[n]});r&&i.push(r)}:function(e){var n=t.find(function(t){return _.isEqual(e,t)});n&&i.push(n)}),l(e),e.add(i)}function v(e){e.selectNone=t,e.selectAll=n,e.toggleSelection=i,e.selectOne=r,e.select=o,e.clearGroup=l,e.toggleSelectionFromGroup=c,e.isInGroup=f,e.viewOnly=!1,e.filterByGroup=g}Logger.get("SelectionHelpers");e.selectNone=t,e.selectAll=n,e.toggleSelection=i,e.selectOne=r,e.sync=a,e.select=o,e.isSelected=s,e.clearGroup=l,e.toggleSelectionFromGroup=c,e.isInGroup=f,e.filterByGroup=g,e.syncGroupSelection=m,e.decorate=v}(SelectionHelpers||(SelectionHelpers={}));var StorageHelpers;!function(e){function t(e){var t=e.$scope.name+":"||"::",n=t+e.modelName,i=e.to||Core.doNothing,r=e.from||Core.doNothing,a=function(t){angular.isFunction(e.onChange)&&e.onChange(t);var r=i(t);return e.localStorage[n]=r,r},o=function(t){return(void 0===t||null===t)&&(t=e.localStorage[n]),r(t)},s=o(void 0);ControllerHelpers.bindModelToSearchParam(e.$scope,e.$location,e.modelName,e.paramName,s||e.initialValue,a,o)}e.bindModelToLocalStorage=t}(StorageHelpers||(StorageHelpers={}));var UI;!function(e){function t(e,n){return n in e?e:e.$parent?t(e.$parent,n):null}function n(e,t,n){if(e in t){var i=t[e];if(i&&!i.isBlank())return i}return n}function i(e,t,n,i,r){void 0===r&&(r=null),t.$observe(n,function(t){e[n]=angular.isDefined(t)?t:i,angular.isDefined(r)&&r&&r(e[n])})}function r(){if(!angular.isDefined(e.scrollBarWidth)){var t=document.createElement("div");t.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',t=t.firstChild,document.body.appendChild(t),e.scrollBarWidth=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return e.scrollBarWidth}e.scrollBarWidth=null,e.findParentWith=t,e.getIfSet=n,e.observe=i,e.getScrollbarWidth=r}(UI||(UI={}));var templateCache;!function(e){e.pluginName="hawtio-template-cache",e._module=angular.module(e.pluginName,[]),e._module.config(["$provide",function(e){e.decorator("$templateCache",["$delegate",function(e){var t=(Logger.get("$templateCache"),e.put);e.watches={},e.put=function(n,i){if(t(n,i),n in e.watches){{_.forEach(e.watches[n],function(e){e(i)})}delete e.watches[n]}};var n=e.get;return e.get=function(e){var t=n(e);return t},e}]),e.decorator("$templateRequest",["$rootScope","$timeout","$q","$templateCache","$delegate",function(e,t,n,i,r){return function(e,a){var o=(Logger.get("$templateRequest"),i.get(e)),s=n.defer();return angular.isDefined(o)?(t(function(){s.resolve(o)},1),s.promise):"watches"in i?(i.watches[e]||(i.watches[e]=[]),i.watches[e].push(function(e){s.resolve(e)}),s.promise):r(e,a)}}])}]),hawtioPluginLoader.addModule("ngRoute"),hawtioPluginLoader.addModule(e.pluginName)}(templateCache||(templateCache={})),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);this.CodeMirror=e()}}(function(){"use strict";function e(n,i){if(!(this instanceof e))return new e(n,i);this.options=i=i?Nr(i):{},Nr(Ga,i,!1),h(i);var r=i.value;"string"==typeof r&&(r=new yo(r,i.mode)),this.doc=r;var a=new e.inputStyles[i.inputStyle](this),o=this.display=new t(n,r,a);o.wrapper.CodeMirror=this,c(this),s(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),i.autofocus&&!Ca&&o.input.focus(),v(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Tr,keySeq:null,specialChars:null};var l=this;ha&&11>fa&&setTimeout(function(){l.display.input.reset(!0)},20),zt(this),Wr(),bt(this),this.curOp.forceUpdate=!0,Gi(this,r),i.autofocus&&!Ca||l.hasFocus()?setTimeout(jr(fn,this),20):gn(this);for(var u in Ka)Ka.hasOwnProperty(u)&&Ka[u](this,i[u],Xa);k(this),i.finishInit&&i.finishInit(this);for(var d=0;d<Za.length;++d)Za[d](this);xt(this),ga&&i.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}function t(e,t,n){var i=this;this.input=n,i.scrollbarFiller=Fr("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=Fr("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=Fr("div",null,"CodeMirror-code"),i.selectionDiv=Fr("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=Fr("div",null,"CodeMirror-cursors"),i.measure=Fr("div",null,"CodeMirror-measure"),i.lineMeasure=Fr("div",null,"CodeMirror-measure"),i.lineSpace=Fr("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=Fr("div",[Fr("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=Fr("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=Fr("div",null,null,"position: absolute; height: "+Ao+"px; width: 1px;"),i.gutters=Fr("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=Fr("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=Fr("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),ha&&8>fa&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),ga||ua&&Ca||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,n.init(i)}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),i(t)}function i(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Re(e,100),e.state.modeGen++,e.curOp&&Nt(e)}function r(e){e.options.lineWrapping?(Ho(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Bo(e.display.wrapper,"CodeMirror-wrap"),p(e)),o(e),Nt(e),ot(e),setTimeout(function(){y(e)},100)}function a(e){var t=vt(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/yt(e.display)-3);return function(r){if(bi(e.doc,r))return 0;var a=0;if(r.widgets)for(var o=0;o<r.widgets.length;o++)r.widgets[o].height&&(a+=r.widgets[o].height);return n?a+(Math.ceil(r.text.length/i)||1)*t:a+t}}function o(e){var t=e.doc,n=a(e);t.iter(function(e){var t=n(e);t!=e.height&&Ji(e,t)})}function s(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ot(e)}function l(e){c(e),Nt(e),setTimeout(function(){x(e)},20)}function c(e){var t=e.display.gutters,n=e.options.gutters;Ur(t);for(var i=0;i<n.length;++i){var r=n[i],a=t.appendChild(Fr("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(e.display.lineGutter=a,a.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=i?"":"none",u(e)}function u(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function d(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=pi(i);){var r=t.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=e;t=hi(i);){var r=t.find(0,!0);n-=i.text.length-r.from.ch,i=r.to.line,n+=i.text.length-r.to.ch}return n}function p(e){var t=e.display,n=e.doc;t.maxLine=Ki(n,n.first),t.maxLineLength=d(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=d(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function h(e){var t=Pr(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function f(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+Be(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Ve(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function g(e,t,n){this.cm=n;var i=this.vert=Fr("div",[Fr("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=Fr("div",[Fr("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(i),e(r),So(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),So(r,"scroll",function(){r.clientWidth&&t(r.scrollLeft,"horizontal")}),this.checkedOverlay=!1,ha&&8>fa&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function m(){}function v(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&Bo(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new e.scrollbarModel[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),So(e,"mousedown",function(){t.state.focused&&setTimeout(function(){t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,n){"horizontal"==n?tn(t,e):en(t,e)},t),t.display.scrollbars.addClass&&Ho(t.display.wrapper,t.display.scrollbars.addClass)}function y(e,t){t||(t=f(e));var n=e.display.barWidth,i=e.display.barHeight;b(e,t);for(var r=0;4>r&&n!=e.display.barWidth||i!=e.display.barHeight;r++)n!=e.display.barWidth&&e.options.lineWrapping&&I(e),b(e,f(e)),n=e.display.barWidth,i=e.display.barHeight}function b(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}function w(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-qe(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,a=Zi(t,i),o=Zi(t,r);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;a>s?(a=s,o=Zi(t,er(Ki(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=o&&(a=Zi(t,er(Ki(t,l))-e.wrapper.clientHeight),o=l)}return{from:a,to:Math.max(o,a+1)}}function x(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=S(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,a=i+"px",o=0;o<n.length;o++)if(!n[o].hidden){e.options.fixedGutter&&n[o].gutter&&(n[o].gutter.style.left=a);var s=n[o].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}}function k(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=C(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(Fr("div",[Fr("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=r.firstChild.offsetWidth,o=r.offsetWidth-a;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(a,i.lineGutter.offsetWidth-o)+1,i.lineNumWidth=i.lineNumInnerWidth+o,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",u(e),!0}return!1}function C(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function S(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function _(e,t,n){var i=e.display;this.viewport=t,this.visible=w(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=We(e),this.force=n,this.dims=M(e),this.events=[]}function T(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Ve(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Ve(e)+"px",t.scrollbarsClipped=!0)}function $(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return Ot(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Ut(e))return!1;k(e)&&(Ot(e),t.dims=M(e));var r=i.first+i.size,a=Math.max(t.visible.from-e.options.viewportMargin,i.first),o=Math.min(r,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(i.first,n.viewFrom)),n.viewTo>o&&n.viewTo-o<20&&(o=Math.min(r,n.viewTo)),Pa&&(a=vi(e.doc,a),o=yi(e.doc,o));var s=a!=n.viewFrom||o!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;Ft(e,a,o),n.viewOffset=er(Ki(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var l=Ut(e);if(!s&&0==l&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=qr();return l>4&&(n.lineDiv.style.display="none"),N(e,n.updateLineNumbers,t.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,c&&qr()!=c&&c.offsetHeight&&c.focus(),Ur(n.cursorDiv),Ur(n.selectionDiv),n.gutters.style.height=0,s&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Re(e,400)),n.updateLineNumbers=null,!0}function A(e,t){for(var n=t.viewport,i=!0;(i&&e.options.lineWrapping&&t.oldDisplayWidth!=We(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Be(e.display)-Ge(e),n.top)}),t.visible=w(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&$(e,t);i=!1){I(e);var r=f(e);Me(e),P(e,r),y(e,r)}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function E(e,t){var n=new _(e,t);if($(e,n)){I(e),A(e,n);var i=f(e);Me(e),P(e,i),y(e,i),n.finish()}}function P(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";var n=t.docHeight+e.display.barHeight;e.display.heightForcer.style.top=n+"px",e.display.gutters.style.height=Math.max(n+Ve(e),t.clientHeight)+"px"}function I(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var r,a=t.view[i];if(!a.hidden){if(ha&&8>fa){var o=a.node.offsetTop+a.node.offsetHeight;r=o-n,n=o}else{var s=a.node.getBoundingClientRect();r=s.bottom-s.top}var l=a.line.height-r;if(2>r&&(r=vt(t)),(l>.001||-.001>l)&&(Ji(a.line,r),D(a.line),a.rest))for(var c=0;c<a.rest.length;c++)D(a.rest[c])}}}function D(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function M(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,a=t.gutters.firstChild,o=0;a;a=a.nextSibling,++o)n[e.options.gutters[o]]=a.offsetLeft+a.clientLeft+r,i[e.options.gutters[o]]=a.clientWidth;return{fixedPos:S(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function N(e,t,n){function i(t){var n=t.nextSibling;return ga&&Sa&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var r=e.display,a=e.options.lineNumbers,o=r.lineDiv,s=o.firstChild,l=r.view,c=r.viewFrom,u=0;u<l.length;u++){var d=l[u];if(d.hidden);else if(d.node&&d.node.parentNode==o){for(;s!=d.node;)s=i(s);var p=a&&null!=t&&c>=t&&d.lineNumber;d.changes&&(Pr(d.changes,"gutter")>-1&&(p=!1),j(e,d,c,n)),p&&(Ur(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(C(e.options,c)))),s=d.node.nextSibling}else{var h=B(e,d,c,n);o.insertBefore(h,s)}c+=d.size}for(;s;)s=i(s)}function j(e,t,n,i){for(var r=0;r<t.changes.length;r++){var a=t.changes[r];"text"==a?F(e,t):"gutter"==a?z(e,t,n,i):"class"==a?U(t):"widget"==a&&q(e,t,i)}t.changes=null}function O(e){return e.node==e.text&&(e.node=Fr("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),ha&&8>fa&&(e.node.style.zIndex=2)),e.node}function L(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=O(e);e.background=n.insertBefore(Fr("div",null,t),n.firstChild)}}function R(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):ji(e,t)}function F(e,t){var n=t.text.className,i=R(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,U(t)):n&&(t.text.className=n)}function U(e){L(e),e.line.wrapClass?O(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function z(e,t,n,i){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var r=t.line.gutterMarkers;if(e.options.lineNumbers||r){var a=O(t),o=t.gutter=Fr("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px");if(e.display.input.setUneditable(o),a.insertBefore(o,t.text),t.line.gutterClass&&(o.className+=" "+t.line.gutterClass),!e.options.lineNumbers||r&&r["CodeMirror-linenumbers"]||(t.lineNumber=o.appendChild(Fr("div",C(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),r)for(var s=0;s<e.options.gutters.length;++s){var l=e.options.gutters[s],c=r.hasOwnProperty(l)&&r[l];c&&o.appendChild(Fr("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[l]+"px; width: "+i.gutterWidth[l]+"px"))}}}function q(e,t,n){t.alignable&&(t.alignable=null);for(var i,r=t.node.firstChild;r;r=i){var i=r.nextSibling;"CodeMirror-linewidget"==r.className&&t.node.removeChild(r)}H(e,t,n)}function B(e,t,n,i){var r=R(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),U(t),z(e,t,n,i),H(e,t,i),t.node}function H(e,t,n){if(V(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)V(e,t.rest[i],t,n,!1)}function V(e,t,n,i,r){if(t.widgets)for(var a=O(n),o=0,s=t.widgets;o<s.length;++o){var l=s[o],c=Fr("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),W(l,c,n,i),e.display.input.setUneditable(c),r&&l.above?a.insertBefore(c,n.gutter||n.text):a.appendChild(c),wr(l,"redraw")}}function W(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function G(e){return Ia(e.line,e.ch)}function K(e,t){return Da(e,t)<0?t:e}function X(e,t){return Da(e,t)<0?e:t}function Y(e){e.state.focused||(e.display.input.focus(),fn(e))}function J(e){return e.options.readOnly||e.doc.cantEdit}function Q(e,t,n,i,r){var a=e.doc;e.display.shift=!1,i||(i=a.sel);var o=e.state.pasteIncoming||"paste"==r,s=Go(t),l=null;o&&i.ranges.length>1&&(Ma&&Ma.join("\n")==t?l=i.ranges.length%Ma.length==0&&Ir(Ma,Go):s.length==i.ranges.length&&(l=Ir(s,function(e){return[e]})));for(var c=i.ranges.length-1;c>=0;c--){var u=i.ranges[c],d=u.from(),p=u.to();u.empty()&&(n&&n>0?d=Ia(d.line,d.ch-n):e.state.overwrite&&!o&&(p=Ia(p.line,Math.min(Ki(a,p.line).text.length,p.ch+Er(s).length))));var h=e.curOp.updateInput,f={from:d,to:p,text:l?l[c%l.length]:s,origin:r||(o?"paste":e.state.cutIncoming?"cut":"+input")};Cn(e.doc,f),wr(e,"inputRead",e,f)}t&&!o&&ee(e,t),jn(e),e.curOp.updateInput=h,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Z(e,t){var n=e.clipboardData&&e.clipboardData.getData("text/plain");return n?(e.preventDefault(),At(t,function(){Q(t,n,0,null,"paste")}),!0):void 0}function ee(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var a=e.getModeAt(r.head),o=!1;if(a.electricChars){for(var s=0;s<a.electricChars.length;s++)if(t.indexOf(a.electricChars.charAt(s))>-1){o=Ln(e,r.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(Ki(e.doc,r.head.line).text.slice(0,r.head.ch))&&(o=Ln(e,r.head.line,"smart"));o&&wr(e,"electricInput",e,r.head.line)}}}function te(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line,a={anchor:Ia(r,0),head:Ia(r+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function ne(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function ie(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Tr,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function re(){var e=Fr("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=Fr("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return ga?e.style.width="1000px":e.setAttribute("wrap","off"),ka&&(e.style.border="1px solid black"),ne(e),t}function ae(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Tr,this.gracePeriod=!1}function oe(e,t){var n=Qe(e,t.line);if(!n||n.hidden)return null;var i=Ki(e.doc,t.line),r=Xe(n,i,t.line),a=tr(i),o="left";if(a){var s=oa(a,t.ch);o=s%2?"right":"left"}var l=tt(r.map,t.ch,o);return l.offset="right"==l.collapse?l.end:l.start,l}function se(e,t){return t&&(e.bad=!0),e}function le(e,t,n){var i;if(t==e.display.lineDiv){if(i=e.display.lineDiv.childNodes[n],!i)return se(e.clipPos(Ia(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var a=e.display.view[r];if(a.node==i)return ce(a,t,n)}}function ce(e,t,n){function i(t,n,i){for(var r=-1;r<(u?u.length:0);r++)for(var a=0>r?c.map:u[r],o=0;o<a.length;o+=3){var s=a[o+2];if(s==t||s==n){var l=Qi(0>r?e.line:e.rest[r]),d=a[o]+i;return(0>i||s!=t)&&(d=a[o+(i?1:0)]),Ia(l,d)}}}var r=e.text.firstChild,a=!1;if(!t||!Uo(r,t))return se(Ia(Qi(e.line),0),!0);if(t==r&&(a=!0,t=r.childNodes[n],n=0,!t)){var o=e.rest?Er(e.rest):e.line;return se(Ia(Qi(o),o.text.length),a)}var s=3==t.nodeType?t:null,l=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,n&&(n=s.nodeValue.length));l.parentNode!=r;)l=l.parentNode;var c=e.measure,u=c.maps,d=i(s,l,n);if(d)return se(d,a);for(var p=l.nextSibling,h=s?s.nodeValue.length-n:0;p;p=p.nextSibling){if(d=i(p,p.firstChild,0))return se(Ia(d.line,d.ch-h),a);h+=p.textContent.length}for(var f=l.previousSibling,h=n;f;f=f.previousSibling){if(d=i(f,f.firstChild,-1))return se(Ia(d.line,d.ch+h),a);h+=p.textContent.length}}function ue(e,t,n,i,r){function a(e){return function(t){return t.id==e}}function o(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(null!=n)return""==n&&(n=t.textContent.replace(/\u200b/g,"")),void(s+=n);var c,u=t.getAttribute("cm-marker");if(u){var d=e.findMarks(Ia(i,0),Ia(r+1,0),a(+u));return void(d.length&&(c=d[0].find())&&(s+=Xi(e.doc,c.from,c.to).join("\n")))}if("false"==t.getAttribute("contenteditable"))return;for(var p=0;p<t.childNodes.length;p++)o(t.childNodes[p]);/^(pre|div|p)$/i.test(t.nodeName)&&(l=!0)}else if(3==t.nodeType){var h=t.nodeValue;if(!h)return;l&&(s+="\n",l=!1),s+=h}}for(var s="",l=!1;o(t),t!=n;)t=t.nextSibling;return s}function de(e,t){this.ranges=e,this.primIndex=t}function pe(e,t){this.anchor=e,this.head=t}function he(e,t){var n=e[t];e.sort(function(e,t){return Da(e.from(),t.from())}),t=Pr(e,n);for(var i=1;i<e.length;i++){var r=e[i],a=e[i-1];if(Da(a.to(),r.from())>=0){var o=X(a.from(),r.from()),s=K(a.to(),r.to()),l=a.empty()?r.from()==r.head:a.from()==a.head;t>=i&&--t,e.splice(--i,2,new pe(l?s:o,l?o:s))}}return new de(e,t)}function fe(e,t){return new de([new pe(e,t||e)],0)}function ge(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function me(e,t){if(t.line<e.first)return Ia(e.first,0);var n=e.first+e.size-1;return t.line>n?Ia(n,Ki(e,n).text.length):ve(t,Ki(e,t.line).text.length)}function ve(e,t){var n=e.ch;return null==n||n>t?Ia(e.line,t):0>n?Ia(e.line,0):e}function ye(e,t){return t>=e.first&&t<e.first+e.size}function be(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=me(e,t[i]);return n}function we(e,t,n,i){if(e.cm&&e.cm.display.shift||e.extend){var r=t.anchor;if(i){var a=Da(n,r)<0;a!=Da(i,r)<0?(r=n,n=i):a!=Da(n,i)<0&&(n=i)}return new pe(r,n)}return new pe(i||n,n)}function xe(e,t,n,i){$e(e,new de([we(e,e.sel.primary(),t,n)],0),i)}function ke(e,t,n){for(var i=[],r=0;r<e.sel.ranges.length;r++)i[r]=we(e,e.sel.ranges[r],t[r],null);var a=he(i,e.sel.primIndex);$e(e,a,n)}function Ce(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,$e(e,he(r,e.sel.primIndex),i)}function Se(e,t,n,i){$e(e,fe(t,n),i)}function _e(e,t){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new pe(me(e,t[n].anchor),me(e,t[n].head))}};return To(e,"beforeSelectionChange",e,n),e.cm&&To(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?he(n.ranges,n.ranges.length-1):t}function Te(e,t,n){var i=e.history.done,r=Er(i);r&&r.ranges?(i[i.length-1]=t,Ae(e,t,n)):$e(e,t,n)}function $e(e,t,n){Ae(e,t,n),lr(e,e.sel,e.cm?e.cm.curOp.id:0/0,n)}function Ae(e,t,n){(Sr(e,"beforeSelectionChange")||e.cm&&Sr(e.cm,"beforeSelectionChange"))&&(t=_e(e,t));var i=n&&n.bias||(Da(t.primary().head,e.sel.primary().head)<0?-1:1);Ee(e,Ie(e,t,i,!0)),n&&n.scroll===!1||!e.cm||jn(e.cm)}function Ee(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Cr(e.cm)),wr(e,"cursorActivity",e))}function Pe(e){Ee(e,Ie(e,e.sel,null,!1),Po)}function Ie(e,t,n,i){for(var r,a=0;a<t.ranges.length;a++){var o=t.ranges[a],s=De(e,o.anchor,n,i),l=De(e,o.head,n,i);(r||s!=o.anchor||l!=o.head)&&(r||(r=t.ranges.slice(0,a)),r[a]=new pe(s,l))}return r?he(r,t.primIndex):t}function De(e,t,n,i){var r=!1,a=t,o=n||1;e.cantEdit=!1;e:for(;;){var s=Ki(e,a.line);if(s.markedSpans)for(var l=0;l<s.markedSpans.length;++l){var c=s.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=a.ch:c.from<a.ch))&&(null==c.to||(u.inclusiveRight?c.to>=a.ch:c.to>a.ch))){if(i&&(To(u,"beforeCursorEnter"),u.explicitlyCleared)){if(s.markedSpans){--l;continue}break}if(!u.atomic)continue;var d=u.find(0>o?-1:1);if(0==Da(d,a)&&(d.ch+=o,d.ch<0?d=d.line>e.first?me(e,Ia(d.line-1)):null:d.ch>s.text.length&&(d=d.line<e.first+e.size-1?Ia(d.line+1,0):null),!d)){if(r)return i?(e.cantEdit=!0,Ia(e.first,0)):De(e,t,n,!0);r=!0,d=t,o=-o}a=d;continue e}}return a}}function Me(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ne(e,t){for(var n=e.doc,i={},r=i.cursors=document.createDocumentFragment(),a=i.selection=document.createDocumentFragment(),o=0;o<n.sel.ranges.length;o++)if(t!==!1||o!=n.sel.primIndex){var s=n.sel.ranges[o],l=s.empty();(l||e.options.showCursorWhenSelecting)&&je(e,s,r),l||Oe(e,s,a)}return i}function je(e,t,n){var i=pt(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),r=n.appendChild(Fr("div"," ","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var a=n.appendChild(Fr("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=i.other.left+"px",a.style.top=i.other.top+"px",a.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function Oe(e,t,n){function i(e,t,n,i){0>t&&(t=0),t=Math.round(t),i=Math.round(i),s.appendChild(Fr("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?u-e:n)+"px; height: "+(i-t)+"px"))}function r(t,n,r){function a(n,i){return dt(e,Ia(t,n),"div",d,i)}var s,l,d=Ki(o,t),p=d.text.length;return Jr(tr(d),n||0,null==r?p:r,function(e,t,o){var d,h,f,g=a(e,"left");if(e==t)d=g,h=f=g.left;else{if(d=a(t-1,"right"),"rtl"==o){var m=g;g=d,d=m}h=g.left,f=d.right}null==n&&0==e&&(h=c),d.top-g.top>3&&(i(h,g.top,null,g.bottom),h=c,g.bottom<d.top&&i(h,g.bottom,null,d.top)),null==r&&t==p&&(f=u),(!s||g.top<s.top||g.top==s.top&&g.left<s.left)&&(s=g),(!l||d.bottom>l.bottom||d.bottom==l.bottom&&d.right>l.right)&&(l=d),c+1>h&&(h=c),i(h,d.top,f-h,d.bottom)}),{start:s,end:l}}var a=e.display,o=e.doc,s=document.createDocumentFragment(),l=He(e.display),c=l.left,u=Math.max(a.sizerWidth,We(e)-a.sizer.offsetLeft)-l.right,d=t.from(),p=t.to();if(d.line==p.line)r(d.line,d.ch,p.ch);else{var h=Ki(o,d.line),f=Ki(o,p.line),g=gi(h)==gi(f),m=r(d.line,d.ch,g?h.text.length+1:null).end,v=r(p.line,g?0:null,p.ch).start;

g&&(m.top<v.top-2?(i(m.right,m.top,null,m.bottom),i(c,v.top,v.left,v.bottom)):i(m.right,m.top,v.left-m.right,m.bottom)),m.bottom<v.top&&i(c,m.bottom,null,v.top)}n.appendChild(s)}function Le(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Re(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,jr(Fe,e))}function Fe(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=to(t.mode,ze(e,t.frontier)),r=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(t.frontier>=e.display.viewFrom){var o=a.styles,s=Ii(e,a,i,!0);a.styles=s.styles;var l=a.styleClasses,c=s.classes;c?a.styleClasses=c:l&&(a.styleClasses=null);for(var u=!o||o.length!=a.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),d=0;!u&&d<o.length;++d)u=o[d]!=a.styles[d];u&&r.push(t.frontier),a.stateAfter=to(t.mode,i)}else Mi(e,a.text,i),a.stateAfter=t.frontier%5==0?to(t.mode,i):null;return++t.frontier,+new Date>n?(Re(e,e.options.workDelay),!0):void 0}),r.length&&At(e,function(){for(var t=0;t<r.length;t++)jt(e,r[t],"text")})}}function Ue(e,t,n){for(var i,r,a=e.doc,o=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>o;--s){if(s<=a.first)return a.first;var l=Ki(a,s-1);if(l.stateAfter&&(!n||s<=a.frontier))return s;var c=Mo(l.text,null,e.options.tabSize);(null==r||i>c)&&(r=s-1,i=c)}return r}function ze(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return!0;var a=Ue(e,t,n),o=a>i.first&&Ki(i,a-1).stateAfter;return o=o?to(i.mode,o):no(i.mode),i.iter(a,t,function(n){Mi(e,n.text,o);var s=a==t-1||a%5==0||a>=r.viewFrom&&a<r.viewTo;n.stateAfter=s?to(i.mode,o):null,++a}),n&&(i.frontier=a),o}function qe(e){return e.lineSpace.offsetTop}function Be(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function He(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=zr(e.measure,Fr("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Ve(e){return Ao-e.display.nativeBarWidth}function We(e){return e.display.scroller.clientWidth-Ve(e)-e.display.barWidth}function Ge(e){return e.display.scroller.clientHeight-Ve(e)-e.display.barHeight}function Ke(e,t,n){var i=e.options.lineWrapping,r=i&&We(e);if(!t.measure.heights||i&&t.measure.width!=r){var a=t.measure.heights=[];if(i){t.measure.width=r;for(var o=t.text.firstChild.getClientRects(),s=0;s<o.length-1;s++){var l=o[s],c=o[s+1];Math.abs(l.bottom-c.bottom)>2&&a.push((l.bottom+c.top)/2-n.top)}}a.push(n.bottom-n.top)}}function Xe(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var i=0;i<e.rest.length;i++)if(Qi(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Ye(e,t){t=gi(t);var n=Qi(t),i=e.display.externalMeasured=new Dt(e.doc,t,n);i.lineN=n;var r=i.built=ji(e,i);return i.text=r.pre,zr(e.display.lineMeasure,r.pre),i}function Je(e,t,n,i){return et(e,Ze(e,t),n,i)}function Qe(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Lt(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Ze(e,t){var n=Qi(t),i=Qe(e,n);i&&!i.text?i=null:i&&i.changes&&j(e,i,n,M(e)),i||(i=Ye(e,t));var r=Xe(i,t,n);return{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function et(e,t,n,i,r){t.before&&(n=-1);var a,o=n+(i||"");return t.cache.hasOwnProperty(o)?a=t.cache[o]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Ke(e,t.view,t.rect),t.hasHeights=!0),a=nt(e,t,n,i),a.bogus||(t.cache[o]=a)),{left:a.left,right:a.right,top:r?a.rtop:a.top,bottom:r?a.rbottom:a.bottom}}function tt(e,t,n){for(var i,r,a,o,s=0;s<e.length;s+=3){var l=e[s],c=e[s+1];if(l>t?(r=0,a=1,o="left"):c>t?(r=t-l,a=r+1):(s==e.length-3||t==c&&e[s+3]>t)&&(a=c-l,r=a-1,t>=c&&(o="right")),null!=r){if(i=e[s+2],l==c&&n==(i.insertLeft?"left":"right")&&(o=n),"left"==n&&0==r)for(;s&&e[s-2]==e[s-3]&&e[s-1].insertLeft;)i=e[(s-=3)+2],o="left";if("right"==n&&r==c-l)for(;s<e.length-3&&e[s+3]==e[s+4]&&!e[s+5].insertLeft;)i=e[(s+=3)+2],o="right";break}}return{node:i,start:r,end:a,collapse:o,coverStart:l,coverEnd:c}}function nt(e,t,n,i){var r,a=tt(t.map,n,i),o=a.node,s=a.start,l=a.end,c=a.collapse;if(3==o.nodeType){for(var u=0;4>u;u++){for(;s&&Rr(t.line.text.charAt(a.coverStart+s));)--s;for(;a.coverStart+l<a.coverEnd&&Rr(t.line.text.charAt(a.coverStart+l));)++l;if(ha&&9>fa&&0==s&&l==a.coverEnd-a.coverStart)r=o.parentNode.getBoundingClientRect();else if(ha&&e.options.lineWrapping){var d=Oo(o,s,l).getClientRects();r=d.length?d["right"==i?d.length-1:0]:La}else r=Oo(o,s,l).getBoundingClientRect()||La;if(r.left||r.right||0==s)break;l=s,s-=1,c="right"}ha&&11>fa&&(r=it(e.display.measure,r))}else{s>0&&(c=i="right");var d;r=e.options.lineWrapping&&(d=o.getClientRects()).length>1?d["right"==i?d.length-1:0]:o.getBoundingClientRect()}if(ha&&9>fa&&!s&&(!r||!r.left&&!r.right)){var p=o.parentNode.getClientRects()[0];r=p?{left:p.left,right:p.left+yt(e.display),top:p.top,bottom:p.bottom}:La}for(var h=r.top-t.rect.top,f=r.bottom-t.rect.top,g=(h+f)/2,m=t.view.measure.heights,u=0;u<m.length-1&&!(g<m[u]);u++);var v=u?m[u-1]:0,y=m[u],b={left:("right"==c?r.right:r.left)-t.rect.left,right:("left"==c?r.left:r.right)-t.rect.left,top:v,bottom:y};return r.left||r.right||(b.bogus=!0),e.options.singleCursorHeightPerLine||(b.rtop=h,b.rbottom=f),b}function it(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Yr(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}function rt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function at(e){e.display.externalMeasure=null,Ur(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)rt(e.display.view[t])}function ot(e){at(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function st(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function lt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function ct(e,t,n,i){if(t.widgets)for(var r=0;r<t.widgets.length;++r)if(t.widgets[r].above){var a=ki(t.widgets[r]);n.top+=a,n.bottom+=a}if("line"==i)return n;i||(i="local");var o=er(t);if("local"==i?o+=qe(e.display):o-=e.display.viewOffset,"page"==i||"window"==i){var s=e.display.lineSpace.getBoundingClientRect();o+=s.top+("window"==i?0:lt());var l=s.left+("window"==i?0:st());n.left+=l,n.right+=l}return n.top+=o,n.bottom+=o,n}function ut(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n)i-=st(),r-=lt();else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();i+=a.left,r+=a.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:i-o.left,top:r-o.top}}function dt(e,t,n,i,r){return i||(i=Ki(e.doc,t.line)),ct(e,i,Je(e,i,t.ch,r),n)}function pt(e,t,n,i,r,a){function o(t,o){var s=et(e,r,t,o?"right":"left",a);return o?s.left=s.right:s.right=s.left,ct(e,i,s,n)}function s(e,t){var n=l[t],i=n.level%2;return e==Qr(n)&&t&&n.level<l[t-1].level?(n=l[--t],e=Zr(n)-(n.level%2?0:1),i=!0):e==Zr(n)&&t<l.length-1&&n.level<l[t+1].level&&(n=l[++t],e=Qr(n)-n.level%2,i=!1),i&&e==n.to&&e>n.from?o(e-1):o(e,i)}i=i||Ki(e.doc,t.line),r||(r=Ze(e,i));var l=tr(i),c=t.ch;if(!l)return o(c);var u=oa(l,c),d=s(c,u);return null!=Qo&&(d.other=s(c,Qo)),d}function ht(e,t){var n=0,t=me(e.doc,t);e.options.lineWrapping||(n=yt(e.display)*t.ch);var i=Ki(e.doc,t.line),r=er(i)+qe(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function ft(e,t,n,i){var r=Ia(e,t);return r.xRel=i,n&&(r.outside=!0),r}function gt(e,t,n){var i=e.doc;if(n+=e.display.viewOffset,0>n)return ft(i.first,0,!0,-1);var r=Zi(i,n),a=i.first+i.size-1;if(r>a)return ft(i.first+i.size-1,Ki(i,a).text.length,!0,1);0>t&&(t=0);for(var o=Ki(i,r);;){var s=mt(e,o,r,t,n),l=hi(o),c=l&&l.find(0,!0);if(!l||!(s.ch>c.from.ch||s.ch==c.from.ch&&s.xRel>0))return s;r=Qi(o=c.to.line)}}function mt(e,t,n,i,r){function a(i){var r=pt(e,Ia(n,i),"line",t,c);return s=!0,o>r.bottom?r.left-l:o<r.top?r.left+l:(s=!1,r.left)}var o=r-er(t),s=!1,l=2*e.display.wrapper.clientWidth,c=Ze(e,t),u=tr(t),d=t.text.length,p=ea(t),h=ta(t),f=a(p),g=s,m=a(h),v=s;if(i>m)return ft(n,h,v,1);for(;;){if(u?h==p||h==la(t,p,1):1>=h-p){for(var y=f>i||m-i>=i-f?p:h,b=i-(y==p?f:m);Rr(t.text.charAt(y));)++y;var w=ft(n,y,y==p?g:v,-1>b?-1:b>1?1:0);return w}var x=Math.ceil(d/2),k=p+x;if(u){k=p;for(var C=0;x>C;++C)k=la(t,k,1)}var S=a(k);S>i?(h=k,m=S,(v=s)&&(m+=1e3),d=x):(p=k,f=S,g=s,d-=x)}}function vt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Na){Na=Fr("pre");for(var t=0;49>t;++t)Na.appendChild(document.createTextNode("x")),Na.appendChild(Fr("br"));Na.appendChild(document.createTextNode("x"))}zr(e.measure,Na);var n=Na.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),Ur(e.measure),n||1}function yt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=Fr("span","xxxxxxxxxx"),n=Fr("pre",[t]);zr(e.measure,n);var i=t.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}function bt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Fa},Ra?Ra.ops.push(e.curOp):e.curOp.ownsGroup=Ra={ops:[e.curOp],delayedCallbacks:[]}}function wt(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n]();for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++](r.cm)}}while(n<t.length)}function xt(e){var t=e.curOp,n=t.ownsGroup;if(n)try{wt(n)}finally{Ra=null;for(var i=0;i<n.ops.length;i++)n.ops[i].cm.curOp=null;kt(n)}}function kt(e){for(var t=e.ops,n=0;n<t.length;n++)Ct(t[n]);for(var n=0;n<t.length;n++)St(t[n]);for(var n=0;n<t.length;n++)_t(t[n]);for(var n=0;n<t.length;n++)Tt(t[n]);for(var n=0;n<t.length;n++)$t(t[n])}function Ct(e){var t=e.cm,n=t.display;T(t),e.updateMaxLine&&p(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new _(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function St(e){e.updatedDisplay=e.mustUpdate&&$(e.cm,e.update)}function _t(e){var t=e.cm,n=t.display;e.updatedDisplay&&I(t),e.barMeasure=f(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Je(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Ve(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-We(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Tt(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&tn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.preparedSelection&&t.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&P(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&y(t,e.barMeasure),e.selectionChanged&&Le(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),e.focus&&e.focus==qr()&&Y(e.cm)}function $t(e){var t=e.cm,n=t.display,i=t.doc;if(e.updatedDisplay&&A(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null==e.scrollTop||n.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(i.scrollTop=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,e.scrollTop)),n.scrollbars.setScrollTop(i.scrollTop),n.scroller.scrollTop=i.scrollTop),null==e.scrollLeft||n.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(i.scrollLeft=Math.max(0,Math.min(n.scroller.scrollWidth-We(t),e.scrollLeft)),n.scrollbars.setScrollLeft(i.scrollLeft),n.scroller.scrollLeft=i.scrollLeft,x(t)),e.scrollToPos){var r=In(t,me(i,e.scrollToPos.from),me(i,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&Pn(t,r)}var a=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(a)for(var s=0;s<a.length;++s)a[s].lines.length||To(a[s],"hide");if(o)for(var s=0;s<o.length;++s)o[s].lines.length&&To(o[s],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&To(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function At(e,t){if(e.curOp)return t();bt(e);try{return t()}finally{xt(e)}}function Et(e,t){return function(){if(e.curOp)return t.apply(e,arguments);bt(e);try{return t.apply(e,arguments)}finally{xt(e)}}}function Pt(e){return function(){if(this.curOp)return e.apply(this,arguments);bt(this);try{return e.apply(this,arguments)}finally{xt(this)}}}function It(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);bt(t);try{return e.apply(this,arguments)}finally{xt(t)}}}function Dt(e,t,n){this.line=t,this.rest=mi(t),this.size=this.rest?Qi(Er(this.rest))-n+1:1,this.node=this.text=null,this.hidden=bi(e,t)}function Mt(e,t,n){for(var i,r=[],a=t;n>a;a=i){var o=new Dt(e.doc,Ki(e.doc,a),a);i=a+o.size,r.push(o)}return r}function Nt(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)Pa&&vi(e.doc,t)<r.viewTo&&Ot(e);else if(n<=r.viewFrom)Pa&&yi(e.doc,n+i)>r.viewFrom?Ot(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)Ot(e);else if(t<=r.viewFrom){var a=Rt(e,n,n+i,1);a?(r.view=r.view.slice(a.index),r.viewFrom=a.lineN,r.viewTo+=i):Ot(e)}else if(n>=r.viewTo){var a=Rt(e,t,t,-1);a?(r.view=r.view.slice(0,a.index),r.viewTo=a.lineN):Ot(e)}else{var o=Rt(e,t,t,-1),s=Rt(e,n,n+i,1);o&&s?(r.view=r.view.slice(0,o.index).concat(Mt(e,o.lineN,s.lineN)).concat(r.view.slice(s.index)),r.viewTo+=i):Ot(e)}var l=r.externalMeasured;l&&(n<l.lineN?l.lineN+=i:t<l.lineN+l.size&&(r.externalMeasured=null))}function jt(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var a=i.view[Lt(e,t)];if(null!=a.node){var o=a.changes||(a.changes=[]);-1==Pr(o,n)&&o.push(n)}}}function Ot(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Lt(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,0>t)return null;for(var n=e.display.view,i=0;i<n.length;i++)if(t-=n[i].size,0>t)return i}function Rt(e,t,n,i){var r,a=Lt(e,t),o=e.display.view;if(!Pa||n==e.doc.first+e.doc.size)return{index:a,lineN:n};for(var s=0,l=e.display.viewFrom;a>s;s++)l+=o[s].size;if(l!=t){if(i>0){if(a==o.length-1)return null;r=l+o[a].size-t,a++}else r=l-t;t+=r,n+=r}for(;vi(e.doc,n)!=n;){if(a==(0>i?0:o.length-1))return null;n+=i*o[a-(0>i?1:0)].size,a+=i}return{index:a,lineN:n}}function Ft(e,t,n){var i=e.display,r=i.view;0==r.length||t>=i.viewTo||n<=i.viewFrom?(i.view=Mt(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=Mt(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(Lt(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(Mt(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,Lt(e,n)))),i.viewTo=n}function Ut(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function zt(e){function t(){r.activeTouch&&(a=setTimeout(function(){r.activeTouch=null},1e3),o=r.activeTouch,o.end=+new Date)}function n(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function i(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}var r=e.display;So(r.scroller,"mousedown",Et(e,Wt)),ha&&11>fa?So(r.scroller,"dblclick",Et(e,function(t){if(!kr(e,t)){var n=Vt(e,t);if(n&&!Jt(e,t)&&!Ht(e.display,t)){xo(t);var i=e.findWordAt(n);xe(e.doc,i.anchor,i.head)}}})):So(r.scroller,"dblclick",function(t){kr(e,t)||xo(t)}),Aa||So(r.scroller,"contextmenu",function(t){mn(e,t)});var a,o={end:0};So(r.scroller,"touchstart",function(e){if(!n(e)){clearTimeout(a);var t=+new Date;r.activeTouch={start:t,moved:!1,prev:t-o.end<=300?o:null},1==e.touches.length&&(r.activeTouch.left=e.touches[0].pageX,r.activeTouch.top=e.touches[0].pageY)}}),So(r.scroller,"touchmove",function(){r.activeTouch&&(r.activeTouch.moved=!0)}),So(r.scroller,"touchend",function(n){var a=r.activeTouch;if(a&&!Ht(r,n)&&null!=a.left&&!a.moved&&new Date-a.start<300){var o,s=e.coordsChar(r.activeTouch,"page");o=!a.prev||i(a,a.prev)?new pe(s,s):!a.prev.prev||i(a,a.prev.prev)?e.findWordAt(s):new pe(Ia(s.line,0),me(e.doc,Ia(s.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),xo(n)}t()}),So(r.scroller,"touchcancel",t),So(r.scroller,"scroll",function(){r.scroller.clientHeight&&(en(e,r.scroller.scrollTop),tn(e,r.scroller.scrollLeft,!0),To(e,"scroll",e))}),So(r.scroller,"mousewheel",function(t){nn(e,t)}),So(r.scroller,"DOMMouseScroll",function(t){nn(e,t)}),So(r.wrapper,"scroll",function(){r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),r.dragFunctions={simple:function(t){kr(e,t)||Co(t)},start:function(t){Zt(e,t)},drop:Et(e,Qt)};var s=r.input.getField();So(s,"keyup",function(t){dn.call(e,t)}),So(s,"keydown",Et(e,cn)),So(s,"keypress",Et(e,pn)),So(s,"focus",jr(fn,e)),So(s,"blur",jr(gn,e))}function qt(t,n,i){var r=i&&i!=e.Init;if(!n!=!r){var a=t.display.dragFunctions,o=n?So:_o;o(t.display.scroller,"dragstart",a.start),o(t.display.scroller,"dragenter",a.simple),o(t.display.scroller,"dragover",a.simple),o(t.display.scroller,"drop",a.drop)}}function Bt(e){var t=e.display;(t.lastWrapHeight!=t.wrapper.clientHeight||t.lastWrapWidth!=t.wrapper.clientWidth)&&(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function Ht(e,t){for(var n=yr(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Vt(e,t,n,i){var r=e.display;if(!n&&"true"==yr(t).getAttribute("cm-not-content"))return null;var a,o,s=r.lineSpace.getBoundingClientRect();try{a=t.clientX-s.left,o=t.clientY-s.top}catch(t){return null}var l,c=gt(e,a,o);if(i&&1==c.xRel&&(l=Ki(e.doc,c.line).text).length==c.ch){var u=Mo(l,l.length,e.options.tabSize)-l.length;c=Ia(c.line,Math.max(0,Math.round((a-He(e.display).left)/yt(e.display))-u))}return c}function Wt(e){var t=this,n=t.display;if(!(n.activeTouch&&n.input.supportsTouch()||kr(t,e))){if(n.shift=e.shiftKey,Ht(n,e))return void(ga||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100)));if(!Jt(t,e)){var i=Vt(t,e);switch(window.focus(),br(e)){case 1:i?Gt(t,e,i):yr(e)==n.scroller&&xo(e);break;case 2:ga&&(t.state.lastMiddleDown=+new Date),i&&xe(t.doc,i),setTimeout(function(){n.input.focus()},20),xo(e);break;case 3:Aa?mn(t,e):hn(t)}}}}function Gt(e,t,n){ha?setTimeout(jr(Y,e),0):e.curOp.focus=qr();var i,r=+new Date;Oa&&Oa.time>r-400&&0==Da(Oa.pos,n)?i="triple":ja&&ja.time>r-400&&0==Da(ja.pos,n)?(i="double",Oa={time:r,pos:n}):(i="single",ja={time:r,pos:n});var a,o=e.doc.sel,s=Sa?t.metaKey:t.ctrlKey;e.options.dragDrop&&Wo&&!J(e)&&"single"==i&&(a=o.contains(n))>-1&&(Da((a=o.ranges[a]).from(),n)<0||n.xRel>0)&&(Da(a.to(),n)>0||n.xRel<0)?Kt(e,t,n,s):Xt(e,t,n,i,s)}function Kt(e,t,n,i){var r=e.display,a=+new Date,o=Et(e,function(s){ga&&(r.scroller.draggable=!1),e.state.draggingText=!1,_o(document,"mouseup",o),_o(r.scroller,"drop",o),Math.abs(t.clientX-s.clientX)+Math.abs(t.clientY-s.clientY)<10&&(xo(s),!i&&+new Date-200<a&&xe(e.doc,n),ga||ha&&9==fa?setTimeout(function(){document.body.focus(),r.input.focus()},20):r.input.focus())});ga&&(r.scroller.draggable=!0),e.state.draggingText=o,r.scroller.dragDrop&&r.scroller.dragDrop(),So(document,"mouseup",o),So(r.scroller,"drop",o)}function Xt(e,t,n,i,r){function a(t){if(0!=Da(m,t))if(m=t,"rect"==i){for(var r=[],a=e.options.tabSize,o=Mo(Ki(c,n.line).text,n.ch,a),s=Mo(Ki(c,t.line).text,t.ch,a),l=Math.min(o,s),h=Math.max(o,s),f=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));g>=f;f++){var v=Ki(c,f).text,y=$r(v,l,a);l==h?r.push(new pe(Ia(f,y),Ia(f,y))):v.length>y&&r.push(new pe(Ia(f,y),Ia(f,$r(v,h,a))))}r.length||r.push(new pe(n,n)),$e(c,he(p.ranges.slice(0,d).concat(r),d),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=u,w=b.anchor,x=t;if("single"!=i){if("double"==i)var k=e.findWordAt(t);else var k=new pe(Ia(t.line,0),me(c,Ia(t.line+1,0)));Da(k.anchor,w)>0?(x=k.head,w=X(b.from(),k.anchor)):(x=k.anchor,w=K(b.to(),k.head))}var r=p.ranges.slice(0);r[d]=new pe(me(c,w),x),$e(c,he(r,d),Io)}}function o(t){var n=++y,r=Vt(e,t,!0,"rect"==i);if(r)if(0!=Da(r,m)){e.curOp.focus=qr(),a(r);var s=w(l,c);(r.line>=s.to||r.line<s.from)&&setTimeout(Et(e,function(){y==n&&o(t)}),150)}else{var u=t.clientY<v.top?-20:t.clientY>v.bottom?20:0;u&&setTimeout(Et(e,function(){y==n&&(l.scroller.scrollTop+=u,o(t))}),50)}}function s(e){y=1/0,xo(e),l.input.focus(),_o(document,"mousemove",b),_o(document,"mouseup",x),c.history.lastSelOrigin=null}var l=e.display,c=e.doc;xo(t);var u,d,p=c.sel,h=p.ranges;if(r&&!t.shiftKey?(d=c.sel.contains(n),u=d>-1?h[d]:new pe(n,n)):(u=c.sel.primary(),d=c.sel.primIndex),t.altKey)i="rect",r||(u=new pe(n,n)),n=Vt(e,t,!0,!0),d=-1;else if("double"==i){var f=e.findWordAt(n);u=e.display.shift||c.extend?we(c,u,f.anchor,f.head):f}else if("triple"==i){var g=new pe(Ia(n.line,0),me(c,Ia(n.line+1,0)));u=e.display.shift||c.extend?we(c,u,g.anchor,g.head):g}else u=we(c,u,n);r?-1==d?(d=h.length,$e(c,he(h.concat([u]),d),{scroll:!1,origin:"*mouse"})):h.length>1&&h[d].empty()&&"single"==i&&!t.shiftKey?($e(c,he(h.slice(0,d).concat(h.slice(d+1)),0)),p=c.sel):Ce(c,d,u,Io):(d=0,$e(c,new de([u],0),Io),p=c.sel);var m=n,v=l.wrapper.getBoundingClientRect(),y=0,b=Et(e,function(e){br(e)?o(e):s(e)}),x=Et(e,s);So(document,"mousemove",b),So(document,"mouseup",x)}function Yt(e,t,n,i,r){try{var a=t.clientX,o=t.clientY}catch(t){return!1}if(a>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&xo(t);var s=e.display,l=s.lineDiv.getBoundingClientRect();if(o>l.bottom||!Sr(e,n))return vr(t);o-=l.top-s.viewOffset;for(var c=0;c<e.options.gutters.length;++c){var u=s.gutters.childNodes[c];if(u&&u.getBoundingClientRect().right>=a){var d=Zi(e.doc,o),p=e.options.gutters[c];return r(e,n,e,d,p,t),vr(t)}}}function Jt(e,t){return Yt(e,t,"gutterClick",!0,wr)}function Qt(e){var t=this;if(!kr(t,e)&&!Ht(t.display,e)){xo(e),ha&&(Ua=+new Date);var n=Vt(t,e,!0),i=e.dataTransfer.files;if(n&&!J(t))if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,a=Array(r),o=0,s=function(e,i){var s=new FileReader;s.onload=Et(t,function(){if(a[i]=s.result,++o==r){n=me(t.doc,n);var e={from:n,to:n,text:Go(a.join("\n")),origin:"paste"};Cn(t.doc,e),Te(t.doc,fe(n,Wa(e)))}}),s.readAsText(e)},l=0;r>l;++l)s(i[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){t.display.input.focus()},20);try{var a=e.dataTransfer.getData("Text");if(a){if(t.state.draggingText&&!(Sa?e.altKey:e.ctrlKey))var c=t.listSelections();if(Ae(t.doc,fe(n,n)),c)for(var l=0;l<c.length;++l)En(t.doc,"",c[l].anchor,c[l].head,"drag");t.replaceSelection(a,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Zt(e,t){if(ha&&(!e.state.draggingText||+new Date-Ua<100))return void Co(t);if(!kr(e,t)&&!Ht(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!ba)){var n=Fr("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ya&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),ya&&n.parentNode.removeChild(n)}}function en(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,ua||E(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),ua&&E(e),Re(e,100))}function tn(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,x(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function nn(e,t){var n=Ba(t),i=n.x,r=n.y,a=e.display,o=a.scroller;if(i&&o.scrollWidth>o.clientWidth||r&&o.scrollHeight>o.clientHeight){if(r&&Sa&&ga)e:for(var s=t.target,l=a.view;s!=o;s=s.parentNode)for(var c=0;c<l.length;c++)if(l[c].node==s){e.display.currentWheelTarget=s;break e}if(i&&!ua&&!ya&&null!=qa)return r&&en(e,Math.max(0,Math.min(o.scrollTop+r*qa,o.scrollHeight-o.clientHeight))),tn(e,Math.max(0,Math.min(o.scrollLeft+i*qa,o.scrollWidth-o.clientWidth))),xo(t),void(a.wheelStartX=null);if(r&&null!=qa){var u=r*qa,d=e.doc.scrollTop,p=d+a.wrapper.clientHeight;0>u?d=Math.max(0,d+u-50):p=Math.min(e.doc.height,p+u+50),E(e,{top:d,bottom:p})}20>za&&(null==a.wheelStartX?(a.wheelStartX=o.scrollLeft,a.wheelStartY=o.scrollTop,a.wheelDX=i,a.wheelDY=r,setTimeout(function(){if(null!=a.wheelStartX){var e=o.scrollLeft-a.wheelStartX,t=o.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(qa=(qa*za+n)/(za+1),++za)}},200)):(a.wheelDX+=i,a.wheelDY+=r))}}function rn(e,t,n){if("string"==typeof t&&(t=io[t],!t))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{J(e)&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=Eo}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}function an(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=ao(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&ao(t,e.options.extraKeys,n,e)||ao(t,e.options.keyMap,n,e)}function on(e,t,n,i){var r=e.state.keySeq;if(r){if(oo(t))return"handled";Ha.set(50,function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())}),t=r+" "+t}var a=an(e,t,i);return"multi"==a&&(e.state.keySeq=t),"handled"==a&&wr(e,"keyHandled",e,t,n),("handled"==a||"multi"==a)&&(xo(n),Le(e)),r&&!a&&/\'$/.test(t)?(xo(n),!0):!!a}function sn(e,t){var n=so(t,!0);return n?t.shiftKey&&!e.state.keySeq?on(e,"Shift-"+n,t,function(t){return rn(e,t,!0)})||on(e,n,t,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?rn(e,t):void 0}):on(e,n,t,function(t){return rn(e,t)}):!1}function ln(e,t,n){return on(e,"'"+n+"'",t,function(t){return rn(e,t,!0)})}function cn(e){var t=this;if(t.curOp.focus=qr(),!kr(t,e)){ha&&11>fa&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var i=sn(t,e);ya&&(Va=i?n:null,!i&&88==n&&!Xo&&(Sa?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||un(t)}}function un(e){function t(e){18!=e.keyCode&&e.altKey||(Bo(n,"CodeMirror-crosshair"),_o(document,"keyup",t),_o(document,"mouseover",t))}var n=e.display.lineDiv;Ho(n,"CodeMirror-crosshair"),So(document,"keyup",t),So(document,"mouseover",t)}function dn(e){16==e.keyCode&&(this.doc.sel.shift=!1),kr(this,e)}function pn(e){var t=this;if(!(Ht(t.display,e)||kr(t,e)||e.ctrlKey&&!e.altKey||Sa&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(ya&&n==Va)return Va=null,void xo(e);if(!ya||e.which&&!(e.which<10)||!sn(t,e)){var r=String.fromCharCode(null==i?n:i);ln(t,e,r)||t.display.input.onKeyPress(e)}}}function hn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,gn(e))},100)}function fn(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(To(e,"focus",e),e.state.focused=!0,Ho(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),ga&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Le(e))}function gn(e){e.state.delayingBlurEvent||(e.state.focused&&(To(e,"blur",e),e.state.focused=!1,Bo(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function mn(e,t){Ht(e.display,t)||vn(e,t)||e.display.input.onContextMenu(t)}function vn(e,t){return Sr(e,"gutterContextMenu")?Yt(e,t,"gutterContextMenu",!1,To):!1}function yn(e,t){if(Da(e,t.from)<0)return e;if(Da(e,t.to)<=0)return Wa(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Wa(t).ch-t.to.ch),Ia(n,i)}function bn(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new pe(yn(r.anchor,t),yn(r.head,t)))}return he(n,e.sel.primIndex)}function wn(e,t,n){return e.line==t.line?Ia(n.line,e.ch-t.ch+n.ch):Ia(n.line+(e.line-t.line),e.ch)}function xn(e,t,n){for(var i=[],r=Ia(e.first,0),a=r,o=0;o<t.length;o++){var s=t[o],l=wn(s.from,r,a),c=wn(Wa(s),r,a);if(r=s.to,a=c,"around"==n){var u=e.sel.ranges[o],d=Da(u.head,u.anchor)<0;i[o]=new pe(d?c:l,d?l:c)}else i[o]=new pe(l,l)}return new de(i,e.sel.primIndex)}function kn(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(i.update=function(t,n,i,r){t&&(this.from=me(e,t)),n&&(this.to=me(e,n)),i&&(this.text=i),void 0!==r&&(this.origin=r)}),To(e,"beforeChange",e,i),e.cm&&To(e.cm,"beforeChange",e.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Cn(e,t,n){if(e.cm){if(!e.cm.curOp)return Et(e.cm,Cn)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(Sr(e,"beforeChange")||e.cm&&Sr(e.cm,"beforeChange"))||(t=kn(e,t,!0))){var i=Ea&&!n&&ai(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)Sn(e,{from:i[r].from,to:i[r].to,text:r?[""]:t.text});else Sn(e,t)}}function Sn(e,t){if(1!=t.text.length||""!=t.text[0]||0!=Da(t.from,t.to)){var n=bn(e,t);or(e,t,n,e.cm?e.cm.curOp.id:0/0),$n(e,t,n,ni(e,t));var i=[];Wi(e,function(e,n){n||-1!=Pr(i,e.history)||(mr(e.history,t),i.push(e.history)),$n(e,t,null,ni(e,t))})}}function _n(e,t,n){if(!e.cm||!e.cm.state.suppressEdits){for(var i,r=e.history,a=e.sel,o="undo"==t?r.done:r.undone,s="undo"==t?r.undone:r.done,l=0;l<o.length&&(i=o[l],n?!i.ranges||i.equals(e.sel):i.ranges);l++);if(l!=o.length){for(r.lastOrigin=r.lastSelOrigin=null;i=o.pop(),i.ranges;){if(cr(i,s),n&&!i.equals(e.sel))return void $e(e,i,{clearRedo:!1});a=i}var c=[];cr(a,s),s.push({changes:c,generation:r.generation}),r.generation=i.generation||++r.maxGeneration;for(var u=Sr(e,"beforeChange")||e.cm&&Sr(e.cm,"beforeChange"),l=i.changes.length-1;l>=0;--l){var d=i.changes[l];if(d.origin=t,u&&!kn(e,d,!1))return void(o.length=0);c.push(ir(e,d));var p=l?bn(e,d):Er(o);$n(e,d,p,ri(e,d)),!l&&e.cm&&e.cm.scrollIntoView({from:d.from,to:Wa(d)});var h=[];Wi(e,function(e,t){t||-1!=Pr(h,e.history)||(mr(e.history,d),h.push(e.history)),$n(e,d,null,ri(e,d))})}}}}function Tn(e,t){if(0!=t&&(e.first+=t,e.sel=new de(Ir(e.sel.ranges,function(e){return new pe(Ia(e.anchor.line+t,e.anchor.ch),Ia(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Nt(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)jt(e.cm,i,"gutter")}}function $n(e,t,n,i){if(e.cm&&!e.cm.curOp)return Et(e.cm,$n)(e,t,n,i);if(t.to.line<e.first)return void Tn(e,t.text.length-1-(t.to.line-t.from.line));

if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);Tn(e,r),t={from:Ia(e.first,0),to:Ia(t.to.line+r,t.to.ch),text:[Er(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:Ia(a,Ki(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Xi(e,t.from,t.to),n||(n=bn(e,t)),e.cm?An(e.cm,t,i):Bi(e,t,i),Ae(e,n,Po)}}function An(e,t,n){var i=e.doc,r=e.display,o=t.from,s=t.to,l=!1,c=o.line;e.options.lineWrapping||(c=Qi(gi(Ki(i,o.line))),i.iter(c,s.line+1,function(e){return e==r.maxLine?(l=!0,!0):void 0})),i.sel.contains(t.from,t.to)>-1&&Cr(e),Bi(i,t,n,a(e)),e.options.lineWrapping||(i.iter(c,o.line+t.text.length,function(e){var t=d(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,o.line),Re(e,400);var u=t.text.length-(s.line-o.line)-1;t.full?Nt(e):o.line!=s.line||1!=t.text.length||qi(e.doc,t)?Nt(e,o.line,s.line+1,u):jt(e,o.line,"text");var p=Sr(e,"changes"),h=Sr(e,"change");if(h||p){var f={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};h&&wr(e,"change",e,f),p&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}function En(e,t,n,i,r){if(i||(i=n),Da(i,n)<0){var a=i;i=n,n=a}"string"==typeof t&&(t=Go(t)),Cn(e,{from:n,to:i,text:t,origin:r})}function Pn(e,t){if(!kr(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),r=null;if(t.top+i.top<0?r=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!xa){var a=Fr("div","​",null,"position: absolute; top: "+(t.top-n.viewOffset-qe(e.display))+"px; height: "+(t.bottom-t.top+Ve(e)+n.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(r),e.display.lineSpace.removeChild(a)}}}function In(e,t,n,i){null==i&&(i=0);for(var r=0;5>r;r++){var a=!1,o=pt(e,t),s=n&&n!=t?pt(e,n):o,l=Mn(e,Math.min(o.left,s.left),Math.min(o.top,s.top)-i,Math.max(o.left,s.left),Math.max(o.bottom,s.bottom)+i),c=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=l.scrollTop&&(en(e,l.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(a=!0)),null!=l.scrollLeft&&(tn(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(a=!0)),!a)break}return o}function Dn(e,t,n,i,r){var a=Mn(e,t,n,i,r);null!=a.scrollTop&&en(e,a.scrollTop),null!=a.scrollLeft&&tn(e,a.scrollLeft)}function Mn(e,t,n,i,r){var a=e.display,o=vt(e.display);0>n&&(n=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:a.scroller.scrollTop,l=Ge(e),c={};r-n>l&&(r=n+l);var u=e.doc.height+Be(a),d=o>n,p=r>u-o;if(s>n)c.scrollTop=d?0:n;else if(r>s+l){var h=Math.min(n,(p?u:r)-l);h!=s&&(c.scrollTop=h)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:a.scroller.scrollLeft,g=We(e)-(e.options.fixedGutter?a.gutters.offsetWidth:0),m=i-t>g;return m&&(i=t+g),10>t?c.scrollLeft=0:f>t?c.scrollLeft=Math.max(0,t-(m?0:10)):i>g+f-3&&(c.scrollLeft=i+(m?0:10)-g),c}function Nn(e,t,n){(null!=t||null!=n)&&On(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+n)}function jn(e){On(e);var t=e.getCursor(),n=t,i=t;e.options.lineWrapping||(n=t.ch?Ia(t.line,t.ch-1):t,i=Ia(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:i,margin:e.options.cursorScrollMargin,isCursor:!0}}function On(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=ht(e,t.from),i=ht(e,t.to),r=Mn(e,Math.min(n.left,i.left),Math.min(n.top,i.top)-t.margin,Math.max(n.right,i.right),Math.max(n.bottom,i.bottom)+t.margin);e.scrollTo(r.scrollLeft,r.scrollTop)}}function Ln(e,t,n,i){var r,a=e.doc;null==n&&(n="add"),"smart"==n&&(a.mode.indent?r=ze(e,t):n="prev");var o=e.options.tabSize,s=Ki(a,t),l=Mo(s.text,null,o);s.stateAfter&&(s.stateAfter=null);var c,u=s.text.match(/^\s*/)[0];if(i||/\S/.test(s.text)){if("smart"==n&&(c=a.mode.indent(r,s.text.slice(u.length),s.text),c==Eo||c>150)){if(!i)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>a.first?Mo(Ki(a,t-1).text,null,o):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",p=0;if(e.options.indentWithTabs)for(var h=Math.floor(c/o);h;--h)p+=o,d+="	";if(c>p&&(d+=Ar(c-p)),d!=u)return En(a,d,Ia(t,0),Ia(t,u.length),"+input"),s.stateAfter=null,!0;for(var h=0;h<a.sel.ranges.length;h++){var f=a.sel.ranges[h];if(f.head.line==t&&f.head.ch<u.length){var p=Ia(t,u.length);Ce(a,h,new pe(p,p));break}}}function Rn(e,t,n,i){var r=t,a=t;return"number"==typeof t?a=Ki(e,ge(e,t)):r=Qi(t),null==r?null:(i(a,r)&&e.cm&&jt(e.cm,r,n),a)}function Fn(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var a=t(n[r]);i.length&&Da(a.from,Er(i).to)<=0;){var o=i.pop();if(Da(o.from,a.from)<0){a.from=o.from;break}}i.push(a)}At(e,function(){for(var t=i.length-1;t>=0;t--)En(e.doc,"",i[t].from,i[t].to,"+delete");jn(e)})}function Un(e,t,n,i,r){function a(){var t=s+n;return t<e.first||t>=e.first+e.size?d=!1:(s=t,u=Ki(e,t))}function o(e){var t=(r?la:ca)(u,l,n,!0);if(null==t){if(e||!a())return d=!1;l=r?(0>n?ta:ea)(u):0>n?u.text.length:0}else l=t;return!0}var s=t.line,l=t.ch,c=n,u=Ki(e,s),d=!0;if("char"==i)o();else if("column"==i)o(!0);else if("word"==i||"group"==i)for(var p=null,h="group"==i,f=e.cm&&e.cm.getHelper(t,"wordChars"),g=!0;!(0>n)||o(!g);g=!1){var m=u.text.charAt(l)||"\n",v=Or(m,f)?"w":h&&"\n"==m?"n":!h||/\s/.test(m)?null:"p";if(!h||g||v||(v="s"),p&&p!=v){0>n&&(n=1,o());break}if(v&&(p=v),n>0&&!o(!g))break}var y=De(e,Ia(s,l),c,!0);return d||(y.hitSide=!0),y}function zn(e,t,n,i){var r,a=e.doc,o=t.left;if("page"==i){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=t.top+n*(s-(0>n?1.5:.5)*vt(e.display))}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(;;){var l=gt(e,o,r);if(!l.outside)break;if(0>n?0>=r:r>=a.height){l.hitSide=!0;break}r+=5*n}return l}function qn(t,n,i,r){e.defaults[t]=n,i&&(Ka[t]=r?function(e,t,n){n!=Xa&&i(e,t,n)}:i)}function Bn(e){for(var t,n,i,r,a=e.split(/-(?!$)/),e=a[a.length-1],o=0;o<a.length-1;o++){var s=a[o];if(/^(cmd|meta|m)$/i.test(s))r=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)$/i.test(s))throw new Error("Unrecognized modifier name: "+s);i=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),r&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Hn(e){return"string"==typeof e?ro[e]:e}function Vn(e,t,n,i,r){if(i&&i.shared)return Wn(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return Et(e.cm,Vn)(e,t,n,i,r);var a=new uo(e,r),o=Da(t,n);if(i&&Nr(i,a,!1),o>0||0==o&&a.clearWhenEmpty!==!1)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=Fr("span",[a.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(fi(e,t.line,t,n,a)||t.line!=n.line&&fi(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");Pa=!0}a.addToHistory&&or(e,{from:t,to:n,origin:"markText"},e.sel,0/0);var s,l=t.line,c=e.cm;if(e.iter(l,n.line+1,function(e){c&&a.collapsed&&!c.options.lineWrapping&&gi(e)==c.display.maxLine&&(s=!0),a.collapsed&&l!=t.line&&Ji(e,0),Zn(e,new Yn(a,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),a.collapsed&&e.iter(t.line,n.line+1,function(t){bi(e,t)&&Ji(t,0)}),a.clearOnEnter&&So(a,"beforeCursorEnter",function(){a.clear()}),a.readOnly&&(Ea=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++co,a.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),a.collapsed)Nt(c,t.line,n.line+1);else if(a.className||a.title||a.startStyle||a.endStyle||a.css)for(var u=t.line;u<=n.line;u++)jt(c,u,"text");a.atomic&&Pe(c.doc),wr(c,"markerAdded",c,a)}return a}function Wn(e,t,n,i,r){i=Nr(i),i.shared=!1;var a=[Vn(e,t,n,i,r)],o=a[0],s=i.widgetNode;return Wi(e,function(e){s&&(i.widgetNode=s.cloneNode(!0)),a.push(Vn(e,me(e,t),me(e,n),i,r));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;o=Er(a)}),new po(a,o)}function Gn(e){return e.findMarks(Ia(e.first,0),e.clipPos(Ia(e.lastLine())),function(e){return e.parent})}function Kn(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find(),a=e.clipPos(r.from),o=e.clipPos(r.to);if(Da(a,o)){var s=Vn(e,a,o,i.primary,i.primary.type);i.markers.push(s),s.parent=i}}}function Xn(e){for(var t=0;t<e.length;t++){var n=e[t],i=[n.primary.doc];Wi(n.primary.doc,function(e){i.push(e)});for(var r=0;r<n.markers.length;r++){var a=n.markers[r];-1==Pr(i,a.doc)&&(a.parent=null,n.markers.splice(r--,1))}}}function Yn(e,t,n){this.marker=e,this.from=t,this.to=n}function Jn(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Qn(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Zn(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function ei(e,t,n){if(e)for(var i,r=0;r<e.length;++r){var a=e[r],o=a.marker,s=null==a.from||(o.inclusiveLeft?a.from<=t:a.from<t);if(s||a.from==t&&"bookmark"==o.type&&(!n||!a.marker.insertLeft)){var l=null==a.to||(o.inclusiveRight?a.to>=t:a.to>t);(i||(i=[])).push(new Yn(o,a.from,l?null:a.to))}}return i}function ti(e,t,n){if(e)for(var i,r=0;r<e.length;++r){var a=e[r],o=a.marker,s=null==a.to||(o.inclusiveRight?a.to>=t:a.to>t);if(s||a.from==t&&"bookmark"==o.type&&(!n||a.marker.insertLeft)){var l=null==a.from||(o.inclusiveLeft?a.from<=t:a.from<t);(i||(i=[])).push(new Yn(o,l?null:a.from-t,null==a.to?null:a.to-t))}}return i}function ni(e,t){if(t.full)return null;var n=ye(e,t.from.line)&&Ki(e,t.from.line).markedSpans,i=ye(e,t.to.line)&&Ki(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,a=t.to.ch,o=0==Da(t.from,t.to),s=ei(n,r,o),l=ti(i,a,o),c=1==t.text.length,u=Er(t.text).length+(c?r:0);if(s)for(var d=0;d<s.length;++d){var p=s[d];if(null==p.to){var h=Jn(l,p.marker);h?c&&(p.to=null==h.to?null:h.to+u):p.to=r}}if(l)for(var d=0;d<l.length;++d){var p=l[d];if(null!=p.to&&(p.to+=u),null==p.from){var h=Jn(s,p.marker);h||(p.from=u,c&&(s||(s=[])).push(p))}else p.from+=u,c&&(s||(s=[])).push(p)}s&&(s=ii(s)),l&&l!=s&&(l=ii(l));var f=[s];if(!c){var g,m=t.text.length-2;if(m>0&&s)for(var d=0;d<s.length;++d)null==s[d].to&&(g||(g=[])).push(new Yn(s[d].marker,null,null));for(var d=0;m>d;++d)f.push(g);f.push(l)}return f}function ii(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function ri(e,t){var n=pr(e,t),i=ni(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var a=n[r],o=i[r];if(a&&o)e:for(var s=0;s<o.length;++s){for(var l=o[s],c=0;c<a.length;++c)if(a[c].marker==l.marker)continue e;a.push(l)}else o&&(n[r]=o)}return n}function ai(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=Pr(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var r=[{from:t,to:n}],a=0;a<i.length;++a)for(var o=i[a],s=o.find(0),l=0;l<r.length;++l){var c=r[l];if(!(Da(c.to,s.from)<0||Da(c.from,s.to)>0)){var u=[l,1],d=Da(c.from,s.from),p=Da(c.to,s.to);(0>d||!o.inclusiveLeft&&!d)&&u.push({from:c.from,to:s.from}),(p>0||!o.inclusiveRight&&!p)&&u.push({from:s.to,to:c.to}),r.splice.apply(r,u),l+=u.length-1}}return r}function oi(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function si(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function li(e){return e.inclusiveLeft?-1:0}function ci(e){return e.inclusiveRight?1:0}function ui(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find(),a=Da(i.from,r.from)||li(e)-li(t);if(a)return-a;var o=Da(i.to,r.to)||ci(e)-ci(t);return o?o:t.id-e.id}function di(e,t){var n,i=Pa&&e.markedSpans;if(i)for(var r,a=0;a<i.length;++a)r=i[a],r.marker.collapsed&&null==(t?r.from:r.to)&&(!n||ui(n,r.marker)<0)&&(n=r.marker);return n}function pi(e){return di(e,!0)}function hi(e){return di(e,!1)}function fi(e,t,n,i,r){var a=Ki(e,t),o=Pa&&a.markedSpans;if(o)for(var s=0;s<o.length;++s){var l=o[s];if(l.marker.collapsed){var c=l.marker.find(0),u=Da(c.from,n)||li(l.marker)-li(r),d=Da(c.to,i)||ci(l.marker)-ci(r);if(!(u>=0&&0>=d||0>=u&&d>=0)&&(0>=u&&(Da(c.to,n)>0||l.marker.inclusiveRight&&r.inclusiveLeft)||u>=0&&(Da(c.from,i)<0||l.marker.inclusiveLeft&&r.inclusiveRight)))return!0}}}function gi(e){for(var t;t=pi(e);)e=t.find(-1,!0).line;return e}function mi(e){for(var t,n;t=hi(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function vi(e,t){var n=Ki(e,t),i=gi(n);return n==i?t:Qi(i)}function yi(e,t){if(t>e.lastLine())return t;var n,i=Ki(e,t);if(!bi(e,i))return t;for(;n=hi(i);)i=n.find(1,!0).line;return Qi(i)+1}function bi(e,t){var n=Pa&&t.markedSpans;if(n)for(var i,r=0;r<n.length;++r)if(i=n[r],i.marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&wi(e,t,i))return!0}}function wi(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return wi(e,i.line,Jn(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var r,a=0;a<t.markedSpans.length;++a)if(r=t.markedSpans[a],r.marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&wi(e,t,r))return!0}function xi(e,t,n){er(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Nn(e,null,n)}function ki(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Uo(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),zr(t.display.measure,Fr("div",[e.node],null,n))}return e.height=e.node.offsetHeight}function Ci(e,t,n,i){var r=new ho(e,n,i),a=e.cm;return a&&r.noHScroll&&(a.display.alignWidgets=!0),Rn(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length-1,Math.max(0,r.insertAt)),0,r),r.line=t,a&&!bi(e,t)){var i=er(t)<e.scrollTop;Ji(t,t.height+ki(r)),i&&Nn(a,null,r.height),a.curOp.forceUpdate=!0}return!0}),r}function Si(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),oi(e),si(e,n);var r=i?i(e):1;r!=e.height&&Ji(e,r)}function _i(e){e.parent=null,oi(e)}function Ti(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+n[2])}return e}function $i(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var i=e.innerMode(t,n);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function Ai(t,n,i,r){for(var a=0;10>a;a++){r&&(r[0]=e.innerMode(t,i).mode);var o=t.token(n,i);if(n.pos>n.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}function Ei(e,t,n,i){function r(e){return{start:d.start,end:d.pos,string:d.current(),type:a||null,state:e?to(o.mode,u):u}}var a,o=e.doc,s=o.mode;t=me(o,t);var l,c=Ki(o,t.line),u=ze(e,t.line,n),d=new lo(c.text,e.options.tabSize);for(i&&(l=[]);(i||d.pos<t.ch)&&!d.eol();)d.start=d.pos,a=Ai(s,d,u),i&&l.push(r(!0));return i?l:r()}function Pi(e,t,n,i,r,a,o){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,c=0,u=null,d=new lo(t,e.options.tabSize),p=e.options.addModeClass&&[null];for(""==t&&Ti($i(n,i),a);!d.eol();){if(d.pos>e.options.maxHighlightLength?(s=!1,o&&Mi(e,t,i,d.pos),d.pos=t.length,l=null):l=Ti(Ai(n,d,i,p),a),p){var h=p[0].name;h&&(l="m-"+(l?h+" "+l:h))}if(!s||u!=l){for(;c<d.start;)c=Math.min(d.start,c+5e4),r(c,u);u=l}d.start=d.pos}for(;c<d.pos;){var f=Math.min(d.pos,c+5e4);r(f,u),c=f}}function Ii(e,t,n,i){var r=[e.state.modeGen],a={};Pi(e,t.text,e.doc.mode,n,function(e,t){r.push(e,t)},a,i);for(var o=0;o<e.state.overlays.length;++o){var s=e.state.overlays[o],l=1,c=0;Pi(e,t.text,s.mode,!0,function(e,t){for(var n=l;e>c;){var i=r[l];i>e&&r.splice(l,1,e,r[l+1],i),l+=2,c=Math.min(e,i)}if(t)if(s.opaque)r.splice(n,l-n,e,"cm-overlay "+t),l=n+2;else for(;l>n;n+=2){var a=r[n+1];r[n+1]=(a?a+" ":"")+"cm-overlay "+t}},a)}return{styles:r,classes:a.bgClass||a.textClass?a:null}}function Di(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=Ii(e,t,t.stateAfter=ze(e,Qi(t)));t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.frontier&&e.doc.frontier++}return t.styles}function Mi(e,t,n,i){var r=e.doc.mode,a=new lo(t,e.options.tabSize);for(a.start=a.pos=i||0,""==t&&$i(r,n);!a.eol()&&a.pos<=e.options.maxHighlightLength;)Ai(r,a,n),a.start=a.pos}function Ni(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?mo:go;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function ji(e,t){var n=Fr("span",null,null,ga?"padding-right: .1px":null),i={pre:Fr("pre",[n]),content:n,col:0,pos:0,cm:e,splitSpaces:(ha||ga)&&e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var a,o=r?t.rest[r-1]:t.line;i.pos=0,i.addToken=Li,Xr(e.display.measure)&&(a=tr(o))&&(i.addToken=Fi(i.addToken,a)),i.map=[];var s=t!=e.display.externalMeasured&&Qi(o);zi(o,i,Di(e,o,s)),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=Hr(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=Hr(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Kr(e.display.measure))),0==r?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return ga&&/\bcm-tab\b/.test(i.content.lastChild.className)&&(i.content.className="cm-tab-wrap-hack"),To(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=Hr(i.pre.className,i.textClass||"")),i}function Oi(e){var t=Fr("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Li(e,t,n,i,r,a,o){if(t){var s=e.splitSpaces?t.replace(/ {3,}/g,Ri):t,l=e.cm.state.specialChars,c=!1;if(l.test(t))for(var u=document.createDocumentFragment(),d=0;;){l.lastIndex=d;var p=l.exec(t),h=p?p.index-d:t.length-d;if(h){var f=document.createTextNode(s.slice(d,d+h));u.appendChild(ha&&9>fa?Fr("span",[f]):f),e.map.push(e.pos,e.pos+h,f),e.col+=h,e.pos+=h}if(!p)break;if(d+=h+1,"	"==p[0]){var g=e.cm.options.tabSize,m=g-e.col%g,f=u.appendChild(Fr("span",Ar(m),"cm-tab"));f.setAttribute("role","presentation"),f.setAttribute("cm-text","	"),e.col+=m}else{var f=e.cm.options.specialCharPlaceholder(p[0]);f.setAttribute("cm-text",p[0]),u.appendChild(ha&&9>fa?Fr("span",[f]):f),e.col+=1}e.map.push(e.pos,e.pos+1,f),e.pos++}else{e.col+=t.length;var u=document.createTextNode(s);e.map.push(e.pos,e.pos+t.length,u),ha&&9>fa&&(c=!0),e.pos+=t.length}if(n||i||r||c||o){var v=n||"";i&&(v+=i),r&&(v+=r);var y=Fr("span",[u],v,o);return a&&(y.title=a),e.content.appendChild(y)}e.content.appendChild(u)}}function Ri(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+=" "}function Fi(e,t){return function(n,i,r,a,o,s,l){r=r?r+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+i.length;;){for(var d=0;d<t.length;d++){var p=t[d];if(p.to>c&&p.from<=c)break}if(p.to>=u)return e(n,i,r,a,o,s,l);e(n,i.slice(0,p.to-c),r,a,null,s,l),a=null,i=i.slice(p.to-c),c=p.to}}}function Ui(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t}function zi(e,t,n){var i=e.markedSpans,r=e.text,a=0;if(i)for(var o,s,l,c,u,d,p,h=r.length,f=0,g=1,m="",v=0;;){if(v==f){l=c=u=d=s="",p=null,v=1/0;for(var y=[],b=0;b<i.length;++b){var w=i[b],x=w.marker;"bookmark"==x.type&&w.from==f&&x.widgetNode?y.push(x):w.from<=f&&(null==w.to||w.to>f||x.collapsed&&w.to==f&&w.from==f)?(null!=w.to&&w.to!=f&&v>w.to&&(v=w.to,c=""),x.className&&(l+=" "+x.className),x.css&&(s=x.css),x.startStyle&&w.from==f&&(u+=" "+x.startStyle),x.endStyle&&w.to==v&&(c+=" "+x.endStyle),x.title&&!d&&(d=x.title),x.collapsed&&(!p||ui(p.marker,x)<0)&&(p=w)):w.from>f&&v>w.from&&(v=w.from)}if(p&&(p.from||0)==f){if(Ui(t,(null==p.to?h+1:p.to)-f,p.marker,null==p.from),null==p.to)return;p.to==f&&(p=!1)}if(!p&&y.length)for(var b=0;b<y.length;++b)Ui(t,0,y[b])}if(f>=h)break;for(var k=Math.min(h,v);;){if(m){var C=f+m.length;if(!p){var S=C>k?m.slice(0,k-f):m;t.addToken(t,S,o?o+l:l,u,f+S.length==v?c:"",d,s)}if(C>=k){m=m.slice(k-f),f=k;break}f=C,u=""}m=r.slice(a,a=n[g++]),o=Ni(n[g++],t.cm.options)}}else for(var g=1;g<n.length;g+=2)t.addToken(t,r.slice(a,a=n[g]),Ni(n[g+1],t.cm.options))}function qi(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Er(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Bi(e,t,n,i){function r(e){return n?n[e]:null}function a(e,n,r){Si(e,n,r,i),wr(e,"change",e,t)}function o(e,t){for(var n=e,a=[];t>n;++n)a.push(new fo(c[n],r(n),i));return a}var s=t.from,l=t.to,c=t.text,u=Ki(e,s.line),d=Ki(e,l.line),p=Er(c),h=r(c.length-1),f=l.line-s.line;if(t.full)e.insert(0,o(0,c.length)),e.remove(c.length,e.size-c.length);else if(qi(e,t)){var g=o(0,c.length-1);a(d,d.text,h),f&&e.remove(s.line,f),g.length&&e.insert(s.line,g)}else if(u==d)if(1==c.length)a(u,u.text.slice(0,s.ch)+p+u.text.slice(l.ch),h);else{var g=o(1,c.length-1);g.push(new fo(p+u.text.slice(l.ch),h,i)),a(u,u.text.slice(0,s.ch)+c[0],r(0)),e.insert(s.line+1,g)}else if(1==c.length)a(u,u.text.slice(0,s.ch)+c[0]+d.text.slice(l.ch),r(0)),e.remove(s.line+1,f);else{a(u,u.text.slice(0,s.ch)+c[0],r(0)),a(d,p+d.text.slice(l.ch),h);var g=o(1,c.length-1);f>1&&e.remove(s.line+1,f-1),e.insert(s.line+1,g)}wr(e,"change",e,t)}function Hi(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function Vi(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}function Wi(e,t,n){function i(e,r,a){if(e.linked)for(var o=0;o<e.linked.length;++o){var s=e.linked[o];if(s.doc!=r){var l=a&&s.sharedHist;(!n||l)&&(t(s.doc,l),i(s.doc,e,l))}}}i(e,null,!0)}function Gi(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,o(e),n(e),e.options.lineWrapping||p(e),e.options.mode=t.modeOption,Nt(e)}function Ki(e,t){if(t-=e.first,0>t||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var r=n.children[i],a=r.chunkSize();if(a>t){n=r;break}t-=a}return n.lines[t]}function Xi(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,function(e){var a=e.text;r==n.line&&(a=a.slice(0,n.ch)),r==t.line&&(a=a.slice(t.ch)),i.push(a),++r}),i}function Yi(e,t,n){var i=[];return e.iter(t,n,function(e){i.push(e.text)}),i}function Ji(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function Qi(e){if(null==e.parent)return null;for(var t=e.parent,n=Pr(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function Zi(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],a=r.height;if(a>t){e=r;continue e}t-=a,n+=r.chunkSize()}return n}while(!e.lines);for(var i=0;i<e.lines.length;++i){var o=e.lines[i],s=o.height;if(s>t)break;t-=s}return n+i}function er(e){e=gi(e);for(var t=0,n=e.parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var a=n.parent;a;n=a,a=n.parent)for(var i=0;i<a.children.length;++i){var o=a.children[i];if(o==n)break;t+=o.height}return t}function tr(e){var t=e.order;return null==t&&(t=e.order=Zo(e.text)),t}function nr(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function ir(e,t){var n={from:G(t.from),to:Wa(t),text:Xi(e,t.from,t.to)};return ur(e,n,t.from.line,t.to.line+1),Wi(e,function(e){ur(e,n,t.from.line,t.to.line+1)},!0),n}function rr(e){for(;e.length;){var t=Er(e);if(!t.ranges)break;e.pop()}}function ar(e,t){return t?(rr(e.done),Er(e.done)):e.done.length&&!Er(e.done).ranges?Er(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Er(e.done)):void 0}function or(e,t,n,i){var r=e.history;r.undone.length=0;var a,o=+new Date;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&r.lastModTime>o-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(a=ar(r,r.lastOp==i))){var s=Er(a.changes);0==Da(t.from,t.to)&&0==Da(t.from,s.to)?s.to=Wa(t):a.changes.push(ir(e,t))}else{var l=Er(r.done);for(l&&l.ranges||cr(e.sel,r.done),a={changes:[ir(e,t)],generation:r.generation},r.done.push(a);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=o,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,s||To(e,"historyAdded")}function sr(e,t,n,i){var r=t.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function lr(e,t,n,i){var r=e.history,a=i&&i.origin;n==r.lastSelOp||a&&r.lastSelOrigin==a&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==a||sr(e,a,Er(r.done),t))?r.done[r.done.length-1]=t:cr(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=a,r.lastSelOp=n,i&&i.clearRedo!==!1&&rr(r.undone)}function cr(e,t){var n=Er(t);n&&n.ranges&&n.equals(e)||t.push(e)}function ur(e,t,n,i){var r=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[a]=n.markedSpans),++a})}function dr(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function pr(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=0,r=[];i<t.text.length;++i)r.push(dr(n[i]));return r}function hr(e,t,n){for(var i=0,r=[];i<e.length;++i){var a=e[i];if(a.ranges)r.push(n?de.prototype.deepCopy.call(a):a);else{var o=a.changes,s=[];r.push({changes:s});for(var l=0;l<o.length;++l){var c,u=o[l];if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&Pr(t,Number(c[1]))>-1&&(Er(s)[d]=u[d],delete u[d])}}}return r}function fr(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function gr(e,t,n,i){for(var r=0;r<e.length;++r){var a=e[r],o=!0;if(a.ranges){a.copied||(a=e[r]=a.deepCopy(),a.copied=!0);for(var s=0;s<a.ranges.length;s++)fr(a.ranges[s].anchor,t,n,i),fr(a.ranges[s].head,t,n,i)}else{for(var s=0;s<a.changes.length;++s){var l=a.changes[s];if(n<l.from.line)l.from=Ia(l.from.line+i,l.from.ch),l.to=Ia(l.to.line+i,l.to.ch);else if(t<=l.to.line){o=!1;break}}o||(e.splice(0,r+1),r=0)}}}function mr(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;gr(e.done,n,i,r),gr(e.undone,n,i,r)}function vr(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function yr(e){return e.target||e.srcElement}function br(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Sa&&e.ctrlKey&&1==t&&(t=3),t}function wr(e,t){function n(e){return function(){e.apply(null,a)}}var i=e._handlers&&e._handlers[t];if(i){var r,a=Array.prototype.slice.call(arguments,2);Ra?r=Ra.delayedCallbacks:$o?r=$o:(r=$o=[],setTimeout(xr,0));for(var o=0;o<i.length;++o)r.push(n(i[o]))}}function xr(){var e=$o;$o=null;for(var t=0;t<e.length;++t)e[t]()}function kr(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),To(e,n||t.type,e,t),vr(t)||t.codemirrorIgnore}function Cr(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==Pr(n,t[i])&&n.push(t[i])}function Sr(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function _r(e){e.prototype.on=function(e,t){So(this,e,t)},e.prototype.off=function(e,t){_o(this,e,t)}}function Tr(){this.id=null}function $r(e,t,n){for(var i=0,r=0;;){var a=e.indexOf("	",i);-1==a&&(a=e.length);var o=a-i;if(a==e.length||r+o>=t)return i+Math.min(o,t-r);if(r+=a-i,r+=n-r%n,i=a+1,r>=t)return i}}function Ar(e){for(;No.length<=e;)No.push(Er(No)+" ");return No[e]}function Er(e){return e[e.length-1]}function Pr(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function Ir(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function Dr(){}function Mr(e,t){var n;return Object.create?n=Object.create(e):(Dr.prototype=e,n=new Dr),t&&Nr(t,n),n}function Nr(e,t,n){t||(t={});for(var i in e)!e.hasOwnProperty(i)||n===!1&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function jr(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Or(e,t){return t?t.source.indexOf("\\w")>-1&&Ro(e)?!0:t.test(e):Ro(e)}function Lr(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Rr(e){return e.charCodeAt(0)>=768&&Fo.test(e)}function Fr(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)r.appendChild(t[a]);return r}function Ur(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function zr(e,t){return Ur(e).appendChild(t)}function qr(){return document.activeElement}function Br(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function Hr(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!Br(n[i]).test(t)&&(t+=" "+n[i]);return t}function Vr(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var i=t[n].CodeMirror;i&&e(i)}}function Wr(){Vo||(Gr(),Vo=!0)}function Gr(){var e;So(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Vr(Bt)},100))}),So(window,"blur",function(){Vr(gn)})}function Kr(e){if(null==zo){var t=Fr("span","​");zr(e,Fr("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(zo=t.offsetWidth<=1&&t.offsetHeight>2&&!(ha&&8>fa))}var n=zo?Fr("span","​"):Fr("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Xr(e){if(null!=qo)return qo;var t=zr(e,document.createTextNode("AخA")),n=Oo(t,0,1).getBoundingClientRect();if(!n||n.left==n.right)return!1;var i=Oo(t,1,2).getBoundingClientRect();return qo=i.right-n.right<3}function Yr(e){if(null!=Yo)return Yo;var t=zr(e,Fr("span","x")),n=t.getBoundingClientRect(),i=Oo(t,0,1).getBoundingClientRect();return Yo=Math.abs(n.left-i.left)>1}function Jr(e,t,n,i){if(!e)return i(t,n,"ltr");for(var r=!1,a=0;a<e.length;++a){var o=e[a];(o.from<n&&o.to>t||t==n&&o.to==t)&&(i(Math.max(o.from,t),Math.min(o.to,n),1==o.level?"rtl":"ltr"),r=!0)}r||i(t,n,"ltr")}function Qr(e){return e.level%2?e.to:e.from}function Zr(e){return e.level%2?e.from:e.to}function ea(e){var t=tr(e);return t?Qr(t[0]):0}function ta(e){var t=tr(e);return t?Zr(Er(t)):e.text.length}function na(e,t){var n=Ki(e.doc,t),i=gi(n);i!=n&&(t=Qi(i));var r=tr(i),a=r?r[0].level%2?ta(i):ea(i):0;return Ia(t,a)}function ia(e,t){for(var n,i=Ki(e.doc,t);n=hi(i);)i=n.find(1,!0).line,t=null;var r=tr(i),a=r?r[0].level%2?ea(i):ta(i):i.text.length;return Ia(null==t?Qi(i):t,a)}function ra(e,t){var n=na(e,t.line),i=Ki(e.doc,n.line),r=tr(i);if(!r||0==r[0].level){var a=Math.max(0,i.text.search(/\S/)),o=t.line==n.line&&t.ch<=a&&t.ch;return Ia(n.line,o?0:a)}return n}function aa(e,t,n){var i=e[0].level;return t==i?!0:n==i?!1:n>t}function oa(e,t){Qo=null;for(var n,i=0;i<e.length;++i){var r=e[i];if(r.from<t&&r.to>t)return i;if(r.from==t||r.to==t){if(null!=n)return aa(e,r.level,e[n].level)?(r.from!=r.to&&(Qo=n),i):(r.from!=r.to&&(Qo=i),n);n=i}}return n}function sa(e,t,n,i){if(!i)return t+n;do t+=n;while(t>0&&Rr(e.text.charAt(t)));

return t}function la(e,t,n,i){var r=tr(e);if(!r)return ca(e,t,n,i);for(var a=oa(r,t),o=r[a],s=sa(e,t,o.level%2?-n:n,i);;){if(s>o.from&&s<o.to)return s;if(s==o.from||s==o.to)return oa(r,s)==a?s:(o=r[a+=n],n>0==o.level%2?o.to:o.from);if(o=r[a+=n],!o)return null;s=n>0==o.level%2?sa(e,o.to,-1,i):sa(e,o.from,1,i)}}function ca(e,t,n,i){var r=t+n;if(i)for(;r>0&&Rr(e.text.charAt(r));)r+=n;return 0>r||r>e.text.length?null:r}var ua=/gecko\/\d/i.test(navigator.userAgent),da=/MSIE \d/.test(navigator.userAgent),pa=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ha=da||pa,fa=ha&&(da?document.documentMode||6:pa[1]),ga=/WebKit\//.test(navigator.userAgent),ma=ga&&/Qt\/\d+\.\d+/.test(navigator.userAgent),va=/Chrome\//.test(navigator.userAgent),ya=/Opera\//.test(navigator.userAgent),ba=/Apple Computer/.test(navigator.vendor),wa=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),xa=/PhantomJS/.test(navigator.userAgent),ka=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Ca=ka||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Sa=ka||/Mac/.test(navigator.platform),_a=/win/i.test(navigator.platform),Ta=ya&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Ta&&(Ta=Number(Ta[1])),Ta&&Ta>=15&&(ya=!1,ga=!0);var $a=Sa&&(ma||ya&&(null==Ta||12.11>Ta)),Aa=ua||ha&&fa>=9,Ea=!1,Pa=!1;g.prototype=Nr({update:function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var a=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+a+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedOverlay&&e.clientHeight>0&&(0==i&&this.overlayHack(),this.checkedOverlay=!0),{right:n?i:0,bottom:t?i:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e)},overlayHack:function(){var e=Sa&&!wa?"12px":"18px";this.horiz.style.minHeight=this.vert.style.minWidth=e;var t=this,n=function(e){yr(e)!=t.vert&&yr(e)!=t.horiz&&Et(t.cm,Wt)(e)};So(this.vert,"mousedown",n),So(this.horiz,"mousedown",n)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},g.prototype),m.prototype=Nr({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},m.prototype),e.scrollbarModel={"native":g,"null":m},_.prototype.signal=function(e,t){Sr(e,t)&&this.events.push(arguments)},_.prototype.finish=function(){for(var e=0;e<this.events.length;e++)To.apply(null,this.events[e])};var Ia=e.Pos=function(e,t){return this instanceof Ia?(this.line=e,void(this.ch=t)):new Ia(e,t)},Da=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch},Ma=null;ie.prototype=Nr({init:function(e){function t(e){if(i.somethingSelected())Ma=i.getSelections(),n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,a.value=Ma.join("\n"),jo(a));else{if(!i.options.lineWiseCopyCut)return;var t=te(i);Ma=t.text,"cut"==e.type?i.setSelections(t.ranges,null,Po):(n.prevInput="",a.value=t.text.join("\n"),jo(a))}"cut"==e.type&&(i.state.cutIncoming=!0)}var n=this,i=this.cm,r=this.wrapper=re(),a=this.textarea=r.firstChild;e.wrapper.insertBefore(r,e.wrapper.firstChild),ka&&(a.style.width="0px"),So(a,"input",function(){ha&&fa>=9&&n.hasSelection&&(n.hasSelection=null),n.poll()}),So(a,"paste",function(e){return Z(e,i)?!0:(i.state.pasteIncoming=!0,void n.fastPoll())}),So(a,"cut",t),So(a,"copy",t),So(e.scroller,"paste",function(t){Ht(e,t)||(i.state.pasteIncoming=!0,n.focus())}),So(e.lineSpace,"selectstart",function(t){Ht(e,t)||xo(t)}),So(a,"compositionstart",function(){var e=i.getCursor("from");n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}}),So(a,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},prepareSelection:function(){var e=this.cm,t=e.display,n=e.doc,i=Ne(e);if(e.options.moveInputWithCursor){var r=pt(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+o.top-a.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+o.left-a.left))}return i},showSelection:function(e){var t=this.cm,n=t.display;zr(n.cursorDiv,e.cursors),zr(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,n,i=this.cm,r=i.doc;if(i.somethingSelected()){this.prevInput="";var a=r.sel.primary();t=Xo&&(a.to().line-a.from().line>100||(n=i.getSelection()).length>1e3);var o=t?"-":n||i.getSelection();this.textarea.value=o,i.state.focused&&jo(this.textarea),ha&&fa>=9&&(this.hasSelection=o)}else e||(this.prevInput=this.textarea.value="",ha&&fa>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!Ca||qr()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){function e(){var i=n.poll();i||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))}var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,e)},poll:function(){var e=this.cm,t=this.textarea,n=this.prevInput;if(this.contextMenuPending||!e.state.focused||Ko(t)&&!n||J(e)||e.options.disableInput||e.state.keySeq)return!1;var i=t.value;if(i==n&&!e.somethingSelected())return!1;if(ha&&fa>=9&&this.hasSelection===i||Sa&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var r=i.charCodeAt(0);if(8203!=r||n||(n="​"),8666==r)return this.reset(),this.cm.execCommand("undo")}for(var a=0,o=Math.min(n.length,i.length);o>a&&n.charCodeAt(a)==i.charCodeAt(a);)++a;var s=this;return At(e,function(){Q(e,i.slice(a),n.length-a,null,s.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?t.value=s.prevInput="":s.prevInput=i,s.composing&&(s.composing.range.clear(),s.composing.range=e.markText(s.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){ha&&fa>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){function t(){if(null!=o.selectionStart){var e=r.somethingSelected(),t="​"+(e?o.value:"");o.value="⇚",o.value=t,i.prevInput=e?"":"​",o.selectionStart=1,o.selectionEnd=t.length,a.selForContextMenu=r.doc.sel}}function n(){if(i.contextMenuPending=!1,i.wrapper.style.position="relative",o.style.cssText=u,ha&&9>fa&&a.scrollbars.setScrollTop(a.scroller.scrollTop=l),null!=o.selectionStart){(!ha||ha&&9>fa)&&t();var e=0,n=function(){a.selForContextMenu==r.doc.sel&&0==o.selectionStart&&o.selectionEnd>0&&"​"==i.prevInput?Et(r,io.selectAll)(r):e++<10?a.detectingSelectAll=setTimeout(n,500):a.input.reset()};a.detectingSelectAll=setTimeout(n,200)}}var i=this,r=i.cm,a=r.display,o=i.textarea,s=Vt(r,e),l=a.scroller.scrollTop;if(s&&!ya){var c=r.options.resetSelectionOnContextMenu;c&&-1==r.doc.sel.contains(s)&&Et(r,$e)(r.doc,fe(s),Po);var u=o.style.cssText;if(i.wrapper.style.position="absolute",o.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(ha?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",ga)var d=window.scrollY;if(a.input.focus(),ga&&window.scrollTo(null,d),a.input.reset(),r.somethingSelected()||(o.value=i.prevInput=" "),i.contextMenuPending=!0,a.selForContextMenu=r.doc.sel,clearTimeout(a.detectingSelectAll),ha&&fa>=9&&t(),Aa){Co(e);var p=function(){_o(window,"mouseup",p),setTimeout(n,20)};So(window,"mouseup",p)}else setTimeout(n,50)}},setUneditable:Dr,needsContentAttribute:!1},ie.prototype),ae.prototype=Nr({init:function(e){function t(e){if(i.somethingSelected())Ma=i.getSelections(),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=te(i);Ma=t.text,"cut"==e.type&&i.operation(function(){i.setSelections(t.ranges,0,Po),i.replaceSelection("",null,"cut")})}if(e.clipboardData&&!ka)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",Ma.join("\n"));else{var n=re(),r=n.firstChild;i.display.lineSpace.insertBefore(n,i.display.lineSpace.firstChild),r.value=Ma.join("\n");var a=document.activeElement;jo(r),setTimeout(function(){i.display.lineSpace.removeChild(n),a.focus()},50)}}var n=this,i=n.cm,r=n.div=e.lineDiv;r.contentEditable="true",ne(r),So(r,"paste",function(e){Z(e,i)}),So(r,"compositionstart",function(e){var t=e.data;if(n.composing={sel:i.doc.sel,data:t,startData:t},t){var r=i.doc.sel.primary(),a=i.getLine(r.head.line),o=a.indexOf(t,Math.max(0,r.head.ch-t.length));o>-1&&o<=r.head.ch&&(n.composing.sel=fe(Ia(r.head.line,o),Ia(r.head.line,o+t.length)))}}),So(r,"compositionupdate",function(e){n.composing.data=e.data}),So(r,"compositionend",function(e){var t=n.composing;t&&(e.data==t.startData||/\u200b/.test(e.data)||(t.data=e.data),setTimeout(function(){t.handled||n.applyComposition(t),n.composing==t&&(n.composing=null)},50))}),So(r,"touchstart",function(){n.forceCompositionEnd()}),So(r,"input",function(){n.composing||n.pollContent()||At(n.cm,function(){Nt(i)})}),So(r,"copy",t),So(r,"cut",t)},prepareSelection:function(){var e=Ne(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e){e&&this.cm.display.view.length&&(e.focus&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),n=le(this.cm,e.anchorNode,e.anchorOffset),i=le(this.cm,e.focusNode,e.focusOffset);if(!n||n.bad||!i||i.bad||0!=Da(X(n,i),t.from())||0!=Da(K(n,i),t.to())){var r=oe(this.cm,t.from()),a=oe(this.cm,t.to());if(r||a){var o=this.cm.display.view,s=e.rangeCount&&e.getRangeAt(0);if(r){if(!a){var l=o[o.length-1].measure,c=l.maps?l.maps[l.maps.length-1]:l.map;a={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}}else r={node:o[0].measure.map[2],offset:0};try{var u=Oo(r.node,r.offset,a.offset,a.node)}catch(d){}u&&(e.removeAllRanges(),e.addRange(u),s&&null==e.anchorNode?e.addRange(s):ua&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){zr(this.cm.display.cursorDiv,e.cursors),zr(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Uo(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():At(this.cm,function(){t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var n=le(t,e.anchorNode,e.anchorOffset),i=le(t,e.focusNode,e.focusOffset);n&&i&&At(t,function(){$e(t.doc,fe(n,i),Po),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e=this.cm,t=e.display,n=e.doc.sel.primary(),i=n.from(),r=n.to();if(i.line<t.viewFrom||r.line>t.viewTo-1)return!1;var a;if(i.line==t.viewFrom||0==(a=Lt(e,i.line)))var o=Qi(t.view[0].line),s=t.view[0].node;else var o=Qi(t.view[a].line),s=t.view[a-1].node.nextSibling;var l=Lt(e,r.line);if(l==t.view.length-1)var c=t.viewTo-1,u=t.lineDiv.lastChild;else var c=Qi(t.view[l+1].line)-1,u=t.view[l+1].node.previousSibling;for(var d=Go(ue(e,s,u,o,c)),p=Xi(e.doc,Ia(o,0),Ia(c,Ki(e.doc,c).text.length));d.length>1&&p.length>1;)if(Er(d)==Er(p))d.pop(),p.pop(),c--;else{if(d[0]!=p[0])break;d.shift(),p.shift(),o++}for(var h=0,f=0,g=d[0],m=p[0],v=Math.min(g.length,m.length);v>h&&g.charCodeAt(h)==m.charCodeAt(h);)++h;for(var y=Er(d),b=Er(p),w=Math.min(y.length-(1==d.length?h:0),b.length-(1==p.length?h:0));w>f&&y.charCodeAt(y.length-f-1)==b.charCodeAt(b.length-f-1);)++f;d[d.length-1]=y.slice(0,y.length-f),d[0]=d[0].slice(h);var x=Ia(o,h),k=Ia(c,p.length?Er(p).length-f:0);return d.length>1||d[0]||Da(x,k)?(En(e.doc,d,x,k,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){e.data&&e.data!=e.startData&&Et(this.cm,Q)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.setAttribute("contenteditable","false")},onKeyPress:function(e){e.preventDefault(),Et(this.cm,Q)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},onContextMenu:Dr,resetPosition:Dr,needsContentAttribute:!0},ae.prototype),e.inputStyles={textarea:ie,contenteditable:ae},de.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(0!=Da(n.anchor,i.anchor)||0!=Da(n.head,i.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new pe(G(this.ranges[t].anchor),G(this.ranges[t].head));return new de(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(Da(t,i.from())>=0&&Da(e,i.to())<=0)return n}return-1}},pe.prototype={from:function(){return X(this.anchor,this.head)},to:function(){return K(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Na,ja,Oa,La={left:0,right:0,top:0,bottom:0},Ra=null,Fa=0,Ua=0,za=0,qa=null;ha?qa=-.53:ua?qa=15:va?qa=-.7:ba&&(qa=-1/3);var Ba=function(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}};e.wheelEventPixels=function(e){var t=Ba(e);return t.x*=qa,t.y*=qa,t};var Ha=new Tr,Va=null,Wa=e.changeEnd=function(e){return e.text?Ia(e.from.line+e.text.length-1,Er(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var n=this.options,i=n[e];(n[e]!=t||"mode"==e)&&(n[e]=t,Ka.hasOwnProperty(e)&&Et(this,Ka[e])(this,t,i))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Hn(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Pt(function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:i,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,Nt(this)}),removeOverlay:Pt(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void Nt(this)}}),indentLine:Pt(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ye(this.doc,e)&&Ln(this,e,t,n)}),indentSelection:Pt(function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(Ln(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&jn(this));else{var a=r.from(),o=r.to(),s=Math.max(n,a.line);n=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var l=s;n>l;++l)Ln(this,l,e);var c=this.doc.sel.ranges;0==a.ch&&t.length==c.length&&c[i].from().ch>0&&Ce(this.doc,i,new pe(a,c[i].to()),Po)}}}),getTokenAt:function(e,t){return Ei(this,e,t)},getLineTokens:function(e,t){return Ei(this,Ia(e),t,!0)},getTokenTypeAt:function(e){e=me(this.doc,e);var t,n=Di(this,Ki(this.doc,e.line)),i=0,r=(n.length-1)/2,a=e.ch;if(0==a)t=n[2];else for(;;){var o=i+r>>1;if((o?n[2*o-1]:0)>=a)r=o;else{if(!(n[2*o+1]<a)){t=n[2*o+2];break}i=o+1}}var s=t?t.indexOf("cm-overlay "):-1;return 0>s?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!eo.hasOwnProperty(t))return n;var i=eo[t],r=this.getModeAt(e);if("string"==typeof r[t])i[r[t]]&&n.push(i[r[t]]);else if(r[t])for(var a=0;a<r[t].length;a++){var o=i[r[t][a]];o&&n.push(o)}else r.helperType&&i[r.helperType]?n.push(i[r.helperType]):i[r.name]&&n.push(i[r.name]);for(var a=0;a<i._global.length;a++){var s=i._global[a];s.pred(r,this)&&-1==Pr(n,s.val)&&n.push(s.val)}return n},getStateAfter:function(e,t){var n=this.doc;return e=ge(n,null==e?n.first+n.size-1:e),ze(this,e+1,t)},cursorCoords:function(e,t){var n,i=this.doc.sel.primary();return n=null==e?i.head:"object"==typeof e?me(this.doc,e):e?i.from():i.to(),pt(this,n,t||"page")},charCoords:function(e,t){return dt(this,me(this.doc,e),t||"page")},coordsChar:function(e,t){return e=ut(this,e,t||"page"),gt(this,e.left,e.top)},lineAtHeight:function(e,t){return e=ut(this,{top:e,left:0},t||"page").top,Zi(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n,i=!1;if("number"==typeof e){var r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,i=!0),n=Ki(this.doc,e)}else n=e;return ct(this,n,{top:0,left:0},t||"page").top+(i?this.doc.height-er(n):0)},defaultTextHeight:function(){return vt(this.display)},defaultCharWidth:function(){return yt(this.display)},setGutterMarker:Pt(function(e,t,n){return Rn(this.doc,e,"gutter",function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&Lr(i)&&(e.gutterMarkers=null),!0})}),clearGutter:Pt(function(e){var t=this,n=t.doc,i=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,jt(t,i,"gutter"),Lr(n.gutterMarkers)&&(n.gutterMarkers=null)),++i})}),lineInfo:function(e){if("number"==typeof e){if(!ye(this.doc,e))return null;var t=e;if(e=Ki(this.doc,e),!e)return null}else{var t=Qi(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var a=this.display;e=pt(this,me(this.doc,e));var o=e.bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),a.sizer.appendChild(t),"over"==i)o=e.top;else if("above"==i||"near"==i){var l=Math.max(a.wrapper.clientHeight,this.doc.height),c=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(o=e.bottom),s+t.offsetWidth>c&&(s=c-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="","right"==r?(s=a.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?s=0:"middle"==r&&(s=(a.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&Dn(this,s,o,s+t.offsetWidth,o+t.offsetHeight)},triggerOnKeyDown:Pt(cn),triggerOnKeyPress:Pt(pn),triggerOnKeyUp:dn,execCommand:function(e){return io.hasOwnProperty(e)?io[e](this):void 0},triggerElectric:Pt(function(e){ee(this,e)}),findPosH:function(e,t,n,i){var r=1;0>t&&(r=-1,t=-t);for(var a=0,o=me(this.doc,e);t>a&&(o=Un(this.doc,o,r,n,i),!o.hitSide);++a);return o},moveH:Pt(function(e,t){var n=this;n.extendSelectionsBy(function(i){return n.display.shift||n.doc.extend||i.empty()?Un(n.doc,i.head,e,t,n.options.rtlMoveVisually):0>e?i.from():i.to()},Do)}),deleteH:Pt(function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Fn(this,function(n){var r=Un(i,n.head,e,t,!1);return 0>e?{from:r,to:n.head}:{from:n.head,to:r}})}),findPosV:function(e,t,n,i){var r=1,a=i;0>t&&(r=-1,t=-t);for(var o=0,s=me(this.doc,e);t>o;++o){var l=pt(this,s,"div");if(null==a?a=l.left:l.left=a,s=zn(this,l,r,n),s.hitSide)break}return s},moveV:Pt(function(e,t){var n=this,i=this.doc,r=[],a=!n.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(o){if(a)return 0>e?o.from():o.to();var s=pt(n,o.head,"div");null!=o.goalColumn&&(s.left=o.goalColumn),r.push(s.left);var l=zn(n,s,e,t);return"page"==t&&o==i.sel.primary()&&Nn(n,null,dt(n,l,"div").top-s.top),l},Do),r.length)for(var o=0;o<i.sel.ranges.length;o++)i.sel.ranges[o].goalColumn=r[o]}),findWordAt:function(e){var t=this.doc,n=Ki(t,e.line).text,i=e.ch,r=e.ch;if(n){var a=this.getHelper(e,"wordChars");(e.xRel<0||r==n.length)&&i?--i:++r;for(var o=n.charAt(i),s=Or(o,a)?function(e){return Or(e,a)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Or(e)};i>0&&s(n.charAt(i-1));)--i;for(;r<n.length&&s(n.charAt(r));)++r}return new pe(Ia(e.line,i),Ia(e.line,r))},toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?Ho(this.display.cursorDiv,"CodeMirror-overwrite"):Bo(this.display.cursorDiv,"CodeMirror-overwrite"),To(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==qr()},scrollTo:Pt(function(e,t){(null!=e||null!=t)&&On(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ve(this)-this.display.barHeight,width:e.scrollWidth-Ve(this)-this.display.barWidth,clientHeight:Ge(this),clientWidth:We(this)}},scrollIntoView:Pt(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:Ia(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)On(this),this.curOp.scrollToPos=e;else{var n=Mn(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:Pt(function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var i=this;null!=e&&(i.display.wrapper.style.width=n(e)),null!=t&&(i.display.wrapper.style.height=n(t)),i.options.lineWrapping&&at(this);var r=i.display.viewFrom;i.doc.iter(r,i.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){jt(i,r,"widget");break}++r}),i.curOp.forceUpdate=!0,To(i,"refresh",this)}),operation:function(e){return At(this,e)},refresh:Pt(function(){var e=this.display.cachedTextHeight;Nt(this),this.curOp.forceUpdate=!0,ot(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),u(this),(null==e||Math.abs(e-vt(this.display))>.5)&&o(this),To(this,"refresh",this)}),swapDoc:Pt(function(e){var t=this.doc;return t.cm=null,Gi(this,e),ot(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,wr(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},_r(e);var Ga=e.defaults={},Ka=e.optionHandlers={},Xa=e.Init={toString:function(){return"CodeMirror.Init"}};qn("value","",function(e,t){e.setValue(t)},!0),qn("mode",null,function(e,t){e.doc.modeOption=t,n(e)},!0),qn("indentUnit",2,n,!0),qn("indentWithTabs",!1),qn("smartIndent",!0),qn("tabSize",4,function(e){i(e),ot(e),Nt(e)},!0),qn("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,n,i){t.state.specialChars=new RegExp(n.source+(n.test("	")?"":"|	"),"g"),i!=e.Init&&t.refresh()}),qn("specialCharPlaceholder",Oi,function(e){e.refresh()},!0),qn("electricChars",!0),qn("inputStyle",Ca?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),qn("rtlMoveVisually",!_a),qn("wholeLineUpdateBefore",!0),qn("theme","default",function(e){s(e),l(e)},!0),qn("keyMap","default",function(t,n,i){var r=Hn(n),a=i!=e.Init&&Hn(i);a&&a.detach&&a.detach(t,r),r.attach&&r.attach(t,a||null)}),qn("extraKeys",null),qn("lineWrapping",!1,r,!0),qn("gutters",[],function(e){h(e.options),l(e)},!0),qn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?S(e.display)+"px":"0",e.refresh()},!0),qn("coverGutterNextToScrollbar",!1,function(e){y(e)},!0),qn("scrollbarStyle","native",function(e){v(e),y(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),qn("lineNumbers",!1,function(e){h(e.options),l(e)},!0),qn("firstLineNumber",1,l,!0),qn("lineNumberFormatter",function(e){return e},l,!0),qn("showCursorWhenSelecting",!1,Me,!0),qn("resetSelectionOnContextMenu",!0),qn("lineWiseCopyCut",!0),qn("readOnly",!1,function(e,t){"nocursor"==t?(gn(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||e.display.input.reset())}),qn("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),qn("dragDrop",!0,qt),qn("cursorBlinkRate",530),qn("cursorScrollMargin",0),qn("cursorHeight",1,Me,!0),qn("singleCursorHeightPerLine",!0,Me,!0),qn("workTime",100),qn("workDelay",100),qn("flattenSpans",!0,i,!0),qn("addModeClass",!1,i,!0),qn("pollInterval",100),qn("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),qn("historyEventDelay",1250),qn("viewportMargin",10,function(e){e.refresh()},!0),qn("maxHighlightLength",1e4,i,!0),qn("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),qn("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),qn("autofocus",null);var Ya=e.modes={},Ja=e.mimeModes={};e.defineMode=function(t,n){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),Ya[t]=n},e.defineMIME=function(e,t){Ja[e]=t},e.resolveMode=function(t){if("string"==typeof t&&Ja.hasOwnProperty(t))t=Ja[t];else if(t&&"string"==typeof t.name&&Ja.hasOwnProperty(t.name)){var n=Ja[t.name];"string"==typeof n&&(n={name:n}),t=Mr(n,t),t.name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),i=Ya[n.name];if(!i)return e.getMode(t,"text/plain");var r=i(t,n);if(Qa.hasOwnProperty(n.name)){var a=Qa[n.name];for(var o in a)a.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=a[o])}if(r.name=n.name,n.helperType&&(r.helperType=n.helperType),n.modeProps)for(var o in n.modeProps)r[o]=n.modeProps[o];return r},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Qa=e.modeExtensions={};e.extendMode=function(e,t){var n=Qa.hasOwnProperty(e)?Qa[e]:Qa[e]={};Nr(t,n)},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){yo.prototype[e]=t},e.defineOption=qn;var Za=[];e.defineInitHook=function(e){Za.push(e)};var eo=e.helpers={};e.registerHelper=function(t,n,i){eo.hasOwnProperty(t)||(eo[t]=e[t]={_global:[]}),eo[t][n]=i},e.registerGlobalHelper=function(t,n,i,r){e.registerHelper(t,n,r),eo[t]._global.push({pred:i,val:r})};var to=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n},no=e.startState=function(e,t,n){return e.startState?e.startState(t,n):!0};e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var io=e.commands={selectAll:function(e){e.setSelection(Ia(e.firstLine(),0),Ia(e.lastLine()),Po)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Po)},killLine:function(e){Fn(e,function(t){if(t.empty()){var n=Ki(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:Ia(t.head.line+1,0)}:{from:t.head,to:Ia(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Fn(e,function(t){return{from:Ia(t.from().line,0),to:me(e.doc,Ia(t.to().line+1,0))}})},delLineLeft:function(e){Fn(e,function(e){return{from:Ia(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){Fn(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return{from:i,to:t.from()}})},delWrappedLineRight:function(e){Fn(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(Ia(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Ia(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return na(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return ra(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return ia(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},Do)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},Do)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?ra(e,t.head):i},Do)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){
e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var a=n[r].from(),o=Mo(e.getLine(a.line),a.ch,i);t.push(new Array(i-o%i+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){At(e,function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++){var r=t[i].head,a=Ki(e.doc,r.line).text;if(a)if(r.ch==a.length&&(r=new Ia(r.line,r.ch-1)),r.ch>0)r=new Ia(r.line,r.ch+1),e.replaceRange(a.charAt(r.ch-1)+a.charAt(r.ch-2),Ia(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var o=Ki(e.doc,r.line-1).text;o&&e.replaceRange(a.charAt(0)+"\n"+o.charAt(o.length-1),Ia(r.line-1,o.length-1),Ia(r.line,1),"+transpose")}n.push(new pe(r,r))}e.setSelections(n)})},newlineAndIndent:function(e){At(e,function(){for(var t=e.listSelections().length,n=0;t>n;n++){var i=e.listSelections()[n];e.replaceRange("\n",i.anchor,i.head,"+input"),e.indentLine(i.from().line+1,null,!0),jn(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},ro=e.keyMap={};ro.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ro.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ro.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},ro.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},ro["default"]=Sa?ro.macDefault:ro.pcDefault,e.normalizeKeyMap=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var r=Ir(n.split(" "),Bn),a=0;a<r.length;a++){var o,s;a==r.length-1?(s=r.join(" "),o=i):(s=r.slice(0,a+1).join(" "),o="...");var l=t[s];if(l){if(l!=o)throw new Error("Inconsistent bindings for "+s)}else t[s]=o}delete e[n]}for(var c in t)e[c]=t[c];return e};var ao=e.lookupKey=function(e,t,n,i){t=Hn(t);var r=t.call?t.call(e,i):t[e];if(r===!1)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return ao(e,t.fallthrough,n,i);for(var a=0;a<t.fallthrough.length;a++){var o=ao(e,t.fallthrough[a],n,i);if(o)return o}}},oo=e.isModifierKey=function(e){var t="string"==typeof e?e:Jo[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},so=e.keyName=function(e,t){if(ya&&34==e.keyCode&&e["char"])return!1;var n=Jo[e.keyCode],i=n;return null==i||e.altGraphKey?!1:(e.altKey&&"Alt"!=n&&(i="Alt-"+i),($a?e.metaKey:e.ctrlKey)&&"Ctrl"!=n&&(i="Ctrl-"+i),($a?e.ctrlKey:e.metaKey)&&"Cmd"!=n&&(i="Cmd-"+i),!t&&e.shiftKey&&"Shift"!=n&&(i="Shift-"+i),i)};e.fromTextArea=function(t,n){function i(){t.value=c.getValue()}if(n=n?Nr(n):{},n.value=t.value,!n.tabindex&&t.tabIndex&&(n.tabindex=t.tabIndex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var r=qr();n.autofocus=r==t||null!=t.getAttribute("autofocus")&&r==document.body}if(t.form&&(So(t.form,"submit",i),!n.leaveSubmitMethodAlone)){var a=t.form,o=a.submit;try{var s=a.submit=function(){i(),a.submit=o,a.submit(),a.submit=s}}catch(l){}}n.finishInit=function(e){e.save=i,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,i(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(_o(t.form,"submit",i),"function"==typeof t.form.submit&&(t.form.submit=o))}},t.style.display="none";var c=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return c};var lo=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};lo.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Mo(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Mo(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Mo(this.string,null,this.tabSize)-(this.lineStart?Mo(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e},a=this.string.substr(this.pos,e.length);return r(a)==r(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var co=0,uo=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++co};_r(uo),uo.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&bt(e),Sr(this,"clear")){var n=this.find();n&&wr(this,"clear",n.from,n.to)}for(var i=null,r=null,a=0;a<this.lines.length;++a){var o=this.lines[a],s=Jn(o.markedSpans,this);e&&!this.collapsed?jt(e,Qi(o),"text"):e&&(null!=s.to&&(r=Qi(o)),null!=s.from&&(i=Qi(o))),o.markedSpans=Qn(o.markedSpans,s),null==s.from&&this.collapsed&&!bi(this.doc,o)&&e&&Ji(o,vt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var a=0;a<this.lines.length;++a){var l=gi(this.lines[a]),c=d(l);c>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&Nt(e,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Pe(e.doc)),e&&wr(e,"markerCleared",e,this),t&&xt(e),this.parent&&this.parent.clear()}},uo.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,i,r=0;r<this.lines.length;++r){var a=this.lines[r],o=Jn(a.markedSpans,this);if(null!=o.from&&(n=Ia(t?a:Qi(a),o.from),-1==e))return n;if(null!=o.to&&(i=Ia(t?a:Qi(a),o.to),1==e))return i}return n&&{from:n,to:i}},uo.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&At(n,function(){var i=e.line,r=Qi(e.line),a=Qe(n,r);if(a&&(rt(a),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!bi(t.doc,i)&&null!=t.height){var o=t.height;t.height=null;var s=ki(t)-o;s&&Ji(i,i.height+s)}})},uo.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Pr(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},uo.prototype.detachLine=function(e){if(this.lines.splice(Pr(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var co=0,po=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};_r(po),po.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();wr(this,"clear")}},po.prototype.find=function(e,t){return this.primary.find(e,t)};var ho=e.LineWidget=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};_r(ho),ho.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=Qi(n);if(null!=i&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(n.widgets=null);var a=ki(this);Ji(n,Math.max(0,n.height-a)),e&&At(e,function(){xi(e,n,-a),jt(e,i,"widget")})}},ho.prototype.changed=function(){var e=this.height,t=this.doc.cm,n=this.line;this.height=null;var i=ki(this)-e;i&&(Ji(n,n.height+i),t&&At(t,function(){t.curOp.forceUpdate=!0,xi(t,n,i)}))};var fo=e.Line=function(e,t,n){this.text=e,si(this,t),this.height=n?n(this):1};_r(fo),fo.prototype.lineNo=function(){return Qi(this)};var go={},mo={};Hi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;i>n;++n){var r=this.lines[n];this.height-=r.height,_i(r),wr(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;i>e;++e)if(n(this.lines[e]))return!0}},Vi.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(r>e){var a=Math.min(t,r-e),o=i.height;if(i.removeInner(e,a),this.height-=o-i.height,r==a&&(this.children.splice(n--,1),i.parent=null),0==(t-=a))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Hi))){var s=[];this.collapse(s),this.children=[new Hi(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],a=r.chunkSize();if(a>=e){if(r.insertInner(e,t,n),r.lines&&r.lines.length>50){for(;r.lines.length>50;){var o=r.lines.splice(r.lines.length-25,25),s=new Hi(o);r.height-=s.height,this.children.splice(i+1,0,s),s.parent=this}this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Vi(t);if(e.parent){e.size-=n.size,e.height-=n.height;var i=Pr(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new Vi(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],a=r.chunkSize();if(a>e){var o=Math.min(t,a-e);if(r.iterN(e,o,n))return!0;if(0==(t-=o))break;e=0}else e-=a}}};var vo=0,yo=e.Doc=function(e,t,n){if(!(this instanceof yo))return new yo(e,t,n);null==n&&(n=0),Vi.call(this,[new Hi([new fo("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var i=Ia(n,0);this.sel=fe(i),this.history=new nr(null),this.id=++vo,this.modeOption=t,"string"==typeof e&&(e=Go(e)),Bi(this,{from:i,to:i,text:e}),$e(this,fe(i),Po)};yo.prototype=Mr(Vi.prototype,{constructor:yo,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Yi(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:It(function(e){var t=Ia(this.first,0),n=this.first+this.size-1;Cn(this,{from:t,to:Ia(n,Ki(this,n).text.length),text:Go(e),origin:"setValue",full:!0},!0),$e(this,fe(t))}),replaceRange:function(e,t,n,i){t=me(this,t),n=n?me(this,n):t,En(this,e,t,n,i)},getRange:function(e,t,n){var i=Xi(this,me(this,e),me(this,t));return n===!1?i:i.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return ye(this,e)?Ki(this,e):void 0},getLineNumber:function(e){return Qi(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ki(this,e)),gi(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return me(this,e)},getCursor:function(e){var t,n=this.sel.primary();return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||"to"==e||e===!1?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:It(function(e,t,n){Se(this,me(this,"number"==typeof e?Ia(e,t||0):e),null,n)}),setSelection:It(function(e,t,n){Se(this,me(this,e),me(this,t||e),n)}),extendSelection:It(function(e,t,n){xe(this,me(this,e),t&&me(this,t),n)}),extendSelections:It(function(e,t){ke(this,be(this,e,t))}),extendSelectionsBy:It(function(e,t){ke(this,Ir(this.sel.ranges,e),t)}),setSelections:It(function(e,t,n){if(e.length){for(var i=0,r=[];i<e.length;i++)r[i]=new pe(me(this,e[i].anchor),me(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),$e(this,he(r,t),n)}}),addSelection:It(function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new pe(me(this,e),me(this,t||e))),$e(this,he(i,i.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=Xi(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return e===!1?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=Xi(this,n[i].from(),n[i].to());e!==!1&&(r=r.join(e||"\n")),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:It(function(e,t,n){for(var i=[],r=this.sel,a=0;a<r.ranges.length;a++){var o=r.ranges[a];i[a]={from:o.from(),to:o.to(),text:Go(e[a]),origin:n}}for(var s=t&&"end"!=t&&xn(this,i,t),a=i.length-1;a>=0;a--)Cn(this,i[a]);s?Te(this,s):this.cm&&jn(this.cm)}),undo:It(function(){_n(this,"undo")}),redo:It(function(){_n(this,"redo")}),undoSelection:It(function(){_n(this,"undo",!0)}),redoSelection:It(function(){_n(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new nr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:hr(this.history.done),undone:hr(this.history.undone)}},setHistory:function(e){var t=this.history=new nr(this.history.maxGeneration);t.done=hr(e.done.slice(0),null,!0),t.undone=hr(e.undone.slice(0),null,!0)},addLineClass:It(function(e,t,n){return Rn(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(Br(n).test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0})}),removeLineClass:It(function(e,t,n){return Rn(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",r=e[i];if(!r)return!1;if(null==n)e[i]=null;else{var a=r.match(Br(n));if(!a)return!1;var o=a.index+a[0].length;e[i]=r.slice(0,a.index)+(a.index&&o!=r.length?" ":"")+r.slice(o)||null}return!0})}),addLineWidget:It(function(e,t,n){return Ci(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Vn(this,me(this,e),me(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=me(this,e),Vn(this,e,e,n,"bookmark")},findMarksAt:function(e){e=me(this,e);var t=[],n=Ki(this,e.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=me(this,e),t=me(this,t);var i=[],r=e.line;return this.iter(e.line,t.line+1,function(a){var o=a.markedSpans;if(o)for(var s=0;s<o.length;s++){var l=o[s];r==e.line&&e.ch>l.to||null==l.from&&r!=e.line||r==t.line&&l.from>t.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r}),i},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(i){var r=i.text.length+1;return r>e?(t=e,!0):(e-=r,void++n)}),me(this,Ia(n,t))},indexFromPos:function(e){e=me(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new yo(Yi(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new yo(Yi(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Kn(i,Gn(this)),i},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var i=this.linked[n];if(i.doc==t){this.linked.splice(n,1),t.unlinkDoc(this),Xn(Gn(this));break}}if(t.history==this.history){var r=[t.id];Wi(t,function(e){r.push(e.id)},!0),t.history=new nr(null),t.history.done=hr(this.history.done,r),t.history.undone=hr(this.history.undone,r)}},iterLinkedDocs:function(e){Wi(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),yo.prototype.eachLine=yo.prototype.iter;var bo="iter insert remove copy getEditor constructor".split(" ");for(var wo in yo.prototype)yo.prototype.hasOwnProperty(wo)&&Pr(bo,wo)<0&&(e.prototype[wo]=function(e){return function(){return e.apply(this.doc,arguments)}}(yo.prototype[wo]));_r(yo);var xo=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},ko=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},Co=e.e_stop=function(e){xo(e),ko(e)},So=e.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={}),r=i[t]||(i[t]=[]);r.push(n)}},_o=e.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers&&e._handlers[t];if(!i)return;for(var r=0;r<i.length;++r)if(i[r]==n){i.splice(r,1);break}}},To=e.signal=function(e,t){var n=e._handlers&&e._handlers[t];if(n)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)},$o=null,Ao=30,Eo=e.Pass={toString:function(){return"CodeMirror.Pass"}},Po={scroll:!1},Io={origin:"*mouse"},Do={origin:"+move"};Tr.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Mo=e.countColumn=function(e,t,n,i,r){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var a=i||0,o=r||0;;){var s=e.indexOf("	",a);if(0>s||s>=t)return o+(t-a);o+=s-a,o+=n-o%n,a=s+1}},No=[""],jo=function(e){e.select()};ka?jo=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:ha&&(jo=function(e){try{e.select()}catch(t){}});var Oo,Lo=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ro=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Lo.test(e))},Fo=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;Oo=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(r){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var Uo=e.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do if(11==t.nodeType&&(t=t.host),t==e)return!0;while(t=t.parentNode)};ha&&11>fa&&(qr=function(){try{return document.activeElement}catch(e){return document.body}});var zo,qo,Bo=e.rmClass=function(e,t){var n=e.className,i=Br(t).exec(n);if(i){var r=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(r?i[1]+r:"")}},Ho=e.addClass=function(e,t){var n=e.className;Br(t).test(n)||(e.className+=(n?" ":"")+t)},Vo=!1,Wo=function(){if(ha&&9>fa)return!1;var e=Fr("div");return"draggable"in e||"dragDrop"in e}(),Go=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;i>=t;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var a=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),o=a.indexOf("\r");-1!=o?(n.push(a.slice(0,o)),t+=o+1):(n.push(a),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Ko=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},Xo=function(){var e=Fr("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Yo=null,Jo={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=Jo,function(){for(var e=0;10>e;e++)Jo[e+48]=Jo[e+96]=String(e);for(var e=65;90>=e;e++)Jo[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)Jo[e+111]=Jo[e+63235]="F"+e}();var Qo,Zo=function(){function e(e){return 247>=e?n.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?i.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",i="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,a=/[stwN]/,o=/[LRr]/,s=/[Lb1n]/,l=/[1n]/,c="L";return function(n){if(!r.test(n))return!1;for(var i,u=n.length,d=[],p=0;u>p;++p)d.push(i=e(n.charCodeAt(p)));for(var p=0,h=c;u>p;++p){var i=d[p];"m"==i?d[p]=h:h=i}for(var p=0,f=c;u>p;++p){var i=d[p];"1"==i&&"r"==f?d[p]="n":o.test(i)&&(f=i,"r"==i&&(d[p]="R"))}for(var p=1,h=d[0];u-1>p;++p){var i=d[p];"+"==i&&"1"==h&&"1"==d[p+1]?d[p]="1":","!=i||h!=d[p+1]||"1"!=h&&"n"!=h||(d[p]=h),h=i}for(var p=0;u>p;++p){var i=d[p];if(","==i)d[p]="N";else if("%"==i){for(var g=p+1;u>g&&"%"==d[g];++g);for(var m=p&&"!"==d[p-1]||u>g&&"1"==d[g]?"1":"N",v=p;g>v;++v)d[v]=m;p=g-1}}for(var p=0,f=c;u>p;++p){var i=d[p];"L"==f&&"1"==i?d[p]="L":o.test(i)&&(f=i)}for(var p=0;u>p;++p)if(a.test(d[p])){for(var g=p+1;u>g&&a.test(d[g]);++g);for(var y="L"==(p?d[p-1]:c),b="L"==(u>g?d[g]:c),m=y||b?"L":"R",v=p;g>v;++v)d[v]=m;p=g-1}for(var w,x=[],p=0;u>p;)if(s.test(d[p])){var k=p;for(++p;u>p&&s.test(d[p]);++p);x.push(new t(0,k,p))}else{var C=p,S=x.length;for(++p;u>p&&"L"!=d[p];++p);for(var v=C;p>v;)if(l.test(d[v])){v>C&&x.splice(S,0,new t(1,C,v));var _=v;for(++v;p>v&&l.test(d[v]);++v);x.splice(S,0,new t(2,_,v)),C=v}else++v;p>C&&x.splice(S,0,new t(1,C,p))}return 1==x[0].level&&(w=n.match(/^\s+/))&&(x[0].from=w[0].length,x.unshift(new t(0,0,w[0].length))),1==Er(x).level&&(w=n.match(/\s+$/))&&(Er(x).to-=w[0].length,x.push(new t(0,u-w[0].length,u))),2==x[0].level&&x.unshift(new t(1,x[0].to,x[0].to)),x[0].level!=Er(x).level&&x.push(new t(x[0].level,u,u)),x}}();return e.version="5.4.0",e}),function a(e,t,n){function i(o,s){if(!t[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=t[o]={exports:{}};e[o][0].call(u.exports,function(t){var n=e[o][1][t];return i(n?n:t)},u,u.exports,a,e,t,n)}return t[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){(function(t){t.graphlib=e("./index")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./index":2}],2:[function(e,t,n){var i=e("./lib");t.exports={Graph:i.Graph,json:e("./lib/json"),alg:e("./lib/alg"),version:i.version}},{"./lib":18,"./lib/alg":9,"./lib/json":19}],3:[function(e,t,n){function i(e){function t(a){r.has(i,a)||(i[a]=!0,n.push(a),r.each(e.successors(a),t),r.each(e.predecessors(a),t))}var n,i={},a=[];return r.each(e.nodes(),function(e){n=[],t(e),n.length&&a.push(n)}),a}var r=e("../lodash");t.exports=i},{"../lodash":20}],4:[function(e,t,n){function i(e,t,n){a.isArray(t)||(t=[t]);var i=[],o={};return a.each(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);r(e,t,"post"===n,o,i)}),i}function r(e,t,n,i,o){a.has(i,t)||(i[t]=!0,n||o.push(t),a.each(e.neighbors(t),function(t){r(e,t,n,i,o)}),n&&o.push(t))}var a=e("../lodash");t.exports=i},{"../lodash":20}],5:[function(e,t,n){function i(e,t,n){return a.transform(e.nodes(),function(i,a){i[a]=r(e,a,t,n)},{})}var r=e("./dijkstra"),a=e("../lodash");t.exports=i},{"../lodash":20,"./dijkstra":6}],6:[function(e,t,n){function i(e,t,n,i){return r(e,String(t),n||s,i||function(t){return e.outEdges(t)})}function r(e,t,n,i){var r,a,s={},l=new o,c=function(e){var t=e.v!==r?e.v:e.w,i=s[t],o=n(e),c=a.distance+o;if(0>o)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+o);c<i.distance&&(i.distance=c,i.predecessor=r,l.decrease(t,c))};for(e.nodes().forEach(function(e){var n=e===t?0:Number.POSITIVE_INFINITY;s[e]={distance:n},l.add(e,n)});l.size()>0&&(r=l.removeMin(),a=s[r],a.distance!==Number.POSITIVE_INFINITY);)i(r).forEach(c);return s}var a=e("../lodash"),o=e("../data/priority-queue");t.exports=i;var s=a.constant(1)},{"../data/priority-queue":16,"../lodash":20}],7:[function(e,t,n){function i(e){return r.filter(a(e),function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}var r=e("../lodash"),a=e("./tarjan");t.exports=i},{"../lodash":20,"./tarjan":14}],8:[function(e,t,n){function i(e,t,n){return r(e,t||o,n||function(t){return e.outEdges(t)})}function r(e,t,n){var i={},r=e.nodes();return r.forEach(function(e){i[e]={},i[e][e]={distance:0},r.forEach(function(t){e!==t&&(i[e][t]={distance:Number.POSITIVE_INFINITY})}),n(e).forEach(function(n){var r=n.v===e?n.w:n.v,a=t(n);i[e][r]={distance:a,predecessor:e}})}),r.forEach(function(e){var t=i[e];r.forEach(function(n){var a=i[n];r.forEach(function(n){var i=a[e],r=t[n],o=a[n],s=i.distance+r.distance;s<o.distance&&(o.distance=s,o.predecessor=r.predecessor)})})}),i}var a=e("../lodash");t.exports=i;var o=a.constant(1)},{"../lodash":20}],9:[function(e,t,n){t.exports={components:e("./components"),dijkstra:e("./dijkstra"),
dijkstraAll:e("./dijkstra-all"),findCycles:e("./find-cycles"),floydWarshall:e("./floyd-warshall"),isAcyclic:e("./is-acyclic"),postorder:e("./postorder"),preorder:e("./preorder"),prim:e("./prim"),tarjan:e("./tarjan"),topsort:e("./topsort")}},{"./components":3,"./dijkstra":6,"./dijkstra-all":5,"./find-cycles":7,"./floyd-warshall":8,"./is-acyclic":10,"./postorder":11,"./preorder":12,"./prim":13,"./tarjan":14,"./topsort":15}],10:[function(e,t,n){function i(e){try{r(e)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}var r=e("./topsort");t.exports=i},{"./topsort":15}],11:[function(e,t,n){function i(e,t){return r(e,t,"post")}var r=e("./dfs");t.exports=i},{"./dfs":4}],12:[function(e,t,n){function i(e,t){return r(e,t,"pre")}var r=e("./dfs");t.exports=i},{"./dfs":4}],13:[function(e,t,n){function i(e,t){function n(e){var n=e.v===i?e.w:e.v,r=c.priority(n);if(void 0!==r){var a=t(e);r>a&&(l[n]=i,c.decrease(n,a))}}var i,s=new a,l={},c=new o;if(0===e.nodeCount())return s;r.each(e.nodes(),function(e){c.add(e,Number.POSITIVE_INFINITY),s.setNode(e)}),c.decrease(e.nodes()[0],0);for(var u=!1;c.size()>0;){if(i=c.removeMin(),r.has(l,i))s.setEdge(i,l[i]);else{if(u)throw new Error("Input graph is not connected: "+e);u=!0}e.nodeEdges(i).forEach(n)}return s}var r=e("../lodash"),a=e("../graph"),o=e("../data/priority-queue");t.exports=i},{"../data/priority-queue":16,"../graph":17,"../lodash":20}],14:[function(e,t,n){function i(e){function t(s){var l=a[s]={onStack:!0,lowlink:n,index:n++};if(i.push(s),e.successors(s).forEach(function(e){r.has(a,e)?a[e].onStack&&(l.lowlink=Math.min(l.lowlink,a[e].index)):(t(e),l.lowlink=Math.min(l.lowlink,a[e].lowlink))}),l.lowlink===l.index){var c,u=[];do c=i.pop(),a[c].onStack=!1,u.push(c);while(s!==c);o.push(u)}}var n=0,i=[],a={},o=[];return e.nodes().forEach(function(e){r.has(a,e)||t(e)}),o}var r=e("../lodash");t.exports=i},{"../lodash":20}],15:[function(e,t,n){function i(e){function t(s){if(a.has(i,s))throw new r;a.has(n,s)||(i[s]=!0,n[s]=!0,a.each(e.predecessors(s),t),delete i[s],o.push(s))}var n={},i={},o=[];if(a.each(e.sinks(),t),a.size(n)!==e.nodeCount())throw new r;return o}function r(){}var a=e("../lodash");t.exports=i,i.CycleException=r},{"../lodash":20}],16:[function(e,t,n){function i(){this._arr=[],this._keyIndices={}}var r=e("../lodash");t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(e){return e.key})},i.prototype.has=function(e){return r.has(this._keyIndices,e)},i.prototype.priority=function(e){var t=this._keyIndices[e];return void 0!==t?this._arr[t].priority:void 0},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!r.has(n,e)){var i=this._arr,a=i.length;return n[e]=a,i.push({key:e,priority:t}),this._decrease(a),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},i.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},i.prototype._heapify=function(e){var t=this._arr,n=2*e,i=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,i<t.length&&(r=t[i].priority<t[r].priority?i:r),r!==e&&(this._swap(e,r),this._heapify(r)))},i.prototype._decrease=function(e){for(var t,n=this._arr,i=n[e].priority;0!==e&&(t=e>>1,!(n[t].priority<i));)this._swap(e,t),e=t},i.prototype._swap=function(e,t){var n=this._arr,i=this._keyIndices,r=n[e],a=n[t];n[e]=a,n[t]=r,i[a.key]=e,i[r.key]=t}},{"../lodash":20}],17:[function(e,t,n){"use strict";function i(e){this._isDirected=c.has(e,"directed")?e.directed:!0,this._isMultigraph=c.has(e,"multigraph")?e.multigraph:!1,this._isCompound=c.has(e,"compound")?e.compound:!1,this._label=void 0,this._defaultNodeLabelFn=c.constant(void 0),this._defaultEdgeLabelFn=c.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[d]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function r(e,t){c.has(e,t)?e[t]++:e[t]=1}function a(e,t){--e[t]||delete e[t]}function o(e,t,n,i){if(!e&&t>n){var r=t;t=n,n=r}return t+p+n+p+(c.isUndefined(i)?u:i)}function s(e,t,n,i){if(!e&&t>n){var r=t;t=n,n=r}var a={v:t,w:n};return i&&(a.name=i),a}function l(e,t){return o(e,t.v,t.w,t.name)}var c=e("./lodash");t.exports=i;var u="\x00",d="\x00",p="";i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(e){return this._label=e,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(e){return c.isFunction(e)||(e=c.constant(e)),this._defaultNodeLabelFn=e,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return c.keys(this._nodes)},i.prototype.sources=function(){return c.filter(this.nodes(),function(e){return c.isEmpty(this._in[e])},this)},i.prototype.sinks=function(){return c.filter(this.nodes(),function(e){return c.isEmpty(this._out[e])},this)},i.prototype.setNodes=function(e,t){var n=arguments;return c.each(e,function(e){n.length>1?this.setNode(e,t):this.setNode(e)},this),this},i.prototype.setNode=function(e,t){return c.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=d,this._children[e]={},this._children[d][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},i.prototype.node=function(e){return this._nodes[e]},i.prototype.hasNode=function(e){return c.has(this._nodes,e)},i.prototype.removeNode=function(e){var t=this;if(c.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],c.each(this.children(e),function(e){this.setParent(e)},this),delete this._children[e]),c.each(c.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],c.each(c.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},i.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(c.isUndefined(t))t=d;else{t+="";for(var n=t;!c.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},i.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},i.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==d)return t}},i.prototype.children=function(e){if(c.isUndefined(e)&&(e=d),this._isCompound){var t=this._children[e];if(t)return c.keys(t)}else{if(e===d)return this.nodes();if(this.hasNode(e))return[]}},i.prototype.predecessors=function(e){var t=this._preds[e];return t?c.keys(t):void 0},i.prototype.successors=function(e){var t=this._sucs[e];return t?c.keys(t):void 0},i.prototype.neighbors=function(e){var t=this.predecessors(e);return t?c.union(t,this.successors(e)):void 0},i.prototype.filterNodes=function(e){function t(e){var a=i.parent(e);return void 0===a||n.hasNode(a)?(r[e]=a,a):a in r?r[a]:t(a)}var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph()),c.each(this._nodes,function(t,i){e(i)&&n.setNode(i,t)},this),c.each(this._edgeObjs,function(e){n.hasNode(e.v)&&n.hasNode(e.w)&&n.setEdge(e,this.edge(e))},this);var i=this,r={};return this._isCompound&&c.each(n.nodes(),function(e){n.setParent(e,t(e))}),n},i.prototype.setDefaultEdgeLabel=function(e){return c.isFunction(e)||(e=c.constant(e)),this._defaultEdgeLabelFn=e,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return c.values(this._edgeObjs)},i.prototype.setPath=function(e,t){var n=this,i=arguments;return c.reduce(e,function(e,r){return i.length>1?n.setEdge(e,r,t):n.setEdge(e,r),r}),this},i.prototype.setEdge=function(){var e,t,n,i,a=!1;c.isPlainObject(arguments[0])?(e=arguments[0].v,t=arguments[0].w,n=arguments[0].name,2===arguments.length&&(i=arguments[1],a=!0)):(e=arguments[0],t=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],a=!0)),e=""+e,t=""+t,c.isUndefined(n)||(n=""+n);var l=o(this._isDirected,e,t,n);if(c.has(this._edgeLabels,l))return a&&(this._edgeLabels[l]=i),this;if(!c.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[l]=a?i:this._defaultEdgeLabelFn(e,t,n);var u=s(this._isDirected,e,t,n);return e=u.v,t=u.w,Object.freeze(u),this._edgeObjs[l]=u,r(this._preds[t],e),r(this._sucs[e],t),this._in[t][l]=u,this._out[e][l]=u,this._edgeCount++,this},i.prototype.edge=function(e,t,n){var i=1===arguments.length?l(this._isDirected,arguments[0]):o(this._isDirected,e,t,n);return this._edgeLabels[i]},i.prototype.hasEdge=function(e,t,n){var i=1===arguments.length?l(this._isDirected,arguments[0]):o(this._isDirected,e,t,n);return c.has(this._edgeLabels,i)},i.prototype.removeEdge=function(e,t,n){var i=1===arguments.length?l(this._isDirected,arguments[0]):o(this._isDirected,e,t,n),r=this._edgeObjs[i];return r&&(e=r.v,t=r.w,delete this._edgeLabels[i],delete this._edgeObjs[i],a(this._preds[t],e),a(this._sucs[e],t),delete this._in[t][i],delete this._out[e][i],this._edgeCount--),this},i.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var i=c.values(n);return t?c.filter(i,function(e){return e.v===t}):i}},i.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var i=c.values(n);return t?c.filter(i,function(e){return e.w===t}):i}},i.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);return n?n.concat(this.outEdges(e,t)):void 0}},{"./lodash":20}],18:[function(e,t,n){t.exports={Graph:e("./graph"),version:e("./version")}},{"./graph":17,"./version":21}],19:[function(e,t,n){function i(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:r(e),edges:a(e)};return s.isUndefined(e.graph())||(t.value=s.clone(e.graph())),t}function r(e){return s.map(e.nodes(),function(t){var n=e.node(t),i=e.parent(t),r={v:t};return s.isUndefined(n)||(r.value=n),s.isUndefined(i)||(r.parent=i),r})}function a(e){return s.map(e.edges(),function(t){var n=e.edge(t),i={v:t.v,w:t.w};return s.isUndefined(t.name)||(i.name=t.name),s.isUndefined(n)||(i.value=n),i})}function o(e){var t=new l(e.options).setGraph(e.value);return s.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),s.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}var s=e("./lodash"),l=e("./graph");t.exports={write:i,read:o}},{"./graph":17,"./lodash":20}],20:[function(e,t,n){var i;if("function"==typeof e)try{i=e("lodash")}catch(r){}i||(i=window._),t.exports=i},{lodash:void 0}],21:[function(e,t,n){t.exports="1.0.6"},{}]},{},[1]),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.dagre=e()}}(function(){return function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){t.exports={graphlib:e("./lib/graphlib"),layout:e("./lib/layout"),debug:e("./lib/debug"),util:{time:e("./lib/util").time,notime:e("./lib/util").notime},version:e("./lib/version")}},{"./lib/debug":6,"./lib/graphlib":7,"./lib/layout":9,"./lib/util":29,"./lib/version":30}],2:[function(e,t,n){"use strict";function i(e){function t(e){return function(t){return e.edge(t).weight}}var n="greedy"===e.graph().acyclicer?s(e,t(e)):r(e);o.each(n,function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,o.uniqueId("rev"))})}function r(e){function t(a){o.has(r,a)||(r[a]=!0,i[a]=!0,o.each(e.outEdges(a),function(e){o.has(i,e.w)?n.push(e):t(e.w)}),delete i[a])}var n=[],i={},r={};return o.each(e.nodes(),t),n}function a(e){o.each(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var i=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,i)}})}var o=e("./lodash"),s=e("./greedy-fas");t.exports={run:i,undo:a}},{"./greedy-fas":8,"./lodash":10}],3:[function(e,t,n){function i(e){function t(n){var i=e.children(n),o=e.node(n);if(i.length&&a.each(i,t),a.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var s=o.minRank,l=o.maxRank+1;l>s;++s)r(e,"borderLeft","_bl",n,o,s),r(e,"borderRight","_br",n,o,s)}}a.each(e.children(),t)}function r(e,t,n,i,r,a){var s={width:0,height:0,rank:a,borderType:t},l=r[t][a-1],c=o.addDummyNode(e,"border",s,n);r[t][a]=c,e.setParent(c,i),l&&e.setEdge(l,c,{weight:1})}var a=e("./lodash"),o=e("./util");t.exports=i},{"./lodash":10,"./util":29}],4:[function(e,t,n){"use strict";function i(e){var t=e.graph().rankdir.toLowerCase();("lr"===t||"rl"===t)&&a(e)}function r(e){var t=e.graph().rankdir.toLowerCase();("bt"===t||"rl"===t)&&s(e),("lr"===t||"rl"===t)&&(c(e),a(e))}function a(e){d.each(e.nodes(),function(t){o(e.node(t))}),d.each(e.edges(),function(t){o(e.edge(t))})}function o(e){var t=e.width;e.width=e.height,e.height=t}function s(e){d.each(e.nodes(),function(t){l(e.node(t))}),d.each(e.edges(),function(t){var n=e.edge(t);d.each(n.points,l),d.has(n,"y")&&l(n)})}function l(e){e.y=-e.y}function c(e){d.each(e.nodes(),function(t){u(e.node(t))}),d.each(e.edges(),function(t){var n=e.edge(t);d.each(n.points,u),d.has(n,"x")&&u(n)})}function u(e){var t=e.x;e.x=e.y,e.y=t}var d=e("./lodash");t.exports={adjust:i,undo:r}},{"./lodash":10}],5:[function(e,t,n){function i(){var e={};e._next=e._prev=e,this._sentinel=e}function r(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function a(e,t){return"_next"!==e&&"_prev"!==e?t:void 0}t.exports=i,i.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;return t!==e?(r(t),t):void 0},i.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&r(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},i.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,a)),n=n._prev;return"["+e.join(", ")+"]"}},{}],6:[function(e,t,n){function i(e){var t=a.buildLayerMatrix(e),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.each(e.nodes(),function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)}),r.each(e.edges(),function(e){n.setEdge(e.v,e.w,{},e.name)}),r.each(t,function(e,t){var i="layer"+t;n.setNode(i,{rank:"same"}),r.reduce(e,function(e,t){return n.setEdge(e,t,{style:"invis"}),t})}),n}var r=e("./lodash"),a=e("./util"),o=e("./graphlib").Graph;t.exports={debugOrdering:i}},{"./graphlib":7,"./lodash":10,"./util":29}],7:[function(e,t,n){var i;if(e)try{i=e("graphlib")}catch(r){}i||(i=window.graphlib),t.exports=i},{graphlib:void 0}],8:[function(e,t,n){function i(e,t){if(e.nodeCount()<=1)return[];var n=o(e,t||d),i=r(n.graph,n.buckets,n.zeroIdx);return l.flatten(l.map(i,function(t){return e.outEdges(t.v,t.w)}),!0)}function r(e,t,n){for(var i,r=[],o=t[t.length-1],s=t[0];e.nodeCount();){for(;i=s.dequeue();)a(e,t,n,i);for(;i=o.dequeue();)a(e,t,n,i);if(e.nodeCount())for(var l=t.length-2;l>0;--l)if(i=t[l].dequeue()){r=r.concat(a(e,t,n,i,!0));break}}return r}function a(e,t,n,i,r){var a=r?[]:void 0;return l.each(e.inEdges(i.v),function(i){var o=e.edge(i),l=e.node(i.v);r&&a.push({v:i.v,w:i.w}),l.out-=o,s(t,n,l)}),l.each(e.outEdges(i.v),function(i){var r=e.edge(i),a=i.w,o=e.node(a);o["in"]-=r,s(t,n,o)}),e.removeNode(i.v),a}function o(e,t){var n=new c,i=0,r=0;l.each(e.nodes(),function(e){n.setNode(e,{v:e,"in":0,out:0})}),l.each(e.edges(),function(e){var a=n.edge(e.v,e.w)||0,o=t(e),s=a+o;n.setEdge(e.v,e.w,s),r=Math.max(r,n.node(e.v).out+=o),i=Math.max(i,n.node(e.w)["in"]+=o)});var a=l.range(r+i+3).map(function(){return new u}),o=i+1;return l.each(n.nodes(),function(e){s(a,o,n.node(e))}),{graph:n,buckets:a,zeroIdx:o}}function s(e,t,n){n.out?n["in"]?e[n.out-n["in"]+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var l=e("./lodash"),c=e("./graphlib").Graph,u=e("./data/list");t.exports=i;var d=l.constant(1)},{"./data/list":5,"./graphlib":7,"./lodash":10}],9:[function(e,t,n){"use strict";function i(e,t){var n=t&&t.debugTiming?M.time:M.notime;n("layout",function(){var t=n("  buildLayoutGraph",function(){return o(e)});n("  runLayout",function(){r(t,n)}),n("  updateInputGraph",function(){a(e,t)})})}function r(e,t){t("    makeSpaceForEdgeLabels",function(){s(e)}),t("    removeSelfEdges",function(){m(e)}),t("    acyclic",function(){k.run(e)}),t("    nestingGraph.run",function(){A.run(e)}),t("    rank",function(){S(M.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){l(e)}),t("    removeEmptyRanks",function(){$(e)}),t("    nestingGraph.cleanup",function(){A.cleanup(e)}),t("    normalizeRanks",function(){_(e)}),t("    assignRankMinMax",function(){c(e)}),t("    removeEdgeLabelProxies",function(){u(e)}),t("    normalize.run",function(){C.run(e)}),t("    parentDummyChains",function(){T(e)}),t("    addBorderSegments",function(){E(e)}),t("    order",function(){I(e)}),t("    insertSelfEdges",function(){v(e)}),t("    adjustCoordinateSystem",function(){P.adjust(e)}),t("    position",function(){D(e)}),t("    positionSelfEdges",function(){y(e)}),t("    removeBorderNodes",function(){g(e)}),t("    normalize.undo",function(){C.undo(e)}),t("    fixupEdgeLabelCoords",function(){h(e)}),t("    undoCoordinateSystem",function(){P.undo(e)}),t("    translateGraph",function(){d(e)}),t("    assignNodeIntersects",function(){p(e)}),t("    reversePoints",function(){f(e)}),t("    acyclic.undo",function(){k.undo(e)})}function a(e,t){x.each(e.nodes(),function(n){var i=e.node(n),r=t.node(n);i&&(i.x=r.x,i.y=r.y,t.children(n).length&&(i.width=r.width,i.height=r.height))}),x.each(e.edges(),function(n){var i=e.edge(n),r=t.edge(n);i.points=r.points,x.has(r,"x")&&(i.x=r.x,i.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}function o(e){var t=new N({multigraph:!0,compound:!0}),n=w(e.graph());return t.setGraph(x.merge({},O,b(n,j),x.pick(n,L))),x.each(e.nodes(),function(n){var i=w(e.node(n));t.setNode(n,x.defaults(b(i,R),F)),t.setParent(n,e.parent(n))}),x.each(e.edges(),function(n){var i=w(e.edge(n));t.setEdge(n,x.merge({},z,b(i,U),x.pick(i,q)))}),t}function s(e){var t=e.graph();t.ranksep/=2,x.each(e.edges(),function(n){var i=e.edge(n);i.minlen*=2,"c"!==i.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?i.width+=i.labeloffset:i.height+=i.labeloffset)})}function l(e){x.each(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var i=e.node(t.v),r=e.node(t.w),a={rank:(r.rank-i.rank)/2+i.rank,e:t};M.addDummyNode(e,"edge-proxy",a,"_ep")}})}function c(e){var t=0;x.each(e.nodes(),function(n){var i=e.node(n);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,t=x.max(t,i.maxRank))}),e.graph().maxRank=t}function u(e){x.each(e.nodes(),function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function d(e){function t(e){var t=e.x,o=e.y,s=e.width,l=e.height;n=Math.min(n,t-s/2),i=Math.max(i,t+s/2),r=Math.min(r,o-l/2),a=Math.max(a,o+l/2)}var n=Number.POSITIVE_INFINITY,i=0,r=Number.POSITIVE_INFINITY,a=0,o=e.graph(),s=o.marginx||0,l=o.marginy||0;x.each(e.nodes(),function(n){t(e.node(n))}),x.each(e.edges(),function(n){var i=e.edge(n);x.has(i,"x")&&t(i)}),n-=s,r-=l,x.each(e.nodes(),function(t){var i=e.node(t);i.x-=n,i.y-=r}),x.each(e.edges(),function(t){var i=e.edge(t);x.each(i.points,function(e){e.x-=n,e.y-=r}),x.has(i,"x")&&(i.x-=n),x.has(i,"y")&&(i.y-=r)}),o.width=i-n+s,o.height=a-r+l}function p(e){x.each(e.edges(),function(t){var n,i,r=e.edge(t),a=e.node(t.v),o=e.node(t.w);r.points?(n=r.points[0],i=r.points[r.points.length-1]):(r.points=[],n=o,i=a),r.points.unshift(M.intersectRect(a,n)),r.points.push(M.intersectRect(o,i))})}function h(e){x.each(e.edges(),function(t){var n=e.edge(t);if(x.has(n,"x"))switch(("l"===n.labelpos||"r"===n.labelpos)&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}function f(e){x.each(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function g(e){x.each(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),i=e.node(n.borderTop),r=e.node(n.borderBottom),a=e.node(x.last(n.borderLeft)),o=e.node(x.last(n.borderRight));n.width=Math.abs(o.x-a.x),n.height=Math.abs(r.y-i.y),n.x=a.x+n.width/2,n.y=i.y+n.height/2}}),x.each(e.nodes(),function(t){"border"===e.node(t).dummy&&e.removeNode(t)})}function m(e){x.each(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function v(e){var t=M.buildLayerMatrix(e);x.each(t,function(t){var n=0;x.each(t,function(t,i){var r=e.node(t);r.order=i+n,x.each(r.selfEdges,function(t){M.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:r.rank,order:i+ ++n,e:t.e,label:t.label},"_se")}),delete r.selfEdges})})}function y(e){x.each(e.nodes(),function(t){var n=e.node(t);if("selfedge"===n.dummy){var i=e.node(n.e.v),r=i.x+i.width/2,a=i.y,o=n.x-r,s=i.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*o/3,y:a-s},{x:r+5*o/6,y:a-s},{x:r+o,y:a},{x:r+5*o/6,y:a+s},{x:r+2*o/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}})}function b(e,t){return x.mapValues(x.pick(e,t),Number)}function w(e){var t={};return x.each(e,function(e,n){t[n.toLowerCase()]=e}),t}var x=e("./lodash"),k=e("./acyclic"),C=e("./normalize"),S=e("./rank"),_=e("./util").normalizeRanks,T=e("./parent-dummy-chains"),$=e("./util").removeEmptyRanks,A=e("./nesting-graph"),E=e("./add-border-segments"),P=e("./coordinate-system"),I=e("./order"),D=e("./position"),M=e("./util"),N=e("./graphlib").Graph;t.exports=i;var j=["nodesep","edgesep","ranksep","marginx","marginy"],O={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},L=["acyclicer","ranker","rankdir","align"],R=["width","height"],F={width:0,height:0},U=["minlen","weight","width","height","labeloffset"],z={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},q=["labelpos"]},{"./acyclic":2,"./add-border-segments":3,"./coordinate-system":4,"./graphlib":7,"./lodash":10,"./nesting-graph":11,"./normalize":12,"./order":17,"./parent-dummy-chains":22,"./position":24,"./rank":26,"./util":29}],10:[function(e,t,n){var i;if(e)try{i=e("lodash")}catch(r){}i||(i=window._),t.exports=i},{lodash:void 0}],11:[function(e,t,n){function i(e){var t=c.addDummyNode(e,"root",{},"_root"),n=a(e),i=l.max(n)-1,s=2*i+1;e.graph().nestingRoot=t,l.each(e.edges(),function(t){e.edge(t).minlen*=s});var u=o(e)+1;l.each(e.children(),function(a){r(e,t,s,u,i,n,a)}),e.graph().nodeRankFactor=s}function r(e,t,n,i,a,o,s){var u=e.children(s);if(!u.length)return void(s!==t&&e.setEdge(t,s,{weight:0,minlen:n}));var d=c.addBorderNode(e,"_bt"),p=c.addBorderNode(e,"_bb"),h=e.node(s);e.setParent(d,s),h.borderTop=d,e.setParent(p,s),h.borderBottom=p,l.each(u,function(l){r(e,t,n,i,a,o,l);var c=e.node(l),u=c.borderTop?c.borderTop:l,h=c.borderBottom?c.borderBottom:l,f=c.borderTop?i:2*i,g=u!==h?1:a-o[s]+1;e.setEdge(d,u,{weight:f,minlen:g,nestingEdge:!0}),e.setEdge(h,p,{weight:f,minlen:g,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,d,{weight:0,minlen:a+o[s]})}function a(e){function t(i,r){var a=e.children(i);a&&a.length&&l.each(a,function(e){t(e,r+1)}),n[i]=r}var n={};return l.each(e.children(),function(e){t(e,1)}),n}function o(e){return l.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function s(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,l.each(e.edges(),function(t){var n=e.edge(t);n.nestingEdge&&e.removeEdge(t)})}var l=e("./lodash"),c=e("./util");t.exports={run:i,cleanup:s}},{"./lodash":10,"./util":29}],12:[function(e,t,n){"use strict";function i(e){e.graph().dummyChains=[],o.each(e.edges(),function(t){r(e,t)})}function r(e,t){var n=t.v,i=e.node(n).rank,r=t.w,a=e.node(r).rank,o=t.name,l=e.edge(t),c=l.labelRank;if(a!==i+1){e.removeEdge(t);var u,d,p;for(p=0,++i;a>i;++p,++i)l.points=[],d={width:0,height:0,edgeLabel:l,edgeObj:t,rank:i},u=s.addDummyNode(e,"edge",d,"_d"),i===c&&(d.width=l.width,d.height=l.height,d.dummy="edge-label",d.labelpos=l.labelpos),e.setEdge(n,u,{weight:l.weight},o),0===p&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,r,{weight:l.weight},o)}}function a(e){o.each(e.graph().dummyChains,function(t){var n,i=e.node(t),r=i.edgeLabel;for(e.setEdge(i.edgeObj,r);i.dummy;)n=e.successors(t)[0],e.removeNode(t),r.points.push({x:i.x,y:i.y}),"edge-label"===i.dummy&&(r.x=i.x,r.y=i.y,r.width=i.width,r.height=i.height),t=n,i=e.node(t)})}var o=e("./lodash"),s=e("./util");t.exports={run:i,undo:a}},{"./lodash":10,"./util":29}],13:[function(e,t,n){function i(e,t,n){var i,a={};r.each(n,function(n){for(var r,o,s=e.parent(n);s;){if(r=e.parent(s),r?(o=a[r],a[r]=s):(o=i,i=s),o&&o!==s)return void t.setEdge(o,s);s=r}})}var r=e("../lodash");t.exports=i},{"../lodash":10}],14:[function(e,t,n){function i(e,t){return r.map(t,function(t){var n=e.inEdges(t);if(n.length){var i=r.reduce(n,function(t,n){var i=e.edge(n),r=e.node(n.v);return{sum:t.sum+i.weight*r.order,weight:t.weight+i.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}return{v:t}})}var r=e("../lodash");t.exports=i},{"../lodash":10}],15:[function(e,t,n){function i(e,t,n){var i=r(e),s=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(t){return e.node(t)});return a.each(e.nodes(),function(r){var o=e.node(r),l=e.parent(r);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(s.setNode(r),s.setParent(r,l||i),a.each(e[n](r),function(t){var n=t.v===r?t.w:t.v,i=s.edge(n,r),o=a.isUndefined(i)?0:i.weight;s.setEdge(n,r,{weight:e.edge(t).weight+o})}),a.has(o,"minRank")&&s.setNode(r,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),s}function r(e){for(var t;e.hasNode(t=a.uniqueId("_root")););return t}var a=e("../lodash"),o=e("../graphlib").Graph;t.exports=i},{"../graphlib":7,"../lodash":10}],16:[function(e,t,n){"use strict";function i(e,t){for(var n=0,i=1;i<t.length;++i)n+=r(e,t[i-1],t[i]);return n}function r(e,t,n){for(var i=a.zipObject(n,a.map(n,function(e,t){return t})),r=a.flatten(a.map(t,function(t){return a.chain(e.outEdges(t)).map(function(t){return{pos:i[t.w],weight:e.edge(t).weight}}).sortBy("pos").value()}),!0),o=1;o<n.length;)o<<=1;var s=2*o-1;o-=1;var l=a.map(new Array(s),function(){return 0}),c=0;return a.each(r.forEach(function(e){var t=e.pos+o;l[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=l[t+1]),t=t-1>>1,l[t]+=e.weight;c+=e.weight*n})),c}var a=e("../lodash");t.exports=i},{"../lodash":10}],17:[function(e,t,n){"use strict";function i(e){var t=f.maxRank(e),n=r(e,s.range(1,t+1),"inEdges"),i=r(e,s.range(t-1,-1,-1),"outEdges"),u=l(e);o(e,u);for(var d,p=Number.POSITIVE_INFINITY,h=0,g=0;4>g;++h,++g){a(h%2?n:i,h%4>=2),u=f.buildLayerMatrix(e);var m=c(e,u);p>m&&(g=0,d=s.cloneDeep(u),p=m)}o(e,d)}function r(e,t,n){return s.map(t,function(t){return d(e,t,n)})}function a(e,t){var n=new h;s.each(e,function(e){var i=e.graph().root,r=u(e,i,n,t);s.each(r.vs,function(t,n){e.node(t).order=n}),p(e,n,r.vs)})}function o(e,t){s.each(t,function(t){s.each(t,function(t,n){e.node(t).order=n})})}var s=e("../lodash"),l=e("./init-order"),c=e("./cross-count"),u=e("./sort-subgraph"),d=e("./build-layer-graph"),p=e("./add-subgraph-constraints"),h=e("../graphlib").Graph,f=e("../util");t.exports=i},{"../graphlib":7,"../lodash":10,"../util":29,"./add-subgraph-constraints":13,"./build-layer-graph":15,"./cross-count":16,"./init-order":18,"./sort-subgraph":20}],18:[function(e,t,n){"use strict";function i(e){function t(i){if(!r.has(n,i)){n[i]=!0;var a=e.node(i);o[a.rank].push(i),r.each(e.successors(i),t)}}var n={},i=r.filter(e.nodes(),function(t){return!e.children(t).length}),a=r.max(r.map(i,function(t){return e.node(t).rank})),o=r.map(r.range(a+1),function(){return[]}),s=r.sortBy(i,function(t){return e.node(t).rank});return r.each(s,t),o}var r=e("../lodash");t.exports=i},{"../lodash":10}],19:[function(e,t,n){"use strict";function i(e,t){var n={};o.each(e,function(e,t){var i=n[e.v]={indegree:0,"in":[],out:[],vs:[e.v],i:t};o.isUndefined(e.barycenter)||(i.barycenter=e.barycenter,i.weight=e.weight)}),o.each(t.edges(),function(e){var t=n[e.v],i=n[e.w];o.isUndefined(t)||o.isUndefined(i)||(i.indegree++,t.out.push(n[e.w]))});var i=o.filter(n,function(e){return!e.indegree});return r(i)}function r(e){function t(e){return function(t){t.merged||(o.isUndefined(t.barycenter)||o.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&a(e,t)}}function n(t){return function(n){n["in"].push(t),0===--n.indegree&&e.push(n)}}for(var i=[];e.length;){var r=e.pop();i.push(r),o.each(r["in"].reverse(),t(r)),o.each(r.out,n(r))}return o.chain(i).filter(function(e){return!e.merged}).map(function(e){return o.pick(e,["vs","i","barycenter","weight"])}).value()}function a(e,t){var n=0,i=0;e.weight&&(n+=e.barycenter*e.weight,i+=e.weight),t.weight&&(n+=t.barycenter*t.weight,i+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/i,e.weight=i,e.i=Math.min(t.i,e.i),t.merged=!0}var o=e("../lodash");t.exports=i},{"../lodash":10}],20:[function(e,t,n){function i(e,t,n,u){var d=e.children(t),p=e.node(t),h=p?p.borderLeft:void 0,f=p?p.borderRight:void 0,g={};h&&(d=o.filter(d,function(e){return e!==h&&e!==f}));var m=s(e,d);o.each(m,function(t){if(e.children(t.v).length){var r=i(e,t.v,n,u);g[t.v]=r,o.has(r,"barycenter")&&a(t,r)}});var v=l(m,n);r(v,g);var y=c(v,u);if(h&&(y.vs=o.flatten([h,y.vs,f],!0),e.predecessors(h).length)){var b=e.node(e.predecessors(h)[0]),w=e.node(e.predecessors(f)[0]);o.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+b.order+w.order)/(y.weight+2),y.weight+=2}return y}function r(e,t){o.each(e,function(e){e.vs=o.flatten(e.vs.map(function(e){return t[e]?t[e].vs:e}),!0)})}function a(e,t){o.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var o=e("../lodash"),s=e("./barycenter"),l=e("./resolve-conflicts"),c=e("./sort");t.exports=i},{"../lodash":10,"./barycenter":14,"./resolve-conflicts":19,"./sort":21}],21:[function(e,t,n){function i(e,t){var n=s.partition(e,function(e){return o.has(e,"barycenter")}),i=n.lhs,l=o.sortBy(n.rhs,function(e){return-e.i}),c=[],u=0,d=0,p=0;i.sort(a(!!t)),p=r(c,l,p),o.each(i,function(e){p+=e.vs.length,c.push(e.vs),u+=e.barycenter*e.weight,d+=e.weight,p=r(c,l,p)});var h={vs:o.flatten(c,!0)};return d&&(h.barycenter=u/d,h.weight=d),h}function r(e,t,n){for(var i;t.length&&(i=o.last(t)).i<=n;)t.pop(),e.push(i.vs),n++;return n}function a(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var o=e("../lodash"),s=e("../util");t.exports=i},{"../lodash":10,"../util":29}],22:[function(e,t,n){function i(e){var t=a(e);o.each(e.graph().dummyChains,function(n){for(var i=e.node(n),a=i.edgeObj,o=r(e,t,a.v,a.w),s=o.path,l=o.lca,c=0,u=s[c],d=!0;n!==a.w;){if(i=e.node(n),d){for(;(u=s[c])!==l&&e.node(u).maxRank<i.rank;)c++;

u===l&&(d=!1)}if(!d){for(;c<s.length-1&&e.node(u=s[c+1]).minRank<=i.rank;)c++;u=s[c]}e.setParent(n,u),n=e.successors(n)[0]}})}function r(e,t,n,i){var r,a,o=[],s=[],l=Math.min(t[n].low,t[i].low),c=Math.max(t[n].lim,t[i].lim);r=n;do r=e.parent(r),o.push(r);while(r&&(t[r].low>l||c>t[r].lim));for(a=r,r=i;(r=e.parent(r))!==a;)s.push(r);return{path:o.concat(s.reverse()),lca:a}}function a(e){function t(r){var a=i;o.each(e.children(r),t),n[r]={low:a,lim:i++}}var n={},i=0;return o.each(e.children(),t),n}var o=e("./lodash");t.exports=i},{"./lodash":10}],23:[function(e,t,n){"use strict";function i(e,t){function n(t,n){var r=0,s=0,l=t.length,c=v.last(n);return v.each(n,function(t,u){var d=a(e,t),p=d?e.node(d).order:l;(d||t===c)&&(v.each(n.slice(s,u+1),function(t){v.each(e.predecessors(t),function(n){var a=e.node(n),s=a.order;!(r>s||s>p)||a.dummy&&e.node(t).dummy||o(i,n,t)})}),s=u+1,r=p)}),n}var i={};return v.reduce(t,n),i}function r(e,t){function n(t,n,i,a,s){var l;v.each(v.range(n,i),function(n){l=t[n],e.node(l).dummy&&v.each(e.predecessors(l),function(t){var n=e.node(t);n.dummy&&(n.order<a||n.order>s)&&o(r,t,l)})})}function i(t,i){var r,a=-1,o=0;return v.each(i,function(s,l){if("border"===e.node(s).dummy){var c=e.predecessors(s);c.length&&(r=e.node(c[0]).order,n(i,o,l,a,r),o=l,a=r)}n(i,o,i.length,r,t.length)}),i}var r={};return v.reduce(t,i),r}function a(e,t){return e.node(t).dummy?v.find(e.predecessors(t),function(t){return e.node(t).dummy}):void 0}function o(e,t,n){if(t>n){var i=t;t=n,n=i}var r=e[t];r||(e[t]=r={}),r[n]=!0}function s(e,t,n){if(t>n){var i=t;t=n,n=i}return v.has(e[t],n)}function l(e,t,n,i){var r={},a={},o={};return v.each(t,function(e){v.each(e,function(e,t){r[e]=e,a[e]=e,o[e]=t})}),v.each(t,function(e){var t=-1;v.each(e,function(e){var l=i(e);if(l.length){l=v.sortBy(l,function(e){return o[e]});for(var c=(l.length-1)/2,u=Math.floor(c),d=Math.ceil(c);d>=u;++u){var p=l[u];a[e]===e&&t<o[p]&&!s(n,e,p)&&(a[p]=e,a[e]=r[e]=r[p],t=o[p])}}})}),{root:r,align:a}}function c(e,t,n,i,r){function a(e){v.has(c,e)||(c[e]=!0,s[e]=v.reduce(l.inEdges(e),function(e,t){return a(t.v),Math.max(e,s[t.v]+l.edge(t))},0))}function o(t){if(2!==c[t]){c[t]++;var n=e.node(t),i=v.reduce(l.outEdges(t),function(e,t){return o(t.w),Math.min(e,s[t.w]-l.edge(t))},Number.POSITIVE_INFINITY);i!==Number.POSITIVE_INFINITY&&n.borderType!==d&&(s[t]=Math.max(s[t],i))}}var s={},l=u(e,t,n,r),c={};v.each(l.nodes(),a);var d=r?"borderLeft":"borderRight";return v.each(l.nodes(),o),v.each(i,function(e){s[e]=s[n[e]]}),s}function u(e,t,n,i){var r=new y,a=e.graph(),o=g(a.nodesep,a.edgesep,i);return v.each(t,function(t){var i;v.each(t,function(t){var a=n[t];if(r.setNode(a),i){var s=n[i],l=r.edge(s,a);r.setEdge(s,a,Math.max(o(e,t,i),l||0))}i=t})}),r}function d(e,t){return v.min(t,function(t){var n=v.min(t,function(t,n){return t-m(e,n)/2}),i=v.max(t,function(t,n){return t+m(e,n)/2});return i-n})}function p(e,t){var n=v.min(t),i=v.max(t);v.each(["u","d"],function(r){v.each(["l","r"],function(a){var o,s=r+a,l=e[s];l!==t&&(o="l"===a?n-v.min(l):i-v.max(l),o&&(e[s]=v.mapValues(l,function(e){return e+o})))})})}function h(e,t){return v.mapValues(e.ul,function(n,i){if(t)return e[t.toLowerCase()][i];var r=v.sortBy(v.pluck(e,i));return(r[1]+r[2])/2})}function f(e){var t,n=b.buildLayerMatrix(e),a=v.merge(i(e,n),r(e,n)),o={};v.each(["u","d"],function(i){t="u"===i?n:v.values(n).reverse(),v.each(["l","r"],function(n){"r"===n&&(t=v.map(t,function(e){return v.values(e).reverse()}));var r=v.bind("u"===i?e.predecessors:e.successors,e),s=l(e,t,a,r),u=c(e,t,s.root,s.align,"r"===n);"r"===n&&(u=v.mapValues(u,function(e){return-e})),o[i+n]=u})});var s=d(e,o);return p(o,s),h(o,e.graph().align)}function g(e,t,n){return function(i,r,a){var o,s=i.node(r),l=i.node(a),c=0;if(c+=s.width/2,v.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":o=-s.width/2;break;case"r":o=s.width/2}if(o&&(c+=n?o:-o),o=0,c+=(s.dummy?t:e)/2,c+=(l.dummy?t:e)/2,c+=l.width/2,v.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":o=l.width/2;break;case"r":o=-l.width/2}return o&&(c+=n?o:-o),o=0,c}}function m(e,t){return e.node(t).width}var v=e("../lodash"),y=e("../graphlib").Graph,b=e("../util");t.exports={positionX:f,findType1Conflicts:i,findType2Conflicts:r,addConflict:o,hasConflict:s,verticalAlignment:l,horizontalCompaction:c,alignCoordinates:p,findSmallestWidthAlignment:d,balance:h}},{"../graphlib":7,"../lodash":10,"../util":29}],24:[function(e,t,n){"use strict";function i(e){e=o.asNonCompoundGraph(e),r(e),a.each(s(e),function(t,n){e.node(n).x=t})}function r(e){var t=o.buildLayerMatrix(e),n=e.graph().ranksep,i=0;a.each(t,function(t){var r=a.max(a.map(t,function(t){return e.node(t).height}));a.each(t,function(t){e.node(t).y=i+r/2}),i+=r+n})}var a=e("../lodash"),o=e("../util"),s=e("./bk").positionX;t.exports=i},{"../lodash":10,"../util":29,"./bk":23}],25:[function(e,t,n){"use strict";function i(e){var t=new l({directed:!1}),n=e.nodes()[0],i=e.nodeCount();t.setNode(n,{});for(var s,u;r(t,e)<i;)s=a(t,e),u=t.hasNode(s.v)?c(e,s):-c(e,s),o(t,e,u);return t}function r(e,t){function n(i){s.each(t.nodeEdges(i),function(r){var a=r.v,o=i===a?r.w:a;e.hasNode(o)||c(t,r)||(e.setNode(o,{}),e.setEdge(i,o,{}),n(o))})}return s.each(e.nodes(),n),e.nodeCount()}function a(e,t){return s.min(t.edges(),function(n){return e.hasNode(n.v)!==e.hasNode(n.w)?c(t,n):void 0})}function o(e,t,n){s.each(e.nodes(),function(e){t.node(e).rank+=n})}var s=e("../lodash"),l=e("../graphlib").Graph,c=e("./util").slack;t.exports=i},{"../graphlib":7,"../lodash":10,"./util":28}],26:[function(e,t,n){"use strict";function i(e){switch(e.graph().ranker){case"network-simplex":a(e);break;case"tight-tree":r(e);break;case"longest-path":u(e);break;default:a(e)}}function r(e){s(e),l(e)}function a(e){c(e)}var o=e("./util"),s=o.longestPath,l=e("./feasible-tree"),c=e("./network-simplex");t.exports=i;var u=s},{"./feasible-tree":25,"./network-simplex":27,"./util":28}],27:[function(e,t,n){"use strict";function i(e){e=x(e),y(e);var t=m(e);s(t),r(t,e);for(var n,i;n=c(t);)i=u(t,e,n),d(t,e,n,i)}function r(e,t){var n=w(e,e.nodes());n=n.slice(0,n.length-1),g.each(n,function(n){a(e,t,n)})}function a(e,t,n){var i=e.node(n),r=i.parent;e.edge(n,r).cutvalue=o(e,t,n)}function o(e,t,n){var i=e.node(n),r=i.parent,a=!0,o=t.edge(n,r),s=0;return o||(a=!1,o=t.edge(r,n)),s=o.weight,g.each(t.nodeEdges(n),function(i){var o=i.v===n,l=o?i.w:i.v;if(l!==r){var c=o===a,u=t.edge(i).weight;if(s+=c?u:-u,h(e,n,l)){var d=e.edge(n,l).cutvalue;s+=c?-d:d}}}),s}function s(e,t){arguments.length<2&&(t=e.nodes()[0]),l(e,{},1,t)}function l(e,t,n,i,r){var a=n,o=e.node(i);return t[i]=!0,g.each(e.neighbors(i),function(r){g.has(t,r)||(n=l(e,t,n,r,i))}),o.low=a,o.lim=n++,r?o.parent=r:delete o.parent,n}function c(e){return g.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function u(e,t,n){var i=n.v,r=n.w;t.hasEdge(i,r)||(i=n.w,r=n.v);var a=e.node(i),o=e.node(r),s=a,l=!1;a.lim>o.lim&&(s=o,l=!0);var c=g.filter(t.edges(),function(t){return l===f(e,e.node(t.v),s)&&l!==f(e,e.node(t.w),s)});return g.min(c,function(e){return v(t,e)})}function d(e,t,n,i){var a=n.v,o=n.w;e.removeEdge(a,o),e.setEdge(i.v,i.w,{}),s(e),r(e,t),p(e,t)}function p(e,t){var n=g.find(e.nodes(),function(e){return!t.node(e).parent}),i=b(e,n);i=i.slice(1),g.each(i,function(n){var i=e.node(n).parent,r=t.edge(n,i),a=!1;r||(r=t.edge(i,n),a=!0),t.node(n).rank=t.node(i).rank+(a?r.minlen:-r.minlen)})}function h(e,t,n){return e.hasEdge(t,n)}function f(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var g=e("../lodash"),m=e("./feasible-tree"),v=e("./util").slack,y=e("./util").longestPath,b=e("../graphlib").alg.preorder,w=e("../graphlib").alg.postorder,x=e("../util").simplify;t.exports=i,i.initLowLimValues=s,i.initCutValues=r,i.calcCutValue=o,i.leaveEdge=c,i.enterEdge=u,i.exchangeEdges=d},{"../graphlib":7,"../lodash":10,"../util":29,"./feasible-tree":25,"./util":28}],28:[function(e,t,n){"use strict";function i(e){function t(i){var r=e.node(i);if(a.has(n,i))return r.rank;n[i]=!0;var o=a.min(a.map(e.outEdges(i),function(n){return t(n.w)-e.edge(n).minlen}));return o===Number.POSITIVE_INFINITY&&(o=0),r.rank=o}var n={};a.each(e.sources(),t)}function r(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var a=e("../lodash");t.exports={longestPath:i,slack:r}},{"../lodash":10}],29:[function(e,t,n){"use strict";function i(e,t,n,i){var r;do r=v.uniqueId(i);while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r}function r(e){var t=(new y).setGraph(e.graph());return v.each(e.nodes(),function(n){t.setNode(n,e.node(n))}),v.each(e.edges(),function(n){var i=t.edge(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:i.weight+r.weight,minlen:Math.max(i.minlen,r.minlen)})}),t}function a(e){var t=new y({multigraph:e.isMultigraph()}).setGraph(e.graph());return v.each(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),v.each(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function o(e){var t=v.map(e.nodes(),function(t){var n={};return v.each(e.outEdges(t),function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight}),n});return v.zipObject(e.nodes(),t)}function s(e){var t=v.map(e.nodes(),function(t){var n={};return v.each(e.inEdges(t),function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight}),n});return v.zipObject(e.nodes(),t)}function l(e,t){var n=e.x,i=e.y,r=t.x-n,a=t.y-i,o=e.width/2,s=e.height/2;if(!r&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,c;return Math.abs(a)*o>Math.abs(r)*s?(0>a&&(s=-s),l=s*r/a,c=s):(0>r&&(o=-o),l=o,c=o*a/r),{x:n+l,y:i+c}}function c(e){var t=v.map(v.range(h(e)+1),function(){return[]});return v.each(e.nodes(),function(n){var i=e.node(n),r=i.rank;v.isUndefined(r)||(t[r][i.order]=n)}),t}function u(e){var t=v.min(v.map(e.nodes(),function(t){return e.node(t).rank}));v.each(e.nodes(),function(n){var i=e.node(n);v.has(i,"rank")&&(i.rank-=t)})}function d(e){var t=v.min(v.map(e.nodes(),function(t){return e.node(t).rank})),n=[];v.each(e.nodes(),function(i){var r=e.node(i).rank-t;n[r]||(n[r]=[]),n[r].push(i)});var i=0,r=e.graph().nodeRankFactor;v.each(n,function(t,n){v.isUndefined(t)&&n%r!==0?--i:i&&v.each(t,function(t){e.node(t).rank+=i})})}function p(e,t,n,r){var a={width:0,height:0};return arguments.length>=4&&(a.rank=n,a.order=r),i(e,"border",a,t)}function h(e){return v.max(v.map(e.nodes(),function(t){var n=e.node(t).rank;return v.isUndefined(n)?void 0:n}))}function f(e,t){var n={lhs:[],rhs:[]};return v.each(e,function(e){t(e)?n.lhs.push(e):n.rhs.push(e)}),n}function g(e,t){var n=v.now();try{return t()}finally{console.log(e+" time: "+(v.now()-n)+"ms")}}function m(e,t){return t()}var v=e("./lodash"),y=e("./graphlib").Graph;t.exports={addDummyNode:i,simplify:r,asNonCompoundGraph:a,successorWeights:o,predecessorWeights:s,intersectRect:l,buildLayerMatrix:c,normalizeRanks:u,removeEmptyRanks:d,addBorderNode:p,maxRank:h,partition:f,time:g,notime:m}},{"./graphlib":7,"./lodash":10}],30:[function(e,t,n){t.exports="0.7.3"},{}]},{},[1])(1)}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.dagre=e()}}(function(){return function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){t.exports={graphlib:e("./lib/graphlib"),layout:e("./lib/layout"),debug:e("./lib/debug"),util:{time:e("./lib/util").time,notime:e("./lib/util").notime},version:e("./lib/version")}},{"./lib/debug":6,"./lib/graphlib":7,"./lib/layout":9,"./lib/util":29,"./lib/version":30}],2:[function(e,t,n){"use strict";function i(e){function t(e){return function(t){return e.edge(t).weight}}var n="greedy"===e.graph().acyclicer?s(e,t(e)):r(e);o.each(n,function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,o.uniqueId("rev"))})}function r(e){function t(a){o.has(r,a)||(r[a]=!0,i[a]=!0,o.each(e.outEdges(a),function(e){o.has(i,e.w)?n.push(e):t(e.w)}),delete i[a])}var n=[],i={},r={};return o.each(e.nodes(),t),n}function a(e){o.each(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var i=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,i)}})}var o=e("./lodash"),s=e("./greedy-fas");t.exports={run:i,undo:a}},{"./greedy-fas":8,"./lodash":10}],3:[function(e,t,n){function i(e){function t(n){var i=e.children(n),o=e.node(n);if(i.length&&a.each(i,t),a.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var s=o.minRank,l=o.maxRank+1;l>s;++s)r(e,"borderLeft","_bl",n,o,s),r(e,"borderRight","_br",n,o,s)}}a.each(e.children(),t)}function r(e,t,n,i,r,a){var s={width:0,height:0,rank:a,borderType:t},l=r[t][a-1],c=o.addDummyNode(e,"border",s,n);r[t][a]=c,e.setParent(c,i),l&&e.setEdge(l,c,{weight:1})}var a=e("./lodash"),o=e("./util");t.exports=i},{"./lodash":10,"./util":29}],4:[function(e,t,n){"use strict";function i(e){var t=e.graph().rankdir.toLowerCase();("lr"===t||"rl"===t)&&a(e)}function r(e){var t=e.graph().rankdir.toLowerCase();("bt"===t||"rl"===t)&&s(e),("lr"===t||"rl"===t)&&(c(e),a(e))}function a(e){d.each(e.nodes(),function(t){o(e.node(t))}),d.each(e.edges(),function(t){o(e.edge(t))})}function o(e){var t=e.width;e.width=e.height,e.height=t}function s(e){d.each(e.nodes(),function(t){l(e.node(t))}),d.each(e.edges(),function(t){var n=e.edge(t);d.each(n.points,l),d.has(n,"y")&&l(n)})}function l(e){e.y=-e.y}function c(e){d.each(e.nodes(),function(t){u(e.node(t))}),d.each(e.edges(),function(t){var n=e.edge(t);d.each(n.points,u),d.has(n,"x")&&u(n)})}function u(e){var t=e.x;e.x=e.y,e.y=t}var d=e("./lodash");t.exports={adjust:i,undo:r}},{"./lodash":10}],5:[function(e,t,n){function i(){var e={};e._next=e._prev=e,this._sentinel=e}function r(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function a(e,t){return"_next"!==e&&"_prev"!==e?t:void 0}t.exports=i,i.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;return t!==e?(r(t),t):void 0},i.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&r(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},i.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,a)),n=n._prev;return"["+e.join(", ")+"]"}},{}],6:[function(e,t,n){function i(e){var t=a.buildLayerMatrix(e),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.each(e.nodes(),function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)}),r.each(e.edges(),function(e){n.setEdge(e.v,e.w,{},e.name)}),r.each(t,function(e,t){var i="layer"+t;n.setNode(i,{rank:"same"}),r.reduce(e,function(e,t){return n.setEdge(e,t,{style:"invis"}),t})}),n}var r=e("./lodash"),a=e("./util"),o=e("./graphlib").Graph;t.exports={debugOrdering:i}},{"./graphlib":7,"./lodash":10,"./util":29}],7:[function(e,t,n){var i;if(e)try{i=e("graphlib")}catch(r){}i||(i=window.graphlib),t.exports=i},{graphlib:void 0}],8:[function(e,t,n){function i(e,t){if(e.nodeCount()<=1)return[];var n=o(e,t||d),i=r(n.graph,n.buckets,n.zeroIdx);return l.flatten(l.map(i,function(t){return e.outEdges(t.v,t.w)}),!0)}function r(e,t,n){for(var i,r=[],o=t[t.length-1],s=t[0];e.nodeCount();){for(;i=s.dequeue();)a(e,t,n,i);for(;i=o.dequeue();)a(e,t,n,i);if(e.nodeCount())for(var l=t.length-2;l>0;--l)if(i=t[l].dequeue()){r=r.concat(a(e,t,n,i,!0));break}}return r}function a(e,t,n,i,r){var a=r?[]:void 0;return l.each(e.inEdges(i.v),function(i){var o=e.edge(i),l=e.node(i.v);r&&a.push({v:i.v,w:i.w}),l.out-=o,s(t,n,l)}),l.each(e.outEdges(i.v),function(i){var r=e.edge(i),a=i.w,o=e.node(a);o["in"]-=r,s(t,n,o)}),e.removeNode(i.v),a}function o(e,t){var n=new c,i=0,r=0;l.each(e.nodes(),function(e){n.setNode(e,{v:e,"in":0,out:0})}),l.each(e.edges(),function(e){var a=n.edge(e.v,e.w)||0,o=t(e),s=a+o;n.setEdge(e.v,e.w,s),r=Math.max(r,n.node(e.v).out+=o),i=Math.max(i,n.node(e.w)["in"]+=o)});var a=l.range(r+i+3).map(function(){return new u}),o=i+1;return l.each(n.nodes(),function(e){s(a,o,n.node(e))}),{graph:n,buckets:a,zeroIdx:o}}function s(e,t,n){n.out?n["in"]?e[n.out-n["in"]+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var l=e("./lodash"),c=e("./graphlib").Graph,u=e("./data/list");t.exports=i;var d=l.constant(1)},{"./data/list":5,"./graphlib":7,"./lodash":10}],9:[function(e,t,n){"use strict";function i(e,t){var n=t&&t.debugTiming?M.time:M.notime;n("layout",function(){var t=n("  buildLayoutGraph",function(){return o(e)});n("  runLayout",function(){r(t,n)}),n("  updateInputGraph",function(){a(e,t)})})}function r(e,t){t("    makeSpaceForEdgeLabels",function(){s(e)}),t("    removeSelfEdges",function(){m(e)}),t("    acyclic",function(){k.run(e)}),t("    nestingGraph.run",function(){A.run(e)}),t("    rank",function(){S(M.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){l(e)}),t("    removeEmptyRanks",function(){$(e)}),t("    nestingGraph.cleanup",function(){A.cleanup(e)}),t("    normalizeRanks",function(){_(e)}),t("    assignRankMinMax",function(){c(e)}),t("    removeEdgeLabelProxies",function(){u(e)}),t("    normalize.run",function(){C.run(e)}),t("    parentDummyChains",function(){T(e)}),t("    addBorderSegments",function(){E(e)}),t("    order",function(){I(e)}),t("    insertSelfEdges",function(){v(e)}),t("    adjustCoordinateSystem",function(){P.adjust(e)}),t("    position",function(){D(e)}),t("    positionSelfEdges",function(){y(e)}),t("    removeBorderNodes",function(){g(e)}),t("    normalize.undo",function(){C.undo(e)}),t("    fixupEdgeLabelCoords",function(){h(e)}),t("    undoCoordinateSystem",function(){P.undo(e)}),t("    translateGraph",function(){d(e)}),t("    assignNodeIntersects",function(){p(e)}),t("    reversePoints",function(){f(e)}),t("    acyclic.undo",function(){k.undo(e)})}function a(e,t){x.each(e.nodes(),function(n){var i=e.node(n),r=t.node(n);i&&(i.x=r.x,i.y=r.y,t.children(n).length&&(i.width=r.width,i.height=r.height))}),x.each(e.edges(),function(n){var i=e.edge(n),r=t.edge(n);i.points=r.points,x.has(r,"x")&&(i.x=r.x,i.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}function o(e){var t=new N({multigraph:!0,compound:!0}),n=w(e.graph());return t.setGraph(x.merge({},O,b(n,j),x.pick(n,L))),x.each(e.nodes(),function(n){var i=w(e.node(n));t.setNode(n,x.defaults(b(i,R),F)),t.setParent(n,e.parent(n))}),x.each(e.edges(),function(n){var i=w(e.edge(n));t.setEdge(n,x.merge({},z,b(i,U),x.pick(i,q)))}),t}function s(e){var t=e.graph();t.ranksep/=2,x.each(e.edges(),function(n){var i=e.edge(n);i.minlen*=2,"c"!==i.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?i.width+=i.labeloffset:i.height+=i.labeloffset)})}function l(e){x.each(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var i=e.node(t.v),r=e.node(t.w),a={rank:(r.rank-i.rank)/2+i.rank,e:t};M.addDummyNode(e,"edge-proxy",a,"_ep")}})}function c(e){var t=0;x.each(e.nodes(),function(n){var i=e.node(n);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,t=x.max(t,i.maxRank))}),e.graph().maxRank=t}function u(e){x.each(e.nodes(),function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function d(e){function t(e){var t=e.x,o=e.y,s=e.width,l=e.height;n=Math.min(n,t-s/2),i=Math.max(i,t+s/2),r=Math.min(r,o-l/2),a=Math.max(a,o+l/2)}var n=Number.POSITIVE_INFINITY,i=0,r=Number.POSITIVE_INFINITY,a=0,o=e.graph(),s=o.marginx||0,l=o.marginy||0;x.each(e.nodes(),function(n){t(e.node(n))}),x.each(e.edges(),function(n){var i=e.edge(n);x.has(i,"x")&&t(i)}),n-=s,r-=l,x.each(e.nodes(),function(t){var i=e.node(t);i.x-=n,i.y-=r}),x.each(e.edges(),function(t){var i=e.edge(t);x.each(i.points,function(e){e.x-=n,e.y-=r}),x.has(i,"x")&&(i.x-=n),x.has(i,"y")&&(i.y-=r)}),o.width=i-n+s,o.height=a-r+l}function p(e){x.each(e.edges(),function(t){var n,i,r=e.edge(t),a=e.node(t.v),o=e.node(t.w);r.points?(n=r.points[0],i=r.points[r.points.length-1]):(r.points=[],n=o,i=a),r.points.unshift(M.intersectRect(a,n)),r.points.push(M.intersectRect(o,i))})}function h(e){x.each(e.edges(),function(t){var n=e.edge(t);if(x.has(n,"x"))switch(("l"===n.labelpos||"r"===n.labelpos)&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}function f(e){x.each(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function g(e){x.each(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),i=e.node(n.borderTop),r=e.node(n.borderBottom),a=e.node(x.last(n.borderLeft)),o=e.node(x.last(n.borderRight));n.width=Math.abs(o.x-a.x),n.height=Math.abs(r.y-i.y),n.x=a.x+n.width/2,n.y=i.y+n.height/2}}),x.each(e.nodes(),function(t){"border"===e.node(t).dummy&&e.removeNode(t)})}function m(e){x.each(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function v(e){var t=M.buildLayerMatrix(e);x.each(t,function(t){var n=0;x.each(t,function(t,i){var r=e.node(t);r.order=i+n,x.each(r.selfEdges,function(t){M.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:r.rank,order:i+ ++n,e:t.e,label:t.label},"_se")}),delete r.selfEdges})})}function y(e){x.each(e.nodes(),function(t){var n=e.node(t);if("selfedge"===n.dummy){var i=e.node(n.e.v),r=i.x+i.width/2,a=i.y,o=n.x-r,s=i.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*o/3,y:a-s},{x:r+5*o/6,y:a-s},{x:r+o,y:a},{x:r+5*o/6,y:a+s},{x:r+2*o/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}})}function b(e,t){return x.mapValues(x.pick(e,t),Number)}function w(e){var t={};return x.each(e,function(e,n){t[n.toLowerCase()]=e}),t}var x=e("./lodash"),k=e("./acyclic"),C=e("./normalize"),S=e("./rank"),_=e("./util").normalizeRanks,T=e("./parent-dummy-chains"),$=e("./util").removeEmptyRanks,A=e("./nesting-graph"),E=e("./add-border-segments"),P=e("./coordinate-system"),I=e("./order"),D=e("./position"),M=e("./util"),N=e("./graphlib").Graph;t.exports=i;var j=["nodesep","edgesep","ranksep","marginx","marginy"],O={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},L=["acyclicer","ranker","rankdir","align"],R=["width","height"],F={width:0,height:0},U=["minlen","weight","width","height","labeloffset"],z={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},q=["labelpos"]},{"./acyclic":2,"./add-border-segments":3,"./coordinate-system":4,"./graphlib":7,"./lodash":10,"./nesting-graph":11,"./normalize":12,"./order":17,"./parent-dummy-chains":22,"./position":24,"./rank":26,"./util":29}],10:[function(e,t,n){var i;if(e)try{i=e("lodash")}catch(r){}i||(i=window._),t.exports=i},{lodash:void 0}],11:[function(e,t,n){function i(e){var t=c.addDummyNode(e,"root",{},"_root"),n=a(e),i=l.max(n)-1,s=2*i+1;e.graph().nestingRoot=t,l.each(e.edges(),function(t){e.edge(t).minlen*=s});var u=o(e)+1;l.each(e.children(),function(a){r(e,t,s,u,i,n,a)}),e.graph().nodeRankFactor=s}function r(e,t,n,i,a,o,s){var u=e.children(s);if(!u.length)return void(s!==t&&e.setEdge(t,s,{weight:0,minlen:n}));var d=c.addBorderNode(e,"_bt"),p=c.addBorderNode(e,"_bb"),h=e.node(s);e.setParent(d,s),h.borderTop=d,e.setParent(p,s),h.borderBottom=p,l.each(u,function(l){r(e,t,n,i,a,o,l);var c=e.node(l),u=c.borderTop?c.borderTop:l,h=c.borderBottom?c.borderBottom:l,f=c.borderTop?i:2*i,g=u!==h?1:a-o[s]+1;e.setEdge(d,u,{weight:f,minlen:g,nestingEdge:!0}),e.setEdge(h,p,{weight:f,minlen:g,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,d,{weight:0,minlen:a+o[s]})}function a(e){function t(i,r){var a=e.children(i);a&&a.length&&l.each(a,function(e){t(e,r+1)}),n[i]=r}var n={};return l.each(e.children(),function(e){t(e,1)}),n}function o(e){return l.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function s(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,l.each(e.edges(),function(t){var n=e.edge(t);n.nestingEdge&&e.removeEdge(t)})}var l=e("./lodash"),c=e("./util");t.exports={run:i,cleanup:s}},{"./lodash":10,"./util":29}],12:[function(e,t,n){"use strict";function i(e){e.graph().dummyChains=[],o.each(e.edges(),function(t){r(e,t)})}function r(e,t){var n=t.v,i=e.node(n).rank,r=t.w,a=e.node(r).rank,o=t.name,l=e.edge(t),c=l.labelRank;if(a!==i+1){e.removeEdge(t);var u,d,p;for(p=0,++i;a>i;++p,++i)l.points=[],d={width:0,height:0,edgeLabel:l,edgeObj:t,rank:i},u=s.addDummyNode(e,"edge",d,"_d"),i===c&&(d.width=l.width,d.height=l.height,d.dummy="edge-label",d.labelpos=l.labelpos),e.setEdge(n,u,{weight:l.weight},o),0===p&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,r,{weight:l.weight},o)}}function a(e){o.each(e.graph().dummyChains,function(t){var n,i=e.node(t),r=i.edgeLabel;for(e.setEdge(i.edgeObj,r);i.dummy;)n=e.successors(t)[0],e.removeNode(t),r.points.push({x:i.x,y:i.y}),"edge-label"===i.dummy&&(r.x=i.x,r.y=i.y,r.width=i.width,r.height=i.height),t=n,i=e.node(t)})}var o=e("./lodash"),s=e("./util");t.exports={run:i,undo:a}},{"./lodash":10,"./util":29}],13:[function(e,t,n){function i(e,t,n){var i,a={};r.each(n,function(n){for(var r,o,s=e.parent(n);s;){if(r=e.parent(s),r?(o=a[r],a[r]=s):(o=i,i=s),o&&o!==s)return void t.setEdge(o,s);s=r}})}var r=e("../lodash");t.exports=i},{"../lodash":10}],14:[function(e,t,n){function i(e,t){return r.map(t,function(t){var n=e.inEdges(t);if(n.length){var i=r.reduce(n,function(t,n){var i=e.edge(n),r=e.node(n.v);return{sum:t.sum+i.weight*r.order,weight:t.weight+i.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}return{v:t}})}var r=e("../lodash");t.exports=i},{"../lodash":10}],15:[function(e,t,n){function i(e,t,n){var i=r(e),s=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(t){return e.node(t)});return a.each(e.nodes(),function(r){var o=e.node(r),l=e.parent(r);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(s.setNode(r),s.setParent(r,l||i),a.each(e[n](r),function(t){var n=t.v===r?t.w:t.v,i=s.edge(n,r),o=a.isUndefined(i)?0:i.weight;s.setEdge(n,r,{weight:e.edge(t).weight+o})}),a.has(o,"minRank")&&s.setNode(r,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),s}function r(e){for(var t;e.hasNode(t=a.uniqueId("_root")););return t}var a=e("../lodash"),o=e("../graphlib").Graph;t.exports=i},{"../graphlib":7,"../lodash":10}],16:[function(e,t,n){"use strict";function i(e,t){for(var n=0,i=1;i<t.length;++i)n+=r(e,t[i-1],t[i]);return n}function r(e,t,n){for(var i=a.zipObject(n,a.map(n,function(e,t){return t})),r=a.flatten(a.map(t,function(t){return a.chain(e.outEdges(t)).map(function(t){return{pos:i[t.w],weight:e.edge(t).weight}}).sortBy("pos").value()}),!0),o=1;o<n.length;)o<<=1;var s=2*o-1;o-=1;var l=a.map(new Array(s),function(){return 0}),c=0;return a.each(r.forEach(function(e){var t=e.pos+o;l[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=l[t+1]),t=t-1>>1,l[t]+=e.weight;c+=e.weight*n})),c}var a=e("../lodash");t.exports=i},{"../lodash":10}],17:[function(e,t,n){"use strict";function i(e){var t=f.maxRank(e),n=r(e,s.range(1,t+1),"inEdges"),i=r(e,s.range(t-1,-1,-1),"outEdges"),u=l(e);o(e,u);for(var d,p=Number.POSITIVE_INFINITY,h=0,g=0;4>g;++h,++g){a(h%2?n:i,h%4>=2),u=f.buildLayerMatrix(e);var m=c(e,u);p>m&&(g=0,d=s.cloneDeep(u),p=m)}o(e,d)}function r(e,t,n){return s.map(t,function(t){return d(e,t,n)})}function a(e,t){var n=new h;s.each(e,function(e){var i=e.graph().root,r=u(e,i,n,t);s.each(r.vs,function(t,n){e.node(t).order=n}),p(e,n,r.vs)})}function o(e,t){s.each(t,function(t){s.each(t,function(t,n){e.node(t).order=n})})}var s=e("../lodash"),l=e("./init-order"),c=e("./cross-count"),u=e("./sort-subgraph"),d=e("./build-layer-graph"),p=e("./add-subgraph-constraints"),h=e("../graphlib").Graph,f=e("../util");t.exports=i},{"../graphlib":7,"../lodash":10,"../util":29,"./add-subgraph-constraints":13,"./build-layer-graph":15,"./cross-count":16,"./init-order":18,"./sort-subgraph":20}],18:[function(e,t,n){"use strict";function i(e){function t(i){if(!r.has(n,i)){n[i]=!0;var a=e.node(i);o[a.rank].push(i),r.each(e.successors(i),t)}}var n={},i=r.filter(e.nodes(),function(t){return!e.children(t).length}),a=r.max(r.map(i,function(t){return e.node(t).rank})),o=r.map(r.range(a+1),function(){return[]}),s=r.sortBy(i,function(t){return e.node(t).rank});return r.each(s,t),o}var r=e("../lodash");t.exports=i},{"../lodash":10}],19:[function(e,t,n){"use strict";function i(e,t){var n={};o.each(e,function(e,t){var i=n[e.v]={indegree:0,"in":[],out:[],vs:[e.v],i:t};o.isUndefined(e.barycenter)||(i.barycenter=e.barycenter,i.weight=e.weight)}),o.each(t.edges(),function(e){var t=n[e.v],i=n[e.w];o.isUndefined(t)||o.isUndefined(i)||(i.indegree++,t.out.push(n[e.w]))});var i=o.filter(n,function(e){return!e.indegree});return r(i)}function r(e){function t(e){return function(t){t.merged||(o.isUndefined(t.barycenter)||o.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&a(e,t)}}function n(t){return function(n){n["in"].push(t),0===--n.indegree&&e.push(n)}}for(var i=[];e.length;){var r=e.pop();i.push(r),o.each(r["in"].reverse(),t(r)),o.each(r.out,n(r))}return o.chain(i).filter(function(e){return!e.merged}).map(function(e){return o.pick(e,["vs","i","barycenter","weight"])}).value()}function a(e,t){var n=0,i=0;e.weight&&(n+=e.barycenter*e.weight,i+=e.weight),t.weight&&(n+=t.barycenter*t.weight,i+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/i,e.weight=i,e.i=Math.min(t.i,e.i),t.merged=!0}var o=e("../lodash");t.exports=i},{"../lodash":10}],20:[function(e,t,n){function i(e,t,n,u){var d=e.children(t),p=e.node(t),h=p?p.borderLeft:void 0,f=p?p.borderRight:void 0,g={};h&&(d=o.filter(d,function(e){return e!==h&&e!==f}));var m=s(e,d);o.each(m,function(t){if(e.children(t.v).length){var r=i(e,t.v,n,u);g[t.v]=r,o.has(r,"barycenter")&&a(t,r)}});var v=l(m,n);r(v,g);var y=c(v,u);if(h&&(y.vs=o.flatten([h,y.vs,f],!0),e.predecessors(h).length)){var b=e.node(e.predecessors(h)[0]),w=e.node(e.predecessors(f)[0]);o.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+b.order+w.order)/(y.weight+2),y.weight+=2}return y}function r(e,t){o.each(e,function(e){e.vs=o.flatten(e.vs.map(function(e){return t[e]?t[e].vs:e}),!0)})}function a(e,t){o.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var o=e("../lodash"),s=e("./barycenter"),l=e("./resolve-conflicts"),c=e("./sort");t.exports=i},{"../lodash":10,"./barycenter":14,"./resolve-conflicts":19,"./sort":21}],21:[function(e,t,n){function i(e,t){var n=s.partition(e,function(e){return o.has(e,"barycenter")}),i=n.lhs,l=o.sortBy(n.rhs,function(e){return-e.i}),c=[],u=0,d=0,p=0;i.sort(a(!!t)),p=r(c,l,p),o.each(i,function(e){p+=e.vs.length,c.push(e.vs),u+=e.barycenter*e.weight,d+=e.weight,p=r(c,l,p)});var h={vs:o.flatten(c,!0)};return d&&(h.barycenter=u/d,h.weight=d),h}function r(e,t,n){for(var i;t.length&&(i=o.last(t)).i<=n;)t.pop(),e.push(i.vs),n++;return n}function a(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var o=e("../lodash"),s=e("../util");t.exports=i},{"../lodash":10,"../util":29}],22:[function(e,t,n){function i(e){var t=a(e);o.each(e.graph().dummyChains,function(n){for(var i=e.node(n),a=i.edgeObj,o=r(e,t,a.v,a.w),s=o.path,l=o.lca,c=0,u=s[c],d=!0;n!==a.w;){if(i=e.node(n),d){for(;(u=s[c])!==l&&e.node(u).maxRank<i.rank;)c++;u===l&&(d=!1)}if(!d){for(;c<s.length-1&&e.node(u=s[c+1]).minRank<=i.rank;)c++;u=s[c]}e.setParent(n,u),n=e.successors(n)[0]}})}function r(e,t,n,i){var r,a,o=[],s=[],l=Math.min(t[n].low,t[i].low),c=Math.max(t[n].lim,t[i].lim);r=n;do r=e.parent(r),o.push(r);while(r&&(t[r].low>l||c>t[r].lim));for(a=r,r=i;(r=e.parent(r))!==a;)s.push(r);return{path:o.concat(s.reverse()),lca:a}}function a(e){function t(r){var a=i;o.each(e.children(r),t),n[r]={
low:a,lim:i++}}var n={},i=0;return o.each(e.children(),t),n}var o=e("./lodash");t.exports=i},{"./lodash":10}],23:[function(e,t,n){"use strict";function i(e,t){function n(t,n){var r=0,s=0,l=t.length,c=v.last(n);return v.each(n,function(t,u){var d=a(e,t),p=d?e.node(d).order:l;(d||t===c)&&(v.each(n.slice(s,u+1),function(t){v.each(e.predecessors(t),function(n){var a=e.node(n),s=a.order;!(r>s||s>p)||a.dummy&&e.node(t).dummy||o(i,n,t)})}),s=u+1,r=p)}),n}var i={};return v.reduce(t,n),i}function r(e,t){function n(t,n,i,a,s){var l;v.each(v.range(n,i),function(n){l=t[n],e.node(l).dummy&&v.each(e.predecessors(l),function(t){var n=e.node(t);n.dummy&&(n.order<a||n.order>s)&&o(r,t,l)})})}function i(t,i){var r,a=-1,o=0;return v.each(i,function(s,l){if("border"===e.node(s).dummy){var c=e.predecessors(s);c.length&&(r=e.node(c[0]).order,n(i,o,l,a,r),o=l,a=r)}n(i,o,i.length,r,t.length)}),i}var r={};return v.reduce(t,i),r}function a(e,t){return e.node(t).dummy?v.find(e.predecessors(t),function(t){return e.node(t).dummy}):void 0}function o(e,t,n){if(t>n){var i=t;t=n,n=i}var r=e[t];r||(e[t]=r={}),r[n]=!0}function s(e,t,n){if(t>n){var i=t;t=n,n=i}return v.has(e[t],n)}function l(e,t,n,i){var r={},a={},o={};return v.each(t,function(e){v.each(e,function(e,t){r[e]=e,a[e]=e,o[e]=t})}),v.each(t,function(e){var t=-1;v.each(e,function(e){var l=i(e);if(l.length){l=v.sortBy(l,function(e){return o[e]});for(var c=(l.length-1)/2,u=Math.floor(c),d=Math.ceil(c);d>=u;++u){var p=l[u];a[e]===e&&t<o[p]&&!s(n,e,p)&&(a[p]=e,a[e]=r[e]=r[p],t=o[p])}}})}),{root:r,align:a}}function c(e,t,n,i,r){function a(e){v.has(c,e)||(c[e]=!0,s[e]=v.reduce(l.inEdges(e),function(e,t){return a(t.v),Math.max(e,s[t.v]+l.edge(t))},0))}function o(t){if(2!==c[t]){c[t]++;var n=e.node(t),i=v.reduce(l.outEdges(t),function(e,t){return o(t.w),Math.min(e,s[t.w]-l.edge(t))},Number.POSITIVE_INFINITY);i!==Number.POSITIVE_INFINITY&&n.borderType!==d&&(s[t]=Math.max(s[t],i))}}var s={},l=u(e,t,n,r),c={};v.each(l.nodes(),a);var d=r?"borderLeft":"borderRight";return v.each(l.nodes(),o),v.each(i,function(e){s[e]=s[n[e]]}),s}function u(e,t,n,i){var r=new y,a=e.graph(),o=g(a.nodesep,a.edgesep,i);return v.each(t,function(t){var i;v.each(t,function(t){var a=n[t];if(r.setNode(a),i){var s=n[i],l=r.edge(s,a);r.setEdge(s,a,Math.max(o(e,t,i),l||0))}i=t})}),r}function d(e,t){return v.min(t,function(t){var n=v.min(t,function(t,n){return t-m(e,n)/2}),i=v.max(t,function(t,n){return t+m(e,n)/2});return i-n})}function p(e,t){var n=v.min(t),i=v.max(t);v.each(["u","d"],function(r){v.each(["l","r"],function(a){var o,s=r+a,l=e[s];l!==t&&(o="l"===a?n-v.min(l):i-v.max(l),o&&(e[s]=v.mapValues(l,function(e){return e+o})))})})}function h(e,t){return v.mapValues(e.ul,function(n,i){if(t)return e[t.toLowerCase()][i];var r=v.sortBy(v.pluck(e,i));return(r[1]+r[2])/2})}function f(e){var t,n=b.buildLayerMatrix(e),a=v.merge(i(e,n),r(e,n)),o={};v.each(["u","d"],function(i){t="u"===i?n:v.values(n).reverse(),v.each(["l","r"],function(n){"r"===n&&(t=v.map(t,function(e){return v.values(e).reverse()}));var r=v.bind("u"===i?e.predecessors:e.successors,e),s=l(e,t,a,r),u=c(e,t,s.root,s.align,"r"===n);"r"===n&&(u=v.mapValues(u,function(e){return-e})),o[i+n]=u})});var s=d(e,o);return p(o,s),h(o,e.graph().align)}function g(e,t,n){return function(i,r,a){var o,s=i.node(r),l=i.node(a),c=0;if(c+=s.width/2,v.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":o=-s.width/2;break;case"r":o=s.width/2}if(o&&(c+=n?o:-o),o=0,c+=(s.dummy?t:e)/2,c+=(l.dummy?t:e)/2,c+=l.width/2,v.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":o=l.width/2;break;case"r":o=-l.width/2}return o&&(c+=n?o:-o),o=0,c}}function m(e,t){return e.node(t).width}var v=e("../lodash"),y=e("../graphlib").Graph,b=e("../util");t.exports={positionX:f,findType1Conflicts:i,findType2Conflicts:r,addConflict:o,hasConflict:s,verticalAlignment:l,horizontalCompaction:c,alignCoordinates:p,findSmallestWidthAlignment:d,balance:h}},{"../graphlib":7,"../lodash":10,"../util":29}],24:[function(e,t,n){"use strict";function i(e){e=o.asNonCompoundGraph(e),r(e),a.each(s(e),function(t,n){e.node(n).x=t})}function r(e){var t=o.buildLayerMatrix(e),n=e.graph().ranksep,i=0;a.each(t,function(t){var r=a.max(a.map(t,function(t){return e.node(t).height}));a.each(t,function(t){e.node(t).y=i+r/2}),i+=r+n})}var a=e("../lodash"),o=e("../util"),s=e("./bk").positionX;t.exports=i},{"../lodash":10,"../util":29,"./bk":23}],25:[function(e,t,n){"use strict";function i(e){var t=new l({directed:!1}),n=e.nodes()[0],i=e.nodeCount();t.setNode(n,{});for(var s,u;r(t,e)<i;)s=a(t,e),u=t.hasNode(s.v)?c(e,s):-c(e,s),o(t,e,u);return t}function r(e,t){function n(i){s.each(t.nodeEdges(i),function(r){var a=r.v,o=i===a?r.w:a;e.hasNode(o)||c(t,r)||(e.setNode(o,{}),e.setEdge(i,o,{}),n(o))})}return s.each(e.nodes(),n),e.nodeCount()}function a(e,t){return s.min(t.edges(),function(n){return e.hasNode(n.v)!==e.hasNode(n.w)?c(t,n):void 0})}function o(e,t,n){s.each(e.nodes(),function(e){t.node(e).rank+=n})}var s=e("../lodash"),l=e("../graphlib").Graph,c=e("./util").slack;t.exports=i},{"../graphlib":7,"../lodash":10,"./util":28}],26:[function(e,t,n){"use strict";function i(e){switch(e.graph().ranker){case"network-simplex":a(e);break;case"tight-tree":r(e);break;case"longest-path":u(e);break;default:a(e)}}function r(e){s(e),l(e)}function a(e){c(e)}var o=e("./util"),s=o.longestPath,l=e("./feasible-tree"),c=e("./network-simplex");t.exports=i;var u=s},{"./feasible-tree":25,"./network-simplex":27,"./util":28}],27:[function(e,t,n){"use strict";function i(e){e=x(e),y(e);var t=m(e);s(t),r(t,e);for(var n,i;n=c(t);)i=u(t,e,n),d(t,e,n,i)}function r(e,t){var n=w(e,e.nodes());n=n.slice(0,n.length-1),g.each(n,function(n){a(e,t,n)})}function a(e,t,n){var i=e.node(n),r=i.parent;e.edge(n,r).cutvalue=o(e,t,n)}function o(e,t,n){var i=e.node(n),r=i.parent,a=!0,o=t.edge(n,r),s=0;return o||(a=!1,o=t.edge(r,n)),s=o.weight,g.each(t.nodeEdges(n),function(i){var o=i.v===n,l=o?i.w:i.v;if(l!==r){var c=o===a,u=t.edge(i).weight;if(s+=c?u:-u,h(e,n,l)){var d=e.edge(n,l).cutvalue;s+=c?-d:d}}}),s}function s(e,t){arguments.length<2&&(t=e.nodes()[0]),l(e,{},1,t)}function l(e,t,n,i,r){var a=n,o=e.node(i);return t[i]=!0,g.each(e.neighbors(i),function(r){g.has(t,r)||(n=l(e,t,n,r,i))}),o.low=a,o.lim=n++,r?o.parent=r:delete o.parent,n}function c(e){return g.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function u(e,t,n){var i=n.v,r=n.w;t.hasEdge(i,r)||(i=n.w,r=n.v);var a=e.node(i),o=e.node(r),s=a,l=!1;a.lim>o.lim&&(s=o,l=!0);var c=g.filter(t.edges(),function(t){return l===f(e,e.node(t.v),s)&&l!==f(e,e.node(t.w),s)});return g.min(c,function(e){return v(t,e)})}function d(e,t,n,i){var a=n.v,o=n.w;e.removeEdge(a,o),e.setEdge(i.v,i.w,{}),s(e),r(e,t),p(e,t)}function p(e,t){var n=g.find(e.nodes(),function(e){return!t.node(e).parent}),i=b(e,n);i=i.slice(1),g.each(i,function(n){var i=e.node(n).parent,r=t.edge(n,i),a=!1;r||(r=t.edge(i,n),a=!0),t.node(n).rank=t.node(i).rank+(a?r.minlen:-r.minlen)})}function h(e,t,n){return e.hasEdge(t,n)}function f(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var g=e("../lodash"),m=e("./feasible-tree"),v=e("./util").slack,y=e("./util").longestPath,b=e("../graphlib").alg.preorder,w=e("../graphlib").alg.postorder,x=e("../util").simplify;t.exports=i,i.initLowLimValues=s,i.initCutValues=r,i.calcCutValue=o,i.leaveEdge=c,i.enterEdge=u,i.exchangeEdges=d},{"../graphlib":7,"../lodash":10,"../util":29,"./feasible-tree":25,"./util":28}],28:[function(e,t,n){"use strict";function i(e){function t(i){var r=e.node(i);if(a.has(n,i))return r.rank;n[i]=!0;var o=a.min(a.map(e.outEdges(i),function(n){return t(n.w)-e.edge(n).minlen}));return o===Number.POSITIVE_INFINITY&&(o=0),r.rank=o}var n={};a.each(e.sources(),t)}function r(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var a=e("../lodash");t.exports={longestPath:i,slack:r}},{"../lodash":10}],29:[function(e,t,n){"use strict";function i(e,t,n,i){var r;do r=v.uniqueId(i);while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r}function r(e){var t=(new y).setGraph(e.graph());return v.each(e.nodes(),function(n){t.setNode(n,e.node(n))}),v.each(e.edges(),function(n){var i=t.edge(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:i.weight+r.weight,minlen:Math.max(i.minlen,r.minlen)})}),t}function a(e){var t=new y({multigraph:e.isMultigraph()}).setGraph(e.graph());return v.each(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),v.each(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function o(e){var t=v.map(e.nodes(),function(t){var n={};return v.each(e.outEdges(t),function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight}),n});return v.zipObject(e.nodes(),t)}function s(e){var t=v.map(e.nodes(),function(t){var n={};return v.each(e.inEdges(t),function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight}),n});return v.zipObject(e.nodes(),t)}function l(e,t){var n=e.x,i=e.y,r=t.x-n,a=t.y-i,o=e.width/2,s=e.height/2;if(!r&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,c;return Math.abs(a)*o>Math.abs(r)*s?(0>a&&(s=-s),l=s*r/a,c=s):(0>r&&(o=-o),l=o,c=o*a/r),{x:n+l,y:i+c}}function c(e){var t=v.map(v.range(h(e)+1),function(){return[]});return v.each(e.nodes(),function(n){var i=e.node(n),r=i.rank;v.isUndefined(r)||(t[r][i.order]=n)}),t}function u(e){var t=v.min(v.map(e.nodes(),function(t){return e.node(t).rank}));v.each(e.nodes(),function(n){var i=e.node(n);v.has(i,"rank")&&(i.rank-=t)})}function d(e){var t=v.min(v.map(e.nodes(),function(t){return e.node(t).rank})),n=[];v.each(e.nodes(),function(i){var r=e.node(i).rank-t;n[r]||(n[r]=[]),n[r].push(i)});var i=0,r=e.graph().nodeRankFactor;v.each(n,function(t,n){v.isUndefined(t)&&n%r!==0?--i:i&&v.each(t,function(t){e.node(t).rank+=i})})}function p(e,t,n,r){var a={width:0,height:0};return arguments.length>=4&&(a.rank=n,a.order=r),i(e,"border",a,t)}function h(e){return v.max(v.map(e.nodes(),function(t){var n=e.node(t).rank;return v.isUndefined(n)?void 0:n}))}function f(e,t){var n={lhs:[],rhs:[]};return v.each(e,function(e){t(e)?n.lhs.push(e):n.rhs.push(e)}),n}function g(e,t){var n=v.now();try{return t()}finally{console.log(e+" time: "+(v.now()-n)+"ms")}}function m(e,t){return t()}var v=e("./lodash"),y=e("./graphlib").Graph;t.exports={addDummyNode:i,simplify:r,asNonCompoundGraph:a,successorWeights:o,predecessorWeights:s,intersectRect:l,buildLayerMatrix:c,normalizeRanks:u,removeEmptyRanks:d,addBorderNode:p,maxRank:h,partition:f,time:g,notime:m}},{"./graphlib":7,"./lodash":10}],30:[function(e,t,n){t.exports="0.7.3"},{}]},{},[1])(1)}),function(e,t){"use strict";var n,i,r,a=e,o=a.document,s=a.navigator,l=a.setTimeout,c=a.clearTimeout,u=a.setInterval,d=a.clearInterval,p=a.getComputedStyle,h=a.encodeURIComponent,f=a.ActiveXObject,g=a.Error,m=a.Number.parseInt||a.parseInt,v=a.Number.parseFloat||a.parseFloat,y=a.Number.isNaN||a.isNaN,b=a.Date.now,w=a.Object.keys,x=a.Object.defineProperty,k=a.Object.prototype.hasOwnProperty,C=a.Array.prototype.slice,S=function(){var e=function(e){return e};if("function"==typeof a.wrap&&"function"==typeof a.unwrap)try{var t=o.createElement("div"),n=a.unwrap(t);1===t.nodeType&&n&&1===n.nodeType&&(e=a.unwrap)}catch(i){}return e}(),_=function(e){return C.call(e,0)},T=function(){var e,n,i,r,a,o,s=_(arguments),l=s[0]||{};for(e=1,n=s.length;n>e;e++)if(null!=(i=s[e]))for(r in i)k.call(i,r)&&(a=l[r],o=i[r],l!==o&&o!==t&&(l[r]=o));return l},$=function(e){var t,n,i,r;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if("number"==typeof e.length)for(t=[],n=0,i=e.length;i>n;n++)k.call(e,n)&&(t[n]=$(e[n]));else{t={};for(r in e)k.call(e,r)&&(t[r]=$(e[r]))}return t},A=function(e,t){for(var n={},i=0,r=t.length;r>i;i++)t[i]in e&&(n[t[i]]=e[t[i]]);return n},E=function(e,t){var n={};for(var i in e)-1===t.indexOf(i)&&(n[i]=e[i]);return n},P=function(e){if(e)for(var t in e)k.call(e,t)&&delete e[t];return e},I=function(e,t){if(e&&1===e.nodeType&&e.ownerDocument&&t&&(1===t.nodeType&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||9===t.nodeType&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},D=function(e){var t;return"string"==typeof e&&e&&(t=e.split("#")[0].split("?")[0],t=e.slice(0,e.lastIndexOf("/")+1)),t},M=function(e){var t,n;return"string"==typeof e&&e&&(n=e.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]?t=n[1]:(n=e.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]&&(t=n[1]))),t},N=function(){var e,t;try{throw new g}catch(n){t=n}return t&&(e=t.sourceURL||t.fileName||M(t.stack)),e},j=function(){var e,n,i;if(o.currentScript&&(e=o.currentScript.src))return e;if(n=o.getElementsByTagName("script"),1===n.length)return n[0].src||t;if("readyState"in n[0])for(i=n.length;i--;)if("interactive"===n[i].readyState&&(e=n[i].src))return e;return"loading"===o.readyState&&(e=n[n.length-1].src)?e:(e=N())?e:t},O=function(){var e,n,i,r=o.getElementsByTagName("script");for(e=r.length;e--;){if(!(i=r[e].src)){n=null;break}if(i=D(i),null==n)n=i;else if(n!==i){n=null;break}}return n||t},L=function(){var e=D(j())||O()||"";return e+"ZeroClipboard.swf"},R=function(){return null==e.opener&&(!!e.top&&e!=e.top||!!e.parent&&e!=e.parent)}(),F={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},U="11.0.0",z={},q={},B=null,H=0,V=0,W={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},G=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],K=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],X=new RegExp("^flash-("+K.map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),Y=new RegExp("^flash-("+K.slice(1).map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),J={swfPath:L(),trustedDomains:e.location.host?[e.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},Q=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(k.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))J[t]=e[t];else if(null==F.bridge)if("containerId"===t||"swfObjectId"===t){if(!he(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");J[t]=e[t]}else J[t]=e[t];{if("string"!=typeof e||!e)return $(J);if(k.call(J,e))return J[e]}},Z=function(){return Ve(),{browser:A(s,["userAgent","platform","appName"]),flash:E(F,["bridge"]),zeroclipboard:{version:Ge.version,config:Ge.config()}}},ee=function(){return!!(F.disabled||F.outdated||F.sandboxed||F.unavailable||F.degraded||F.deactivated)},te=function(e,i){var r,a,o,s={};if("string"==typeof e&&e)o=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof i)for(r in e)k.call(e,r)&&"string"==typeof r&&r&&"function"==typeof e[r]&&Ge.on(r,e[r]);if(o&&o.length){for(r=0,a=o.length;a>r;r++)e=o[r].replace(/^on/,""),s[e]=!0,z[e]||(z[e]=[]),z[e].push(i);if(s.ready&&F.ready&&Ge.emit({type:"ready"}),s.error){for(r=0,a=K.length;a>r;r++)if(F[K[r].replace(/^flash-/,"")]===!0){Ge.emit({type:"error",name:K[r]});break}n!==t&&Ge.version!==n&&Ge.emit({type:"error",name:"version-mismatch",jsVersion:Ge.version,swfVersion:n})}}return Ge},ne=function(e,t){var n,i,r,a,o;if(0===arguments.length)a=w(z);else if("string"==typeof e&&e)a=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)k.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&Ge.off(n,e[n]);if(a&&a.length)for(n=0,i=a.length;i>n;n++)if(e=a[n].toLowerCase().replace(/^on/,""),o=z[e],o&&o.length)if(t)for(r=o.indexOf(t);-1!==r;)o.splice(r,1),r=o.indexOf(t,r);else o.length=0;return Ge},ie=function(e){var t;return t="string"==typeof e&&e?$(z[e])||null:$(z)},re=function(e){var t,n,i;return e=fe(e),e&&!xe(e)?"ready"===e.type&&F.overdue===!0?Ge.emit({type:"error",name:"flash-overdue"}):(t=T({},e),be.call(this,t),"copy"===e.type&&(i=Ee(q),n=i.data,B=i.formatMap),n):void 0},ae=function(){var e=F.sandboxed;if(Ve(),"boolean"!=typeof F.ready&&(F.ready=!1),F.sandboxed!==e&&F.sandboxed===!0)F.ready=!1,Ge.emit({type:"error",name:"flash-sandboxed"});else if(!Ge.isFlashUnusable()&&null===F.bridge){var t=J.flashLoadTimeout;"number"==typeof t&&t>=0&&(H=l(function(){"boolean"!=typeof F.deactivated&&(F.deactivated=!0),F.deactivated===!0&&Ge.emit({type:"error",name:"flash-deactivated"})},t)),F.overdue=!1,$e()}},oe=function(){Ge.clearData(),Ge.blur(),Ge.emit("destroy"),Ae(),Ge.off()},se=function(e,t){var n;if("object"==typeof e&&e&&"undefined"==typeof t)n=e,Ge.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var i in n)"string"==typeof i&&i&&k.call(n,i)&&"string"==typeof n[i]&&n[i]&&(q[i]=n[i])},le=function(e){"undefined"==typeof e?(P(q),B=null):"string"==typeof e&&k.call(q,e)&&delete q[e]},ce=function(e){return"undefined"==typeof e?$(q):"string"==typeof e&&k.call(q,e)?q[e]:void 0},ue=function(e){if(e&&1===e.nodeType){i&&(Le(i,J.activeClass),i!==e&&Le(i,J.hoverClass)),i=e,Oe(e,J.hoverClass);var t=e.getAttribute("title")||J.title;if("string"==typeof t&&t){var n=Te(F.bridge);n&&n.setAttribute("title",t)}var r=J.forceHandCursor===!0||"pointer"===Re(e,"cursor");Be(r),qe()}},de=function(){var e=Te(F.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px"),i&&(Le(i,J.hoverClass),Le(i,J.activeClass),i=null)},pe=function(){return i||null},he=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},fe=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){t=t.toLowerCase(),!e.target&&(/^(copy|aftercopy|_click)$/.test(t)||"error"===t&&"clipboard-error"===e.name)&&(e.target=r),T(e,{type:t,target:e.target||i||null,relatedTarget:e.relatedTarget||null,currentTarget:F&&F.bridge||null,timeStamp:e.timeStamp||b()||null});var n=W[e.type];return"error"===e.type&&e.name&&n&&(n=n[e.name]),n&&(e.message=n),"ready"===e.type&&T(e,{target:null,version:F.version}),"error"===e.type&&(X.test(e.name)&&T(e,{target:null,minimumVersion:U}),Y.test(e.name)&&T(e,{version:F.version})),"copy"===e.type&&(e.clipboardData={setData:Ge.setData,clearData:Ge.clearData}),"aftercopy"===e.type&&(e=Pe(e,B)),e.target&&!e.relatedTarget&&(e.relatedTarget=ge(e.target)),me(e)}},ge=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?o.getElementById(t):null},me=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var n=e.target,i="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:t,r="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:t,s=Fe(n),l=a.screenLeft||a.screenX||0,c=a.screenTop||a.screenY||0,u=o.body.scrollLeft+o.documentElement.scrollLeft,d=o.body.scrollTop+o.documentElement.scrollTop,p=s.left+("number"==typeof e._stageX?e._stageX:0),h=s.top+("number"==typeof e._stageY?e._stageY:0),f=p-u,g=h-d,m=l+f,v=c+g,y="number"==typeof e.movementX?e.movementX:0,b="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,T(e,{srcElement:n,fromElement:i,toElement:r,screenX:m,screenY:v,pageX:p,pageY:h,clientX:f,clientY:g,x:f,y:g,movementX:y,movementY:b,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},ve=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},ye=function(e,t,n,i){i?l(function(){e.apply(t,n)},0):e.apply(t,n)},be=function(e){if("object"==typeof e&&e&&e.type){var t=ve(e),n=z["*"]||[],i=z[e.type]||[],r=n.concat(i);if(r&&r.length){var o,s,l,c,u,d=this;for(o=0,s=r.length;s>o;o++)l=r[o],c=d,"string"==typeof l&&"function"==typeof a[l]&&(l=a[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(c=l,l=l.handleEvent),"function"==typeof l&&(u=T({},e),ye(l,c,[u],t))}return this}},we=function(e){var t=null;return(R===!1||e&&"error"===e.type&&e.name&&-1!==G.indexOf(e.name))&&(t=!1),t},xe=function(e){var t=e.target||i||null,a="swf"===e._source;switch(delete e._source,e.type){case"error":var o="flash-sandboxed"===e.name||we(e);"boolean"==typeof o&&(F.sandboxed=o),-1!==K.indexOf(e.name)?T(F,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,degraded:"flash-degraded"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1}):"version-mismatch"===e.name&&(n=e.swfVersion,T(F,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),ze();break;case"ready":n=e.swfVersion;var s=F.deactivated===!0;T(F,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:s,ready:!s}),ze();break;case"beforecopy":r=t;break;case"copy":var l,c,u=e.relatedTarget;!q["text/html"]&&!q["text/plain"]&&u&&(c=u.value||u.outerHTML||u.innerHTML)&&(l=u.value||u.textContent||u.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l),c!==l&&e.clipboardData.setData("text/html",c)):!q["text/plain"]&&e.target&&(l=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l));break;case"aftercopy":ke(e),Ge.clearData(),t&&t!==je()&&t.focus&&t.focus();break;case"_mouseover":Ge.focus(t),J.bubbleEvents===!0&&a&&(t&&t!==e.relatedTarget&&!I(e.relatedTarget,t)&&Ce(T({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),Ce(T({},e,{type:"mouseover"})));break;case"_mouseout":Ge.blur(),J.bubbleEvents===!0&&a&&(t&&t!==e.relatedTarget&&!I(e.relatedTarget,t)&&Ce(T({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),Ce(T({},e,{type:"mouseout"})));break;case"_mousedown":Oe(t,J.activeClass),J.bubbleEvents===!0&&a&&Ce(T({},e,{type:e.type.slice(1)}));break;case"_mouseup":Le(t,J.activeClass),J.bubbleEvents===!0&&a&&Ce(T({},e,{type:e.type.slice(1)}));break;case"_click":r=null,J.bubbleEvents===!0&&a&&Ce(T({},e,{type:e.type.slice(1)}));break;case"_mousemove":J.bubbleEvents===!0&&a&&Ce(T({},e,{type:e.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)?!0:void 0},ke=function(e){if(e.errors&&e.errors.length>0){var t=$(e);T(t,{type:"error",name:"clipboard-error"}),delete t.success,l(function(){Ge.emit(t)},0)}},Ce=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||null,i=n&&n.ownerDocument||o,r={view:i.defaultView||a,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:i.createEvent?0:1},s=T(r,e);n&&i.createEvent&&n.dispatchEvent&&(s=[s.type,s.canBubble,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget],t=i.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,s),t._source="js",n.dispatchEvent(t)))}},Se=function(){var e=J.flashLoadTimeout;if("number"==typeof e&&e>=0){var t=Math.min(1e3,e/10),n=J.swfObjectId+"_fallbackContent";V=u(function(){var e=o.getElementById(n);Ue(e)&&(ze(),F.deactivated=null,Ge.emit({type:"error",name:"swf-not-found"}))},t)}},_e=function(){var e=o.createElement("div");return e.id=J.containerId,e.className=J.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+He(J.zIndex),e},Te=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},$e=function(){var e,t=F.bridge,n=Te(t);if(!t){var i=Ne(a.location.host,J),r="never"===i?"none":"all",s=De(T({jsVersion:Ge.version},J)),l=J.swfPath+Ie(J.swfPath,J);n=_e();var c=o.createElement("div");n.appendChild(c),o.body.appendChild(n);var u=o.createElement("div"),d="activex"===F.pluginType;u.innerHTML='<object id="'+J.swfObjectId+'" name="'+J.swfObjectId+'" width="100%" height="100%" '+(d?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(d?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+i+'"/><param name="allowNetworking" value="'+r+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+s+'"/><div id="'+J.swfObjectId+'_fallbackContent">&nbsp;</div></object>',t=u.firstChild,u=null,S(t).ZeroClipboard=Ge,n.replaceChild(t,c),Se()}return t||(t=o[J.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),F.bridge=t||null,t},Ae=function(){var e=F.bridge;if(e){var i=Te(e);i&&("activex"===F.pluginType&&"readyState"in e?(e.style.display="none",function r(){if(4===e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode&&e.parentNode.removeChild(e),i.parentNode&&i.parentNode.removeChild(i)}else l(r,10)}()):(e.parentNode&&e.parentNode.removeChild(e),i.parentNode&&i.parentNode.removeChild(i))),ze(),F.ready=null,F.bridge=null,F.deactivated=null,n=t}},Ee=function(e){var t={},n={};if("object"==typeof e&&e){for(var i in e)if(i&&k.call(e,i)&&"string"==typeof e[i]&&e[i])switch(i.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[i],n.text=i;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[i],n.html=i;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[i],n.rtf=i}return{data:t,formatMap:n}}},Pe=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var i in e)if(k.call(e,i))if("errors"===i){n[i]=e[i]?e[i].slice():[];for(var r=0,a=n[i].length;a>r;r++)n[i][r].format=t[n[i][r].format]}else if("success"!==i&&"data"!==i)n[i]=e[i];else{n[i]={};var o=e[i];for(var s in o)s&&k.call(o,s)&&k.call(t,s)&&(n[i][t[s]]=o[s])}return n},Ie=function(e,t){var n=null==t||t&&t.cacheBust===!0;return n?(-1===e.indexOf("?")?"?":"&")+"noCache="+b():""},De=function(e){var t,n,i,r,o="",s=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?r=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(r=e.trustedDomains)),r&&r.length)for(t=0,n=r.length;n>t;t++)if(k.call(r,t)&&r[t]&&"string"==typeof r[t]){if(i=Me(r[t]),!i)continue;if("*"===i){s.length=0,s.push(i);break}s.push.apply(s,[i,"//"+i,a.location.protocol+"//"+i])}return s.length&&(o+="trustedOrigins="+h(s.join(","))),e.forceEnhancedClipboard===!0&&(o+=(o?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(o+=(o?"&":"")+"swfObjectId="+h(e.swfObjectId)),"string"==typeof e.jsVersion&&e.jsVersion&&(o+=(o?"&":"")+"jsVersion="+h(e.jsVersion)),o},Me=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=-1===t?e:e.slice(t+2);var n=e.indexOf("/");return e=-1===n?e:-1===t||0===n?null:e.slice(0,n),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},Ne=function(){var e=function(e){var t,n,i,r=[];if("string"==typeof e&&(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return r;for(t=0,n=e.length;n>t;t++)if(k.call(e,t)&&(i=Me(e[t]))){if("*"===i){r.length=0,r.push("*");break}-1===r.indexOf(i)&&r.push(i)}return r};return function(t,n){var i=Me(n.swfPath);null===i&&(i=t);var r=e(n.trustedDomains),a=r.length;if(a>0){if(1===a&&"*"===r[0])return"always";if(-1!==r.indexOf(t))return 1===a&&t===i?"sameDomain":"always"}return"never"}}(),je=function(){try{return o.activeElement}catch(e){return null}},Oe=function(e,t){var n,i,r,a=[];if("string"==typeof t&&t&&(a=t.split(/\s+/)),e&&1===e.nodeType&&a.length>0)if(e.classList)for(n=0,i=a.length;i>n;n++)e.classList.add(a[n]);else if(e.hasOwnProperty("className")){for(r=" "+e.className+" ",n=0,i=a.length;i>n;n++)-1===r.indexOf(" "+a[n]+" ")&&(r+=a[n]+" ");e.className=r.replace(/^\s+|\s+$/g,"")}return e},Le=function(e,t){var n,i,r,a=[];if("string"==typeof t&&t&&(a=t.split(/\s+/)),e&&1===e.nodeType&&a.length>0)if(e.classList&&e.classList.length>0)for(n=0,i=a.length;i>n;n++)e.classList.remove(a[n]);else if(e.className){for(r=(" "+e.className+" ").replace(/[\r\n\t]/g," "),n=0,i=a.length;i>n;n++)r=r.replace(" "+a[n]+" "," ");e.className=r.replace(/^\s+|\s+$/g,"")}return e},Re=function(e,t){var n=p(e,null).getPropertyValue(t);return"cursor"!==t||n&&"auto"!==n||"A"!==e.nodeName?n:"pointer"},Fe=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),i=a.pageXOffset,r=a.pageYOffset,s=o.documentElement.clientLeft||0,l=o.documentElement.clientTop||0,c=0,u=0;if("relative"===Re(o.body,"position")){var d=o.body.getBoundingClientRect(),p=o.documentElement.getBoundingClientRect();c=d.left-p.left||0,u=d.top-p.top||0}t.left=n.left+i-s-c,t.top=n.top+r-l-u,t.width="width"in n?n.width:n.right-n.left,t.height="height"in n?n.height:n.bottom-n.top}return t},Ue=function(e){if(!e)return!1;var t=p(e,null),n=v(t.height)>0,i=v(t.width)>0,r=v(t.top)>=0,a=v(t.left)>=0,o=n&&i&&r&&a,s=o?null:Fe(e),l="none"!==t.display&&"collapse"!==t.visibility&&(o||!!s&&(n||s.height>0)&&(i||s.width>0)&&(r||s.top>=0)&&(a||s.left>=0));return l},ze=function(){c(H),H=0,d(V),V=0},qe=function(){var e;if(i&&(e=Te(F.bridge))){var t=Fe(i);T(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+He(J.zIndex)})}},Be=function(e){F.ready===!0&&(F.bridge&&"function"==typeof F.bridge.setHandCursor?F.bridge.setHandCursor(e):F.ready=!1)},He=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||y(e)?"string"==typeof e&&(t=He(m(e,10))):t=e,"number"==typeof t?t:"auto"},Ve=function(t){var n,i,r,a=F.sandboxed,o=null;if(t=t===!0,R===!1)o=!1;else{try{i=e.frameElement||null}catch(s){r={name:s.name,message:s.message}}if(i&&1===i.nodeType&&"IFRAME"===i.nodeName)try{o=i.hasAttribute("sandbox")}catch(s){o=null}else{try{n=document.domain||null}catch(s){n=null}(null===n||r&&"SecurityError"===r.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(r.message.toLowerCase()))&&(o=!0)}}return F.sandboxed=o,a===o||t||We(f),o},We=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function i(e){e&&(l=!0,e.version&&(d=t(e.version)),!d&&e.description&&(d=t(e.description)),e.filename&&(u=n(e.filename)))}var r,a,o,l=!1,c=!1,u=!1,d="";if(s.plugins&&s.plugins.length)r=s.plugins["Shockwave Flash"],
i(r),s.plugins["Shockwave Flash 2.0"]&&(l=!0,d="2.0.0.11");else if(s.mimeTypes&&s.mimeTypes.length)o=s.mimeTypes["application/x-shockwave-flash"],r=o&&o.enabledPlugin,i(r);else if("undefined"!=typeof e){c=!0;try{a=new e("ShockwaveFlash.ShockwaveFlash.7"),l=!0,d=t(a.GetVariable("$version"))}catch(p){try{a=new e("ShockwaveFlash.ShockwaveFlash.6"),l=!0,d="6.0.21"}catch(h){try{a=new e("ShockwaveFlash.ShockwaveFlash"),l=!0,d=t(a.GetVariable("$version"))}catch(f){c=!1}}}}F.disabled=l!==!0,F.outdated=d&&v(d)<v(U),F.version=d||"0.0.0",F.pluginType=u?"pepper":c?"activex":l?"netscape":"unknown"};We(f),Ve(!0);var Ge=function(){return this instanceof Ge?void("function"==typeof Ge._createClient&&Ge._createClient.apply(this,_(arguments))):new Ge};x(Ge,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0}),Ge.config=function(){return Q.apply(this,_(arguments))},Ge.state=function(){return Z.apply(this,_(arguments))},Ge.isFlashUnusable=function(){return ee.apply(this,_(arguments))},Ge.on=function(){return te.apply(this,_(arguments))},Ge.off=function(){return ne.apply(this,_(arguments))},Ge.handlers=function(){return ie.apply(this,_(arguments))},Ge.emit=function(){return re.apply(this,_(arguments))},Ge.create=function(){return ae.apply(this,_(arguments))},Ge.destroy=function(){return oe.apply(this,_(arguments))},Ge.setData=function(){return se.apply(this,_(arguments))},Ge.clearData=function(){return le.apply(this,_(arguments))},Ge.getData=function(){return ce.apply(this,_(arguments))},Ge.focus=Ge.activate=function(){return ue.apply(this,_(arguments))},Ge.blur=Ge.deactivate=function(){return de.apply(this,_(arguments))},Ge.activeElement=function(){return pe.apply(this,_(arguments))};var Ke=0,Xe={},Ye=0,Je={},Qe={};T(J,{autoActivate:!0});var Ze=function(e){var t=this;t.id=""+Ke++,Xe[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),Ge.on("*",function(e){return t.emit(e)}),Ge.on("destroy",function(){t.destroy()}),Ge.create()},et=function(e,i){var r,a,o,s={},l=Xe[this.id],c=l&&l.handlers;if(!l)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof e&&e)o=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof i)for(r in e)k.call(e,r)&&"string"==typeof r&&r&&"function"==typeof e[r]&&this.on(r,e[r]);if(o&&o.length){for(r=0,a=o.length;a>r;r++)e=o[r].replace(/^on/,""),s[e]=!0,c[e]||(c[e]=[]),c[e].push(i);if(s.ready&&F.ready&&this.emit({type:"ready",client:this}),s.error){for(r=0,a=K.length;a>r;r++)if(F[K[r].replace(/^flash-/,"")]){this.emit({type:"error",name:K[r],client:this});break}n!==t&&Ge.version!==n&&this.emit({type:"error",name:"version-mismatch",jsVersion:Ge.version,swfVersion:n})}}return this},tt=function(e,t){var n,i,r,a,o,s=Xe[this.id],l=s&&s.handlers;if(!l)return this;if(0===arguments.length)a=w(l);else if("string"==typeof e&&e)a=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)k.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.off(n,e[n]);if(a&&a.length)for(n=0,i=a.length;i>n;n++)if(e=a[n].toLowerCase().replace(/^on/,""),o=l[e],o&&o.length)if(t)for(r=o.indexOf(t);-1!==r;)o.splice(r,1),r=o.indexOf(t,r);else o.length=0;return this},nt=function(e){var t=null,n=Xe[this.id]&&Xe[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:$(n)),t},it=function(e){if(lt.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=T({},e));var t=T({},fe(e),{client:this});ct.call(this,t)}return this},rt=function(e){if(!Xe[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");e=ut(e);for(var t=0;t<e.length;t++)if(k.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?-1===Je[e[t].zcClippingId].indexOf(this.id)&&Je[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Ye++,Je[e[t].zcClippingId]=[this.id],J.autoActivate===!0&&dt(e[t]));var n=Xe[this.id]&&Xe[this.id].elements;-1===n.indexOf(e[t])&&n.push(e[t])}return this},at=function(e){var t=Xe[this.id];if(!t)return this;var n,i=t.elements;e="undefined"==typeof e?i.slice(0):ut(e);for(var r=e.length;r--;)if(k.call(e,r)&&e[r]&&1===e[r].nodeType){for(n=0;-1!==(n=i.indexOf(e[r],n));)i.splice(n,1);var a=Je[e[r].zcClippingId];if(a){for(n=0;-1!==(n=a.indexOf(this.id,n));)a.splice(n,1);0===a.length&&(J.autoActivate===!0&&pt(e[r]),delete e[r].zcClippingId)}}return this},ot=function(){var e=Xe[this.id];return e&&e.elements?e.elements.slice(0):[]},st=function(){Xe[this.id]&&(this.unclip(),this.off(),delete Xe[this.id])},lt=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=Xe[this.id],n=t&&t.elements,i=!!n&&n.length>0,r=!e.target||i&&-1!==n.indexOf(e.target),a=e.relatedTarget&&i&&-1!==n.indexOf(e.relatedTarget),o=e.client&&e.client===this;return t&&(r||a||o)?!0:!1},ct=function(e){var t=Xe[this.id];if("object"==typeof e&&e&&e.type&&t){var n=ve(e),i=t&&t.handlers["*"]||[],r=t&&t.handlers[e.type]||[],o=i.concat(r);if(o&&o.length){var s,l,c,u,d,p=this;for(s=0,l=o.length;l>s;s++)c=o[s],u=p,"string"==typeof c&&"function"==typeof a[c]&&(c=a[c]),"object"==typeof c&&c&&"function"==typeof c.handleEvent&&(u=c,c=c.handleEvent),"function"==typeof c&&(d=T({},e),ye(c,u,[d],n))}}},ut=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},dt=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=a.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},n=function(n){(n||(n=a.event))&&(t(n),Ge.focus(e))};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),Qe[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},pt=function(e){if(e&&1===e.nodeType){var t=Qe[e.zcClippingId];if("object"==typeof t&&t){for(var n,i,r=["move","leave","enter","out","over"],a=0,o=r.length;o>a;a++)n="mouse"+r[a],i=t[n],"function"==typeof i&&e.removeEventListener(n,i,!1);delete Qe[e.zcClippingId]}}};Ge._createClient=function(){Ze.apply(this,_(arguments))},Ge.prototype.on=function(){return et.apply(this,_(arguments))},Ge.prototype.off=function(){return tt.apply(this,_(arguments))},Ge.prototype.handlers=function(){return nt.apply(this,_(arguments))},Ge.prototype.emit=function(){return it.apply(this,_(arguments))},Ge.prototype.clip=function(){return rt.apply(this,_(arguments))},Ge.prototype.unclip=function(){return at.apply(this,_(arguments))},Ge.prototype.elements=function(){return ot.apply(this,_(arguments))},Ge.prototype.destroy=function(){return st.apply(this,_(arguments))},Ge.prototype.setText=function(e){if(!Xe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ge.setData("text/plain",e),this},Ge.prototype.setHtml=function(e){if(!Xe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ge.setData("text/html",e),this},Ge.prototype.setRichText=function(e){if(!Xe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ge.setData("application/rtf",e),this},Ge.prototype.setData=function(){if(!Xe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ge.setData.apply(this,_(arguments)),this},Ge.prototype.clearData=function(){if(!Xe[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return Ge.clearData.apply(this,_(arguments)),this},Ge.prototype.getData=function(){if(!Xe[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return Ge.getData.apply(this,_(arguments))},"function"==typeof define&&define.amd?define(function(){return Ge}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Ge:e.ZeroClipboard=Ge}(function(){return this||window}()),function(e){e(["jquery"],function(e){return function(){function t(e,t,n){return f({type:x.error,iconClass:g().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=g()),v=e("#"+t.containerId),v.length?v:(n&&(v=d(t)),v)}function i(e,t,n){return f({type:x.info,iconClass:g().iconClasses.info,message:e,optionsOverride:n,title:t})}function r(e){y=e}function a(e,t,n){return f({type:x.success,iconClass:g().iconClasses.success,message:e,optionsOverride:n,title:t})}function o(e,t,n){return f({type:x.warning,iconClass:g().iconClasses.warning,message:e,optionsOverride:n,title:t})}function s(e,t){var i=g();v||n(i),u(e,i,t)||c(i)}function l(t){var i=g();return v||n(i),t&&0===e(":focus",t).length?void m(t):void(v.children().length&&v.remove())}function c(t){for(var n=v.children(),i=n.length-1;i>=0;i--)u(e(n[i]),t)}function u(t,n,i){var r=i&&i.force?i.force:!1;return t&&(r||0===e(":focus",t).length)?(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){m(t)}}),!0):!1}function d(t){return v=e("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert"),v.appendTo(e(t.target)),v}function p(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function h(e){y&&y(e)}function f(t){function i(){o(),l(),c(),u(),d(),s()}function r(){T.hover(x,y),!C.onclick&&C.tapToDismiss&&T.click(f),C.closeButton&&P&&P.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),f(!0)}),C.onclick&&T.click(function(){C.onclick(),f()})}function a(){T.hide(),T[C.showMethod]({duration:C.showDuration,easing:C.showEasing,complete:C.onShown}),C.timeOut>0&&(_=setTimeout(f,C.timeOut),I.maxHideTime=parseFloat(C.timeOut),I.hideEta=(new Date).getTime()+I.maxHideTime,C.progressBar&&(I.intervalId=setInterval(k,10)))}function o(){t.iconClass&&T.addClass(C.toastClass).addClass(S)}function s(){C.newestOnTop?v.prepend(T):v.append(T)}function l(){t.title&&($.append(t.title).addClass(C.titleClass),T.append($))}function c(){t.message&&(A.append(t.message).addClass(C.messageClass),T.append(A))}function u(){C.closeButton&&(P.addClass("toast-close-button").attr("role","button"),T.prepend(P))}function d(){C.progressBar&&(E.addClass("toast-progress"),T.prepend(E))}function p(e,t){if(e.preventDuplicates){if(t.message===b)return!0;b=t.message}return!1}function f(t){return!e(":focus",T).length||t?(clearTimeout(I.intervalId),T[C.hideMethod]({duration:C.hideDuration,easing:C.hideEasing,complete:function(){m(T),C.onHidden&&"hidden"!==D.state&&C.onHidden(),D.state="hidden",D.endTime=new Date,h(D)}})):void 0}function y(){(C.timeOut>0||C.extendedTimeOut>0)&&(_=setTimeout(f,C.extendedTimeOut),I.maxHideTime=parseFloat(C.extendedTimeOut),I.hideEta=(new Date).getTime()+I.maxHideTime)}function x(){clearTimeout(_),I.hideEta=0,T.stop(!0,!0)[C.showMethod]({duration:C.showDuration,easing:C.showEasing})}function k(){var e=(I.hideEta-(new Date).getTime())/I.maxHideTime*100;E.width(e+"%")}var C=g(),S=t.iconClass||C.iconClass;if("undefined"!=typeof t.optionsOverride&&(C=e.extend(C,t.optionsOverride),S=t.optionsOverride.iconClass||S),!p(C,t)){w++,v=n(C,!0);var _=null,T=e("<div/>"),$=e("<div/>"),A=e("<div/>"),E=e("<div/>"),P=e(C.closeHtml),I={intervalId:null,hideEta:null,maxHideTime:null},D={toastId:w,state:"visible",startTime:new Date,options:C,map:t};return i(),a(),r(),h(D),C.debug&&console&&console.log(D),T}}function g(){return e.extend({},p(),k.options)}function m(e){v||(v=n()),e.is(":visible")||(e.remove(),e=null,0===v.children().length&&(v.remove(),b=void 0))}var v,y,b,w=0,x={error:"error",info:"info",success:"success",warning:"warning"},k={clear:s,remove:l,error:t,getContainer:n,info:i,options:{},subscribe:r,success:a,version:"2.1.1",warning:o};return k}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)}),function(e,t){function n(t,n){var r=t.nodeName.toLowerCase();if("area"===r){var a,o=t.parentNode,s=o.name;return t.href&&s&&"map"===o.nodeName.toLowerCase()?(a=e("img[usemap=#"+s+"]")[0],!!a&&i(a)):!1}return(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"==r?t.href||n:n)&&i(t)}function i(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.curCSS(this,"visibility")||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.8.24",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each(function(){var i=this;setTimeout(function(){e(i).focus(),n&&n.call(i)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,r,a=e(this[0]);a.length&&a[0]!==document;){if(i=a.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(a.css("zIndex"),10),!isNaN(r)&&0!==r))return r;a=a.parent()}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function r(t,n,i,r){return e.each(a,function(){n-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,i&&(n-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),r&&(n-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),n}var a="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?s["inner"+i].call(this):this.each(function(){e(this).css(o,r(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?s["outer"+i].call(this,t):this.each(function(){e(this).css(o,r(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===n.offsetHeight,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.curCSS||(e.curCSS=e.css),e.extend(e.ui,{plugin:{add:function(t,n,i){var r=e.ui[t].prototype;for(var a in i)r.plugins[a]=r.plugins[a]||[],r.plugins[a].push([n,i[a]])},call:function(e,t,n){var i=e.plugins[t];if(i&&e.element[0].parentNode)for(var r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)},isOverAxis:function(e,t,n){return e>t&&t+n>e},isOver:function(t,n,i,r,a,o){return e.ui.isOverAxis(t,i,a)&&e.ui.isOverAxis(n,r,o)}}))}(jQuery),function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var i,r=0;null!=(i=t[r]);r++)try{e(i).triggerHandler("remove")}catch(a){}n(t)}}else{var i=e.fn.remove;e.fn.remove=function(t,n){return this.each(function(){return n||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),i.call(e(this),t,n)})}}e.widget=function(t,n,i){var r,a=t.split(".")[0];t=t.split(".")[1],r=a+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r]=function(n){return!!e.data(n,t)},e[a]=e[a]||{},e[a][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var o=new n;o.options=e.extend(!0,{},o.options),e[a][t].prototype=e.extend(!0,o,{namespace:a,widgetName:t,widgetEventPrefix:e[a][t].prototype.widgetEventPrefix||t,widgetBaseClass:r},i),e.widget.bridge(t,e[a][t])},e.widget.bridge=function(n,i){e.fn[n]=function(r){var a="string"==typeof r,o=Array.prototype.slice.call(arguments,1),s=this;return r=!a&&o.length?e.extend.apply(null,[!0,r].concat(o)):r,a&&"_"===r.charAt(0)?s:(this.each(a?function(){var i=e.data(this,n),a=i&&e.isFunction(i[r])?i[r].apply(i,o):i;return a!==i&&a!==t?(s=a,!1):void 0}:function(){var t=e.data(this,n);t?t.option(r||{})._init():e.data(this,n,new i(r,this))}),s)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){e.data(n,this.widgetName,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var i=this;this.element.bind("remove."+this.widgetName,function(){i.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(n,i){var r=n;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof n){if(i===t)return this.options[n];r={},r[n]=i}return this._setOptions(r),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,i){var r,a,o=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(r in a)r in n||(n[r]=a[r]);return this.element.trigger(n,i),!(e.isFunction(o)&&o.call(this.element[0],n,i)===!1||n.isDefaultPrevented())}}}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,r=1==t.which,a="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return r&&!a&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0)):!0}},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.ui=e.ui||{};var n=/left|center|right/,i=/top|center|bottom/,r="center",a={},o=e.fn.position,s=e.fn.offset;e.fn.position=function(t){if(!t||!t.of)return o.apply(this,arguments);t=e.extend({},t);var s,l,c,u=e(t.of),d=u[0],p=(t.collision||"flip").split(" "),h=t.offset?t.offset.split(" "):[0,0];return 9===d.nodeType?(s=u.width(),l=u.height(),c={top:0,left:0}):d.setTimeout?(s=u.width(),l=u.height(),c={top:u.scrollTop(),left:u.scrollLeft()}):d.preventDefault?(t.at="left top",s=l=0,c={top:t.of.pageY,left:t.of.pageX}):(s=u.outerWidth(),l=u.outerHeight(),c=u.offset()),e.each(["my","at"],function(){var e=(t[this]||"").split(" ");1===e.length&&(e=n.test(e[0])?e.concat([r]):i.test(e[0])?[r].concat(e):[r,r]),e[0]=n.test(e[0])?e[0]:r,e[1]=i.test(e[1])?e[1]:r,t[this]=e}),1===p.length&&(p[1]=p[0]),h[0]=parseInt(h[0],10)||0,1===h.length&&(h[1]=h[0]),h[1]=parseInt(h[1],10)||0,"right"===t.at[0]?c.left+=s:t.at[0]===r&&(c.left+=s/2),"bottom"===t.at[1]?c.top+=l:t.at[1]===r&&(c.top+=l/2),c.left+=h[0],c.top+=h[1],this.each(function(){var n,i=e(this),o=i.outerWidth(),u=i.outerHeight(),d=parseInt(e.curCSS(this,"marginLeft",!0))||0,f=parseInt(e.curCSS(this,"marginTop",!0))||0,g=o+d+(parseInt(e.curCSS(this,"marginRight",!0))||0),m=u+f+(parseInt(e.curCSS(this,"marginBottom",!0))||0),v=e.extend({},c);"right"===t.my[0]?v.left-=o:t.my[0]===r&&(v.left-=o/2),"bottom"===t.my[1]?v.top-=u:t.my[1]===r&&(v.top-=u/2),a.fractions||(v.left=Math.round(v.left),v.top=Math.round(v.top)),n={left:v.left-d,top:v.top-f},e.each(["left","top"],function(i,r){e.ui.position[p[i]]&&e.ui.position[p[i]][r](v,{targetWidth:s,targetHeight:l,elemWidth:o,elemHeight:u,collisionPosition:n,collisionWidth:g,collisionHeight:m,offset:h,my:t.my,at:t.at})}),e.fn.bgiframe&&i.bgiframe(),i.offset(e.extend(v,{using:t.using}))})},e.ui.position={fit:{left:function(t,n){var i=e(window),r=n.collisionPosition.left+n.collisionWidth-i.width()-i.scrollLeft();t.left=r>0?t.left-r:Math.max(t.left-n.collisionPosition.left,t.left)},top:function(t,n){var i=e(window),r=n.collisionPosition.top+n.collisionHeight-i.height()-i.scrollTop();t.top=r>0?t.top-r:Math.max(t.top-n.collisionPosition.top,t.top)}},flip:{left:function(t,n){if(n.at[0]!==r){var i=e(window),a=n.collisionPosition.left+n.collisionWidth-i.width()-i.scrollLeft(),o="left"===n.my[0]?-n.elemWidth:"right"===n.my[0]?n.elemWidth:0,s="left"===n.at[0]?n.targetWidth:-n.targetWidth,l=-2*n.offset[0];t.left+=n.collisionPosition.left<0?o+s+l:a>0?o+s+l:0}},top:function(t,n){if(n.at[1]!==r){var i=e(window),a=n.collisionPosition.top+n.collisionHeight-i.height()-i.scrollTop(),o="top"===n.my[1]?-n.elemHeight:"bottom"===n.my[1]?n.elemHeight:0,s="top"===n.at[1]?n.targetHeight:-n.targetHeight,l=-2*n.offset[1];t.top+=n.collisionPosition.top<0?o+s+l:a>0?o+s+l:0}}}},e.offset.setOffset||(e.offset.setOffset=function(t,n){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var i=e(t),r=i.offset(),a=parseInt(e.curCSS(t,"top",!0),10)||0,o=parseInt(e.curCSS(t,"left",!0),10)||0,s={top:n.top-r.top+a,left:n.left-r.left+o};"using"in n?n.using.call(t,s):i.css(s)},e.fn.offset=function(t){var n=this[0];return n&&n.ownerDocument?t?this.each(e.isFunction(t)?function(n){e(this).offset(t.call(this,n,e(this).offset()))}:function(){e.offset.setOffset(this,t)}):s.call(this):null}),e.curCSS||(e.curCSS=e.css),function(){var t,n,i,r,o,s=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(var c in i)t.style[c]=i[c];t.appendChild(l),n=s||document.documentElement,n.insertBefore(t,n.firstChild),l.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",r=e(l).offset(function(e,t){return t}).offset(),t.innerHTML="",n.removeChild(t),o=r.top+r.left+(s?2e3:0),a.fractions=o>21&&22>o}()}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(n.iframeFix&&e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);for(var i=this.element[0],r=!1;i&&(i=i.parentNode);)i==document&&(r=!0);if(!r&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!n||"valid"==this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var a=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){a._trigger("stop",t)!==!1&&a._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"==n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"==n.appendTo?this.element[0].parentNode:n.appendTo),i[0]==this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)
}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var n=e(t.containment),i=n[0];if(!i)return;var r=(n.offset(),"hidden"!=e(i).css("overflow"));this.containment=[(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0),(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0),(r?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(r?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"==t?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),a=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop())*i),left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())*i)}},_generatePosition:function(t){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName),a=t.pageX,o=t.pageY;if(this.originalPosition){var s;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();s=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else s=this.containment;t.pageX-this.offset.click.left<s[0]&&(a=s[0]+this.offset.click.left),t.pageY-this.offset.click.top<s[1]&&(o=s[1]+this.offset.click.top),t.pageX-this.offset.click.left>s[2]&&(a=s[2]+this.offset.click.left),t.pageY-this.offset.click.top>s[3]&&(o=s[3]+this.offset.click.top)}if(n.grid){var c=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=s&&(c-this.offset.click.top<s[1]||c-this.offset.click.top>s[3])?c-this.offset.click.top<s[1]?c+n.grid[1]:c-n.grid[1]:c;var u=n.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;a=s&&(u-this.offset.click.left<s[0]||u-this.offset.click.left>s[2])?u-this.offset.click.left<s[0]?u+n.grid[0]:u-n.grid[0]:u}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.24"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var i=e(this).data("draggable"),r=i.options,a=e.extend({},n,{item:i.element});i.sortables=[],e(r.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,a))})},stop:function(t,n){var i=e(this).data("draggable"),r=e.extend({},n,{item:i.element});e.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))})},drag:function(t,n){var i=e(this).data("draggable"),r=this;e.each(i.sortables,function(a){this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var i=e("body"),r=e(this).data("draggable").options;i.css("cursor")&&(r._cursor=i.css("cursor")),i.css("cursor",r.cursor)},stop:function(t,n){var i=e(this).data("draggable").options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var i=e(n.helper),r=e(this).data("draggable").options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(t,n){var i=e(this).data("draggable").options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var i=e(this).data("draggable");i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName&&(i.overflowOffset=i.scrollParent.offset())},drag:function(t,n){var i=e(this).data("draggable"),r=i.options,a=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(r.axis&&"x"==r.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?i.scrollParent[0].scrollTop=a=i.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-i.overflowOffset.top<r.scrollSensitivity&&(i.scrollParent[0].scrollTop=a=i.scrollParent[0].scrollTop-r.scrollSpeed)),r.axis&&"y"==r.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?i.scrollParent[0].scrollLeft=a=i.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-i.overflowOffset.left<r.scrollSensitivity&&(i.scrollParent[0].scrollLeft=a=i.scrollParent[0].scrollLeft-r.scrollSpeed))):(r.axis&&"x"==r.axis||(t.pageY-e(document).scrollTop()<r.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed))),r.axis&&"y"==r.axis||(t.pageX-e(document).scrollLeft()<r.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var i=e(this).data("draggable"),r=i.options;i.snapElements=[],e(r.snap.constructor!=String?r.snap.items||":data(draggable)":r.snap).each(function(){var t=e(this),n=t.offset();this!=i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){for(var i=e(this).data("draggable"),r=i.options,a=r.snapTolerance,o=n.offset.left,s=o+i.helperProportions.width,l=n.offset.top,c=l+i.helperProportions.height,u=i.snapElements.length-1;u>=0;u--){var d=i.snapElements[u].left,p=d+i.snapElements[u].width,h=i.snapElements[u].top,f=h+i.snapElements[u].height;if(o>d-a&&p+a>o&&l>h-a&&f+a>l||o>d-a&&p+a>o&&c>h-a&&f+a>c||s>d-a&&p+a>s&&l>h-a&&f+a>l||s>d-a&&p+a>s&&c>h-a&&f+a>c){if("inner"!=r.snapMode){var g=Math.abs(h-c)<=a,m=Math.abs(f-l)<=a,v=Math.abs(d-s)<=a,y=Math.abs(p-o)<=a;g&&(n.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top-i.margins.top),m&&(n.position.top=i._convertPositionTo("relative",{top:f,left:0}).top-i.margins.top),v&&(n.position.left=i._convertPositionTo("relative",{top:0,left:d-i.helperProportions.width}).left-i.margins.left),y&&(n.position.left=i._convertPositionTo("relative",{top:0,left:p}).left-i.margins.left)}var b=g||m||v||y;if("outer"!=r.snapMode){var g=Math.abs(h-l)<=a,m=Math.abs(f-c)<=a,v=Math.abs(d-o)<=a,y=Math.abs(p-s)<=a;g&&(n.position.top=i._convertPositionTo("relative",{top:h,left:0}).top-i.margins.top),m&&(n.position.top=i._convertPositionTo("relative",{top:f-i.helperProportions.height,left:0}).top-i.margins.top),v&&(n.position.left=i._convertPositionTo("relative",{top:0,left:d}).left-i.margins.left),y&&(n.position.left=i._convertPositionTo("relative",{top:0,left:p-i.helperProportions.width}).left-i.margins.left)}!i.snapElements[u].snapping&&(g||m||v||y||b)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[u].item})),i.snapElements[u].snapping=g||m||v||y||b}else i.snapElements[u].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[u].item})),i.snapElements[u].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var i=e(this).data("draggable").options,r=e.makeArray(e(i.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(r.length){var a=parseInt(r[0].style.zIndex)||0;e(r).each(function(e){this.style.zIndex=a+e}),this[0].style.zIndex=a+r.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var i=e(n.helper),r=e(this).data("draggable").options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(t,n){var i=e(this).data("draggable").options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(e,t){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,n){"accept"==t&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!=this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!=this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var i=n||e.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]==this.element[0])return!1;var r=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope==i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&e.ui.intersect(i,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(r=!0,!1):void 0}),r?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(i)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.24"}),e.ui.intersect=function(t,n,i){if(!n.offset)return!1;var r=(t.positionAbs||t.position.absolute).left,a=r+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,s=o+t.helperProportions.height,l=n.offset.left,c=l+n.proportions.width,u=n.offset.top,d=u+n.proportions.height;switch(i){case"fit":return r>=l&&c>=a&&o>=u&&d>=s;case"intersect":return l<r+t.helperProportions.width/2&&a-t.helperProportions.width/2<c&&u<o+t.helperProportions.height/2&&s-t.helperProportions.height/2<d;case"pointer":var p=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,h=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,f=e.ui.isOver(h,p,u,l,n.proportions.height,n.proportions.width);return f;case"touch":return(o>=u&&d>=o||s>=u&&d>=s||u>o&&s>d)&&(r>=l&&c>=r||a>=l&&c>=a||l>r&&a>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var i=e.ui.ddmanager.droppables[t.options.scope]||[],r=n?n.type:null,a=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<i.length;o++)if(!(i[o].options.disabled||t&&!i[o].accept.call(i[o].element[0],t.currentItem||t.element))){for(var s=0;s<a.length;s++)if(a[s]==i[o].element[0]){i[o].proportions.height=0;continue e}i[o].visible="none"!=i[o].element.css("display"),i[o].visible&&("mousedown"==r&&i[o]._activate.call(i[o],n),i[o].offset=i[o].element.offset(),i[o].proportions={width:i[o].element[0].offsetWidth,height:i[o].element[0].offsetHeight})}},drop:function(t,n){var i=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n)))}),i},dragStart:function(t,n){t.element.parents(":not(body,html)").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i=e.ui.intersect(t,this,this.options.tolerance),r=i||1!=this.isover?i&&0==this.isover?"isover":null:"isout";if(r){var a;if(this.options.greedy){var o=this.options.scope,s=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===o});s.length&&(a=e.data(s[0],"droppable"),a.greedyChild="isover"==r?1:0)}a&&"isover"==r&&(a.isover=0,a.isout=1,a._out.call(a,n)),this[r]=1,this["isout"==r?"isover":"isout"]=0,this["isover"==r?"_over":"_out"].call(this,n),a&&"isout"==r&&(a.isout=0,a.isover=1,a._over.call(a,n))}}})},dragStop:function(t,n){t.element.parents(":not(body,html)").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var i=this.handles.split(",");this.handles={};for(var r=0;r<i.length;r++){var a=e.trim(i[r]),o="ui-resizable-"+a,s=e('<div class="ui-resizable-handle '+o+'"></div>');s.css({zIndex:n.zIndex}),"se"==a&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[a]=".ui-resizable-"+a,this.element.append(s)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){if(this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var i=e(this.handles[n],this.element),r=0;r=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth();var a=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(a,r),this._proportionallyResize()}e(this.handles[n]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){n.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())},function(){n.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;n.after(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var i in this.handles)e(this.handles[i])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var i=this.options,r=this.element.position(),a=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(a.is(".ui-draggable")||/absolute/.test(a.css("position")))&&a.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy();var o=n(this.helper.css("left")),s=n(this.helper.css("top"));i.containment&&(o+=e(i.containment).scrollLeft()||0,s+=e(i.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:s},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:o,top:s},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof i.aspectRatio?i.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==l?this.axis+"-resize":l),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n=this.helper,i=(this.options,this.originalMousePosition),r=this.axis,a=t.pageX-i.left||0,o=t.pageY-i.top||0,s=this._change[r];if(!s)return!1;{var l=s.apply(this,[t,a,o]);e.browser.msie&&e.browser.version<7,this.sizeDiff}return this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(l=this._updateRatio(l,t)),l=this._respectSize(l,t),this._propagate("resize",t),n.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,i=this;if(this._helper){var r=this._proportionallyResizeElements,a=r.length&&/textarea/i.test(r[0].nodeName),o=a&&e.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,s=a?0:i.sizeDiff.width,l={width:i.helper.width()-s,height:i.helper.height()-o},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;n.animate||this.element.css(e.extend(l,{top:u,left:c})),i.helper.height(i.size.height),i.helper.width(i.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,r,a,o,s=this.options;o={minWidth:i(s.minWidth)?s.minWidth:0,maxWidth:i(s.maxWidth)?s.maxWidth:1/0,minHeight:i(s.minHeight)?s.minHeight:0,maxHeight:i(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,r=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),r>o.minHeight&&(o.minHeight=r),n<o.maxWidth&&(o.maxWidth=n),a<o.maxHeight&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.options;this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=(this.options,this.position),r=this.size,a=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==a&&(e.left=n.left+(r.width-e.width),e.top=null),"nw"==a&&(e.top=n.top+(r.height-e.height),e.left=n.left+(r.width-e.width)),e},_respectSize:function(e,t){var n=(this.helper,this._vBoundaries),r=(this._aspectRatio||t.shiftKey,this.axis),a=i(e.width)&&n.maxWidth&&n.maxWidth<e.width,o=i(e.height)&&n.maxHeight&&n.maxHeight<e.height,s=i(e.width)&&n.minWidth&&n.minWidth>e.width,l=i(e.height)&&n.minHeight&&n.minHeight>e.height;s&&(e.width=n.minWidth),l&&(e.height=n.minHeight),a&&(e.width=n.maxWidth),o&&(e.height=n.maxHeight);var c=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,d=/sw|nw|w/.test(r),p=/nw|ne|n/.test(r);s&&d&&(e.left=c-n.minWidth),a&&d&&(e.left=c-n.maxWidth),l&&p&&(e.top=u-n.minHeight),o&&p&&(e.top=u-n.maxHeight);var h=!e.width&&!e.height;return h&&!e.left&&e.top?e.top=null:h&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var t=this.helper||this.element,n=0;n<this._proportionallyResizeElements.length;n++){var i=this._proportionallyResizeElements[n];if(!this.borderDif){var r=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],a=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(r,function(e,t){var n=parseInt(e,10)||0,i=parseInt(a[t],10)||0;return n+i})}e.browser.msie&&(e(t).is(":hidden")||e(t).parents(":hidden").length)||i.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var i=e.browser.msie&&e.browser.version<7,r=i?1:0,a=i?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+a,height:this.element.outerHeight()+a,position:"absolute",left:this.elementOffset.left-r+"px",top:this.elementOffset.top-r+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var i=(this.options,this.originalSize),r=this.originalPosition;return{left:r.left+t,width:i.width-t}},n:function(e,t,n){var i=(this.options,this.originalSize),r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!=t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.ui.resizable,{version:"1.8.24"}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var i=e(this).data("resizable"),r=i.options,a=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof r.alsoResize||r.alsoResize.parentNode?a(r.alsoResize):r.alsoResize.length?(r.alsoResize=r.alsoResize[0],a(r.alsoResize)):e.each(r.alsoResize,function(e){a(e)})},resize:function(t,n){var i=e(this).data("resizable"),r=i.options,a=i.originalSize,o=i.originalPosition,s={height:i.size.height-a.height||0,width:i.size.width-a.width||0,top:i.position.top-o.top||0,left:i.position.left-o.left||0},l=function(t,i){e(t).each(function(){var t=e(this),r=e(this).data("resizable-alsoresize"),a={},o=i&&i.length?i:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(r[t]||0)+(s[t]||0);n&&n>=0&&(a[t]=n||null)}),t.css(a)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):e.each(r.alsoResize,function(e,t){l(e,t)})},stop:function(t,n){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var i=e(this).data("resizable"),r=i.options,a=i._proportionallyResizeElements,o=a.length&&/textarea/i.test(a[0].nodeName),s=o&&e.ui.hasScroll(a[0],"left")?0:i.sizeDiff.height,l=o?0:i.sizeDiff.width,c={width:i.size.width-l,height:i.size.height-s},u=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,d=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(c,d&&u?{top:d,left:u}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};a&&a.length&&e(a[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,i){var r=e(this).data("resizable"),a=r.options,o=r.element,s=a.containment,l=s instanceof e?s.get(0):/parent/.test(s)?o.parent().get(0):s;if(l)if(r.containerElement=e(l),/document/.test(s)||s==document)r.containerOffset={left:0,top:0},r.containerPosition={left:0,top:0},r.parentData={element:e(document),left:0,top:0,width:e(document).width(),
height:e(document).height()||document.body.parentNode.scrollHeight};else{var c=e(l),u=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){u[e]=n(c.css("padding"+t))}),r.containerOffset=c.offset(),r.containerPosition=c.position(),r.containerSize={height:c.innerHeight()-u[3],width:c.innerWidth()-u[1]};var d=r.containerOffset,p=r.containerSize.height,h=r.containerSize.width,f=e.ui.hasScroll(l,"left")?l.scrollWidth:h,g=e.ui.hasScroll(l)?l.scrollHeight:p;r.parentData={element:l,left:d.left,top:d.top,width:f,height:g}}},resize:function(t,n){var i=e(this).data("resizable"),r=i.options,a=(i.containerSize,i.containerOffset),o=(i.size,i.position),s=i._aspectRatio||t.shiftKey,l={top:0,left:0},c=i.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=a),o.left<(i._helper?a.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-a.left:i.position.left-l.left),s&&(i.size.height=i.size.width/i.aspectRatio),i.position.left=r.helper?a.left:0),o.top<(i._helper?a.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-a.top:i.position.top),s&&(i.size.width=i.size.height*i.aspectRatio),i.position.top=i._helper?a.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top;var u=Math.abs((i._helper?i.offset.left-l.left:i.offset.left-l.left)+i.sizeDiff.width),d=Math.abs((i._helper?i.offset.top-l.top:i.offset.top-a.top)+i.sizeDiff.height),p=i.containerElement.get(0)==i.element.parent().get(0),h=/relative|absolute/.test(i.containerElement.css("position"));p&&h&&(u-=i.parentData.left),u+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-u,s&&(i.size.height=i.size.width/i.aspectRatio)),d+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-d,s&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(t,n){var i=e(this).data("resizable"),r=i.options,a=(i.position,i.containerOffset),o=i.containerPosition,s=i.containerElement,l=e(i.helper),c=l.offset(),u=l.outerWidth()-i.sizeDiff.width,d=l.outerHeight()-i.sizeDiff.height;i._helper&&!r.animate&&/relative/.test(s.css("position"))&&e(this).css({left:c.left-o.left-a.left,width:u,height:d}),i._helper&&!r.animate&&/static/.test(s.css("position"))&&e(this).css({left:c.left-o.left-a.left,width:u,height:d})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var i=e(this).data("resizable"),r=i.options,a=i.size;i.ghost=i.originalElement.clone(),i.ghost.css({opacity:.25,display:"block",position:"relative",height:a.height,width:a.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof r.ghost?r.ghost:""),i.ghost.appendTo(i.helper)},resize:function(t,n){{var i=e(this).data("resizable");i.options}i.ghost&&i.ghost.css({position:"relative",height:i.size.height,width:i.size.width})},stop:function(t,n){{var i=e(this).data("resizable");i.options}i.ghost&&i.helper&&i.helper.get(0).removeChild(i.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){{var i=e(this).data("resizable"),r=i.options,a=i.size,o=i.originalSize,s=i.originalPosition,l=i.axis;r._aspectRatio||t.shiftKey}r.grid="number"==typeof r.grid?[r.grid,r.grid]:r.grid;var c=Math.round((a.width-o.width)/(r.grid[0]||1))*(r.grid[0]||1),u=Math.round((a.height-o.height)/(r.grid[1]||1))*(r.grid[1]||1);/^(se|s|e)$/.test(l)?(i.size.width=o.width+c,i.size.height=o.height+u):/^(ne)$/.test(l)?(i.size.width=o.width+c,i.size.height=o.height+u,i.position.top=s.top-u):/^(sw)$/.test(l)?(i.size.width=o.width+c,i.size.height=o.height+u,i.position.left=s.left-c):(i.size.width=o.width+c,i.size.height=o.height+u,i.position.top=s.top-u,i.position.left=s.left-c)}});var n=function(e){return parseInt(e,10)||0},i=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.addClass("ui-selectee"),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(t){var n=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var i=this.options;this.selectees=e(i.filter,this.element[0]),this._trigger("start",t),e(i.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=e.data(this,"selectable-item");i.startselected=!0,t.metaKey||t.ctrlKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element}))}),e(t.target).parents().andSelf().each(function(){var i=e.data(this,"selectable-item");if(i){var r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected");return i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1}})}},_mouseDrag:function(t){var n=this;if(this.dragged=!0,!this.options.disabled){var i=this.options,r=this.opos[0],a=this.opos[1],o=t.pageX,s=t.pageY;if(r>o){var l=o;o=r,r=l}if(a>s){var l=s;s=a,a=l}return this.helper.css({left:r,top:a,width:o-r,height:s-a}),this.selectees.each(function(){var l=e.data(this,"selectable-item");if(l&&l.element!=n.element[0]){var c=!1;"touch"==i.tolerance?c=!(l.left>o||l.right<r||l.top>s||l.bottom<a):"fit"==i.tolerance&&(c=l.left>r&&l.right<o&&l.top>a&&l.bottom<s),c?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,n._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&((t.metaKey||t.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),n._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&(t.metaKey||t.ctrlKey||l.startselected||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,n._trigger("unselecting",t,{unselecting:l.element}))))}}),!1}},_mouseStop:function(t){var n=this;this.dragged=!1;this.options;return e(".ui-unselecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",t,{unselected:i.element})}),e(".ui-selecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",t,{selected:i.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.extend(e.ui.selectable,{version:"1.8.24"})}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){e.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget()[n?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);{var r=null,a=this;e(t.target).parents().each(function(){return e.data(this,i.widgetName+"-item")==a?(r=e(this),!1):void 0})}if(e.data(t.target,i.widgetName+"-item")==a&&(r=e(t.target)),!r)return!1;if(this.options.handle&&!n){var o=!1;if(e(this.options.handle,r).find("*").andSelf().each(function(){this==t.target&&(o=!0)}),!o)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,i){var r=this.options,a=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",r.cursor)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(var o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,a._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var n=this.options,i=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),i!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var r=this.items.length-1;r>=0;r--){var a=this.items[r],o=a.item[0],s=this._intersectsWithPointer(a);if(s&&a.instance===this.currentContainer&&o!=this.currentItem[0]&&this.placeholder[1==s?"next":"prev"]()[0]!=o&&!e.ui.contains(this.placeholder[0],o)&&("semi-dynamic"==this.options.type?!e.ui.contains(this.element[0],o):!0)){if(this.direction=1==s?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(a))break;this._rearrange(t,a),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=i.placeholder.offset();i.reverting=!0,e(this.helper).animate({left:r.left-this.offset.parent.left-i.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-i.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("deactivate",null,t._uiHash(this)),this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",null,t._uiHash(this)),this.containers[n].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,a=e.left,o=a+e.width,s=e.top,l=s+e.height,c=this.offset.click.top,u=this.offset.click.left,d=i+c>s&&l>i+c&&t+u>a&&o>t+u;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:a<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&s<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var n="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=n&&i,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return r?this.floating?o&&"right"==o||"down"==a?2:1:a&&("down"==a?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),r=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"==a&&i||"left"==a&&!i:r&&("down"==r&&n||"up"==r&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],i=[],r=this._connectWith();if(r&&t)for(var a=r.length-1;a>=0;a--)for(var o=e(r[a]),s=o.length-1;s>=0;s--){var l=e.data(o[s],this.widgetName);l&&l!=this&&!l.options.disabled&&i.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var a=i.length-1;a>=0;a--)i[a][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data("+this.widgetName+"-item)"),t=0;t<this.items.length;t++)for(var n=0;n<e.length;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],r=this._connectWith();if(r&&this.ready)for(var a=r.length-1;a>=0;a--)for(var o=e(r[a]),s=o.length-1;s>=0;s--){var l=e.data(o[s],this.widgetName);l&&l!=this&&!l.options.disabled&&(i.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var a=i.length-1;a>=0;a--)for(var c=i[a][1],u=i[a][0],s=0,d=u.length;d>s;s++){var p=e(u[s]);p.data(this.widgetName+"-item",c),n.push({item:p,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var i=this.items[n];if(i.instance==this.currentContainer||!this.currentContainer||i.item[0]==this.currentItem[0]){var r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item;t||(i.width=r.outerWidth(),i.height=r.outerHeight());var a=r.offset();i.left=a.left,i.top=a.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var a=this.containers[n].element.offset();this.containers[n].containerCache.left=a.left,this.containers[n].containerCache.top=a.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){var n=t||this,i=n.options;if(!i.placeholder||i.placeholder.constructor==String){var r=i.placeholder;i.placeholder={element:function(){var t=e(document.createElement(n.currentItem[0].nodeName)).addClass(r||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(t.style.visibility="hidden"),t},update:function(e,t){(!r||i.forcePlaceholderSize)&&(t.height()||t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}}n.placeholder=e(i.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),i.placeholder.update(n,n.placeholder)},_contactContainers:function(t){for(var n=null,i=null,r=this.containers.length-1;r>=0;r--)if(!e.ui.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(n&&e.ui.contains(this.containers[r].element[0],n.element[0]))continue;n=this.containers[r],i=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(n)if(1===this.containers.length)this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1;else if(this.currentContainer!=this.containers[i]){for(var a=1e4,o=null,s=this.positionAbs[this.containers[i].floating?"left":"top"],l=this.items.length-1;l>=0;l--)if(e.ui.contains(this.containers[i].element[0],this.items[l].item[0])){var c=this.containers[i].floating?this.items[l].item.offset().left:this.items[l].item.offset().top;Math.abs(c-s)<a&&(a=Math.abs(c-s),o=this.items[l],this.direction=c-s>0?"down":"up")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[i],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[i].element,!0),this._trigger("change",t,this._uiHash()),this.containers[i]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"==n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!=n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(""==i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],i=e(t.containment).offset(),r="hidden"!=e(n).css("overflow");this.containment=[i.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,i.left+(r?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(r?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"==t?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),a=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop())*i),left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())*i)}},_generatePosition:function(t){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var a=t.pageX,o=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid)){var s=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment&&(s-this.offset.click.top<this.containment[1]||s-this.offset.click.top>this.containment[3])?s-this.offset.click.top<this.containment[1]?s+n.grid[1]:s-n.grid[1]:s;var l=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0];a=this.containment&&(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l-this.offset.click.left<this.containment[0]?l+n.grid[0]:l-n.grid[0]:l}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this,a=this.counter;window.setTimeout(function(){a==r.counter&&r.refreshPositions(!i)},0)},_clear:function(t,n){this.reverting=!1;var i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var r in this._storedCSS)("auto"==this._storedCSS[r]||"static"==this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||n||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var r=this.containers.length-1;r>=0;r--)n||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!n){for(var r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.24"})}(jQuery),function(e,t){e.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t=this,n=t.options;if(t.running=0,t.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),t.headers=t.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){n.disabled||e(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){
n.disabled||e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){n.disabled||e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){n.disabled||e(this).removeClass("ui-state-focus")}),t.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),n.navigation){var i=t.element.find("a").filter(n.navigationFilter).eq(0);if(i.length){var r=i.closest(".ui-accordion-header");t.active=r.length?r:i.closest(".ui-accordion-content").prev()}}t.active=t._findActive(t.active||n.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),t.active.next().addClass("ui-accordion-content-active"),t._createIcons(),t.resize(),t.element.attr("role","tablist"),t.headers.attr("role","tab").bind("keydown.accordion",function(e){return t._keydown(e)}).next().attr("role","tabpanel"),t.headers.not(t.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),t.active.length?t.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):t.headers.eq(0).attr("tabIndex",0),e.browser.safari||t.headers.find("a").attr("tabIndex",-1),n.event&&t.headers.bind(n.event.split(" ").join(".accordion ")+".accordion",function(e){t._clickHandler.call(t,e,this),e.preventDefault()})},_createIcons:function(){var t=this.options;t.icons&&(e("<span></span>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var t=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var n=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(t.autoHeight||t.fillHeight)&&n.css("height",""),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments),"active"==t&&this.activate(n),"icons"==t&&(this._destroyIcons(),n&&this._createIcons()),"disabled"==t&&this.headers.add(this.headers.next())[n?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(t){if(!(this.options.disabled||t.altKey||t.ctrlKey)){var n=e.ui.keyCode,i=this.headers.length,r=this.headers.index(t.target),a=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:a=this.headers[(r+1)%i];break;case n.LEFT:case n.UP:a=this.headers[(r-1+i)%i];break;case n.SPACE:case n.ENTER:this._clickHandler({target:t.target},t.target),t.preventDefault()}return a?(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),!1):!0}},resize:function(){var t,n=this.options;if(n.fillSpace){if(e.browser.msie){var i=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}t=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",i),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else n.autoHeight&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).height("").height())}).height(t));return this},activate:function(e){this.options.active=e;var t=this._findActive(e)[0];return this._clickHandler({target:t},t),this},_findActive:function(t){return t?"number"==typeof t?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,n){var i=this.options;if(!i.disabled){if(!t.target){if(!i.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(i.icons.headerSelected).addClass(i.icons.header),this.active.next().addClass("ui-accordion-content-active");var r=this.active.next(),a={options:i,newHeader:e([]),oldHeader:i.active,newContent:e([]),oldContent:r},o=this.active=e([]);return void this._toggle(o,r,a)}var s=e(t.currentTarget||n),l=s[0]===this.active[0];if(i.active=i.collapsible&&l?!1:this.headers.index(s),!(this.running||!i.collapsible&&l)){var c=this.active,o=s.next(),r=this.active.next(),a={options:i,newHeader:l&&i.collapsible?e([]):s,oldHeader:this.active,newContent:l&&i.collapsible?e([]):o,oldContent:r},u=this.headers.index(this.active[0])>this.headers.index(s[0]);this.active=l?e([]):s,this._toggle(o,r,a,l,u),c.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(i.icons.headerSelected).addClass(i.icons.header),l||(s.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(i.icons.header).addClass(i.icons.headerSelected),s.next().addClass("ui-accordion-content-active"))}}},_toggle:function(t,n,i,r,a){var o=this,s=o.options;o.toShow=t,o.toHide=n,o.data=i;var l=function(){return o?o._completed.apply(o,arguments):void 0};if(o._trigger("changestart",null,o.data),o.running=0===n.size()?t.size():n.size(),s.animated){var c={};c=s.collapsible&&r?{toShow:e([]),toHide:n,complete:l,down:a,autoHeight:s.autoHeight||s.fillSpace}:{toShow:t,toHide:n,complete:l,down:a,autoHeight:s.autoHeight||s.fillSpace},s.proxied||(s.proxied=s.animated),s.proxiedDuration||(s.proxiedDuration=s.duration),s.animated=e.isFunction(s.proxied)?s.proxied(c):s.proxied,s.duration=e.isFunction(s.proxiedDuration)?s.proxiedDuration(c):s.proxiedDuration;var u=e.ui.accordion.animations,d=s.duration,p=s.animated;!p||u[p]||e.easing[p]||(p="slide"),u[p]||(u[p]=function(e){this.slide(e,{easing:p,duration:d||700})}),u[p](c)}else s.collapsible&&r?t.toggle():(n.hide(),t.show()),l(!0);n.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),t.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(e){this.running=e?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),e.extend(e.ui.accordion,{version:"1.8.24",animations:{slide:function(t,n){if(t=e.extend({easing:"swing",duration:300},t,n),!t.toHide.size())return void t.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},t);if(!t.toShow.size())return void t.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},t);var i,r=t.toShow.css("overflow"),a=0,o={},s={},l=["height","paddingTop","paddingBottom"],c=t.toShow;i=c[0].style.width,c.width(c.parent().width()-parseFloat(c.css("paddingLeft"))-parseFloat(c.css("paddingRight"))-(parseFloat(c.css("borderLeftWidth"))||0)-(parseFloat(c.css("borderRightWidth"))||0)),e.each(l,function(n,i){s[i]="hide";var r=(""+e.css(t.toShow[0],i)).match(/^([\d+-.]+)(.*)$/);o[i]={value:r[1],unit:r[2]||"px"}}),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(s,{step:function(e,n){"height"==n.prop&&(a=n.end-n.start===0?0:(n.now-n.start)/(n.end-n.start)),t.toShow[0].style[n.prop]=a*o[n.prop].value+o[n.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css({width:i,overflow:r}),t.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})}(jQuery),function(e,t){var n=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t,n=this,i=this.element[0].ownerDocument;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(i){if(!n.options.disabled&&!n.element.propAttr("readOnly")){t=!1;var r=e.ui.keyCode;switch(i.keyCode){case r.PAGE_UP:n._move("previousPage",i);break;case r.PAGE_DOWN:n._move("nextPage",i);break;case r.UP:n._keyEvent("previous",i);break;case r.DOWN:n._keyEvent("next",i);break;case r.ENTER:case r.NUMPAD_ENTER:n.menu.active&&(t=!0,i.preventDefault());case r.TAB:if(!n.menu.active)return;n.menu.select(i);break;case r.ESCAPE:n.element.val(n.term),n.close(i);break;default:clearTimeout(n.searching),n.searching=setTimeout(function(){n.term!=n.element.val()&&(n.selectedItem=null,n.search(null,i))},n.options.delay)}}}).bind("keypress.autocomplete",function(e){t&&(t=!1,e.preventDefault())}).bind("focus.autocomplete",function(){n.options.disabled||(n.selectedItem=null,n.previous=n.element.val())}).bind("blur.autocomplete",function(e){n.options.disabled||(clearTimeout(n.searching),n.closing=setTimeout(function(){n.close(e),n._change(e)},150))}),this._initSource(),this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",i)[0]).mousedown(function(t){var i=n.menu.element[0];e(t.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(t){t.target===n.element[0]||t.target===i||e.ui.contains(i,t.target)||n.close()})},1),setTimeout(function(){clearTimeout(n.closing)},13)}).menu({focus:function(e,t){var i=t.item.data("item.autocomplete");!1!==n._trigger("focus",e,{item:i})&&/^key/.test(e.originalEvent.type)&&n.element.val(i.value)},selected:function(e,t){var r=t.item.data("item.autocomplete"),a=n.previous;n.element[0]!==i.activeElement&&(n.element.focus(),n.previous=a,setTimeout(function(){n.previous=a,n.selectedItem=r},1)),!1!==n._trigger("select",e,{item:r})&&n.element.val(r.value),n.term=n.element.val(),n.close(e),n.selectedItem=r},blur:function(e,t){n.menu.element.is(":visible")&&n.element.val()!==n.term&&n.element.val(n.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),n.beforeunloadHandler=function(){n.element.removeAttr("autocomplete")},e(window).bind("beforeunload",n.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(e(n||"body",this.element[0].ownerDocument)[0]),"disabled"===t&&n&&this.xhr&&this.xhr.abort()},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,r){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e,t){r(e)},error:function(){r([])}})}):this.source=this.options.source},search:function(e,t){return e=null!=e?e:this.element.val(),this.term=this.element.val(),e.length<this.options.minLength?this.close(t):(clearTimeout(this.closing),this._trigger("search",t)!==!1?this._search(e):void 0)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(i){t===n&&e.__response(i),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){!this.options.disabled&&e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close()},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.deactivate(),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItem(t,n)})},_renderItem:function(t,n){return e("<li></li>").data("item.autocomplete",n).append(e("<a></a>").text(n.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(n){e(n.target).closest(".ui-menu-item a").length&&(n.preventDefault(),t.select(n))}),this.refresh()},refresh:function(){var t=this,n=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");n.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(n){t.activate(n,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){if(this.deactivate(),this.hasScroll()){var n=t.offset().top-this.element.offset().top,i=this.element.scrollTop(),r=this.element.height();0>n?this.element.scrollTop(i+n):n>=r&&this.element.scrollTop(i+n-r+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,n){if(!this.active)return void this.activate(n,this.element.children(t));var i=this.active[e+"All"](".ui-menu-item").eq(0);i.length?this.activate(n,i):this.activate(n,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(t,this.element.children(".ui-menu-item:first"));var n=this.active.offset().top,i=this.element.height(),r=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n-i+e(this).height();return 10>t&&t>-10});r.length||(r=this.element.children(".ui-menu-item:last")),this.activate(t,r)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(t,this.element.children(".ui-menu-item:last"));var n=this.active.offset().top,i=this.element.height(),r=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n+i-e(this).height();return 10>t&&t>-10});r.length||(r=this.element.children(".ui-menu-item:first")),this.activate(t,r)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[e.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),function(e,t){var n,i,r,a,o="ui-button ui-widget ui-state-default ui-corner-all",s="ui-state-hover ui-state-active ",l="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",c=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},u=function(t){var n=t.name,i=t.form,r=e([]);return n&&(r=i?e(i).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),r};e.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",c),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,s=this.options,l="checkbox"===this.type||"radio"===this.type,d="ui-state-hover"+(l?"":" ui-state-active"),p="ui-state-focus";null===s.label&&(s.label=this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter.button",function(){s.disabled||(e(this).addClass("ui-state-hover"),this===n&&e(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){s.disabled||e(this).removeClass(d)}).bind("click.button",function(e){s.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus.button",function(){t.buttonElement.addClass(p)}).bind("blur.button",function(){t.buttonElement.removeClass(p)}),l&&(this.element.bind("change.button",function(){a||t.refresh()}),this.buttonElement.bind("mousedown.button",function(e){s.disabled||(a=!1,i=e.pageX,r=e.pageY)}).bind("mouseup.button",function(e){s.disabled||(i!==e.pageX||r!==e.pageY)&&(a=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return s.disabled||a?!1:(e(this).toggleClass("ui-state-active"),void t.buttonElement.attr("aria-pressed",t.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(s.disabled||a)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];u(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){return s.disabled?!1:(e(this).addClass("ui-state-active"),n=this,void e(document).one("mouseup",function(){n=null}))}).bind("mouseup.button",function(){return s.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown.button",function(t){return s.disabled?!1:void((t.keyCode==e.ui.keyCode.SPACE||t.keyCode==e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup.button",function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){if(this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type){var e=this.element.parents().filter(":last"),t="label[for='"+this.element.attr("id")+"']";this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible");var n=this.element.is(":checked");n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",n)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+s+" "+l).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){return e.Widget.prototype._setOption.apply(this,arguments),"disabled"===t?void(n?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1)):void this._resetButton()},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?u(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(l),n=e("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,r=i.primary&&i.secondary,a=[];i.primary||i.secondary?(this.options.text&&a.push("ui-button-text-icon"+(r?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(a.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",n))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,n){"disabled"===t&&this.buttons.button("option",t,n),e.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),e.Widget.prototype.destroy.call(this)}})}(jQuery),function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;{var t=this,i=t.options,r=i.title||"&#160;",a=e.ui.dialog.getTitleId(t.element),o=(t.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass(n+i.dialogClass).css({zIndex:i.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(n){i.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}).attr({role:"dialog","aria-labelledby":a}).mousedown(function(e){t.moveToTop(!1,e)}),s=(t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(o),(t.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(o)),l=e('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).focus(function(){l.addClass("ui-state-focus")}).blur(function(){l.removeClass("ui-state-focus")}).click(function(e){return t.close(e),!1}).appendTo(s);(t.uiDialogTitlebarCloseText=e("<span></span>")).addClass("ui-icon ui-icon-closethick").text(i.closeText).appendTo(l),e("<span></span>").addClass("ui-dialog-title").attr("id",a).html(r).prependTo(s)}e.isFunction(i.beforeclose)&&!e.isFunction(i.beforeClose)&&(i.beforeClose=i.beforeclose),s.find("*").add(s).disableSelection(),i.draggable&&e.fn.draggable&&t._makeDraggable(),i.resizable&&e.fn.resizable&&t._makeResizable(),t._createButtons(i.buttons),t._isOpen=!1,e.fn.bgiframe&&o.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;return e.overlay&&e.overlay.destroy(),e.uiDialog.hide(),e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),e.uiDialog.remove(),e.originalTitle&&e.element.attr("title",e.originalTitle),e},widget:function(){return this.uiDialog},close:function(t){var n,i,r=this;if(!1!==r._trigger("beforeClose",t))return r.overlay&&r.overlay.destroy(),r.uiDialog.unbind("keypress.ui-dialog"),r._isOpen=!1,r.options.hide?r.uiDialog.hide(r.options.hide,function(){r._trigger("close",t)}):(r.uiDialog.hide(),r._trigger("close",t)),e.ui.dialog.overlay.resize(),r.options.modal&&(n=0,e(".ui-dialog").each(function(){this!==r.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(n=Math.max(n,i)))}),e.ui.dialog.maxZ=n),r},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var i,r=this,a=r.options;return a.modal&&!t||!a.stack&&!a.modal?r._trigger("focus",n):(a.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=a.zIndex),r.overlay&&(e.ui.dialog.maxZ+=1,r.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ)),i={scrollTop:r.element.scrollTop(),scrollLeft:r.element.scrollLeft()},e.ui.dialog.maxZ+=1,r.uiDialog.css("z-index",e.ui.dialog.maxZ),r.element.attr(i),r._trigger("focus",n),r)},open:function(){if(!this._isOpen){var t=this,n=t.options,i=t.uiDialog;return t.overlay=n.modal?new e.ui.dialog.overlay(t):null,t._size(),t._position(n.position),i.show(n.show),t.moveToTop(!0),n.modal&&i.bind("keydown.ui-dialog",function(t){if(t.keyCode===e.ui.keyCode.TAB){var n=e(":tabbable",this),i=n.filter(":first"),r=n.filter(":last");return t.target!==r[0]||t.shiftKey?t.target===i[0]&&t.shiftKey?(r.focus(1),!1):void 0:(i.focus(1),!1)}}),e(t.element.find(":tabbable").get().concat(i.find(".ui-dialog-buttonpane :tabbable").get().concat(i.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t}},_createButtons:function(t){var n=this,i=!1,r=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),a=e("<div></div>").addClass("ui-dialog-buttonset").appendTo(r);n.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof t&&null!==t&&e.each(t,function(){return!(i=!0)}),i&&(e.each(t,function(t,i){i=e.isFunction(i)?{click:i,text:t}:i;var r=e('<button type="button"></button>').click(function(){i.click.apply(n.element[0],arguments)}).appendTo(a);e.each(i,function(e,t){"click"!==e&&(e in r?r[e](t):r.attr(e,t))}),e.fn.button&&r.button()}),r.appendTo(n.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n,i=this,r=i.options,a=e(document);i.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(a,o){n="auto"===r.height?"auto":e(this).height(),e(this).height(e(this).height()).addClass("ui-dialog-dragging"),i._trigger("dragStart",a,t(o))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(o,s){r.position=[s.position.left-a.scrollLeft(),s.position.top-a.scrollTop()],e(this).removeClass("ui-dialog-dragging").height(n),i._trigger("dragStop",o,t(s)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function i(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var r=this,a=r.options,o=r.uiDialog.css("position"),s="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";r.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:r.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:r._minHeight(),handles:s,start:function(t,n){e(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",t,i(n))},resize:function(e,t){r._trigger("resize",e,i(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),a.height=e(this).height(),a.width=e(this).width(),r._trigger("resizeStop",t,i(n)),e.ui.dialog.overlay.resize()}}).css("position",o).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n,i=[],r=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(i=t.split?t.split(" "):[t[0],t[1]],1===i.length&&(i[1]=i[0]),e.each(["left","top"],function(e,t){+i[e]===i[e]&&(r[e]=i[e],i[e]=t)}),t={my:i.join(" "),at:i.join(" "),offset:r.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,n=this.uiDialog.is(":visible"),n||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},t)),n||this.uiDialog.hide()},_setOptions:function(t){var n=this,a={},o=!1;e.each(t,function(e,t){n._setOption(e,t),e in i&&(o=!0),e in r&&(a[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(t,i){var r=this,a=r.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":r._createButtons(i);break;case"closeText":r.uiDialogTitlebarCloseText.text(""+i);break;case"dialogClass":a.removeClass(r.options.dialogClass).addClass(n+i);break;case"disabled":i?a.addClass("ui-dialog-disabled"):a.removeClass("ui-dialog-disabled");break;case"draggable":var o=a.is(":data(draggable)");o&&!i&&a.draggable("destroy"),!o&&i&&r._makeDraggable();break;case"position":r._position(i);break;case"resizable":var s=a.is(":data(resizable)");s&&!i&&a.resizable("destroy"),s&&"string"==typeof i&&a.resizable("option","handles",i),s||i===!1||r._makeResizable(i);break;case"title":e(".ui-dialog-title",r.uiDialogTitlebar).html(""+(i||"&#160;"))}e.Widget.prototype._setOption.apply(r,arguments)},_size:function(){var t,n,i=this.options,r=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).height(),n=Math.max(0,i.minHeight-t),
"auto"===i.height)if(e.support.minHeight)this.element.css({minHeight:n,height:"auto"});else{this.uiDialog.show();var a=this.element.css("height","auto").height();r||this.uiDialog.hide(),this.element.height(Math.max(a,n))}else this.element.height(Math.max(i.height-t,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{version:"1.8.24",uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){0===this.instances.length&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){return e(t.target).zIndex()<e.ui.dialog.overlay.maxZ?!1:void 0})},1),e(document).bind("keydown.dialog-overlay",function(n){t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances);-1!=n&&this.oldInstances.push(this.instances.splice(n,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.remove();var i=0;e.each(this.instances,function(){i=Math.max(i,this.css("z-index"))}),this.maxZ=i},height:function(){var t,n;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),n>t?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),n>t?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t=this,i=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=i.values&&i.values.length||1,s=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(i.range===!0&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===i.range||"max"===i.range?" ui-slider-range-"+i.range:"")));for(var l=r.length;o>l;l+=1)s.push(a);this.handles=r.add(e(s.join("")).appendTo(t.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){i.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(i){var r,a,o,s,l=e(this).data("index.ui-slider-handle");if(!t.options.disabled){switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!t._keySliding&&(t._keySliding=!0,e(this).addClass("ui-state-active"),r=t._start(i,l),r===!1))return}switch(s=t.options.step,a=o=t.options.values&&t.options.values.length?t.values(l):t.value(),i.keyCode){case e.ui.keyCode.HOME:o=t._valueMin();break;case e.ui.keyCode.END:o=t._valueMax();break;case e.ui.keyCode.PAGE_UP:o=t._trimAlignValue(a+(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:o=t._trimAlignValue(a-(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(a===t._valueMax())return;o=t._trimAlignValue(a+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(a===t._valueMin())return;o=t._trimAlignValue(a-s)}t._slide(i,l,o)}}).keyup(function(n){var i=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(n,i),t._change(n,i),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var n,i,r,a,o,s,l,c,u,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,o=this,this.handles.each(function(t){var n=Math.abs(i-o.values(t));r>n&&(r=n,a=e(this),s=t)}),d.range===!0&&this.values(1)===d.min&&(s+=1,a=e(this.handles[s])),l=this._start(t,s),l===!1?!1:(this._mouseSliding=!0,o._handleIndex=s,a.addClass("ui-state-active").focus(),c=a.offset(),u=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:t.pageX-c.left-a.width()/2,top:t.pageY-c.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,i),this._animateOff=!0,!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,r,a;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/t,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),a=this._valueMin()+i*r,this._trimAlignValue(a)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,r,a;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>i||1===t&&i>n)&&(n=i),n!==this.values(t)&&(r=this.values(),r[t]=n,a=this._trigger("slide",e,{handle:this.handles[t],value:n,values:r}),i=this.values(t?0:1),a!==!1&&this.values(t,n,!0))):n!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:n}),a!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var i,r,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,r=arguments[0],a=0;a<i.length;a+=1)i[a]=this._trimAlignValue(r[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,n){var i,r=0;switch(e.isArray(this.options.values)&&(r=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;r>i;i+=1)this._change(null,i);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,r,a,o=this.options.range,s=this.options,l=this,c=this._animateOff?!1:s.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(i,r){t=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=t+"%",e(this).stop(1,1)[c?"animate":"css"](u,s.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:t+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({width:t-n+"%"},{queue:!1,duration:s.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:t+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({height:t-n+"%"},{queue:!1,duration:s.animate}))),n=t}):(i=this.value(),r=this._valueMin(),a=this._valueMax(),t=a!==r?(i-r)/(a-r)*100:0,u["horizontal"===l.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[c?"animate":"css"](u,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:t+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:s.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:t+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:s.animate}))}}),e.extend(e.ui.slider,{version:"1.8.24"})}(jQuery),function(e,t){function n(){return++r}function i(){return++a}var r=0,a=0;e.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,t){if("selected"==e){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,this._tabify()},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+n()},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+i());return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(n){function i(t,n){t.css("display",""),!e.support.opacity&&n.opacity&&t[0].style.removeAttribute("filter")}var r=this,a=this.options,o=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=e(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e([]),this.anchors.each(function(t,n){var i,s=e(n).attr("href"),l=s.split("#")[0];if(l&&(l===location.toString().split("#")[0]||(i=e("base")[0])&&l===i.href)&&(s=n.hash,n.href=s),o.test(s))r.panels=r.panels.add(r.element.find(r._sanitizeSelector(s)));else if(s&&"#"!==s){e.data(n,"href.tabs",s),e.data(n,"load.tabs",s.replace(/#.*$/,""));var c=r._tabId(n);n.href="#"+c;var u=r.element.find("#"+c);u.length||(u=e(a.panelTemplate).attr("id",c).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(r.panels[t-1]||r.list),u.data("destroy.tabs",!0)),r.panels=r.panels.add(u)}else a.disabled.push(t)}),n?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),a.selected===t?(location.hash&&this.anchors.each(function(e,t){return t.hash==location.hash?(a.selected=e,!1):void 0}),"number"!=typeof a.selected&&a.cookie&&(a.selected=parseInt(r._cookie(),10)),"number"!=typeof a.selected&&this.lis.filter(".ui-tabs-selected").length&&(a.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),a.selected=a.selected||(this.lis.length?0:-1)):null===a.selected&&(a.selected=-1),a.selected=a.selected>=0&&this.anchors[a.selected]||a.selected<0?a.selected:0,a.disabled=e.unique(a.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e,t){return r.lis.index(e)}))).sort(),-1!=e.inArray(a.selected,a.disabled)&&a.disabled.splice(e.inArray(a.selected,a.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),a.selected>=0&&this.anchors.length&&(r.element.find(r._sanitizeSelector(r.anchors[a.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(a.selected).addClass("ui-tabs-selected ui-state-active"),r.element.queue("tabs",function(){r._trigger("show",null,r._ui(r.anchors[a.selected],r.element.find(r._sanitizeSelector(r.anchors[a.selected].hash))[0]))}),this.load(a.selected)),e(window).bind("unload",function(){r.lis.add(r.anchors).unbind(".tabs"),r.lis=r.anchors=r.panels=null})):a.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[a.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),a.cookie&&this._cookie(a.selected,a.cookie);for(var s,l=0;s=this.lis[l];l++)e(s)[-1==e.inArray(l,a.disabled)||e(s).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(a.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==a.event){var c=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},u=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){c("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){u("hover",e(this))}),this.anchors.bind("focus.tabs",function(){c("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){u("focus",e(this).closest("li"))})}var d,p;a.fx&&(e.isArray(a.fx)?(d=a.fx[0],p=a.fx[1]):d=p=a.fx);var h=p?function(t,n){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),n.hide().removeClass("ui-tabs-hide").animate(p,p.duration||"normal",function(){i(n,p),r._trigger("show",null,r._ui(t,n[0]))})}:function(t,n){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),n.removeClass("ui-tabs-hide"),r._trigger("show",null,r._ui(t,n[0]))},f=d?function(e,t){t.animate(d,d.duration||"normal",function(){r.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),i(t,d),r.element.dequeue("tabs")})}:function(e,t,n){r.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),r.element.dequeue("tabs")};this.anchors.bind(a.event+".tabs",function(){var t=this,n=e(t).closest("li"),i=r.panels.filter(":not(.ui-tabs-hide)"),o=r.element.find(r._sanitizeSelector(t.hash));if(n.hasClass("ui-tabs-selected")&&!a.collapsible||n.hasClass("ui-state-disabled")||n.hasClass("ui-state-processing")||r.panels.filter(":animated").length||r._trigger("select",null,r._ui(this,o[0]))===!1)return this.blur(),!1;if(a.selected=r.anchors.index(this),r.abort(),a.collapsible){if(n.hasClass("ui-tabs-selected"))return a.selected=-1,a.cookie&&r._cookie(a.selected,a.cookie),r.element.queue("tabs",function(){f(t,i)}).dequeue("tabs"),this.blur(),!1;if(!i.length)return a.cookie&&r._cookie(a.selected,a.cookie),r.element.queue("tabs",function(){h(t,o)}),r.load(r.anchors.index(this)),this.blur(),!1}if(a.cookie&&r._cookie(a.selected,a.cookie),!o.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";i.length&&r.element.queue("tabs",function(){f(t,i)}),r.element.queue("tabs",function(){h(t,o)}),r.load(r.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var n=e(this).unbind(".tabs");e.each(["href","load","cache"],function(e,t){n.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie),this},add:function(n,i,r){r===t&&(r=this.anchors.length);var a=this,o=this.options,s=e(o.tabTemplate.replace(/#\{href\}/g,n).replace(/#\{label\}/g,i)),l=n.indexOf("#")?this._tabId(e("a",s)[0]):n.replace("#","");s.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var c=a.element.find("#"+l);return c.length||(c=e(o.panelTemplate).attr("id",l).data("destroy.tabs",!0)),c.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),r>=this.lis.length?(s.appendTo(this.list),c.appendTo(this.list[0].parentNode)):(s.insertBefore(this.lis[r]),c.insertBefore(this.panels[r])),o.disabled=e.map(o.disabled,function(e,t){return e>=r?++e:e}),this._tabify(),1==this.anchors.length&&(o.selected=0,s.addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){a._trigger("show",null,a._ui(a.anchors[0],a.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[r],this.panels[r])),this},remove:function(t){t=this._getIndex(t);var n=this.options,i=this.lis.eq(t).remove(),r=this.panels.eq(t).remove();return i.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e,n){return e!=t}),function(e,n){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(i.find("a")[0],r[0])),this},enable:function(t){t=this._getIndex(t);var n=this.options;if(-1!=e.inArray(t,n.disabled))return this.lis.eq(t).removeClass("ui-state-disabled"),n.disabled=e.grep(n.disabled,function(e,n){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])),this},disable:function(e){e=this._getIndex(e);var t=this.options;return e!=t.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),t.disabled.push(e),t.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(e){if(e=this._getIndex(e),-1==e){if(!this.options.collapsible||-1==this.options.selected)return this;e=this.options.selected}return this.anchors.eq(e).trigger(this.options.event+".tabs"),this},load:function(t){t=this._getIndex(t);var n=this,i=this.options,r=this.anchors.eq(t)[0],a=e.data(r,"load.tabs");if(this.abort(),!a||0!==this.element.queue("tabs").length&&e.data(r,"cache.tabs"))return void this.element.dequeue("tabs");if(this.lis.eq(t).addClass("ui-state-processing"),i.spinner){var o=e("span",r);o.data("label.tabs",o.html()).html(i.spinner)}return this.xhr=e.ajax(e.extend({},i.ajaxOptions,{url:a,success:function(a,o){n.element.find(n._sanitizeSelector(r.hash)).html(a),n._cleanup(),i.cache&&e.data(r,"cache.tabs",!0),n._trigger("load",null,n._ui(n.anchors[t],n.panels[t]));try{i.ajaxOptions.success(a,o)}catch(s){}},error:function(e,a,o){n._cleanup(),n._trigger("load",null,n._ui(n.anchors[t],n.panels[t]));try{i.ajaxOptions.error(e,a,t,r)}catch(o){}}})),n.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.8.24"}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,t){var n=this,i=this.options,r=n._rotate||(n._rotate=function(t){clearTimeout(n.rotation),n.rotation=setTimeout(function(){var e=i.selected;n.select(++e<n.anchors.length?e:0)},e),t&&t.stopPropagation()}),a=n._unrotate||(n._unrotate=t?function(e){r()}:function(e){e.clientX&&n.rotate(null)});return e?(this.element.bind("tabsshow",r),this.anchors.bind(i.event+".tabs",a),r()):(clearTimeout(n.rotation),this.element.unbind("tabsshow",r),this.anchors.unbind(i.event+".tabs",a),delete this._rotate,delete this._unrotate),this}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.bind("mouseout",function(e){var n=$(e.target).closest(t);n.length&&n.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(n){var i=$(n.target).closest(t);!$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])&&i.length&&(i.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),i.addClass("ui-state-hover"),i.hasClass("ui-datepicker-prev")&&i.addClass("ui-datepicker-prev-hover"),i.hasClass("ui-datepicker-next")&&i.addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)(null==t[n]||t[n]==undefined)&&(e[n]=t[n]);return e}function isArray(e){return e&&($.browser.safari&&"object"==typeof e&&e.length||e.constructor&&e.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.24"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]),n.hasClass(this.markerClassName)||(this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,i){t.settings[n]=i}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var n=this._get(t,"appendText"),i=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[i?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var r=this._get(t,"showOn");if(("focus"==r||"both"==r)&&e.focus(this._showDatepicker),"button"==r||"both"==r){var a=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:a,title:a}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==o?a:$("<img/>").attr({src:o,alt:a,title:a}))),e[i?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var i=function(e){for(var t=0,n=0,i=0;i<e.length;i++)e[i].length>t&&(t=e[i].length,n=i);return n};t.setMonth(i(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(i(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,i){t.settings[n]=i}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,n,i,r){var a=this._dialogInst;if(!a){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},$.data(this._dialogInput[0],PROP_NAME,a)}if(extendRemove(a.settings,i||{}),t=t&&t.constructor==Date?this._formatDate(a,t):t,this._dialogInput.val(t),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,!this._pos){var s=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[s/2-100+c,l/2-150+u]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,a),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==i?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==i||"span"==i)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();if("input"==i)e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==i||"span"==i){var r=t.children("."+this._inlineClass);

r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();if("input"==i)e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==i||"span"==i){var r=t.children("."+this._inlineClass);r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var i=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):i?"all"==t?$.extend({},i.settings):this._get(i,t):null;var r=t||{};if("string"==typeof t&&(r={},r[t]=n),i){this._curInst==i&&this._hideDatepicker();var a=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(i,"min"),s=this._getMinMaxDate(i,"max");extendRemove(i.settings,r),null!==o&&r.dateFormat!==undefined&&r.minDate===undefined&&(i.settings.minDate=this._formatDate(i,o)),null!==s&&r.dateFormat!==undefined&&r.maxDate===undefined&&(i.settings.maxDate=this._formatDate(i,s)),this._attachments($(e),i),this._autoSize(i),this._setDate(i,a),this._updateAlternate(i),this._updateDatepicker(i)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,i=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var r=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);r[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,r[0]);var a=$.datepicker._get(t,"onSelect");if(a){var o=$.datepicker._formatDate(t);a.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,i?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,i?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),i=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">i||!n||n.indexOf(i)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(i){$.datepicker.log(i)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),i=n?n.apply(e,[e,t]):{};if(i!==!1){extendRemove(t.settings,i),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var r=!1;$(e).parents().each(function(){return r|="fixed"==$(this).css("position"),!r}),r&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var a={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),a=$.datepicker._checkOffset(t,a,r),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":r?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),!t.inline){var o=$.datepicker._get(t,"showAnim"),s=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[o]?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),s,l):t.dpDiv[o||"show"](o?s:null,l),o&&s||l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){var t=this;t.maxRows=4;var n=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i=e.dpDiv.find("iframe.ui-datepicker-cover");i.length&&i.css({left:-n[0],top:-n[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),a=r[1],o=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&e.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",o*a+"em"),e.dpDiv[(1!=r[0]||1!=r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var s=e.yearshtml;setTimeout(function(){s===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),s=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var i=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,s=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?i-a:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+i>s&&s>i?Math.abs(t.left+i-s):0),t.top-=Math.min(t.top,t.top+r>l&&l>r?Math.abs(r+o):0),t},_findPos:function(e){for(var t=this._getInst(e),n=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];var i=$(e).offset();return[i.left,i.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var n=this._get(t,"showAnim"),i=this._get(t,"duration"),r=function(){$.datepicker._tidyDialog(t)};$.effects&&$.effects[n]?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),i,r):t.dpDiv["slideDown"==n?"slideUp":"fadeIn"==n?"fadeOut":"hide"](n?i:null,r),n||r(),this._datepickerShowing=!1;var a=this._get(t,"onClose");a&&a.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,n){var i=$(e),r=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(r,t+("M"==n?this._get(r,"showCurrentAtPos"):0),n),this._updateDatepicker(r))},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var i=new Date;n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var i=$(e),r=this._getInst(i[0]);r["selected"+("M"==n?"Month":"Year")]=r["draw"+("M"==n?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(i)},_selectDay:function(e,t,n,i){var r=$(e);if(!$(i).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(r[0])){var a=this._getInst(r[0]);a.selectedDay=a.currentDay=$("a",i).html(),a.selectedMonth=a.currentMonth=t,a.selectedYear=a.currentYear=n,this._selectDate(e,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear))}},_clearDate:function(e){{var t=$(e);this._getInst(t[0])}this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),i=this._getInst(n[0]);t=null!=t?t:this._formatDate(i),i.input&&i.input.val(t),this._updateAlternate(i);var r=this._get(i,"onSelect");r?r.apply(i.input?i.input[0]:null,[t,i]):i.input&&i.input.trigger("change"),i.inline?this._updateDatepicker(i):(this._hideDatepicker(),this._lastInput=i.input[0],"object"!=typeof i.input[0]&&i.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),r=this.formatDate(n,i,this._getFormatConfig(e));$(t).each(function(){$(this).val(r)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?t.toString():t+"",""==t)return null;var i=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;i="string"!=typeof i?i:(new Date).getFullYear()%100+parseInt(i,10);for(var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,a=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,u=-1,d=-1,p=!1,h=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},f=function(e){var n=h(e),i="@"==e?14:"!"==e?20:"y"==e&&n?4:"o"==e?3:2,r=new RegExp("^\\d{1,"+i+"}"),a=t.substring(v).match(r);if(!a)throw"Missing number at position "+v;return v+=a[0].length,parseInt(a[0],10)},g=function(e,n,i){var r=$.map(h(e)?i:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),a=-1;if($.each(r,function(e,n){var i=n[1];return t.substr(v,i.length).toLowerCase()==i.toLowerCase()?(a=n[0],v+=i.length,!1):void 0}),-1!=a)return a+1;throw"Unknown name at position "+v},m=function(){if(t.charAt(v)!=e.charAt(y))throw"Unexpected literal at position "+v;v++},v=0,y=0;y<e.length;y++)if(p)"'"!=e.charAt(y)||h("'")?m():p=!1;else switch(e.charAt(y)){case"d":u=f("d");break;case"D":g("D",r,a);break;case"o":d=f("o");break;case"m":c=f("m");break;case"M":c=g("M",o,s);break;case"y":l=f("y");break;case"@":var b=new Date(f("@"));l=b.getFullYear(),c=b.getMonth()+1,u=b.getDate();break;case"!":var b=new Date((f("!")-this._ticksTo1970)/1e4);l=b.getFullYear(),c=b.getMonth()+1,u=b.getDate();break;case"'":h("'")?m():p=!0;break;default:m()}if(v<t.length)throw"Extra/unparsed characters found in date: "+t.substring(v);if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i>=l?0:-100)),d>-1)for(c=1,u=d;;){var w=this._getDaysInMonth(l,c-1);if(w>=u)break;c++,u-=w}var b=this._daylightSavingAdjust(new Date(l,c-1,u));if(b.getFullYear()!=l||b.getMonth()+1!=c||b.getDate()!=u)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,r=(n?n.dayNames:null)||this._defaults.dayNames,a=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,s=function(t){var n=p+1<e.length&&e.charAt(p+1)==t;return n&&p++,n},l=function(e,t,n){var i=""+t;if(s(e))for(;i.length<n;)i="0"+i;return i},c=function(e,t,n,i){return s(e)?i[t]:n[t]},u="",d=!1;if(t)for(var p=0;p<e.length;p++)if(d)"'"!=e.charAt(p)||s("'")?u+=e.charAt(p):d=!1;else switch(e.charAt(p)){case"d":u+=l("d",t.getDate(),2);break;case"D":u+=c("D",t.getDay(),i,r);break;case"o":u+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",t.getMonth()+1,2);break;case"M":u+=c("M",t.getMonth(),a,o);break;case"y":u+=s("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":s("'")?u+="'":d=!0;break;default:u+=e.charAt(p)}return u},_possibleChars:function(e){for(var t="",n=!1,i=function(t){var n=r+1<e.length&&e.charAt(r+1)==t;return n&&r++,n},r=0;r<e.length;r++)if(n)"'"!=e.charAt(r)||i("'")?t+=e.charAt(r):n=!1;else switch(e.charAt(r)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":i("'")?t+="'":n=!0;break;default:t+=e.charAt(r)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var n,i,r=this._get(e,"dateFormat"),a=e.lastVal=e.input?e.input.val():null;n=i=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{n=this.parseDate(r,a,o)||i}catch(s){this.log(s),a=t?"":a}e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),e.currentDay=a?n.getDate():0,e.currentMonth=a?n.getMonth():0,e.currentYear=a?n.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},r=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}for(var i=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,r=i.getFullYear(),a=i.getMonth(),o=i.getDate(),s=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(t);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(r,a));break;case"y":case"Y":r+=parseInt(l[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(r,a))}l=s.exec(t)}return new Date(r,a,o)},a=null==t||""===t?n:"string"==typeof t?r(t):"number"==typeof t?isNaN(t)?n:i(t):new Date(t.getTime());return a=a&&"Invalid Date"==a.toString()?n:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,r=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),r==e.selectedMonth&&a==e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),i=this._get(e,"showButtonPanel"),r=this._get(e,"hideIfNoPrevNext"),a=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),s=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=o[0]||1!=o[1],u=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),d=this._getMinMaxDate(e,"min"),p=this._getMinMaxDate(e,"max"),h=e.drawMonth-s,f=e.drawYear;if(0>h&&(h+=12,f--),p){var g=this._daylightSavingAdjust(new Date(p.getFullYear(),p.getMonth()-o[0]*o[1]+1,p.getDate()));for(g=d&&d>g?d:g;this._daylightSavingAdjust(new Date(f,h,1))>g;)h--,0>h&&(h=11,f--)}e.drawMonth=h,e.drawYear=f;var m=this._get(e,"prevText");m=a?this.formatDate(m,this._daylightSavingAdjust(new Date(f,h-l,1)),this._getFormatConfig(e)):m;var v=this._canAdjustMonth(e,-1,f,h)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":r?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=a?this.formatDate(y,this._daylightSavingAdjust(new Date(f,h+l,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,f,h)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":r?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),x=this._get(e,"gotoCurrent")&&e.currentDay?u:t;w=a?this.formatDate(w,x,this._getFormatConfig(e)):w;var k=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",C=i?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?k:"")+(this._isInRange(e,x)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":k)+"</div>":"",S=parseInt(this._get(e,"firstDay"),10);S=isNaN(S)?0:S;for(var _=this._get(e,"showWeek"),T=this._get(e,"dayNames"),A=(this._get(e,"dayNamesShort"),this._get(e,"dayNamesMin")),E=this._get(e,"monthNames"),P=this._get(e,"monthNamesShort"),I=this._get(e,"beforeShowDay"),D=this._get(e,"showOtherMonths"),M=this._get(e,"selectOtherMonths"),N=(this._get(e,"calculateWeek")||this.iso8601Week,this._getDefaultDate(e)),j="",O=0;O<o[0];O++){var L="";this.maxRows=4;for(var R=0;R<o[1];R++){var F=this._daylightSavingAdjust(new Date(f,h,e.selectedDay)),U=" ui-corner-all",z="";if(c){if(z+='<div class="ui-datepicker-group',o[1]>1)switch(R){case 0:z+=" ui-datepicker-group-first",U=" ui-corner-"+(n?"right":"left");break;case o[1]-1:z+=" ui-datepicker-group-last",U=" ui-corner-"+(n?"left":"right");break;default:z+=" ui-datepicker-group-middle",U=""}z+='">'}z+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+U+'">'+(/all|left/.test(U)&&0==O?n?b:v:"")+(/all|right/.test(U)&&0==O?n?v:b:"")+this._generateMonthYearHeader(e,h,f,d,p,O>0||R>0,E,P)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var q=_?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",B=0;7>B;B++){var H=(B+S)%7;q+="<th"+((B+S+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+T[H]+'">'+A[H]+"</span></th>"}z+=q+"</tr></thead><tbody>";var V=this._getDaysInMonth(f,h);f==e.selectedYear&&h==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var W=(this._getFirstDayOfMonth(f,h)-S+7)%7,G=Math.ceil((W+V)/7),K=c&&this.maxRows>G?this.maxRows:G;this.maxRows=K;for(var X=this._daylightSavingAdjust(new Date(f,h,1-W)),Y=0;K>Y;Y++){z+="<tr>";for(var J=_?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(X)+"</td>":"",B=0;7>B;B++){var Q=I?I.apply(e.input?e.input[0]:null,[X]):[!0,""],Z=X.getMonth()!=h,ee=Z&&!M||!Q[0]||d&&d>X||p&&X>p;J+='<td class="'+((B+S+6)%7>=5?" ui-datepicker-week-end":"")+(Z?" ui-datepicker-other-month":"")+(X.getTime()==F.getTime()&&h==e.selectedMonth&&e._keyEvent||N.getTime()==X.getTime()&&N.getTime()==F.getTime()?" "+this._dayOverClass:"")+(ee?" "+this._unselectableClass+" ui-state-disabled":"")+(Z&&!D?"":" "+Q[1]+(X.getTime()==u.getTime()?" "+this._currentClass:"")+(X.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(Z&&!D||!Q[2]?"":' title="'+Q[2]+'"')+(ee?"":' data-handler="selectDay" data-event="click" data-month="'+X.getMonth()+'" data-year="'+X.getFullYear()+'"')+">"+(Z&&!D?"&#xa0;":ee?'<span class="ui-state-default">'+X.getDate()+"</span>":'<a class="ui-state-default'+(X.getTime()==t.getTime()?" ui-state-highlight":"")+(X.getTime()==u.getTime()?" ui-state-active":"")+(Z?" ui-priority-secondary":"")+'" href="#">'+X.getDate()+"</a>")+"</td>",X.setDate(X.getDate()+1),X=this._daylightSavingAdjust(X)}z+=J+"</tr>"}h++,h>11&&(h=0,f++),z+="</tbody></table>"+(c?"</div>"+(o[0]>0&&R==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),L+=z}j+=L}return j+=C+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,j},_generateMonthYearHeader:function(e,t,n,i,r,a,o,s){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),u=this._get(e,"showMonthAfterYear"),d='<div class="ui-datepicker-title">',p="";if(a||!l)p+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var h=i&&i.getFullYear()==n,f=r&&r.getFullYear()==n;p+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var g=0;12>g;g++)(!h||g>=i.getMonth())&&(!f||g<=r.getMonth())&&(p+='<option value="'+g+'"'+(g==t?' selected="selected"':"")+">"+s[g]+"</option>");p+="</select>"}if(u||(d+=p+(!a&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!c)d+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));for(b=i?Math.max(b,i.getFullYear()):b,w=r?Math.min(w,r.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';w>=b;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",d+=e.yearshtml,e.yearshtml=null}return d+=this._get(e,"yearSuffix"),u&&(d+=(!a&&l&&c?"":"&#xa0;")+p),d+="</div>"},_adjustInstDate:function(e,t,n){var i=e.drawYear+("Y"==n?t:0),r=e.drawMonth+("M"==n?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(i,r))+("D"==n?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,r,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"==n||"Y"==n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),r=n&&n>t?n:t;return r=i&&r>i?i:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var r=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(n,i+(0>t?t:r[0]*r[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!i||t.getTime()<=i.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.24",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){e.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),e.Widget.prototype.destroy.apply(this,arguments)},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(t,n){"value"===t&&(this.options.value=n,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),e.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}}),e.extend(e.ui.progressbar,{version:"1.8.24"})}(jQuery),jQuery.effects||function(e,t){function n(t){var n;return t&&t.constructor==Array&&3==t.length?t:(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)]:(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3])]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]:(n=/rgba\(0, 0, 0, 0\)/.exec(t))?c.transparent:c[e.trim(t).toLowerCase()]}function i(t,i){var r;do{if(r=(e.curCSS||e.css)(t,i),""!=r&&"transparent"!=r||e.nodeName(t,"body"))break;i="backgroundColor"}while(t=t.parentNode);return n(r)}function r(){var e,t,n=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,i={};if(n&&n.length&&n[0]&&n[n[0]])for(var r=n.length;r--;)e=n[r],"string"==typeof n[e]&&(t=e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),i[t]=n[e]);else for(e in n)"string"==typeof n[e]&&(i[e]=n[e]);return i}function a(t){var n,i;for(n in t)i=t[n],(null==i||e.isFunction(i)||n in d||/scrollbar/.test(n)||!/color/i.test(n)&&isNaN(parseFloat(i)))&&delete t[n];return t}function o(e,t){var n,i={_:0};for(n in t)e[n]!=t[n]&&(i[n]=t[n]);return i}function s(t,n,i,r){return"object"==typeof t&&(r=n,i=null,n=t,t=n.effect),e.isFunction(n)&&(r=n,
i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n=n||{},i=i||n.duration,i=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,r=r||n.complete,[t,n,i,r]}function l(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects[t]?!1:!0}e.effects={},e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(t,r){e.fx.step[r]=function(e){e.colorInit||(e.start=i(e.elem,r),e.end=n(e.end),e.colorInit=!0),e.elem.style[r]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});var c={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},u=["add","remove","toggle"],d={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(t,n,i,s){return e.isFunction(i)&&(s=i,i=null),this.queue(function(){var l,c=e(this),d=c.attr("style")||" ",p=a(r.call(this)),h=c.attr("class")||"";e.each(u,function(e,n){t[n]&&c[n+"Class"](t[n])}),l=a(r.call(this)),c.attr("class",h),c.animate(o(p,l),{queue:!1,duration:n,easing:i,complete:function(){e.each(u,function(e,n){t[n]&&c[n+"Class"](t[n])}),"object"==typeof c.attr("style")?(c.attr("style").cssText="",c.attr("style").cssText=d):c.attr("style",d),s&&s.apply(this,arguments),e.dequeue(this)}})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,i,r){return n?e.effects.animateClass.apply(this,[{add:t},n,i,r]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,i,r){return n?e.effects.animateClass.apply(this,[{remove:t},n,i,r]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,i,r,a,o){return"boolean"==typeof i||i===t?r?e.effects.animateClass.apply(this,[i?{add:n}:{remove:n},r,a,o]):this._toggleClass(n,i):e.effects.animateClass.apply(this,[{toggle:n},i,r,a])},switchClass:function(t,n,i,r,a){return e.effects.animateClass.apply(this,[{add:n,remove:t},i,r,a])}}),e.extend(e.effects,{version:"1.8.24",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data("ec.storage."+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.css(t[n],e.data("ec.storage."+t[n]))},setMode:function(e,t){return"toggle"==t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r=document.activeElement;try{r.id}catch(a){r=document.body}return t.wrap(i),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),i=t.parent(),"static"==t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),i.css(n).show()},removeWrapper:function(t){var n,i=document.activeElement;return t.parent().is(".ui-effects-wrapper")?(n=t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus(),n):t},setTransition:function(t,n,i,r){return r=r||{},e.each(n,function(e,n){var a=t.cssUnit(n);a[0]>0&&(r[n]=a[0]*i+a[1])}),r}}),e.fn.extend({effect:function(t,n,i,r){var a=s.apply(this,arguments),o={options:a[1],duration:a[2],callback:a[3]},l=o.options.mode,c=e.effects[t];return e.fx.off||!c?l?this[l](o.duration,o.callback):this.each(function(){o.callback&&o.callback.call(this)}):c.call(this,o)},_show:e.fn.show,show:function(e){if(l(e))return this._show.apply(this,arguments);var t=s.apply(this,arguments);return t[1].mode="show",this.effect.apply(this,t)},_hide:e.fn.hide,hide:function(e){if(l(e))return this._hide.apply(this,arguments);var t=s.apply(this,arguments);return t[1].mode="hide",this.effect.apply(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(l(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=s.apply(this,arguments);return n[1].mode="toggle",this.effect.apply(this,n)},cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}});var p={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){p[t]=function(t){return Math.pow(t,e+2)}}),e.extend(p,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(p,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:n(-2*e+2)/-2+1}})}(jQuery),function(e,t){e.effects.blind=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right"],r=e.effects.setMode(n,t.options.mode||"hide"),a=t.options.direction||"vertical";e.effects.save(n,i),n.show();var o=e.effects.createWrapper(n).css({overflow:"hidden"}),s="vertical"==a?"height":"width",l="vertical"==a?o.height():o.width();"show"==r&&o.css(s,0);var c={};c[s]="show"==r?l:0,o.animate(c,t.duration,t.options.easing,function(){"hide"==r&&n.hide(),e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e,t){e.effects.bounce=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right"],r=e.effects.setMode(n,t.options.mode||"effect"),a=t.options.direction||"up",o=t.options.distance||20,s=t.options.times||5,l=t.duration||250;/show|hide/.test(r)&&i.push("opacity"),e.effects.save(n,i),n.show(),e.effects.createWrapper(n);var c="up"==a||"down"==a?"top":"left",u="up"==a||"left"==a?"pos":"neg",o=t.options.distance||("top"==c?n.outerHeight(!0)/3:n.outerWidth(!0)/3);if("show"==r&&n.css("opacity",0).css(c,"pos"==u?-o:o),"hide"==r&&(o/=2*s),"hide"!=r&&s--,"show"==r){var d={opacity:1};d[c]=("pos"==u?"+=":"-=")+o,n.animate(d,l/2,t.options.easing),o/=2,s--}for(var p=0;s>p;p++){var h={},f={};h[c]=("pos"==u?"-=":"+=")+o,f[c]=("pos"==u?"+=":"-=")+o,n.animate(h,l/2,t.options.easing).animate(f,l/2,t.options.easing),o="hide"==r?2*o:o/2}if("hide"==r){var d={opacity:0};d[c]=("pos"==u?"-=":"+=")+o,n.animate(d,l/2,t.options.easing,function(){n.hide(),e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}else{var h={},f={};h[c]=("pos"==u?"-=":"+=")+o,f[c]=("pos"==u?"+=":"-=")+o,n.animate(h,l/2,t.options.easing).animate(f,l/2,t.options.easing,function(){e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e,t){e.effects.clip=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(n,t.options.mode||"hide"),a=t.options.direction||"vertical";e.effects.save(n,i),n.show();var o=e.effects.createWrapper(n).css({overflow:"hidden"}),s="IMG"==n[0].tagName?o:n,l={size:"vertical"==a?"height":"width",position:"vertical"==a?"top":"left"},c="vertical"==a?s.height():s.width();"show"==r&&(s.css(l.size,0),s.css(l.position,c/2));var u={};u[l.size]="show"==r?c:0,u[l.position]="show"==r?0:c/2,s.animate(u,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==r&&n.hide(),e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.drop=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right","opacity"],r=e.effects.setMode(n,t.options.mode||"hide"),a=t.options.direction||"left";e.effects.save(n,i),n.show(),e.effects.createWrapper(n);var o="up"==a||"down"==a?"top":"left",s="up"==a||"left"==a?"pos":"neg",l=t.options.distance||("top"==o?n.outerHeight(!0)/2:n.outerWidth(!0)/2);"show"==r&&n.css("opacity",0).css(o,"pos"==s?-l:l);var c={opacity:"show"==r?1:0};c[o]=("show"==r?"pos"==s?"+=":"-=":"pos"==s?"-=":"+=")+l,n.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==r&&n.hide(),e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.explode=function(t){return this.queue(function(){var n=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3,i=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3;t.options.mode="toggle"==t.options.mode?e(this).is(":visible")?"hide":"show":t.options.mode;var r=e(this).show().css("visibility","hidden"),a=r.offset();a.top-=parseInt(r.css("marginTop"),10)||0,a.left-=parseInt(r.css("marginLeft"),10)||0;for(var o=r.outerWidth(!0),s=r.outerHeight(!0),l=0;n>l;l++)for(var c=0;i>c;c++)r.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-c*(o/i),top:-l*(s/n)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:o/i,height:s/n,left:a.left+c*(o/i)+("show"==t.options.mode?(c-Math.floor(i/2))*(o/i):0),top:a.top+l*(s/n)+("show"==t.options.mode?(l-Math.floor(n/2))*(s/n):0),opacity:"show"==t.options.mode?0:1}).animate({left:a.left+c*(o/i)+("show"==t.options.mode?0:(c-Math.floor(i/2))*(o/i)),top:a.top+l*(s/n)+("show"==t.options.mode?0:(l-Math.floor(n/2))*(s/n)),opacity:"show"==t.options.mode?1:0},t.duration||500);setTimeout(function(){"show"==t.options.mode?r.css({visibility:"visible"}):r.css({visibility:"visible"}).hide(),t.callback&&t.callback.apply(r[0]),r.dequeue(),e("div.ui-effects-explode").remove()},t.duration||500)})}}(jQuery),function(e,t){e.effects.fade=function(t){return this.queue(function(){var n=e(this),i=e.effects.setMode(n,t.options.mode||"hide");n.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.fold=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right"],r=e.effects.setMode(n,t.options.mode||"hide"),a=t.options.size||15,o=!!t.options.horizFirst,s=t.duration?t.duration/2:e.fx.speeds._default/2;e.effects.save(n,i),n.show();var l=e.effects.createWrapper(n).css({overflow:"hidden"}),c="show"==r!=o,u=c?["width","height"]:["height","width"],d=c?[l.width(),l.height()]:[l.height(),l.width()],p=/([0-9]+)%/.exec(a);p&&(a=parseInt(p[1],10)/100*d["hide"==r?0:1]),"show"==r&&l.css(o?{height:0,width:a}:{height:a,width:0});var h={},f={};h[u[0]]="show"==r?d[0]:a,f[u[1]]="show"==r?d[1]:0,l.animate(h,s,t.options.easing).animate(f,s,t.options.easing,function(){"hide"==r&&n.hide(),e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e,t){e.effects.highlight=function(t){return this.queue(function(){var n=e(this),i=["backgroundImage","backgroundColor","opacity"],r=e.effects.setMode(n,t.options.mode||"show"),a={backgroundColor:n.css("backgroundColor")};"hide"==r&&(a.opacity=0),e.effects.save(n,i),n.show().css({backgroundImage:"none",backgroundColor:t.options.color||"#ffff99"}).animate(a,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==r&&n.hide(),e.effects.restore(n,i),"show"==r&&!e.support.opacity&&this.style.removeAttribute("filter"),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.pulsate=function(t){return this.queue(function(){var n=e(this),i=e.effects.setMode(n,t.options.mode||"show"),r=2*(t.options.times||5)-1,a=t.duration?t.duration/2:e.fx.speeds._default/2,o=n.is(":visible"),s=0;o||(n.css("opacity",0).show(),s=1),("hide"==i&&o||"show"==i&&!o)&&r--;for(var l=0;r>l;l++)n.animate({opacity:s},a,t.options.easing),s=(s+1)%2;n.animate({opacity:s},a,t.options.easing,function(){0==s&&n.hide(),t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}).dequeue()})}}(jQuery),function(e,t){e.effects.puff=function(t){return this.queue(function(){var n=e(this),i=e.effects.setMode(n,t.options.mode||"hide"),r=parseInt(t.options.percent,10)||150,a=r/100,o={height:n.height(),width:n.width()};e.extend(t.options,{fade:!0,mode:i,percent:"hide"==i?r:100,from:"hide"==i?o:{height:o.height*a,width:o.width*a}}),n.effect("scale",t.options,t.duration,t.callback),n.dequeue()})},e.effects.scale=function(t){return this.queue(function(){var n=e(this),i=e.extend(!0,{},t.options),r=e.effects.setMode(n,t.options.mode||"effect"),a=parseInt(t.options.percent,10)||(0==parseInt(t.options.percent,10)?0:"hide"==r?0:100),o=t.options.direction||"both",s=t.options.origin;"effect"!=r&&(i.origin=s||["middle","center"],i.restore=!0);var l={height:n.height(),width:n.width()};n.from=t.options.from||("show"==r?{height:0,width:0}:l);var c={y:"horizontal"!=o?a/100:1,x:"vertical"!=o?a/100:1};n.to={height:l.height*c.y,width:l.width*c.x},t.options.fade&&("show"==r&&(n.from.opacity=0,n.to.opacity=1),"hide"==r&&(n.from.opacity=1,n.to.opacity=0)),i.from=n.from,i.to=n.to,i.mode=r,n.effect("size",i,t.duration,t.callback),n.dequeue()})},e.effects.size=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right","width","height","overflow","opacity"],r=["position","top","bottom","left","right","overflow","opacity"],a=["width","height","overflow"],o=["fontSize"],s=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=e.effects.setMode(n,t.options.mode||"effect"),u=t.options.restore||!1,d=t.options.scale||"both",p=t.options.origin,h={height:n.height(),width:n.width()};if(n.from=t.options.from||h,n.to=t.options.to||h,p){var f=e.effects.getBaseline(p,h);n.from.top=(h.height-n.from.height)*f.y,n.from.left=(h.width-n.from.width)*f.x,n.to.top=(h.height-n.to.height)*f.y,n.to.left=(h.width-n.to.width)*f.x}var g={from:{y:n.from.height/h.height,x:n.from.width/h.width},to:{y:n.to.height/h.height,x:n.to.width/h.width}};("box"==d||"both"==d)&&(g.from.y!=g.to.y&&(i=i.concat(s),n.from=e.effects.setTransition(n,s,g.from.y,n.from),n.to=e.effects.setTransition(n,s,g.to.y,n.to)),g.from.x!=g.to.x&&(i=i.concat(l),n.from=e.effects.setTransition(n,l,g.from.x,n.from),n.to=e.effects.setTransition(n,l,g.to.x,n.to))),("content"==d||"both"==d)&&g.from.y!=g.to.y&&(i=i.concat(o),n.from=e.effects.setTransition(n,o,g.from.y,n.from),n.to=e.effects.setTransition(n,o,g.to.y,n.to)),e.effects.save(n,u?i:r),n.show(),e.effects.createWrapper(n),n.css("overflow","hidden").css(n.from),("content"==d||"both"==d)&&(s=s.concat(["marginTop","marginBottom"]).concat(o),l=l.concat(["marginLeft","marginRight"]),a=i.concat(s).concat(l),n.find("*[width]").each(function(){var n=e(this);u&&e.effects.save(n,a);var i={height:n.height(),width:n.width()};n.from={height:i.height*g.from.y,width:i.width*g.from.x},n.to={height:i.height*g.to.y,width:i.width*g.to.x},g.from.y!=g.to.y&&(n.from=e.effects.setTransition(n,s,g.from.y,n.from),n.to=e.effects.setTransition(n,s,g.to.y,n.to)),g.from.x!=g.to.x&&(n.from=e.effects.setTransition(n,l,g.from.x,n.from),n.to=e.effects.setTransition(n,l,g.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.options.easing,function(){u&&e.effects.restore(n,a)})})),n.animate(n.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){0===n.to.opacity&&n.css("opacity",n.from.opacity),"hide"==c&&n.hide(),e.effects.restore(n,u?i:r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.shake=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right"],r=(e.effects.setMode(n,t.options.mode||"effect"),t.options.direction||"left"),a=t.options.distance||20,o=t.options.times||3,s=t.duration||t.options.duration||140;e.effects.save(n,i),n.show(),e.effects.createWrapper(n);var l="up"==r||"down"==r?"top":"left",c="up"==r||"left"==r?"pos":"neg",u={},d={},p={};u[l]=("pos"==c?"-=":"+=")+a,d[l]=("pos"==c?"+=":"-=")+2*a,p[l]=("pos"==c?"-=":"+=")+2*a,n.animate(u,s,t.options.easing);for(var h=1;o>h;h++)n.animate(d,s,t.options.easing).animate(p,s,t.options.easing);n.animate(d,s,t.options.easing).animate(u,s/2,t.options.easing,function(){e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e,t){e.effects.slide=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right"],r=e.effects.setMode(n,t.options.mode||"show"),a=t.options.direction||"left";e.effects.save(n,i),n.show(),e.effects.createWrapper(n).css({overflow:"hidden"});var o="up"==a||"down"==a?"top":"left",s="up"==a||"left"==a?"pos":"neg",l=t.options.distance||("top"==o?n.outerHeight(!0):n.outerWidth(!0));"show"==r&&n.css(o,"pos"==s?isNaN(l)?"-"+l:-l:l);var c={};c[o]=("show"==r?"pos"==s?"+=":"-=":"pos"==s?"-=":"+=")+l,n.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==r&&n.hide(),e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.transfer=function(t){return this.queue(function(){var n=e(this),i=e(t.options.to),r=i.offset(),a={top:r.top,left:r.left,height:i.innerHeight(),width:i.innerWidth()},o=n.offset(),s=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({top:o.top,left:o.left,height:n.innerHeight(),width:n.innerWidth(),position:"absolute"}).animate(a,t.duration,t.options.easing,function(){s.remove(),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),angular.module("ui.bootstrap",["ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,n){function i(e){for(var t in e)if(void 0!==a.style[t])return e[t]}var r=function(i,a,o){o=o||{};var s=e.defer(),l=r[o.animation?"animationEndEventName":"transitionEndEventName"],c=function(e){n.$apply(function(){i.unbind(l,c),s.resolve(i)})};return l&&i.bind(l,c),t(function(){angular.isString(a)?i.addClass(a):angular.isFunction(a)?a(i):angular.isObject(a)&&i.css(a),l||s.resolve(i)}),s.promise.cancel=function(){l&&i.unbind(l,c),s.reject("Transition cancelled")},s.promise},a=document.createElement("trans"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},s={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return r.transitionEndEventName=i(o),r.animationEndEventName=i(s),r}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(e){return{link:function(t,n,i){function r(t){function i(){c===r&&(c=void 0)}var r=e(n,t);return c&&c.cancel(),c=r,r.then(i,i),r}function a(){u?(u=!1,o()):(n.removeClass("collapse").addClass("collapsing"),r({height:n[0].scrollHeight+"px"}).then(o))}function o(){n.removeClass("collapsing"),n.addClass("collapse in"),n.css({height:"auto"})}function s(){if(u)u=!1,l(),n.css({height:0});else{n.css({height:n[0].scrollHeight+"px"});{n[0].offsetWidth}n.removeClass("collapse in").addClass("collapsing"),r({height:0}).then(l)}}function l(){n.removeClass("collapsing"),n.addClass("collapse")}var c,u=!0;t.$watch(i.collapse,function(e){e?s():a()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(i){var r=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;r&&angular.forEach(this.groups,function(e){e!==i&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(n){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,i){i.addGroup(e),e.$watch("isOpen",function(t){t&&i.closeOthers(e)}),e.toggleOpen=function(){e.isDisabled||(e.isOpen=!e.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,n,i,r){i.setHeading(r(e,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,n,i){e.$watch(function(){return i[n.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t,this.close=e.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(e){return{require:"alert",link:function(t,n,i,r){e(function(){r.close()},parseInt(i.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,n,i){var r=i[0],a=i[1];a.$render=function(){t.toggleClass(r.activeClass,angular.equals(a.$modelValue,e.$eval(n.btnRadio)))},t.bind(r.toggleEvent,function(){var i=t.hasClass(r.activeClass);(!i||angular.isDefined(n.uncheckable))&&e.$apply(function(){a.$setViewValue(i?null:e.$eval(n.btnRadio)),a.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,n,i){function r(){return o(n.btnCheckboxTrue,!0)}function a(){return o(n.btnCheckboxFalse,!1)}function o(t,n){var i=e.$eval(t);return angular.isDefined(i)?i:n}var s=i[0],l=i[1];l.$render=function(){t.toggleClass(s.activeClass,angular.equals(l.$modelValue,r()))},t.bind(s.toggleEvent,function(){e.$apply(function(){l.$setViewValue(t.hasClass(s.activeClass)?a():r()),l.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(e,t,n,i){function r(){a();var t=+e.interval;!isNaN(t)&&t>0&&(s=n(o,t))}function a(){s&&(n.cancel(s),s=null)}function o(){var t=+e.interval;l&&!isNaN(t)&&t>0?e.next():e.pause()}var s,l,c=this,u=c.slides=e.slides=[],d=-1;c.currentSlide=null;var p=!1;c.select=e.select=function(n,a){function o(){if(!p){if(c.currentSlide&&angular.isString(a)&&!e.noTransition&&n.$element){n.$element.addClass(a);{n.$element[0].offsetWidth}angular.forEach(u,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(n,{direction:a,active:!0,entering:!0}),angular.extend(c.currentSlide||{},{direction:a,leaving:!0}),e.$currentTransition=i(n.$element,{}),function(t,n){e.$currentTransition.then(function(){s(t,n)},function(){s(t,n)})}(n,c.currentSlide)}else s(n,c.currentSlide);c.currentSlide=n,d=l,r()}}function s(t,n){angular.extend(t,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(n||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null}var l=u.indexOf(n);void 0===a&&(a=l>d?"next":"prev"),n&&n!==c.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),t(o)):o())},e.$on("$destroy",function(){p=!0}),c.indexOfSlide=function(e){return u.indexOf(e)},e.next=function(){var t=(d+1)%u.length;return e.$currentTransition?void 0:c.select(u[t],"next")},e.prev=function(){var t=0>d-1?u.length-1:d-1;return e.$currentTransition?void 0:c.select(u[t],"prev")},e.isActive=function(e){return c.currentSlide===e},e.$watch("interval",r),e.$on("$destroy",a),e.play=function(){l||(l=!0,r())},e.pause=function(){e.noPause||(l=!1,a())},c.addSlide=function(t,n){t.$element=n,u.push(t),1===u.length||t.active?(c.select(u[u.length-1]),1==u.length&&e.play()):t.active=!1},c.removeSlide=function(e){var t=u.indexOf(e);u.splice(t,1),u.length>0&&e.active?c.select(t>=u.length?u[t-1]:u[t]):d>t&&d--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(e,t,n,i){i.addSlide(e,t),e.$on("$destroy",function(){i.removeSlide(e)}),e.$watch("active",function(t){t&&i.select(e)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,t){function n(e){var n=[],i=e.split("");return angular.forEach(r,function(t,r){var a=e.indexOf(r);if(a>-1){e=e.split(""),i[a]="("+t.regex+")",e[a]="$";for(var o=a+1,s=a+r.length;s>o;o++)i[o]="",e[o]="$";e=e.join(""),n.push({index:a,apply:t.apply})}}),{regex:new RegExp("^"+i.join("")+"$"),map:t(n,"index")}}function i(e,t,n){return 1===t&&n>28?29===n&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>n:!0}this.parsers={};var r={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(t,r){if(!angular.isString(t)||!r)return t;r=e.DATETIME_FORMATS[r]||r,this.parsers[r]||(this.parsers[r]=n(r));var a=this.parsers[r],o=a.regex,s=a.map,l=t.match(o);if(l&&l.length){for(var c,u={year:1900,month:0,date:1,hours:0},d=1,p=l.length;p>d;d++){var h=s[d-1];h.apply&&h.apply.call(u,l[d])}return i(u.year,u.month,u.date)&&(c=new Date(u.year,u.month,u.date,u.hours)),c}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function i(e){return"static"===(n(e,"position")||"static")}var r=function(t){for(var n=e[0],r=t.offsetParent||n;r&&r!==n&&i(r);)r=r.offsetParent;return r||n};return{position:function(t){var n=this.offset(t),i={top:0,left:0},a=r(t[0]);a!=e[0]&&(i=this.offset(angular.element(a)),i.top+=a.clientTop-a.scrollTop,i.left+=a.clientLeft-a.scrollLeft);var o=t[0].getBoundingClientRect();return{width:o.width||t.prop("offsetWidth"),height:o.height||t.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,i){var r,a,o,s,l=n.split("-"),c=l[0],u=l[1]||"center";r=i?this.offset(e):this.position(e),a=t.prop("offsetWidth"),o=t.prop("offsetHeight");var d={center:function(){return r.left+r.width/2-a/2},left:function(){return r.left},right:function(){return r.left+r.width}},p={center:function(){return r.top+r.height/2-o/2},top:function(){return r.top},bottom:function(){return r.top+r.height}};switch(c){case"right":s={top:p[u](),left:d[c]()};break;case"left":s={top:p[u](),left:r.left-a};break;case"bottom":s={top:p[c](),left:d[u]()};break;default:s={top:r.top-o,left:d[u]()}}return s}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(e,t,n,i,r,a,o,s){var l=this,c={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(n,r){l[n]=angular.isDefined(t[n])?8>r?i(t[n])(e.$parent):e.$parent.$eval(t[n]):s[n]}),angular.forEach(["minDate","maxDate"],function(i){t[i]?e.$parent.$watch(n(t[i]),function(e){l[i]=e?new Date(e):null,l.refreshView()}):l[i]=s[i]?new Date(s[i]):null}),e.datepickerMode=e.datepickerMode||s.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(t.initDate)?e.$parent.$eval(t.initDate):new Date,
e.isActive=function(t){return 0===l.compare(t.date,l.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){c=e,c.$render=function(){l.render()}},this.render=function(){if(c.$modelValue){var e=new Date(c.$modelValue),t=!isNaN(e);t?this.activeDate=e:a.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),c.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=c.$modelValue?new Date(c.$modelValue):null;c.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=c.$modelValue?new Date(c.$modelValue):null;return{date:e,label:o(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(n){return this.minDate&&this.compare(n,this.minDate)<0||this.maxDate&&this.compare(n,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:n,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===l.minMode){var n=c.$modelValue?new Date(c.$modelValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),c.$setViewValue(n),c.$render()}else l.activeDate=t,e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=l.activeDate.getFullYear()+e*(l.step.years||0),n=l.activeDate.getMonth()+e*(l.step.months||0);l.activeDate.setFullYear(t,n,1),l.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===l.maxMode&&1===t||e.datepickerMode===l.minMode&&-1===t||(e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var u=function(){r(function(){l.element[0].focus()},0,!1)};e.$on("datepicker.focus",u),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),t.stopPropagation(),"enter"===n||"space"===n){if(l.isDisabled(l.activeDate))return;e.select(l.activeDate),u()}else!t.ctrlKey||"up"!==n&&"down"!==n?(l.handleKeyDown(n,t),l.refreshView()):(e.toggleMode("up"===n?1:-1),u())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,n,i){var r=i[0],a=i[1];a&&r.init(a)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,n,i,r){function a(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?l[t]:29}function o(e,t){var n=new Array(t),i=new Date(e),r=0;for(i.setHours(12);t>r;)n[r++]=new Date(i),i.setDate(i.getDate()+1);return n}function s(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}t.showWeeks=r.showWeeks,r.step={months:1},r.element=n;var l=[31,28,31,30,31,30,31,31,30,31,30,31];r._refreshView=function(){var n=r.activeDate.getFullYear(),i=r.activeDate.getMonth(),a=new Date(n,i,1),l=r.startingDay-a.getDay(),c=l>0?7-l:-l,u=new Date(a);c>0&&u.setDate(-c+1);for(var d=o(u,42),p=0;42>p;p++)d[p]=angular.extend(r.createDateObject(d[p],r.formatDay),{secondary:d[p].getMonth()!==i,uid:t.uniqueId+"-"+p});t.labels=new Array(7);for(var h=0;7>h;h++)t.labels[h]={abbr:e(d[h].date,r.formatDayHeader),full:e(d[h].date,"EEEE")};if(t.title=e(r.activeDate,r.formatDayTitle),t.rows=r.split(d,7),t.showWeeks){t.weekNumbers=[];for(var f=s(t.rows[0][0].date),g=t.rows.length;t.weekNumbers.push(f++)<g;);}},r.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},r.handleKeyDown=function(e,t){var n=r.activeDate.getDate();if("left"===e)n-=1;else if("up"===e)n-=7;else if("right"===e)n+=1;else if("down"===e)n+=7;else if("pageup"===e||"pagedown"===e){var i=r.activeDate.getMonth()+("pageup"===e?-1:1);r.activeDate.setMonth(i,1),n=Math.min(a(r.activeDate.getFullYear(),r.activeDate.getMonth()),n)}else"home"===e?n=1:"end"===e&&(n=a(r.activeDate.getFullYear(),r.activeDate.getMonth()));r.activeDate.setDate(n)},r.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,n,i,r){r.step={years:1},r.element=n,r._refreshView=function(){for(var n=new Array(12),i=r.activeDate.getFullYear(),a=0;12>a;a++)n[a]=angular.extend(r.createDateObject(new Date(i,a,1),r.formatMonth),{uid:t.uniqueId+"-"+a});t.title=e(r.activeDate,r.formatMonthTitle),t.rows=r.split(n,3)},r.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},r.handleKeyDown=function(e,t){var n=r.activeDate.getMonth();if("left"===e)n-=1;else if("up"===e)n-=3;else if("right"===e)n+=1;else if("down"===e)n+=3;else if("pageup"===e||"pagedown"===e){var i=r.activeDate.getFullYear()+("pageup"===e?-1:1);r.activeDate.setFullYear(i)}else"home"===e?n=0:"end"===e&&(n=11);r.activeDate.setMonth(n)},r.refreshView()}}}]).directive("yearpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,n,i){function r(e){return parseInt((e-1)/a,10)*a+1}var a=i.yearRange;i.step={years:a},i.element=t,i._refreshView=function(){for(var t=new Array(a),n=0,o=r(i.activeDate.getFullYear());a>n;n++)t[n]=angular.extend(i.createDateObject(new Date(o+n,0,1),i.formatYear),{uid:e.uniqueId+"-"+n});e.title=[t[0].label,t[a-1].label].join(" - "),e.rows=i.split(t,5)},i.compare=function(e,t){return e.getFullYear()-t.getFullYear()},i.handleKeyDown=function(e,t){var n=i.activeDate.getFullYear();"left"===e?n-=1:"up"===e?n-=5:"right"===e?n+=1:"down"===e?n+=5:"pageup"===e||"pagedown"===e?n+=("pageup"===e?-1:1)*i.step.years:"home"===e?n=r(i.activeDate.getFullYear()):"end"===e&&(n=r(i.activeDate.getFullYear())+a-1),i.activeDate.setFullYear(n)},i.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(e,t,n,i,r,a,o){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(s,l,c,u){function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function p(e){if(e){if(angular.isDate(e)&&!isNaN(e))return u.$setValidity("date",!0),e;if(angular.isString(e)){var t=a.parse(e,h)||new Date(e);return isNaN(t)?void u.$setValidity("date",!1):(u.$setValidity("date",!0),t)}return void u.$setValidity("date",!1)}return u.$setValidity("date",!0),null}var h,f=angular.isDefined(c.closeOnDateSelection)?s.$parent.$eval(c.closeOnDateSelection):o.closeOnDateSelection,g=angular.isDefined(c.datepickerAppendToBody)?s.$parent.$eval(c.datepickerAppendToBody):o.appendToBody;s.showButtonBar=angular.isDefined(c.showButtonBar)?s.$parent.$eval(c.showButtonBar):o.showButtonBar,s.getText=function(e){return s[e+"Text"]||o[e+"Text"]},c.$observe("datepickerPopup",function(e){h=e||o.datepickerPopup,u.$render()});var m=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");m.attr({"ng-model":"date","ng-change":"dateSelection()"});var v=angular.element(m.children()[0]);c.datepickerOptions&&angular.forEach(s.$parent.$eval(c.datepickerOptions),function(e,t){v.attr(d(t),e)}),s.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(e){if(c[e]){var n=t(c[e]);if(s.$parent.$watch(n,function(t){s.watchData[e]=t}),v.attr(d(e),"watchData."+e),"datepickerMode"===e){var i=n.assign;s.$watch("watchData."+e,function(e,t){e!==t&&i(s.$parent,e)})}}}),c.dateDisabled&&v.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),u.$parsers.unshift(p),s.dateSelection=function(e){angular.isDefined(e)&&(s.date=e),u.$setViewValue(s.date),u.$render(),f&&(s.isOpen=!1,l[0].focus())},l.bind("input change keyup",function(){s.$apply(function(){s.date=u.$modelValue})}),u.$render=function(){var e=u.$viewValue?r(u.$viewValue,h):"";l.val(e),s.date=p(u.$modelValue)};var y=function(e){s.isOpen&&e.target!==l[0]&&s.$apply(function(){s.isOpen=!1})},b=function(e,t){s.keydown(e)};l.bind("keydown",b),s.keydown=function(e){27===e.which?(e.preventDefault(),e.stopPropagation(),s.close()):40!==e.which||s.isOpen||(s.isOpen=!0)},s.$watch("isOpen",function(e){e?(s.$broadcast("datepicker.focus"),s.position=g?i.offset(l):i.position(l),s.position.top=s.position.top+l.prop("offsetHeight"),n.bind("click",y)):n.unbind("click",y)}),s.select=function(e){if("today"===e){var t=new Date;angular.isDate(u.$modelValue)?(e=new Date(u.$modelValue),e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())):e=new Date(t.setHours(0,0,0,0))}s.dateSelection(e)},s.close=function(){s.isOpen=!1,l[0].focus()};var w=e(m)(s);m.remove(),g?n.find("body").append(w):l.after(w),s.$on("$destroy",function(){w.remove(),l.unbind("keydown",b),n.unbind("click",y)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t,n){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(e){var t=null;this.open=function(r){t||(e.bind("click",n),e.bind("keydown",i)),t&&t!==r&&(t.isOpen=!1),t=r},this.close=function(r){t===r&&(t=null,e.unbind("click",n),e.unbind("keydown",i))};var n=function(e){if(t){var n=t.getToggleElement();e&&n&&n[0].contains(e.target)||t.$apply(function(){t.isOpen=!1})}},i=function(e){27===e.which&&(t.focusToggleElement(),n())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(e,t,n,i,r,a){var o,s=this,l=e.$new(),c=i.openClass,u=angular.noop,d=t.onToggle?n(t.onToggle):angular.noop;this.init=function(i){s.$element=i,t.isOpen&&(o=n(t.isOpen),u=o.assign,e.$watch(o,function(e){l.isOpen=!!e}))},this.toggle=function(e){return l.isOpen=arguments.length?!!e:!l.isOpen},this.isOpen=function(){return l.isOpen},l.getToggleElement=function(){return s.toggleElement},l.focusToggleElement=function(){s.toggleElement&&s.toggleElement[0].focus()},l.$watch("isOpen",function(t,n){a[t?"addClass":"removeClass"](s.$element,c),t?(l.focusToggleElement(),r.open(l)):r.close(l),u(e,t),angular.isDefined(t)&&t!==n&&d(e,{open:!!t})}),e.$on("$locationChangeSuccess",function(){l.isOpen=!1}),e.$on("$destroy",function(){l.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(e,t,n,i){i.init(t)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(e,t,n,i){if(i){i.toggleElement=t;var r=function(r){r.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){i.toggle()})};t.bind("click",r),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(i.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",r)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,i=0;i<e.length;i++)if(t==e[i].key){n=i;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$timeout",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(t,n,i){t.backdropClass=i.backdropClass||"",t.animate=!1,e(function(){t.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(n,i,r){i.addClass(r.windowClass||""),n.size=r.size,t(function(){n.animate=!0,i[0].querySelectorAll("[autofocus]").length||i[0].focus()}),n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!=n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(e,t,n,i,r){r(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,n,i,r,a){function o(){for(var e=-1,t=h.keys(),n=0;n<t.length;n++)h.get(t[n]).value.backdrop&&(e=n);return e}function s(e){var t=n.find("body").eq(0),i=h.get(e).value;h.remove(e),c(i.modalDomEl,i.modalScope,300,function(){i.modalScope.$destroy(),t.toggleClass(p,h.length()>0),l()})}function l(){if(u&&-1==o()){var e=d;c(u,d,150,function(){e.$destroy(),e=null}),u=void 0,d=void 0}}function c(n,i,r,a){function o(){o.done||(o.done=!0,n.remove(),a&&a())}i.animate=!1;var s=e.transitionEndEventName;if(s){var l=t(o,r);n.bind(s,function(){t.cancel(l),o(),i.$apply()})}else t(o)}var u,d,p="modal-open",h=a.createNew(),f={};return r.$watch(o,function(e){d&&(d.index=e)}),n.bind("keydown",function(e){var t;27===e.which&&(t=h.top(),t&&t.value.keyboard&&(e.preventDefault(),r.$apply(function(){f.dismiss(t.key,"escape key press")})))}),f.open=function(e,t){h.add(e,{deferred:t.deferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var a=n.find("body").eq(0),s=o();if(s>=0&&!u){d=r.$new(!0),d.index=s;var l=angular.element("<div modal-backdrop></div>");l.attr("backdrop-class",t.backdropClass),u=i(l)(d),a.append(u)}var c=angular.element("<div modal-window></div>");c.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:h.length()-1,animate:"animate"}).html(t.content);var f=i(c)(t.scope);h.top().value.modalDomEl=f,a.append(f),a.addClass(p)},f.close=function(e,t){var n=h.get(e);n&&(n.value.deferred.resolve(t),s(e))},f.dismiss=function(e,t){var n=h.get(e);n&&(n.value.deferred.reject(t),s(e))},f.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},f.getTop=function(){return h.top()},f}]).provider("$modal",function(){var e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,n,i,r,a,o,s){function l(e){return e.template?i.when(e.template):r.get(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl,{cache:a}).then(function(e){return e.data})}function c(e){var n=[];return angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&n.push(i.when(t.invoke(e)))}),n}var u={};return u.open=function(t){var r=i.defer(),a=i.defer(),u={result:r.promise,opened:a.promise,close:function(e){s.close(u,e)},dismiss:function(e){s.dismiss(u,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var d=i.all([l(t)].concat(c(t.resolve)));return d.then(function(e){var i=(t.scope||n).$new();i.$close=u.close,i.$dismiss=u.dismiss;var a,l={},c=1;t.controller&&(l.$scope=i,l.$modalInstance=u,angular.forEach(t.resolve,function(t,n){l[n]=e[c++]}),a=o(t.controller,l),t.controllerAs&&(i[t.controllerAs]=a)),s.open(u,{scope:i,deferred:r,content:e[0],backdrop:t.backdrop,keyboard:t.keyboard,backdropClass:t.backdropClass,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size})},function(e){r.reject(e)}),d.then(function(){a.resolve(!0)},function(){a.reject(!1)}),u},u}]};return e}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,t,n){var i=this,r={$setViewValue:angular.noop},a=t.numPages?n(t.numPages).assign:angular.noop;this.init=function(a,o){r=a,this.config=o,r.$render=function(){i.render()},t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),function(t){i.itemsPerPage=parseInt(t,10),e.totalPages=i.calculateTotalPages()}):this.itemsPerPage=o.itemsPerPage},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(r.$viewValue,10)||1},e.selectPage=function(t){e.page!==t&&t>0&&t<=e.totalPages&&(r.$setViewValue(t),r.$render())},e.getText=function(t){return e[t+"Text"]||i.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages},e.$watch("totalItems",function(){e.totalPages=i.calculateTotalPages()}),e.$watch("totalPages",function(t){a(e.$parent,t),e.page>t?e.selectPage(t):r.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(n,i,r,a){function o(e,t,n){return{number:e,text:t,active:n}}function s(e,t){var n=[],i=1,r=t,a=angular.isDefined(u)&&t>u;a&&(d?(i=Math.max(e-Math.floor(u/2),1),r=i+u-1,r>t&&(r=t,i=r-u+1)):(i=(Math.ceil(e/u)-1)*u+1,r=Math.min(i+u-1,t)));for(var s=i;r>=s;s++){var l=o(s,s,s===e);n.push(l)}if(a&&!d){if(i>1){var c=o(i-1,"...",!1);n.unshift(c)}if(t>r){var p=o(r+1,"...",!1);n.push(p)}}return n}var l=a[0],c=a[1];if(c){var u=angular.isDefined(r.maxSize)?n.$parent.$eval(r.maxSize):t.maxSize,d=angular.isDefined(r.rotate)?n.$parent.$eval(r.rotate):t.rotate;n.boundaryLinks=angular.isDefined(r.boundaryLinks)?n.$parent.$eval(r.boundaryLinks):t.boundaryLinks,n.directionLinks=angular.isDefined(r.directionLinks)?n.$parent.$eval(r.directionLinks):t.directionLinks,l.init(c,t),r.maxSize&&n.$parent.$watch(e(r.maxSize),function(e){u=parseInt(e,10),l.render()});var p=l.render;l.render=function(){p(),n.page>0&&n.page<=n.totalPages&&(n.pages=s(n.page,n.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,n,i,r){var a=r[0],o=r[1];o&&(t.align=angular.isDefined(i.align)?t.$parent.$eval(i.align):e.align,a.init(o,e))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function e(e){var t=/[A-Z]/g,n="-";return e.replace(t,function(e,t){return(t?n:"")+e.toLowerCase()})}var t={placement:"top",animation:!0,popupDelay:0},n={mouseenter:"mouseleave",click:"click",focus:"blur"},i={};this.options=function(e){angular.extend(i,e)},this.setTriggers=function(e){angular.extend(n,e)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(r,a,o,s,l,c){return function(r,u,d){function p(e){var t=e||h.trigger||d,i=n[t]||t;return{show:t,hide:i}}var h=angular.extend({},t,i),f=e(r),g=c.startSymbol(),m=c.endSymbol(),v="<div "+f+'-popup title="'+g+"title"+m+'" content="'+g+"content"+m+'" placement="'+g+"placement"+m+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(e,t){var n=a(v);return function(e,t,i){function a(){E.isOpen?d():c()}function c(){(!A||e.$eval(i[u+"Enable"]))&&(y(),E.popupDelay?_||(_=o(f,E.popupDelay,!1),_.then(function(e){e()})):f()())}function d(){e.$apply(function(){g()})}function f(){return _=null,S&&(o.cancel(S),S=null),E.content?(m(),k.css({top:0,left:0,display:"block"}),T?s.find("body").append(k):t.after(k),P(),E.isOpen=!0,E.$digest(),P):angular.noop}function g(){E.isOpen=!1,o.cancel(_),_=null,E.animation?S||(S=o(v,500)):v()}function m(){k&&v(),C=E.$new(),k=n(C,angular.noop)}function v(){S=null,k&&(k.remove(),k=null),C&&(C.$destroy(),C=null)}function y(){b(),w()}function b(){var e=i[u+"Placement"];E.placement=angular.isDefined(e)?e:h.placement}function w(){var e=i[u+"PopupDelay"],t=parseInt(e,10);E.popupDelay=isNaN(t)?h.popupDelay:t}function x(){var e=i[u+"Trigger"];I(),$=p(e),$.show===$.hide?t.bind($.show,a):(t.bind($.show,c),t.bind($.hide,d))}var k,C,S,_,T=angular.isDefined(h.appendToBody)?h.appendToBody:!1,$=p(void 0),A=angular.isDefined(i[u+"Enable"]),E=e.$new(!0),P=function(){var e=l.positionElements(t,k,E.placement,T);e.top+="px",e.left+="px",k.css(e)};E.isOpen=!1,i.$observe(r,function(e){E.content=e,!e&&E.isOpen&&g()}),i.$observe(u+"Title",function(e){E.title=e});var I=function(){t.unbind($.show,c),t.unbind($.hide,d)};x();var D=e.$eval(i[u+"Animation"]);E.animation=angular.isDefined(D)?!!D:h.animation;var M=e.$eval(i[u+"AppendToBody"]);T=angular.isDefined(M)?M:T,T&&e.$on("$locationChangeSuccess",function(){E.isOpen&&g()}),e.$on("$destroy",function(){o.cancel(S),o.cancel(_),I(),v(),E=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(e,t,n){var i=this,r=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max,this.addBar=function(t,n){r||n.css({transition:"none"}),this.bars.push(t),t.$watch("value",function(n){t.percent=+(100*n/e.max).toFixed(2)}),t.$on("$destroy",function(){n=null,i.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,n,i){i.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,n,i){i.addBar(e,angular.element(t.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(e,t,n){var i={$setViewValue:angular.noop};this.init=function(r){i=r,i.$render=this.render,this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):n.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):n.stateOff;var a=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max);e.range=this.buildTemplateObjects(a)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;n>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff},e[t]);return e},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(i.$setViewValue(t),i.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=i.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=i.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,n,i){var r=i[0],a=i[1];a&&r.init(a)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(e){var t=this,n=t.tabs=e.tabs=[];t.select=function(e){angular.forEach(n,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect())}),e.active=!0,e.onSelect()},t.addTab=function(e){n.push(e),1===n.length?e.active=!0:e.active&&t.select(e)},t.removeTab=function(e){var r=n.indexOf(e);if(e.active&&n.length>1&&!i){var a=r==n.length-1?r-1:r+1;t.select(n[a])}n.splice(r,1)};var i;e.$on("$destroy",function(){i=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,n){e.vertical=angular.isDefined(n.vertical)?e.$parent.$eval(n.vertical):!1,e.justified=angular.isDefined(n.justified)?e.$parent.$eval(n.justified):!1}}}).directive("tab",["$parse",function(e){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(t,n,i){return function(t,n,r,a){t.$watch("active",function(e){e&&a.select(t)}),t.disabled=!1,r.disabled&&t.$parent.$watch(e(r.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},a.addTab(t),t.$on("$destroy",function(){a.removeTab(t)}),t.$transcludeFn=i}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t,n,i){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(t,n,i){var r=t.$eval(i.tabContentTransclude);r.$transcludeFn(r.$parent,function(t){angular.forEach(t,function(t){e(t)?r.headingElement=t:n.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(e,t,n,i,r,a){function o(){var t=parseInt(e.hours,10),n=e.showMeridian?t>0&&13>t:t>=0&&24>t;return n?(e.showMeridian&&(12===t&&(t=0),e.meridian===g[1]&&(t+=12)),t):void 0}function s(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function l(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e}function c(e){u(),f.$setViewValue(new Date(h)),d(e)}function u(){f.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function d(t){var n=h.getHours(),i=h.getMinutes();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:l(n),e.minutes="m"===t?i:l(i),e.meridian=h.getHours()<12?g[0]:g[1]}function p(e){var t=new Date(h.getTime()+6e4*e);h.setHours(t.getHours(),t.getMinutes()),c()}var h=new Date,f={$setViewValue:angular.noop},g=angular.isDefined(t.meridians)?e.$parent.$eval(t.meridians):a.meridians||r.DATETIME_FORMATS.AMPMS;this.init=function(n,i){f=n,f.$render=this.render;var r=i.eq(0),o=i.eq(1),s=angular.isDefined(t.mousewheel)?e.$parent.$eval(t.mousewheel):a.mousewheel;s&&this.setupMousewheelEvents(r,o),e.readonlyInput=angular.isDefined(t.readonlyInput)?e.$parent.$eval(t.readonlyInput):a.readonlyInput,this.setupInputEvents(r,o)};var m=a.hourStep;t.hourStep&&e.$parent.$watch(n(t.hourStep),function(e){m=parseInt(e,10)});var v=a.minuteStep;t.minuteStep&&e.$parent.$watch(n(t.minuteStep),function(e){v=parseInt(e,10)}),e.showMeridian=a.showMeridian,t.showMeridian&&e.$parent.$watch(n(t.showMeridian),function(t){if(e.showMeridian=!!t,f.$error.time){var n=o(),i=s();angular.isDefined(n)&&angular.isDefined(i)&&(h.setHours(n),c())}else d()}),this.setupMousewheelEvents=function(t,n){var i=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),n.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupInputEvents=function(t,n){if(e.readonlyInput)return e.updateHours=angular.noop,void(e.updateMinutes=angular.noop);var i=function(t,n){f.$setViewValue(null),f.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(n)&&(e.invalidMinutes=n)};e.updateHours=function(){var e=o();angular.isDefined(e)?(h.setHours(e),c("h")):i(!0)},t.bind("blur",function(t){!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=l(e.hours)})}),e.updateMinutes=function(){var e=s();angular.isDefined(e)?(h.setMinutes(e),c("m")):i(void 0,!0)},n.bind("blur",function(t){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=l(e.minutes)})})},this.render=function(){var e=f.$modelValue?new Date(f.$modelValue):null;isNaN(e)?(f.$setValidity("time",!1),i.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(h=e),u(),d())},e.incrementHours=function(){p(60*m)},e.decrementHours=function(){p(60*-m)},e.incrementMinutes=function(){p(v)},e.decrementMinutes=function(){p(-v)},e.toggleMeridian=function(){p(720*(h.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,n,i){var r=i[0],a=i[1];a&&r.init(a,t.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var i=n.match(t);if(!i)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:i[3],source:e(i[4]),viewMapper:e(i[2]||i[1]),modelMapper:e(i[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,n,i,r,a,o){var s=[9,13,27,38,40];return{require:"ngModel",link:function(l,c,u,d){var p,h=l.$eval(u.typeaheadMinLength)||1,f=l.$eval(u.typeaheadWaitMs)||0,g=l.$eval(u.typeaheadEditable)!==!1,m=t(u.typeaheadLoading).assign||angular.noop,v=t(u.typeaheadOnSelect),y=u.typeaheadInputFormatter?t(u.typeaheadInputFormatter):void 0,b=u.typeaheadAppendToBody?l.$eval(u.typeaheadAppendToBody):!1,w=l.$eval(u.typeaheadFocusFirst)!==!1,x=t(u.ngModel).assign,k=o.parse(u.typeahead),C=l.$new();l.$on("$destroy",function(){
C.$destroy()});var S="typeahead-"+C.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":S});var _=angular.element("<div typeahead-popup></div>");_.attr({id:S,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(u.typeaheadTemplateUrl)&&_.attr("template-url",u.typeaheadTemplateUrl);var T=function(){C.matches=[],C.activeIdx=-1,c.attr("aria-expanded",!1)},$=function(e){return S+"-option-"+e};C.$watch("activeIdx",function(e){0>e?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",$(e))});var A=function(e){var t={$viewValue:e};m(l,!0),n.when(k.source(l,t)).then(function(n){var i=e===d.$viewValue;if(i&&p)if(n.length>0){C.activeIdx=w?0:-1,C.matches.length=0;for(var r=0;r<n.length;r++)t[k.itemName]=n[r],C.matches.push({id:$(r),label:k.viewMapper(C,t),model:n[r]});C.query=e,C.position=b?a.offset(c):a.position(c),C.position.top=C.position.top+c.prop("offsetHeight"),c.attr("aria-expanded",!0)}else T();i&&m(l,!1)},function(){T(),m(l,!1)})};T(),C.query=void 0;var E,P=function(e){E=i(function(){A(e)},f)},I=function(){E&&i.cancel(E)};d.$parsers.unshift(function(e){return p=!0,e&&e.length>=h?f>0?(I(),P(e)):A(e):(m(l,!1),I(),T()),g?e:e?void d.$setValidity("editable",!1):(d.$setValidity("editable",!0),e)}),d.$formatters.push(function(e){var t,n,i={};return y?(i.$model=e,y(l,i)):(i[k.itemName]=e,t=k.viewMapper(l,i),i[k.itemName]=void 0,n=k.viewMapper(l,i),t!==n?t:e)}),C.select=function(e){var t,n,r={};r[k.itemName]=n=C.matches[e].model,t=k.modelMapper(l,r),x(l,t),d.$setValidity("editable",!0),v(l,{$item:n,$model:t,$label:k.viewMapper(l,r)}),T(),i(function(){c[0].focus()},0,!1)},c.bind("keydown",function(e){0!==C.matches.length&&-1!==s.indexOf(e.which)&&(-1!=C.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(C.activeIdx=(C.activeIdx+1)%C.matches.length,C.$digest()):38===e.which?(C.activeIdx=(C.activeIdx>0?C.activeIdx:C.matches.length)-1,C.$digest()):13===e.which||9===e.which?C.$apply(function(){C.select(C.activeIdx)}):27===e.which&&(e.stopPropagation(),T(),C.$digest()))}),c.bind("blur",function(e){p=!1});var D=function(e){c[0]!==e.target&&(T(),C.$digest())};r.bind("click",D),l.$on("$destroy",function(){r.unbind("click",D),b&&M.remove()});var M=e(_)(C);b?r.find("body").append(M):c.after(M)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,n){e.templateUrl=n.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(e,t,n,i){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(r,a,o){var s=i(o.templateUrl)(r.$parent)||"template/typeahead/typeahead-match.html";e.get(s,{cache:t}).success(function(e){a.replaceWith(n(e.trim())(r))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n?(""+t).replace(new RegExp(e(n),"gi"),"<strong>$&</strong>"):t}}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,n){function i(e){for(var t in e)if(void 0!==a.style[t])return e[t]}var r=function(i,a,o){o=o||{};var s=e.defer(),l=r[o.animation?"animationEndEventName":"transitionEndEventName"],c=function(e){n.$apply(function(){i.unbind(l,c),s.resolve(i)})};return l&&i.bind(l,c),t(function(){angular.isString(a)?i.addClass(a):angular.isFunction(a)?a(i):angular.isObject(a)&&i.css(a),l||s.resolve(i)}),s.promise.cancel=function(){l&&i.unbind(l,c),s.reject("Transition cancelled")},s.promise},a=document.createElement("trans"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},s={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return r.transitionEndEventName=i(o),r.animationEndEventName=i(s),r}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(e){return{link:function(t,n,i){function r(t){function i(){c===r&&(c=void 0)}var r=e(n,t);return c&&c.cancel(),c=r,r.then(i,i),r}function a(){u?(u=!1,o()):(n.removeClass("collapse").addClass("collapsing"),r({height:n[0].scrollHeight+"px"}).then(o))}function o(){n.removeClass("collapsing"),n.addClass("collapse in"),n.css({height:"auto"})}function s(){if(u)u=!1,l(),n.css({height:0});else{n.css({height:n[0].scrollHeight+"px"});{n[0].offsetWidth}n.removeClass("collapse in").addClass("collapsing"),r({height:0}).then(l)}}function l(){n.removeClass("collapsing"),n.addClass("collapse")}var c,u=!0;t.$watch(i.collapse,function(e){e?s():a()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(i){var r=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;r&&angular.forEach(this.groups,function(e){e!==i&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(n){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,i){i.addGroup(e),e.$watch("isOpen",function(t){t&&i.closeOthers(e)}),e.toggleOpen=function(){e.isDisabled||(e.isOpen=!e.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,n,i,r){i.setHeading(r(e,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,n,i){e.$watch(function(){return i[n.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t,this.close=e.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(e){return{require:"alert",link:function(t,n,i,r){e(function(){r.close()},parseInt(i.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,n,i){var r=i[0],a=i[1];a.$render=function(){t.toggleClass(r.activeClass,angular.equals(a.$modelValue,e.$eval(n.btnRadio)))},t.bind(r.toggleEvent,function(){var i=t.hasClass(r.activeClass);(!i||angular.isDefined(n.uncheckable))&&e.$apply(function(){a.$setViewValue(i?null:e.$eval(n.btnRadio)),a.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,n,i){function r(){return o(n.btnCheckboxTrue,!0)}function a(){return o(n.btnCheckboxFalse,!1)}function o(t,n){var i=e.$eval(t);return angular.isDefined(i)?i:n}var s=i[0],l=i[1];l.$render=function(){t.toggleClass(s.activeClass,angular.equals(l.$modelValue,r()))},t.bind(s.toggleEvent,function(){e.$apply(function(){l.$setViewValue(t.hasClass(s.activeClass)?a():r()),l.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(e,t,n,i){function r(){a();var t=+e.interval;!isNaN(t)&&t>0&&(s=n(o,t))}function a(){s&&(n.cancel(s),s=null)}function o(){var t=+e.interval;l&&!isNaN(t)&&t>0?e.next():e.pause()}var s,l,c=this,u=c.slides=e.slides=[],d=-1;c.currentSlide=null;var p=!1;c.select=e.select=function(n,a){function o(){if(!p){if(c.currentSlide&&angular.isString(a)&&!e.noTransition&&n.$element){n.$element.addClass(a);{n.$element[0].offsetWidth}angular.forEach(u,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(n,{direction:a,active:!0,entering:!0}),angular.extend(c.currentSlide||{},{direction:a,leaving:!0}),e.$currentTransition=i(n.$element,{}),function(t,n){e.$currentTransition.then(function(){s(t,n)},function(){s(t,n)})}(n,c.currentSlide)}else s(n,c.currentSlide);c.currentSlide=n,d=l,r()}}function s(t,n){angular.extend(t,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(n||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null}var l=u.indexOf(n);void 0===a&&(a=l>d?"next":"prev"),n&&n!==c.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),t(o)):o())},e.$on("$destroy",function(){p=!0}),c.indexOfSlide=function(e){return u.indexOf(e)},e.next=function(){var t=(d+1)%u.length;return e.$currentTransition?void 0:c.select(u[t],"next")},e.prev=function(){var t=0>d-1?u.length-1:d-1;return e.$currentTransition?void 0:c.select(u[t],"prev")},e.isActive=function(e){return c.currentSlide===e},e.$watch("interval",r),e.$on("$destroy",a),e.play=function(){l||(l=!0,r())},e.pause=function(){e.noPause||(l=!1,a())},c.addSlide=function(t,n){t.$element=n,u.push(t),1===u.length||t.active?(c.select(u[u.length-1]),1==u.length&&e.play()):t.active=!1},c.removeSlide=function(e){var t=u.indexOf(e);u.splice(t,1),u.length>0&&e.active?c.select(t>=u.length?u[t-1]:u[t]):d>t&&d--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(e,t,n,i){i.addSlide(e,t),e.$on("$destroy",function(){i.removeSlide(e)}),e.$watch("active",function(t){t&&i.select(e)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,t){function n(e){var n=[],i=e.split("");return angular.forEach(r,function(t,r){var a=e.indexOf(r);if(a>-1){e=e.split(""),i[a]="("+t.regex+")",e[a]="$";for(var o=a+1,s=a+r.length;s>o;o++)i[o]="",e[o]="$";e=e.join(""),n.push({index:a,apply:t.apply})}}),{regex:new RegExp("^"+i.join("")+"$"),map:t(n,"index")}}function i(e,t,n){return 1===t&&n>28?29===n&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>n:!0}this.parsers={};var r={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(t,r){if(!angular.isString(t)||!r)return t;r=e.DATETIME_FORMATS[r]||r,this.parsers[r]||(this.parsers[r]=n(r));var a=this.parsers[r],o=a.regex,s=a.map,l=t.match(o);if(l&&l.length){for(var c,u={year:1900,month:0,date:1,hours:0},d=1,p=l.length;p>d;d++){var h=s[d-1];h.apply&&h.apply.call(u,l[d])}return i(u.year,u.month,u.date)&&(c=new Date(u.year,u.month,u.date,u.hours)),c}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function i(e){return"static"===(n(e,"position")||"static")}var r=function(t){for(var n=e[0],r=t.offsetParent||n;r&&r!==n&&i(r);)r=r.offsetParent;return r||n};return{position:function(t){var n=this.offset(t),i={top:0,left:0},a=r(t[0]);a!=e[0]&&(i=this.offset(angular.element(a)),i.top+=a.clientTop-a.scrollTop,i.left+=a.clientLeft-a.scrollLeft);var o=t[0].getBoundingClientRect();return{width:o.width||t.prop("offsetWidth"),height:o.height||t.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,i){var r,a,o,s,l=n.split("-"),c=l[0],u=l[1]||"center";r=i?this.offset(e):this.position(e),a=t.prop("offsetWidth"),o=t.prop("offsetHeight");var d={center:function(){return r.left+r.width/2-a/2},left:function(){return r.left},right:function(){return r.left+r.width}},p={center:function(){return r.top+r.height/2-o/2},top:function(){return r.top},bottom:function(){return r.top+r.height}};switch(c){case"right":s={top:p[u](),left:d[c]()};break;case"left":s={top:p[u](),left:r.left-a};break;case"bottom":s={top:p[c](),left:d[u]()};break;default:s={top:r.top-o,left:d[u]()}}return s}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(e,t,n,i,r,a,o,s){var l=this,c={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(n,r){l[n]=angular.isDefined(t[n])?8>r?i(t[n])(e.$parent):e.$parent.$eval(t[n]):s[n]}),angular.forEach(["minDate","maxDate"],function(i){t[i]?e.$parent.$watch(n(t[i]),function(e){l[i]=e?new Date(e):null,l.refreshView()}):l[i]=s[i]?new Date(s[i]):null}),e.datepickerMode=e.datepickerMode||s.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(t.initDate)?e.$parent.$eval(t.initDate):new Date,e.isActive=function(t){return 0===l.compare(t.date,l.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){c=e,c.$render=function(){l.render()}},this.render=function(){if(c.$modelValue){var e=new Date(c.$modelValue),t=!isNaN(e);t?this.activeDate=e:a.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),c.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=c.$modelValue?new Date(c.$modelValue):null;c.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=c.$modelValue?new Date(c.$modelValue):null;return{date:e,label:o(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(n){return this.minDate&&this.compare(n,this.minDate)<0||this.maxDate&&this.compare(n,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:n,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===l.minMode){var n=c.$modelValue?new Date(c.$modelValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),c.$setViewValue(n),c.$render()}else l.activeDate=t,e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=l.activeDate.getFullYear()+e*(l.step.years||0),n=l.activeDate.getMonth()+e*(l.step.months||0);l.activeDate.setFullYear(t,n,1),l.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===l.maxMode&&1===t||e.datepickerMode===l.minMode&&-1===t||(e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var u=function(){r(function(){l.element[0].focus()},0,!1)};e.$on("datepicker.focus",u),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),t.stopPropagation(),"enter"===n||"space"===n){if(l.isDisabled(l.activeDate))return;e.select(l.activeDate),u()}else!t.ctrlKey||"up"!==n&&"down"!==n?(l.handleKeyDown(n,t),l.refreshView()):(e.toggleMode("up"===n?1:-1),u())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,n,i){var r=i[0],a=i[1];a&&r.init(a)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,n,i,r){function a(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?l[t]:29}function o(e,t){var n=new Array(t),i=new Date(e),r=0;for(i.setHours(12);t>r;)n[r++]=new Date(i),i.setDate(i.getDate()+1);return n}function s(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}t.showWeeks=r.showWeeks,r.step={months:1},r.element=n;var l=[31,28,31,30,31,30,31,31,30,31,30,31];r._refreshView=function(){var n=r.activeDate.getFullYear(),i=r.activeDate.getMonth(),a=new Date(n,i,1),l=r.startingDay-a.getDay(),c=l>0?7-l:-l,u=new Date(a);c>0&&u.setDate(-c+1);for(var d=o(u,42),p=0;42>p;p++)d[p]=angular.extend(r.createDateObject(d[p],r.formatDay),{secondary:d[p].getMonth()!==i,uid:t.uniqueId+"-"+p});t.labels=new Array(7);for(var h=0;7>h;h++)t.labels[h]={abbr:e(d[h].date,r.formatDayHeader),full:e(d[h].date,"EEEE")};if(t.title=e(r.activeDate,r.formatDayTitle),t.rows=r.split(d,7),t.showWeeks){t.weekNumbers=[];for(var f=s(t.rows[0][0].date),g=t.rows.length;t.weekNumbers.push(f++)<g;);}},r.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},r.handleKeyDown=function(e,t){var n=r.activeDate.getDate();if("left"===e)n-=1;else if("up"===e)n-=7;else if("right"===e)n+=1;else if("down"===e)n+=7;else if("pageup"===e||"pagedown"===e){var i=r.activeDate.getMonth()+("pageup"===e?-1:1);r.activeDate.setMonth(i,1),n=Math.min(a(r.activeDate.getFullYear(),r.activeDate.getMonth()),n)}else"home"===e?n=1:"end"===e&&(n=a(r.activeDate.getFullYear(),r.activeDate.getMonth()));r.activeDate.setDate(n)},r.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,n,i,r){r.step={years:1},r.element=n,r._refreshView=function(){for(var n=new Array(12),i=r.activeDate.getFullYear(),a=0;12>a;a++)n[a]=angular.extend(r.createDateObject(new Date(i,a,1),r.formatMonth),{uid:t.uniqueId+"-"+a});t.title=e(r.activeDate,r.formatMonthTitle),t.rows=r.split(n,3)},r.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},r.handleKeyDown=function(e,t){var n=r.activeDate.getMonth();if("left"===e)n-=1;else if("up"===e)n-=3;else if("right"===e)n+=1;else if("down"===e)n+=3;else if("pageup"===e||"pagedown"===e){var i=r.activeDate.getFullYear()+("pageup"===e?-1:1);r.activeDate.setFullYear(i)}else"home"===e?n=0:"end"===e&&(n=11);r.activeDate.setMonth(n)},r.refreshView()}}}]).directive("yearpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,n,i){function r(e){return parseInt((e-1)/a,10)*a+1}var a=i.yearRange;i.step={years:a},i.element=t,i._refreshView=function(){for(var t=new Array(a),n=0,o=r(i.activeDate.getFullYear());a>n;n++)t[n]=angular.extend(i.createDateObject(new Date(o+n,0,1),i.formatYear),{uid:e.uniqueId+"-"+n});e.title=[t[0].label,t[a-1].label].join(" - "),e.rows=i.split(t,5)},i.compare=function(e,t){return e.getFullYear()-t.getFullYear()},i.handleKeyDown=function(e,t){var n=i.activeDate.getFullYear();"left"===e?n-=1:"up"===e?n-=5:"right"===e?n+=1:"down"===e?n+=5:"pageup"===e||"pagedown"===e?n+=("pageup"===e?-1:1)*i.step.years:"home"===e?n=r(i.activeDate.getFullYear()):"end"===e&&(n=r(i.activeDate.getFullYear())+a-1),i.activeDate.setFullYear(n)},i.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(e,t,n,i,r,a,o){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(s,l,c,u){function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function p(e){if(e){if(angular.isDate(e)&&!isNaN(e))return u.$setValidity("date",!0),e;if(angular.isString(e)){var t=a.parse(e,h)||new Date(e);return isNaN(t)?void u.$setValidity("date",!1):(u.$setValidity("date",!0),t)}return void u.$setValidity("date",!1)}return u.$setValidity("date",!0),null}var h,f=angular.isDefined(c.closeOnDateSelection)?s.$parent.$eval(c.closeOnDateSelection):o.closeOnDateSelection,g=angular.isDefined(c.datepickerAppendToBody)?s.$parent.$eval(c.datepickerAppendToBody):o.appendToBody;s.showButtonBar=angular.isDefined(c.showButtonBar)?s.$parent.$eval(c.showButtonBar):o.showButtonBar,s.getText=function(e){return s[e+"Text"]||o[e+"Text"]},c.$observe("datepickerPopup",function(e){h=e||o.datepickerPopup,u.$render()});var m=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");m.attr({"ng-model":"date","ng-change":"dateSelection()"});var v=angular.element(m.children()[0]);c.datepickerOptions&&angular.forEach(s.$parent.$eval(c.datepickerOptions),function(e,t){v.attr(d(t),e)}),s.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(e){if(c[e]){var n=t(c[e]);if(s.$parent.$watch(n,function(t){s.watchData[e]=t}),v.attr(d(e),"watchData."+e),"datepickerMode"===e){var i=n.assign;s.$watch("watchData."+e,function(e,t){e!==t&&i(s.$parent,e)})}}}),c.dateDisabled&&v.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),u.$parsers.unshift(p),s.dateSelection=function(e){angular.isDefined(e)&&(s.date=e),u.$setViewValue(s.date),u.$render(),f&&(s.isOpen=!1,l[0].focus())},l.bind("input change keyup",function(){s.$apply(function(){s.date=u.$modelValue})}),u.$render=function(){var e=u.$viewValue?r(u.$viewValue,h):"";l.val(e),s.date=p(u.$modelValue)};var y=function(e){s.isOpen&&e.target!==l[0]&&s.$apply(function(){s.isOpen=!1})},b=function(e,t){s.keydown(e)};l.bind("keydown",b),s.keydown=function(e){27===e.which?(e.preventDefault(),e.stopPropagation(),s.close()):40!==e.which||s.isOpen||(s.isOpen=!0)},s.$watch("isOpen",function(e){e?(s.$broadcast("datepicker.focus"),s.position=g?i.offset(l):i.position(l),s.position.top=s.position.top+l.prop("offsetHeight"),n.bind("click",y)):n.unbind("click",y)}),s.select=function(e){if("today"===e){var t=new Date;angular.isDate(u.$modelValue)?(e=new Date(u.$modelValue),e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())):e=new Date(t.setHours(0,0,0,0))}s.dateSelection(e)},s.close=function(){s.isOpen=!1,l[0].focus()};var w=e(m)(s);m.remove(),g?n.find("body").append(w):l.after(w),s.$on("$destroy",function(){w.remove(),l.unbind("keydown",b),n.unbind("click",y)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t,n){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(e){var t=null;this.open=function(r){t||(e.bind("click",n),e.bind("keydown",i)),t&&t!==r&&(t.isOpen=!1),t=r},this.close=function(r){t===r&&(t=null,e.unbind("click",n),e.unbind("keydown",i))};var n=function(e){if(t){var n=t.getToggleElement();e&&n&&n[0].contains(e.target)||t.$apply(function(){t.isOpen=!1})}},i=function(e){27===e.which&&(t.focusToggleElement(),n())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(e,t,n,i,r,a){var o,s=this,l=e.$new(),c=i.openClass,u=angular.noop,d=t.onToggle?n(t.onToggle):angular.noop;this.init=function(i){s.$element=i,t.isOpen&&(o=n(t.isOpen),u=o.assign,e.$watch(o,function(e){l.isOpen=!!e}))},this.toggle=function(e){return l.isOpen=arguments.length?!!e:!l.isOpen},this.isOpen=function(){return l.isOpen},l.getToggleElement=function(){return s.toggleElement},l.focusToggleElement=function(){s.toggleElement&&s.toggleElement[0].focus()},l.$watch("isOpen",function(t,n){a[t?"addClass":"removeClass"](s.$element,c),t?(l.focusToggleElement(),r.open(l)):r.close(l),u(e,t),angular.isDefined(t)&&t!==n&&d(e,{open:!!t})}),e.$on("$locationChangeSuccess",function(){l.isOpen=!1}),e.$on("$destroy",function(){l.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(e,t,n,i){i.init(t)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(e,t,n,i){if(i){i.toggleElement=t;var r=function(r){r.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){i.toggle()})};t.bind("click",r),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(i.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",r)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,i=0;i<e.length;i++)if(t==e[i].key){n=i;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$timeout",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(t,n,i){t.backdropClass=i.backdropClass||"",t.animate=!1,e(function(){t.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(n,i,r){i.addClass(r.windowClass||""),n.size=r.size,t(function(){n.animate=!0,i[0].querySelectorAll("[autofocus]").length||i[0].focus()}),n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!=n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(e,t,n,i,r){r(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,n,i,r,a){function o(){for(var e=-1,t=h.keys(),n=0;n<t.length;n++)h.get(t[n]).value.backdrop&&(e=n);return e}function s(e){var t=n.find("body").eq(0),i=h.get(e).value;h.remove(e),c(i.modalDomEl,i.modalScope,300,function(){i.modalScope.$destroy(),t.toggleClass(p,h.length()>0),l()})}function l(){if(u&&-1==o()){var e=d;c(u,d,150,function(){e.$destroy(),e=null}),u=void 0,d=void 0}}function c(n,i,r,a){function o(){o.done||(o.done=!0,n.remove(),a&&a())}i.animate=!1;var s=e.transitionEndEventName;if(s){var l=t(o,r);n.bind(s,function(){t.cancel(l),o(),i.$apply()})}else t(o)}var u,d,p="modal-open",h=a.createNew(),f={};return r.$watch(o,function(e){d&&(d.index=e)}),n.bind("keydown",function(e){var t;27===e.which&&(t=h.top(),t&&t.value.keyboard&&(e.preventDefault(),r.$apply(function(){f.dismiss(t.key,"escape key press")})))}),f.open=function(e,t){h.add(e,{deferred:t.deferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var a=n.find("body").eq(0),s=o();if(s>=0&&!u){d=r.$new(!0),d.index=s;var l=angular.element("<div modal-backdrop></div>");l.attr("backdrop-class",t.backdropClass),u=i(l)(d),a.append(u)}var c=angular.element("<div modal-window></div>");c.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:h.length()-1,animate:"animate"}).html(t.content);var f=i(c)(t.scope);h.top().value.modalDomEl=f,a.append(f),a.addClass(p)},f.close=function(e,t){var n=h.get(e);n&&(n.value.deferred.resolve(t),s(e))},f.dismiss=function(e,t){var n=h.get(e);n&&(n.value.deferred.reject(t),s(e))},f.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},f.getTop=function(){return h.top()},f}]).provider("$modal",function(){var e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,n,i,r,a,o,s){function l(e){return e.template?i.when(e.template):r.get(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl,{
cache:a}).then(function(e){return e.data})}function c(e){var n=[];return angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&n.push(i.when(t.invoke(e)))}),n}var u={};return u.open=function(t){var r=i.defer(),a=i.defer(),u={result:r.promise,opened:a.promise,close:function(e){s.close(u,e)},dismiss:function(e){s.dismiss(u,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var d=i.all([l(t)].concat(c(t.resolve)));return d.then(function(e){var i=(t.scope||n).$new();i.$close=u.close,i.$dismiss=u.dismiss;var a,l={},c=1;t.controller&&(l.$scope=i,l.$modalInstance=u,angular.forEach(t.resolve,function(t,n){l[n]=e[c++]}),a=o(t.controller,l),t.controllerAs&&(i[t.controllerAs]=a)),s.open(u,{scope:i,deferred:r,content:e[0],backdrop:t.backdrop,keyboard:t.keyboard,backdropClass:t.backdropClass,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size})},function(e){r.reject(e)}),d.then(function(){a.resolve(!0)},function(){a.reject(!1)}),u},u}]};return e}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,t,n){var i=this,r={$setViewValue:angular.noop},a=t.numPages?n(t.numPages).assign:angular.noop;this.init=function(a,o){r=a,this.config=o,r.$render=function(){i.render()},t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),function(t){i.itemsPerPage=parseInt(t,10),e.totalPages=i.calculateTotalPages()}):this.itemsPerPage=o.itemsPerPage},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(r.$viewValue,10)||1},e.selectPage=function(t){e.page!==t&&t>0&&t<=e.totalPages&&(r.$setViewValue(t),r.$render())},e.getText=function(t){return e[t+"Text"]||i.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages},e.$watch("totalItems",function(){e.totalPages=i.calculateTotalPages()}),e.$watch("totalPages",function(t){a(e.$parent,t),e.page>t?e.selectPage(t):r.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(n,i,r,a){function o(e,t,n){return{number:e,text:t,active:n}}function s(e,t){var n=[],i=1,r=t,a=angular.isDefined(u)&&t>u;a&&(d?(i=Math.max(e-Math.floor(u/2),1),r=i+u-1,r>t&&(r=t,i=r-u+1)):(i=(Math.ceil(e/u)-1)*u+1,r=Math.min(i+u-1,t)));for(var s=i;r>=s;s++){var l=o(s,s,s===e);n.push(l)}if(a&&!d){if(i>1){var c=o(i-1,"...",!1);n.unshift(c)}if(t>r){var p=o(r+1,"...",!1);n.push(p)}}return n}var l=a[0],c=a[1];if(c){var u=angular.isDefined(r.maxSize)?n.$parent.$eval(r.maxSize):t.maxSize,d=angular.isDefined(r.rotate)?n.$parent.$eval(r.rotate):t.rotate;n.boundaryLinks=angular.isDefined(r.boundaryLinks)?n.$parent.$eval(r.boundaryLinks):t.boundaryLinks,n.directionLinks=angular.isDefined(r.directionLinks)?n.$parent.$eval(r.directionLinks):t.directionLinks,l.init(c,t),r.maxSize&&n.$parent.$watch(e(r.maxSize),function(e){u=parseInt(e,10),l.render()});var p=l.render;l.render=function(){p(),n.page>0&&n.page<=n.totalPages&&(n.pages=s(n.page,n.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,n,i,r){var a=r[0],o=r[1];o&&(t.align=angular.isDefined(i.align)?t.$parent.$eval(i.align):e.align,a.init(o,e))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function e(e){var t=/[A-Z]/g,n="-";return e.replace(t,function(e,t){return(t?n:"")+e.toLowerCase()})}var t={placement:"top",animation:!0,popupDelay:0},n={mouseenter:"mouseleave",click:"click",focus:"blur"},i={};this.options=function(e){angular.extend(i,e)},this.setTriggers=function(e){angular.extend(n,e)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(r,a,o,s,l,c){return function(r,u,d){function p(e){var t=e||h.trigger||d,i=n[t]||t;return{show:t,hide:i}}var h=angular.extend({},t,i),f=e(r),g=c.startSymbol(),m=c.endSymbol(),v="<div "+f+'-popup title="'+g+"title"+m+'" content="'+g+"content"+m+'" placement="'+g+"placement"+m+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(e,t){var n=a(v);return function(e,t,i){function a(){E.isOpen?d():c()}function c(){(!A||e.$eval(i[u+"Enable"]))&&(y(),E.popupDelay?_||(_=o(f,E.popupDelay,!1),_.then(function(e){e()})):f()())}function d(){e.$apply(function(){g()})}function f(){return _=null,S&&(o.cancel(S),S=null),E.content?(m(),k.css({top:0,left:0,display:"block"}),T?s.find("body").append(k):t.after(k),P(),E.isOpen=!0,E.$digest(),P):angular.noop}function g(){E.isOpen=!1,o.cancel(_),_=null,E.animation?S||(S=o(v,500)):v()}function m(){k&&v(),C=E.$new(),k=n(C,angular.noop)}function v(){S=null,k&&(k.remove(),k=null),C&&(C.$destroy(),C=null)}function y(){b(),w()}function b(){var e=i[u+"Placement"];E.placement=angular.isDefined(e)?e:h.placement}function w(){var e=i[u+"PopupDelay"],t=parseInt(e,10);E.popupDelay=isNaN(t)?h.popupDelay:t}function x(){var e=i[u+"Trigger"];I(),$=p(e),$.show===$.hide?t.bind($.show,a):(t.bind($.show,c),t.bind($.hide,d))}var k,C,S,_,T=angular.isDefined(h.appendToBody)?h.appendToBody:!1,$=p(void 0),A=angular.isDefined(i[u+"Enable"]),E=e.$new(!0),P=function(){var e=l.positionElements(t,k,E.placement,T);e.top+="px",e.left+="px",k.css(e)};E.isOpen=!1,i.$observe(r,function(e){E.content=e,!e&&E.isOpen&&g()}),i.$observe(u+"Title",function(e){E.title=e});var I=function(){t.unbind($.show,c),t.unbind($.hide,d)};x();var D=e.$eval(i[u+"Animation"]);E.animation=angular.isDefined(D)?!!D:h.animation;var M=e.$eval(i[u+"AppendToBody"]);T=angular.isDefined(M)?M:T,T&&e.$on("$locationChangeSuccess",function(){E.isOpen&&g()}),e.$on("$destroy",function(){o.cancel(S),o.cancel(_),I(),v(),E=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(e,t,n){var i=this,r=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max,this.addBar=function(t,n){r||n.css({transition:"none"}),this.bars.push(t),t.$watch("value",function(n){t.percent=+(100*n/e.max).toFixed(2)}),t.$on("$destroy",function(){n=null,i.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,n,i){i.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,n,i){i.addBar(e,angular.element(t.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(e,t,n){var i={$setViewValue:angular.noop};this.init=function(r){i=r,i.$render=this.render,this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):n.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):n.stateOff;var a=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max);e.range=this.buildTemplateObjects(a)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;n>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff},e[t]);return e},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(i.$setViewValue(t),i.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=i.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=i.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,n,i){var r=i[0],a=i[1];a&&r.init(a)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(e){var t=this,n=t.tabs=e.tabs=[];t.select=function(e){angular.forEach(n,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect())}),e.active=!0,e.onSelect()},t.addTab=function(e){n.push(e),1===n.length?e.active=!0:e.active&&t.select(e)},t.removeTab=function(e){var r=n.indexOf(e);if(e.active&&n.length>1&&!i){var a=r==n.length-1?r-1:r+1;t.select(n[a])}n.splice(r,1)};var i;e.$on("$destroy",function(){i=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,n){e.vertical=angular.isDefined(n.vertical)?e.$parent.$eval(n.vertical):!1,e.justified=angular.isDefined(n.justified)?e.$parent.$eval(n.justified):!1}}}).directive("tab",["$parse",function(e){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(t,n,i){return function(t,n,r,a){t.$watch("active",function(e){e&&a.select(t)}),t.disabled=!1,r.disabled&&t.$parent.$watch(e(r.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},a.addTab(t),t.$on("$destroy",function(){a.removeTab(t)}),t.$transcludeFn=i}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t,n,i){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(t,n,i){var r=t.$eval(i.tabContentTransclude);r.$transcludeFn(r.$parent,function(t){angular.forEach(t,function(t){e(t)?r.headingElement=t:n.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(e,t,n,i,r,a){function o(){var t=parseInt(e.hours,10),n=e.showMeridian?t>0&&13>t:t>=0&&24>t;return n?(e.showMeridian&&(12===t&&(t=0),e.meridian===g[1]&&(t+=12)),t):void 0}function s(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function l(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e}function c(e){u(),f.$setViewValue(new Date(h)),d(e)}function u(){f.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function d(t){var n=h.getHours(),i=h.getMinutes();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:l(n),e.minutes="m"===t?i:l(i),e.meridian=h.getHours()<12?g[0]:g[1]}function p(e){var t=new Date(h.getTime()+6e4*e);h.setHours(t.getHours(),t.getMinutes()),c()}var h=new Date,f={$setViewValue:angular.noop},g=angular.isDefined(t.meridians)?e.$parent.$eval(t.meridians):a.meridians||r.DATETIME_FORMATS.AMPMS;this.init=function(n,i){f=n,f.$render=this.render;var r=i.eq(0),o=i.eq(1),s=angular.isDefined(t.mousewheel)?e.$parent.$eval(t.mousewheel):a.mousewheel;s&&this.setupMousewheelEvents(r,o),e.readonlyInput=angular.isDefined(t.readonlyInput)?e.$parent.$eval(t.readonlyInput):a.readonlyInput,this.setupInputEvents(r,o)};var m=a.hourStep;t.hourStep&&e.$parent.$watch(n(t.hourStep),function(e){m=parseInt(e,10)});var v=a.minuteStep;t.minuteStep&&e.$parent.$watch(n(t.minuteStep),function(e){v=parseInt(e,10)}),e.showMeridian=a.showMeridian,t.showMeridian&&e.$parent.$watch(n(t.showMeridian),function(t){if(e.showMeridian=!!t,f.$error.time){var n=o(),i=s();angular.isDefined(n)&&angular.isDefined(i)&&(h.setHours(n),c())}else d()}),this.setupMousewheelEvents=function(t,n){var i=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),n.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupInputEvents=function(t,n){if(e.readonlyInput)return e.updateHours=angular.noop,void(e.updateMinutes=angular.noop);var i=function(t,n){f.$setViewValue(null),f.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(n)&&(e.invalidMinutes=n)};e.updateHours=function(){var e=o();angular.isDefined(e)?(h.setHours(e),c("h")):i(!0)},t.bind("blur",function(t){!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=l(e.hours)})}),e.updateMinutes=function(){var e=s();angular.isDefined(e)?(h.setMinutes(e),c("m")):i(void 0,!0)},n.bind("blur",function(t){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=l(e.minutes)})})},this.render=function(){var e=f.$modelValue?new Date(f.$modelValue):null;isNaN(e)?(f.$setValidity("time",!1),i.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(h=e),u(),d())},e.incrementHours=function(){p(60*m)},e.decrementHours=function(){p(60*-m)},e.incrementMinutes=function(){p(v)},e.decrementMinutes=function(){p(-v)},e.toggleMeridian=function(){p(720*(h.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,n,i){var r=i[0],a=i[1];a&&r.init(a,t.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var i=n.match(t);if(!i)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:i[3],source:e(i[4]),viewMapper:e(i[2]||i[1]),modelMapper:e(i[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,n,i,r,a,o){var s=[9,13,27,38,40];return{require:"ngModel",link:function(l,c,u,d){var p,h=l.$eval(u.typeaheadMinLength)||1,f=l.$eval(u.typeaheadWaitMs)||0,g=l.$eval(u.typeaheadEditable)!==!1,m=t(u.typeaheadLoading).assign||angular.noop,v=t(u.typeaheadOnSelect),y=u.typeaheadInputFormatter?t(u.typeaheadInputFormatter):void 0,b=u.typeaheadAppendToBody?l.$eval(u.typeaheadAppendToBody):!1,w=l.$eval(u.typeaheadFocusFirst)!==!1,x=t(u.ngModel).assign,k=o.parse(u.typeahead),C=l.$new();l.$on("$destroy",function(){C.$destroy()});var S="typeahead-"+C.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":S});var _=angular.element("<div typeahead-popup></div>");_.attr({id:S,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(u.typeaheadTemplateUrl)&&_.attr("template-url",u.typeaheadTemplateUrl);var T=function(){C.matches=[],C.activeIdx=-1,c.attr("aria-expanded",!1)},$=function(e){return S+"-option-"+e};C.$watch("activeIdx",function(e){0>e?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",$(e))});var A=function(e){var t={$viewValue:e};m(l,!0),n.when(k.source(l,t)).then(function(n){var i=e===d.$viewValue;if(i&&p)if(n.length>0){C.activeIdx=w?0:-1,C.matches.length=0;for(var r=0;r<n.length;r++)t[k.itemName]=n[r],C.matches.push({id:$(r),label:k.viewMapper(C,t),model:n[r]});C.query=e,C.position=b?a.offset(c):a.position(c),C.position.top=C.position.top+c.prop("offsetHeight"),c.attr("aria-expanded",!0)}else T();i&&m(l,!1)},function(){T(),m(l,!1)})};T(),C.query=void 0;var E,P=function(e){E=i(function(){A(e)},f)},I=function(){E&&i.cancel(E)};d.$parsers.unshift(function(e){return p=!0,e&&e.length>=h?f>0?(I(),P(e)):A(e):(m(l,!1),I(),T()),g?e:e?void d.$setValidity("editable",!1):(d.$setValidity("editable",!0),e)}),d.$formatters.push(function(e){var t,n,i={};return y?(i.$model=e,y(l,i)):(i[k.itemName]=e,t=k.viewMapper(l,i),i[k.itemName]=void 0,n=k.viewMapper(l,i),t!==n?t:e)}),C.select=function(e){var t,n,r={};r[k.itemName]=n=C.matches[e].model,t=k.modelMapper(l,r),x(l,t),d.$setValidity("editable",!0),v(l,{$item:n,$model:t,$label:k.viewMapper(l,r)}),T(),i(function(){c[0].focus()},0,!1)},c.bind("keydown",function(e){0!==C.matches.length&&-1!==s.indexOf(e.which)&&(-1!=C.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(C.activeIdx=(C.activeIdx+1)%C.matches.length,C.$digest()):38===e.which?(C.activeIdx=(C.activeIdx>0?C.activeIdx:C.matches.length)-1,C.$digest()):13===e.which||9===e.which?C.$apply(function(){C.select(C.activeIdx)}):27===e.which&&(e.stopPropagation(),T(),C.$digest()))}),c.bind("blur",function(e){p=!1});var D=function(e){c[0]!==e.target&&(T(),C.$digest())};r.bind("click",D),l.$on("$destroy",function(){r.unbind("click",D),b&&M.remove()});var M=e(_)(C);b?r.find("body").append(M):c.after(M)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,n){e.templateUrl=n.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(e,t,n,i){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(r,a,o){var s=i(o.templateUrl)(r.$parent)||"template/typeahead/typeahead-match.html";e.get(s,{cache:t}).success(function(e){a.replaceWith(n(e.trim())(r))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n?(""+t).replace(new RegExp(e(n),"gi"),"<strong>$&</strong>"):t}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(e){
e.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("hawtio-compat.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,n){function i(e){for(var t in e)if(void 0!==a.style[t])return e[t]}var r=function(i,a,o){o=o||{};var s=e.defer(),l=r[o.animation?"animationEndEventName":"transitionEndEventName"],c=function(e){n.$apply(function(){i.unbind(l,c),s.resolve(i)})};return l&&i.bind(l,c),t(function(){angular.isString(a)?i.addClass(a):angular.isFunction(a)?a(i):angular.isObject(a)&&i.css(a),l||s.resolve(i)}),s.promise.cancel=function(){l&&i.unbind(l,c),s.reject("Transition cancelled")},s.promise},a=document.createElement("trans"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},s={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return r.transitionEndEventName=i(o),r.animationEndEventName=i(s),r}]);var dialogModule=angular.module("hawtio-compat.dialog",["hawtio-compat.transition"]);dialogModule.controller("MessageBoxController",["$scope","dialog","model",function(e,t,n){e.title=n.title,e.message=n.message,e.buttons=n.buttons,e.close=function(e){t.close(e)}}]),dialogModule.provider("$dialog",function(){var e={backdrop:!0,dialogClass:"modal",backdropClass:"modal-backdrop",transitionClass:"fade",triggerClass:"in",resolve:{},backdropFade:!1,dialogFade:!1,keyboard:!0,backdropClick:!0},t={},n={value:0};this.options=function(e){t=e},this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$transition","$injector",function(i,r,a,o,s,l,c,u,d){function p(e){var t=angular.element("<div>");return t.addClass(e),t}function h(n){var i=this,r=this.options=angular.extend({},e,t,n);this._open=!1,this.backdropEl=p(r.backdropClass),r.backdropFade&&(this.backdropEl.addClass(r.transitionClass),this.backdropEl.removeClass(r.triggerClass)),this.modalEl=p(r.dialogClass),r.dialogFade&&(this.modalEl.addClass(r.transitionClass),this.modalEl.removeClass(r.triggerClass)),this.handledEscapeKey=function(e){27===e.which&&(i.close(),e.preventDefault(),i.$scope.$apply())},this.handleBackDropClick=function(e){i.close(),e.preventDefault(),i.$scope.$apply()},this.handleLocationChange=function(){i.close()}}var f=r.find("body");return h.prototype.isOpen=function(){return this._open},h.prototype.open=function(e,t){var n=this,i=this.options;if(e&&(i.templateUrl=e),t&&(i.controller=t),!i.template&&!i.templateUrl)throw new Error("Dialog.open expected template or templateUrl, neither found. Use options or open method to specify them.");return this._loadResolves().then(function(e){var t=e.$scope=n.$scope=e.$scope?e.$scope:o.$new();if(n.modalEl.html(e.$template),n.options.controller){var i=s(n.options.controller,e);n.modalEl.children().data("ngControllerController",i)}a(n.modalEl)(t),n._addElementsToDom(),setTimeout(function(){n.options.dialogFade&&n.modalEl.addClass(n.options.triggerClass),n.options.backdropFade&&n.backdropEl.addClass(n.options.triggerClass)}),n._bindEvents()}),this.deferred=c.defer(),this.deferred.promise},h.prototype.close=function(e){function t(e){e.removeClass(i.options.triggerClass)}function n(){i._open&&i._onCloseComplete(e)}var i=this,r=this._getFadingElements();if(r.length>0)for(var a=r.length-1;a>=0;a--)u(r[a],t).then(n);else this._onCloseComplete(e)},h.prototype._getFadingElements=function(){var e=[];return this.options.dialogFade&&e.push(this.modalEl),this.options.backdropFade&&e.push(this.backdropEl),e},h.prototype._bindEvents=function(){this.options.keyboard&&f.bind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.bind("click",this.handleBackDropClick)},h.prototype._unbindEvents=function(){this.options.keyboard&&f.unbind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.unbind("click",this.handleBackDropClick)},h.prototype._onCloseComplete=function(e){this._removeElementsFromDom(),this._unbindEvents(),this.deferred.resolve(e)},h.prototype._addElementsToDom=function(){f.append(this.modalEl),this.options.backdrop&&(0===n.value&&f.append(this.backdropEl),n.value++),this._open=!0},h.prototype._removeElementsFromDom=function(){this.modalEl.remove(),this.options.backdrop&&(n.value--,0===n.value&&this.backdropEl.remove()),this._open=!1},h.prototype._loadResolves=function(){var e,t=[],n=[],r=this;return this.options.template?e=c.when(this.options.template):this.options.templateUrl&&(e=i.get(this.options.templateUrl,{cache:l}).then(function(e){return e.data})),angular.forEach(this.options.resolve||[],function(e,i){n.push(i),t.push(angular.isString(e)?d.get(e):d.invoke(e))}),n.push("$template"),t.push(e),c.all(t).then(function(e){var t={};return angular.forEach(e,function(e,i){t[n[i]]=e}),t.dialog=r,t})},{dialog:function(e){return new h(e)},messageBox:function(e,t,n){return new h({templateUrl:"plugins/ui-bootstrap/html/message.html",controller:"MessageBoxController",resolve:{model:function(){return{title:e,message:t,buttons:n}}}})}}}]}),angular.module("hawtio-compat.modal",["hawtio-compat.dialog"]).directive("modal",["$parse","$dialog",function(e,t){return{restrict:"EA",terminal:!0,link:function(n,i,r){var a,o=angular.extend({},n.$eval(r.uiOptions||r.bsOptions||r.options)),s=r.modal||r.show;o=angular.extend(o,{template:i.html(),resolve:{$scope:function(){return n}}});var l=t.dialog(o);i.remove(),a=r.close?function(){e(r.close)(n)}:function(){angular.isFunction(e(s).assign)&&e(s).assign(n,!1)},n.$watch(s,function(e,t){e?l.open().then(function(){a()}):l.isOpen()&&l.close()})}}}]),function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(e){return 0==e?0:e>0?1:-1});var e={subtract:function(e,t){return{x:e.x-t.x,y:e.y-t.y}},dotProduct:function(e,t){return e.x*t.x+e.y*t.y},square:function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},scale:function(e,t){return{x:e.x*t,y:e.y*t}}},t=64,n=Math.pow(2,-t-1),i=function(t,n){for(var i=[],r=a(t,n),s=n.length-1,l=2*s-1,c=o(r,l,i,0),d=e.subtract(t,n[0]),p=e.square(d),h=0,f=0;c>f;f++){d=e.subtract(t,u(n,s,i[f],null,null));var g=e.square(d);p>g&&(p=g,h=i[f])}return d=e.subtract(t,n[s]),g=e.square(d),p>g&&(p=g,h=1),{location:h,distance:p}},r=function(e,t){var n=i(e,t);return{point:u(t,t.length-1,n.location,null,null),location:n.location}},a=function(t,n){for(var i=n.length-1,r=2*i-1,a=[],o=[],s=[],l=[],c=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],u=0;i>=u;u++)a[u]=e.subtract(n[u],t);for(var u=0;i-1>=u;u++)o[u]=e.subtract(n[u+1],n[u]),o[u]=e.scale(o[u],3);for(var d=0;i-1>=d;d++)for(var p=0;i>=p;p++)s[d]||(s[d]=[]),s[d][p]=e.dotProduct(o[d],a[p]);for(u=0;r>=u;u++)l[u]||(l[u]=[]),l[u].y=0,l[u].x=parseFloat(u)/r;for(var h=i,f=i-1,g=0;h+f>=g;g++){var m=Math.max(0,g-f),v=Math.min(g,h);for(u=m;v>=u;u++)j=g-u,l[u+j].y+=s[j][u]*c[j][u]}return l},o=function(e,n,i,r){var a,d,p=[],h=[],f=[],g=[];switch(s(e,n)){case 0:return 0;case 1:if(r>=t)return i[0]=(e[0].x+e[n].x)/2,1;if(l(e,n))return i[0]=c(e,n),1}u(e,n,.5,p,h),a=o(p,n,f,r+1),d=o(h,n,g,r+1);for(var m=0;a>m;m++)i[m]=f[m];for(var m=0;d>m;m++)i[m+a]=g[m];return a+d},s=function(e,t){var n,i,r=0;n=i=Math.sgn(e[0].y);for(var a=1;t>=a;a++)n=Math.sgn(e[a].y),n!=i&&r++,i=n;return r},l=function(e,t){var i,r,a,o,s,l,c,u,d,p,h,f,g,m,v,y;l=e[0].y-e[t].y,c=e[t].x-e[0].x,u=e[0].x*e[t].y-e[t].x*e[0].y;for(var b=max_distance_below=0,w=1;t>w;w++){var x=l*e[w].x+c*e[w].y+u;x>b?b=x:x<max_distance_below&&(max_distance_below=x)}return h=0,f=1,g=0,m=l,v=c,y=u-b,d=h*v-m*f,p=1/d,r=(f*y-v*g)*p,m=l,v=c,y=u-max_distance_below,d=h*v-m*f,p=1/d,a=(f*y-v*g)*p,o=Math.min(r,a),s=Math.max(r,a),i=s-o,n>i?1:0},c=function(e,t){var n=1,i=0,r=e[t].x-e[0].x,a=e[t].y-e[0].y,o=e[0].x-0,s=e[0].y-0,l=r*i-a*n,c=1/l,u=(r*s-a*o)*c;return 0+n*u},u=function(e,t,n,i,r){for(var a=[[]],o=0;t>=o;o++)a[0][o]=e[o];for(var s=1;t>=s;s++)for(var o=0;t-s>=o;o++)a[s]||(a[s]=[]),a[s][o]||(a[s][o]={}),a[s][o].x=(1-n)*a[s-1][o].x+n*a[s-1][o+1].x,a[s][o].y=(1-n)*a[s-1][o].y+n*a[s-1][o+1].y;if(null!=i)for(o=0;t>=o;o++)i[o]=a[o][0];if(null!=r)for(o=0;t>=o;o++)r[o]=a[t-o][o];return a[t][0]},d={},p=function(e){var t=d[e];if(!t){t=[];var n=function(){return function(t){return Math.pow(t,e)}},i=function(){return function(t){return Math.pow(1-t,e)}},r=function(e){return function(t){return e}},a=function(){return function(e){return e}},o=function(){return function(e){return 1-e}},s=function(e){return function(t){for(var n=1,i=0;i<e.length;i++)n*=e[i](t);return n}};t.push(new n);for(var l=1;e>l;l++){for(var c=[new r(e)],u=0;e-l>u;u++)c.push(new a);for(var u=0;l>u;u++)c.push(new o);t.push(new s(c))}t.push(new i),d[e]=t}return t},h=function(e,t){for(var n=p(e.length-1),i=0,r=0,a=0;a<e.length;a++)i+=e[a].x*n[a](t),r+=e[a].y*n[a](t);return{x:i,y:r}},f=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},g=function(e){return e[0].x==e[1].x&&e[0].y==e[1].y},m=function(e,t,n){if(g(e))return{point:e[0],location:t};for(var i=h(e,t),r=0,a=t,o=n>0?1:-1,s=null;r<Math.abs(n);)a+=.005*o,s=h(e,a),r+=f(s,i),i=s;return{point:s,location:a}},v=function(e){if(g(e))return 0;for(var t=h(e,0),n=0,i=0,r=1,a=null;1>i;)i+=.005*r,a=h(e,i),n+=f(a,t),t=a;return n},y=function(e,t,n){return m(e,t,n).point},b=function(e,t,n){return m(e,t,n).location},w=function(e,t){var n=h(e,t),i=h(e.slice(0,e.length-1),t),r=i.y-n.y,a=i.x-n.x;return 0==r?1/0:Math.atan(r/a)},x=function(e,t,n){var i=m(e,t,n);return i.location>1&&(i.location=1),i.location<0&&(i.location=0),w(e,i.location)},k=function(e,t,n,i){i=null==i?0:i;var r=m(e,t,i),a=w(e,r.location),o=Math.atan(-1/a),s=n/2*Math.sin(o),l=n/2*Math.cos(o);return[{x:r.point.x+l,y:r.point.y+s},{x:r.point.x-l,y:r.point.y-s}]};this.jsBezier={distanceFromCurve:i,gradientAtPoint:w,gradientAtPointAlongCurveFrom:x,nearestPointOnCurve:r,pointOnCurve:h,pointAlongCurveFrom:y,perpendicularToCurveAt:k,locationAlongCurveFrom:b,getLength:v}}.call(this),function(){"use strict";{var e=this.Biltong={},t=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=function(e,n,i){return e=t(e)?e:[e.x,e.y],n=t(n)?n:[n.x,n.y],i(e,n)},i=e.gradient=function(e,t){return n(e,t,function(e,t){return t[0]==e[0]?t[1]>e[1]?1/0:-(1/0):t[1]==e[1]?t[0]>e[0]?0:-0:(t[1]-e[1])/(t[0]-e[0])})},r=(e.normal=function(e,t){return-1/i(e,t)},e.lineLength=function(e,t){return n(e,t,function(e,t){return Math.sqrt(Math.pow(t[1]-e[1],2)+Math.pow(t[0]-e[0],2))})},e.quadrant=function(e,t){return n(e,t,function(e,t){return t[0]>e[0]?t[1]>e[1]?2:1:t[0]==e[0]?t[1]>e[1]?2:1:t[1]>e[1]?3:4})}),a=(e.theta=function(e,t){return n(e,t,function(e,t){var n=i(e,t),a=Math.atan(n),o=r(e,t);return(4==o||3==o)&&(a+=Math.PI),0>a&&(a+=2*Math.PI),a})},e.intersects=function(e,t){var n=e.x,i=e.x+e.w,r=e.y,a=e.y+e.h,o=t.x,s=t.x+t.w,l=t.y,c=t.y+t.h;return o>=n&&i>=o&&l>=r&&a>=l||s>=n&&i>=s&&l>=r&&a>=l||o>=n&&i>=o&&c>=r&&a>=c||s>=n&&i>=o&&c>=r&&a>=c||n>=o&&s>=n&&r>=l&&c>=r||i>=o&&s>=i&&r>=l&&c>=r||n>=o&&s>=n&&a>=l&&c>=a||i>=o&&s>=n&&a>=l&&c>=a},e.encloses=function(e,t,n){var i=e.x,r=e.x+e.w,a=e.y,o=e.y+e.h,s=t.x,l=t.x+t.w,c=t.y,u=t.y+t.h,d=function(e,t,i,r){return n?t>=e&&i>=r:t>e&&i>r};return d(i,s,r,l)&&d(a,c,o,u)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),o=[null,[-1,-1],[-1,1],[1,1],[1,-1]];e.pointOnLine=function(e,t,n){var s=i(e,t),l=r(e,t),c=n>0?a[l]:o[l],u=Math.atan(s),d=Math.abs(n*Math.sin(u))*c[1],p=Math.abs(n*Math.cos(u))*c[0];return{x:e.x+p,y:e.y+d}},e.perpendicularLineTo=function(e,t,n){var r=i(e,t),a=Math.atan(-1/r),o=n/2*Math.sin(a),s=n/2*Math.cos(a);return[{x:t.x+s,y:t.y+o},{x:t.x-s,y:t.y-o}]}}}.call(this),function(){"use strict";var e={android:navigator.userAgent.toLowerCase().indexOf("android")>-1},t=function(e,t,n){n=n||e.parentNode;for(var i=n.querySelectorAll(t),r=0;r<i.length;r++)if(i[r]===e)return!0;return!1},n=function(e){return"string"==typeof e?document.getElementById(e):e},i=function(e){return e.srcElement||e.target},r=function(e,t){for(var n=0,i=e.length;i>n&&e[n]!=t;n++);n<e.length&&e.splice(n,1)},a=1,o=function(e,t,n){var i=a++;return e.__ta=e.__ta||{},e.__ta[t]=e.__ta[t]||{},e.__ta[t][i]=n,n.__tauid=i,i},s=function(e,t,n){if(e.__ta&&e.__ta[t]&&delete e.__ta[t][n.__tauid],n.__taExtra){for(var i=0;i<n.__taExtra.length;i++)E(e,n.__taExtra[i][0],n.__taExtra[i][1]);n.__taExtra.length=0}n.__taUnstore&&n.__taUnstore()},l=function(e,n,r,a){if(null==e)return r;var o=e.split(","),s=function(e){s.__tauid=r.__tauid;for(var a=i(e),l=0;l<o.length;l++)t(a,o[l],n)&&r.apply(a,arguments)};return c(r,a,s),s},c=function(e,t,n){e.__taExtra=e.__taExtra||[],e.__taExtra.push([t,n])},u=function(e,t,n,i){if(m&&y[t]){var r=l(i,e,n,y[t]);A(e,y[t],r,n)}A(e,t,l(i,e,n,t),n)},d=function(e,t,n,a){if(null==e.__taSmartClicks){var o=function(t){e.__tad=k(t)},s=function(t){e.__tau=k(t)},l=function(t){if(e.__tad&&e.__tau&&e.__tad[0]===e.__tau[0]&&e.__tad[1]===e.__tau[1])for(var n=0;n<e.__taSmartClicks.length;n++)e.__taSmartClicks[n].apply(i(t),[t])};u(e,"mousedown",o,a),u(e,"mouseup",s,a),u(e,"click",l,a),e.__taSmartClicks=[]}e.__taSmartClicks.push(n),n.__taUnstore=function(){r(e.__taSmartClicks,n)}},p={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},h=function(e,n){return function(a,o,s,l){if("contextmenu"==o&&v)u(a,o,s,l);else{if(null==a.__taTapHandler){var c=a.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},d=function(i){for(var r=i.srcElement||i.target,o=0;o<c.downSelectors.length;o++)if(null==c.downSelectors[o]||t(r,c.downSelectors[o],a)){c.down=!0,setTimeout(f,e),setTimeout(g,n);break}},h=function(e){if(c.down){var n=e.srcElement||e.target;c.taps++;var r=$(e);for(var o in p){var s=p[o];if(s.touches===r&&(1===s.taps||s.taps===c.taps))for(var l=0;l<c[o].length;l++)(null==c[o][l][1]||t(n,c[o][l][1],a))&&c[o][l][0].apply(i(e),[e])}}},f=function(){c.down=!1},g=function(){c.taps=0};u(a,"mousedown",d),u(a,"mouseup",h)}a.__taTapHandler.downSelectors.push(l),a.__taTapHandler[o].push([s,l]),s.__taUnstore=function(){r(a.__taTapHandler[o],s)}}}},f=function(e,t,n,i){for(var r in n.__tamee[e])n.__tamee[e][r].apply(i,[t])},g=function(){var e=[];return function(n,r,a,s){if(!n.__tamee){n.__tamee={over:!1,mouseenter:[],mouseexit:[]};var c=function(r){var a=i(r);(null==s&&a==n&&!n.__tamee.over||t(a,s,n)&&(null==a.__tamee||!a.__tamee.over))&&(f("mouseenter",r,n,a),a.__tamee=a.__tamee||{},a.__tamee.over=!0,e.push(a))},u=function(r){for(var a=i(r),o=0;o<e.length;o++)a!=e[o]||t(r.relatedTarget||r.toElement,"*",a)||(a.__tamee.over=!1,e.splice(o,1),f("mouseexit",r,n,a))};A(n,"mouseover",l(s,n,c,"mouseover"),c),A(n,"mouseout",l(s,n,u,"mouseout"),u)}a.__taUnstore=function(){delete n.__tamee[r][a.__tauid]},o(n,r,a),n.__tamee[r][a.__tauid]=a}},m="ontouchstart"in document.documentElement,v="onmousedown"in document.documentElement,y={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},b=function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}return e}(),w=b>-1&&9>b,x=function(e,t){if(null==e)return[0,0];var n=T(e),i=_(n,0);return[i[t+"X"],i[t+"Y"]]},k=function(e){return null==e?[0,0]:w?[e.clientX+document.documentElement.scrollLeft,e.clientY+document.documentElement.scrollTop]:x(e,"page")},C=function(e){return x(e,"screen")},S=function(e){return x(e,"client")},_=function(e,t){return e.item?e.item(t):e[t]},T=function(e){return e.touches&&e.touches.length>0?e.touches:e.changedTouches&&e.changedTouches.length>0?e.changedTouches:e.targetTouches&&e.targetTouches.length>0?e.targetTouches:[e]},$=function(e){return T(e).length},A=function(e,t,n,i){if(o(e,t,n),i.__tauid=n.__tauid,e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent){var r=t+n.__tauid;e["e"+r]=n,e[r]=function(){e["e"+r]&&e["e"+r](window.event)},e.attachEvent("on"+t,e[r])}},E=function(e,t,i){null!=i&&P(e,function(){var r=n(this);if(s(r,t,i),null!=i.__tauid)if(r.removeEventListener)r.removeEventListener(t,i,!1),m&&y[t]&&r.removeEventListener(y[t],i,!1);else if(this.detachEvent){var a=t+i.__tauid;r[a]&&r.detachEvent("on"+t,r[a]),r[a]=null,r["e"+a]=null}i.__taTouchProxy&&E(e,i.__taTouchProxy[1],i.__taTouchProxy[0])})},P=function(e,t){if(null!=e){e="undefined"!=typeof Window&&"unknown"!=typeof e.top&&e==e.top?[e]:"string"!=typeof e&&null==e.tagName&&null!=e.length?e:"string"==typeof e?document.querySelectorAll(e):[e];for(var n=0;n<e.length;n++)t.apply(e[n])}};this.Mottle=function(t){t=t||{};var i=t.clickThreshold||150,r=t.dblClickThreshold||350,a=new g,o=new h(i,r),s=t.smartClicks,l=function(e,t,i,r){null!=i&&P(e,function(){var e=n(this);s&&"click"===t?d(e,t,i,r):"tap"===t||"dbltap"===t||"contextmenu"===t?o(e,t,i,r):"mouseenter"===t||"mouseexit"==t?a(e,t,i,r):u(e,t,i,r)})};this.remove=function(e){return P(e,function(){var e=n(this);if(e.__ta)for(var t in e.__ta)for(var i in e.__ta[t])E(e,t,e.__ta[t][i]);e.parentNode&&e.parentNode.removeChild(e)}),this},this.on=function(e,t,n,i){var r=arguments[0],a=4==arguments.length?arguments[2]:null,o=arguments[1],s=arguments[arguments.length-1];return l(r,o,s,a),this},this.off=function(e,t,n){return E(e,t,n),this},this.trigger=function(t,i,r,a){var o=v&&("undefined"==typeof MouseEvent||null==r||r.constructor===MouseEvent),s=m&&!v&&y[i]?y[i]:i,l=!(m&&!v&&y[i]),c=k(r),u=C(r),d=S(r);return P(t,function(){var t,p=n(this);r=r||{screenX:u[0],screenY:u[1],clientX:d[0],clientY:d[1]};var h=function(e){a&&(e.payload=a)},f={TouchEvent:function(e){var t=document.createTouch(window,p,0,c[0],c[1],u[0],u[1],d[0],d[1],0,0,0,0),n=document.createTouchList(t),i=document.createTouchList(t),r=document.createTouchList(t);e.initTouchEvent(s,!0,!0,window,null,u[0],u[1],d[0],d[1],!1,!1,!1,!1,n,i,r,1,0)},MouseEvents:function(t){if(t.initMouseEvent(s,!0,!0,window,0,u[0],u[1],d[0],d[1],!1,!1,!1,!1,1,p),e.android){var n=document.createTouch(window,p,0,c[0],c[1],u[0],u[1],d[0],d[1],0,0,0,0);t.touches=t.targetTouches=t.changedTouches=document.createTouchList(n)}}};if(document.createEvent){var g=!l&&!o&&m&&y[i]&&!e.android,v=g?"TouchEvent":"MouseEvents";t=document.createEvent(v),f[v](t),h(t),p.dispatchEvent(t)}else document.createEventObject&&(t=document.createEventObject(),t.eventType=t.eventName=s,t.screenX=u[0],t.screenY=u[1],t.clientX=d[0],t.clientY=d[1],h(t),p.fireEvent("on"+s,t))}),this}},Mottle.consume=function(e,t){e.stopPropagation?e.stopPropagation():e.returnValue=!1,!t&&e.preventDefault&&e.preventDefault()},Mottle.pageLocation=k,Mottle.setForceTouchEvents=function(e){m=e},Mottle.setForceMouseEvents=function(e){v=e}}.call(this),function(){var e=function(e){return"[object Array]"===Object.prototype.toString.call(e)},t=function(e){return"[object Number]"===Object.prototype.toString.call(e)},n=function(e){return"string"==typeof e},i=function(e){return"boolean"==typeof e},r=function(e){return null==e},a=function(e){return null==e?!1:"[object Object]"===Object.prototype.toString.call(e)},o=function(e){return"[object Date]"===Object.prototype.toString.call(e)},s=function(e){return"[object Function]"===Object.prototype.toString.call(e)},l=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},c=this,u=c.jsPlumbUtil={isArray:e,isString:n,isBoolean:i,isNull:r,isObject:a,isDate:o,isFunction:s,isEmpty:l,isNumber:t,clone:function(t){if(n(t))return""+t;if(i(t))return!!t;if(o(t))return new Date(t.getTime());if(s(t))return t;if(e(t)){for(var r=[],l=0;l<t.length;l++)r.push(this.clone(t[l]));return r}if(a(t)){var c={};for(var u in t)c[u]=this.clone(t[u]);return c}return t},merge:function(t,r,o){var s,l,c={};for(o=o||[],l=0;l<o.length;l++)c[o[l]]=!0;var u=this.clone(t);for(l in r)if(null==u[l])u[l]=r[l];else if(n(r[l])||i(r[l]))c[l]?(s=[],s.push.apply(s,e(u[l])?u[l]:[u[l]]),s.push.apply(s,e(r[l])?r[l]:[r[l]]),u[l]=s):u[l]=r[l];else if(e(r[l]))s=[],e(u[l])&&s.push.apply(s,u[l]),s.push.apply(s,r[l]),u[l]=s;else if(a(r[l])){a(u[l])||(u[l]={});for(var d in r[l])u[l][d]=r[l][d]}return u},replace:function(e,t,n){if(null!=e){var i=e,r=i;return t.replace(/([^\.])+/g,function(e,t,i,a){var o=e.match(/([^\[0-9]+){1}(\[)([0-9+])/),s=i+e.length>=a.length,l=function(){return r[o[1]]||function(){return r[o[1]]=[],r[o[1]]}()};if(s)o?l()[o[3]]=n:r[e]=n;else if(o){var c=l();r=c[o[3]]||function(){return c[o[3]]={},c[o[3]]}()}else r=r[e]||function(){return r[e]={},r[e]}()}),e}},functionChain:function(e,t,n){for(var i=0;i<n.length;i++){var r=n[i][0][n[i][1]].apply(n[i][0],n[i][2]);if(r===t)return r}return e},populate:function(t,i){var r=function(e){var t=e.match(/(\${.*?})/g);if(null!=t)for(var n=0;n<t.length;n++){var r=i[t[n].substring(2,t[n].length-1)]||"";null!=r&&(e=e.replace(t[n],r))}return e},o=function(t){if(null!=t){if(n(t))return r(t);if(e(t)){for(var i=[],s=0;s<t.length;s++)i.push(o(t[s]));return i}if(a(t)){var l={};for(var c in t)l[c]=o(t[c]);return l}return t}};return o(t)},convertStyle:function(e,t){if("transparent"===e)return e;var n=e,i=function(e){return 1==e.length?"0"+e:e},r=function(e){return i(Number(e).toString(16))},a=/(rgb[a]?\()(.*)(\))/;if(e.match(a)){var o=e.match(a)[2].split(",");n="#"+r(o[0])+r(o[1])+r(o[2]),t||4!=o.length||(n+=r(o[3]))}return n},findWithFunction:function(e,t){if(e)for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},indexOf:function(e,t){return e.indexOf?e.indexOf(t):u.findWithFunction(e,function(e){return e==t})},removeWithFunction:function(e,t){var n=u.findWithFunction(e,t);return n>-1&&e.splice(n,1),-1!=n},remove:function(e,t){var n=u.indexOf(e,t);return n>-1&&e.splice(n,1),-1!=n},addWithFunction:function(e,t,n){-1==u.findWithFunction(e,n)&&e.push(t)},addToList:function(e,t,n,i){var r=e[t];return null==r&&(r=[],e[t]=r),r[i?"unshift":"push"](n),r},extend:function(t,n,i){var r;for(n=e(n)?n:[n],r=0;r<n.length;r++)for(var a in n[r].prototype)n[r].prototype.hasOwnProperty(a)&&(t.prototype[a]=n[r].prototype[a]);var o=function(e,t){return function(){for(r=0;r<n.length;r++)n[r].prototype[e]&&n[r].prototype[e].apply(this,arguments);return t.apply(this,arguments)}},s=function(e){for(var n in e)t.prototype[n]=o(n,e[n])};if(arguments.length>2)for(r=2;r<arguments.length;r++)s(arguments[r]);return t},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},logEnabled:!0,log:function(){if(u.logEnabled&&"undefined"!=typeof console)try{var e=arguments[arguments.length-1];console.log(e)}catch(t){}},wrap:function(e,t,n){return e=e||function(){},t=t||function(){},function(){var i=null;try{i=t.apply(this,arguments)}catch(r){u.log("jsPlumb function failed : "+r)}if(null==n||i!==n)try{i=e.apply(this,arguments)}catch(r){u.log("wrapped function failed : "+r)}return i}}};u.EventGenerator=function(){var e={},t=!1,n={ready:!0};this.bind=function(t,n,i){return u.addToList(e,t,n,i),this},this.fire=function(i,r,a){if(!t&&e[i]){var o=e[i].length,s=0,l=!1,c=null;if(!this.shouldFireEvent||this.shouldFireEvent(i,r,a))for(;!l&&o>s&&c!==!1;){if(n[i])e[i][s].apply(this,[r,a]);else try{c=e[i][s].apply(this,[r,a])}catch(d){u.log("jsPlumb: fire failed for event "+i+" : "+d)}s++,(null==e||null==e[i])&&(l=!0)}}return this},this.unbind=function(t){return t?delete e[t]:e={},this},this.getListener=function(t){return e[t]},this.setSuspendEvents=function(e){t=e},this.isSuspendEvents=function(){return t},this.cleanupListeners=function(){for(var t in e)e[t]=null}},u.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}},Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r})}.call(this),function(){"use strict";var e=this,t=e.jsPlumbUtil;t.ieVersion=/MSIE\s([\d.]+)/.test(navigator.userAgent)?new Number(RegExp.$1):-1,t.oldIE=t.ieVersion>-1&&t.ieVersion<9,t.matchesSelector=function(e,t,n){n=n||e.parentNode;for(var i=n.querySelectorAll(t),r=0;r<i.length;r++)if(i[r]===e)return!0;return!1},t.consume=function(e,t){e.stopPropagation?e.stopPropagation():e.returnValue=!1,!t&&e.preventDefault&&e.preventDefault()},t.sizeElement=function(e,t,n,i,r){e&&(e.style.height=r+"px",e.height=r,e.style.width=i+"px",e.width=i,e.style.left=t+"px",e.style.top=n+"px")}}.call(this),function(){"use strict";var e,t=this,n=[],i=t.jsPlumbUtil,r=function(){return""+(new Date).getTime()},a=function(e){if(e._jsPlumb.paintStyle&&e._jsPlumb.hoverPaintStyle){var t={};m.extend(t,e._jsPlumb.paintStyle),m.extend(t,e._jsPlumb.hoverPaintStyle),delete e._jsPlumb.hoverPaintStyle,t.gradient&&e._jsPlumb.paintStyle.fillStyle&&delete t.gradient,e._jsPlumb.hoverPaintStyle=t}},o=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],s=function(e,t,n,i){var r=e.getAttachedElements();if(r)for(var a=0,o=r.length;o>a;a++)i&&i==r[a]||r[a].setHover(t,!0,n)},l=function(e){return null==e?null:e.split(" ")},c=function(e,t,n){for(var i in t)e[i]=n},u=function(e,t,n){if(e.getDefaultType){var r=e.getTypeDescriptor(),a={},o=e.getDefaultType(),s=i.merge({},o);c(a,o,"__default");for(var l=0,u=e._jsPlumb.types.length;u>l;l++){var d=e._jsPlumb.types[l];if("__default"!==d){var p=e._jsPlumb.instance.getType(d,r);null!=p&&(s=i.merge(s,p,["cssClass"]),c(a,p,d))}}t&&(s=i.populate(s,t)),e.applyType(s,n,a),n||e.repaint()}},d=window.jsPlumbUIComponent=function(e){jsPlumbUtil.EventGenerator.apply(this,arguments);var t=this,n=arguments,r=t.idPrefix,a=r+(new Date).getTime();this._jsPlumb={instance:e._jsPlumb,parameters:e.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:e.beforeDetach,beforeDrop:e.beforeDrop,overlayPlacements:[],hoverClass:e.hoverClass||e._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(e,t,n){this._jsPlumb.typeCache[n]=this._jsPlumb.typeCache[n]||{},this._jsPlumb.typeCache[n][e]=t},this.getCachedTypeItem=function(e,t){return this._jsPlumb.typeCache[t]?this._jsPlumb.typeCache[t][e]:null},this.getId=function(){return a};var o=e.overlays||[],s={};if(this.defaultOverlayKeys){for(var l=0;l<this.defaultOverlayKeys.length;l++)Array.prototype.push.apply(o,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[l]]||[]);for(l=0;l<o.length;l++){var c=m.convertToFullOverlaySpec(o[l]);s[c[1].id]=c}}var u={overlays:s,parameters:e.parameters||{},scope:e.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return u},this.appendToDefaultType=function(e){for(var t in e)u[t]=e[t]},e.events)for(l in e.events)t.bind(l,e.events[l]);this.clone=function(){var e={};return this.constructor.apply(e,n),e}.bind(this),this.isDetachAllowed=function(e){var t=!0;if(this._jsPlumb.beforeDetach)try{t=this._jsPlumb.beforeDetach(e)}catch(n){i.log("jsPlumb: beforeDetach callback failed",n)}return t},this.isDropAllowed=function(e,t,n,r,a,o,s){var l=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:e,targetId:t,scope:n,connection:r,dropEndpoint:a,source:o,target:s});if(this._jsPlumb.beforeDrop)try{l=this._jsPlumb.beforeDrop({sourceId:e,targetId:t,scope:n,connection:r,dropEndpoint:a,source:o,target:s})}catch(c){i.log("jsPlumb: beforeDrop callback failed",c)}return l};var d=[];this.setListenerComponent=function(e){for(var t=0;t<d.length;t++)d[t][3]=e}},p=function(e,t){var n=e._jsPlumb.types[t],i=e._jsPlumb.instance.getType(n,e.getTypeDescriptor());null!=i&&i.cssClass&&e.canvas&&e._jsPlumb.instance.removeClass(e.canvas,i.cssClass)};jsPlumbUtil.extend(d,jsPlumbUtil.EventGenerator,{getParameter:function(e){return this._jsPlumb.parameters[e];

},setParameter:function(e,t){this._jsPlumb.parameters[e]=t},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(e){this._jsPlumb.parameters=e},hasClass:function(e){return m.hasClass(this.canvas,e)},addClass:function(e){m.addClass(this.canvas,e)},removeClass:function(e){m.removeClass(this.canvas,e)},updateClasses:function(e,t){m.updateClasses(this.canvas,e,t)},setType:function(e,t,n){this.clearTypes(),this._jsPlumb.types=l(e)||[],u(this,t,n)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(e,t){u(this,e,t)},hasType:function(e){return-1!=jsPlumbUtil.indexOf(this._jsPlumb.types,e)},addType:function(e,t,n){var i=l(e),r=!1;if(null!=i){for(var a=0,o=i.length;o>a;a++)this.hasType(i[a])||(this._jsPlumb.types.push(i[a]),r=!0);r&&u(this,t,n)}},removeType:function(e,t){var n=l(e),r=!1,a=function(e){var t=i.indexOf(this._jsPlumb.types,e);return-1!=t?(p(this,t),this._jsPlumb.types.splice(t,1),!0):!1}.bind(this);if(null!=n){for(var o=0,s=n.length;s>o;o++)r=a(n[o])||r;r&&u(this,null,t)}},clearTypes:function(e){for(var t=this._jsPlumb.types.length,n=0;t>n;n++)p(this,0),this._jsPlumb.types.splice(0,1);u(this,{},e)},toggleType:function(e,t,n){var i=l(e);if(null!=i){for(var r=0,a=i.length;a>r;r++){var o=jsPlumbUtil.indexOf(this._jsPlumb.types,i[r]);-1!=o?(p(this,o),this._jsPlumb.types.splice(o,1)):this._jsPlumb.types.push(i[r])}u(this,t,n)}},applyType:function(e,t){if(this.setPaintStyle(e.paintStyle,t),this.setHoverPaintStyle(e.hoverPaintStyle,t),e.parameters)for(var n in e.parameters)this.setParameter(n,e.parameters[n]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(e,t){this._jsPlumb.paintStyle=e,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,a(this),t||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(e,t){this._jsPlumb.hoverPaintStyle=e,a(this),t||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(e){(e||null==this.typeId)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(e,t,n){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){if(this._jsPlumb.hover=e,null!=this.canvas){if(null!=this._jsPlumb.instance.hoverClass){var i=e?"addClass":"removeClass";this._jsPlumb.instance[i](this.canvas,this._jsPlumb.instance.hoverClass)}null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[i](this.canvas,this._jsPlumb.hoverClass)}null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=e?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(n=n||r(),this.repaint({timestamp:n,recalc:!1}))),this.getAttachedElements&&!t&&s(this,e,r(),this)}}});var h=0,f=function(){var e=h+1;return h++,e},g=window.jsPlumbInstance=function(t){this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:4,strokeStyle:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},t&&m.extend(this.Defaults,t),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},jsPlumbUtil.EventGenerator.apply(this);var a=this,s=f(),l=a.bind,c={},u=1,p=function(e){if(null==e)return null;if(3==e.nodeType||8==e.nodeType)return{el:e,text:!0};var t=a.getDOMElement(e);return{el:t,id:jsPlumbUtil.isString(e)&&null==t?e:J(t)}};this.getInstanceIndex=function(){return s},this.setZoom=function(e,t){return jsPlumbUtil.oldIE||(u=e,a.fire("zoom",u),t&&a.repaintEverything()),!jsPlumbUtil.oldIE},this.getZoom=function(){return u};for(var h in this.Defaults)c[h]=this.Defaults[h];var g,v=[];this.unbindContainer=function(){if(null!=g&&v.length>0)for(var e=0;e<v.length;e++)a.off(g,v[e][0],v[e][1])},this.setContainer=function(e){this.unbindContainer(),e=this.getDOMElement(e),this.select().each(function(t){t.moveParent(e)}),this.selectEndpoints().each(function(t){t.moveParent(e)}),g=e,v.length=0;for(var t=function(e,t){var n=t.srcElement||t.target,i=(n&&n.parentNode?n.parentNode._jsPlumb:null)||(n?n._jsPlumb:null)||(n&&n.parentNode&&n.parentNode.parentNode?n.parentNode.parentNode._jsPlumb:null);i&&(i.fire(e,i,t),a.fire(e,i.component||i,t))},n=function(e,t,n){v.push([e,n]),a.on(g,e,t,n)},i=function(e){n(e,"._jsPlumb_connector > *",function(n){t(e,n)}),n(e,"._jsPlumb_endpoint, ._jsPlumb_endpoint > *, ._jsPlumb_endpoint svg *",function(n){t(e,n)}),n(e,"._jsPlumb_overlay, ._jsPlumb_overlay *",function(n){t(e,n)})},r=0;r<o.length;r++)i(o[r])},this.getContainer=function(){return g},this.bind=function(e,t){"ready"===e&&b?t():l.apply(a,[e,t])},a.importDefaults=function(e){for(var t in e)a.Defaults[t]=e[t];return e.Container&&a.setContainer(e.Container),a},a.restoreDefaults=function(){return a.Defaults=m.extend({},c),a};var y=null,b=!1,w=[],x={},k={},C={},S={},_={},T={},$=!1,A=[],E=!1,P=null,I=this.Defaults.Scope,D=null,M=1,N=function(){return""+M++},j=function(e,t){g?g.appendChild(e):t?this.getDOMElement(t).appendChild(e):this.appendToRoot(e)}.bind(this),O=function(e,t,n,i){if(!m.headless&&!E){var o=J(e),s=a.getDragManager().getElementsForDraggable(o);null==n&&(n=r());var l=ve({elId:o,offset:t,recalc:!1,timestamp:n});if(s)for(var c in s)ve({elId:s[c].id,offset:{left:l.o.left+s[c].offset.left,top:l.o.top+s[c].offset.top},recalc:!1,timestamp:n});if(a.anchorManager.redraw(o,t,n,null,i),s)for(var u in s)a.anchorManager.redraw(s[u].id,t,n,s[u].offset,i,!0)}},L=function(e,t){var n,r,o,s=null;if(i.isArray(e)){s=[];for(var l=0,c=e.length;c>l;l++)o=a.getDOMElement(e[l]),r=a.getAttribute(o,"id"),s.push(t.apply(a,[o,r]))}else n=a.getDOMElement(e),r=a.getId(n),s=t.apply(a,[n,r]);return s},R=function(e){return k[e]},F=function(e,t,n,r){if(!m.headless){var o=null==t?!1:t;if(o&&m.isDragSupported(e,a)&&!m.isAlreadyDraggable(e,a)){var s=n||a.Defaults.DragOptions;s=m.extend({},s);var l=m.dragEvents.drag,c=m.dragEvents.stop,u=m.dragEvents.start,d=a.getDOMElement(e),p=a.getDragManager().getDragAncestor(d),h={left:0,top:0},f=h,g=!1;me(r,e),s[u]=i.wrap(s[u],function(){return f=null!=p?a.getOffset(p):h,a.setHoverSuspended(!0),a.select({source:e}).addClass(a.elementDraggingClass+" "+a.sourceElementDraggingClass,!0),a.select({target:e}).addClass(a.elementDraggingClass+" "+a.targetElementDraggingClass,!0),a.setConnectionBeingDragged(!0),s.canDrag?n.canDrag():void 0},!1),s[l]=i.wrap(s[l],function(){var t=a.getUIPosition(arguments,a.getZoom());t.left+=f.left,t.top+=f.top,O(e,t,null,!0),g&&a.addClass(e,"jsPlumb_dragged"),g=!0}),s[c]=i.wrap(s[c],function(){var t=[];t=1==arguments.length&&arguments[0].selection&&arguments[0].selection.length>0?arguments[0].selection:[[e,a.getUIPosition(arguments,a.getZoom(),!0)]];for(var n=function(e){O(e[0],e[1]),a.removeClass(e[0],"jsPlumb_dragged"),a.select({source:e[0]}).removeClass(a.elementDraggingClass+" "+a.sourceElementDraggingClass,!0),a.select({target:e[0]}).removeClass(a.elementDraggingClass+" "+a.targetElementDraggingClass,!0),a.getDragManager().dragEnded(e[0])},i=0;i<t.length;i++)n(t[i]);g=!1,a.setHoverSuspended(!1),a.setConnectionBeingDragged(!1)});var v=J(e);T[v]=!0;var y=T[v];s.disabled=null==y?!1:!y,a.initDraggable(e,s),a.getDragManager().register(e)}}},U=function(e,t){for(var n=e.scope.split(/\s/),i=t.scope.split(/\s/),r=0;r<n.length;r++)for(var a=0;a<i.length;a++)if(i[a]==n[r])return!0;return!1},z=function(e,t){var n=m.extend({},e);if(t&&m.extend(n,t),n.source&&(n.source.endpoint?n.sourceEndpoint=n.source:n.source=a.getDOMElement(n.source)),n.target&&(n.target.endpoint?n.targetEndpoint=n.target:n.target=a.getDOMElement(n.target)),e.uuids&&(n.sourceEndpoint=R(e.uuids[0]),n.targetEndpoint=R(e.uuids[1])),n.sourceEndpoint&&n.sourceEndpoint.isFull())return void i.log(a,"could not add connection; source endpoint is full");if(n.targetEndpoint&&n.targetEndpoint.isFull())return void i.log(a,"could not add connection; target endpoint is full");if(!n.type&&n.sourceEndpoint&&(n.type=n.sourceEndpoint.connectionType),n.sourceEndpoint&&n.sourceEndpoint.connectorOverlays){n.overlays=n.overlays||[];for(var r=0,o=n.sourceEndpoint.connectorOverlays.length;o>r;r++)n.overlays.push(n.sourceEndpoint.connectorOverlays[r])}!n["pointer-events"]&&n.sourceEndpoint&&n.sourceEndpoint.connectorPointerEvents&&(n["pointer-events"]=n.sourceEndpoint.connectorPointerEvents);var s=function(e,t){var n=m.extend({},e);for(var i in t)t[i]&&(n[i]=t[i]);return n},l=function(e,t,i){return a.addEndpoint(e,s(t,{anchor:n.anchors?n.anchors[i]:n.anchor,endpoint:n.endpoints?n.endpoints[i]:n.endpoint,paintStyle:n.endpointStyles?n.endpointStyles[i]:n.endpointStyle,hoverPaintStyle:n.endpointHoverStyles?n.endpointHoverStyles[i]:n.endpointHoverStyle}))},c=function(e,t,i){if(n[e]&&!n[e].endpoint&&!n[e+"Endpoint"]&&!n.newConnection){var r=J(n[e]),a=i[r];if(a){if(!a.enabled)return!1;var o=null!=a.endpoint&&a.endpoint._jsPlumb?a.endpoint:l(n[e],a.def,t);if(o.isFull())return!1;n[e+"Endpoint"]=o,o._doNotDeleteOnDetach=!1,o._deleteOnDetach=!0,a.uniqueEndpoint&&(a.endpoint?o.finalEndpoint=a.endpoint:(a.endpoint=o,o._deleteOnDetach=!1,o._doNotDeleteOnDetach=!0))}}};return c("source",0,this.sourceEndpointDefinitions)!==!1&&c("target",1,this.targetEndpointDefinitions)!==!1?(n.sourceEndpoint&&n.targetEndpoint&&(U(n.sourceEndpoint,n.targetEndpoint)||(n=null)),n):void 0}.bind(a),q=function(e){var t=a.Defaults.ConnectionType||a.getDefaultConnectionType();e._jsPlumb=a,e.newConnection=q,e.newEndpoint=H,e.endpointsByUUID=k,e.endpointsByElement=x,e.finaliseConnection=B,e.id="con_"+N();var n=new t(e);return n.isDetachable()&&(n.endpoints[0].initDraggable(),n.endpoints[1].initDraggable()),n},B=a.finaliseConnection=function(e,t,n,i){if(t=t||{},e.suspendedEndpoint||w.push(e),e.endpoints[0].isTemporarySource=!1,(null==e.suspendedEndpoint||i)&&a.anchorManager.newConnection(e),O(e.source),!t.doNotFireConnectionEvent&&t.fireEvent!==!1){var r={connection:e,source:e.source,target:e.target,sourceId:e.sourceId,targetId:e.targetId,sourceEndpoint:e.endpoints[0],targetEndpoint:e.endpoints[1]};a.fire("connection",r,n)}},H=function(e,t){var n=a.Defaults.EndpointType||m.Endpoint,i=m.extend({},e);i._jsPlumb=a,i.newConnection=q,i.newEndpoint=H,i.endpointsByUUID=k,i.endpointsByElement=x,i.fireDetachEvent=ee,i.elementId=t||J(i.source);var r=new n(i);return r.id="ep_"+N(),me(i.elementId,i.source),m.headless||a.getDragManager().endpointAdded(i.source,t),r},V=function(e,t,n){var i=x[e];if(i&&i.length)for(var r=0,a=i.length;a>r;r++){for(var o=0,s=i[r].connections.length;s>o;o++){var l=t(i[r].connections[o]);if(l)return}n&&n(i[r])}},W=function(e,t){return L(e,function(e,n){T[n]=t,this.isDragSupported(e)&&this.setElementDraggable(e,t)})},G=function(e,t,n){t="block"===t;var i=null;n&&(i=t?function(e){e.setVisible(!0,!0,!0)}:function(e){e.setVisible(!1,!0,!0)});var r=p(e);V(r.id,function(e){if(t&&n){var i=e.sourceId===r.id?1:0;e.endpoints[i].isVisible()&&e.setVisible(!0)}else e.setVisible(t)},i)},K=function(e){return L(e,function(e,t){var n=null==T[t]?!1:T[t];return n=!n,T[t]=n,this.setDraggable(e,n),n}.bind(this))},X=function(e,t){var n=null;t&&(n=function(e){var t=e.isVisible();e.setVisible(!t)}),V(e,function(e){var t=e.isVisible();e.setVisible(!t)},n)},Y=function(e){var t=S[e];return t?{o:t,s:A[e]}:ve({elId:e})},J=function(e,t,n){if(jsPlumbUtil.isString(e))return e;if(null==e)return null;var i=a.getAttribute(e,"id");return i&&"undefined"!==i||(2==arguments.length&&void 0!==arguments[1]?i=t:(1==arguments.length||3==arguments.length&&!arguments[2])&&(i="jsPlumb_"+s+"_"+N()),n||a.setAttribute(e,"id",i)),i};this.setConnectionBeingDragged=function(e){$=e},this.isConnectionBeingDragged=function(){return $},this.connectorClass="_jsPlumb_connector",this.connectedClass="_jsPlumb_connected",this.hoverClass="_jsPlumb_hover",this.endpointClass="_jsPlumb_endpoint",this.endpointConnectedClass="_jsPlumb_endpoint_connected",this.endpointFullClass="_jsPlumb_endpoint_full",this.endpointDropAllowedClass="_jsPlumb_endpoint_drop_allowed",this.endpointDropForbiddenClass="_jsPlumb_endpoint_drop_forbidden",this.overlayClass="_jsPlumb_overlay",this.draggingClass="_jsPlumb_dragging",this.elementDraggingClass="_jsPlumb_element_dragging",this.sourceElementDraggingClass="_jsPlumb_source_element_dragging",this.targetElementDraggingClass="_jsPlumb_target_element_dragging",this.endpointAnchorClassPrefix="_jsPlumb_endpoint_anchor",this.hoverSourceClass="_jsPlumb_source_hover",this.hoverTargetClass="_jsPlumb_target_hover",this.dragSelectClass="_jsPlumb_drag_select",this.Anchors={},this.Connectors={svg:{},vml:{}},this.Endpoints={svg:{},vml:{}},this.Overlays={svg:{},vml:{}},this.ConnectorRenderers={},this.SVG="svg",this.VML="vml",this.addEndpoint=function(e,t,n){n=n||{};var r=m.extend({},n);m.extend(r,t),r.endpoint=r.endpoint||a.Defaults.Endpoint,r.paintStyle=r.paintStyle||a.Defaults.EndpointStyle;for(var o=[],s=i.isArray(e)||null!=e.length&&!i.isString(e)?e:[e],l=0,c=s.length;c>l;l++){r.source=a.getDOMElement(s[l]),fe(r.source);var u=J(r.source),d=H(r,u),p=me(u,r.source).info.o;i.addToList(x,u,d),E||d.paint({anchorLoc:d.anchor.compute({xy:[p.left,p.top],wh:A[u],element:d,timestamp:P}),timestamp:P}),o.push(d),d._doNotDeleteOnDetach=!0}return 1==o.length?o[0]:o},this.addEndpoints=function(e,t,n){for(var r=[],o=0,s=t.length;s>o;o++){var l=a.addEndpoint(e,t[o],n);i.isArray(l)?Array.prototype.push.apply(r,l):r.push(l)}return r},this.animate=function(e,t,n){if(!this.animationSupported)return!1;n=n||{};var r=a.getDOMElement(e),o=J(r),s=m.animEvents.step,l=m.animEvents.complete;n[s]=i.wrap(n[s],function(){a.revalidate(o)}),n[l]=i.wrap(n[l],function(){a.revalidate(o)}),a.doAnimate(r,t,n)},this.checkCondition=function(e,t){var n=a.getListener(e),r=!0;if(n&&n.length>0)try{for(var o=0,s=n.length;s>o;o++)r=r&&n[o](t)}catch(l){i.log(a,"cannot check condition ["+e+"]"+l)}return r},this.connect=function(e,t){var n,i=z(e,t);if(i){if(null==i.source&&null==i.sourceEndpoint)return void jsPlumbUtil.log("Cannot establish connection - source does not exist");if(null==i.target&&null==i.targetEndpoint)return void jsPlumbUtil.log("Cannot establish connection - target does not exist");fe(i.source),n=q(i),B(n,i)}return n};var Q=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],Z=function(e,t,n,i){var r,a,o,s=Q[n],l=e[s.elId],c=(e[s.el],e.endpoints[n]),u={index:n,originalSourceId:0===n?l:e.sourceId,newSourceId:e.sourceId,originalTargetId:1==n?l:e.targetId,newTargetId:e.targetId,connection:e};if(t.constructor==m.Endpoint)r=t,r.addConnection(e);else if(a=J(t),o=this[s.epDefs][a],a===e[s.elId])r=null;else if(o){if(!o.enabled)return;r=null!=o.endpoint&&o.endpoint._jsPlumb?o.endpoint:this.addEndpoint(t,o.def),o.uniqueEndpoint&&(o.endpoint=r),r._doNotDeleteOnDetach=!1,r._deleteOnDetach=!0,r.addConnection(e)}else r=e.makeEndpoint(0===n,t,a),r._doNotDeleteOnDetach=!1,r._deleteOnDetach=!0;return null!=r&&(c.detachFromConnection(e),e.endpoints[n]=r,e[s.el]=r.element,e[s.elId]=r.elementId,u[0===n?"newSourceId":"newTargetId"]=r.elementId,te(u),i||e.repaint()),u}.bind(this);this.setSource=function(e,t,n){var i=Z(e,t,0,n);this.anchorManager.sourceChanged(i.originalSourceId,i.newSourceId,e)},this.setTarget=function(e,t,n){var i=Z(e,t,1,n);this.anchorManager.updateOtherEndpoint(i.originalSourceId,i.originalTargetId,i.newTargetId,e)},this.deleteEndpoint=function(e,t){var n="string"==typeof e?k[e]:e;return n&&a.deleteObject({endpoint:n,dontUpdateHover:t}),a},this.deleteEveryEndpoint=function(){var e=a.setSuspendDrawing(!0);for(var t in x){var n=x[t];if(n&&n.length)for(var i=0,r=n.length;r>i;i++)a.deleteEndpoint(n[i],!0)}return x={},C={},k={},a.anchorManager.reset(),a.getDragManager().reset(),e||a.setSuspendDrawing(!1),a};var ee=function(e,t,n){var i=a.Defaults.ConnectionType||a.getDefaultConnectionType(),r=e.constructor==i,o=r?{connection:e,source:e.source,target:e.target,sourceId:e.sourceId,targetId:e.targetId,sourceEndpoint:e.endpoints[0],targetEndpoint:e.endpoints[1]}:e;t&&a.fire("connectionDetached",o,n),a.anchorManager.connectionDetached(o)},te=a.fireMoveEvent=function(e,t){a.fire("connectionMoved",e,t)};this.unregisterEndpoint=function(e){e._jsPlumb.uuid&&(k[e._jsPlumb.uuid]=null),a.anchorManager.deleteEndpoint(e);for(var t in x){var n=x[t];if(n){for(var i=[],r=0,o=n.length;o>r;r++)n[r]!=e&&i.push(n[r]);x[t]=i}x[t].length<1&&delete x[t]}},this.detach=function(){if(0!==arguments.length){var e=a.Defaults.ConnectionType||a.getDefaultConnectionType(),t=arguments[0].constructor==e,n=2==arguments.length&&t?arguments[1]||{}:arguments[0],i=n.fireEvent!==!1,r=n.forceDetach,o=t?arguments[0]:n.connection;if(o)(r||jsPlumbUtil.functionChain(!0,!1,[[o.endpoints[0],"isDetachAllowed",[o]],[o.endpoints[1],"isDetachAllowed",[o]],[o,"isDetachAllowed",[o]],[a,"checkCondition",["beforeDetach",o]]]))&&o.endpoints[0].detach(o,!1,!0,i);else{var s=m.extend({},n);if(s.uuids)R(s.uuids[0]).detachFrom(R(s.uuids[1]),i);else if(s.sourceEndpoint&&s.targetEndpoint)s.sourceEndpoint.detachFrom(s.targetEndpoint);else{var l=J(a.getDOMElement(s.source)),c=J(a.getDOMElement(s.target));V(l,function(e){(e.sourceId==l&&e.targetId==c||e.targetId==l&&e.sourceId==c)&&a.checkCondition("beforeDetach",e)&&e.endpoints[0].detach(e,!1,!0,i)})}}}},this.detachAllConnections=function(e,t){t=t||{},e=a.getDOMElement(e);var n=J(e),i=x[n];if(i&&i.length)for(var r=0,o=i.length;o>r;r++)i[r].detachAll(t.fireEvent!==!1,t.forceDetach);return a},this.detachEveryConnection=function(e){return e=e||{},a.batch(function(){for(var t in x){var n=x[t];if(n&&n.length)for(var i=0,r=n.length;r>i;i++)n[i].detachAll(e.fireEvent!==!1,e.forceDetach)}w.length=0}),a},this.deleteObject=function(e){var t={endpoints:{},connections:{},endpointCount:0,connectionCount:0},n=e.fireEvent!==!1,i=e.deleteAttachedObjects!==!1,r=function(n){if(null!=n&&null==t.connections[n.id]&&(e.dontUpdateHover||null==n._jsPlumb||n.setHover(!1),t.connections[n.id]=n,t.connectionCount++,i))for(var r=0;r<n.endpoints.length;r++)n.endpoints[r]._deleteOnDetach&&o(n.endpoints[r])},o=function(n){if(null!=n&&null==t.endpoints[n.id]&&(e.dontUpdateHover||null==n._jsPlumb||n.setHover(!1),t.endpoints[n.id]=n,t.endpointCount++,i))for(var a=0;a<n.connections.length;a++){var o=n.connections[a];r(o)}};e.connection?r(e.connection):o(e.endpoint);for(var s in t.connections){var l=t.connections[s];l._jsPlumb&&(jsPlumbUtil.removeWithFunction(w,function(e){return l.id==e.id}),ee(l,n,e.originalEvent),l.endpoints[0].detachFromConnection(l),l.endpoints[1].detachFromConnection(l),l.cleanup(!0),l.destroy(!0))}for(var c in t.endpoints){var u=t.endpoints[c];u._jsPlumb&&(a.unregisterEndpoint(u),u.cleanup(!0),u.destroy(!0))}return t},this.draggable=function(e,t){var n,i,r;if("object"==typeof e&&e.length)for(n=0,i=e.length;i>n;n++)r=p(e[n]),r.el&&F(r.el,!0,t,r.id);else r=p(e),r.el&&F(r.el,!0,t,r.id);return a};var ne=function(e,t,n,i){for(var r=0,a=e.length;a>r;r++)e[r][t].apply(e[r],n);return i(e)},ie=function(e,t,n){for(var i=[],r=0,a=e.length;a>r;r++)i.push([e[r][t].apply(e[r],n),e[r]]);return i},re=function(e,t,n){return function(){return ne(e,t,arguments,n)}},ae=function(e,t){return function(){return ie(e,t,arguments)}},oe=function(e,t){var n=[];if(e)if("string"==typeof e){if("*"===e)return e;n.push(e)}else if(t)n=e;else if(e.length)for(var i=0,r=e.length;r>i;i++)n.push(p(e[i]).id);else n.push(p(e).id);return n},se=function(e,t,n){return"*"===e?!0:e.length>0?-1!=jsPlumbUtil.indexOf(e,t):!n};this.getConnections=function(e,t){e?e.constructor==String&&(e={scope:e}):e={};for(var n=e.scope||a.getDefaultScope(),i=oe(n,!0),r=oe(e.source),o=oe(e.target),s=!t&&i.length>1?{}:[],l=function(e,n){if(!t&&i.length>1){var r=s[e];null==r&&(r=s[e]=[]),r.push(n)}else s.push(n)},c=0,u=w.length;u>c;c++){var d=w[c];se(i,d.scope)&&se(r,d.sourceId)&&se(o,d.targetId)&&l(d.scope,d)}return s};var le=function(e,t){return function(n){for(var i=0,r=e.length;r>i;i++)n(e[i]);return t(e)}},ce=function(e){return function(t){return e[t]}},ue=function(e,t){var n,i,r={length:e.length,each:le(e,t),get:ce(e)},a=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],o=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(n=0,i=a.length;i>n;n++)r[a[n]]=re(e,a[n],t);for(n=0,i=o.length;i>n;n++)r[o[n]]=ae(e,o[n]);return r},de=function(e){var t=ue(e,de);return m.extend(t,{setDetachable:re(e,"setDetachable",de),setReattach:re(e,"setReattach",de),setConnector:re(e,"setConnector",de),detach:function(){for(var t=0,n=e.length;n>t;t++)a.detach(e[t])},isDetachable:ae(e,"isDetachable"),isReattach:ae(e,"isReattach")})},pe=function(e){var t=ue(e,pe);return m.extend(t,{setEnabled:re(e,"setEnabled",pe),setAnchor:re(e,"setAnchor",pe),isEnabled:ae(e,"isEnabled"),detachAll:function(){for(var t=0,n=e.length;n>t;t++)e[t].detachAll()},remove:function(){for(var t=0,n=e.length;n>t;t++)a.deleteObject({endpoint:e[t]})}})};this.select=function(e){return e=e||{},e.scope=e.scope||"*",de(e.connections||a.getConnections(e,!0))},this.selectEndpoints=function(e){e=e||{},e.scope=e.scope||"*";var t=!e.element&&!e.source&&!e.target,n=t?"*":oe(e.element),i=t?"*":oe(e.source),r=t?"*":oe(e.target),a=oe(e.scope,!0),o=[];for(var s in x){var l=se(n,s,!0),c=se(i,s,!0),u="*"!=i,d=se(r,s,!0),p="*"!=r;if(l||c||d)e:for(var h=0,f=x[s].length;f>h;h++){var g=x[s][h];if(se(a,g.scope,!0)){var m=u&&i.length>0&&!g.isSource,v=p&&r.length>0&&!g.isTarget;if(m||v)continue e;o.push(g)}}}return pe(o)},this.getAllConnections=function(){return w},this.getDefaultScope=function(){return I},this.getEndpoint=R,this.getEndpoints=function(e){return x[p(e).id]},this.getDefaultEndpointType=function(){return m.Endpoint},this.getDefaultConnectionType=function(){return m.Connection},this.getId=J,this.appendElement=j;var he=!1;this.isHoverSuspended=function(){return he},this.setHoverSuspended=function(e){he=e},this.hide=function(e,t){return G(e,"none",t),a},this.idstamp=N,this.connectorsInitialized=!1,this.registerConnectorType=function(e,t){n.push([e,t])};var fe=function(e){if(!g&&e){var t=a.getDOMElement(e);t.offsetParent&&a.setContainer(t.offsetParent)}},ge=function(){a.Defaults.Container&&a.setContainer(a.Defaults.Container)},me=a.manage=function(e,t){return C[e]||(C[e]={el:t,endpoints:[],connections:[]},C[e].info=ve({elId:e,timestamp:P})),C[e]},ve=this.updateOffset=function(e){var t,n=e.timestamp,i=e.recalc,r=e.offset,o=e.elId;return E&&!n&&(n=P),!i&&n&&n===_[o]?{o:e.offset||S[o],s:A[o]}:(i||!r&&null==S[o]?(t=C[o]?C[o].el:null,null!=t&&(A[o]=a.getSize(t),S[o]=a.getOffset(t),_[o]=n)):(S[o]=r||S[o],null==A[o]&&(t=C[o].el,null!=t&&(A[o]=a.getSize(t))),_[o]=n),S[o]&&!S[o].right&&(S[o].right=S[o].left+A[o][0],S[o].bottom=S[o].top+A[o][1],S[o].width=A[o][0],S[o].height=A[o][1],S[o].centerx=S[o].left+S[o].width/2,S[o].centery=S[o].top+S[o].height/2),{o:S[o],s:A[o]})};this.init=function(){e=m.getRenderModes();var t=function(e,t,n){m.Connectors[e][t]=function(){n.apply(this,arguments),m.ConnectorRenderers[e].apply(this,arguments)},jsPlumbUtil.extend(m.Connectors[e][t],[n,m.ConnectorRenderers[e]])};if(!m.connectorsInitialized){for(var i=0;i<n.length;i++)for(var r=0;r<e.length;r++)t(e[r],n[i][1],n[i][0]);m.connectorsInitialized=!0}b||(ge(),a.anchorManager=new m.AnchorManager({jsPlumbInstance:a}),a.setRenderMode(a.Defaults.RenderMode),b=!0,a.fire("ready",a))}.bind(this),this.log=y,this.jsPlumbUIComponent=d,this.makeAnchor=function(){var e,t=function(e,t){if(m.Anchors[e])return new m.Anchors[e](t);if(!a.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+e+"'"}};if(0===arguments.length)return null;var n=arguments[0],r=arguments[1],o=(arguments[2],null);if(n.compute&&n.getOrientation)return n;if("string"==typeof n)o=t(arguments[0],{elementId:r,jsPlumbInstance:a});else if(i.isArray(n))if(i.isArray(n[0])||i.isString(n[0]))2==n.length&&i.isObject(n[1])?i.isString(n[0])?(e=m.extend({elementId:r,jsPlumbInstance:a},n[1]),o=t(n[0],e)):(e=m.extend({elementId:r,jsPlumbInstance:a,anchors:n[0]},n[1]),o=new m.DynamicAnchor(e)):o=new m.DynamicAnchor({anchors:n,selector:null,elementId:r,jsPlumbInstance:a});else{var s={x:n[0],y:n[1],orientation:n.length>=4?[n[2],n[3]]:[0,0],offsets:n.length>=6?[n[4],n[5]]:[0,0],elementId:r,jsPlumbInstance:a,cssClass:7==n.length?n[6]:null};o=new m.Anchor(s),o.clone=function(){return new m.Anchor(s)}}return o.id||(o.id="anchor_"+N()),o},this.makeAnchors=function(e,t,n){for(var r=[],o=0,s=e.length;s>o;o++)"string"==typeof e[o]?r.push(m.Anchors[e[o]]({elementId:t,jsPlumbInstance:n})):i.isArray(e[o])&&r.push(a.makeAnchor(e[o],t,n));return r},this.makeDynamicAnchor=function(e,t){return new m.DynamicAnchor({anchors:e,selector:t,elementId:null,jsPlumbInstance:a})},this.targetEndpointDefinitions={};var ye=function(e,t,n){e.paintStyle=e.paintStyle||n.Defaults.EndpointStyles[t]||n.Defaults.EndpointStyle,e.hoverPaintStyle=e.hoverPaintStyle||n.Defaults.EndpointHoverStyles[t]||n.Defaults.EndpointHoverStyle,e.anchor=e.anchor||n.Defaults.Anchors[t]||n.Defaults.Anchor,e.endpoint=e.endpoint||n.Defaults.Endpoints[t]||n.Defaults.Endpoint};this.sourceEndpointDefinitions={};var be=function(e,t,n,i,r){for(var a=e.target||e.srcElement,o=!1,s=i.getSelector(t,n),l=0;l<s.length;l++)if(s[l]==a){o=!0;break}return r?!o:o},we=function(e,t,n,r,o,s){var l=new d(t),c=t._jsPlumb.EndpointDropHandler({jsPlumb:a,enabled:function(){return e.el[s].enabled},isFull:function(n){var i=a.select({target:e.id}).length,r=e.el[s],o=r.maxConnections>0&&i>=r.maxConnections;return o&&t.onMaxConnections&&t.onMaxConnections({element:e.el,connection:jpc},n),o},element:e.el,elementId:e.id,isSource:r,isTarget:o,addClass:function(t){a.addClass(e.el,t)},removeClass:function(t){a.removeClass(e.el,t)},onDrop:function(e){var t=e.endpoints[0];t.anchor.locked=!1},isDropAllowed:function(){return l.isDropAllowed.apply(l,arguments)},getEndpoint:function(n){var i=e.el[s],r=i.endpoint;if((null==r||null==r._jsPlumb)&&(r=a.addEndpoint(e.el,t),r._mtNew=!0),t.uniqueEndpoint&&(i.endpoint=r),r._doNotDeleteOnDetach=!1,r._deleteOnDetach=!0,n.isDetachable()&&r.initDraggable(),null!=r.anchor.positionFinder){var o=a.getUIPosition(arguments,a.getZoom()),l=a.getOffset(e.el),c=a.getSize(e.el),u=r.anchor.positionFinder(o,l,c,r.anchor.constructorParams);r.anchor.x=u[0],r.anchor.y=u[1]}return r},maybeCleanup:function(e){e._mtNew&&0===e.connections.length?a.deleteObject({endpoint:e}):delete e._mtNew}}),u=m.dragEvents.drop;return n.scope=n.scope||t.scope||a.Defaults.Scope,n[u]=i.wrap(n[u],c,!0),o&&(n[m.dragEvents.over]=function(){return!0}),t.allowLoopback===!1&&(n.canDrop=function(t){var n=t.getDragElement()._jsPlumbRelatedElement;return n!=e.el}),a.initDroppable(e.el,n,"internal"),c};this.makeTarget=function(e,t,n){var i=m.extend({_jsPlumb:this},n);m.extend(i,t),ye(i,1,this);for(var r=(!(i.deleteEndpointsOnDetach===!1),i.maxConnections||-1),a=function(e){var t=p(e),n=t.id,a=m.extend({},i.dropOptions||{});fe(n);var o={def:i,uniqueEndpoint:i.uniqueEndpoint,maxConnections:r,enabled:!0};t.el._jsPlumbTarget=o,this.targetEndpointDefinitions[n]=o,we(t,i,a,i.isSource===!0,!0,"_jsPlumbTarget")}.bind(this),o=e.length&&e.constructor!=String?e:[e],s=0,l=o.length;l>s;s++)a(o[s]);return this},this.unmakeTarget=function(e,t){var n=p(e);return m.destroyDroppable(n.el),t||delete this.targetEndpointDefinitions[n.id],this},this.makeSource=function(e,t,n){var r=m.extend({_jsPlumb:this},n);m.extend(r,t),ye(r,0,this);for(var o=r.maxConnections||1,s=r.onMaxConnections,l=function(e){var t=e.id,n=this.getDOMElement(e.el);fe(t);var l={def:r,uniqueEndpoint:r.uniqueEndpoint,maxConnections:o,enabled:!0};this.sourceEndpointDefinitions[t]=l,e.el._jsPlumbSource=l;var c=m.dragEvents.stop,d=m.dragEvents.drag,p=m.extend({},r.dragOptions||{}),h=p.drag,f=p.stop,g=null,v=!1;p.scope=p.scope||r.scope,p[d]=i.wrap(p[d],function(){h&&h.apply(this,arguments),v=!1}),p[c]=i.wrap(p[c],function(){if(f&&f.apply(this,arguments),this.currentlyDragging=!1,null!=g._jsPlumb){var e=r.anchor||this.Defaults.Anchor,n=g.anchor,i=g.connections[0],o=this.makeAnchor(e,t,this),s=g.element;if(null!=o.positionFinder){var l=a.getOffset(s),c=this.getSize(s),u={left:l.left+n.x*c[0],top:l.top+n.y*c[1]},d=o.positionFinder(u,l,c,o.constructorParams);o.x=d[0],o.y=d[1]}g.setAnchor(o,!0),g.repaint(),this.repaint(g.elementId),null!=i&&this.repaint(i.targetId)}}.bind(this));var y=function(i){var l=this.getOriginalEvent(i);if(3!==i.which&&2!==i.button){var c=this.sourceEndpointDefinitions[t];if(c.enabled){if(t=this.getId(this.getDOMElement(e.el)),r.filter){var d=jsPlumbUtil.isString(r.filter)?be(l,e.el,r.filter,this,r.filterExclude):r.filter(l,e.el);if(d===!1)return}var h=this.select({source:t}).length;if(c.maxConnections>=0&&c.uniqueEndpoint&&h>=c.maxConnections)return s&&s({element:e.el,maxConnections:o},i),!1;var f=m.getPositionOnElement(l,n,u),y={};m.extend(y,r),y.isTemporarySource=!0,y.anchor=[f[0],f[1],0,0],y.dragOptions=p,g=this.addEndpoint(t,y),v=!0,g._doNotDeleteOnDetach=!1,g._deleteOnDetach=!0,c.uniqueEndpoint&&(c.endpoint?g.finalEndpoint=c.endpoint:(c.endpoint=g,g._deleteOnDetach=!1,g._doNotDeleteOnDetach=!0));var b=function(){a.off(g.canvas,"mouseup",b),a.off(e.el,"mouseup",b),v&&(v=!1,a.deleteEndpoint(g))};a.on(g.canvas,"mouseup",b),a.on(e.el,"mouseup",b),a.trigger(g.canvas,"mousedown",i),jsPlumbUtil.consume(i)}}}.bind(this);this.on(e.el,"mousedown",y),l.trigger=y,r.filter&&(jsPlumbUtil.isString(r.filter)||jsPlumbUtil.isFunction(r.filter))&&a.setDragFilter(e.el,r.filter);var b=m.extend({},r.dropOptions||{});we(e,r,b,!0,r.isTarget===!0,"_jsPlumbSource")}.bind(this),c=e.length&&e.constructor!=String?e:[e],d=0,h=c.length;h>d;d++)l(p(c[d]));return this},this.unmakeSource=function(e,t){var n=p(e),i=this.sourceEndpointDefinitions[n.id].trigger;return i&&a.off(n.el,"mousedown",i),t||delete this.sourceEndpointDefinitions[n.id],this},this.unmakeEverySource=function(){for(var e in this.sourceEndpointDefinitions)a.unmakeSource(e,!0);return this.sourceEndpointDefinitions={},this};var xe=function(e,t){t=jsPlumbUtil.isArray(t)?t:[t];for(var n=J(e),i=0;i<t.length;i++){var r=this[t[i]][n];if(r)return r.def.scope||this.Defaults.Scope}}.bind(this),ke=function(e,t,n){n=jsPlumbUtil.isArray(n)?n:[n];for(var i=J(e),r=0;r<n.length;r++){var a=this[n[r]][i];a&&(a.def.scope=t,null!=this.scopeChange&&this.scopeChange(e,i,x[i],t,n[r]))}}.bind(this);this.getScope=function(e,t){return xe(e,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(e){return xe(e,"sourceEndpointDefinitions")},this.getTargetScope=function(e){return xe(e,"targetEndpointDefinitions")},this.setScope=function(e,t){ke(e,t,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.setSourceScope=function(e,t){ke(e,t,"sourceEndpointDefinitions")},this.setTargetScope=function(e,t){ke(e,t,"targetEndpointDefinitions")},this.unmakeEveryTarget=function(){for(var e in this.targetEndpointDefinitions)a.unmakeTarget(e,!0);return this.targetEndpointDefinitions={},this};var Ce=function(e,t,n,r){var a="source"==e?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(i.isString(t))a[t].enabled=r?!a[t].enabled:n;else if(t.length)for(var o=0,s=t.length;s>o;o++){var l=p(t[o]);a[l.id]&&(a[l.id].enabled=r?!a[l.id].enabled:n)}else{var c=p(t).id;

a[c].enabled=r?!a[c].enabled:n}return this}.bind(this),Se=function(e,t){return i.isString(e)||!e.length?t.apply(this,[e]):e.length?t.apply(this,[e[0]]):void 0}.bind(this);this.toggleSourceEnabled=function(e){return Ce("source",e,null,!0),this.isSourceEnabled(e)},this.setSourceEnabled=function(e,t){return Ce("source",e,t)},this.isSource=function(e){return Se(e,function(e){return null!=this.sourceEndpointDefinitions[p(e).id]}.bind(this))},this.isSourceEnabled=function(e){return Se(e,function(e){var t=this.sourceEndpointDefinitions[p(e).id];return t&&t.enabled===!0}.bind(this))},this.toggleTargetEnabled=function(e){return Ce("target",e,null,!0),this.isTargetEnabled(e)},this.isTarget=function(e){return Se(e,function(e){return null!=this.targetEndpointDefinitions[p(e).id]}.bind(this))},this.isTargetEnabled=function(e){return Se(e,function(e){var t=this.targetEndpointDefinitions[p(e).id];return t&&t.enabled===!0}.bind(this))},this.setTargetEnabled=function(e,t){return Ce("target",e,t)},this.ready=function(e){a.bind("ready",e)},this.repaint=function(e,t,n){if("object"==typeof e&&e.length)for(var i=0,r=e.length;r>i;i++)O(e[i],t,n);else O(e,t,n);return a},this.revalidate=function(e,t,n){var i=n?e:a.getId(e);return a.updateOffset({elId:i,recalc:!0,timestamp:t}),a.repaint(e)},this.repaintEverything=function(){var e,t=r();for(e in x)a.updateOffset({elId:e,recalc:!0,timestamp:t});for(e in x)O(e,null,t);return this},this.removeAllEndpoints=function(e,t,n){n=n||[];var i=function(e){var r,o,s=p(e),l=x[s.id];if(l)for(n.push(s),r=0,o=l.length;o>r;r++)a.deleteEndpoint(l[r]);if(delete x[s.id],t&&s.el&&3!=s.el.nodeType&&8!=s.el.nodeType)for(r=0,o=s.el.childNodes.length;o>r;r++)i(s.el.childNodes[r])};return i(e),this};var _e=function(e,t){a.removeAllEndpoints(e.id,!0,t);for(var n=function(e){a.getDragManager().elementRemoved(e.id),a.anchorManager.clearFor(e.id),a.anchorManager.removeFloatingConnection(e.id),delete a.floatingConnections[e.id],delete C[e.id],delete S[e.id],e.el&&(a.removeElement(e.el),e.el._jsPlumb=null)},i=1;i<t.length;i++)n(t[i]);n(e)};this.remove=function(e,t){var n=p(e),i=[];return n.text?n.el.parentNode.removeChild(n.el):n.id&&a.batch(function(){_e(n,i)},t===!1),a},this.empty=function(e,t){var n=[],i=function(e,t){var r=p(e);if(r.text)r.el.parentNode.removeChild(r.el);else if(r.el){for(;r.el.childNodes.length>0;)i(r.el.childNodes[0]);t||_e(r,n)}};return a.batch(function(){i(e,!0)},t===!1),a},this.reset=function(){a.setSuspendEvents(!0),a.deleteEveryEndpoint(),a.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},w.length=0,a.setSuspendEvents(!1)};var Te=function(e){e.canvas&&e.canvas.parentNode&&e.canvas.parentNode.removeChild(e.canvas),e.cleanup(),e.destroy()},$e=function(e){Te(e)};this.clear=function(){a.select().each($e),a.selectEndpoints().each($e),x={},k={}},this.setDefaultScope=function(e){return I=e,a},this.setDraggable=W,this.setId=function(e,t,n){var i;jsPlumbUtil.isString(e)?i=e:(e=this.getDOMElement(e),i=this.getId(e));var r=this.getConnections({source:i,scope:"*"},!0),a=this.getConnections({target:i,scope:"*"},!0);t=""+t,n?e=this.getDOMElement(t):(e=this.getDOMElement(i),this.setAttribute(e,"id",t)),x[t]=x[i]||[];for(var o=0,s=x[t].length;s>o;o++)x[t][o].setElementId(t),x[t][o].setReferenceElement(e);delete x[i],this.anchorManager.changeId(i,t),this.getDragManager().changeId(i,t),C[t]=C[i],delete C[i];var l=function(n,i,r){for(var a=0,o=n.length;o>a;a++)n[a].endpoints[i].setElementId(t),n[a].endpoints[i].setReferenceElement(e),n[a][r+"Id"]=t,n[a][r]=e};l(r,0,"source"),l(a,1,"target"),this.repaint(t)},this.setDebugLog=function(e){y=e},this.setSuspendDrawing=function(e,t){var n=E;return E=e,P=e?(new Date).getTime():null,t&&this.repaintEverything(),n},this.isSuspendDrawing=function(){return E},this.getSuspendedAt=function(){return P},this.batch=function(e,t){var n=this.isSuspendDrawing();n||this.setSuspendDrawing(!0);try{e()}catch(r){i.log("Function run while suspended failed",r)}n||this.setSuspendDrawing(!1,!t)},this.doWhileSuspended=this.batch,this.getCachedData=Y,this.timestamp=r,this.setRenderMode=function(e){if(e!==m.SVG&&e!==m.VML)throw new TypeError("Render mode ["+e+"] not supported");return D=this.trySetRenderMode(e)},this.getRenderMode=function(){return D},this.show=function(e,t){return G(e,"block",t),a},this.toggleVisible=X,this.toggleDraggable=K,this.addListener=this.bind};jsPlumbUtil.extend(g,jsPlumbUtil.EventGenerator,{setAttribute:function(e,t,n){this.setAttribute(e,t,n)},getAttribute:function(e,t){return this.getAttribute(m.getDOMElement(e),t)},convertToFullOverlaySpec:function(e){return jsPlumbUtil.isString(e)&&(e=[e,{}]),1===e.length&&e.push({}),e[1].id=e[1].id||jsPlumbUtil.uuid(),e},registerConnectionType:function(e,t){if(this._connectionTypes[e]=m.extend({},t),t.overlays){for(var n={},i=0;i<t.overlays.length;i++){var r=this.convertToFullOverlaySpec(t.overlays[i]);n[r[1].id]=r}this._connectionTypes[e].overlays=n}},registerConnectionTypes:function(e){for(var t in e)this.registerConnectionType(t,e[t])},registerEndpointType:function(e,t){this._endpointTypes[e]=m.extend({},t)},registerEndpointTypes:function(e){for(var t in e)this._endpointTypes[t]=m.extend({},e[t])},getType:function(e,t){return"connection"===t?this._connectionTypes[e]:this._endpointTypes[e]},setIdChanged:function(e,t){this.setId(e,t,!0)},setParent:function(e,t){var n=this.getDOMElement(e),i=this.getId(n),r=this.getDOMElement(t),a=this.getId(r);n.parentNode.removeChild(n),r.appendChild(n),this.getDragManager().setParent(n,i,r,a)},extend:function(e,t,n){var i;if(n)for(i=0;i<n.length;i++)e[n[i]]=t[n[i]];else for(i in t)e[i]=t[i];return e},floatingConnections:{},getFloatingAnchorIndex:function(e){return e.endpoints[0].isFloating()?0:1}});var m=new g;"undefined"!=typeof window&&(window.jsPlumb=m),m.getInstance=function(e){var t=new g(e);return t.init(),t},"function"==typeof define&&(define("jsplumb",[],function(){return m}),define("jsplumbinstance",[],function(){return m.getInstance()})),"undefined"!=typeof exports&&(exports.jsPlumb=m)}.call(this),function(){var e=this,t=(e.jsPlumbUtil,!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),n=function(){if(void 0===n.vml){var e=document.body.appendChild(document.createElement("div"));e.innerHTML='<v:shape id="vml_flag1" adj="1" />';var t=e.firstChild;null!=t&&null!=t.style?(t.style.behavior="url(#default#VML)",n.vml=t?"object"==typeof t.adj:!0):n.vml=!1,e.parentNode.removeChild(e)}return n.vml},i=function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}return e}(),r=i>-1&&9>i,a=function(e,t){if(null==e)return[0,0];var n=u(e),i=c(n,0);return[i[t+"X"],i[t+"Y"]]},o=function(e){return null==e?[0,0]:r?[e.clientX+document.documentElement.scrollLeft,e.clientY+document.documentElement.scrollTop]:a(e,"page")},s=function(e){return a(e,"screen")},l=function(e){return a(e,"client")},c=function(e,t){return e.item?e.item(t):e[t]},u=function(e){return e.touches&&e.touches.length>0?e.touches:e.changedTouches&&e.changedTouches.length>0?e.changedTouches:e.targetTouches&&e.targetTouches.length>0?e.targetTouches:[e]},d=function(e){var t={},n=[],i={},r={},a={};this.register=function(o){var s=e.getId(o),l=e.getOffset(o);t[s]||(t[s]=o,n.push(o),i[s]={});var c=function(t){if(t)for(var n=0;n<t.childNodes.length;n++)if(3!=t.childNodes[n].nodeType&&8!=t.childNodes[n].nodeType){var o=jsPlumb.getDOMElement(t.childNodes[n]),u=e.getId(t.childNodes[n],null,!0);if(u&&r[u]&&r[u]>0){var d=e.getOffset(o);i[s][u]={id:u,offset:{left:d.left-l.left,top:d.top-l.top}},a[u]=s}c(t.childNodes[n])}};c(o)},this.updateOffsets=function(t){if(null!=t){var n=jsPlumb.getDOMElement(t),r=e.getId(n),o=i[r],s=e.getOffset(n);if(o)for(var l in o)if(o.hasOwnProperty(l)){var c=jsPlumb.getDOMElement(l),u=e.getOffset(c);i[r][l]={id:l,offset:{left:u.left-s.left,top:u.top-s.top}},a[l]=r}}},this.endpointAdded=function(n,o){o=o||e.getId(n);var s=document.body,l=n.parentNode;for(r[o]=r[o]?r[o]+1:1;null!=l&&l!=s;){var c=e.getId(l,null,!0);if(c&&t[c]){var u=e.getOffset(l);if(null==i[c][o]){var d=e.getOffset(n);i[c][o]={id:o,offset:{left:d.left-u.left,top:d.top-u.top}},a[o]=c}break}l=l.parentNode}},this.endpointDeleted=function(e){if(r[e.elementId]&&(r[e.elementId]--,r[e.elementId]<=0))for(var t in i)i.hasOwnProperty(t)&&i[t]&&(delete i[t][e.elementId],delete a[e.elementId])},this.changeId=function(e,t){i[t]=i[e],i[e]={},a[t]=a[e],a[e]=null},this.getElementsForDraggable=function(e){return i[e]},this.elementRemoved=function(e){var t=a[e];t&&(delete i[t][e],delete a[e])},this.reset=function(){t={},n=[],i={},r={}},this.dragEnded=function(t){var n=e.getId(t),i=a[n];i&&this.updateOffsets(i)},this.setParent=function(t,n,r,o){var s=a[n];if(s){i[o]||(i[o]={}),i[o][n]=i[s][n],delete i[s][n];var l=e.getOffset(r),c=e.getOffset(t);i[o][n].offset={left:c.left-l.left,top:c.top-l.top},a[n]=o}},this.getDragAncestor=function(t){var n=jsPlumb.getDOMElement(t),i=e.getId(n),r=a[i];return r?jsPlumb.getDOMElement(r):null}},p=function(e){return null==e?null:e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},h=function(e,t){t=p(t),"undefined"!=typeof e.className.baseVal?e.className.baseVal=t:e.className=t},f=function(e){return"undefined"==typeof e.className.baseVal?e.className:e.className.baseVal},g=function(e,t,n){t=null==t?[]:jsPlumbUtil.isArray(t)?t:t.split(/\s+/),n=null==n?[]:jsPlumbUtil.isArray(n)?n:n.split(/\s+/);var i=f(e),r=i.split(/\s+/),a=function(e,t){for(var n=0;n<t.length;n++)if(e)-1==jsPlumbUtil.indexOf(r,t[n])&&r.push(t[n]);else{var i=jsPlumbUtil.indexOf(r,t[n]);-1!=i&&r.splice(i,1)}};a(!0,t),a(!1,n),h(e,r.join(" "))},m=function(e,t){if(null!=e)if("string"==typeof e)t(jsPlumb.getDOMElement(e));else if(null!=e.length)for(var n=0;n<e.length;n++)t(jsPlumb.getDOMElement(e[n]));else t(e)};jsPlumb.extend(jsPlumbInstance.prototype,{headless:!1,pageLocation:o,screenLocation:s,clientLocation:l,getDragManager:function(){return null==this.dragManager&&(this.dragManager=new d(this)),this.dragManager},recalculateOffsets:function(){this.getDragManager().updateOffsets()},createElement:function(e,t,n,i){return this.createElementNS(null,e,t,n,i)},createElementNS:function(e,t,n,i,r){var a,o=null==e?document.createElement(t):document.createElementNS(e,t);n=n||{};for(a in n)o.style[a]=n[a];i&&(o.className=i),r=r||{};for(a in r)o.setAttribute(a,""+r[a]);return o},getAttribute:function(e,t){return null!=e.getAttribute?e.getAttribute(t):null},setAttribute:function(e,t,n){null!=e.setAttribute&&e.setAttribute(t,n)},setAttributes:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])},appendToRoot:function(e){document.body.appendChild(e)},getRenderModes:function(){return["svg","vml"]},isRenderModeAvailable:function(e){return{svg:t,vml:n()}[e]},trySetRenderMode:function(e){var t;if(e){e=e.toLowerCase();var n=this.isRenderModeAvailable("svg"),i=this.isRenderModeAvailable("vml");"svg"===e&&n?t="svg":i&&(t="vml")}return t},addClass:function(e,t){m(e,function(e){g(e,t)})},hasClass:function(e,t){return e=jsPlumb.getDOMElement(e),e.classList?e.classList.contains(t):-1!=f(e).indexOf(t)},removeClass:function(e,t){m(e,function(e){g(e,null,t)})},updateClasses:function(e,t,n){m(e,function(e){g(e,t,n)})},setClass:function(e,t){m(e,function(e){h(e,t)})},setPosition:function(e,t){e.style.left=t.left+"px",e.style.top=t.top+"px"},getPosition:function(e){var t=function(t){var n=e.style[t];return n?n.substring(0,n.length-2):0};return{left:t("left"),top:t("top")}},getStyle:function(e,t){return"undefined"!=typeof window.getComputedStyle?getComputedStyle(e,null).getPropertyValue(t):e.currentStyle[t]},getSelector:function(e,t){var n=null;return n=1==arguments.length?null!=e.nodeType?e:document.querySelectorAll(e):e.querySelectorAll(t)},getOffset:function(e,t){e=jsPlumb.getDOMElement(e);for(var n=this.getContainer(),i={left:e.offsetLeft,top:e.offsetTop},r=t||null!=n&&e.offsetParent!=n?e.offsetParent:null,a=function(t){if(null!=t&&(t.scrollTop>0||t.scrollLeft>0)){var n=this.getStyle(e,"position");"fixed"!==n&&(i.left-=t.scrollLeft,i.top-=t.scrollTop)}}.bind(this);null!=r;)i.left+=r.offsetLeft,i.top+=r.offsetTop,t||a(r),r=t?r.offsetParent:r.offsetParent==n?null:r.offsetParent;if(null!=n&&!t&&(n.scrollTop>0||n.scrollLeft>0)){var o=null!=e.offsetParent?this.getStyle(e.offsetParent,"position"):"static",s=this.getStyle(e,"position");"absolute"!==s&&"fixed"!==s&&"absolute"!==o&&"fixed"!=o&&(i.left-=n.scrollLeft,i.top-=n.scrollTop)}return i},getPositionOnElement:function(e,t,n){var i="undefined"!=typeof t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0,width:0,height:0},r=document.body,a=document.documentElement,o=window.pageYOffset||a.scrollTop||r.scrollTop,s=window.pageXOffset||a.scrollLeft||r.scrollLeft,l=a.clientTop||r.clientTop||0,c=a.clientLeft||r.clientLeft||0,u=0,d=0,p=i.top+o-l+u*n,h=i.left+s-c+d*n,f=jsPlumb.pageLocation(e),g=i.width||t.offsetWidth*n,m=i.height||t.offsetHeight*n,v=(f[0]-h)/g,y=(f[1]-p)/m;return[v,y]},getAbsolutePosition:function(e){var t=function(t){var n=e.style[t];return n?parseFloat(n.substring(0,n.length-2)):void 0};return[t("left"),t("top")]},setAbsolutePosition:function(e,t,n,i){n?this.animate(e,{left:"+="+(t[0]-n[0]),top:"+="+(t[1]-n[1])},i):(e.style.left=t[0]+"px",e.style.top=t[1]+"px")},getSize:function(e){return[e.offsetWidth,e.offsetHeight]},getWidth:function(e){return e.offsetWidth},getHeight:function(e){return e.offsetHeight}})}.call(this),function(){"use strict";var e=this,t=e.jsPlumb,n=e.jsPlumbUtil,i="__label",r=function(e,n){var r={cssClass:n.cssClass,labelStyle:e.labelStyle,id:i,component:e,_jsPlumb:e._jsPlumb.instance},a=jsPlumb.extend(r,n);return new(t.Overlays[e._jsPlumb.instance.getRenderMode()].Label)(a)},a=function(e,i){var r=null;if(n.isArray(i)){var a=i[0],o=t.extend({component:e,_jsPlumb:e._jsPlumb.instance},i[1]);3==i.length&&t.extend(o,i[2]),r=new(t.Overlays[e._jsPlumb.instance.getRenderMode()][a])(o)}else r=i.constructor==String?new(t.Overlays[e._jsPlumb.instance.getRenderMode()][i])({component:e,_jsPlumb:e._jsPlumb.instance}):i;return r.id=r.id||n.uuid(),e.cacheTypeItem("overlay",r,r.id),e._jsPlumb.overlays[r.id]=r,r};t.OverlayCapableJsPlumbUIComponent=function(e){jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},e.label&&(this.getDefaultType().overlays[i]=["Label",{label:e.label,location:e.labelLocation||this.defaultLabelLocation||.5,labelStyle:e.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:i}]),this.setListenerComponent=function(e){if(this._jsPlumb)for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].setListenerComponent(e)}},t.OverlayCapableJsPlumbUIComponent.applyType=function(e,t){if(t.overlays){var n,i={};for(n in t.overlays){var r=e._jsPlumb.overlays[t.overlays[n][1].id];if(r)r.updateFrom(t.overlays[n][1]),i[t.overlays[n][1].id]=!0;else{var a=e.getCachedTypeItem("overlay",t.overlays[n][1].id);null!=a?(a.reattach(e._jsPlumb.instance),a.updateFrom(t.overlays[n][1]),e._jsPlumb.overlays[a.id]=a):a=e.addOverlay(t.overlays[n],!0),i[a.id]=!0}}for(n in e._jsPlumb.overlays)null==i[e._jsPlumb.overlays[n].id]&&e.removeOverlay(e._jsPlumb.overlays[n].id)}},n.extend(t.OverlayCapableJsPlumbUIComponent,jsPlumbUIComponent,{setHover:function(e,t){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var n in this._jsPlumb.overlays)this._jsPlumb.overlays[n][e?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(e,t){var n=a(this,e);return t||this.repaint(),n},getOverlay:function(e){return this._jsPlumb.overlays[e]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(e){var t=this.getOverlay(e);t&&t.hide()},hideOverlays:function(){for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].hide()},showOverlay:function(e){var t=this.getOverlay(e);t&&t.show()},showOverlays:function(){for(var e in this._jsPlumb.overlays.length)this._jsPlumb.overlays[e].show()},removeAllOverlays:function(e){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].cleanup&&this._jsPlumb.overlays[t].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,e||this.repaint()},removeOverlay:function(e){var t=this._jsPlumb.overlays[e];t&&(t.cleanup&&t.cleanup(),delete this._jsPlumb.overlays[e],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[e])},removeOverlays:function(){for(var e=0,t=arguments.length;t>e;e++)this.removeOverlay(arguments[e])},moveParent:function(e){this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),e.appendChild(this.bgCanvas)),this.canvas.parentNode.removeChild(this.canvas),e.appendChild(this.canvas);for(var t in this._jsPlumb.overlays)if(this._jsPlumb.overlays[t].isAppendedAtTopLevel){var n=this._jsPlumb.overlays[t].getElement();n.parentNode.removeChild(n),e.appendChild(n)}},getLabel:function(){var e=this.getOverlay(i);return null!=e?e.getLabel():null},getLabelOverlay:function(){return this.getOverlay(i)},setLabel:function(e){var t=this.getOverlay(i);if(t)e.constructor==String||e.constructor==Function?t.setLabel(e):(e.label&&t.setLabel(e.label),e.location&&t.setLocation(e.location));else{var n=e.constructor==String||e.constructor==Function?{label:e}:e;t=r(this,n),this._jsPlumb.overlays[i]=t}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(e){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].cleanup(e),this._jsPlumb.overlays[t].destroy(e);e&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(e){this[e?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(e,t){this._jsPlumb.overlayPositions[e.id]=t},getAbsoluteOverlayPosition:function(e){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[e.id]:null}})}.call(this),function(){"use strict";var e=this,t=e.jsPlumb,n=e.jsPlumbUtil,i=function(e,n){var i=!1;return{drag:function(){if(i)return i=!1,!0;var r=t.getUIPosition(arguments,n.getZoom());e.element&&(jsPlumb.setPosition(e.element,r),n.repaint(e.element,r))},stopDrag:function(){i=!0}}},r=function(e,t){var n=jsPlumb.createElement("div",{position:"absolute"});t.appendElement(n);var i=t.getId(n);t.manage(i,n),e.id=i,e.element=n},a=function(e,n,i,r,a,o,s,l){var c=new t.FloatingAnchor({reference:n,referenceCanvas:r,jsPlumbInstance:o});return s({paintStyle:e,endpoint:i,anchor:c,source:a,scope:l})},o=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],s=function(e,t){var n=0;if(null!=t)for(var i=0;i<e.connections.length;i++)if(e.connections[i].sourceId==t||e.connections[i].targetId==t){n=i;break}return e.connections[n]},l=function(e,t){return n.findWithFunction(t.connections,function(t){return t.id==e.id})};t.Endpoint=function(e){var c=e._jsPlumb,u=e.newConnection,d=e.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],t.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:e.connectionType,maxConnections:null==e.maxConnections?this._jsPlumb.instance.Defaults.MaxConnections:e.maxConnections,paintStyle:e.endpointStyle||e.paintStyle||e.style||this._jsPlumb.instance.Defaults.EndpointStyle||t.Defaults.EndpointStyle,hoverPaintStyle:e.endpointHoverStyle||e.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||t.Defaults.EndpointHoverStyle,connectorStyle:e.connectorStyle,connectorHoverStyle:e.connectorHoverStyle,connectorClass:e.connectorClass,connectorHoverClass:e.connectorHoverClass,connectorOverlays:e.connectorOverlays,connector:e.connector,connectorTooltip:e.connectorTooltip}),this._jsPlumb.enabled=!(e.enabled===!1),this._jsPlumb.visible=!0,this.element=t.getDOMElement(e.source),this._jsPlumb.uuid=e.uuid,this._jsPlumb.floatingEndpoint=null;var p=null;this._jsPlumb.uuid&&(e.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=e.elementId,this._jsPlumb.connectionCost=e.connectionCost,this._jsPlumb.connectionsDirected=e.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var h=function(){var e=c.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var t=c.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"_"+this._jsPlumb.currentAnchorClass:"");this.removeClass(e),this.addClass(t),jsPlumb.updateClasses(this.element,t,e)}.bind(this);this.prepareAnchor=function(e){var t=this._jsPlumb.instance.makeAnchor(e,this.elementId,c);return t.bind("anchorChanged",function(e){this.fire("anchorChanged",{endpoint:this,anchor:e}),h()}.bind(this)),t},this.setPreparedAnchor=function(e,t){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=e,h(),t||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(e,t){var n=this.prepareAnchor(e);return this.setPreparedAnchor(n,t),this};var f=function(e){if(this.connections.length>0)for(var t=0;t<this.connections.length;t++)this.connections[t].setHover(e,!1);else this.setHover(e)}.bind(this);this.bind("mouseover",function(){f(!0)}),this.bind("mouseout",function(){f(!1)}),e._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.prepareEndpoint=function(i,r){var a,o=function(e,n){var i=c.getRenderMode();if(t.Endpoints[i][e])return new t.Endpoints[i][e](n);if(!c.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+e+"'"}},s={_jsPlumb:this._jsPlumb.instance,cssClass:e.cssClass,container:e.container,tooltip:e.tooltip,connectorTooltip:e.connectorTooltip,endpoint:this};return n.isString(i)?a=o(i,s):n.isArray(i)?(s=n.merge(i[1],s),a=o(i[0],s)):a=i.clone(),a.clone=function(){return n.isString(i)?o(i,s):n.isArray(i)?(s=n.merge(i[1],s),o(i[0],s)):void 0}.bind(this),a.typeId=r,a},this.setEndpoint=function(e,t){var n=this.prepareEndpoint(e);this.setPreparedEndpoint(n,!0)},this.setPreparedEndpoint=function(e,t){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=e,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},t.extend(this,e,o),this.isSource=e.isSource||!1,this.isTemporarySource=e.isTemporarySource||!1,this.isTarget=e.isTarget||!1,this.connections=e.connections||[],this.connectorPointerEvents=e["connector-pointer-events"],this.scope=e.scope||c.getDefaultScope(),this.timestamp=null,this.reattachConnections=e.reattach||c.Defaults.ReattachConnections,this.connectionsDetachable=c.Defaults.ConnectionsDetachable,(e.connectionsDetachable===!1||e.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=e.dragAllowedWhenFull!==!1,e.onMaxConnections&&this.bind("maxConnections",e.onMaxConnections),this.addConnection=function(e){this.connections.push(e),this[(this.connections.length>0?"add":"remove")+"Class"](c.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](c.endpointFullClass)},this.detachFromConnection=function(e,t,n){t=null==t?l(e,this):t,t>=0&&(this.connections.splice(t,1),this[(this.connections.length>0?"add":"remove")+"Class"](c.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](c.endpointFullClass)),!n&&this._deleteOnDetach&&0===this.connections.length&&c.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!1})},this.detach=function(e,t,n,i,r,a,o){var s=null==o?l(e,this):o,u=!1;return i=i!==!1,s>=0&&(n||e._forceDetach||e.isDetachable()&&e.isDetachAllowed(e)&&this.isDetachAllowed(e)&&c.checkCondition("beforeDetach",e))&&(c.deleteObject({connection:e,fireEvent:!t&&i,originalEvent:r,deleteAttachedObjects:!1}),u=!0),u},this.detachAll=function(e,t){for(var n=[];this.connections.length>0;){var i=this.detach(this.connections[0],!1,t===!0,e!==!1,null,this,0);i||(n.push(this.connections[0]),this.connections.splice(0,1))}return this.connections=n,this},this.detachFrom=function(e,t,n){for(var i=[],r=0;r<this.connections.length;r++)(this.connections[r].endpoints[1]==e||this.connections[r].endpoints[0]==e)&&i.push(this.connections[r]);for(var a=0;a<i.length;a++)this.detach(i[a],!1,!0,t,n);return this},this.getElement=function(){return this.element},this.setElement=function(t){var i=this._jsPlumb.instance.getId(t),r=this.elementId;return n.removeWithFunction(e.endpointsByElement[this.elementId],function(e){return e.id==this.id}.bind(this)),this.element=jsPlumb.getDOMElement(t),this.elementId=c.getId(this.element),c.anchorManager.rehomeEndpoint(this,r,this.element),c.dragManager.endpointAdded(this.element),n.addToList(e.endpointsByElement,i,this),this},this.makeInPlaceCopy=function(){var t=this.anchor.getCurrentLocation({element:this}),n=this.anchor.getOrientation(this),i=this.anchor.getCssClass(),r={bind:function(){},compute:function(){return[t[0],t[1]]},getCurrentLocation:function(){return[t[0],t[1]]},getOrientation:function(){return n},getCssClass:function(){return i}};return d({dropOptions:e.dropOptions,anchor:r,source:this.element,paintStyle:this.getPaintStyle(),endpoint:e.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){var e=this.connections[0];return e?e:this.connections.length<this._jsPlumb.maxConnections||-1==this._jsPlumb.maxConnections?null:e},this.setStyle=this.setPaintStyle,this.paint=function(e){e=e||{};var t=e.timestamp,n=!(e.recalc===!1);if(!t||this.timestamp!==t){var i=c.updateOffset({elId:this.elementId,timestamp:t}),r=e.offset?e.offset.o:i.o;if(null!=r){var a=e.anchorPoint,o=e.connectorPaintStyle;if(null==a){var l=e.dimensions||i.s,u={xy:[r.left,r.top],wh:l,element:this,timestamp:t};if(n&&this.anchor.isDynamic&&this.connections.length>0){var d=s(this,e.elementWithPrecedence),p=d.endpoints[0]==this?1:0,h=0===p?d.sourceId:d.targetId,f=c.getCachedData(h),g=f.o,m=f.s;u.txy=[g.left,g.top],u.twh=m,u.tElement=d.endpoints[p]}a=this.anchor.compute(u)}this.endpoint.compute(a,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,o||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=t;for(var v in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(v)){var y=this._jsPlumb.overlays[v];y.isVisible()&&(this._jsPlumb.overlayPlacements[v]=y.draw(this.endpoint,this._jsPlumb.paintStyleInUse),y.paint(this._jsPlumb.overlayPlacements[v]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var g=!1;this.initDraggable=function(){if(!g&&t.isDragSupported(this.element)){var o={id:null,element:null},s=null,l=!1,h=null,f=i(o,c),m=e.dragOptions||{},v={},y=t.dragEvents.start,b=t.dragEvents.stop,w=t.dragEvents.drag,x=function(){s=this.connectorSelector();var t=!0;this.isEnabled()||(t=!1),null!=s||this.isSource||this.isTemporarySource||(t=!1),!this.isSource||!this.isFull()||null!=s&&this.dragAllowedWhenFull||(t=!1),null==s||s.isDetachable()||(t=!1);var i=c.checkCondition("beforeDrag",{endpoint:this,source:this.element,sourceId:this.elementId});if(i===!1&&(t=!1),t===!1)return c.stopDrag&&c.stopDrag(this.canvas),f.stopDrag(),!1;for(var g=0;g<this.connections.length;g++)this.connections[g].setHover(!1);this.addClass("endpointDrag"),c.setConnectionBeingDragged(!0),s&&!this.isFull()&&this.isSource&&(s=null),c.updateOffset({elId:this.elementId}),p=this.makeInPlaceCopy(),p.addClass(c.draggingClass),p.referenceEndpoint=this,p.paint(),r(o,c);var m=this._jsPlumb.instance.getOffset(p.canvas),v=this.canvas;if(jsPlumb.setPosition(o.element,m),this.parentAnchor&&(this.anchor=c.makeAnchor(this.parentAnchor,this.elementId,c)),c.setAttributes(this.canvas,{dragId:o.id,elId:this.elementId}),this._jsPlumb.floatingEndpoint=a(this.getPaintStyle(),this.anchor,this.endpoint,this.canvas,o.element,c,d,this.scope),this.canvas.style.visibility="hidden",null==s)this.anchor.locked=!0,this.setHover(!1,!1),s=u({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.endpointWillMoveTo||this.element,target:o.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:e.connectorStyle,hoverPaintStyle:e.connectorHoverStyle,connector:e.connector,overlays:e.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,data:i}),s.addClass(c.draggingClass),this._jsPlumb.floatingEndpoint.addClass(c.draggingClass),c.fire("connectionDrag",s);else{l=!0,s.setHover(!1);var y=s.endpoints[0].id==this.id?0:1;this.detachFromConnection(s,null,!0);var b=c.getDragScope(v);c.setAttribute(this.canvas,"originalScope",b);var w=c.getDropScope(v);c.setDragScope(v,w),c.fire("connectionDrag",s),0===y?(h=[s.source,s.sourceId,v,b],s.source=o.element,s.sourceId=o.id):(h=[s.target,s.targetId,v,b],s.target=o.element,s.targetId=o.id),s.endpoints[0===y?1:0].anchor.locked=!0,s.suspendedEndpoint=s.endpoints[y],s.suspendedElement=s.endpoints[y].getElement(),s.suspendedElementId=s.endpoints[y].elementId,s.suspendedElementType=0===y?"source":"target",s.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=s.suspendedEndpoint,s.endpoints[y]=this._jsPlumb.floatingEndpoint,s.addClass(c.draggingClass),this._jsPlumb.floatingEndpoint.addClass(c.draggingClass)}c.floatingConnections[o.id]=s,c.anchorManager.addFloatingConnection(o.id,s),n.addToList(e.endpointsByElement,o.id,this._jsPlumb.floatingEndpoint),c.currentlyDragging=!0}.bind(this),k=function(){if(c.setConnectionBeingDragged(!1),s&&null!=s.endpoints){var e=c.getDropEvent(arguments),t=c.getFloatingAnchorIndex(s);if(s.endpoints[0===t?1:0].anchor.locked=!1,s.removeClass(c.draggingClass),this._jsPlumb&&(s.deleteConnectionNow||s.endpoints[t]==this._jsPlumb.floatingEndpoint)&&l&&s.suspendedEndpoint){0===t?(s.source=h[0],s.sourceId=h[1]):(s.target=h[0],s.targetId=h[1]);var n=this._jsPlumb.floatingEndpoint;c.setDragScope(h[2],h[3]),s.endpoints[t]=s.suspendedEndpoint,s.isReattach()||s._forceReattach||s._forceDetach||!s.endpoints[0===t?1:0].detach(s,!1,!1,!0,e)?(s.setHover(!1),s._forceDetach=null,s._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(s),s.suspendedEndpoint.addConnection(s),c.repaint(h[1])):c.deleteObject({endpoint:n})}c.remove(o.element,!1),c.deleteObject({endpoint:p}),this.deleteAfterDragStop?c.deleteObject({endpoint:this}):this._jsPlumb&&(this._jsPlumb.floatingEndpoint=null,this.canvas.style.visibility="visible",this.anchor.locked=!1,this.paint({recalc:!1})),c.fire("connectionDragStop",s,e),c.currentlyDragging=!1,s=null}}.bind(this);m=t.extend(v,m),m.scope=this.scope||m.scope,m[y]=n.wrap(m[y],x,!1),m[w]=n.wrap(m[w],f.drag),m[b]=n.wrap(m[b],k),m.multipleDrop=!1,m.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0}.bind(this),c.initDraggable(this.canvas,m,"internal"),this.canvas._jsPlumbRelatedElement=this.element,g=!0}};var m=e.endpoint||this._jsPlumb.instance.Defaults.Endpoint||t.Defaults.Endpoint;this.setEndpoint(m,!0);var v=e.anchor?e.anchor:e.anchors?e.anchors:c.Defaults.Anchor||"Top";this.setAnchor(v,!0);var y=["default",e.type||""].join(" ");this.addType(y,e.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,(this.isSource||this.isTarget||this.isTemporarySource)&&this.initDraggable();var b=function(i,r,a,o,s){if((this.isTarget||r)&&t.isDropSupported(this.element)){var l=e.dropOptions||c.Defaults.DropOptions||t.Defaults.DropOptions;l=t.extend({},l),l.scope=l.scope||this.scope;var u=t.dragEvents.drop,d=t.dragEvents.over,p=t.dragEvents.out,h=this,f=c.EndpointDropHandler({getEndpoint:function(){return h},jsPlumb:c,enabled:function(){return null!=o?o.isEnabled():!0},isFull:function(){return o.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(e){h.addClass(e)},removeClass:function(e){h.removeClass(e)},isDropAllowed:function(){return h.isDropAllowed.apply(h,arguments);

},reference:s});l[u]=n.wrap(l[u],f,!0),l[d]=n.wrap(l[d],function(){var e=t.getDragObject(arguments),n=c.getAttribute(t.getDOMElement(e),"dragId"),i=c.floatingConnections[n];if(null!=i){var r=c.getFloatingAnchorIndex(i),a=this.isTarget&&0!==r||i.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==i.suspendedEndpoint.id;if(a){var o=c.checkCondition("checkDropAllowed",{sourceEndpoint:i.endpoints[r],targetEndpoint:this,connection:i});this[(o?"add":"remove")+"Class"](c.endpointDropAllowedClass),this[(o?"remove":"add")+"Class"](c.endpointDropForbiddenClass),i.endpoints[r].anchor.over(this.anchor,this)}}}.bind(this)),l[p]=n.wrap(l[p],function(){var e=t.getDragObject(arguments),n=null==e?null:c.getAttribute(t.getDOMElement(e),"dragId"),i=n?c.floatingConnections[n]:null;if(null!=i){var r=c.getFloatingAnchorIndex(i),a=this.isTarget&&0!==r||i.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==i.suspendedEndpoint.id;a&&(this.removeClass(c.endpointDropAllowedClass),this.removeClass(c.endpointDropForbiddenClass),i.endpoints[r].anchor.out())}}.bind(this)),c.initDroppable(i,l,"internal",a)}}.bind(this);return this.anchor.isFloating||b(this.canvas,!0,!(e._transient||this.anchor.isFloating),this,e.reference),this},n.extend(t.Endpoint,t.OverlayCapableJsPlumbUIComponent,{setVisible:function(e,t,n){if(this._jsPlumb.visible=e,this.canvas&&(this.canvas.style.display=e?"block":"none"),this[e?"showOverlays":"hideOverlays"](),!t)for(var i=0;i<this.connections.length;i++)if(this.connections[i].setVisible(e),!n){var r=this===this.connections[i].endpoints[0]?1:0;1==this.connections[i].endpoints[r].connections.length&&this.connections[i].endpoints[r].setVisible(e,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(e,n){this.setPaintStyle(e.endpointStyle||e.paintStyle,n),this.setHoverPaintStyle(e.endpointHoverStyle||e.hoverPaintStyle,n),null!=e.maxConnections&&(this._jsPlumb.maxConnections=e.maxConnections),e.scope&&(this.scope=e.scope),t.extend(this,e,o),null!=e.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,e.cssClass),t.OverlayCapableJsPlumbUIComponent.applyType(this,e)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(e){this._jsPlumb.enabled=e},cleanup:function(){var e=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"_"+this._jsPlumb.currentAnchorClass:"");jsPlumb.removeClass(this.element,e),this.anchor=null,this.endpoint.cleanup(),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(e){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(e)},isFull:function(){return 0===this._jsPlumb.maxConnections?!0:!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(e){var t=!1;if(e)for(var n=0;n<this.connections.length;n++)if(this.connections[n].endpoints[1]==e||this.connections[n].endpoints[0]==e){t=!0;break}return t},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(e){this._jsPlumb.connectionCost=e},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(e){this._jsPlumb.connectionsDirected=e},setElementId:function(e){this.elementId=e,this.anchor.elementId=e},setReferenceElement:function(e){this.element=t.getDOMElement(e)},setDragAllowedWhenFull:function(e){this.dragAllowedWhenFull=e},equals:function(e){return this.anchor.equals(e.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(e){return this.anchor.compute(e)}}),e.jsPlumbInstance.prototype.EndpointDropHandler=function(e){return function(t){var n=e.jsPlumb;e.removeClass(n.endpointDropAllowedClass),e.removeClass(n.endpointDropForbiddenClass);var i=n.getDropEvent(arguments),r=n.getDOMElement(n.getDragObject(arguments)),a=n.getAttribute(r,"dragId"),o=(n.getAttribute(r,"elId"),n.getAttribute(r,"originalScope")),s=n.floatingConnections[a];if(null!=s&&(!s.suspendedEndpoint||null!=s.suspendedEndpoint._jsPlumb)){var l=s.suspendedEndpoint&&e.reference&&s.suspendedEndpoint.id===e.reference.id;if(l)return s._forceReattach=!0,s.setHover(!1),void(e.maybeCleanup&&e.maybeCleanup(u));var c=n.getFloatingAnchorIndex(s);if((0!==c||e.isSource)&&(1!==c||e.isTarget)){var u=e.getEndpoint(s);if(e.onDrop&&e.onDrop(s),o&&n.setDragScope(r,o),e.isFull(t)&&u.fire("maxConnections",{endpoint:this,connection:s,maxConnections:u._jsPlumb.maxConnections},i),!e.isFull()&&(0!==c||e.isSource)&&(1!=c||e.isTarget)&&e.enabled()){var d=!0;s.suspendedEndpoint&&s.suspendedEndpoint._jsPlumb&&s.suspendedEndpoint.id!=u.id&&(s.isDetachAllowed(s)&&s.endpoints[c].isDetachAllowed(s)&&s.suspendedEndpoint.isDetachAllowed(s)&&n.checkCondition("beforeDetach",s)||(d=!1)),0===c?(s.source=e.element,s.sourceId=e.elementId):(s.target=e.element,s.targetId=e.elementId);var p=function(){s.endpoints[c].detachFromConnection(s),s.suspendedEndpoint&&s.suspendedEndpoint.detachFromConnection(s),s.endpoints[c]=u,u.addConnection(s);var e=u.getParameters();for(var t in e)s.setParameter(t,e[t]);if(s.suspendedEndpoint){var r=s.suspendedEndpoint.elementId;n.fireMoveEvent({index:c,originalSourceId:0===c?r:s.sourceId,newSourceId:0===c?u.elementId:s.sourceId,originalTargetId:1==c?r:s.targetId,newTargetId:1==c?u.elementId:s.targetId,originalSourceEndpoint:0===c?s.suspendedEndpoint:s.endpoints[0],newSourceEndpoint:0===c?u:s.endpoints[0],originalTargetEndpoint:1==c?s.suspendedEndpoint:s.endpoints[1],newTargetEndpoint:1==c?u:s.endpoints[1],connection:s},i)}else e.draggable&&n.initDraggable(this.element,dragOptions,"internal",n);if(1==c?n.anchorManager.updateOtherEndpoint(s.sourceId,s.suspendedElementId,s.targetId,s):n.anchorManager.sourceChanged(s.suspendedEndpoint.elementId,s.sourceId,s),s.endpoints[0].finalEndpoint){var a=s.endpoints[0];a.detachFromConnection(s),s.endpoints[0]=s.endpoints[0].finalEndpoint,s.endpoints[0].addConnection(s)}n.finaliseConnection(s,null,i),s.setHover(!1)}.bind(this),h=function(){s.suspendedEndpoint&&(s.endpoints[c]=s.suspendedEndpoint,s.setHover(!1),s._forceDetach=!0,0===c?(s.source=s.suspendedEndpoint.element,s.sourceId=s.suspendedEndpoint.elementId):(s.target=s.suspendedEndpoint.element,s.targetId=s.suspendedEndpoint.elementId),s.suspendedEndpoint.addConnection(s),n.repaint(s.sourceId),s._forceDetach=!1)};if(d=d&&e.isDropAllowed(s.sourceId,s.targetId,s.scope,s,u))return p(),!0;h()}e.maybeCleanup&&e.maybeCleanup(u),n.currentlyDragging=!1}}}}}.call(this),function(){"use strict";var e=this,t=e.jsPlumb,n=e.jsPlumbUtil,i=function(e,n,i,r,a){if(!e.Defaults.DoNotThrowErrors&&null==jsPlumb.Connectors[n][i])throw{msg:"jsPlumb: unknown connector type '"+i+"'"};return new t.Connectors[n][i](r,a)},r=function(e,t,n){return e?n.makeAnchor(e,t,n):null},a=function(e,t,i,r){null!=t&&(t._jsPlumbConnections=t._jsPlumbConnections||{},r?delete t._jsPlumbConnections[e.id]:t._jsPlumbConnections[e.id]=!0,n.isEmpty(t._jsPlumbConnections)?i.removeClass(t,i.connectedClass):i.addClass(t,i.connectedClass))};t.Connection=function(e){var i=e.newEndpoint;this.id=e.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=e.previousConnection,this.source=t.getDOMElement(e.source),this.target=t.getDOMElement(e.target),e.sourceEndpoint&&(this.source=e.sourceEndpoint.getElement()),e.targetEndpoint&&(this.target=e.targetEndpoint.getElement()),t.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.sourceId=this._jsPlumb.instance.getId(this.source),this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=e.scope,this.endpoints=[],this.endpointStyles=[];var r=this._jsPlumb.instance;r.manage(this.sourceId,this.source),r.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.editable=e.editable===!0,this._jsPlumb.params={cssClass:e.cssClass,container:e.container,"pointer-events":e["pointer-events"],editorParams:e.editorParams,overlays:e.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(t,n,a,o){return a=a||this._jsPlumb.instance.getId(n),this.prepareEndpoint(r,i,this,o,t?0:1,e,n,a)};var a=this.makeEndpoint(!0,this.source,this.sourceId,e.sourceEndpoint),o=this.makeEndpoint(!1,this.target,this.targetId,e.targetEndpoint);a&&n.addToList(e.endpointsByElement,this.sourceId,a),o&&n.addToList(e.endpointsByElement,this.targetId,o),this.scope||(this.scope=this.endpoints[0].scope),null!=e.deleteEndpointsOnDetach?(this.endpoints[0]._deleteOnDetach=e.deleteEndpointsOnDetach,this.endpoints[1]._deleteOnDetach=e.deleteEndpointsOnDetach):(this.endpoints[0]._doNotDeleteOnDetach||(this.endpoints[0]._deleteOnDetach=!0),this.endpoints[1]._doNotDeleteOnDetach||(this.endpoints[1]._deleteOnDetach=!0));var s=r.Defaults.ConnectionsDetachable;e.detachable===!1&&(s=!1),this.endpoints[0].connectionsDetachable===!1&&(s=!1),this.endpoints[1].connectionsDetachable===!1&&(s=!1);var l=e.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||r.Defaults.ReattachConnections;this.appendToDefaultType({detachable:s,rettach:l,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||e.paintStyle||r.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||e.hoverPaintStyle||r.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle});var c=r.getSuspendedAt();if(!r.isSuspendDrawing()){var u=r.getCachedData(this.sourceId),d=u.o,p=u.s,h=r.getCachedData(this.targetId),f=h.o,g=h.s,m=c||r.timestamp(),v=this.endpoints[0].anchor.compute({xy:[d.left,d.top],wh:p,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[f.left,f.top],twh:g,tElement:this.endpoints[1],timestamp:m});this.endpoints[0].paint({anchorLoc:v,timestamp:m}),v=this.endpoints[1].anchor.compute({xy:[f.left,f.top],wh:g,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[d.left,d.top],twh:p,tElement:this.endpoints[0],timestamp:m}),this.endpoints[1].paint({anchorLoc:v,timestamp:m})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(){return this._jsPlumb.detachable===!0},this.setDetachable=function(e){this._jsPlumb.detachable=e===!0},this.isReattach=function(){return this._jsPlumb.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0},this.setReattach=function(e){this._jsPlumb.reattach=e===!0},this._jsPlumb.cost=e.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=e.directed,null==e.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var y=jsPlumb.extend({},this.endpoints[1].getParameters());t.extend(y,this.endpoints[0].getParameters()),t.extend(y,this.getParameters()),this.setParameters(y),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||e.connector||r.Defaults.Connector||t.Defaults.Connector,!0),this.getData=function(){return e.data};var b=["default",e.type,this.endpoints[0].connectionType,this.endpoints[1].connectionType].join(" ");/[^\s]/.test(b)&&this.addType(b,e.data,!0),this.updateConnectedClass()},n.extend(t.Connection,t.OverlayCapableJsPlumbUIComponent,{applyType:function(e,n,i){null!=e.detachable&&this.setDetachable(e.detachable),null!=e.reattach&&this.setReattach(e.reattach),e.scope&&(this.scope=e.scope),null!=e.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,e.cssClass);var r=null;e.anchor?(r=this.getCachedTypeItem("anchors",i.anchor),null==r&&(r=[this._jsPlumb.instance.makeAnchor(e.anchor),this._jsPlumb.instance.makeAnchor(e.anchor)],this.cacheTypeItem("anchors",r,i.anchor))):e.anchors&&(r=this.getCachedTypeItem("anchors",i.anchors),null==r&&(r=[this._jsPlumb.instance.makeAnchor(e.anchors[0]),this._jsPlumb.instance.makeAnchor(e.anchors[1])],this.cacheTypeItem("anchors",r,i.anchors))),null!=r&&(this.endpoints[0].anchor=r[0],this.endpoints[1].anchor=r[1]),t.OverlayCapableJsPlumbUIComponent.applyType(this,e)},addClass:function(e,t){t&&(this.endpoints[0].addClass(e),this.endpoints[1].addClass(e),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(e)),this.connector&&this.connector.addClass(e)},removeClass:function(e,t){t&&(this.endpoints[0].removeClass(e),this.endpoints[1].removeClass(e),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(e)),this.connector&&this.connector.removeClass(e)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(e){this._jsPlumb.visible=e,this.connector&&this.connector.setVisible(e),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(e){a(this,this.source,this._jsPlumb.instance,e),a(this,this.target,this._jsPlumb.instance,e)},setHover:function(t){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(t),e.jsPlumb[t?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),e.jsPlumb[t?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb.cost},setCost:function(e){this._jsPlumb.cost=e},isDirected:function(){return this._jsPlumb.directed===!0},getConnector:function(){return this.connector},prepareConnector:function(e,t){var r,a={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},o=this._jsPlumb.instance.getRenderMode();return n.isString(e)?r=i(this._jsPlumb.instance,o,e,a,this):n.isArray(e)&&(r=1==e.length?i(this._jsPlumb.instance,o,e[0],a,this):i(this._jsPlumb.instance,o,e[0],n.merge(e[1],a),this)),null!=t&&(r.typeId=t),r},setPreparedConnector:function(e,t,n,i){var r;if(null!=this.connector&&(r=this.connector,this.connector.cleanup(),this.connector.destroy()),this.connector=e,i&&this.cacheTypeItem("connector",e,i),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),null!=r)for(var a=this.getOverlays(),o=0;o<a.length;o++)a[o].transfer&&a[o].transfer(this.connector);n||this.setListenerComponent(this.connector),t||this.repaint()},setConnector:function(e,t,n,i){var r=this.prepareConnector(e,i);this.setPreparedConnector(r,t,n,i)},paint:function(e){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){e=e||{};var t=e.timestamp,n=!1,i=n?this.sourceId:this.targetId,r=n?this.targetId:this.sourceId,a=n?0:1,o=n?1:0;if(null==t||t!=this._jsPlumb.lastPaintedAt){var s=this._jsPlumb.instance.updateOffset({elId:r}).o,l=this._jsPlumb.instance.updateOffset({elId:i}).o,c=this.endpoints[o],u=this.endpoints[a],d=c.anchor.getCurrentLocation({xy:[s.left,s.top],wh:[s.width,s.height],element:c,timestamp:t}),p=u.anchor.getCurrentLocation({xy:[l.left,l.top],wh:[l.width,l.height],element:u,timestamp:t});this.connector.resetBounds(),this.connector.compute({sourcePos:d,targetPos:p,sourceEndpoint:this.endpoints[o],targetEndpoint:this.endpoints[a],lineWidth:this._jsPlumb.paintStyleInUse.lineWidth,sourceInfo:s,targetInfo:l});var h={minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)};for(var f in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(f)){var g=this._jsPlumb.overlays[f];g.isVisible()&&(this._jsPlumb.overlayPlacements[f]=g.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(g)),h.minX=Math.min(h.minX,this._jsPlumb.overlayPlacements[f].minX),h.maxX=Math.max(h.maxX,this._jsPlumb.overlayPlacements[f].maxX),h.minY=Math.min(h.minY,this._jsPlumb.overlayPlacements[f].minY),h.maxY=Math.max(h.maxY,this._jsPlumb.overlayPlacements[f].maxY))}var m=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||1)/2,v=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||0),y={xmin:Math.min(this.connector.bounds.minX-(m+v),h.minX),ymin:Math.min(this.connector.bounds.minY-(m+v),h.minY),xmax:Math.max(this.connector.bounds.maxX+(m+v),h.maxX),ymax:Math.max(this.connector.bounds.maxY+(m+v),h.maxY)};this.connector.paint(this._jsPlumb.paintStyleInUse,null,y);for(var b in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(b)){var w=this._jsPlumb.overlays[b];w.isVisible()&&w.paint(this._jsPlumb.overlayPlacements[b],y)}}this._jsPlumb.lastPaintedAt=t}},repaint:function(e){e=e||{},this.paint({elId:this.sourceId,recalc:!(e.recalc===!1),timestamp:e.timestamp})},prepareEndpoint:function(e,n,i,a,o,s,l,c){var u;if(a)i.endpoints[o]=a,a.addConnection(i);else{s.endpoints||(s.endpoints=[null,null]);var d=s.endpoints[o]||s.endpoint||e.Defaults.Endpoints[o]||jsPlumb.Defaults.Endpoints[o]||e.Defaults.Endpoint||jsPlumb.Defaults.Endpoint;s.endpointStyles||(s.endpointStyles=[null,null]),s.endpointHoverStyles||(s.endpointHoverStyles=[null,null]);var p=s.endpointStyles[o]||s.endpointStyle||e.Defaults.EndpointStyles[o]||jsPlumb.Defaults.EndpointStyles[o]||e.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle;null==p.fillStyle&&null!=s.paintStyle&&(p.fillStyle=s.paintStyle.strokeStyle),null==p.outlineColor&&null!=s.paintStyle&&(p.outlineColor=s.paintStyle.outlineColor),null==p.outlineWidth&&null!=s.paintStyle&&(p.outlineWidth=s.paintStyle.outlineWidth);var h=s.endpointHoverStyles[o]||s.endpointHoverStyle||e.Defaults.EndpointHoverStyles[o]||jsPlumb.Defaults.EndpointHoverStyles[o]||e.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle;null!=s.hoverPaintStyle&&(null==h&&(h={}),null==h.fillStyle&&(h.fillStyle=s.hoverPaintStyle.strokeStyle));var f=s.anchors?s.anchors[o]:s.anchor?s.anchor:r(e.Defaults.Anchors[o],c,e)||r(t.Defaults.Anchors[o],c,e)||r(e.Defaults.Anchor,c,e)||r(t.Defaults.Anchor,c,e),g=s.uuids?s.uuids[o]:null;u=n({paintStyle:p,hoverPaintStyle:h,endpoint:d,connections:[i],uuid:g,anchor:f,source:l,scope:s.scope,reattach:s.reattach||e.Defaults.ReattachConnections,detachable:s.detachable||e.Defaults.ConnectionsDetachable}),i.endpoints[o]=u,s.drawEndpoints===!1&&u.setVisible(!1,!0,!0)}return u}})}.call(this),function(){"use strict";var e=this,t=e.jsPlumbUtil,n=e.jsPlumb;n.AnchorManager=function(e){var i={},r={},a={},o={},s={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},l=["left","top","right","bottom"],c={},u=this,d={},p=e.jsPlumbInstance,h={},f=function(e,t,n,i,r,a){if(e===t)return{orientation:s.IDENTITY,a:["top","top"]};var o=Math.atan2(i.centery-n.centery,i.centerx-n.centerx),c=Math.atan2(n.centery-i.centery,n.centerx-i.centerx),u=[],d={};!function(e,t){for(var n=0;n<e.length;n++)d[e[n]]={left:[t[n].left,t[n].centery],right:[t[n].right,t[n].centery],top:[t[n].centerx,t[n].top],bottom:[t[n].centerx,t[n].bottom]}}(["source","target"],[n,i]);for(var p=0;p<l.length;p++)for(var h=0;h<l.length;h++)p!=h&&u.push({source:l[p],target:l[h],dist:Biltong.lineLength(d.source[l[p]],d.target[l[h]])});u.sort(function(e,t){return e.dist<t.dist?-1:e.dist>t.dist?1:0});for(var f=u[0].source,g=u[0].target,m=0;m<u.length&&(f=!r.isContinuous||r.isEdgeSupported(u[m].source)?u[m].source:null,g=!a.isContinuous||a.isEdgeSupported(u[m].target)?u[m].target:null,null==f||null==g);m++);return{a:[f,g],theta:o,theta2:c}},g=function(e,t,n,i,r,a,o){for(var s=[],l=t[r?0:1]/(i.length+1),c=0;c<i.length;c++){var u=(c+1)*l,d=a*t[r?1:0];o&&(u=t[r?0:1]-u);var p=r?u:d,h=n[0]+p,f=p/t[0],g=r?d:u,m=n[1]+g,v=g/t[1];s.push([h,m,f,v,i[c][1],i[c][2]])}return s},m=function(e){return function(t,n){var i=!0;return i=e?t[0][0]<n[0][0]:t[0][0]>n[0][0],i===!1?-1:1}},v=function(e,t){var n=e[0][0]<0?-Math.PI-e[0][0]:Math.PI-e[0][0],i=t[0][0]<0?-Math.PI-t[0][0]:Math.PI-t[0][0];return n>i?1:e[0][1]>t[0][1]?1:-1},y={top:function(e,t){return e[0]>t[0]?1:-1},right:m(!0),bottom:m(!0),left:v},b=function(e,t){return e.sort(t)},w=function(e,t){var n=p.getCachedData(e),i=n.s,a=n.o,s=function(t,n,i,a,s,l,c){if(a.length>0)for(var u=b(a,y[t]),d="right"===t||"top"===t,p=g(t,n,i,u,s,l,d),h=function(e,t){r[e.id]=[t[0],t[1],t[2],t[3]],o[e.id]=c},f=0;f<p.length;f++){var m=p[f][4],v=m.endpoints[0].elementId===e,w=m.endpoints[1].elementId===e;v?h(m.endpoints[0],p[f]):w&&h(m.endpoints[1],p[f])}};s("bottom",i,[a.left,a.top],t.bottom,!0,1,[0,1]),s("top",i,[a.left,a.top],t.top,!0,0,[0,-1]),s("left",i,[a.left,a.top],t.left,!1,0,[-1,0]),s("right",i,[a.left,a.top],t.right,!1,1,[1,0])};this.reset=function(){i={},c={},d={}},this.addFloatingConnection=function(e,t){h[e]=t},this.removeFloatingConnection=function(e){delete h[e]},this.newConnection=function(e){var i=e.sourceId,r=e.targetId,a=e.endpoints,o=!0,s=function(s,l,u,d,p){i==r&&u.isContinuous&&(e._jsPlumb.instance.removeElement(a[1].canvas),o=!1),t.addToList(c,d,[p,l,u.constructor==n.DynamicAnchor])};s(0,a[0],a[0].anchor,r,e),o&&s(1,a[1],a[1].anchor,i,e)};var x=function(e){!function(e,n){if(e){var i=function(e){return e[4]==n};t.removeWithFunction(e.top,i),t.removeWithFunction(e.left,i),t.removeWithFunction(e.bottom,i),t.removeWithFunction(e.right,i)}}(d[e.elementId],e.id)};this.connectionDetached=function(e){var i=e.connection||e,r=e.sourceId,a=e.targetId,o=i.endpoints,s=function(e,i,r,a,o){null!=r&&r.constructor==n.FloatingAnchor||t.removeWithFunction(c[a],function(e){return e[0].id==o.id})};s(1,o[1],o[1].anchor,r,i),s(0,o[0],o[0].anchor,a,i),x(i.endpoints[0]),x(i.endpoints[1]),u.redraw(i.sourceId),u.redraw(i.targetId)},this.add=function(e,n){t.addToList(i,n,e)},this.changeId=function(e,t){c[t]=c[e],i[t]=i[e],delete c[e],delete i[e]},this.getConnectionsFor=function(e){return c[e]||[]},this.getEndpointsFor=function(e){return i[e]||[]},this.deleteEndpoint=function(e){t.removeWithFunction(i[e.elementId],function(t){return t.id==e.id}),x(e)},this.clearFor=function(e){delete i[e],i[e]=[]};var k=function(n,i,r,a,o,s,l,c,u,d,p,h){var f,g,m=-1,v=-1,y=a.endpoints[l],b=y.id,w=[1,0][l],x=[[i,r],a,o,s,b],k=n[u],C=y._continuousAnchorEdge?n[y._continuousAnchorEdge]:null;if(C){var S=t.findWithFunction(C,function(e){return e[4]==b});if(-1!=S)for(C.splice(S,1),f=0;f<C.length;f++)g=C[f][1],t.addWithFunction(p,g,function(e){return e.id==g.id}),t.addWithFunction(h,C[f][1].endpoints[l],function(e){return e.id==g.endpoints[l].id}),t.addWithFunction(h,C[f][1].endpoints[w],function(e){return e.id==g.endpoints[w].id})}for(f=0;f<k.length;f++)g=k[f][1],1==e.idx&&k[f][3]===s&&-1==v&&(v=f),t.addWithFunction(p,g,function(e){return e.id==g.id}),t.addWithFunction(h,k[f][1].endpoints[l],function(e){return e.id==g.endpoints[l].id}),t.addWithFunction(h,k[f][1].endpoints[w],function(e){return e.id==g.endpoints[w].id});if(-1!=m)k[m]=x;else{var _=c?-1!=v?v:0:k.length;k.splice(_,0,x)}y._continuousAnchorEdge=u};this.updateOtherEndpoint=function(e,i,r,a){var o=t.findWithFunction(c[e],function(e){return e[0].id===a.id}),s=t.findWithFunction(c[i],function(e){return e[0].id===a.id});-1!=o&&(c[e][o][0]=a,c[e][o][1]=a.endpoints[1],c[e][o][2]=a.endpoints[1].anchor.constructor==n.DynamicAnchor),s>-1&&(c[i].splice(s,1),t.addToList(c,r,[a,a.endpoints[0],a.endpoints[0].anchor.constructor==n.DynamicAnchor])),a.updateConnectedClass()},this.sourceChanged=function(e,i,r){if(e!==i){t.removeWithFunction(c[e],function(e){return e[0].id===r.id});var a=t.findWithFunction(c[r.targetId],function(e){return e[0].id===r.id});a>-1&&(c[r.targetId][a][0]=r,c[r.targetId][a][1]=r.endpoints[0],c[r.targetId][a][2]=r.endpoints[0].anchor.constructor==n.DynamicAnchor),t.addToList(c,i,[r,r.endpoints[1],r.endpoints[1].anchor.constructor==n.DynamicAnchor]),r.updateConnectedClass()}},this.rehomeEndpoint=function(e,n,r){var a=i[n]||[],o=p.getId(r);if(o!==n){var s=t.indexOf(a,e);if(s>-1){var l=a.splice(s,1)[0];u.add(l,o)}}for(var c=0;c<e.connections.length;c++)e.connections[c].sourceId==n?(e.connections[c].sourceId=e.elementId,e.connections[c].source=e.element,u.sourceChanged(n,e.elementId,e.connections[c])):e.connections[c].targetId==n&&(e.connections[c].targetId=e.elementId,e.connections[c].target=e.element,u.updateOtherEndpoint(e.connections[c].sourceId,n,e.elementId,e.connections[c]))},this.redraw=function(e,r,a,o,s,l){if(!p.isSuspendDrawing()){var u=i[e]||[],g=c[e]||[],m=[],v=[],y=[];a=a||p.timestamp(),o=o||{left:0,top:0},r&&(r={left:r.left+o.left,top:r.top+o.top});for(var b=p.updateOffset({elId:e,offset:r,recalc:!1,timestamp:a}),x={},C=0;C<g.length;C++){var S=g[C][0],_=S.sourceId,T=S.targetId,$=S.endpoints[0].anchor.isContinuous,A=S.endpoints[1].anchor.isContinuous;if($||A){var E=_+"_"+T,P=x[E],I=S.sourceId==e?1:0;$&&!d[_]&&(d[_]={top:[],right:[],bottom:[],left:[]}),A&&!d[T]&&(d[T]={top:[],right:[],bottom:[],left:[]}),e!=T&&p.updateOffset({elId:T,timestamp:a}),e!=_&&p.updateOffset({elId:_,timestamp:a});var D=p.getCachedData(T),M=p.getCachedData(_);T==_&&($||A)?k(d[_],-Math.PI/2,0,S,!1,T,0,!1,"top",_,m,v):(P||(P=f(_,T,M.o,D.o,S.endpoints[0].anchor,S.endpoints[1].anchor),x[E]=P),$&&k(d[_],P.theta,0,S,!1,T,0,!1,P.a[0],_,m,v),A&&k(d[T],P.theta2,-1,S,!0,_,1,!0,P.a[1],T,m,v)),$&&t.addWithFunction(y,_,function(e){return e===_}),A&&t.addWithFunction(y,T,function(e){return e===T}),t.addWithFunction(m,S,function(e){return e.id==S.id}),($&&0===I||A&&1===I)&&t.addWithFunction(v,S.endpoints[I],function(e){return e.id==S.endpoints[I].id})}}for(C=0;C<u.length;C++)0===u[C].connections.length&&u[C].anchor.isContinuous&&(d[e]||(d[e]={top:[],right:[],bottom:[],left:[]}),k(d[e],-Math.PI/2,0,{endpoints:[u[C],u[C]],paint:function(){}},!1,e,0,!1,u[C].anchor.getDefaultFace(),e,m,v),t.addWithFunction(y,e,function(t){return t===e}));for(C=0;C<y.length;C++)w(y[C],d[y[C]]);for(C=0;C<u.length;C++)u[C].paint({timestamp:a,offset:b,dimensions:b.s,recalc:l!==!0});for(C=0;C<v.length;C++){var N=p.getCachedData(v[C].elementId);v[C].paint({timestamp:a,offset:N,dimensions:N.s})}for(C=0;C<g.length;C++){var j=g[C][1];if(j.anchor.constructor==n.DynamicAnchor){j.paint({elementWithPrecedence:e,timestamp:a}),t.addWithFunction(m,g[C][0],function(e){return e.id==g[C][0].id});for(var O=0;O<j.connections.length;O++)j.connections[O]!==g[C][0]&&t.addWithFunction(m,j.connections[O],function(e){return e.id==j.connections[O].id})}else j.anchor.constructor==n.Anchor&&t.addWithFunction(m,g[C][0],function(e){return e.id==g[C][0].id})}var L=h[e];for(L&&L.paint({timestamp:a,recalc:!1,elId:e}),C=0;C<m.length;C++)m[C].paint({elId:e,timestamp:a,recalc:!1,clearEdits:s})}};var C=function(e){t.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var n=e.faces||["top","right","bottom","left"],i=!(e.clockwise===!1),s={},l={top:"bottom",right:"left",left:"right",bottom:"top"},c={top:"right",right:"bottom",left:"top",bottom:"left"},u={top:"left",right:"top",left:"bottom",bottom:"right"},d=i?c:u,p=i?u:c,h=e.cssClass||"",f=0;f<n.length;f++)s[n[f]]=!0;this.getDefaultFace=function(){return 0===n.length?"top":n[0]},this.verifyEdge=function(e){return s[e]?e:s[l[e]]?l[e]:s[d[e]]?d[e]:s[p[e]]?p[e]:e},this.isEdgeSupported=function(e){return s[e]===!0},this.compute=function(e){return a[e.element.id]||r[e.element.id]||[0,0]},this.getCurrentLocation=function(e){return a[e.element.id]||r[e.element.id]||[0,0]},this.getOrientation=function(e){return o[e.id]||[0,0]},this.clearUserDefinedLocation=function(){delete a[e.elementId]},this.setUserDefinedLocation=function(t){a[e.elementId]=t},this.getCssClass=function(){return h}};p.continuousAnchorFactory={get:function(e){return new C(e)},clear:function(e){delete a[e],delete r[e]}}},n.Anchor=function(e){this.x=e.x||0,this.y=e.y||0,this.elementId=e.elementId,this.cssClass=e.cssClass||"",this.userDefinedLocation=null,this.orientation=e.orientation||[0,0],this.lastReturnValue=null,this.offsets=e.offsets||[0,0],this.timestamp=null,t.EventGenerator.apply(this),this.compute=function(e){var t=e.xy,n=e.wh,i=e.timestamp;return e.clearUserDefinedLocation&&(this.userDefinedLocation=null),i&&i===self.timestamp?this.lastReturnValue:(this.lastReturnValue=null!=this.userDefinedLocation?this.userDefinedLocation:[t[0]+this.x*n[0]+this.offsets[0],t[1]+this.y*n[1]+this.offsets[1]],this.timestamp=i,this.lastReturnValue)},this.getCurrentLocation=function(e){return null==this.lastReturnValue||null!=e.timestamp&&this.timestamp!=e.timestamp?this.compute(e):this.lastReturnValue}},t.extend(n.Anchor,t.EventGenerator,{equals:function(e){if(!e)return!1;var t=e.getOrientation(),n=this.getOrientation();return this.x==e.x&&this.y==e.y&&this.offsets[0]==e.offsets[0]&&this.offsets[1]==e.offsets[1]&&n[0]==t[0]&&n[1]==t[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(e){this.userDefinedLocation=e},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),n.FloatingAnchor=function(e){n.Anchor.apply(this,arguments);var t=e.reference,i=e.referenceCanvas,r=n.getSize(i),a=0,o=0,s=null,l=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(e){var t=e.xy,n=[t[0]+r[0]/2,t[1]+r[1]/2];return l=n,n},this.getOrientation=function(e){if(s)return s;var n=t.getOrientation(e);return[Math.abs(n[0])*a*-1,Math.abs(n[1])*o*-1]},this.over=function(e,t){s=e.getOrientation(t)},this.out=function(){s=null},this.getCurrentLocation=function(e){return null==l?this.compute(e):l}},t.extend(n.FloatingAnchor,n.Anchor);var i=function(e,t,i){return e.constructor==n.Anchor?e:t.makeAnchor(e,i,t)};n.DynamicAnchor=function(e){n.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=e.elementId,this.jsPlumbInstance=e.jsPlumbInstance;for(var t=0;t<e.anchors.length;t++)this.anchors[t]=i(e.anchors[t],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors},this.locked=!1;var r=this.anchors.length>0?this.anchors[0]:null,a=r,o=this,s=function(e,t,n,i,r){var a=i[0]+e.x*r[0],o=i[1]+e.y*r[1],s=i[0]+r[0]/2,l=i[1]+r[1]/2;return Math.sqrt(Math.pow(t-a,2)+Math.pow(n-o,2))+Math.sqrt(Math.pow(s-a,2)+Math.pow(l-o,2))},l=e.selector||function(e,t,n,i,r){for(var a=n[0]+i[0]/2,o=n[1]+i[1]/2,l=-1,c=1/0,u=0;u<r.length;u++){var d=s(r[u],a,o,e,t);c>d&&(l=u+0,c=d)}return r[l]};this.compute=function(e){var t=e.xy,n=e.wh,i=e.txy,s=e.twh;this.timestamp=e.timestamp;var c=o.getUserDefinedLocation();return null!=c?c:this.locked||null==i||null==s?r.compute(e):(e.timestamp=null,r=l(t,n,i,s,this.anchors),this.x=r.x,this.y=r.y,r!=a&&this.fire("anchorChanged",r),a=r,r.compute(e))},this.getCurrentLocation=function(e){return this.getUserDefinedLocation()||(null!=r?r.getCurrentLocation(e):null)},this.getOrientation=function(e){return null!=r?r.getOrientation(e):[0,0]},this.over=function(e,t){null!=r&&r.over(e,t)},this.out=function(){null!=r&&r.out()},this.getCssClass=function(){return r&&r.getCssClass()||""}},t.extend(n.DynamicAnchor,n.Anchor);var r=function(e,t,i,r,a,o){n.Anchors[a]=function(n){var s=n.jsPlumbInstance.makeAnchor([e,t,i,r,0,0],n.elementId,n.jsPlumbInstance);return s.type=a,o&&o(s,n),s}};r(.5,0,0,-1,"TopCenter"),r(.5,1,0,1,"BottomCenter"),r(0,.5,-1,0,"LeftMiddle"),r(1,.5,1,0,"RightMiddle"),r(.5,0,0,-1,"Top"),r(.5,1,0,1,"Bottom"),r(0,.5,-1,0,"Left"),r(1,.5,1,0,"Right"),r(.5,.5,0,0,"Center"),r(1,0,0,-1,"TopRight"),r(1,1,0,1,"BottomRight"),r(0,0,0,-1,"TopLeft"),r(0,1,0,1,"BottomLeft"),n.Defaults.DynamicAnchors=function(e){return e.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],e.elementId,e.jsPlumbInstance)},n.Anchors.AutoDefault=function(e){var t=e.jsPlumbInstance.makeDynamicAnchor(n.Defaults.DynamicAnchors(e));

return t.type="AutoDefault",t};var a=function(e,t){n.Anchors[e]=function(n){var i=n.jsPlumbInstance.makeAnchor(["Continuous",{faces:t}],n.elementId,n.jsPlumbInstance);return i.type=e,i}};n.Anchors.Continuous=function(e){return e.jsPlumbInstance.continuousAnchorFactory.get(e)},a("ContinuousLeft",["left"]),a("ContinuousTop",["top"]),a("ContinuousBottom",["bottom"]),a("ContinuousRight",["right"]),r(0,0,0,0,"Assign",function(e,t){var n=t.position||"Fixed";e.positionFinder=n.constructor==String?t.jsPlumbInstance.AnchorPositionFinders[n]:n,e.constructorParams=t}),jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(e,t,n){return[(e.left-t.left)/n[0],(e.top-t.top)/n[1]]},Grid:function(e,t,n,i){var r=e.left-t.left,a=e.top-t.top,o=n[0]/i.grid[0],s=n[1]/i.grid[1],l=Math.floor(r/o),c=Math.floor(a/s);return[(l*o+o/2)/n[0],(c*s+s/2)/n[1]]}},n.Anchors.Perimeter=function(e){e=e||{};var t=e.anchorCount||60,n=e.shape;if(!n)throw new Error("no shape supplied to Perimeter Anchor type");var i=function(){for(var e=.5,n=2*Math.PI/t,i=0,r=[],a=0;t>a;a++){var o=e+e*Math.sin(i),s=e+e*Math.cos(i);r.push([o,s,0,0]),i+=n}return r},r=function(e){for(var n=t/e.length,i=[],r=function(e,r,a,o,s){n=t*s;for(var l=(a-e)/n,c=(o-r)/n,u=0;n>u;u++)i.push([e+l*u,r+c*u,0,0])},a=0;a<e.length;a++)r.apply(null,e[a]);return i},a=function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n][0],e[n][1],e[n][2],e[n][3],1/e.length]);return r(t)},o=function(){return a([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},s={Circle:i,Ellipse:i,Diamond:function(){return a([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:o,Square:o,Triangle:function(){return a([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(e){for(var t=e.points,n=[],i=0,a=0;a<t.length-1;a++){var o=Math.sqrt(Math.pow(t[a][2]-t[a][0])+Math.pow(t[a][3]-t[a][1]));i+=o,n.push([t[a][0],t[a][1],t[a+1][0],t[a+1][1],o])}for(var s=0;s<n.length;s++)n[s][4]=n[s][4]/i;return r(n)}},l=function(e,t){for(var n=[],i=t/180*Math.PI,r=0;r<e.length;r++){var a=e[r][0]-.5,o=e[r][1]-.5;n.push([.5+(a*Math.cos(i)-o*Math.sin(i)),.5+(a*Math.sin(i)+o*Math.cos(i)),e[r][2],e[r][3]])}return n};if(!s[n])throw new Error("Shape ["+n+"] is unknown by Perimeter Anchor type");var c=s[n](e);e.rotation&&(c=l(c,e.rotation));var u=e.jsPlumbInstance.makeDynamicAnchor(c);return u.type="Perimeter",u}}.call(this),function(){"use strict";var e=this,t=e.jsPlumb,n=e.jsPlumbUtil,i=e.Biltong;t.Segments={AbstractSegment:function(e){this.params=e,this.findClosestPointOnPath=function(e,t){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(e.x1,e.x2),minY:Math.min(e.y1,e.y2),maxX:Math.max(e.x1,e.x2),maxY:Math.max(e.y1,e.y2)}}},Straight:function(e){var n,r,a,o,s,l,c,u=(t.Segments.AbstractSegment.apply(this,arguments),function(){n=Math.sqrt(Math.pow(s-o,2)+Math.pow(c-l,2)),r=i.gradient({x:o,y:l},{x:s,y:c}),a=-1/r});this.type="Straight",this.getLength=function(){return n},this.getGradient=function(){return r},this.getCoordinates=function(){return{x1:o,y1:l,x2:s,y2:c}},this.setCoordinates=function(e){o=e.x1,l=e.y1,s=e.x2,c=e.y2,u()},this.setCoordinates({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}),this.getBounds=function(){return{minX:Math.min(o,s),minY:Math.min(l,c),maxX:Math.max(o,s),maxY:Math.max(l,c)}},this.pointOnPath=function(e,t){if(0!==e||t){if(1!=e||t){var r=t?e>0?e:n+e:e*n;return i.pointOnLine({x:o,y:l},{x:s,y:c},r)}return{x:s,y:c}}return{x:o,y:l}},this.gradientAtPoint=function(e){return r},this.pointAlongPathFrom=function(e,t,n){var r=this.pointOnPath(e,n),a=0>=t?{x:o,y:l}:{x:s,y:c};return 0>=t&&Math.abs(t)>1&&(t*=-1),i.pointOnLine(r,a,t)};var d=function(e,t,n){return n>=Math.min(e,t)&&n<=Math.max(e,t)},p=function(e,t,n){return Math.abs(n-e)<Math.abs(n-t)?e:t};this.findClosestPointOnPath=function(e,t){var u={d:1/0,x:null,y:null,l:null,x1:o,x2:s,y1:l,y2:c};if(0===r)u.y=l,u.x=d(o,s,e)?e:p(o,s,e);else if(r==1/0||r==-(1/0))u.x=o,u.y=d(l,c,t)?t:p(l,c,t);else{var h=l-r*o,f=t-a*e,g=(f-h)/(r-a),m=r*g+h;u.x=d(o,s,g)?g:p(o,s,g),u.y=d(l,c,m)?m:p(l,c,m)}var v=i.lineLength([u.x,u.y],[o,l]);return u.d=i.lineLength([e,t],[u.x,u.y]),u.l=v/n,u}},Arc:function(e){var n=(t.Segments.AbstractSegment.apply(this,arguments),function(t,n){return i.theta([e.cx,e.cy],[t,n])}),r=function(e,t){if(e.anticlockwise){var n=e.startAngle<e.endAngle?e.startAngle+a:e.startAngle,i=Math.abs(n-e.endAngle);return n-i*t}var r=e.endAngle<e.startAngle?e.endAngle+a:e.endAngle,o=Math.abs(r-e.startAngle);return e.startAngle+o*t},a=2*Math.PI;this.radius=e.r,this.anticlockwise=e.ac,this.type="Arc",e.startAngle&&e.endAngle?(this.startAngle=e.startAngle,this.endAngle=e.endAngle,this.x1=e.cx+this.radius*Math.cos(e.startAngle),this.y1=e.cy+this.radius*Math.sin(e.startAngle),this.x2=e.cx+this.radius*Math.cos(e.endAngle),this.y2=e.cy+this.radius*Math.sin(e.endAngle)):(this.startAngle=n(e.x1,e.y1),this.endAngle=n(e.x2,e.y2),this.x1=e.x1,this.y1=e.y1,this.x2=e.x2,this.y2=e.y2),this.endAngle<0&&(this.endAngle+=a),this.startAngle<0&&(this.startAngle+=a),this.segment=i.quadrant([this.x1,this.y1],[this.x2,this.y2]);var o=this.endAngle<this.startAngle?this.endAngle+a:this.endAngle;this.sweep=Math.abs(o-this.startAngle),this.anticlockwise&&(this.sweep=a-this.sweep);var s=2*Math.PI*this.radius,l=this.sweep/a,c=s*l;this.getLength=function(){return c},this.getBounds=function(){return{minX:e.cx-e.r,maxX:e.cx+e.r,minY:e.cy-e.r,maxY:e.cy+e.r}};var u=1e-10,d=function(e){var t=Math.floor(e),n=Math.ceil(e);return u>e-t?t:u>n-e?n:e};this.pointOnPath=function(t,n){if(0===t)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1==t)return{x:this.x2,y:this.y2,theta:this.endAngle};n&&(t/=c);var i=r(this,t),a=e.cx+e.r*Math.cos(i),o=e.cy+e.r*Math.sin(i);return{x:d(a),y:d(o),theta:i}},this.gradientAtPoint=function(t,n){var r=this.pointOnPath(t,n),a=i.normal([e.cx,e.cy],[r.x,r.y]);return this.anticlockwise||a!=1/0&&a!=-(1/0)||(a*=-1),a},this.pointAlongPathFrom=function(t,n,i){var r=this.pointOnPath(t,i),a=n/s*2*Math.PI,o=this.anticlockwise?-1:1,l=r.theta+o*a,c=e.cx+this.radius*Math.cos(l),u=e.cy+this.radius*Math.sin(l);return{x:c,y:u}}},Bezier:function(n){this.curve=[{x:n.x1,y:n.y1},{x:n.cp1x,y:n.cp1y},{x:n.cp2x,y:n.cp2y},{x:n.x2,y:n.y2}];t.Segments.AbstractSegment.apply(this,arguments);this.bounds={minX:Math.min(n.x1,n.x2,n.cp1x,n.cp2x),minY:Math.min(n.y1,n.y2,n.cp1y,n.cp2y),maxX:Math.max(n.x1,n.x2,n.cp1x,n.cp2x),maxY:Math.max(n.y1,n.y2,n.cp1y,n.cp2y)},this.type="Bezier";var i=function(t,n,i){return i&&(n=e.jsBezier.locationAlongCurveFrom(t,n>0?0:1,n)),n};this.pointOnPath=function(t,n){return t=i(this.curve,t,n),e.jsBezier.pointOnCurve(this.curve,t)},this.gradientAtPoint=function(t,n){return t=i(this.curve,t,n),e.jsBezier.gradientAtPoint(this.curve,t)},this.pointAlongPathFrom=function(t,n,r){return t=i(this.curve,t,r),e.jsBezier.pointAlongCurveFrom(this.curve,t,n)},this.getLength=function(){return e.jsBezier.getLength(this.curve)},this.getBounds=function(){return this.bounds}}};var r=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)}},this.resetBounds()};t.Connectors.AbstractConnector=function(e){r.apply(this,arguments);var a=[],o=0,s=[],l=[],c=e.stub||0,u=n.isArray(c)?c[0]:c,d=n.isArray(c)?c[1]:c,p=e.gap||0,h=n.isArray(p)?p[0]:p,f=n.isArray(p)?p[1]:p,g=null,m=!1,v=null;this.getPath=function(){},this.setPath=function(e){},this.findSegmentForPoint=function(e,t){for(var n={d:1/0,s:null,x:null,y:null,l:null},i=0;i<a.length;i++){var r=a[i].findClosestPointOnPath(e,t);r.d<n.d&&(n.d=r.d,n.l=r.l,n.x=r.x,n.y=r.y,n.s=a[i],n.x1=r.x1,n.x2=r.x2,n.y1=r.y1,n.y2=r.y2,n.index=i)}return n};var y=function(){for(var e=0,t=0;t<a.length;t++){var n=a[t].getLength();l[t]=n/o,s[t]=[e,e+=n/o]}},b=function(e,t){t&&(e=e>0?e/o:(o+e)/o);for(var n=s.length-1,i=1,r=0;r<s.length;r++)if(s[r][1]>=e){n=r,i=1==e?1:0===e?0:(e-s[r][0])/l[r];break}return{segment:a[n],proportion:i,index:n}},w=function(e,n,i){if(i.x1!=i.x2||i.y1!=i.y2){var r=new t.Segments[n](i);a.push(r),o+=r.getLength(),e.updateBounds(r)}},x=function(){o=a.length=s.length=l.length=0};this.setSegments=function(e){g=[],o=0;for(var t=0;t<e.length;t++)g.push(e[t]),o+=e[t].getLength()};var k=function(e){this.lineWidth=e.lineWidth;var t=i.quadrant(e.sourcePos,e.targetPos),n=e.targetPos[0]<e.sourcePos[0],r=e.targetPos[1]<e.sourcePos[1],a=e.lineWidth||1,o=e.sourceEndpoint.anchor.getOrientation(e.sourceEndpoint),s=e.targetEndpoint.anchor.getOrientation(e.targetEndpoint),l=n?e.targetPos[0]:e.sourcePos[0],c=r?e.targetPos[1]:e.sourcePos[1],p=Math.abs(e.targetPos[0]-e.sourcePos[0]),g=Math.abs(e.targetPos[1]-e.sourcePos[1]);if(0===o[0]&&0===o[1]||0===s[0]&&0===s[1]){var m=p>g?0:1,v=[1,0][m];o=[],s=[],o[m]=e.sourcePos[m]>e.targetPos[m]?-1:1,s[m]=e.sourcePos[m]>e.targetPos[m]?1:-1,o[v]=0,s[v]=0}var y=n?p+h*o[0]:h*o[0],b=r?g+h*o[1]:h*o[1],w=n?f*s[0]:p+f*s[0],x=r?f*s[1]:g+f*s[1],k=o[0]*s[0]+o[1]*s[1],C={sx:y,sy:b,tx:w,ty:x,lw:a,xSpan:Math.abs(w-y),ySpan:Math.abs(x-b),mx:(y+w)/2,my:(b+x)/2,so:o,to:s,x:l,y:c,w:p,h:g,segment:t,startStubX:y+o[0]*u,startStubY:b+o[1]*u,endStubX:w+s[0]*d,endStubY:x+s[1]*d,isXGreaterThanStubTimes2:Math.abs(y-w)>u+d,isYGreaterThanStubTimes2:Math.abs(b-x)>u+d,opposite:-1==k,perpendicular:0===k,orthogonal:1==k,sourceAxis:0===o[0]?"y":"x",points:[l,c,p,g,y,b,w,x]};return C.anchorOrientation=C.opposite?"opposite":C.orthogonal?"orthogonal":"perpendicular",C};this.getSegments=function(){return a},this.updateBounds=function(e){var t=e.getBounds();this.bounds.minX=Math.min(this.bounds.minX,t.minX),this.bounds.maxX=Math.max(this.bounds.maxX,t.maxX),this.bounds.minY=Math.min(this.bounds.minY,t.minY),this.bounds.maxY=Math.max(this.bounds.maxY,t.maxY)};return this.pointOnPath=function(e,t){var n=b(e,t);return n.segment&&n.segment.pointOnPath(n.proportion,!1)||[0,0]},this.gradientAtPoint=function(e,t){var n=b(e,t);return n.segment&&n.segment.gradientAtPoint(n.proportion,!1)||0},this.pointAlongPathFrom=function(e,t,n){var i=b(e,n);return i.segment&&i.segment.pointAlongPathFrom(i.proportion,t,!1)||[0,0]},this.compute=function(e){m||(v=k.call(this,e)),x(),this._compute(v,e),this.x=v.points[0],this.y=v.points[1],this.w=v.points[2],this.h=v.points[3],this.segment=v.segment,y()},{addSegment:w,prepareCompute:k,sourceStub:u,targetStub:d,maxStub:Math.max(u,d),sourceGap:h,targetGap:f,maxGap:Math.max(h,f)}},n.extend(t.Connectors.AbstractConnector,r);var a=t.Connectors.Straight=function(){this.type="Straight";var e=t.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(t,n){e.addSegment(this,"Straight",{x1:t.sx,y1:t.sy,x2:t.startStubX,y2:t.startStubY}),e.addSegment(this,"Straight",{x1:t.startStubX,y1:t.startStubY,x2:t.endStubX,y2:t.endStubY}),e.addSegment(this,"Straight",{x1:t.endStubX,y1:t.endStubY,x2:t.tx,y2:t.ty})}};n.extend(t.Connectors.Straight,t.Connectors.AbstractConnector),t.registerConnectorType(a,"Straight"),t.Endpoints.AbstractEndpoint=function(e){r.apply(this,arguments);var t=this.compute=function(e,t,n,i){var r=this._compute.apply(this,arguments);return this.x=r[0],this.y=r[1],this.w=r[2],this.h=r[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,r};return{compute:t,cssClass:e.cssClass}},n.extend(t.Endpoints.AbstractEndpoint,r),t.Endpoints.Dot=function(e){this.type="Dot";t.Endpoints.AbstractEndpoint.apply(this,arguments);e=e||{},this.radius=e.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(e,t,n,i){this.radius=n.radius||this.radius;var r=e[0]-this.radius,a=e[1]-this.radius,o=2*this.radius,s=2*this.radius;if(n.strokeStyle){var l=n.lineWidth||1;r-=l,a-=l,o+=2*l,s+=2*l}return[r,a,o,s,this.radius]}},n.extend(t.Endpoints.Dot,t.Endpoints.AbstractEndpoint),t.Endpoints.Rectangle=function(e){this.type="Rectangle";t.Endpoints.AbstractEndpoint.apply(this,arguments);e=e||{},this.width=e.width||20,this.height=e.height||20,this._compute=function(e,t,n,i){var r=n.width||this.width,a=n.height||this.height,o=e[0]-r/2,s=e[1]-a/2;return[o,s,r,a]}},n.extend(t.Endpoints.Rectangle,t.Endpoints.AbstractEndpoint);var o=function(e){t.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};n.extend(o,t.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(e){this._jsPlumb.displayElements.push(e)}}),t.Endpoints.Image=function(i){this.type="Image",o.apply(this,arguments),t.Endpoints.AbstractEndpoint.apply(this,arguments);var r=i.onload,a=i.src||i.url,s=i.cssClass?" "+i.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=i.width,this._jsPlumb.heightToUse=i.height,this._jsPlumb.endpoint=i.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,r&&r(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(e,t){var n=e.constructor==String?e:e.src;r=t,this._jsPlumb.img.src=n,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(a,r),this._compute=function(e,t,n,i){return this.anchorPoint=e,this._jsPlumb.ready?[e[0]-this._jsPlumb.widthToUse/2,e[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=jsPlumb.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+s),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(e,t,i){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var r=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,a=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;n.sizeElement(this.canvas,r,a,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(t,n){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(t,n):e.setTimeout(function(){this.paint(t,n)}.bind(this),200))}},n.extend(t.Endpoints.Image,[o,t.Endpoints.AbstractEndpoint],{cleanup:function(e){e&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),t.Endpoints.Blank=function(e){t.Endpoints.AbstractEndpoint.apply(this,arguments);this.type="Blank",o.apply(this,arguments),this._compute=function(e,t,n,i){return[e[0],e[1],10,0]};var i=e.cssClass?" "+e.cssClass:"";this.canvas=jsPlumb.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+i),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(e,t){n.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},n.extend(t.Endpoints.Blank,[t.Endpoints.AbstractEndpoint,o],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),t.Endpoints.Triangle=function(e){this.type="Triangle",t.Endpoints.AbstractEndpoint.apply(this,arguments),e=e||{},e.width=e.width||55,e.height=e.height||55,this.width=e.width,this.height=e.height,this._compute=function(e,t,n,i){var r=n.width||self.width,a=n.height||self.height,o=e[0]-r/2,s=e[1]-a/2;return[o,s,r,a]}};var s=t.Overlays.AbstractOverlay=function(e){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=e.component,this.loc=null==e.location?.5:e.location,this.endpointLoc=null==e.endpointLocation?[.5,.5]:e.endpointLocation};s.prototype={cleanup:function(e){e&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(e){},setVisible:function(e){this.visible=e,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(e){this.loc+=e,this.component.repaint()},setLocation:function(e){this.loc=e,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},t.Overlays.Arrow=function(e){this.type="Arrow",s.apply(this,arguments),this.isAppendedAtTopLevel=!1,e=e||{},this.length=e.length||20,this.width=e.width||20,this.id=e.id;var t=(e.direction||1)<0?-1:1,r=e.paintStyle||{lineWidth:1},a=e.foldback||.623;this.computeMaxSize=function(){return 1.5*self.width},this.draw=function(e,o){var s,l,c,u,d;if(e.pointAlongPathFrom){if(n.isString(this.loc)||this.loc>1||this.loc<0){var p=parseInt(this.loc,10),h=this.loc<0?1:0;s=e.pointAlongPathFrom(h,p,!1),l=e.pointAlongPathFrom(h,p-t*this.length/2,!1),c=i.pointOnLine(s,l,this.length)}else if(1==this.loc){if(s=e.pointOnPath(this.loc),l=e.pointAlongPathFrom(this.loc,-this.length),c=i.pointOnLine(s,l,this.length),-1==t){var f=c;c=s,s=f}}else if(0===this.loc){if(c=e.pointOnPath(this.loc),l=e.pointAlongPathFrom(this.loc,this.length),s=i.pointOnLine(c,l,this.length),-1==t){var g=c;c=s,s=g}}else s=e.pointAlongPathFrom(this.loc,t*this.length/2),l=e.pointOnPath(this.loc),c=i.pointOnLine(s,l,this.length);u=i.perpendicularLineTo(s,c,this.width),d=i.pointOnLine(s,c,a*this.length);var m={hxy:s,tail:u,cxy:d},v=r.strokeStyle||o.strokeStyle,y=r.fillStyle||o.strokeStyle,b=r.lineWidth||o.lineWidth;return{component:e,d:m,lineWidth:b,strokeStyle:v,fillStyle:y,minX:Math.min(s.x,u[0].x,u[1].x),maxX:Math.max(s.x,u[0].x,u[1].x),minY:Math.min(s.y,u[0].y,u[1].y),maxY:Math.max(s.y,u[0].y,u[1].y)}}return{component:e,minX:0,maxX:0,minY:0,maxY:0}}},n.extend(t.Overlays.Arrow,s,{updateFrom:function(e){this.length=e.length||this.length,this.width=e.width||this.width,this.direction=null!=e.direction?e.direction:this.direction,this.foldback=e.foldback||this.foldback}}),t.Overlays.PlainArrow=function(e){e=e||{};var n=t.extend(e,{foldback:1});t.Overlays.Arrow.call(this,n),this.type="PlainArrow"},n.extend(t.Overlays.PlainArrow,t.Overlays.Arrow),t.Overlays.Diamond=function(e){e=e||{};var n=e.length||40,i=jsPlumb.extend(e,{length:n/2,foldback:2});t.Overlays.Arrow.call(this,i),this.type="Diamond"},n.extend(t.Overlays.Diamond,t.Overlays.Arrow);var l=function(e,t){return(null==e._jsPlumb.cachedDimensions||t)&&(e._jsPlumb.cachedDimensions=e.getDimensions()),e._jsPlumb.cachedDimensions},c=function(e){t.jsPlumbUIComponent.apply(this,arguments),s.apply(this,arguments);var i=this.fire;this.fire=function(){i.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=e.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=e.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=e.create,this._jsPlumb.initiallyInvisible=e.visible===!1,this.getElement=function(){if(null==this._jsPlumb.div){var t=this._jsPlumb.div=jsPlumb.getDOMElement(this._jsPlumb.create(this._jsPlumb.component));t.style.position="absolute",t.className=this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:e.cssClass?e.cssClass:""),this._jsPlumb.instance.appendElement(t),this._jsPlumb.instance.getId(t),this.canvas=t;var n="translate(-50%, -50%)";t.style.webkitTransform=n,t.style.mozTransform=n,t.style.msTransform=n,t.style.oTransform=n,t.style.transform=n,t._jsPlumb=this,e.visible===!1&&(t.style.display="none")}return this._jsPlumb.div},this.draw=function(e,t,i){var r=l(this);if(null!=r&&2==r.length){var a={x:0,y:0};if(i)a={x:i[0],y:i[1]};else if(e.pointOnPath){var o=this.loc,s=!1;(n.isString(this.loc)||this.loc<0||this.loc>1)&&(o=parseInt(this.loc,10),s=!0),a=e.pointOnPath(o,s)}else{var c=this.loc.constructor==Array?this.loc:this.endpointLoc;a={x:c[0]*e.w,y:c[1]*e.h}}var u=a.x-r[0]/2,d=a.y-r[1]/2;return{component:e,d:{minx:u,miny:d,td:r,cxy:a},minX:u,maxX:u+r[0],minY:d,maxY:d+r[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};n.extend(c,[t.jsPlumbUIComponent,s],{getDimensions:function(){return n.oldIE?t.getSize(this.getElement()):[1,1]},setVisible:function(e){this._jsPlumb.div&&(this._jsPlumb.div.style.display=e?"block":"none",e&&this._jsPlumb.initiallyInvisible&&(l(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(e){e?null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(e){null!=this._jsPlumb.div&&e.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var e=l(this);return Math.max(e[0],e[1])},paint:function(e,t){this._jsPlumb.initialised||(this.getElement(),e.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=e.component.x+e.d.minx+"px",this._jsPlumb.div.style.top=e.component.y+e.d.miny+"px"}}),t.Overlays.Custom=function(e){this.type="Custom",c.apply(this,arguments)},n.extend(t.Overlays.Custom,c),t.Overlays.GuideLines=function(){var e=this;e.length=50,e.lineWidth=5,this.type="GuideLines",s.apply(this,arguments),t.jsPlumbUIComponent.apply(this,arguments),this.draw=function(t,n){var r=t.pointAlongPathFrom(e.loc,e.length/2),a=t.pointOnPath(e.loc),o=i.pointOnLine(r,a,e.length),s=i.perpendicularLineTo(r,o,40),l=i.perpendicularLineTo(o,r,20);return{connector:t,head:r,tail:o,headLine:l,tailLine:s,minX:Math.min(r.x,o.x,l[0].x,l[1].x),minY:Math.min(r.y,o.y,l[0].y,l[1].y),maxX:Math.max(r.x,o.x,l[0].x,l[1].x),maxY:Math.max(r.y,o.y,l[0].y,l[1].y)}}},t.Overlays.Label=function(e){this.labelStyle=e.labelStyle;this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var n=t.extend({create:function(){return jsPlumb.createElement("div")}},e);if(t.Overlays.Custom.call(this,n),this.type="Label",this.label=e.label||"",this.labelText=null,this.labelStyle){var i=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",i.style.font=this.labelStyle.font,i.style.color=this.labelStyle.color||"black",this.labelStyle.fillStyle&&(i.style.background=this.labelStyle.fillStyle),this.labelStyle.borderWidth>0){var r=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";i.style.border=this.labelStyle.borderWidth+"px solid "+r}this.labelStyle.padding&&(i.style.padding=this.labelStyle.padding)}},n.extend(t.Overlays.Label,t.Overlays.Custom,{cleanup:function(e){e&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(e){this.label=e,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),c.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var e=this.label(this);this.getElement().innerHTML=e.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(e){e.label&&this.setLabel(e.label)}})}.call(this),function(){"use strict";var e=this,t=e.jsPlumb,n=function(t){var n=t._mottle;return n||(n=t._mottle=new e.Mottle),n};t.extend(e.jsPlumbInstance.prototype,{getEventManager:function(){return n(this)},on:function(e,t,n){this.getEventManager().on.apply(this,arguments)},off:function(e,t,n){this.getEventManager().off.apply(this,arguments)}})}.call(this),function(){"use strict";var e=this,t=e.jsPlumb,n=e.jsPlumbUtil,i=function(e){this.type="Flowchart",e=e||{},e.stub=null==e.stub?30:e.stub;var n,i,r=t.Connectors.AbstractConnector.apply(this,arguments),a=null==e.midpoint?.5:e.midpoint,o=e.alwaysRespectStubs===!0,s=null,l=null,c=null,u=null!=e.cornerRadius?e.cornerRadius:0,d=function(e){return 0>e?-1:0===e?0:1},p=function(e,t,n,i){if(l!=t||c!=n){var r=null==l?i.sx:l,a=null==c?i.sy:c,o=r==t?"v":"h",s=d(t-r),u=d(n-a);l=t,c=n,e.push([r,a,t,n,o,s,u])}},h=function(e){return Math.sqrt(Math.pow(e[0]-e[2],2)+Math.pow(e[1]-e[3],2))},f=function(e){var t=[];return t.push.apply(t,e),t},g=function(e,t,n){for(var i,a=null,o=0;o<t.length-1;o++){if(a=a||f(t[o]),i=f(t[o+1]),u>0&&a[4]!=i[4]){var s=Math.min(u,h(a),h(i));a[2]-=a[5]*s,a[3]-=a[6]*s,i[0]+=i[5]*s,i[1]+=i[6]*s;var l=a[6]==i[5]&&1==i[5]||a[6]==i[5]&&0===i[5]&&a[5]!=i[6]||a[6]==i[5]&&-1==i[5],c=i[1]>a[3]?1:-1,d=i[0]>a[2]?1:-1,p=c==d,g=p&&l||!p&&!l?i[0]:a[2],m=p&&l||!p&&!l?a[3]:i[1];r.addSegment(e,"Straight",{x1:a[0],y1:a[1],x2:a[2],y2:a[3]}),r.addSegment(e,"Arc",{r:s,x1:a[2],y1:a[3],x2:i[0],y2:i[1],cx:g,cy:m,ac:l})}else{var v=a[2]==a[0]?0:a[2]>a[0]?n.lw/2:-(n.lw/2),y=a[3]==a[1]?0:a[3]>a[1]?n.lw/2:-(n.lw/2);r.addSegment(e,"Straight",{x1:a[0]-v,y1:a[1]-y,x2:a[2]+v,y2:a[3]+y})}a=i}null!=i&&r.addSegment(e,"Straight",{x1:i[0],y1:i[1],x2:i[2],y2:i[3]})};this.setSegments=function(e){s=e},this.isEditable=function(){return!0},this.getOriginalSegments=function(){return s||n},this._compute=function(e,t){if(t.clearEdits&&(s=null),null!=s)return void g(this,s,e);n=[],l=null,c=null,i=null;var u=e.startStubX+(e.endStubX-e.startStubX)*a,d=e.startStubY+(e.endStubY-e.startStubY)*a,h={x:[0,1],y:[1,0]},f=function(){return[e.startStubX,e.startStubY,e.endStubX,e.endStubY]},m={perpendicular:f,orthogonal:f,opposite:function(t){var n=e,i="x"==t?0:1,r={x:function(){return 1==n.so[i]&&(n.startStubX>n.endStubX&&n.tx>n.startStubX||n.sx>n.endStubX&&n.tx>n.sx)||-1==n.so[i]&&(n.startStubX<n.endStubX&&n.tx<n.startStubX||n.sx<n.endStubX&&n.tx<n.sx)},y:function(){return 1==n.so[i]&&(n.startStubY>n.endStubY&&n.ty>n.startStubY||n.sy>n.endStubY&&n.ty>n.sy)||-1==n.so[i]&&(n.startStubY<n.endStubY&&n.ty<n.startStubY||n.sy<n.endStubY&&n.ty<n.sy)}};return!o&&r[t]()?{x:[(e.sx+e.tx)/2,e.startStubY,(e.sx+e.tx)/2,e.endStubY],y:[e.startStubX,(e.sy+e.ty)/2,e.endStubX,(e.sy+e.ty)/2]}[t]:[e.startStubX,e.startStubY,e.endStubX,e.endStubY]}},v={perpendicular:function(t){var n=e,i={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},r={x:[[n.startStubX,n.endStubX],null,[n.endStubX,n.startStubX]],y:[[n.startStubY,n.endStubY],null,[n.endStubY,n.startStubY]]},a={x:[[u,n.startStubY],[u,n.endStubY]],y:[[n.startStubX,d],[n.endStubX,d]]},o={x:[[n.endStubX,n.startStubY]],y:[[n.startStubX,n.endStubY]]},s={x:[[n.startStubX,n.endStubY],[n.endStubX,n.endStubY]],y:[[n.endStubX,n.startStubY],[n.endStubX,n.endStubY]]},l={x:[[n.startStubX,d],[n.endStubX,d],[n.endStubX,n.endStubY]],y:[[u,n.startStubY],[u,n.endStubY],[n.endStubX,n.endStubY]]},c={x:[n.startStubY,n.endStubY],y:[n.startStubX,n.endStubX]},p=h[t][0],f=h[t][1],g=n.so[p]+1,m=n.to[f]+1,v=-1==n.to[f]&&c[t][1]<c[t][0]||1==n.to[f]&&c[t][1]>c[t][0],y=r[t][g][0],b=r[t][g][1],w=i[t][g][m];return n.segment==w[3]||n.segment==w[2]&&v?a[t]:n.segment==w[2]&&y>b?o[t]:n.segment==w[2]&&b>=y||n.segment==w[1]&&!v?l[t]:n.segment==w[0]||n.segment==w[1]&&v?s[t]:void 0},orthogonal:function(t,n,i,r,a){var o=e,s={x:-1==o.so[0]?Math.min(n,r):Math.max(n,r),y:-1==o.so[1]?Math.min(n,r):Math.max(n,r)}[t];return{x:[[s,i],[s,a],[r,a]],y:[[i,s],[a,s],[a,r]]}[t]},opposite:function(n,i,a,o){var s=e,l={x:"y",y:"x"}[n],c={x:"height",y:"width"}[n],p=s["is"+n.toUpperCase()+"GreaterThanStubTimes2"];if(t.sourceEndpoint.elementId==t.targetEndpoint.elementId){var h=a+(1-t.sourceEndpoint.anchor[l])*t.sourceInfo[c]+r.maxStub;return{x:[[i,h],[o,h]],y:[[h,i],[h,o]]}[n]}return!p||1==s.so[b]&&i>o||-1==s.so[b]&&o>i?{x:[[i,d],[o,d]],y:[[u,i],[u,o]]}[n]:1==s.so[b]&&o>i||-1==s.so[b]&&i>o?{x:[[u,s.sy],[u,s.ty]],y:[[s.sx,d],[s.tx,d]]}[n]:void 0}},y=m[e.anchorOrientation](e.sourceAxis),b="x"==e.sourceAxis?0:1,w="x"==e.sourceAxis?1:0,x=y[b],k=y[w],C=y[b+2],S=y[w+2];p(n,y[0],y[1],e);var _=v[e.anchorOrientation](e.sourceAxis,x,k,C,S);if(_)for(var T=0;T<_.length;T++)p(n,_[T][0],_[T][1],e);p(n,y[2],y[3],e),p(n,e.tx,e.ty,e),g(this,n,e)},this.getPath=function(){for(var e=null,t=null,i=[],r=s||n,a=0;a<r.length;a++){var o=r[a],l=o[4],c="v"==l?3:2;null!=e&&t===l?e[c]=o[c]:(o[0]!=o[2]||o[1]!=o[3])&&(i.push({start:[o[0],o[1]],end:[o[2],o[3]]}),e=o,t=o[4])}return i},this.setPath=function(e){s=[];for(var t=0;t<e.length;t++){var n=e[t].start[0],i=e[t].start[1],r=e[t].end[0],a=e[t].end[1],o=n==r?"v":"h",l=d(r-n),c=d(a-i);s.push([n,i,r,a,o,l,c])}}};n.extend(i,t.Connectors.AbstractConnector),t.registerConnectorType(i,"Flowchart")}.call(this),function(){"use strict";var e=this,t=e.jsPlumb,n=e.jsPlumbUtil,i=function(e,t,n,i){return n>=e&&t>=i?1:n>=e&&i>=t?2:e>=n&&i>=t?3:4},r=function(e,t,n,i,r,a,o,s,l){return l>=s?[e,t]:1===n?i[3]<=0&&r[3]>=1?[e+(i[2]<.5?-1*a:a),t]:i[2]>=1&&r[2]<=0?[e,t+(i[3]<.5?-1*o:o)]:[e+-1*a,t+-1*o]:2===n?i[3]>=1&&r[3]<=0?[e+(i[2]<.5?-1*a:a),t]:i[2]>=1&&r[2]<=0?[e,t+(i[3]<.5?-1*o:o)]:[e+a,t+-1*o]:3===n?i[3]>=1&&r[3]<=0?[e+(i[2]<.5?-1*a:a),t]:i[2]<=0&&r[2]>=1?[e,t+(i[3]<.5?-1*o:o)]:[e+-1*a,t+-1*o]:4===n?i[3]<=0&&r[3]>=1?[e+(i[2]<.5?-1*a:a),t]:i[2]<=0&&r[2]>=1?[e,t+(i[3]<.5?-1*o:o)]:[e+a,t+-1*o]:void 0},a=function(e){e=e||{},this.type="StateMachine";var n=t.Connectors.AbstractConnector.apply(this,arguments),a=e.curviness||10,o=e.margin||5,s=e.proximityLimit||80,l=e.orientation&&"clockwise"===e.orientation,c=e.loopbackRadius||25,u=e.showLoopback!==!1;this._compute=function(e,t){var d=Math.abs(t.sourcePos[0]-t.targetPos[0]),p=Math.abs(t.sourcePos[1]-t.targetPos[1]);if(u&&t.sourceEndpoint.elementId===t.targetEndpoint.elementId){var h=t.sourcePos[0],f=t.sourcePos[1]-o,g=h,m=f-c,v=2*c,y=2*c,b=g-c,w=m-c;e.points[0]=b,e.points[1]=w,e.points[2]=v,e.points[3]=y,n.addSegment(this,"Arc",{loopback:!0,x1:h-b+4,y1:f-w,startAngle:0,endAngle:2*Math.PI,r:c,ac:!l,x2:h-b-4,y2:f-w,cx:g-b,cy:m-w})}else{var x=t.sourcePos[0]<t.targetPos[0]?0:d,k=t.sourcePos[1]<t.targetPos[1]?0:p,C=t.sourcePos[0]<t.targetPos[0]?d:0,S=t.sourcePos[1]<t.targetPos[1]?p:0;0===t.sourcePos[2]&&(x-=o),1===t.sourcePos[2]&&(x+=o),0===t.sourcePos[3]&&(k-=o),1===t.sourcePos[3]&&(k+=o),0===t.targetPos[2]&&(C-=o),1===t.targetPos[2]&&(C+=o),0===t.targetPos[3]&&(S-=o),1===t.targetPos[3]&&(S+=o);var _=(x+C)/2,T=(k+S)/2,$=i(x,k,C,S),A=Math.sqrt(Math.pow(C-x,2)+Math.pow(S-k,2)),E=r(_,T,$,t.sourcePos,t.targetPos,a,a,A,s);n.addSegment(this,"Bezier",{x1:C,y1:S,x2:x,y2:k,cp1x:E[0],cp1y:E[1],cp2x:E[0],cp2y:E[1]})}}};n.extend(a,t.Connectors.AbstractConnector),t.registerConnectorType(a,"StateMachine")}.call(this),function(){"use strict";var e=this,t=e.jsPlumb,n=e.jsPlumbUtil,i=function(e){e=e||{};var n=t.Connectors.AbstractConnector.apply(this,arguments),i=e.curviness||150,r=10;this.type="Bezier",this.getCurviness=function(){return i},this._findControlPoint=function(e,t,n,a,o){var s=a.anchor.getOrientation(a),l=o.anchor.getOrientation(o),c=s[0]!=l[0]||s[1]==l[1],u=[];return c?(u.push(0===l[0]?n[0]<t[0]?e[0]+r:e[0]-r:e[0]+i*l[0]),u.push(0===l[1]?n[1]<t[1]?e[1]+r:e[1]-r:e[1]+i*s[1])):(u.push(0===s[0]?t[0]<n[0]?e[0]+r:e[0]-r:e[0]-i*s[0]),u.push(0===s[1]?t[1]<n[1]?e[1]+r:e[1]-r:e[1]+i*l[1])),u},this._compute=function(e,t){var i=t.sourcePos,r=t.targetPos,a=Math.abs(i[0]-r[0]),o=Math.abs(i[1]-r[1]),s=i[0]<r[0]?a:0,l=i[1]<r[1]?o:0,c=i[0]<r[0]?0:a,u=i[1]<r[1]?0:o,d=this._findControlPoint([s,l],i,r,t.sourceEndpoint,t.targetEndpoint,e.so,e.to),p=this._findControlPoint([c,u],r,i,t.targetEndpoint,t.sourceEndpoint,e.so,e.to);n.addSegment(this,"Bezier",{x1:s,y1:l,x2:c,y2:u,cp1x:d[0],cp1y:d[1],cp2x:p[0],cp2y:p[1]})}};n.extend(i,t.Connectors.AbstractConnector),t.registerConnectorType(i,"Bezier")}.call(this),function(){"use strict";var e=this,t=e.jsPlumb,n=e.jsPlumbUtil,i={joinstyle:"stroke-linejoin","stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},r="stroke-dasharray",a="dashstyle",o="linearGradient",s="radialGradient",l="defs",c="fill",u="stop",d="stroke",p="stroke-width",h="style",f="none",g="jsplumb_gradient_",m="lineWidth",v={svg:"http://www.w3.org/2000/svg",
xhtml:"http://www.w3.org/1999/xhtml"},y=function(e,t){for(var n in t)e.setAttribute(n,""+t[n])},b=function(e,t){return t=t||{},t.version="1.1",t.xmlns=v.xhtml,jsPlumb.createElementNS(v.svg,e,null,null,t)},w=function(e){return"position:absolute;left:"+e[0]+"px;top:"+e[1]+"px"},x=function(e){for(var t=e.querySelectorAll(" defs linearGradient radialGradient"),n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n])},k=function(e,t,i,r,a){var p=g+a._jsPlumb.instance.idstamp();x(e);var h;h=i.gradient.offset?b(s,{id:p}):b(o,{id:p,gradientUnits:"userSpaceOnUse"});var f=b(l);e.appendChild(f),f.appendChild(h);for(var m=0;m<i.gradient.stops.length;m++){var v=1==a.segment||2==a.segment?m:i.gradient.stops.length-1-m,y=n.convertStyle(i.gradient.stops[v][1],!0),w=b(u,{offset:Math.floor(100*i.gradient.stops[m][0])+"%","stop-color":y});h.appendChild(w)}var k=i.strokeStyle?d:c;t.setAttribute(k,"url(#"+p+")")},C=function(e,t,o,s,l){if(t.setAttribute(c,o.fillStyle?n.convertStyle(o.fillStyle,!0):f),t.setAttribute(d,o.strokeStyle?n.convertStyle(o.strokeStyle,!0):f),o.gradient?k(e,t,o,s,l):(x(e),t.setAttribute(h,"")),o.lineWidth&&t.setAttribute(p,o.lineWidth),o[a]&&o[m]&&!o[r]){var u=-1==o[a].indexOf(",")?" ":",",g=o[a].split(u),v="";g.forEach(function(e){v+=Math.floor(e*o.lineWidth)+u}),t.setAttribute(r,v)}else o[r]&&t.setAttribute(r,o[r]);for(var y in i)o[y]&&t.setAttribute(i[y],o[y])},S=function(e,t,n){e.childNodes.length>n?e.insertBefore(t,e.childNodes[n]):e.appendChild(t)};n.svg={node:b,attr:y,pos:w};var _=function(e){var i=e.pointerEventsSpec||"all",r={};t.jsPlumbUIComponent.apply(this,e.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var a=e.cssClass+" "+(e.originalArgs[0].cssClass||""),o={style:"",width:0,height:0,"pointer-events":i,position:"absolute"};this.svg=b("svg",o),e.useDivWrapper?(this.canvas=jsPlumb.createElement("div",{position:"absolute"}),n.sizeElement(this.canvas,0,0,1,1),this.canvas.className=a):(y(this.svg,{"class":a}),this.canvas=this.svg),e._jsPlumb.appendElement(this.canvas,e.originalArgs[0].parent),e.useDivWrapper&&this.canvas.appendChild(this.svg);var s=[this.canvas];return this.getDisplayElements=function(){return s},this.appendDisplayElement=function(e){s.push(e)},this.paint=function(t,i,a){if(null!=t){var o,s=[this.x,this.y],l=[this.w,this.h];null!=a&&(a.xmin<0&&(s[0]+=a.xmin),a.ymin<0&&(s[1]+=a.ymin),l[0]=a.xmax+(a.xmin<0?-a.xmin:0),l[1]=a.ymax+(a.ymin<0?-a.ymin:0)),e.useDivWrapper?(n.sizeElement(this.canvas,s[0],s[1],l[0],l[1]),s[0]=0,s[1]=0,o=w([0,0])):o=w([s[0],s[1]]),r.paint.apply(this,arguments),y(this.svg,{style:o,width:l[0]||0,height:l[1]||0})}},{renderer:r}};n.extend(_,t.jsPlumbUIComponent,{cleanup:function(e){e||null==this.typeId?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(e){var t=e.getContainer();this.canvas&&null==this.canvas.parentNode&&t.appendChild(this.canvas),this.bgCanvas&&null==this.bgCanvas.parentNode&&t.appendChild(this.bgCanvas)},setVisible:function(e){this.canvas&&(this.canvas.style.display=e?"block":"none")}}),t.ConnectorRenderers.svg=function(e){var i=this,r=_.apply(this,[{cssClass:e._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:e._jsPlumb}]);r.renderer.paint=function(r,a,o){var s=i.getSegments(),l="",c=[0,0];if(o.xmin<0&&(c[0]=-o.xmin),o.ymin<0&&(c[1]=-o.ymin),s.length>0){for(var u=0;u<s.length;u++)l+=t.Segments.svg.SegmentRenderer.getPath(s[u]),l+=" ";var d={d:l,transform:"translate("+c[0]+","+c[1]+")","pointer-events":e["pointer-events"]||"visibleStroke"},p=null,h=[i.x,i.y,i.w,i.h];if(r.outlineColor){var f=r.outlineWidth||1,g=r.lineWidth+2*f;p=t.extend({},r),delete p.gradient,p.strokeStyle=n.convertStyle(r.outlineColor),p.lineWidth=g,null==i.bgPath?(i.bgPath=b("path",d),S(i.svg,i.bgPath,0)):y(i.bgPath,d),C(i.svg,i.bgPath,p,h,i)}null==i.path?(i.path=b("path",d),S(i.svg,i.path,r.outlineColor?1:0)):y(i.path,d),C(i.svg,i.path,r,h,i)}}},n.extend(t.ConnectorRenderers.svg,_),t.Segments.svg={SegmentRenderer:{getPath:function(e){return{Straight:function(){var t=e.getCoordinates();return"M "+t.x1+" "+t.y1+" L "+t.x2+" "+t.y2},Bezier:function(){var t=e.params;return"M "+t.x1+" "+t.y1+" C "+t.cp1x+" "+t.cp1y+" "+t.cp2x+" "+t.cp2y+" "+t.x2+" "+t.y2},Arc:function(){var t=e.params,n=e.sweep>Math.PI?1:0,i=e.anticlockwise?0:1;return"M"+e.x1+" "+e.y1+" A "+e.radius+" "+t.r+" 0 "+n+","+i+" "+e.x2+" "+e.y2}}[e.type]()}}};var T=t.SvgEndpoint=function(e){var i=_.apply(this,[{cssClass:e._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:e._jsPlumb}]);i.renderer.paint=function(e){var i=t.extend({},e);i.outlineColor&&(i.strokeWidth=i.outlineWidth,i.strokeStyle=n.convertStyle(i.outlineColor,!0)),null==this.node?(this.node=this.makeNode(i),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),C(this.svg,this.node,i,[this.x,this.y,this.w,this.h],this),w(this.node,[this.x,this.y])}.bind(this)};n.extend(T,_),t.Endpoints.svg.Dot=function(){t.Endpoints.Dot.apply(this,arguments),T.apply(this,arguments),this.makeNode=function(e){return b("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(e){y(e,{cx:this.w/2,cy:this.h/2,r:this.radius})}},n.extend(t.Endpoints.svg.Dot,[t.Endpoints.Dot,T]),t.Endpoints.svg.Rectangle=function(){t.Endpoints.Rectangle.apply(this,arguments),T.apply(this,arguments),this.makeNode=function(e){return b("rect",{width:this.w,height:this.h})},this.updateNode=function(e){y(e,{width:this.w,height:this.h})}},n.extend(t.Endpoints.svg.Rectangle,[t.Endpoints.Rectangle,T]),t.Endpoints.svg.Image=t.Endpoints.Image,t.Endpoints.svg.Blank=t.Endpoints.Blank,t.Overlays.svg.Label=t.Overlays.Label,t.Overlays.svg.Custom=t.Overlays.Custom;var $=function(e,n){e.apply(this,n),t.jsPlumbUIComponent.apply(this,n),this.isAppendedAtTopLevel=!1;this.path=null,this.paint=function(e,t){if(e.component.svg&&t){null==this.path&&(this.path=b("path",{"pointer-events":"all"}),e.component.svg.appendChild(this.path),this.canvas=e.component.svg);var r=n&&1==n.length?n[0].cssClass||"":"",a=[0,0];t.xmin<0&&(a[0]=-t.xmin),t.ymin<0&&(a[1]=-t.ymin),y(this.path,{d:i(e.d),"class":r,stroke:e.strokeStyle?e.strokeStyle:null,fill:e.fillStyle?e.fillStyle:null,transform:"translate("+a[0]+","+a[1]+")"})}};var i=function(e){return isNaN(e.cxy.x)||isNaN(e.cxy.y)?"":"M"+e.hxy.x+","+e.hxy.y+" L"+e.tail[0].x+","+e.tail[0].y+" L"+e.cxy.x+","+e.cxy.y+" L"+e.tail[1].x+","+e.tail[1].y+" L"+e.hxy.x+","+e.hxy.y};this.transfer=function(e){e.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),e.canvas.appendChild(this.path))}};n.extend($,[t.jsPlumbUIComponent,t.Overlays.AbstractOverlay],{cleanup:function(e){null!=this.path&&(e?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(e){this.path&&this.canvas&&null==this.path.parentNode&&this.canvas.appendChild(this.path)},setVisible:function(e){null!=this.path&&(this.path.style.display=e?"block":"none")}}),t.Overlays.svg.Arrow=function(){$.apply(this,[t.Overlays.Arrow,arguments])},n.extend(t.Overlays.svg.Arrow,[t.Overlays.Arrow,$]),t.Overlays.svg.PlainArrow=function(){$.apply(this,[t.Overlays.PlainArrow,arguments])},n.extend(t.Overlays.svg.PlainArrow,[t.Overlays.PlainArrow,$]),t.Overlays.svg.Diamond=function(){$.apply(this,[t.Overlays.Diamond,arguments])},n.extend(t.Overlays.svg.Diamond,[t.Overlays.Diamond,$]),t.Overlays.svg.GuideLines=function(){var e,n,i=null,r=this;t.Overlays.GuideLines.apply(this,arguments),this.paint=function(t,o){null==i&&(i=b("path"),t.connector.svg.appendChild(i),r.attachListeners(i,t.connector),r.attachListeners(i,r),e=b("path"),t.connector.svg.appendChild(e),r.attachListeners(e,t.connector),r.attachListeners(e,r),n=b("path"),t.connector.svg.appendChild(n),r.attachListeners(n,t.connector),r.attachListeners(n,r));var s=[0,0];o.xmin<0&&(s[0]=-o.xmin),o.ymin<0&&(s[1]=-o.ymin),y(i,{d:a(t.head,t.tail),stroke:"red",fill:null,transform:"translate("+s[0]+","+s[1]+")"}),y(e,{d:a(t.tailLine[0],t.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+s[0]+","+s[1]+")"}),y(n,{d:a(t.headLine[0],t.headLine[1]),stroke:"green",fill:null,transform:"translate("+s[0]+","+s[1]+")"})};var a=function(e,t){return"M "+e.x+","+e.y+" L"+t.x+","+t.y}},n.extend(t.Overlays.svg.GuideLines,t.Overlays.GuideLines)}.call(this),function(){"use strict";var e=this,t=e.jsPlumb,n=e.jsPlumbUtil,i={"stroke-linejoin":"joinstyle",joinstyle:"joinstyle",endcap:"endcap",miterlimit:"miterlimit"},r=null;if(document.createStyleSheet&&document.namespaces){var a=[".jsplumb_vml","jsplumb\\:textbox","jsplumb\\:oval","jsplumb\\:rect","jsplumb\\:stroke","jsplumb\\:shape","jsplumb\\:group"],o="behavior:url(#default#VML);position:absolute;";r=document.createStyleSheet();for(var s=0;s<a.length;s++)r.addRule(a[s],o);document.namespaces.add("jsplumb","urn:schemas-microsoft-com:vml")}t.vml={};var l=1e3,c=function(e,t){for(var n in t)e[n]=t[n]},u=function(e,t,n,i,r,a){n=n||{};var o=document.createElement("jsplumb:"+e);return a?r.appendElement(o,i):i.appendChild(o),o.className=(n["class"]?n["class"]+" ":"")+"jsplumb_vml",d(o,t),c(o,n),o},d=function(e,t,n){e.style.left=t[0]+"px",e.style.top=t[1]+"px",e.style.width=t[2]+"px",e.style.height=t[3]+"px",e.style.position="absolute",n&&(e.style.zIndex=n)},p=t.vml.convertValue=function(e){return Math.floor(e*l)},h=function(e,t,n,i){"transparent"===t?i.setOpacity(n,"0.0"):i.setOpacity(n,"1.0")},f=function(e,t,i,r){var a={};if(t.strokeStyle){a.stroked="true";var o=n.convertStyle(t.strokeStyle,!0);a.strokecolor=o,h(a,o,"stroke",i),a.strokeweight=t.lineWidth+"px"}else a.stroked="false";if(t.fillStyle){a.filled="true";var s=n.convertStyle(t.fillStyle,!0);a.fillcolor=s,h(a,s,"fill",i)}else a.filled="false";if(t.dashstyle)null==i.strokeNode?i.strokeNode=u("stroke",[0,0,0,0],{dashstyle:t.dashstyle},e,r):i.strokeNode.dashstyle=t.dashstyle;else if(t["stroke-dasharray"]&&t.lineWidth){for(var l=-1==t["stroke-dasharray"].indexOf(",")?" ":",",d=t["stroke-dasharray"].split(l),p="",f=0;f<d.length;f++)p+=Math.floor(d[f]/t.lineWidth)+l;null==i.strokeNode?i.strokeNode=u("stroke",[0,0,0,0],{dashstyle:p},e,r):i.strokeNode.dashstyle=p}c(e,a)},g=function(){var e=this;t.jsPlumbUIComponent.apply(this,arguments),this.opacityNodes={stroke:null,fill:null},this.initOpacityNodes=function(t){e.opacityNodes.stroke=u("stroke",[0,0,1,1],{opacity:"0.0"},t,e._jsPlumb.instance),e.opacityNodes.fill=u("fill",[0,0,1,1],{opacity:"0.0"},t,e._jsPlumb.instance)},this.setOpacity=function(t,n){var i=e.opacityNodes[t];i&&(i.opacity=""+n)};var n=[];this.getDisplayElements=function(){return n},this.appendDisplayElement=function(t,i){i||e.canvas.parentNode.appendChild(t),n.push(t)}};n.extend(g,t.jsPlumbUIComponent,{cleanup:function(){this.bgCanvas&&this.bgCanvas.parentNode.removeChild(this.bgCanvas),this.canvas&&this.canvas.parentNode.removeChild(this.canvas)}});var m=t.ConnectorRenderers.vml=function(e,r){this.strokeNode=null,this.canvas=null,g.apply(this,arguments);var a=this._jsPlumb.instance.connectorClass+(e.cssClass?" "+e.cssClass:"");this.paint=function(o){if(null!==o){this.w=Math.max(this.w,1),this.h=Math.max(this.h,1);for(var s=this.getSegments(),p={path:""},h=[this.x,this.y,this.w,this.h],g=0;g<s.length;g++)p.path+=t.Segments.vml.SegmentRenderer.getPath(s[g]),p.path+=" ";if(o.outlineColor){var m=o.outlineWidth||1,v=o.lineWidth+2*m,y={strokeStyle:n.convertStyle(o.outlineColor),lineWidth:v};for(var b in i)y[b]=o[b];null==this.bgCanvas?(p["class"]=a,p.coordsize=h[2]*l+","+h[3]*l,this.bgCanvas=u("shape",h,p,e.parent,this._jsPlumb.instance,!0),d(this.bgCanvas,h),this.appendDisplayElement(this.bgCanvas,!0),this.initOpacityNodes(this.bgCanvas,["stroke"]),this.bgCanvas._jsPlumb=r):(p.coordsize=h[2]*l+","+h[3]*l,d(this.bgCanvas,h),c(this.bgCanvas,p)),f(this.bgCanvas,y,this)}null==this.canvas?(p["class"]=a,p.coordsize=h[2]*l+","+h[3]*l,this.canvas=u("shape",h,p,e.parent,this._jsPlumb.instance,!0),this.appendDisplayElement(this.canvas,!0),this.initOpacityNodes(this.canvas,["stroke"]),this.canvas._jsPlumb=r):(p.coordsize=h[2]*l+","+h[3]*l,d(this.canvas,h),c(this.canvas,p)),f(this.canvas,o,this,this._jsPlumb.instance)}}};n.extend(m,g,{setVisible:function(e){this.canvas&&(this.canvas.style.display=e?"block":"none"),this.bgCanvas&&(this.bgCanvas.style.display=e?"block":"none")}});var v=t.VmlEndpoint=function(e){g.apply(this,arguments),this._jsPlumb.vml=null,this.canvas=document.createElement("div"),this.canvas.style.position="absolute",this._jsPlumb.clazz=this._jsPlumb.instance.endpointClass+(e.cssClass?" "+e.cssClass:""),e._jsPlumb.appendElement(this.canvas,e.parent),this.paint=function(e,t){var i={},r=this._jsPlumb.vml;n.sizeElement(this.canvas,this.x,this.y,this.w,this.h),null==this._jsPlumb.vml?(i["class"]=this._jsPlumb.clazz,r=this._jsPlumb.vml=this.getVml([0,0,this.w,this.h],i,t,this.canvas,this._jsPlumb.instance),this.appendDisplayElement(r,!0),this.appendDisplayElement(this.canvas,!0),this.initOpacityNodes(r,["fill"])):(d(r,[0,0,this.w,this.h]),c(r,i)),f(r,e,this)}};n.extend(v,g),t.Segments.vml={SegmentRenderer:{getPath:function(e){return{Straight:function(e){var t=e.params;return"m"+p(t.x1)+","+p(t.y1)+" l"+p(t.x2)+","+p(t.y2)+" e"},Bezier:function(e){var t=e.params;return"m"+p(t.x1)+","+p(t.y1)+" c"+p(t.cp1x)+","+p(t.cp1y)+","+p(t.cp2x)+","+p(t.cp2y)+","+p(t.x2)+","+p(t.y2)+" e"},Arc:function(e){var t=e.params,n=Math.min(t.x1,t.x2),i=(Math.max(t.x1,t.x2),Math.min(t.y1,t.y2)),r=(Math.max(t.y1,t.y2),e.anticlockwise?1:0),a=e.anticlockwise?"at ":"wa ",o=function(){if(t.loopback)return"0,0,"+p(2*t.r)+","+p(2*t.r);var a=[null,[function(){return[n,i]},function(){return[n-t.r,i-t.r]}],[function(){return[n-t.r,i]},function(){return[n,i-t.r]}],[function(){return[n-t.r,i-t.r]},function(){return[n,i]}],[function(){return[n,i-t.r]},function(){return[n-t.r,i]}]][e.segment][r]();return p(a[0])+","+p(a[1])+","+p(a[0]+2*t.r)+","+p(a[1]+2*t.r)};return a+" "+o()+","+p(t.x1)+","+p(t.y1)+","+p(t.x2)+","+p(t.y2)+" e"}}[e.type](e)}}},t.Endpoints.vml.Dot=function(){t.Endpoints.Dot.apply(this,arguments),v.apply(this,arguments),this.getVml=function(e,t,n,i,r){return u("oval",e,t,i,r)}},n.extend(t.Endpoints.vml.Dot,v),t.Endpoints.vml.Rectangle=function(){t.Endpoints.Rectangle.apply(this,arguments),v.apply(this,arguments),this.getVml=function(e,t,n,i,r){return u("rect",e,t,i,r)}},n.extend(t.Endpoints.vml.Rectangle,v),t.Endpoints.vml.Image=t.Endpoints.Image,t.Endpoints.vml.Blank=t.Endpoints.Blank,t.Overlays.vml.Label=t.Overlays.Label,t.Overlays.vml.Custom=t.Overlays.Custom;var y=function(e,t){e.apply(this,t),g.apply(this,t);var i=this;this.canvas=null,this.isAppendedAtTopLevel=!0;var r=function(e){return"m "+p(e.hxy.x)+","+p(e.hxy.y)+" l "+p(e.tail[0].x)+","+p(e.tail[0].y)+" "+p(e.cxy.x)+","+p(e.cxy.y)+" "+p(e.tail[1].x)+","+p(e.tail[1].y)+" x e"};this.paint=function(e,a){if(e.component.canvas&&a){var o={},s=e.d,p=e.component;e.strokeStyle&&(o.stroked="true",o.strokecolor=n.convertStyle(e.strokeStyle,!0)),e.lineWidth&&(o.strokeweight=e.lineWidth+"px"),e.fillStyle&&(o.filled="true",o.fillcolor=e.fillStyle);var h=Math.min(s.hxy.x,s.tail[0].x,s.tail[1].x,s.cxy.x),f=Math.min(s.hxy.y,s.tail[0].y,s.tail[1].y,s.cxy.y),g=Math.max(s.hxy.x,s.tail[0].x,s.tail[1].x,s.cxy.x),m=Math.max(s.hxy.y,s.tail[0].y,s.tail[1].y,s.cxy.y),v=Math.abs(g-h),y=Math.abs(m-f),b=[h,f,v,y];if(o.path=r(s),o.coordsize=p.w*l+","+p.h*l,b[0]=p.x,b[1]=p.y,b[2]=p.w,b[3]=p.h,null==i.canvas){var w=p._jsPlumb.overlayClass||"",x=t&&1==t.length?t[0].cssClass||"":"";o["class"]=x+" "+w,i.canvas=u("shape",b,o,p.canvas.parentNode,p._jsPlumb.instance,!0),p.appendDisplayElement(i.canvas,!0)}else d(i.canvas,b),c(i.canvas,o)}},this.cleanup=function(){null!=this.canvas&&this._jsPlumb.instance.removeElement(this.canvas)}};n.extend(y,[g,t.Overlays.AbstractOverlay],{setVisible:function(e){this.canvas.style.display=e?"block":"none"}}),t.Overlays.vml.Arrow=function(){y.apply(this,[t.Overlays.Arrow,arguments])},n.extend(t.Overlays.vml.Arrow,[t.Overlays.Arrow,y]),t.Overlays.vml.PlainArrow=function(){y.apply(this,[t.Overlays.PlainArrow,arguments])},n.extend(t.Overlays.vml.PlainArrow,[t.Overlays.PlainArrow,y]),t.Overlays.vml.Diamond=function(){y.apply(this,[t.Overlays.Diamond,arguments])},n.extend(t.Overlays.vml.Diamond,[t.Overlays.Diamond,y])}.call(this),function(e,t){"use strict";var n=t.jsPlumb,i=t.jsPlumbUtil,r=function(t){return e("string"==typeof t?"#"+t:t)};e.extend(t.jsPlumbInstance.prototype,{animationSupported:!0,getDOMElement:function(e){return null==e?null:"string"==typeof e?document.getElementById(e):e.context||null!=e.length?e[0]:e},removeElement:function(e){r(e).remove()},doAnimate:function(t,n,i){e(t).animate(n,i)},destroyDraggable:function(t){e(t).data("draggable")&&e(t).draggable("destroy")},destroyDroppable:function(t){e(t).data("droppable")&&e(t).droppable("destroy")},initDraggable:function(t,r,a){r=r||{},t=e(t),r.start=i.wrap(r.start,function(){e("body").addClass(this.dragSelectClass)},!1),r.stop=i.wrap(r.stop,function(){e("body").removeClass(this.dragSelectClass)}),r.doNotRemoveHelper||(r.helper=null),"internal"==a&&(r.scope=r.scope||n.Defaults.Scope),t.draggable(r)},initDroppable:function(t,i){i.scope=i.scope||n.Defaults.Scope,e(t).droppable(i)},isAlreadyDraggable:function(t){return e(t).hasClass("ui-draggable")},isDragSupported:function(t,n){return e(t).draggable},isDropSupported:function(t,n){return e(t).droppable},getDragObject:function(e){return e[1].helper||e[1].draggable},getDragScope:function(t){return e(t).draggable("option","scope")},getDropEvent:function(e){return e[0]},getDropScope:function(t){return e(t).droppable("option","scope")},getUIPosition:function(e,t,n){var i;if(t=t||1,1==e.length)i={left:e[0].pageX,top:e[0].pageY};else{var r=e[1],a=r.position;i=a||r.absolutePosition,n||(r.position.left/=t,r.position.top/=t)}return{left:i.left,top:i.top}},setDragFilter:function(t,i){n.isAlreadyDraggable(t)&&e(t).draggable("option","cancel",i)},setElementDraggable:function(t,n){e(t).draggable("option","disabled",!n)},setDragScope:function(t,n){e(t).draggable("option","scope",n)},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete"},animEvents:{step:"step",complete:"complete"},getOriginalEvent:function(e){return e.originalEvent||e},trigger:function(t,n,i){t=this.getDOMElement(t);var r=jQuery._data(e(t)[0],"handle");r(i)}}),e(document).ready(n.init)}(jQuery,this),function(){function e(e){this.tokens=[],this.tokens.links={},this.options=e||c.defaults,this.rules=u.normal,this.options.gfm&&(this.rules=this.options.tables?u.tables:u.gfm)}function t(e,t){if(this.options=t||c.defaults,this.links=e,this.rules=d.normal,this.renderer=this.options.renderer||new n,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?d.breaks:d.gfm:this.options.pedantic&&(this.rules=d.pedantic)}function n(e){this.options=e||{}}function i(e){this.tokens=[],this.token=null,this.options=e||c.defaults,this.options.renderer=this.options.renderer||new n,this.renderer=this.options.renderer,this.renderer.options=this.options}function r(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function a(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?String.fromCharCode("x"===t.charAt(1)?parseInt(t.substring(2),16):+t.substring(1)):""})}function o(e,t){return e=e.source,t=t||"",function n(i,r){return i?(r=r.source||r,r=r.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(i,r),n):new RegExp(e,t)}}function s(){}function l(e){for(var t,n,i=1;i<arguments.length;i++){t=arguments[i];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function c(t,n,a){if(a||"function"==typeof n){a||(a=n,n=null),n=l({},c.defaults,n||{});var o,s,u=n.highlight,d=0;try{o=e.lex(t,n)}catch(p){return a(p)}s=o.length;var h=function(){var e,t;try{e=i.parse(o,n)}catch(r){t=r}return n.highlight=u,t?a(t):a(null,e)};if(!u||u.length<3)return h();if(delete n.highlight,!s)return h();for(;d<o.length;d++)!function(e){return"code"!==e.type?--s||h():u(e.text,e.lang,function(t,n){return null==n||n===e.text?--s||h():(e.text=n,e.escaped=!0,void(--s||h()))})}(o[d])}else try{return n&&(n=l({},c.defaults,n)),i.parse(e.lex(t,n),n)}catch(p){if(p.message+="\nPlease report this to https://github.com/chjj/marked.",(n||c.defaults).silent)return"<p>An error occured:</p><pre>"+r(p.message+"",!0)+"</pre>";throw p}}var u={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:s,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:s,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:s,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};u.bullet=/(?:[*+-]|\d+\.)/,u.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,u.item=o(u.item,"gm")(/bull/g,u.bullet)(),u.list=o(u.list)(/bull/g,u.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+u.def.source+")")(),u.blockquote=o(u.blockquote)("def",u.def)(),u._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",u.html=o(u.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,u._tag)(),u.paragraph=o(u.paragraph)("hr",u.hr)("heading",u.heading)("lheading",u.lheading)("blockquote",u.blockquote)("tag","<"+u._tag)("def",u.def)(),u.normal=l({},u),u.gfm=l({},u.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),u.gfm.paragraph=o(u.paragraph)("(?!","(?!"+u.gfm.fences.source.replace("\\1","\\2")+"|"+u.list.source.replace("\\1","\\3")+"|")(),u.tables=l({},u.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=u,e.lex=function(t,n){var i=new e(n);return i.lex(t)},e.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},e.prototype.token=function(e,t,n){for(var i,r,a,o,s,l,c,d,p,e=e.replace(/^ +$/gm,"");e;)if((a=this.rules.newline.exec(e))&&(e=e.substring(a[0].length),a[0].length>1&&this.tokens.push({type:"space"})),a=this.rules.code.exec(e))e=e.substring(a[0].length),a=a[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?a:a.replace(/\n+$/,"")});else if(a=this.rules.fences.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"code",lang:a[2],text:a[3]});else if(a=this.rules.heading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:a[1].length,text:a[2]});else if(t&&(a=this.rules.nptable.exec(e))){for(e=e.substring(a[0].length),l={type:"table",header:a[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3].replace(/\n$/,"").split("\n")},d=0;d<l.align.length;d++)l.align[d]=/^ *-+: *$/.test(l.align[d])?"right":/^ *:-+: *$/.test(l.align[d])?"center":/^ *:-+ *$/.test(l.align[d])?"left":null;for(d=0;d<l.cells.length;d++)l.cells[d]=l.cells[d].split(/ *\| */);this.tokens.push(l)}else if(a=this.rules.lheading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:"="===a[2]?1:2,text:a[1]});else if(a=this.rules.hr.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"hr"});else if(a=this.rules.blockquote.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"blockquote_start"}),a=a[0].replace(/^ *> ?/gm,""),this.token(a,t,!0),this.tokens.push({type:"blockquote_end"});else if(a=this.rules.list.exec(e)){for(e=e.substring(a[0].length),o=a[2],this.tokens.push({type:"list_start",ordered:o.length>1}),a=a[0].match(this.rules.item),i=!1,p=a.length,d=0;p>d;d++)l=a[d],c=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(c-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&d!==p-1&&(s=u.bullet.exec(a[d+1])[0],o===s||o.length>1&&s.length>1||(e=a.slice(d+1).join("\n")+e,d=p-1)),r=i||/\n\n(?!\s*$)/.test(l),d!==p-1&&(i="\n"===l.charAt(l.length-1),r||(r=i)),this.tokens.push({type:r?"loose_item_start":"list_item_start"}),this.token(l,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(a=this.rules.html.exec(e))e=e.substring(a[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===a[1]||"script"===a[1]||"style"===a[1],text:a[0]});else if(!n&&t&&(a=this.rules.def.exec(e)))e=e.substring(a[0].length),this.tokens.links[a[1].toLowerCase()]={href:a[2],title:a[3]};else if(t&&(a=this.rules.table.exec(e))){for(e=e.substring(a[0].length),l={type:"table",header:a[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3].replace(/(?: *\| *)?\n$/,"").split("\n")},d=0;d<l.align.length;d++)l.align[d]=/^ *-+: *$/.test(l.align[d])?"right":/^ *:-+: *$/.test(l.align[d])?"center":/^ *:-+ *$/.test(l.align[d])?"left":null;for(d=0;d<l.cells.length;d++)l.cells[d]=l.cells[d].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(t&&(a=this.rules.paragraph.exec(e)))e=e.substring(a[0].length),this.tokens.push({type:"paragraph",text:"\n"===a[1].charAt(a[1].length-1)?a[1].slice(0,-1):a[1]});else if(a=this.rules.text.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"text",text:a[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var d={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:s,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:s,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};d._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,d._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,d.link=o(d.link)("inside",d._inside)("href",d._href)(),d.reflink=o(d.reflink)("inside",d._inside)(),d.normal=l({},d),d.pedantic=l({},d.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),d.gfm=l({},d.normal,{escape:o(d.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:o(d.text)("]|","~]|")("|","|https?://|")()}),d.breaks=l({},d.gfm,{br:o(d.br)("{2,}","*")(),text:o(d.gfm.text)("{2,}","*")()}),t.rules=d,t.output=function(e,n,i){var r=new t(n,i);return r.output(e)},t.prototype.output=function(e){for(var t,n,i,a,o="";e;)if(a=this.rules.escape.exec(e))e=e.substring(a[0].length),o+=a[1];else if(a=this.rules.autolink.exec(e))e=e.substring(a[0].length),"@"===a[2]?(n=this.mangle(":"===a[1].charAt(6)?a[1].substring(7):a[1]),i=this.mangle("mailto:")+n):(n=r(a[1]),i=n),o+=this.renderer.link(i,null,n);else if(this.inLink||!(a=this.rules.url.exec(e))){if(a=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(a[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(a[0])&&(this.inLink=!1),e=e.substring(a[0].length),o+=this.options.sanitize?r(a[0]):a[0];else if(a=this.rules.link.exec(e))e=e.substring(a[0].length),this.inLink=!0,o+=this.outputLink(a,{href:a[2],title:a[3]}),this.inLink=!1;else if((a=this.rules.reflink.exec(e))||(a=this.rules.nolink.exec(e))){if(e=e.substring(a[0].length),t=(a[2]||a[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){o+=a[0].charAt(0),e=a[0].substring(1)+e;continue}this.inLink=!0,o+=this.outputLink(a,t),this.inLink=!1}else if(a=this.rules.strong.exec(e))e=e.substring(a[0].length),o+=this.renderer.strong(this.output(a[2]||a[1]));else if(a=this.rules.em.exec(e))e=e.substring(a[0].length),o+=this.renderer.em(this.output(a[2]||a[1]));else if(a=this.rules.code.exec(e))e=e.substring(a[0].length),o+=this.renderer.codespan(r(a[2],!0));else if(a=this.rules.br.exec(e))e=e.substring(a[0].length),o+=this.renderer.br();else if(a=this.rules.del.exec(e))e=e.substring(a[0].length),o+=this.renderer.del(this.output(a[1]));else if(a=this.rules.text.exec(e))e=e.substring(a[0].length),o+=r(this.smartypants(a[0]));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(a[0].length),n=r(a[1]),i=n,o+=this.renderer.link(i,null,n);return o},t.prototype.outputLink=function(e,t){var n=r(t.href),i=t.title?r(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,i,this.output(e[1])):this.renderer.image(n,i,r(e[1]))},t.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"—").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},t.prototype.mangle=function(e){for(var t,n="",i=e.length,r=0;i>r;r++)t=e.charCodeAt(r),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},n.prototype.code=function(e,t,n){if(this.options.highlight){var i=this.options.highlight(e,t);null!=i&&i!==e&&(n=!0,e=i)}return t?'<pre><code class="'+this.options.langPrefix+r(t,!0)+'">'+(n?e:r(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:r(e,!0))+"\n</code></pre>"},n.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},n.prototype.html=function(e){return e},n.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},n.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},n.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},n.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},n.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},n.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},n.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},n.prototype.tablecell=function(e,t){var n=t.header?"th":"td",i=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return i+e+"</"+n+">\n"},n.prototype.strong=function(e){return"<strong>"+e+"</strong>"},n.prototype.em=function(e){return"<em>"+e+"</em>"},n.prototype.codespan=function(e){return"<code>"+e+"</code>"},n.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},n.prototype.del=function(e){return"<del>"+e+"</del>"},n.prototype.link=function(e,t,n){if(this.options.sanitize){try{var i=decodeURIComponent(a(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(r){return""}if(0===i.indexOf("javascript:"))return""}var o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>"},n.prototype.image=function(e,t,n){var i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">"},i.parse=function(e,t,n){var r=new i(t,n);return r.parse(e)},i.prototype.parse=function(e){this.inline=new t(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var n="";this.next();)n+=this.tok();return n;

},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,i,r,a="",o="";for(n="",e=0;e<this.token.header.length;e++)i={header:!0,align:this.token.align[e]},n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(a+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});o+=this.renderer.tablerow(n)}return this.renderer.table(a,o);case"blockquote_start":for(var o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":for(var o="",s=this.token.ordered;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,s);case"list_item_start":for(var o="";"list_item_end"!==this.next().type;)o+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(o);case"loose_item_start":for(var o="";"list_item_end"!==this.next().type;)o+=this.tok();return this.renderer.listitem(o);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},s.exec=s,c.options=c.setOptions=function(e){return l(c.defaults,e),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new n,xhtml:!1},c.Parser=i,c.parser=i.parse,c.Renderer=n,c.Lexer=e,c.lexer=e.lex,c.InlineLexer=t,c.inlineLexer=t.output,c.parse=c,"object"==typeof exports?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):this.marked=c}.call(function(){return this||("undefined"!=typeof window?window:global)}()),!function(){function e(e,t){return t>e?-1:e>t?1:e>=t?0:0/0}function t(e){return null===e?0/0:+e}function n(e){return!isNaN(e)}function i(e){return{left:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);r>i;){var a=i+r>>>1;e(t[a],n)<0?i=a+1:r=a}return i},right:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);r>i;){var a=i+r>>>1;e(t[a],n)>0?r=a:i=a+1}return i}}}function r(e){return e.length}function a(e){for(var t=1;e*t%1;)t*=10;return t}function o(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function s(){this._=Object.create(null)}function l(e){return(e+="")===vo||e[0]===yo?yo+e:e}function c(e){return(e+="")[0]===yo?e.slice(1):e}function u(e){return l(e)in this._}function d(e){return(e=l(e))in this._&&delete this._[e]}function p(){var e=[];for(var t in this._)e.push(c(t));return e}function h(){var e=0;for(var t in this._)++e;return e}function f(){for(var e in this._)return!1;return!0}function g(){this._=Object.create(null)}function m(e,t,n){return function(){var i=n.apply(t,arguments);return i===t?e:i}}function v(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,i=bo.length;i>n;++n){var r=bo[n]+t;if(r in e)return r}}function y(){}function b(){}function w(e){function t(){for(var t,i=n,r=-1,a=i.length;++r<a;)(t=i[r].on)&&t.apply(this,arguments);return e}var n=[],i=new s;return t.on=function(t,r){var a,o=i.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),i.remove(t)),r&&n.push(i.set(t,{on:r})),e)},t}function x(){to.event.preventDefault()}function k(){for(var e,t=to.event;e=t.sourceEvent;)t=e;return t}function C(e){for(var t=new b,n=0,i=arguments.length;++n<i;)t[arguments[n]]=w(t);return t.of=function(n,i){return function(r){try{var a=r.sourceEvent=to.event;r.target=e,to.event=r,t[r.type].apply(n,i)}finally{to.event=a}}},t}function S(e){return xo(e,To),e}function _(e){return"function"==typeof e?e:function(){return ko(e,this)}}function T(e){return"function"==typeof e?e:function(){return Co(e,this)}}function $(e,t){function n(){this.removeAttribute(e)}function i(){this.removeAttributeNS(e.space,e.local)}function r(){this.setAttribute(e,t)}function a(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=to.ns.qualify(e),null==t?e.local?i:n:"function"==typeof t?e.local?s:o:e.local?a:r}function A(e){return e.trim().replace(/\s+/g," ")}function E(e){return new RegExp("(?:^|\\s+)"+to.requote(e)+"(?:\\s+|$)","g")}function P(e){return(e+"").trim().split(/^|\s+/)}function I(e,t){function n(){for(var n=-1;++n<r;)e[n](this,t)}function i(){for(var n=-1,i=t.apply(this,arguments);++n<r;)e[n](this,i)}e=P(e).map(D);var r=e.length;return"function"==typeof t?i:n}function D(e){var t=E(e);return function(n,i){if(r=n.classList)return i?r.add(e):r.remove(e);var r=n.getAttribute("class")||"";i?(t.lastIndex=0,t.test(r)||n.setAttribute("class",A(r+" "+e))):n.setAttribute("class",A(r.replace(t," ")))}}function M(e,t,n){function i(){this.style.removeProperty(e)}function r(){this.style.setProperty(e,t,n)}function a(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}return null==t?i:"function"==typeof t?a:r}function N(e,t){function n(){delete this[e]}function i(){this[e]=t}function r(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?r:i}function j(e){return"function"==typeof e?e:(e=to.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}function O(){var e=this.parentNode;e&&e.removeChild(this)}function L(e){return{__data__:e}}function R(e){return function(){return _o(this,e)}}function F(t){return arguments.length||(t=e),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function U(e,t){for(var n=0,i=e.length;i>n;n++)for(var r,a=e[n],o=0,s=a.length;s>o;o++)(r=a[o])&&t(r,o,n);return e}function z(e){return xo(e,Ao),e}function q(e){var t,n;return function(i,r,a){var o,s=e[a].update,l=s.length;for(a!=n&&(n=a,t=0),r>=t&&(t=r+1);!(o=s[t])&&++t<l;);return o}}function B(e,t,n){function i(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function r(){var r=l(t,io(arguments));i.call(this),this.addEventListener(e,this[o]=r,r.$=n),r._=t}function a(){var t,n=new RegExp("^__on([^.]+)"+to.requote(e)+"$");for(var i in this)if(t=i.match(n)){var r=this[i];this.removeEventListener(t[1],r,r.$),delete this[i]}}var o="__on"+e,s=e.indexOf("."),l=H;s>0&&(e=e.slice(0,s));var c=Po.get(e);return c&&(e=c,l=V),s?t?r:i:t?y:a}function H(e,t){return function(n){var i=to.event;to.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{to.event=i}}}function V(e,t){var n=H(e,t);return function(e){var t=this,i=e.relatedTarget;i&&(i===t||8&i.compareDocumentPosition(t))||n.call(t,e)}}function W(){var e=".dragsuppress-"+ ++Do,t="click"+e,n=to.select(oo).on("touchmove"+e,x).on("dragstart"+e,x).on("selectstart"+e,x);if(Io){var i=ao.style,r=i[Io];i[Io]="none"}return function(a){if(n.on(e,null),Io&&(i[Io]=r),a){var o=function(){n.on(t,null)};n.on(t,function(){x(),o()},!0),setTimeout(o,0)}}}function G(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>Mo&&(oo.scrollX||oo.scrollY)){n=to.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var r=n[0][0].getScreenCTM();Mo=!(r.f||r.e),n.remove()}return Mo?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}function K(){return to.event.changedTouches[0].identifier}function X(){return to.event.target}function Y(){return oo}function J(e){return e>0?1:0>e?-1:0}function Q(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Z(e){return e>1?0:-1>e?Oo:Math.acos(e)}function ee(e){return e>1?Fo:-1>e?-Fo:Math.asin(e)}function te(e){return((e=Math.exp(e))-1/e)/2}function ne(e){return((e=Math.exp(e))+1/e)/2}function ie(e){return((e=Math.exp(2*e))-1)/(e+1)}function re(e){return(e=Math.sin(e/2))*e}function ae(){}function oe(e,t,n){return this instanceof oe?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof oe?new oe(e.h,e.s,e.l):we(""+e,xe,oe):new oe(e,t,n)}function se(e,t,n){function i(e){return e>360?e-=360:0>e&&(e+=360),60>e?a+(o-a)*e/60:180>e?o:240>e?a+(o-a)*(240-e)/60:a}function r(e){return Math.round(255*i(e))}var a,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,a=2*n-o,new me(r(e+120),r(e),r(e-120))}function le(e,t,n){return this instanceof le?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof le?new le(e.h,e.c,e.l):e instanceof ue?pe(e.l,e.a,e.b):pe((e=ke((e=to.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new le(e,t,n)}function ce(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new ue(n,Math.cos(e*=Uo)*t,Math.sin(e)*t)}function ue(e,t,n){return this instanceof ue?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof ue?new ue(e.l,e.a,e.b):e instanceof le?ce(e.h,e.c,e.l):ke((e=me(e)).r,e.g,e.b):new ue(e,t,n)}function de(e,t,n){var i=(e+16)/116,r=i+t/500,a=i-n/200;return r=he(r)*Jo,i=he(i)*Qo,a=he(a)*Zo,new me(ge(3.2404542*r-1.5371385*i-.4985314*a),ge(-.969266*r+1.8760108*i+.041556*a),ge(.0556434*r-.2040259*i+1.0572252*a))}function pe(e,t,n){return e>0?new le(Math.atan2(n,t)*zo,Math.sqrt(t*t+n*n),e):new le(0/0,0/0,e)}function he(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function fe(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ge(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function me(e,t,n){return this instanceof me?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof me?new me(e.r,e.g,e.b):we(""+e,me,se):new me(e,t,n)}function ve(e){return new me(e>>16,e>>8&255,255&e)}function ye(e){return ve(e)+""}function be(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function we(e,t,n){var i,r,a,o=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(e))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(Se(r[0]),Se(r[1]),Se(r[2]))}return(a=ns.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o=o>>4|o,s=240&a,s=s>>4|s,l=15&a,l=l<<4|l):7===e.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),t(o,s,l))}function xe(e,t,n){var i,r,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,l=(o+a)/2;return s?(r=.5>l?s/(o+a):s/(2-o-a),i=e==o?(t-n)/s+(n>t?6:0):t==o?(n-e)/s+2:(e-t)/s+4,i*=60):(i=0/0,r=l>0&&1>l?0:i),new oe(i,r,l)}function ke(e,t,n){e=Ce(e),t=Ce(t),n=Ce(n);var i=fe((.4124564*e+.3575761*t+.1804375*n)/Jo),r=fe((.2126729*e+.7151522*t+.072175*n)/Qo),a=fe((.0193339*e+.119192*t+.9503041*n)/Zo);return ue(116*r-16,500*(i-r),200*(r-a))}function Ce(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Se(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function _e(e){return"function"==typeof e?e:function(){return e}}function Te(e){return e}function $e(e){return function(t,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),Ae(t,n,e,i)}}function Ae(e,t,n,i){function r(){var e,t=l.status;if(!t&&Pe(l)||t>=200&&300>t||304===t){try{e=n.call(a,l)}catch(i){return void o.error.call(a,i)}o.load.call(a,e)}else o.error.call(a,l)}var a={},o=to.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,c=null;return!oo.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(e){var t=to.event;to.event=e;try{o.progress.call(a,l)}finally{to.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",a):t},a.responseType=function(e){return arguments.length?(c=e,a):c},a.response=function(e){return n=e,a},["get","post"].forEach(function(e){a[e]=function(){return a.send.apply(a,[e].concat(io(arguments)))}}),a.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),l.setRequestHeader)for(var u in s)l.setRequestHeader(u,s[u]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=r&&a.on("error",r).on("load",function(e){r(null,e)}),o.beforesend.call(a,l),l.send(null==i?null:i),a},a.abort=function(){return l.abort(),a},to.rebind(a,o,"on"),null==i?a:a.get(Ee(i))}function Ee(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Pe(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Ie(){var e=De(),t=Me()-e;t>24?(isFinite(t)&&(clearTimeout(os),os=setTimeout(Ie,t)),as=0):(as=1,ls(Ie))}function De(){var e=Date.now();for(ss=is;ss;)e>=ss.t&&(ss.f=ss.c(e-ss.t)),ss=ss.n;return e}function Me(){for(var e,t=is,n=1/0;t;)t.f?t=e?e.n=t.n:is=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return rs=e,n}function Ne(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function je(e,t){var n=Math.pow(10,3*mo(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Oe(e){var t=e.decimal,n=e.thousands,i=e.grouping,r=e.currency,a=i&&n?function(e,t){for(var r=e.length,a=[],o=0,s=i[0],l=0;r>0&&s>0&&(l+s+1>t&&(s=Math.max(1,t-l)),a.push(e.substring(r-=s,r+s)),!((l+=s+1)>t));)s=i[o=(o+1)%i.length];return a.reverse().join(n)}:Te;return function(e){var n=us.exec(e),i=n[1]||" ",o=n[2]||">",s=n[3]||"-",l=n[4]||"",c=n[5],u=+n[6],d=n[7],p=n[8],h=n[9],f=1,g="",m="",v=!1,y=!0;switch(p&&(p=+p.substring(1)),(c||"0"===i&&"="===o)&&(c=i="0",o="="),h){case"n":d=!0,h="g";break;case"%":f=100,m="%",h="f";break;case"p":f=100,m="%",h="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+h.toLowerCase());case"c":y=!1;case"d":v=!0,p=0;break;case"s":f=-1,h="r"}"$"===l&&(g=r[0],m=r[1]),"r"!=h||p||(h="g"),null!=p&&("g"==h?p=Math.max(1,Math.min(21,p)):("e"==h||"f"==h)&&(p=Math.max(0,Math.min(20,p)))),h=ds.get(h)||Le;var b=c&&d;return function(e){var n=m;if(v&&e%1)return"";var r=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===s?"":s;if(0>f){var l=to.formatPrefix(e,p);e=l.scale(e),n=l.symbol+m}else e*=f;e=h(e,p);var w,x,k=e.lastIndexOf(".");if(0>k){var C=y?e.lastIndexOf("e"):-1;0>C?(w=e,x=""):(w=e.substring(0,C),x=e.substring(C))}else w=e.substring(0,k),x=t+e.substring(k+1);!c&&d&&(w=a(w,1/0));var S=g.length+w.length+x.length+(b?0:r.length),_=u>S?new Array(S=u-S+1).join(i):"";return b&&(w=a(_+w,_.length?u-x.length:1/0)),r+=g,e=w+x,("<"===o?r+e+_:">"===o?_+r+e:"^"===o?_.substring(0,S>>=1)+r+e+_.substring(S):r+(b?e:_+e))+n}}}function Le(e){return e+""}function Re(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Fe(e,t,n){function i(t){var n=e(t),i=a(n,1);return i-t>t-n?n:i}function r(n){return t(n=e(new hs(n-1)),1),n}function a(e,n){return t(e=new hs(+e),n),e}function o(e,i,a){var o=r(e),s=[];if(a>1)for(;i>o;)n(o)%a||s.push(new Date(+o)),t(o,1);else for(;i>o;)s.push(new Date(+o)),t(o,1);return s}function s(e,t,n){try{hs=Re;var i=new Re;return i._=e,o(i,t,n)}finally{hs=Date}}e.floor=e,e.round=i,e.ceil=r,e.offset=a,e.range=o;var l=e.utc=Ue(e);return l.floor=l,l.round=Ue(i),l.ceil=Ue(r),l.offset=Ue(a),l.range=s,e}function Ue(e){return function(t,n){try{hs=Re;var i=new Re;return i._=t,e(i,n)._}finally{hs=Date}}}function ze(e){function t(e){function t(t){for(var n,r,a,o=[],s=-1,l=0;++s<i;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(r=gs[n=e.charAt(++s)])&&(n=e.charAt(++s)),(a=A[n])&&(n=a(t,null==r?"e"===n?" ":"0":r)),o.push(n),l=s+1);return o.push(e.slice(l,s)),o.join("")}var i=e.length;return t.parse=function(t){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=n(i,e,t,0);if(r!=t.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var a=null!=i.Z&&hs!==Re,o=new(a?Re:hs);return"j"in i?o.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(o.setFullYear(i.y,0,1),o.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(o.getDay()+5)%7:i.w+7*i.U-(o.getDay()+6)%7)):o.setFullYear(i.y,i.m,i.d),o.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),a?o._:o},t.toString=function(){return e},t}function n(e,t,n,i){for(var r,a,o,s=0,l=t.length,c=n.length;l>s;){if(i>=c)return-1;if(r=t.charCodeAt(s++),37===r){if(o=t.charAt(s++),a=E[o in gs?t.charAt(s++):o],!a||(i=a(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function i(e,t,n){k.lastIndex=0;var i=k.exec(t.slice(n));return i?(e.w=C.get(i[0].toLowerCase()),n+i[0].length):-1}function r(e,t,n){w.lastIndex=0;var i=w.exec(t.slice(n));return i?(e.w=x.get(i[0].toLowerCase()),n+i[0].length):-1}function a(e,t,n){T.lastIndex=0;var i=T.exec(t.slice(n));return i?(e.m=$.get(i[0].toLowerCase()),n+i[0].length):-1}function o(e,t,n){S.lastIndex=0;var i=S.exec(t.slice(n));return i?(e.m=_.get(i[0].toLowerCase()),n+i[0].length):-1}function s(e,t,i){return n(e,A.c.toString(),t,i)}function l(e,t,i){return n(e,A.x.toString(),t,i)}function c(e,t,i){return n(e,A.X.toString(),t,i)}function u(e,t,n){var i=b.get(t.slice(n,n+=2).toLowerCase());return null==i?-1:(e.p=i,n)}var d=e.dateTime,p=e.date,h=e.time,f=e.periods,g=e.days,m=e.shortDays,v=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{hs=Re;var t=new hs;return t._=e,i(t)}finally{hs=Date}}var i=t(e);return n.parse=function(e){try{hs=Re;var t=i.parse(e);return t&&t._}finally{hs=Date}},n.toString=i.toString,n},t.multi=t.utc.multi=st;var b=to.map(),w=Be(g),x=He(g),k=Be(m),C=He(m),S=Be(v),_=He(v),T=Be(y),$=He(y);f.forEach(function(e,t){b.set(e.toLowerCase(),t)});var A={a:function(e){return m[e.getDay()]},A:function(e){return g[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return v[e.getMonth()]},c:t(d),d:function(e,t){return qe(e.getDate(),t,2)},e:function(e,t){return qe(e.getDate(),t,2)},H:function(e,t){return qe(e.getHours(),t,2)},I:function(e,t){return qe(e.getHours()%12||12,t,2)},j:function(e,t){return qe(1+ps.dayOfYear(e),t,3)},L:function(e,t){return qe(e.getMilliseconds(),t,3)},m:function(e,t){return qe(e.getMonth()+1,t,2)},M:function(e,t){return qe(e.getMinutes(),t,2)},p:function(e){return f[+(e.getHours()>=12)]},S:function(e,t){return qe(e.getSeconds(),t,2)},U:function(e,t){return qe(ps.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return qe(ps.mondayOfYear(e),t,2)},x:t(p),X:t(h),y:function(e,t){return qe(e.getFullYear()%100,t,2)},Y:function(e,t){return qe(e.getFullYear()%1e4,t,4)},Z:at,"%":function(){return"%"}},E={a:i,A:r,b:a,B:o,c:s,d:Ze,e:Ze,H:tt,I:tt,j:et,L:rt,m:Qe,M:nt,p:u,S:it,U:We,w:Ve,W:Ge,x:l,X:c,y:Xe,Y:Ke,Z:Ye,"%":ot};return t}function qe(e,t,n){var i=0>e?"-":"",r=(i?-e:e)+"",a=r.length;return i+(n>a?new Array(n-a+1).join(t)+r:r)}function Be(e){return new RegExp("^(?:"+e.map(to.requote).join("|")+")","i")}function He(e){for(var t=new s,n=-1,i=e.length;++n<i;)t.set(e[n].toLowerCase(),n);return t}function Ve(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function We(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n));return i?(e.U=+i[0],n+i[0].length):-1}function Ge(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n));return i?(e.W=+i[0],n+i[0].length):-1}function Ke(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Xe(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.y=Je(+i[0]),n+i[0].length):-1}function Ye(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Je(e){return e+(e>68?1900:2e3)}function Qe(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function Ze(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function et(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+3));return i?(e.j=+i[0],n+i[0].length):-1}function tt(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function nt(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function it(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function rt(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function at(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",i=mo(t)/60|0,r=mo(t)%60;return n+qe(i,"0",2)+qe(r,"0",2)}function ot(e,t,n){vs.lastIndex=0;var i=vs.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function st(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,i=e[n];!i[1](t);)i=e[++n];return i[0](t)}}function lt(){}function ct(e,t,n){var i=n.s=e+t,r=i-e,a=i-r;n.t=e-a+(t-r)}function ut(e,t){e&&xs.hasOwnProperty(e.type)&&xs[e.type](e,t)}function dt(e,t,n){var i,r=-1,a=e.length-n;for(t.lineStart();++r<a;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function pt(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)dt(e[n],t,1);t.polygonEnd()}function ht(){function e(e,t){e*=Uo,t=t*Uo/2+Oo/4;var n=e-i,o=n>=0?1:-1,s=o*n,l=Math.cos(t),c=Math.sin(t),u=a*c,d=r*l+u*Math.cos(s),p=u*o*Math.sin(s);Cs.add(Math.atan2(p,d)),i=e,r=l,a=c}var t,n,i,r,a;Ss.point=function(o,s){Ss.point=e,i=(t=o)*Uo,r=Math.cos(s=(n=s)*Uo/2+Oo/4),a=Math.sin(s)},Ss.lineEnd=function(){e(t,n)}}function ft(e){var t=e[0],n=e[1],i=Math.cos(n);return[i*Math.cos(t),i*Math.sin(t),Math.sin(n)]}function gt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function mt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function vt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function yt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function bt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function wt(e){return[Math.atan2(e[1],e[0]),ee(e[2])]}function xt(e,t){return mo(e[0]-t[0])<No&&mo(e[1]-t[1])<No}function kt(e,t){e*=Uo;var n=Math.cos(t*=Uo);Ct(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Ct(e,t,n){++_s,$s+=(e-$s)/_s,As+=(t-As)/_s,Es+=(n-Es)/_s}function St(){function e(e,r){e*=Uo;var a=Math.cos(r*=Uo),o=a*Math.cos(e),s=a*Math.sin(e),l=Math.sin(r),c=Math.atan2(Math.sqrt((c=n*l-i*s)*c+(c=i*o-t*l)*c+(c=t*s-n*o)*c),t*o+n*s+i*l);Ts+=c,Ps+=c*(t+(t=o)),Is+=c*(n+(n=s)),Ds+=c*(i+(i=l)),Ct(t,n,i)}var t,n,i;Os.point=function(r,a){r*=Uo;var o=Math.cos(a*=Uo);t=o*Math.cos(r),n=o*Math.sin(r),i=Math.sin(a),Os.point=e,Ct(t,n,i)}}function _t(){Os.point=kt}function Tt(){function e(e,t){e*=Uo;var n=Math.cos(t*=Uo),o=n*Math.cos(e),s=n*Math.sin(e),l=Math.sin(t),c=r*l-a*s,u=a*o-i*l,d=i*s-r*o,p=Math.sqrt(c*c+u*u+d*d),h=i*o+r*s+a*l,f=p&&-Z(h)/p,g=Math.atan2(p,h);Ms+=f*c,Ns+=f*u,js+=f*d,Ts+=g,Ps+=g*(i+(i=o)),Is+=g*(r+(r=s)),Ds+=g*(a+(a=l)),Ct(i,r,a)}var t,n,i,r,a;Os.point=function(o,s){t=o,n=s,Os.point=e,o*=Uo;var l=Math.cos(s*=Uo);i=l*Math.cos(o),r=l*Math.sin(o),a=Math.sin(s),Ct(i,r,a)},Os.lineEnd=function(){e(t,n),Os.lineEnd=_t,Os.point=kt}}function $t(e,t){function n(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),n}function At(){return!0}function Et(e,t,n,i,r){var a=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],i=e[t];if(xt(n,i)){r.lineStart();for(var s=0;t>s;++s)r.point((n=e[s])[0],n[1]);return void r.lineEnd()}var l=new It(n,e,null,!0),c=new It(n,null,l,!1);l.o=c,a.push(l),o.push(c),l=new It(i,e,null,!1),c=new It(i,null,l,!0),l.o=c,a.push(l),o.push(c)}}),o.sort(t),Pt(a),Pt(o),a.length){for(var s=0,l=n,c=o.length;c>s;++s)o[s].e=l=!l;for(var u,d,p=a[0];;){for(var h=p,f=!0;h.v;)if((h=h.n)===p)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(var s=0,c=u.length;c>s;++s)r.point((d=u[s])[0],d[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(f){u=h.p.z;for(var s=u.length-1;s>=0;--s)r.point((d=u[s])[0],d[1])}else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,u=h.z,f=!f}while(!h.v);r.lineEnd()}}}function Pt(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}function It(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Dt(e,t,n,i){return function(r,a){function o(t,n){var i=r(t,n);e(t=i[0],n=i[1])&&a.point(t,n)}function s(e,t){var n=r(e,t);m.point(n[0],n[1])}function l(){y.point=s,m.lineStart()}function c(){y.point=o,m.lineEnd()}function u(e,t){g.push([e,t]);var n=r(e,t);w.point(n[0],n[1])}function d(){w.lineStart(),g=[]}function p(){u(g[0][0],g[0][1]),w.lineEnd();var e,t=w.clean(),n=b.buffer(),i=n.length;if(g.pop(),f.push(g),g=null,i)if(1&t){e=n[0];var r,i=e.length-1,o=-1;if(i>0){for(x||(a.polygonStart(),x=!0),a.lineStart();++o<i;)a.point((r=e[o])[0],r[1]);a.lineEnd()}}else i>1&&2&t&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Mt))}var h,f,g,m=t(a),v=r.invert(i[0],i[1]),y={point:o,lineStart:l,lineEnd:c,polygonStart:function(){y.point=u,y.lineStart=d,y.lineEnd=p,h=[],f=[]},polygonEnd:function(){y.point=o,y.lineStart=l,y.lineEnd=c,h=to.merge(h);var e=Ft(v,f);h.length?(x||(a.polygonStart(),x=!0),Et(h,jt,e,n,a)):e&&(x||(a.polygonStart(),x=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),x&&(a.polygonEnd(),x=!1),h=f=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},b=Nt(),w=t(b),x=!1;return y}}function Mt(e){return e.length>1}function Nt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:y,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function jt(e,t){return((e=e.x)[0]<0?e[1]-Fo-No:Fo-e[1])-((t=t.x)[0]<0?t[1]-Fo-No:Fo-t[1])}function Ot(e){var t,n=0/0,i=0/0,r=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s=a>0?Oo:-Oo,l=mo(a-n);mo(l-Oo)<No?(e.point(n,i=(i+o)/2>0?Fo:-Fo),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),e.point(a,i),t=0):r!==s&&l>=Oo&&(mo(n-r)<No&&(n-=r*No),mo(a-s)<No&&(a-=s*No),i=Lt(n,i,a,o),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),t=0),e.point(n=a,i=o),r=s},lineEnd:function(){e.lineEnd(),n=i=0/0},clean:function(){return 2-t}}}function Lt(e,t,n,i){var r,a,o=Math.sin(e-n);return mo(o)>No?Math.atan((Math.sin(t)*(a=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(t))*Math.sin(e))/(r*a*o)):(t+i)/2}function Rt(e,t,n,i){var r;if(null==e)r=n*Fo,i.point(-Oo,r),i.point(0,r),i.point(Oo,r),i.point(Oo,0),i.point(Oo,-r),i.point(0,-r),i.point(-Oo,-r),i.point(-Oo,0),i.point(-Oo,r);else if(mo(e[0]-t[0])>No){var a=e[0]<t[0]?Oo:-Oo;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Ft(e,t){var n=e[0],i=e[1],r=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Cs.reset();for(var s=0,l=t.length;l>s;++s){var c=t[s],u=c.length;if(u)for(var d=c[0],p=d[0],h=d[1]/2+Oo/4,f=Math.sin(h),g=Math.cos(h),m=1;;){m===u&&(m=0),e=c[m];var v=e[0],y=e[1]/2+Oo/4,b=Math.sin(y),w=Math.cos(y),x=v-p,k=x>=0?1:-1,C=k*x,S=C>Oo,_=f*b;if(Cs.add(Math.atan2(_*k*Math.sin(C),g*w+_*Math.cos(C))),a+=S?x+k*Lo:x,S^p>=n^v>=n){var T=mt(ft(d),ft(e));bt(T);var $=mt(r,T);bt($);var A=(S^x>=0?-1:1)*ee($[2]);(i>A||i===A&&(T[0]||T[1]))&&(o+=S^x>=0?1:-1)}if(!m++)break;p=v,f=b,g=w,d=e}}return(-No>a||No>a&&0>Cs)^1&o}function Ut(e){function t(e,t){return Math.cos(e)*Math.cos(t)>a}function n(e){var n,a,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(d,p){var h,f=[d,p],g=t(d,p),m=o?g?0:r(d,p):g?r(d+(0>d?Oo:-Oo),p):0;if(!n&&(c=l=g)&&e.lineStart(),g!==l&&(h=i(n,f),(xt(n,h)||xt(f,h))&&(f[0]+=No,f[1]+=No,g=t(f[0],f[1]))),g!==l)u=0,g?(e.lineStart(),h=i(f,n),e.point(h[0],h[1])):(h=i(n,f),e.point(h[0],h[1]),e.lineEnd()),n=h;else if(s&&n&&o^g){var v;m&a||!(v=i(f,n,!0))||(u=0,o?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||n&&xt(n,f)||e.point(f[0],f[1]),n=f,l=g,a=m},lineEnd:function(){l&&e.lineEnd(),n=null},clean:function(){return u|(c&&l)<<1}}}function i(e,t,n){var i=ft(e),r=ft(t),o=[1,0,0],s=mt(i,r),l=gt(s,s),c=s[0],u=l-c*c;if(!u)return!n&&e;var d=a*l/u,p=-a*c/u,h=mt(o,s),f=yt(o,d),g=yt(s,p);vt(f,g);var m=h,v=gt(f,m),y=gt(m,m),b=v*v-y*(gt(f,f)-1);if(!(0>b)){var w=Math.sqrt(b),x=yt(m,(-v-w)/y);if(vt(x,f),x=wt(x),!n)return x;var k,C=e[0],S=t[0],_=e[1],T=t[1];C>S&&(k=C,C=S,S=k);var $=S-C,A=mo($-Oo)<No,E=A||No>$;if(!A&&_>T&&(k=_,_=T,T=k),E?A?_+T>0^x[1]<(mo(x[0]-C)<No?_:T):_<=x[1]&&x[1]<=T:$>Oo^(C<=x[0]&&x[0]<=S)){var P=yt(m,(-v+w)/y);return vt(P,f),[x,wt(P)]}}}function r(t,n){var i=o?e:Oo-e,r=0;return-i>t?r|=1:t>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var a=Math.cos(e),o=a>0,s=mo(a)>No,l=fn(e,6*Uo);return Dt(t,n,l,o?[0,-e]:[-Oo,e-Oo])}function zt(e,t,n,i){return function(r){var a,o=r.a,s=r.b,l=o.x,c=o.y,u=s.x,d=s.y,p=0,h=1,f=u-l,g=d-c;if(a=e-l,f||!(a>0)){if(a/=f,0>f){if(p>a)return;h>a&&(h=a)}else if(f>0){if(a>h)return;a>p&&(p=a)}if(a=n-l,f||!(0>a)){if(a/=f,0>f){if(a>h)return;a>p&&(p=a)}else if(f>0){if(p>a)return;h>a&&(h=a)}if(a=t-c,g||!(a>0)){if(a/=g,0>g){if(p>a)return;h>a&&(h=a)}else if(g>0){if(a>h)return;a>p&&(p=a)}if(a=i-c,g||!(0>a)){if(a/=g,0>g){if(a>h)return;a>p&&(p=a)}else if(g>0){if(p>a)return;h>a&&(h=a)}return p>0&&(r.a={x:l+p*f,y:c+p*g}),1>h&&(r.b={x:l+h*f,y:c+h*g}),r}}}}}}function qt(e,t,n,i){function r(i,r){return mo(i[0]-e)<No?r>0?0:3:mo(i[0]-n)<No?r>0?2:1:mo(i[1]-t)<No?r>0?1:0:r>0?3:2}function a(e,t){return o(e.x,t.x)}function o(e,t){var n=r(e,1),i=r(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function l(e){for(var t=0,n=m.length,i=e[1],r=0;n>r;++r)for(var a,o=1,s=m[r],l=s.length,c=s[0];l>o;++o)a=s[o],c[1]<=i?a[1]>i&&Q(c,a,e)>0&&++t:a[1]<=i&&Q(c,a,e)<0&&--t,c=a;return 0!==t}function c(a,s,l,c){var u=0,d=0;if(null==a||(u=r(a,l))!==(d=r(s,l))||o(a,s)<0^l>0){do c.point(0===u||3===u?e:n,u>1?i:t);while((u=(u+l+4)%4)!==d)}else c.point(s[0],s[1])}function u(r,a){return r>=e&&n>=r&&a>=t&&i>=a}function d(e,t){u(e,t)&&s.point(e,t)}function p(){E.point=f,m&&m.push(v=[]),S=!0,C=!1,x=k=0/0}function h(){g&&(f(y,b),w&&C&&$.rejoin(),g.push($.buffer())),E.point=d,C&&s.lineEnd()}function f(e,t){e=Math.max(-Rs,Math.min(Rs,e)),t=Math.max(-Rs,Math.min(Rs,t));var n=u(e,t);if(m&&v.push([e,t]),S)y=e,b=t,w=n,S=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&C)s.point(e,t);else{var i={a:{x:x,y:k},b:{x:e,y:t}};A(i)?(C||(s.lineStart(),s.point(i.a.x,i.a.y)),s.point(i.b.x,i.b.y),n||s.lineEnd(),_=!1):n&&(s.lineStart(),s.point(e,t),_=!1)}x=e,k=t,C=n}var g,m,v,y,b,w,x,k,C,S,_,T=s,$=Nt(),A=zt(e,t,n,i),E={point:d,lineStart:p,lineEnd:h,polygonStart:function(){s=$,g=[],m=[],_=!0},polygonEnd:function(){s=T,g=to.merge(g);var t=l([e,i]),n=_&&t,r=g.length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),c(null,null,1,s),s.lineEnd()),r&&Et(g,a,t,c,s),s.polygonEnd()),g=m=v=null}};return E}}function Bt(e){var t=0,n=Oo/3,i=on(e),r=i(t,n);return r.parallels=function(e){return arguments.length?i(t=e[0]*Oo/180,n=e[1]*Oo/180):[t/Oo*180,n/Oo*180]},r}function Ht(e,t){function n(e,t){var n=Math.sqrt(a-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),o-n*Math.cos(e)]}var i=Math.sin(e),r=(i+Math.sin(t))/2,a=1+i*(2*r-i),o=Math.sqrt(a)/r;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/r,ee((a-(e*e+n*n)*r*r)/(2*r))];

},n}function Vt(){function e(e,t){Us+=r*e-i*t,i=e,r=t}var t,n,i,r;Vs.point=function(a,o){Vs.point=e,t=i=a,n=r=o},Vs.lineEnd=function(){e(t,n)}}function Wt(e,t){zs>e&&(zs=e),e>Bs&&(Bs=e),qs>t&&(qs=t),t>Hs&&(Hs=t)}function Gt(){function e(e,t){o.push("M",e,",",t,a)}function t(e,t){o.push("M",e,",",t),s.point=n}function n(e,t){o.push("L",e,",",t)}function i(){s.point=e}function r(){o.push("Z")}var a=Kt(4.5),o=[],s={point:e,lineStart:function(){s.point=t},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(e){return a=Kt(e),s},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return s}function Kt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Xt(e,t){$s+=e,As+=t,++Es}function Yt(){function e(e,i){var r=e-t,a=i-n,o=Math.sqrt(r*r+a*a);Ps+=o*(t+e)/2,Is+=o*(n+i)/2,Ds+=o,Xt(t=e,n=i)}var t,n;Gs.point=function(i,r){Gs.point=e,Xt(t=i,n=r)}}function Jt(){Gs.point=Xt}function Qt(){function e(e,t){var n=e-i,a=t-r,o=Math.sqrt(n*n+a*a);Ps+=o*(i+e)/2,Is+=o*(r+t)/2,Ds+=o,o=r*e-i*t,Ms+=o*(i+e),Ns+=o*(r+t),js+=3*o,Xt(i=e,r=t)}var t,n,i,r;Gs.point=function(a,o){Gs.point=e,Xt(t=i=a,n=r=o)},Gs.lineEnd=function(){e(t,n)}}function Zt(e){function t(t,n){e.moveTo(t+o,n),e.arc(t,n,o,0,Lo)}function n(t,n){e.moveTo(t,n),s.point=i}function i(t,n){e.lineTo(t,n)}function r(){s.point=t}function a(){e.closePath()}var o=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(e){return o=e,s},result:y};return s}function en(e){function t(e){return(s?i:n)(e)}function n(t){return rn(t,function(n,i){n=e(n,i),t.point(n[0],n[1])})}function i(t){function n(n,i){n=e(n,i),t.point(n[0],n[1])}function i(){b=0/0,S.point=a,t.lineStart()}function a(n,i){var a=ft([n,i]),o=e(n,i);r(b,w,y,x,k,C,b=o[0],w=o[1],y=n,x=a[0],k=a[1],C=a[2],s,t),t.point(b,w)}function o(){S.point=n,t.lineEnd()}function l(){i(),S.point=c,S.lineEnd=u}function c(e,t){a(d=e,p=t),h=b,f=w,g=x,m=k,v=C,S.point=a}function u(){r(b,w,y,x,k,C,h,f,d,g,m,v,s,t),S.lineEnd=o,o()}var d,p,h,f,g,m,v,y,b,w,x,k,C,S={point:n,lineStart:i,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=l},polygonEnd:function(){t.polygonEnd(),S.lineStart=i}};return S}function r(t,n,i,s,l,c,u,d,p,h,f,g,m,v){var y=u-t,b=d-n,w=y*y+b*b;if(w>4*a&&m--){var x=s+h,k=l+f,C=c+g,S=Math.sqrt(x*x+k*k+C*C),_=Math.asin(C/=S),T=mo(mo(C)-1)<No||mo(i-p)<No?(i+p)/2:Math.atan2(k,x),$=e(T,_),A=$[0],E=$[1],P=A-t,I=E-n,D=b*P-y*I;(D*D/w>a||mo((y*P+b*I)/w-.5)>.3||o>s*h+l*f+c*g)&&(r(t,n,i,s,l,c,A,E,T,x/=S,k/=S,C,m,v),v.point(A,E),r(A,E,T,x,k,C,u,d,p,h,f,g,m,v))}}var a=.5,o=Math.cos(30*Uo),s=16;return t.precision=function(e){return arguments.length?(s=(a=e*e)>0&&16,t):Math.sqrt(a)},t}function tn(e){var t=en(function(t,n){return e([t*zo,n*zo])});return function(e){return sn(t(e))}}function nn(e){this.stream=e}function rn(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function an(e){return on(function(){return e})()}function on(e){function t(e){return e=s(e[0]*Uo,e[1]*Uo),[e[0]*p+l,c-e[1]*p]}function n(e){return e=s.invert((e[0]-l)/p,(c-e[1])/p),e&&[e[0]*zo,e[1]*zo]}function i(){s=$t(o=un(v,y,b),a);var e=a(g,m);return l=h-e[0]*p,c=f+e[1]*p,r()}function r(){return u&&(u.valid=!1,u=null),t}var a,o,s,l,c,u,d=en(function(e,t){return e=a(e,t),[e[0]*p+l,c-e[1]*p]}),p=150,h=480,f=250,g=0,m=0,v=0,y=0,b=0,w=Ls,x=Te,k=null,C=null;return t.stream=function(e){return u&&(u.valid=!1),u=sn(w(o,d(x(e)))),u.valid=!0,u},t.clipAngle=function(e){return arguments.length?(w=null==e?(k=e,Ls):Ut((k=+e)*Uo),r()):k},t.clipExtent=function(e){return arguments.length?(C=e,x=e?qt(e[0][0],e[0][1],e[1][0],e[1][1]):Te,r()):C},t.scale=function(e){return arguments.length?(p=+e,i()):p},t.translate=function(e){return arguments.length?(h=+e[0],f=+e[1],i()):[h,f]},t.center=function(e){return arguments.length?(g=e[0]%360*Uo,m=e[1]%360*Uo,i()):[g*zo,m*zo]},t.rotate=function(e){return arguments.length?(v=e[0]%360*Uo,y=e[1]%360*Uo,b=e.length>2?e[2]%360*Uo:0,i()):[v*zo,y*zo,b*zo]},to.rebind(t,d,"precision"),function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,i()}}function sn(e){return rn(e,function(t,n){e.point(t*Uo,n*Uo)})}function ln(e,t){return[e,t]}function cn(e,t){return[e>Oo?e-Lo:-Oo>e?e+Lo:e,t]}function un(e,t,n){return e?t||n?$t(pn(e),hn(t,n)):pn(e):t||n?hn(t,n):cn}function dn(e){return function(t,n){return t+=e,[t>Oo?t-Lo:-Oo>t?t+Lo:t,n]}}function pn(e){var t=dn(e);return t.invert=dn(-e),t}function hn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,c=Math.sin(t),u=c*i+s*r;return[Math.atan2(l*a-u*o,s*i-c*r),ee(u*a+l*o)]}var i=Math.cos(e),r=Math.sin(e),a=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,c=Math.sin(t),u=c*a-l*o;return[Math.atan2(l*a+c*o,s*i+u*r),ee(u*i-s*r)]},n}function fn(e,t){var n=Math.cos(e),i=Math.sin(e);return function(r,a,o,s){var l=o*t;null!=r?(r=gn(n,r),a=gn(n,a),(o>0?a>r:r>a)&&(r+=o*Lo)):(r=e+o*Lo,a=e-.5*l);for(var c,u=r;o>0?u>a:a>u;u-=l)s.point((c=wt([n,-i*Math.cos(u),-i*Math.sin(u)]))[0],c[1])}}function gn(e,t){var n=ft(t);n[0]-=e,bt(n);var i=Z(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-No)%(2*Math.PI)}function mn(e,t,n){var i=to.range(e,t-No,n).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function vn(e,t,n){var i=to.range(e,t-No,n).concat(t);return function(e){return i.map(function(t){return[t,e]})}}function yn(e){return e.source}function bn(e){return e.target}function wn(e,t,n,i){var r=Math.cos(t),a=Math.sin(t),o=Math.cos(i),s=Math.sin(i),l=r*Math.cos(e),c=r*Math.sin(e),u=o*Math.cos(n),d=o*Math.sin(n),p=2*Math.asin(Math.sqrt(re(i-t)+r*o*re(n-e))),h=1/Math.sin(p),f=p?function(e){var t=Math.sin(e*=p)*h,n=Math.sin(p-e)*h,i=n*l+t*u,r=n*c+t*d,o=n*a+t*s;return[Math.atan2(r,i)*zo,Math.atan2(o,Math.sqrt(i*i+r*r))*zo]}:function(){return[e*zo,t*zo]};return f.distance=p,f}function xn(){function e(e,r){var a=Math.sin(r*=Uo),o=Math.cos(r),s=mo((e*=Uo)-t),l=Math.cos(s);Ks+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=i*a-n*o*l)*s),n*a+i*o*l),t=e,n=a,i=o}var t,n,i;Xs.point=function(r,a){t=r*Uo,n=Math.sin(a*=Uo),i=Math.cos(a),Xs.point=e},Xs.lineEnd=function(){Xs.point=Xs.lineEnd=y}}function kn(e,t){function n(t,n){var i=Math.cos(t),r=Math.cos(n),a=e(i*r);return[a*r*Math.sin(t),a*Math.sin(n)]}return n.invert=function(e,n){var i=Math.sqrt(e*e+n*n),r=t(i),a=Math.sin(r),o=Math.cos(r);return[Math.atan2(e*a,i*o),Math.asin(i&&n*a/i)]},n}function Cn(e,t){function n(e,t){o>0?-Fo+No>t&&(t=-Fo+No):t>Fo-No&&(t=Fo-No);var n=o/Math.pow(r(t),a);return[n*Math.sin(a*e),o-n*Math.cos(a*e)]}var i=Math.cos(e),r=function(e){return Math.tan(Oo/4+e/2)},a=e===t?Math.sin(e):Math.log(i/Math.cos(t))/Math.log(r(t)/r(e)),o=i*Math.pow(r(e),a)/a;return a?(n.invert=function(e,t){var n=o-t,i=J(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(o/i,1/a))-Fo]},n):_n}function Sn(e,t){function n(e,t){var n=a-t;return[n*Math.sin(r*e),a-n*Math.cos(r*e)]}var i=Math.cos(e),r=e===t?Math.sin(e):(i-Math.cos(t))/(t-e),a=i/r+e;return mo(r)<No?ln:(n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,a-J(r)*Math.sqrt(e*e+n*n)]},n)}function _n(e,t){return[e,Math.log(Math.tan(Oo/4+t/2))]}function Tn(e){var t,n=an(e),i=n.scale,r=n.translate,a=n.clipExtent;return n.scale=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=a.apply(n,arguments);if(o===n){if(t=null==e){var s=Oo*i(),l=r();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}function $n(e,t){return[Math.log(Math.tan(Oo/4+t/2)),-e]}function An(e){return e[0]}function En(e){return e[1]}function Pn(e){for(var t=e.length,n=[0,1],i=2,r=2;t>r;r++){for(;i>1&&Q(e[n[i-2]],e[n[i-1]],e[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function In(e,t){return e[0]-t[0]||e[1]-t[1]}function Dn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Mn(e,t,n,i){var r=e[0],a=n[0],o=t[0]-r,s=i[0]-a,l=e[1],c=n[1],u=t[1]-l,d=i[1]-c,p=(s*(l-c)-d*(r-a))/(d*o-s*u);return[r+p*o,l+p*u]}function Nn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function jn(){ni(this),this.edge=this.site=this.circle=null}function On(e){var t=sl.pop()||new jn;return t.site=e,t}function Ln(e){Gn(e),rl.remove(e),sl.push(e),ni(e)}function Rn(e){var t=e.circle,n=t.x,i=t.cy,r={x:n,y:i},a=e.P,o=e.N,s=[e];Ln(e);for(var l=a;l.circle&&mo(n-l.circle.x)<No&&mo(i-l.circle.cy)<No;)a=l.P,s.unshift(l),Ln(l),l=a;s.unshift(l),Gn(l);for(var c=o;c.circle&&mo(n-c.circle.x)<No&&mo(i-c.circle.cy)<No;)o=c.N,s.push(c),Ln(c),c=o;s.push(c),Gn(c);var u,d=s.length;for(u=1;d>u;++u)c=s[u],l=s[u-1],Zn(c.edge,l.site,c.site,r);l=s[0],c=s[d-1],c.edge=Jn(l.site,c.site,null,r),Wn(l),Wn(c)}function Fn(e){for(var t,n,i,r,a=e.x,o=e.y,s=rl._;s;)if(i=Un(s,o)-a,i>No)s=s.L;else{if(r=a-zn(s,o),!(r>No)){i>-No?(t=s.P,n=s):r>-No?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=On(e);if(rl.insert(t,l),t||n){if(t===n)return Gn(t),n=On(t.site),rl.insert(l,n),l.edge=n.edge=Jn(t.site,l.site),Wn(t),void Wn(n);if(!n)return void(l.edge=Jn(t.site,l.site));Gn(t),Gn(n);var c=t.site,u=c.x,d=c.y,p=e.x-u,h=e.y-d,f=n.site,g=f.x-u,m=f.y-d,v=2*(p*m-h*g),y=p*p+h*h,b=g*g+m*m,w={x:(m*y-h*b)/v+u,y:(p*b-g*y)/v+d};Zn(n.edge,c,f,w),l.edge=Jn(c,e,null,w),n.edge=Jn(e,f,null,w),Wn(t),Wn(n)}}function Un(e,t){var n=e.site,i=n.x,r=n.y,a=r-t;if(!a)return i;var o=e.P;if(!o)return-(1/0);n=o.site;var s=n.x,l=n.y,c=l-t;if(!c)return s;var u=s-i,d=1/a-1/c,p=u/c;return d?(-p+Math.sqrt(p*p-2*d*(u*u/(-2*c)-l+c/2+r-a/2)))/d+i:(i+s)/2}function zn(e,t){var n=e.N;if(n)return Un(n,t);var i=e.site;return i.y===t?i.x:1/0}function qn(e){this.site=e,this.edges=[]}function Bn(e){for(var t,n,i,r,a,o,s,l,c,u,d=e[0][0],p=e[1][0],h=e[0][1],f=e[1][1],g=il,m=g.length;m--;)if(a=g[m],a&&a.prepare())for(s=a.edges,l=s.length,o=0;l>o;)u=s[o].end(),i=u.x,r=u.y,c=s[++o%l].start(),t=c.x,n=c.y,(mo(i-t)>No||mo(r-n)>No)&&(s.splice(o,0,new ei(Qn(a.site,u,mo(i-d)<No&&f-r>No?{x:d,y:mo(t-d)<No?n:f}:mo(r-f)<No&&p-i>No?{x:mo(n-f)<No?t:p,y:f}:mo(i-p)<No&&r-h>No?{x:p,y:mo(t-p)<No?n:h}:mo(r-h)<No&&i-d>No?{x:mo(n-h)<No?t:d,y:h}:null),a.site,null)),++l)}function Hn(e,t){return t.angle-e.angle}function Vn(){ni(this),this.x=this.y=this.arc=this.site=this.cy=null}function Wn(e){var t=e.P,n=e.N;if(t&&n){var i=t.site,r=e.site,a=n.site;if(i!==a){var o=r.x,s=r.y,l=i.x-o,c=i.y-s,u=a.x-o,d=a.y-s,p=2*(l*d-c*u);if(!(p>=-jo)){var h=l*l+c*c,f=u*u+d*d,g=(d*h-c*f)/p,m=(l*f-u*h)/p,d=m+s,v=ll.pop()||new Vn;v.arc=e,v.site=r,v.x=g+o,v.y=d+Math.sqrt(g*g+m*m),v.cy=d,e.circle=v;for(var y=null,b=ol._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}ol.insert(y,v),y||(al=v)}}}}function Gn(e){var t=e.circle;t&&(t.P||(al=t.N),ol.remove(t),ll.push(t),ni(t),e.circle=null)}function Kn(e){for(var t,n=nl,i=zt(e[0][0],e[0][1],e[1][0],e[1][1]),r=n.length;r--;)t=n[r],(!Xn(t,e)||!i(t)||mo(t.a.x-t.b.x)<No&&mo(t.a.y-t.b.y)<No)&&(t.a=t.b=null,n.splice(r,1))}function Xn(e,t){var n=e.b;if(n)return!0;var i,r,a=e.a,o=t[0][0],s=t[1][0],l=t[0][1],c=t[1][1],u=e.l,d=e.r,p=u.x,h=u.y,f=d.x,g=d.y,m=(p+f)/2,v=(h+g)/2;if(g===h){if(o>m||m>=s)return;if(p>f){if(a){if(a.y>=c)return}else a={x:m,y:l};n={x:m,y:c}}else{if(a){if(a.y<l)return}else a={x:m,y:c};n={x:m,y:l}}}else if(i=(p-f)/(g-h),r=v-i*m,-1>i||i>1)if(p>f){if(a){if(a.y>=c)return}else a={x:(l-r)/i,y:l};n={x:(c-r)/i,y:c}}else{if(a){if(a.y<l)return}else a={x:(c-r)/i,y:c};n={x:(l-r)/i,y:l}}else if(g>h){if(a){if(a.x>=s)return}else a={x:o,y:i*o+r};n={x:s,y:i*s+r}}else{if(a){if(a.x<o)return}else a={x:s,y:i*s+r};n={x:o,y:i*o+r}}return e.a=a,e.b=n,!0}function Yn(e,t){this.l=e,this.r=t,this.a=this.b=null}function Jn(e,t,n,i){var r=new Yn(e,t);return nl.push(r),n&&Zn(r,e,t,n),i&&Zn(r,t,e,i),il[e.i].edges.push(new ei(r,e,t)),il[t.i].edges.push(new ei(r,t,e)),r}function Qn(e,t,n){var i=new Yn(e,null);return i.a=t,i.b=n,nl.push(i),i}function Zn(e,t,n,i){e.a||e.b?e.l===n?e.b=i:e.a=i:(e.a=i,e.l=t,e.r=n)}function ei(e,t,n){var i=e.a,r=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function ti(){this._=null}function ni(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ii(e,t){var n=t,i=t.R,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function ri(e,t){var n=t,i=t.L,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function ai(e){for(;e.L;)e=e.L;return e}function oi(e,t){var n,i,r,a=e.sort(si).pop();for(nl=[],il=new Array(e.length),rl=new ti,ol=new ti;;)if(r=al,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x))(a.x!==n||a.y!==i)&&(il[a.i]=new qn(a),Fn(a),n=a.x,i=a.y),a=e.pop();else{if(!r)break;Rn(r.arc)}t&&(Kn(t),Bn(t));var o={cells:il,edges:nl};return rl=ol=nl=il=null,o}function si(e,t){return t.y-e.y||t.x-e.x}function li(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function ci(e){return e.x}function ui(e){return e.y}function di(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function pi(e,t,n,i,r,a){if(!e(t,n,i,r,a)){var o=.5*(n+r),s=.5*(i+a),l=t.nodes;l[0]&&pi(e,l[0],n,i,o,s),l[1]&&pi(e,l[1],o,i,r,s),l[2]&&pi(e,l[2],n,s,o,a),l[3]&&pi(e,l[3],o,s,r,a)}}function hi(e,t,n,i,r,a,o){var s,l=1/0;return function c(e,u,d,p,h){if(!(u>a||d>o||i>p||r>h)){if(f=e.point){var f,g=t-f[0],m=n-f[1],v=g*g+m*m;if(l>v){var y=Math.sqrt(l=v);i=t-y,r=n-y,a=t+y,o=n+y,s=f}}for(var b=e.nodes,w=.5*(u+p),x=.5*(d+h),k=t>=w,C=n>=x,S=C<<1|k,_=S+4;_>S;++S)if(e=b[3&S])switch(3&S){case 0:c(e,u,d,w,x);break;case 1:c(e,w,d,p,x);break;case 2:c(e,u,x,w,h);break;case 3:c(e,w,x,p,h)}}}(e,i,r,a,o),s}function fi(e,t){e=to.rgb(e),t=to.rgb(t);var n=e.r,i=e.g,r=e.b,a=t.r-n,o=t.g-i,s=t.b-r;return function(e){return"#"+be(Math.round(n+a*e))+be(Math.round(i+o*e))+be(Math.round(r+s*e))}}function gi(e,t){var n,i={},r={};for(n in e)n in t?i[n]=yi(e[n],t[n]):r[n]=e[n];for(n in t)n in e||(r[n]=t[n]);return function(e){for(n in i)r[n]=i[n](e);return r}}function mi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function vi(e,t){var n,i,r,a=ul.lastIndex=dl.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=ul.exec(e))&&(i=dl.exec(t));)(r=i.index)>a&&(r=t.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:mi(n,i)})),a=dl.lastIndex;return a<t.length&&(r=t.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,i=0;t>i;++i)s[(n=l[i]).i]=n.x(e);return s.join("")})}function yi(e,t){for(var n,i=to.interpolators.length;--i>=0&&!(n=to.interpolators[i](e,t)););return n}function bi(e,t){var n,i=[],r=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)i.push(yi(e[n],t[n]));for(;a>n;++n)r[n]=e[n];for(;o>n;++n)r[n]=t[n];return function(e){for(n=0;s>n;++n)r[n]=i[n](e);return r}}function wi(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function xi(e){return function(t){return 1-e(1-t)}}function ki(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Ci(e){return e*e}function Si(e){return e*e*e}function _i(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Ti(e){return function(t){return Math.pow(t,e)}}function $i(e){return 1-Math.cos(e*Fo)}function Ai(e){return Math.pow(2,10*(e-1))}function Ei(e){return 1-Math.sqrt(1-e*e)}function Pi(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Lo*Math.asin(1/e):(e=1,n=t/4),function(i){return 1+e*Math.pow(2,-10*i)*Math.sin((i-n)*Lo/t)}}function Ii(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Di(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Mi(e,t){e=to.hcl(e),t=to.hcl(t);var n=e.h,i=e.c,r=e.l,a=t.h-n,o=t.c-i,s=t.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?t.c:i),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return ce(n+a*e,i+o*e,r+s*e)+""}}function Ni(e,t){e=to.hsl(e),t=to.hsl(t);var n=e.h,i=e.s,r=e.l,a=t.h-n,o=t.s-i,s=t.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?t.s:i),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return se(n+a*e,i+o*e,r+s*e)+""}}function ji(e,t){e=to.lab(e),t=to.lab(t);var n=e.l,i=e.a,r=e.b,a=t.l-n,o=t.a-i,s=t.b-r;return function(e){return de(n+a*e,i+o*e,r+s*e)+""}}function Oi(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Li(e){var t=[e.a,e.b],n=[e.c,e.d],i=Fi(t),r=Ri(t,n),a=Fi(Ui(n,t,-r))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*zo,this.translate=[e.e,e.f],this.scale=[i,a],this.skew=a?Math.atan2(r,a)*zo:0}function Ri(e,t){return e[0]*t[0]+e[1]*t[1]}function Fi(e){var t=Math.sqrt(Ri(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Ui(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function zi(e,t){var n,i=[],r=[],a=to.transform(e),o=to.transform(t),s=a.translate,l=o.translate,c=a.rotate,u=o.rotate,d=a.skew,p=o.skew,h=a.scale,f=o.scale;return s[0]!=l[0]||s[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:mi(s[0],l[0])},{i:3,x:mi(s[1],l[1])})):i.push(l[0]||l[1]?"translate("+l+")":""),c!=u?(c-u>180?u+=360:u-c>180&&(c+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:mi(c,u)})):u&&i.push(i.pop()+"rotate("+u+")"),d!=p?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:mi(d,p)}):p&&i.push(i.pop()+"skewX("+p+")"),h[0]!=f[0]||h[1]!=f[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:mi(h[0],f[0])},{i:n-2,x:mi(h[1],f[1])})):(1!=f[0]||1!=f[1])&&i.push(i.pop()+"scale("+f+")"),n=r.length,function(e){for(var t,a=-1;++a<n;)i[(t=r[a]).i]=t.x(e);return i.join("")}}function qi(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Bi(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Hi(e){for(var t=e.source,n=e.target,i=Wi(t,n),r=[t];t!==i;)t=t.parent,r.push(t);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function Vi(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Wi(e,t){if(e===t)return e;for(var n=Vi(e),i=Vi(t),r=n.pop(),a=i.pop(),o=null;r===a;)o=r,r=n.pop(),a=i.pop();return o}function Gi(e){e.fixed|=2}function Ki(e){e.fixed&=-7}function Xi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Yi(e){e.fixed&=-5}function Ji(e,t,n){var i=0,r=0;if(e.charge=0,!e.leaf)for(var a,o=e.nodes,s=o.length,l=-1;++l<s;)a=o[l],null!=a&&(Ji(a,t,n),e.charge+=a.charge,i+=a.charge*a.cx,r+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=t*n[e.point.index];e.charge+=e.pointCharge=c,i+=c*e.point.x,r+=c*e.point.y}e.cx=i/e.charge,e.cy=r/e.charge}function Qi(e,t){return to.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=rr,e}function Zi(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(r=e.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function er(e,t){for(var n=[e],i=[];null!=(e=n.pop());)if(i.push(e),(a=e.children)&&(r=a.length))for(var r,a,o=-1;++o<r;)n.push(a[o]);for(;null!=(e=i.pop());)t(e)}function tr(e){return e.children}function nr(e){return e.value}function ir(e,t){return t.value-e.value}function rr(e){return to.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function ar(e){return e.x}function or(e){return e.y}function sr(e,t,n){e.y0=t,e.y=n}function lr(e){return to.range(e.length)}function cr(e){for(var t=-1,n=e[0].length,i=[];++t<n;)i[t]=0;return i}function ur(e){for(var t,n=1,i=0,r=e[0][1],a=e.length;a>n;++n)(t=e[n][1])>r&&(i=n,r=t);return i}function dr(e){return e.reduce(pr,0)}function pr(e,t){return e+t[1]}function hr(e,t){return fr(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function fr(e,t){for(var n=-1,i=+e[0],r=(e[1]-i)/t,a=[];++n<=t;)a[n]=r*n+i;return a}function gr(e){return[to.min(e),to.max(e)]}function mr(e,t){return e.value-t.value}function vr(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function yr(e,t){e._pack_next=t,t._pack_prev=e}function br(e,t){var n=t.x-e.x,i=t.y-e.y,r=e.r+t.r;return.999*r*r>n*n+i*i}function wr(e){function t(e){u=Math.min(e.x-e.r,u),d=Math.max(e.x+e.r,d),p=Math.min(e.y-e.r,p),h=Math.max(e.y+e.r,h)}if((n=e.children)&&(c=n.length)){var n,i,r,a,o,s,l,c,u=1/0,d=-(1/0),p=1/0,h=-(1/0);if(n.forEach(xr),i=n[0],i.x=-i.r,i.y=0,t(i),c>1&&(r=n[1],r.x=r.r,r.y=0,t(r),c>2))for(a=n[2],Sr(i,r,a),t(a),vr(i,a),i._pack_prev=a,vr(a,r),r=i._pack_next,o=3;c>o;o++){Sr(i,r,a=n[o]);var f=0,g=1,m=1;for(s=r._pack_next;s!==r;s=s._pack_next,g++)if(br(s,a)){f=1;break}if(1==f)for(l=i._pack_prev;l!==s._pack_prev&&!br(l,a);l=l._pack_prev,m++);f?(m>g||g==m&&r.r<i.r?yr(i,r=s):yr(i=l,r),o--):(vr(i,a),r=a,t(a))}var v=(u+d)/2,y=(p+h)/2,b=0;for(o=0;c>o;o++)a=n[o],a.x-=v,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=b,n.forEach(kr)}}function xr(e){e._pack_next=e._pack_prev=e}function kr(e){delete e._pack_next,delete e._pack_prev}function Cr(e,t,n,i){var r=e.children;if(e.x=t+=i*e.x,e.y=n+=i*e.y,e.r*=i,r)for(var a=-1,o=r.length;++a<o;)Cr(r[a],t,n,i)}function Sr(e,t,n){var i=e.r+n.r,r=t.x-e.x,a=t.y-e.y;if(i&&(r||a)){var o=t.r+n.r,s=r*r+a*a;o*=o,i*=i;var l=.5+(i-o)/(2*s),c=Math.sqrt(Math.max(0,2*o*(i+s)-(i-=s)*i-o*o))/(2*s);n.x=e.x+l*r+c*a,n.y=e.y+l*a-c*r}else n.x=e.x+i,n.y=e.y}function _r(e,t){return e.parent==t.parent?1:2}function Tr(e){var t=e.children;return t.length?t[0]:e.t}function $r(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Ar(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Er(e){for(var t,n=0,i=0,r=e.children,a=r.length;--a>=0;)t=r[a],t.z+=n,t.m+=n,n+=t.s+(i+=t.c)}function Pr(e,t,n){return e.a.parent===t.parent?e.a:n}function Ir(e){return 1+to.max(e,function(e){return e.y})}function Dr(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Mr(e){var t=e.children;return t&&t.length?Mr(t[0]):e}function Nr(e){var t,n=e.children;return n&&(t=n.length)?Nr(n[t-1]):e}function jr(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Or(e,t){var n=e.x+t[3],i=e.y+t[0],r=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return 0>r&&(n+=r/2,r=0),0>a&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function Lr(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Rr(e){return e.rangeExtent?e.rangeExtent():Lr(e.range())}function Fr(e,t,n,i){var r=n(e[0],e[1]),a=i(t[0],t[1]);return function(e){return a(r(e))}}function Ur(e,t){var n,i=0,r=e.length-1,a=e[i],o=e[r];return a>o&&(n=i,i=r,r=n,n=a,a=o,o=n),e[i]=t.floor(a),e[r]=t.ceil(o),e}function zr(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:kl}function qr(e,t,n,i){var r=[],a=[],o=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=s;)r.push(n(e[o-1],e[o])),a.push(i(t[o-1],t[o]));return function(t){var n=to.bisect(e,t,1,s)-1;return a[n](r[n](t))}}function Br(e,t,n,i){function r(){var r=Math.min(e.length,t.length)>2?qr:Fr,l=i?Bi:qi;return o=r(e,t,l,n),s=r(t,e,l,yi),a}function a(e){return o(e)}var o,s;return a.invert=function(e){return s(e)},a.domain=function(t){return arguments.length?(e=t.map(Number),r()):e},a.range=function(e){return arguments.length?(t=e,r()):t},a.rangeRound=function(e){return a.range(e).interpolate(Oi)},a.clamp=function(e){return arguments.length?(i=e,r()):i},a.interpolate=function(e){return arguments.length?(n=e,r()):n},a.ticks=function(t){return Gr(e,t)},a.tickFormat=function(t,n){return Kr(e,t,n)},a.nice=function(t){return Vr(e,t),r()},a.copy=function(){return Br(e,t,n,i)},r()}function Hr(e,t){return to.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Vr(e,t){return Ur(e,zr(Wr(e,t)[2]))}function Wr(e,t){null==t&&(t=10);var n=Lr(e),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),a=t/i*r;return.15>=a?r*=10:.35>=a?r*=5:.75>=a&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Gr(e,t){return to.range.apply(to,Wr(e,t))}function Kr(e,t,n){var i=Wr(e,t);if(n){var r=us.exec(n);if(r.shift(),"s"===r[8]){var a=to.formatPrefix(Math.max(mo(i[0]),mo(i[1])));return r[7]||(r[7]="."+Xr(a.scale(i[2]))),r[8]="f",n=to.format(r.join("")),function(e){return n(a.scale(e))+a.symbol}}r[7]||(r[7]="."+Yr(r[8],i)),n=r.join("")}else n=",."+Xr(i[2])+"f";return to.format(n)}function Xr(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Yr(e,t){var n=Xr(t[2]);return e in Cl?Math.abs(n-Xr(Math.max(mo(t[0]),mo(t[1]))))+ +("e"!==e):n-2*("%"===e)}function Jr(e,t,n,i){function r(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(r(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((i=t.map(Number)).map(r)),o):i},o.base=function(n){return arguments.length?(t=+n,e.domain(i.map(r)),o):t},o.nice=function(){var t=Ur(i.map(r),n?Math:_l);return e.domain(t),i=t.map(a),o},o.ticks=function(){var e=Lr(i),o=[],s=e[0],l=e[1],c=Math.floor(r(s)),u=Math.ceil(r(l)),d=t%1?2:t;if(isFinite(u-c)){if(n){for(;u>c;c++)for(var p=1;d>p;p++)o.push(a(c)*p);o.push(a(c))}else for(o.push(a(c));c++<u;)for(var p=d-1;p>0;p--)o.push(a(c)*p);for(c=0;o[c]<s;c++);for(u=o.length;o[u-1]>l;u--);o=o.slice(c,u)}return o},o.tickFormat=function(e,t){if(!arguments.length)return Sl;arguments.length<2?t=Sl:"function"!=typeof t&&(t=to.format(t));var i,s=Math.max(.1,e/o.ticks().length),l=n?(i=1e-12,Math.ceil):(i=-1e-12,Math.floor);return function(e){return e/a(l(r(e)+i))<=s?t(e):""}},o.copy=function(){return Jr(e.copy(),t,n,i)},Hr(o,e)}function Qr(e,t,n){function i(t){return e(r(t))}var r=Zr(t),a=Zr(1/t);return i.invert=function(t){return a(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),i):n},i.ticks=function(e){return Gr(n,e)},i.tickFormat=function(e,t){return Kr(n,e,t)},i.nice=function(e){return i.domain(Vr(n,e))},i.exponent=function(o){return arguments.length?(r=Zr(t=o),a=Zr(1/t),e.domain(n.map(r)),i):t},i.copy=function(){return Qr(e.copy(),t,n)},Hr(i,e)}function Zr(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function ea(e,t){function n(n){return a[((r.get(n)||("range"===t.t?r.set(n,e.push(n)):0/0))-1)%a.length]}function i(t,n){return to.range(e.length).map(function(e){return t+n*e})}var r,a,o;return n.domain=function(i){if(!arguments.length)return e;e=[],r=new s;for(var a,o=-1,l=i.length;++o<l;)r.has(a=i[o])||r.set(a,e.push(a));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(a=e,o=0,t={t:"range",a:arguments},n):a},n.rangePoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],c=r[1],u=e.length<2?(l=(l+c)/2,0):(c-l)/(e.length-1+s);return a=i(l+u*s/2,u),o=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],c=r[1],u=e.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(e.length-1+s)|0;return a=i(l+Math.round(u*s/2+(c-l-(e.length-1+s)*u)/2),u),o=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var c=r[1]<r[0],u=r[c-0],d=r[1-c],p=(d-u)/(e.length-s+2*l);return a=i(u+p*l,p),c&&a.reverse(),o=p*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var c=r[1]<r[0],u=r[c-0],d=r[1-c],p=Math.floor((d-u)/(e.length-s+2*l));return a=i(u+Math.round((d-u-(e.length-s)*p)/2),p),c&&a.reverse(),o=Math.round(p*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Lr(t.a[0])},n.copy=function(){return ea(e,t)},n.domain(e)}function ta(i,r){function a(){var e=0,t=r.length;for(s=[];++e<t;)s[e-1]=to.quantile(i,e/t);return o}function o(e){return isNaN(e=+e)?void 0:r[to.bisect(s,e)]}var s;return o.domain=function(r){return arguments.length?(i=r.map(t).filter(n).sort(e),a()):i},o.range=function(e){return arguments.length?(r=e,a()):r},o.quantiles=function(){return s},o.invertExtent=function(e){return e=r.indexOf(e),0>e?[0/0,0/0]:[e>0?s[e-1]:i[0],e<s.length?s[e]:i[i.length-1]]},o.copy=function(){return ta(i,r)},a()}function na(e,t,n){function i(t){return n[Math.max(0,Math.min(o,Math.floor(a*(t-e))))]}function r(){return a=n.length/(t-e),o=n.length-1,i}var a,o;return i.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],r()):[e,t]},i.range=function(e){return arguments.length?(n=e,r()):n},i.invertExtent=function(t){return t=n.indexOf(t),t=0>t?0/0:t/a+e,[t,t+1/a]},i.copy=function(){return na(e,t,n)},r()}function ia(e,t){function n(n){return n>=n?t[to.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return ia(e,t)},n}function ra(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Gr(e,t)},t.tickFormat=function(t,n){return Kr(e,t,n)},t.copy=function(){return ra(e)},t}function aa(){return 0}function oa(e){return e.innerRadius}function sa(e){return e.outerRadius}function la(e){return e.startAngle}function ca(e){return e.endAngle}function ua(e){return e&&e.padAngle}function da(e,t,n,i){return(e-n)*t-(t-i)*e>0?0:1}function pa(e,t,n,i,r){var a=e[0]-t[0],o=e[1]-t[1],s=(r?i:-i)/Math.sqrt(a*a+o*o),l=s*o,c=-s*a,u=e[0]+l,d=e[1]+c,p=t[0]+l,h=t[1]+c,f=(u+p)/2,g=(d+h)/2,m=p-u,v=h-d,y=m*m+v*v,b=n-i,w=u*h-p*d,x=(0>v?-1:1)*Math.sqrt(b*b*y-w*w),k=(w*v-m*x)/y,C=(-w*m-v*x)/y,S=(w*v+m*x)/y,_=(-w*m+v*x)/y,T=k-f,$=C-g,A=S-f,E=_-g;return T*T+$*$>A*A+E*E&&(k=S,C=_),[[k-l,C-c],[k*n/b,C*n/b]]}function ha(e){function t(t){function o(){c.push("M",a(e(u),s))}for(var l,c=[],u=[],d=-1,p=t.length,h=_e(n),f=_e(i);++d<p;)r.call(this,l=t[d],d)?u.push([+h.call(this,l,d),+f.call(this,l,d)]):u.length&&(o(),u=[]);return u.length&&o(),c.length?c.join(""):null}var n=An,i=En,r=At,a=fa,o=a.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(r=e,t):r},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?a=e:(a=Il.get(e)||fa).key,t):o},t.tension=function(e){return arguments.length?(s=e,t):s},t}function fa(e){return e.join("L")}function ga(e){return fa(e)+"Z"}function ma(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("H",(i[0]+(i=e[t])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")}function va(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("V",(i=e[t])[1],"H",i[0]);return r.join("")}function ya(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("H",(i=e[t])[0],"V",i[1]);return r.join("")}function ba(e,t){return e.length<4?fa(e):e[1]+ka(e.slice(1,-1),Ca(e,t))}function wa(e,t){return e.length<3?fa(e):e[0]+ka((e.push(e[0]),e),Ca([e[e.length-2]].concat(e,[e[1]]),t))}function xa(e,t){return e.length<3?fa(e):e[0]+ka(e,Ca(e,t))}function ka(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return fa(e);var n=e.length!=t.length,i="",r=e[0],a=e[1],o=t[0],s=o,l=1;if(n&&(i+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],r=e[1],l=2),t.length>1){s=t[1],a=e[l],l++,i+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<t.length;c++,l++)a=e[l],s=t[c],i+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var u=e[l];i+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+u[0]+","+u[1]}return i}function Ca(e,t){for(var n,i=[],r=(1-t)/2,a=e[0],o=e[1],s=1,l=e.length;++s<l;)n=a,a=o,o=e[s],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function Sa(e){if(e.length<3)return fa(e);var t=1,n=e.length,i=e[0],r=i[0],a=i[1],o=[r,r,r,(i=e[1])[0]],s=[a,a,a,i[1]],l=[r,",",a,"L",Aa(Nl,o),",",Aa(Nl,s)];

for(e.push(e[n-1]);++t<=n;)i=e[t],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),Ea(l,o,s);return e.pop(),l.push("L",i),l.join("")}function _a(e){if(e.length<4)return fa(e);for(var t,n=[],i=-1,r=e.length,a=[0],o=[0];++i<3;)t=e[i],a.push(t[0]),o.push(t[1]);for(n.push(Aa(Nl,a)+","+Aa(Nl,o)),--i;++i<r;)t=e[i],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),Ea(n,a,o);return n.join("")}function Ta(e){for(var t,n,i=-1,r=e.length,a=r+4,o=[],s=[];++i<4;)n=e[i%r],o.push(n[0]),s.push(n[1]);for(t=[Aa(Nl,o),",",Aa(Nl,s)],--i;++i<a;)n=e[i%r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ea(t,o,s);return t.join("")}function $a(e,t){var n=e.length-1;if(n)for(var i,r,a=e[0][0],o=e[0][1],s=e[n][0]-a,l=e[n][1]-o,c=-1;++c<=n;)i=e[c],r=c/n,i[0]=t*i[0]+(1-t)*(a+r*s),i[1]=t*i[1]+(1-t)*(o+r*l);return Sa(e)}function Aa(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Ea(e,t,n){e.push("C",Aa(Dl,t),",",Aa(Dl,n),",",Aa(Ml,t),",",Aa(Ml,n),",",Aa(Nl,t),",",Aa(Nl,n))}function Pa(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Ia(e){for(var t=0,n=e.length-1,i=[],r=e[0],a=e[1],o=i[0]=Pa(r,a);++t<n;)i[t]=(o+(o=Pa(r=a,a=e[t+1])))/2;return i[t]=o,i}function Da(e){for(var t,n,i,r,a=[],o=Ia(e),s=-1,l=e.length-1;++s<l;)t=Pa(e[s],e[s+1]),mo(t)<No?o[s]=o[s+1]=0:(n=o[s]/t,i=o[s+1]/t,r=n*n+i*i,r>9&&(r=3*t/Math.sqrt(r),o[s]=r*n,o[s+1]=r*i));for(s=-1;++s<=l;)r=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([r||0,o[s]*r||0]);return a}function Ma(e){return e.length<3?fa(e):e[0]+ka(e,Da(e))}function Na(e){for(var t,n,i,r=-1,a=e.length;++r<a;)t=e[r],n=t[0],i=t[1]-Fo,t[0]=n*Math.cos(i),t[1]=n*Math.sin(i);return e}function ja(e){function t(t){function l(){g.push("M",s(e(v),d),u,c(e(m.reverse()),d),"Z")}for(var p,h,f,g=[],m=[],v=[],y=-1,b=t.length,w=_e(n),x=_e(r),k=n===i?function(){return h}:_e(i),C=r===a?function(){return f}:_e(a);++y<b;)o.call(this,p=t[y],y)?(m.push([h=+w.call(this,p,y),f=+x.call(this,p,y)]),v.push([+k.call(this,p,y),+C.call(this,p,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=An,i=An,r=0,a=En,o=At,s=fa,l=s.key,c=s,u="L",d=.7;return t.x=function(e){return arguments.length?(n=i=e,t):i},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(r=a=e,t):a},t.y0=function(e){return arguments.length?(r=e,t):r},t.y1=function(e){return arguments.length?(a=e,t):a},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?s=e:(s=Il.get(e)||fa).key,c=s.reverse||s,u=s.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(d=e,t):d},t}function Oa(e){return e.radius}function La(e){return[e.x,e.y]}function Ra(e){return function(){var t=e.apply(this,arguments),n=t[0],i=t[1]-Fo;return[n*Math.cos(i),n*Math.sin(i)]}}function Fa(){return 64}function Ua(){return"circle"}function za(e){var t=Math.sqrt(e/Oo);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function qa(e){return function(){var t,n;(t=this[e])&&(n=t[t.active])&&(--t.count?delete t[t.active]:delete this[e],t.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Ba(e,t,n){return xo(e,zl),e.namespace=t,e.id=n,e}function Ha(e,t,n,i){var r=e.id,a=e.namespace;return U(e,"function"==typeof n?function(e,o,s){e[a][r].tween.set(t,i(n.call(e,e.__data__,o,s)))}:(n=i(n),function(e){e[a][r].tween.set(t,n)}))}function Va(e){return null==e&&(e=""),function(){this.textContent=e}}function Wa(e){return null==e?"__transition__":"__transition_"+e+"__"}function Ga(e,t,n,i,r){var a=e[n]||(e[n]={active:0,count:0}),o=a[i];if(!o){var l=r.time;o=a[i]={tween:new s,time:l,delay:r.delay,duration:r.duration,ease:r.ease,index:t},r=null,++a.count,to.timer(function(r){function s(n){if(a.active>i)return u();var r=a[a.active];r&&(--a.count,delete a[a.active],r.event&&r.event.interrupt.call(e,e.__data__,r.index)),a.active=i,o.event&&o.event.start.call(e,e.__data__,t),o.tween.forEach(function(n,i){(i=i.call(e,e.__data__,t))&&g.push(i)}),p=o.ease,d=o.duration,to.timer(function(){return f.c=c(n||1)?At:c,1},0,l)}function c(n){if(a.active!==i)return 1;for(var r=n/d,s=p(r),l=g.length;l>0;)g[--l].call(e,s);return r>=1?(o.event&&o.event.end.call(e,e.__data__,t),u()):void 0}function u(){return--a.count?delete a[i]:delete e[n],1}var d,p,h=o.delay,f=ss,g=[];return f.t=h+l,r>=h?s(r-h):void(f.c=s)},0,l)}}function Ka(e,t,n){e.attr("transform",function(e){var i=t(e);return"translate("+(isFinite(i)?i:n(e))+",0)"})}function Xa(e,t,n){e.attr("transform",function(e){var i=t(e);return"translate(0,"+(isFinite(i)?i:n(e))+")"})}function Ya(e){return e.toISOString()}function Ja(e,t,n){function i(t){return e(t)}function r(e,n){var i=e[1]-e[0],r=i/n,a=to.bisect(Yl,r);return a==Yl.length?[t.year,Wr(e.map(function(e){return e/31536e6}),n)[2]]:a?t[r/Yl[a-1]<Yl[a]/r?a-1:a]:[Zl,Wr(e,n)[2]]}return i.invert=function(t){return Qa(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(Qa)},i.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,Qa(+n+1),t).length}var a=i.domain(),o=Lr(a),s=null==e?r(o,10):"number"==typeof e&&r(o,e);return s&&(e=s[0],t=s[1]),i.domain(Ur(a,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=Qa(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=Qa(+t+1);return t}}:e))},i.ticks=function(e,t){var n=Lr(i.domain()),a=null==e?r(n,10):"number"==typeof e?r(n,e):!e.range&&[{range:e},t];return a&&(e=a[0],t=a[1]),e.range(n[0],Qa(+n[1]+1),1>t?1:t)},i.tickFormat=function(){return n},i.copy=function(){return Ja(e.copy(),t,n)},Hr(i,e)}function Qa(e){return new Date(e)}function Za(e){return JSON.parse(e.responseText)}function eo(e){var t=ro.createRange();return t.selectNode(ro.body),t.createContextualFragment(e.responseText)}var to={version:"3.5.3"};Date.now||(Date.now=function(){return+new Date});var no=[].slice,io=function(e){return no.call(e)},ro=document,ao=ro.documentElement,oo=window;try{io(ao.childNodes)[0].nodeType}catch(so){io=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}try{ro.createElement("div").style.setProperty("opacity",0,"")}catch(lo){var co=oo.Element.prototype,uo=co.setAttribute,po=co.setAttributeNS,ho=oo.CSSStyleDeclaration.prototype,fo=ho.setProperty;co.setAttribute=function(e,t){uo.call(this,e,t+"")},co.setAttributeNS=function(e,t,n){po.call(this,e,t,n+"")},ho.setProperty=function(e,t,n){fo.call(this,e,t+"",n)}}to.ascending=e,to.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},to.min=function(e,t){var n,i,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=e[r])&&n>i&&(n=i)}else{for(;++r<a;)if(null!=(i=t.call(e,e[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=t.call(e,e[r],r))&&n>i&&(n=i)}return n},to.max=function(e,t){var n,i,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=e[r])&&i>n&&(n=i)}else{for(;++r<a;)if(null!=(i=t.call(e,e[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=t.call(e,e[r],r))&&i>n&&(n=i)}return n},to.extent=function(e,t){var n,i,r,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(i=e[a])&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=e[a])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++a<o;)if(null!=(i=t.call(e,e[a],a))&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=t.call(e,e[a],a))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},to.sum=function(e,t){var i,r=0,a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)n(i=+e[o])&&(r+=i);else for(;++o<a;)n(i=+t.call(e,e[o],o))&&(r+=i);return r},to.mean=function(e,i){var r,a=0,o=e.length,s=-1,l=o;if(1===arguments.length)for(;++s<o;)n(r=t(e[s]))?a+=r:--l;else for(;++s<o;)n(r=t(i.call(e,e[s],s)))?a+=r:--l;return l?a/l:void 0},to.quantile=function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),r=+e[i-1],a=n-i;return a?r+a*(e[i]-r):r},to.median=function(i,r){var a,o=[],s=i.length,l=-1;if(1===arguments.length)for(;++l<s;)n(a=t(i[l]))&&o.push(a);else for(;++l<s;)n(a=t(r.call(i,i[l],l)))&&o.push(a);return o.length?to.quantile(o.sort(e),.5):void 0},to.variance=function(e,i){var r,a,o=e.length,s=0,l=0,c=-1,u=0;if(1===arguments.length)for(;++c<o;)n(r=t(e[c]))&&(a=r-s,s+=a/++u,l+=a*(r-s));else for(;++c<o;)n(r=t(i.call(e,e[c],c)))&&(a=r-s,s+=a/++u,l+=a*(r-s));return u>1?l/(u-1):void 0},to.deviation=function(){var e=to.variance.apply(this,arguments);return e?Math.sqrt(e):e};var go=i(e);to.bisectLeft=go.left,to.bisect=to.bisectRight=go.right,to.bisector=function(t){return i(1===t.length?function(n,i){return e(t(n),i)}:t)},to.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,2>a&&(t=0));for(var i,r,a=n-t;a;)r=Math.random()*a--|0,i=e[a+t],e[a+t]=e[r+t],e[r+t]=i;return e},to.permute=function(e,t){for(var n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i},to.pairs=function(e){for(var t,n=0,i=e.length-1,r=e[0],a=new Array(0>i?0:i);i>n;)a[n]=[t=r,r=e[++n]];return a},to.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,t=to.min(arguments,r),n=new Array(t);++e<t;)for(var i,a=-1,o=n[e]=new Array(i);++a<i;)o[a]=arguments[a][e];return n},to.transpose=function(e){return to.zip.apply(to,e)},to.keys=function(e){var t=[];for(var n in e)t.push(n);return t},to.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},to.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},to.merge=function(e){for(var t,n,i,r=e.length,a=-1,o=0;++a<r;)o+=e[a].length;for(n=new Array(o);--r>=0;)for(i=e[r],t=i.length;--t>=0;)n[--o]=i[t];return n};var mo=Math.abs;to.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var i,r=[],o=a(mo(n)),s=-1;if(e*=o,t*=o,n*=o,0>n)for(;(i=e+n*++s)>t;)r.push(i/o);else for(;(i=e+n*++s)<t;)r.push(i/o);return r},to.map=function(e,t){var n=new s;if(e instanceof s)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var i,r=-1,a=e.length;if(1===arguments.length)for(;++r<a;)n.set(r,e[r]);else for(;++r<a;)n.set(t.call(e,i=e[r],r),i)}else for(var o in e)n.set(o,e[o]);return n};var vo="__proto__",yo="\x00";o(s,{has:u,get:function(e){return this._[l(e)]},set:function(e,t){return this._[l(e)]=t},remove:d,keys:p,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:c(t),value:this._[t]});return e},size:h,empty:f,forEach:function(e){for(var t in this._)e.call(this,c(t),this._[t])}}),to.nest=function(){function e(t,o,l){if(l>=a.length)return i?i.call(r,o):n?o.sort(n):o;for(var c,u,d,p,h=-1,f=o.length,g=a[l++],m=new s;++h<f;)(p=m.get(c=g(u=o[h])))?p.push(u):m.set(c,[u]);return t?(u=t(),d=function(n,i){u.set(n,e(t,i,l))}):(u={},d=function(n,i){u[n]=e(t,i,l)}),m.forEach(d),u}function t(e,n){if(n>=a.length)return e;var i=[],r=o[n++];return e.forEach(function(e,r){i.push({key:e,values:t(r,n)})}),r?i.sort(function(e,t){return r(e.key,t.key)}):i}var n,i,r={},a=[],o=[];return r.map=function(t,n){return e(n,t,0)},r.entries=function(n){return t(e(to.map,n,0),0)},r.key=function(e){return a.push(e),r},r.sortKeys=function(e){return o[a.length-1]=e,r},r.sortValues=function(e){return n=e,r},r.rollup=function(e){return i=e,r},r},to.set=function(e){var t=new g;if(e)for(var n=0,i=e.length;i>n;++n)t.add(e[n]);return t},o(g,{has:u,add:function(e){return this._[l(e+="")]=!0,e},remove:d,values:p,size:h,empty:f,forEach:function(e){for(var t in this._)e.call(this,c(t))}}),to.behavior={},to.rebind=function(e,t){for(var n,i=1,r=arguments.length;++i<r;)e[n=arguments[i]]=m(e,t,t[n]);return e};var bo=["webkit","ms","moz","Moz","o","O"];to.dispatch=function(){for(var e=new b,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=w(e);return e},b.prototype.on=function(e,t){var n=e.indexOf("."),i="";if(n>=0&&(i=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(i):this[e].on(i,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(i,null);return this}},to.event=null,to.requote=function(e){return e.replace(wo,"\\$&")};var wo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,xo={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},ko=function(e,t){return t.querySelector(e)},Co=function(e,t){return t.querySelectorAll(e)},So=ao.matches||ao[v(ao,"matchesSelector")],_o=function(e,t){return So.call(e,t)};"function"==typeof Sizzle&&(ko=function(e,t){return Sizzle(e,t)[0]||null},Co=Sizzle,_o=Sizzle.matchesSelector),to.selection=function(){return Eo};var To=to.selection.prototype=[];To.select=function(e){var t,n,i,r,a=[];e=_(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(i=this[o]).parentNode;for(var l=-1,c=i.length;++l<c;)(r=i[l])?(t.push(n=e.call(r,r.__data__,l,o)),n&&"__data__"in r&&(n.__data__=r.__data__)):t.push(null)}return S(a)},To.selectAll=function(e){var t,n,i=[];e=T(e);for(var r=-1,a=this.length;++r<a;)for(var o=this[r],s=-1,l=o.length;++s<l;)(n=o[s])&&(i.push(t=io(e.call(n,n.__data__,s,r))),t.parentNode=n);return S(i)};var $o={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};to.ns={prefix:$o,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.slice(0,t),e=e.slice(t+1)),$o.hasOwnProperty(n)?{space:$o[n],local:e}:e}},To.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=to.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each($(t,e[t]));return this}return this.each($(e,t))},To.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),i=(e=P(e)).length,r=-1;if(t=n.classList){for(;++r<i;)if(!t.contains(e[r]))return!1}else for(t=n.getAttribute("class");++r<i;)if(!E(e[r]).test(t))return!1;return!0}for(t in e)this.each(I(t,e[t]));return this}return this.each(I(e,t))},To.style=function(e,t,n){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(t="");for(n in e)this.each(M(n,e[n],t));return this}if(2>i)return oo.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(M(e,t,n))},To.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(N(t,e[t]));return this}return this.each(N(e,t))},To.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},To.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},To.append=function(e){return e=j(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},To.insert=function(e,t){return e=j(e),t=_(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},To.remove=function(){return this.each(O)},To.data=function(e,t){function n(e,n){var i,r,a,o=e.length,d=n.length,p=Math.min(o,d),h=new Array(d),f=new Array(d),g=new Array(o);if(t){var m,v=new s,y=new Array(o);for(i=-1;++i<o;)v.has(m=t.call(r=e[i],r.__data__,i))?g[i]=r:v.set(m,r),y[i]=m;for(i=-1;++i<d;)(r=v.get(m=t.call(n,a=n[i],i)))?r!==!0&&(h[i]=r,r.__data__=a):f[i]=L(a),v.set(m,!0);for(i=-1;++i<o;)v.get(y[i])!==!0&&(g[i]=e[i])}else{for(i=-1;++i<p;)r=e[i],a=n[i],r?(r.__data__=a,h[i]=r):f[i]=L(a);for(;d>i;++i)f[i]=L(n[i]);for(;o>i;++i)g[i]=e[i]}f.update=h,f.parentNode=h.parentNode=g.parentNode=e.parentNode,l.push(f),c.push(h),u.push(g)}var i,r,a=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(i=this[0]).length);++a<o;)(r=i[a])&&(e[a]=r.__data__);return e}var l=z([]),c=S([]),u=S([]);if("function"==typeof e)for(;++a<o;)n(i=this[a],e.call(i,i.parentNode.__data__,a));else for(;++a<o;)n(i=this[a],e);return c.enter=function(){return l},c.exit=function(){return u},c},To.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},To.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=R(e));for(var a=0,o=this.length;o>a;a++){r.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;l>s;s++)(i=n[s])&&e.call(i,i.__data__,s,a)&&t.push(i)}return S(r)},To.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,i=this[e],r=i.length-1,a=i[r];--r>=0;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},To.sort=function(e){e=F.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},To.each=function(e){return U(this,function(t,n,i){e.call(t,t.__data__,n,i)})},To.call=function(e){var t=io(arguments);return e.apply(t[0]=this,t),this},To.empty=function(){return!this.node()},To.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],i=0,r=n.length;r>i;i++){var a=n[i];if(a)return a}return null},To.size=function(){var e=0;return U(this,function(){++e}),e};var Ao=[];to.selection.enter=z,to.selection.enter.prototype=Ao,Ao.append=To.append,Ao.empty=To.empty,Ao.node=To.node,Ao.call=To.call,Ao.size=To.size,Ao.select=function(e){for(var t,n,i,r,a,o=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,o.push(t=[]),t.parentNode=r.parentNode;for(var c=-1,u=r.length;++c<u;)(a=r[c])?(t.push(i[c]=n=e.call(r.parentNode,a.__data__,c,s)),n.__data__=a.__data__):t.push(null)}return S(o)},Ao.insert=function(e,t){return arguments.length<2&&(t=q(this)),To.insert.call(this,e,t)},to.select=function(e){var t=["string"==typeof e?ko(e,ro):e];return t.parentNode=ao,S([t])},to.selectAll=function(e){var t=io("string"==typeof e?Co(e,ro):e);return t.parentNode=ao,S([t])};var Eo=to.select(ao);To.on=function(e,t,n){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(t=!1);for(n in e)this.each(B(n,e[n],t));return this}if(2>i)return(i=this.node()["__on"+e])&&i._;n=!1}return this.each(B(e,t,n))};var Po=to.map({mouseenter:"mouseover",mouseleave:"mouseout"});Po.forEach(function(e){"on"+e in ro&&Po.remove(e)});var Io="onselectstart"in ro?null:v(ao.style,"userSelect"),Do=0;to.mouse=function(e){return G(e,k())};var Mo=/WebKit/.test(oo.navigator.userAgent)?-1:0;to.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=k().changedTouches),t)for(var i,r=0,a=t.length;a>r;++r)if((i=t[r]).identifier===n)return G(e,i)},to.behavior.drag=function(){function e(){this.on("mousedown.drag",r).on("touchstart.drag",a)}function t(e,t,r,a,o){return function(){function s(){var e,n,i=t(p,g);i&&(e=i[0]-b[0],n=i[1]-b[1],f|=e|n,b=i,h({type:"drag",x:i[0]+c[0],y:i[1]+c[1],dx:e,dy:n}))}function l(){t(p,g)&&(v.on(a+m,null).on(o+m,null),y(f&&to.event.target===d),h({type:"dragend"}))}var c,u=this,d=to.event.target,p=u.parentNode,h=n.of(u,arguments),f=0,g=e(),m=".drag"+(null==g?"":"-"+g),v=to.select(r()).on(a+m,s).on(o+m,l),y=W(),b=t(p,g);i?(c=i.apply(u,arguments),c=[c.x-b[0],c.y-b[1]]):c=[0,0],h({type:"dragstart"})}}var n=C(e,"drag","dragstart","dragend"),i=null,r=t(y,to.mouse,Y,"mousemove","mouseup"),a=t(K,to.touch,X,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},to.rebind(e,n,"on")},to.touches=function(e,t){return arguments.length<2&&(t=k().touches),t?io(t).map(function(t){var n=G(e,t);return n.identifier=t.identifier,n}):[]};var No=1e-6,jo=No*No,Oo=Math.PI,Lo=2*Oo,Ro=Lo-No,Fo=Oo/2,Uo=Oo/180,zo=180/Oo,qo=Math.SQRT2,Bo=2,Ho=4;to.interpolateZoom=function(e,t){function n(e){var t=e*y;if(v){var n=ne(g),o=a/(Bo*p)*(n*ie(qo*t+g)-te(g));return[i+o*c,r+o*u,a*n/ne(qo*t+g)]}return[i+e*c,r+e*u,a*Math.exp(qo*t)]}var i=e[0],r=e[1],a=e[2],o=t[0],s=t[1],l=t[2],c=o-i,u=s-r,d=c*c+u*u,p=Math.sqrt(d),h=(l*l-a*a+Ho*d)/(2*a*Bo*p),f=(l*l-a*a-Ho*d)/(2*l*Bo*p),g=Math.log(Math.sqrt(h*h+1)-h),m=Math.log(Math.sqrt(f*f+1)-f),v=m-g,y=(v||Math.log(l/a))/qo;return n.duration=1e3*y,n},to.behavior.zoom=function(){function e(e){e.on(P,u).on(Go+".zoom",p).on("dblclick.zoom",h).on(M,d)}function t(e){return[(e[0]-_.x)/_.k,(e[1]-_.y)/_.k]}function n(e){return[e[0]*_.k+_.x,e[1]*_.k+_.y]}function i(e){_.k=Math.max($[0],Math.min($[1],e))}function r(e,t){t=n(t),_.x+=e[0]-t[0],_.y+=e[1]-t[1]}function a(t,n,a,o){t.__chart__={x:_.x,y:_.y,k:_.k},i(Math.pow(2,o)),r(g=n,a),t=to.select(t),A>0&&(t=t.transition().duration(A)),t.call(e.event)}function o(){w&&w.domain(b.range().map(function(e){return(e-_.x)/_.k}).map(b.invert)),S&&S.domain(k.range().map(function(e){return(e-_.y)/_.k}).map(k.invert))}function s(e){E++||e({type:"zoomstart"})}function l(e){o(),e({type:"zoom",scale:_.k,translate:[_.x,_.y]})}function c(e){--E||e({type:"zoomend"}),g=null}function u(){function e(){u=1,r(to.mouse(i),p),l(o)}function n(){d.on(I,null).on(D,null),h(u&&to.event.target===a),c(o)}var i=this,a=to.event.target,o=N.of(i,arguments),u=0,d=to.select(oo).on(I,e).on(D,n),p=t(to.mouse(i)),h=W();Ul.call(i),s(o)}function d(){function e(){var e=to.touches(f);return h=_.k,e.forEach(function(e){e.identifier in m&&(m[e.identifier]=t(e))}),e}function n(){var t=to.event.target;to.select(t).on(w,o).on(k,p),C.push(t);for(var n=to.event.changedTouches,i=0,r=n.length;r>i;++i)m[n[i].identifier]=null;var s=e(),l=Date.now();if(1===s.length){if(500>l-y){var c=s[0];a(f,c,m[c.identifier],Math.floor(Math.log(_.k)/Math.LN2)+1),x()}y=l}else if(s.length>1){var c=s[0],u=s[1],d=c[0]-u[0],h=c[1]-u[1];v=d*d+h*h}}function o(){var e,t,n,a,o=to.touches(f);Ul.call(f);for(var s=0,c=o.length;c>s;++s,a=null)if(n=o[s],a=m[n.identifier]){if(t)break;e=n,t=a}if(a){var u=(u=n[0]-e[0])*u+(u=n[1]-e[1])*u,d=v&&Math.sqrt(u/v);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+a[0])/2,(t[1]+a[1])/2],i(d*h)}y=null,r(e,t),l(g)}function p(){if(to.event.touches.length){for(var t=to.event.changedTouches,n=0,i=t.length;i>n;++n)delete m[t[n].identifier];for(var r in m)return void e()}to.selectAll(C).on(b,null),S.on(P,u).on(M,d),T(),c(g)}var h,f=this,g=N.of(f,arguments),m={},v=0,b=".zoom-"+to.event.changedTouches[0].identifier,w="touchmove"+b,k="touchend"+b,C=[],S=to.select(f),T=W();n(),s(g),S.on(P,null).on(M,n)}function p(){var e=N.of(this,arguments);v?clearTimeout(v):(f=t(g=m||to.mouse(this)),Ul.call(this),s(e)),v=setTimeout(function(){v=null,c(e)},50),x(),i(Math.pow(2,.002*Vo())*_.k),r(g,f),l(e)}function h(){var e=to.mouse(this),n=Math.log(_.k)/Math.LN2;a(this,e,t(e),to.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var f,g,m,v,y,b,w,k,S,_={x:0,y:0,k:1},T=[960,500],$=Wo,A=250,E=0,P="mousedown.zoom",I="mousemove.zoom",D="mouseup.zoom",M="touchstart.zoom",N=C(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=N.of(this,arguments),t=_;Rl?to.select(this).transition().each("start.zoom",function(){_=this.__chart__||{x:0,y:0,k:1},s(e)}).tween("zoom:zoom",function(){var n=T[0],i=T[1],r=g?g[0]:n/2,a=g?g[1]:i/2,o=to.interpolateZoom([(r-_.x)/_.k,(a-_.y)/_.k,n/_.k],[(r-t.x)/t.k,(a-t.y)/t.k,n/t.k]);return function(t){var i=o(t),s=n/i[2];this.__chart__=_={x:r-i[0]*s,y:a-i[1]*s,k:s},l(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=_,s(e),l(e),c(e))})},e.translate=function(t){return arguments.length?(_={x:+t[0],y:+t[1],k:_.k},o(),e):[_.x,_.y]},e.scale=function(t){return arguments.length?(_={x:_.x,y:_.y,k:+t},o(),e):_.k},e.scaleExtent=function(t){return arguments.length?($=null==t?Wo:[+t[0],+t[1]],e):$},e.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],e):m},e.size=function(t){return arguments.length?(T=t&&[+t[0],+t[1]],e):T},e.duration=function(t){return arguments.length?(A=+t,e):A},e.x=function(t){return arguments.length?(w=t,b=t.copy(),_={x:0,y:0,k:1},e):w},e.y=function(t){return arguments.length?(S=t,k=t.copy(),_={x:0,y:0,k:1},e):S},to.rebind(e,N,"on")};var Vo,Wo=[0,1/0],Go="onwheel"in ro?(Vo=function(){return-to.event.deltaY*(to.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ro?(Vo=function(){return to.event.wheelDelta},"mousewheel"):(Vo=function(){return-to.event.detail},"MozMousePixelScroll");to.color=ae,ae.prototype.toString=function(){return this.rgb()+""},to.hsl=oe;var Ko=oe.prototype=new ae;Ko.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new oe(this.h,this.s,this.l/e)},Ko.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new oe(this.h,this.s,e*this.l)},Ko.rgb=function(){return se(this.h,this.s,this.l)},to.hcl=le;var Xo=le.prototype=new ae;Xo.brighter=function(e){return new le(this.h,this.c,Math.min(100,this.l+Yo*(arguments.length?e:1)))},Xo.darker=function(e){return new le(this.h,this.c,Math.max(0,this.l-Yo*(arguments.length?e:1)))},Xo.rgb=function(){return ce(this.h,this.c,this.l).rgb()},to.lab=ue;var Yo=18,Jo=.95047,Qo=1,Zo=1.08883,es=ue.prototype=new ae;es.brighter=function(e){return new ue(Math.min(100,this.l+Yo*(arguments.length?e:1)),this.a,this.b)},es.darker=function(e){return new ue(Math.max(0,this.l-Yo*(arguments.length?e:1)),this.a,this.b)},es.rgb=function(){return de(this.l,this.a,this.b)},to.rgb=me;var ts=me.prototype=new ae;ts.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,i=this.b,r=30;return t||n||i?(t&&r>t&&(t=r),n&&r>n&&(n=r),i&&r>i&&(i=r),new me(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,i/e))):new me(r,r,r)},ts.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new me(e*this.r,e*this.g,e*this.b)},ts.hsl=function(){return xe(this.r,this.g,this.b)},ts.toString=function(){return"#"+be(this.r)+be(this.g)+be(this.b)};var ns=to.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ns.forEach(function(e,t){ns.set(e,ve(t))}),to.functor=_e,to.xhr=$e(Te),to.dsv=function(e,t){function n(e,n,a){arguments.length<3&&(a=n,n=null);var o=Ae(e,t,null==n?i:r(n),a);return o.row=function(e){return arguments.length?o.response(null==(n=e)?i:r(e)):n},o}function i(e){return n.parse(e.responseText)}function r(e){return function(t){return n.parse(t.responseText,e)}}function a(t){return t.map(o).join(e)}function o(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return n.parse=function(e,t){var i;return n.parseRows(e,function(e,n){if(i)return i(e,n-1);var r=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");i=t?function(e,n){return t(r(e),n)}:r})},n.parseRows=function(e,t){function n(){if(u>=c)return o;if(r)return r=!1,a;var t=u;if(34===e.charCodeAt(t)){for(var n=t;n++<c;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}u=n+2;var i=e.charCodeAt(n+1);return 13===i?(r=!0,10===e.charCodeAt(n+2)&&++u):10===i&&(r=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;c>u;){var i=e.charCodeAt(u++),s=1;if(10===i)r=!0;else if(13===i)r=!0,10===e.charCodeAt(u)&&(++u,++s);else if(i!==l)continue;return e.slice(t,u-s)}return e.slice(t)}for(var i,r,a={},o={},s=[],c=e.length,u=0,d=0;(i=n())!==o;){for(var p=[];i!==a&&i!==o;)p.push(i),i=n();t&&null==(p=t(p,d++))||s.push(p)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var i=new g,r=[];return t.forEach(function(e){for(var t in e)i.has(t)||r.push(i.add(t))}),[r.map(o).join(e)].concat(t.map(function(t){return r.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(a).join("\n")},n},to.csv=to.dsv(",","text/csv"),to.tsv=to.dsv("	","text/tab-separated-values");var is,rs,as,os,ss,ls=oo[v(oo,"requestAnimationFrame")]||function(e){setTimeout(e,17)};to.timer=function(e,t,n){var i=arguments.length;2>i&&(t=0),3>i&&(n=Date.now());var r=n+t,a={c:e,t:r,f:!1,n:null};rs?rs.n=a:is=a,rs=a,as||(os=clearTimeout(os),as=1,ls(Ie))},to.timer.flush=function(){De(),Me()},to.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var cs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(je);to.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=to.round(e,Ne(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),cs[8+n/3]};var us=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ds=to.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=to.round(e,Ne(e,t))).toFixed(Math.max(0,Math.min(20,Ne(e*(1+1e-15),t))))}}),ps=to.time={},hs=Date;Re.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){fs.setUTCDate.apply(this._,arguments)},setDay:function(){fs.setUTCDay.apply(this._,arguments)},setFullYear:function(){fs.setUTCFullYear.apply(this._,arguments)},setHours:function(){fs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){fs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){fs.setUTCMinutes.apply(this._,arguments);

},setMonth:function(){fs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){fs.setUTCSeconds.apply(this._,arguments)},setTime:function(){fs.setTime.apply(this._,arguments)}};var fs=Date.prototype;ps.year=Fe(function(e){return e=ps.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),ps.years=ps.year.range,ps.years.utc=ps.year.utc.range,ps.day=Fe(function(e){var t=new hs(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),ps.days=ps.day.range,ps.days.utc=ps.day.utc.range,ps.dayOfYear=function(e){var t=ps.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=ps[e]=Fe(function(e){return(e=ps.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=ps.year(e).getDay();return Math.floor((ps.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});ps[e+"s"]=n.range,ps[e+"s"].utc=n.utc.range,ps[e+"OfYear"]=function(e){var n=ps.year(e).getDay();return Math.floor((ps.dayOfYear(e)+(n+t)%7)/7)}}),ps.week=ps.sunday,ps.weeks=ps.sunday.range,ps.weeks.utc=ps.sunday.utc.range,ps.weekOfYear=ps.sundayOfYear;var gs={"-":"",_:" ",0:"0"},ms=/^\s*\d+/,vs=/^%/;to.locale=function(e){return{numberFormat:Oe(e),timeFormat:ze(e)}};var ys=to.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});to.format=ys.numberFormat,to.geo={},lt.prototype={s:0,t:0,add:function(e){ct(e,this.t,bs),ct(bs.s,this.s,this),this.s?this.t+=bs.t:this.s=bs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var bs=new lt;to.geo.stream=function(e,t){e&&ws.hasOwnProperty(e.type)?ws[e.type](e,t):ut(e,t)};var ws={Feature:function(e,t){ut(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)ut(n[i].geometry,t)}},xs={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){dt(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)dt(n[i],t,0)},Polygon:function(e,t){pt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)pt(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)ut(n[i],t)}};to.geo.area=function(e){return ks=0,to.geo.stream(e,Ss),ks};var ks,Cs=new lt,Ss={sphere:function(){ks+=4*Oo},point:y,lineStart:y,lineEnd:y,polygonStart:function(){Cs.reset(),Ss.lineStart=ht},polygonEnd:function(){var e=2*Cs;ks+=0>e?4*Oo+e:e,Ss.lineStart=Ss.lineEnd=Ss.point=y}};to.geo.bounds=function(){function e(e,t){b.push(w=[u=e,p=e]),d>t&&(d=t),t>h&&(h=t)}function t(t,n){var i=ft([t*Uo,n*Uo]);if(v){var r=mt(v,i),a=[r[1],-r[0],0],o=mt(a,r);bt(o),o=wt(o);var l=t-f,c=l>0?1:-1,g=o[0]*zo*c,m=mo(l)>180;if(m^(g>c*f&&c*t>g)){var y=o[1]*zo;y>h&&(h=y)}else if(g=(g+360)%360-180,m^(g>c*f&&c*t>g)){var y=-o[1]*zo;d>y&&(d=y)}else d>n&&(d=n),n>h&&(h=n);m?f>t?s(u,t)>s(u,p)&&(p=t):s(t,p)>s(u,p)&&(u=t):p>=u?(u>t&&(u=t),t>p&&(p=t)):t>f?s(u,t)>s(u,p)&&(p=t):s(t,p)>s(u,p)&&(u=t)}else e(t,n);v=i,f=t}function n(){x.point=t}function i(){w[0]=u,w[1]=p,x.point=e,v=null}function r(e,n){if(v){var i=e-f;y+=mo(i)>180?i+(i>0?360:-360):i}else g=e,m=n;Ss.point(e,n),t(e,n)}function a(){Ss.lineStart()}function o(){r(g,m),Ss.lineEnd(),mo(y)>No&&(u=-(p=180)),w[0]=u,w[1]=p,v=null}function s(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function c(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var u,d,p,h,f,g,m,v,y,b,w,x={point:e,lineStart:n,lineEnd:i,polygonStart:function(){x.point=r,x.lineStart=a,x.lineEnd=o,y=0,Ss.polygonStart()},polygonEnd:function(){Ss.polygonEnd(),x.point=e,x.lineStart=n,x.lineEnd=i,0>Cs?(u=-(p=180),d=-(h=90)):y>No?h=90:-No>y&&(d=-90),w[0]=u,w[1]=p}};return function(e){h=p=-(u=d=1/0),b=[],to.geo.stream(e,x);var t=b.length;if(t){b.sort(l);for(var n,i=1,r=b[0],a=[r];t>i;++i)n=b[i],c(n[0],r)||c(n[1],r)?(s(r[0],n[1])>s(r[0],r[1])&&(r[1]=n[1]),s(n[0],r[1])>s(r[0],r[1])&&(r[0]=n[0])):a.push(r=n);for(var o,n,f=-(1/0),t=a.length-1,i=0,r=a[t];t>=i;r=n,++i)n=a[i],(o=s(r[1],n[0]))>f&&(f=o,u=n[0],p=r[1])}return b=w=null,u===1/0||d===1/0?[[0/0,0/0],[0/0,0/0]]:[[u,d],[p,h]]}}(),to.geo.centroid=function(e){_s=Ts=$s=As=Es=Ps=Is=Ds=Ms=Ns=js=0,to.geo.stream(e,Os);var t=Ms,n=Ns,i=js,r=t*t+n*n+i*i;return jo>r&&(t=Ps,n=Is,i=Ds,No>Ts&&(t=$s,n=As,i=Es),r=t*t+n*n+i*i,jo>r)?[0/0,0/0]:[Math.atan2(n,t)*zo,ee(i/Math.sqrt(r))*zo]};var _s,Ts,$s,As,Es,Ps,Is,Ds,Ms,Ns,js,Os={sphere:y,point:kt,lineStart:St,lineEnd:_t,polygonStart:function(){Os.lineStart=Tt},polygonEnd:function(){Os.lineStart=St}},Ls=Dt(At,Ot,Rt,[-Oo,-Oo/2]),Rs=1e9;to.geo.clipExtent=function(){var e,t,n,i,r,a,o={stream:function(e){return r&&(r.valid=!1),r=a(e),r.valid=!0,r},extent:function(s){return arguments.length?(a=qt(e=+s[0][0],t=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),o):[[e,t],[n,i]]}};return o.extent([[0,0],[960,500]])},(to.geo.conicEqualArea=function(){return Bt(Ht)}).raw=Ht,to.geo.albers=function(){return to.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},to.geo.albersUsa=function(){function e(e){var a=e[0],o=e[1];return t=null,n(a,o),t||(i(a,o),t)||r(a,o),t}var t,n,i,r,a=to.geo.albers(),o=to.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=to.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=a.scale(),n=a.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?o:r>=.166&&.234>r&&i>=-.214&&-.115>i?s:a).invert(e)},e.stream=function(e){var t=a.stream(e),n=o.stream(e),i=s.stream(e);return{point:function(e,r){t.point(e,r),n.point(e,r),i.point(e,r)},sphere:function(){t.sphere(),n.sphere(),i.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},e.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),s.precision(t),e):a.precision()},e.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),s.scale(t),e.translate(a.translate())):a.scale()},e.translate=function(t){if(!arguments.length)return a.translate();var c=a.scale(),u=+t[0],d=+t[1];return n=a.translate(t).clipExtent([[u-.455*c,d-.238*c],[u+.455*c,d+.238*c]]).stream(l).point,i=o.translate([u-.307*c,d+.201*c]).clipExtent([[u-.425*c+No,d+.12*c+No],[u-.214*c-No,d+.234*c-No]]).stream(l).point,r=s.translate([u-.205*c,d+.212*c]).clipExtent([[u-.214*c+No,d+.166*c+No],[u-.115*c-No,d+.234*c-No]]).stream(l).point,e},e.scale(1070)};var Fs,Us,zs,qs,Bs,Hs,Vs={point:y,lineStart:y,lineEnd:y,polygonStart:function(){Us=0,Vs.lineStart=Vt},polygonEnd:function(){Vs.lineStart=Vs.lineEnd=Vs.point=y,Fs+=mo(Us/2)}},Ws={point:Wt,lineStart:y,lineEnd:y,polygonStart:y,polygonEnd:y},Gs={point:Xt,lineStart:Yt,lineEnd:Jt,polygonStart:function(){Gs.lineStart=Qt},polygonEnd:function(){Gs.point=Xt,Gs.lineStart=Yt,Gs.lineEnd=Jt}};to.geo.path=function(){function e(e){return e&&("function"==typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=r(a)),to.geo.stream(e,o)),a.result()}function t(){return o=null,e}var n,i,r,a,o,s=4.5;return e.area=function(e){return Fs=0,to.geo.stream(e,r(Vs)),Fs},e.centroid=function(e){return $s=As=Es=Ps=Is=Ds=Ms=Ns=js=0,to.geo.stream(e,r(Gs)),js?[Ms/js,Ns/js]:Ds?[Ps/Ds,Is/Ds]:Es?[$s/Es,As/Es]:[0/0,0/0]},e.bounds=function(e){return Bs=Hs=-(zs=qs=1/0),to.geo.stream(e,r(Ws)),[[zs,qs],[Bs,Hs]]},e.projection=function(e){return arguments.length?(r=(n=e)?e.stream||tn(e):Te,t()):n},e.context=function(e){return arguments.length?(a=null==(i=e)?new Gt:new Zt(e),"function"!=typeof s&&a.pointRadius(s),t()):i},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(a.pointRadius(+t),+t),e):s},e.projection(to.geo.albersUsa()).context(null)},to.geo.transform=function(e){return{stream:function(t){var n=new nn(t);for(var i in e)n[i]=e[i];return n}}},nn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},to.geo.projection=an,to.geo.projectionMutator=on,(to.geo.equirectangular=function(){return an(ln)}).raw=ln.invert=ln,to.geo.rotation=function(e){function t(t){return t=e(t[0]*Uo,t[1]*Uo),t[0]*=zo,t[1]*=zo,t}return e=un(e[0]%360*Uo,e[1]*Uo,e.length>2?e[2]*Uo:0),t.invert=function(t){return t=e.invert(t[0]*Uo,t[1]*Uo),t[0]*=zo,t[1]*=zo,t},t},cn.invert=ln,to.geo.circle=function(){function e(){var e="function"==typeof i?i.apply(this,arguments):i,t=un(-e[0]*Uo,-e[1]*Uo,0).invert,r=[];return n(null,null,1,{point:function(e,n){r.push(e=t(e,n)),e[0]*=zo,e[1]*=zo}}),{type:"Polygon",coordinates:[r]}}var t,n,i=[0,0],r=6;return e.origin=function(t){return arguments.length?(i=t,e):i},e.angle=function(i){return arguments.length?(n=fn((t=+i)*Uo,r*Uo),e):t},e.precision=function(i){return arguments.length?(n=fn(t*Uo,(r=+i)*Uo),e):r},e.angle(90)},to.geo.distance=function(e,t){var n,i=(t[0]-e[0])*Uo,r=e[1]*Uo,a=t[1]*Uo,o=Math.sin(i),s=Math.cos(i),l=Math.sin(r),c=Math.cos(r),u=Math.sin(a),d=Math.cos(a);return Math.atan2(Math.sqrt((n=d*o)*n+(n=c*u-l*d*s)*n),l*u+c*d*s)},to.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return to.range(Math.ceil(a/m)*m,r,m).map(p).concat(to.range(Math.ceil(c/v)*v,l,v).map(h)).concat(to.range(Math.ceil(i/f)*f,n,f).filter(function(e){return mo(e%m)>No}).map(u)).concat(to.range(Math.ceil(s/g)*g,o,g).filter(function(e){return mo(e%v)>No}).map(d))}var n,i,r,a,o,s,l,c,u,d,p,h,f=10,g=f,m=90,v=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[p(a).concat(h(l).slice(1),p(r).reverse().slice(1),h(c).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],r=+t[1][0],c=+t[0][1],l=+t[1][1],a>r&&(t=a,a=r,r=t),c>l&&(t=c,c=l,l=t),e.precision(y)):[[a,c],[r,l]]},e.minorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],i>n&&(t=i,i=n,n=t),s>o&&(t=s,s=o,o=t),e.precision(y)):[[i,s],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],v=+t[1],e):[m,v]},e.minorStep=function(t){return arguments.length?(f=+t[0],g=+t[1],e):[f,g]},e.precision=function(t){return arguments.length?(y=+t,u=mn(s,o,90),d=vn(i,n,y),p=mn(c,l,90),h=vn(a,r,y),e):y},e.majorExtent([[-180,-90+No],[180,90-No]]).minorExtent([[-180,-80-No],[180,80+No]])},to.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||i.apply(this,arguments),n||r.apply(this,arguments)]}}var t,n,i=yn,r=bn;return e.distance=function(){return to.geo.distance(t||i.apply(this,arguments),n||r.apply(this,arguments))},e.source=function(n){return arguments.length?(i=n,t="function"==typeof n?null:n,e):i},e.target=function(t){return arguments.length?(r=t,n="function"==typeof t?null:t,e):r},e.precision=function(){return arguments.length?e:0},e},to.geo.interpolate=function(e,t){return wn(e[0]*Uo,e[1]*Uo,t[0]*Uo,t[1]*Uo)},to.geo.length=function(e){return Ks=0,to.geo.stream(e,Xs),Ks};var Ks,Xs={sphere:y,point:y,lineStart:xn,lineEnd:y,polygonStart:y,polygonEnd:y},Ys=kn(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(to.geo.azimuthalEqualArea=function(){return an(Ys)}).raw=Ys;var Js=kn(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},Te);(to.geo.azimuthalEquidistant=function(){return an(Js)}).raw=Js,(to.geo.conicConformal=function(){return Bt(Cn)}).raw=Cn,(to.geo.conicEquidistant=function(){return Bt(Sn)}).raw=Sn;var Qs=kn(function(e){return 1/e},Math.atan);(to.geo.gnomonic=function(){return an(Qs)}).raw=Qs,_n.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Fo]},(to.geo.mercator=function(){return Tn(_n)}).raw=_n;var Zs=kn(function(){return 1},Math.asin);(to.geo.orthographic=function(){return an(Zs)}).raw=Zs;var el=kn(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(to.geo.stereographic=function(){return an(el)}).raw=el,$n.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Fo]},(to.geo.transverseMercator=function(){var e=Tn($n),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=$n,to.geom={},to.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,r=_e(n),a=_e(i),o=e.length,s=[],l=[];for(t=0;o>t;t++)s.push([+r.call(this,e[t],t),+a.call(this,e[t],t),t]);for(s.sort(In),t=0;o>t;t++)l.push([s[t][0],-s[t][1]]);var c=Pn(s),u=Pn(l),d=u[0]===c[0],p=u[u.length-1]===c[c.length-1],h=[];for(t=c.length-1;t>=0;--t)h.push(e[s[c[t]][2]]);for(t=+d;t<u.length-p;++t)h.push(e[s[u[t]][2]]);return h}var n=An,i=En;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t)},to.geom.polygon=function(e){return xo(e,tl),e};var tl=to.geom.polygon.prototype=[];tl.area=function(){for(var e,t=-1,n=this.length,i=this[n-1],r=0;++t<n;)e=i,i=this[t],r+=e[1]*i[0]-e[0]*i[1];return.5*r},tl.centroid=function(e){var t,n,i=-1,r=this.length,a=0,o=0,s=this[r-1];for(arguments.length||(e=-1/(6*this.area()));++i<r;)t=s,s=this[i],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},tl.clip=function(e){for(var t,n,i,r,a,o,s=Nn(e),l=-1,c=this.length-Nn(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,r=this[l],a=t[(i=t.length-s)-1],n=-1;++n<i;)o=t[n],Dn(o,u,r)?(Dn(a,u,r)||e.push(Mn(a,o,u,r)),e.push(o)):Dn(a,u,r)&&e.push(Mn(a,o,u,r)),a=o;s&&e.push(e[0]),u=r}return e};var nl,il,rl,al,ol,sl=[],ll=[];qn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Hn),t.length},ei.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ti.prototype={insert:function(e,t){var n,i,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ai(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.R&&(ii(this,n),e=n,n=e.U),n.C=!1,i.C=!0,ri(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.L&&(ri(this,n),e=n,n=e.U),n.C=!1,i.C=!0,ii(this,i))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,i,r=e.U,a=e.L,o=e.R;if(n=a?o?ai(o):a:o,r?r.L===e?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(r=n.U,n.U=e.U,e=n.R,r.L=e,n.R=o,o.U=n):(n.U=r,r=n,e=n.R)):(i=e.C,e=n),e&&(e.U=r),!i){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===r.L){if(t=r.R,t.C&&(t.C=!1,r.C=!0,ii(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ri(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,ii(this,r),e=this._;break}}else if(t=r.L,t.C&&(t.C=!1,r.C=!0,ri(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ii(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,ri(this,r),e=this._;break}t.C=!0,e=r,r=r.U}while(!e.C);e&&(e.C=!1)}}},to.geom.voronoi=function(e){function t(e){var t=new Array(e.length),i=s[0][0],r=s[0][1],a=s[1][0],o=s[1][1];return oi(n(e),s).cells.forEach(function(n,s){var l=n.edges,c=n.site,u=t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):c.x>=i&&c.x<=a&&c.y>=r&&c.y<=o?[[i,o],[a,o],[a,r],[i,r]]:[];u.point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/No)*No,y:Math.round(o(e,t)/No)*No,i:t}})}var i=An,r=En,a=i,o=r,s=cl;return e?t(e):(t.links=function(e){return oi(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return oi(n(e)).cells.forEach(function(n,i){for(var r,a,o=n.site,s=n.edges.sort(Hn),l=-1,c=s.length,u=s[c-1].edge,d=u.l===o?u.r:u.l;++l<c;)r=u,a=d,u=s[l].edge,d=u.l===o?u.r:u.l,i<a.i&&i<d.i&&li(o,a,d)<0&&t.push([e[i],e[a.i],e[d.i]])}),t},t.x=function(e){return arguments.length?(a=_e(i=e),t):i},t.y=function(e){return arguments.length?(o=_e(r=e),t):r},t.clipExtent=function(e){return arguments.length?(s=null==e?cl:e,t):s===cl?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===cl?null:s&&s[1]},t)};var cl=[[-1e6,-1e6],[1e6,1e6]];to.geom.delaunay=function(e){return to.geom.voronoi().triangles(e)},to.geom.quadtree=function(e,t,n,i,r){function a(e){function a(e,t,n,i,r,a,o,s){if(!isNaN(n)&&!isNaN(i))if(e.leaf){var l=e.x,u=e.y;if(null!=l)if(mo(l-n)+mo(u-i)<.01)c(e,t,n,i,r,a,o,s);else{var d=e.point;e.x=e.y=e.point=null,c(e,d,l,u,r,a,o,s),c(e,t,n,i,r,a,o,s)}else e.x=n,e.y=i,e.point=t}else c(e,t,n,i,r,a,o,s)}function c(e,t,n,i,r,o,s,l){var c=.5*(r+s),u=.5*(o+l),d=n>=c,p=i>=u,h=p<<1|d;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=di()),d?r=c:s=c,p?o=u:l=u,a(e,t,n,i,r,o,s,l)}var u,d,p,h,f,g,m,v,y,b=_e(s),w=_e(l);if(null!=t)g=t,m=n,v=i,y=r;else if(v=y=-(g=m=1/0),d=[],p=[],f=e.length,o)for(h=0;f>h;++h)u=e[h],u.x<g&&(g=u.x),u.y<m&&(m=u.y),u.x>v&&(v=u.x),u.y>y&&(y=u.y),d.push(u.x),p.push(u.y);else for(h=0;f>h;++h){var x=+b(u=e[h],h),k=+w(u,h);g>x&&(g=x),m>k&&(m=k),x>v&&(v=x),k>y&&(y=k),d.push(x),p.push(k)}var C=v-g,S=y-m;C>S?y=m+C:v=g+S;var _=di();if(_.add=function(e){a(_,e,+b(e,++h),+w(e,h),g,m,v,y)},_.visit=function(e){pi(e,_,g,m,v,y)},_.find=function(e){return hi(_,e[0],e[1],g,m,v,y)},h=-1,null==t){for(;++h<f;)a(_,e[h],d[h],p[h],g,m,v,y);--h}else e.forEach(_.add);return d=p=e=u=null,_}var o,s=An,l=En;return(o=arguments.length)?(s=ci,l=ui,3===o&&(r=n,i=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(l=e,a):l},a.extent=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=+e[0][0],n=+e[0][1],i=+e[1][0],r=+e[1][1]),a):null==t?null:[[t,n],[i,r]]},a.size=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=n=0,i=+e[0],r=+e[1]),a):null==t?null:[i-t,r-n]},a)},to.interpolateRgb=fi,to.interpolateObject=gi,to.interpolateNumber=mi,to.interpolateString=vi;var ul=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dl=new RegExp(ul.source,"g");to.interpolate=yi,to.interpolators=[function(e,t){var n=typeof t;return("string"===n?ns.has(t)||/^(#|rgb\(|hsl\()/.test(t)?fi:vi:t instanceof ae?fi:Array.isArray(t)?bi:"object"===n&&isNaN(t)?gi:mi)(e,t)}],to.interpolateArray=bi;var pl=function(){return Te},hl=to.map({linear:pl,poly:Ti,quad:function(){return Ci},cubic:function(){return Si},sin:function(){return $i},exp:function(){return Ai},circle:function(){return Ei},elastic:Pi,back:Ii,bounce:function(){return Di}}),fl=to.map({"in":Te,out:xi,"in-out":ki,"out-in":function(e){return ki(xi(e))}});to.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,i=t>=0?e.slice(t+1):"in";return n=hl.get(n)||pl,i=fl.get(i)||Te,wi(i(n.apply(null,no.call(arguments,1))))},to.interpolateHcl=Mi,to.interpolateHsl=Ni,to.interpolateLab=ji,to.interpolateRound=Oi,to.transform=function(e){var t=ro.createElementNS(to.ns.prefix.svg,"g");return(to.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Li(n?n.matrix:gl)})(e)},Li.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var gl={a:1,b:0,c:0,d:1,e:0,f:0};to.interpolateTransform=zi,to.layout={},to.layout.bundle=function(){return function(e){for(var t=[],n=-1,i=e.length;++n<i;)t.push(Hi(e[n]));return t}},to.layout.chord=function(){function e(){var e,c,d,p,h,f={},g=[],m=to.range(a),v=[];for(n=[],i=[],e=0,p=-1;++p<a;){for(c=0,h=-1;++h<a;)c+=r[p][h];g.push(c),v.push(to.range(a)),e+=c}for(o&&m.sort(function(e,t){return o(g[e],g[t])}),s&&v.forEach(function(e,t){e.sort(function(e,n){return s(r[t][e],r[t][n])})}),e=(Lo-u*a)/e,c=0,p=-1;++p<a;){for(d=c,h=-1;++h<a;){var y=m[p],b=v[y][h],w=r[y][b],x=c,k=c+=w*e;f[y+"-"+b]={index:y,subindex:b,startAngle:x,endAngle:k,value:w}}i[y]={index:y,startAngle:d,endAngle:c,value:(c-d)/e},c+=u}for(p=-1;++p<a;)for(h=p-1;++h<a;){var C=f[p+"-"+h],S=f[h+"-"+p];(C.value||S.value)&&n.push(C.value<S.value?{source:S,target:C}:{source:C,target:S})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,i,r,a,o,s,l,c={},u=0;return c.matrix=function(e){return arguments.length?(a=(r=e)&&r.length,n=i=null,c):r},c.padding=function(e){return arguments.length?(u=e,n=i=null,c):u},c.sortGroups=function(e){return arguments.length?(o=e,n=i=null,c):o},c.sortSubgroups=function(e){return arguments.length?(s=e,n=null,c):s},c.sortChords=function(e){return arguments.length?(l=e,n&&t(),c):l},c.chords=function(){return n||e(),n},c.groups=function(){return i||e(),i},c},to.layout.force=function(){function e(e){return function(t,n,i,r){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=r-n,l=a*a+o*o;if(l>s*s/m){if(f>l){var c=t.charge/l;e.px-=a*c,e.py-=o*c}return!0}if(t.point&&l&&f>l){var c=t.pointCharge/l;e.px-=a*c,e.py-=o*c}}return!t.charge}}function t(e){e.px=to.event.x,e.py=to.event.y,s.resume()}var n,i,r,a,o,s={},l=to.dispatch("start","tick","end"),c=[1,1],u=.9,d=ml,p=vl,h=-30,f=yl,g=.1,m=.64,v=[],y=[];return s.tick=function(){if((i*=.99)<.005)return l.end({type:"end",alpha:i=0}),!0;var t,n,s,d,p,f,m,b,w,x=v.length,k=y.length;for(n=0;k>n;++n)s=y[n],d=s.source,p=s.target,b=p.x-d.x,w=p.y-d.y,(f=b*b+w*w)&&(f=i*a[n]*((f=Math.sqrt(f))-r[n])/f,b*=f,w*=f,p.x-=b*(m=d.weight/(p.weight+d.weight)),p.y-=w*m,d.x+=b*(m=1-m),d.y+=w*m);if((m=i*g)&&(b=c[0]/2,w=c[1]/2,n=-1,m))for(;++n<x;)s=v[n],s.x+=(b-s.x)*m,s.y+=(w-s.y)*m;if(h)for(Ji(t=to.geom.quadtree(v),i,o),n=-1;++n<x;)(s=v[n]).fixed||t.visit(e(s));for(n=-1;++n<x;)s=v[n],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*u,s.y-=(s.py-(s.py=s.y))*u);l.tick({type:"tick",alpha:i})},s.nodes=function(e){return arguments.length?(v=e,s):v},s.links=function(e){return arguments.length?(y=e,s):y},s.size=function(e){return arguments.length?(c=e,s):c},s.linkDistance=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(p="function"==typeof e?e:+e,s):p},s.friction=function(e){return arguments.length?(u=+e,s):u},s.charge=function(e){return arguments.length?(h="function"==typeof e?e:+e,s):h},s.chargeDistance=function(e){return arguments.length?(f=e*e,s):Math.sqrt(f)},s.gravity=function(e){return arguments.length?(g=+e,s):g},s.theta=function(e){return arguments.length?(m=e*e,s):Math.sqrt(m)},s.alpha=function(e){return arguments.length?(e=+e,i?i=e>0?e:0:e>0&&(l.start({type:"start",alpha:i=e}),to.timer(s.tick)),s):i},s.start=function(){function e(e,i){if(!n){for(n=new Array(l),s=0;l>s;++s)n[s]=[];for(s=0;c>s;++s){var r=y[s];n[r.source.index].push(r.target),n[r.target.index].push(r.source)}}for(var a,o=n[t],s=-1,c=o.length;++s<c;)if(!isNaN(a=o[s][e]))return a;return Math.random()*i}var t,n,i,l=v.length,u=y.length,f=c[0],g=c[1];for(t=0;l>t;++t)(i=v[t]).index=t,i.weight=0;for(t=0;u>t;++t)i=y[t],"number"==typeof i.source&&(i.source=v[i.source]),"number"==typeof i.target&&(i.target=v[i.target]),++i.source.weight,++i.target.weight;for(t=0;l>t;++t)i=v[t],isNaN(i.x)&&(i.x=e("x",f)),isNaN(i.y)&&(i.y=e("y",g)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(r=[],"function"==typeof d)for(t=0;u>t;++t)r[t]=+d.call(this,y[t],t);else for(t=0;u>t;++t)r[t]=d;if(a=[],"function"==typeof p)for(t=0;u>t;++t)a[t]=+p.call(this,y[t],t);else for(t=0;u>t;++t)a[t]=p;if(o=[],"function"==typeof h)for(t=0;l>t;++t)o[t]=+h.call(this,v[t],t);else for(t=0;l>t;++t)o[t]=h;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=to.behavior.drag().origin(Te).on("dragstart.force",Gi).on("drag.force",t).on("dragend.force",Ki)),arguments.length?void this.on("mouseover.force",Xi).on("mouseout.force",Yi).call(n):n},to.rebind(s,l,"on")};var ml=20,vl=1,yl=1/0;to.layout.hierarchy=function(){function e(r){var a,o=[r],s=[];for(r.depth=0;null!=(a=o.pop());)if(s.push(a),(c=n.call(e,a,a.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)o.push(u=c[l]),u.parent=a,u.depth=a.depth+1;i&&(a.value=0),a.children=c}else i&&(a.value=+i.call(e,a,a.depth)||0),delete a.children;return er(r,function(e){var n,r;t&&(n=e.children)&&n.sort(t),i&&(r=e.parent)&&(r.value+=e.value)}),s}var t=ir,n=tr,i=nr;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(i=t,e):i},e.revalue=function(t){return i&&(Zi(t,function(e){e.children&&(e.value=0)}),er(t,function(t){var n;t.children||(t.value=+i.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},to.layout.partition=function(){function e(t,n,i,r){var a=t.children;if(t.x=n,t.y=t.depth*r,t.dx=i,t.dy=r,a&&(o=a.length)){var o,s,l,c=-1;for(i=t.value?i/t.value:0;++c<o;)e(s=a[c],n,l=s.value*i,r),n+=l}}function t(e){var n=e.children,i=0;if(n&&(r=n.length))for(var r,a=-1;++a<r;)i=Math.max(i,t(n[a]));return 1+i}function n(n,a){var o=i.call(this,n,a);return e(o[0],0,r[0],r[1]/t(o[0])),o}var i=to.layout.hierarchy(),r=[1,1];return n.size=function(e){return arguments.length?(r=e,n):r},Qi(n,i)},to.layout.pie=function(){function e(o){var s,l=o.length,c=o.map(function(n,i){return+t.call(e,n,i)}),u=+("function"==typeof i?i.apply(this,arguments):i),d=("function"==typeof r?r.apply(this,arguments):r)-u,p=Math.min(Math.abs(d)/l,+("function"==typeof a?a.apply(this,arguments):a)),h=p*(0>d?-1:1),f=(d-l*h)/to.sum(c),g=to.range(l),m=[];return null!=n&&g.sort(n===bl?function(e,t){return c[t]-c[e]}:function(e,t){return n(o[e],o[t])}),g.forEach(function(e){m[e]={data:o[e],value:s=c[e],startAngle:u,endAngle:u+=s*f+h,padAngle:p}}),m}var t=Number,n=bl,i=0,r=Lo,a=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(i=t,e):i},e.endAngle=function(t){return arguments.length?(r=t,e):r},e.padAngle=function(t){return arguments.length?(a=t,e):a},e};var bl={};to.layout.stack=function(){function e(s,l){if(!(p=s.length))return s;var c=s.map(function(n,i){return t.call(e,n,i)}),u=c.map(function(t){return t.map(function(t,n){return[a.call(e,t,n),o.call(e,t,n)]})}),d=n.call(e,u,l);c=to.permute(c,d),u=to.permute(u,d);var p,h,f,g,m=i.call(e,u,l),v=c[0].length;for(f=0;v>f;++f)for(r.call(e,c[0][f],g=m[f],u[0][f][1]),h=1;p>h;++h)r.call(e,c[h][f],g+=u[h-1][f][1],u[h][f][1]);return s}var t=Te,n=lr,i=cr,r=sr,a=ar,o=or;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:wl.get(t)||lr,e):n},e.offset=function(t){return arguments.length?(i="function"==typeof t?t:xl.get(t)||cr,e):i},e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(r=t,e):r},e};var wl=to.map({"inside-out":function(e){var t,n,i=e.length,r=e.map(ur),a=e.map(dr),o=to.range(i).sort(function(e,t){return r[e]-r[t]}),s=0,l=0,c=[],u=[];for(t=0;i>t;++t)n=o[t],l>s?(s+=a[n],c.push(n)):(l+=a[n],u.push(n));return u.reverse().concat(c)},reverse:function(e){return to.range(e.length).reverse()},"default":lr}),xl=to.map({silhouette:function(e){var t,n,i,r=e.length,a=e[0].length,o=[],s=0,l=[];for(n=0;a>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];i>s&&(s=i),o.push(i)}for(n=0;a>n;++n)l[n]=(s-o[n])/2;return l},wiggle:function(e){var t,n,i,r,a,o,s,l,c,u=e.length,d=e[0],p=d.length,h=[];for(h[0]=l=c=0,n=1;p>n;++n){for(t=0,r=0;u>t;++t)r+=e[t][n][1];for(t=0,a=0,s=d[n][0]-d[n-1][0];u>t;++t){for(i=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);t>i;++i)o+=(e[i][n][1]-e[i][n-1][1])/s;a+=o*e[t][n][1]}h[n]=l-=r?a/r*s:0,c>l&&(c=l)}for(n=0;p>n;++n)h[n]-=c;return h},expand:function(e){var t,n,i,r=e.length,a=e[0].length,o=1/r,s=[];for(n=0;a>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];if(i)for(t=0;r>t;t++)e[t][n][1]/=i;else for(t=0;r>t;t++)e[t][n][1]=o}for(n=0;a>n;++n)s[n]=0;return s},zero:cr});to.layout.histogram=function(){function e(e,a){for(var o,s,l=[],c=e.map(n,this),u=i.call(this,c,a),d=r.call(this,u,c,a),a=-1,p=c.length,h=d.length-1,f=t?1:1/p;++a<h;)o=l[a]=[],o.dx=d[a+1]-(o.x=d[a]),o.y=0;if(h>0)for(a=-1;++a<p;)s=c[a],s>=u[0]&&s<=u[1]&&(o=l[to.bisect(d,s,1,h)-1],o.y+=f,o.push(e[a]));return l}var t=!0,n=Number,i=gr,r=hr;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(i=_e(t),e):i},e.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return fr(e,t)}:_e(t),e):r},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},to.layout.pack=function(){function e(e,a){var o=n.call(this,e,a),s=o[0],l=r[0],c=r[1],u=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,er(s,function(e){e.r=+u(e.value)}),er(s,wr),i){var d=i*(t?1:Math.max(2*s.r/l,2*s.r/c))/2;er(s,function(e){e.r+=d}),er(s,wr),er(s,function(e){e.r-=d})}return Cr(s,l/2,c/2,t?1:1/Math.max(2*s.r/l,2*s.r/c)),o}var t,n=to.layout.hierarchy().sort(mr),i=0,r=[1,1];return e.size=function(t){return arguments.length?(r=t,e):r},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(i=+t,e):i},Qi(e,n)},to.layout.tree=function(){function e(e,r){var u=o.call(this,e,r),d=u[0],p=t(d);if(er(p,n),p.parent.m=-p.z,Zi(p,i),c)Zi(d,a);else{var h=d,f=d,g=d;Zi(d,function(e){e.x<h.x&&(h=e),e.x>f.x&&(f=e),e.depth>g.depth&&(g=e)});var m=s(h,f)/2-h.x,v=l[0]/(f.x+s(f,h)/2+m),y=l[1]/(g.depth||1);Zi(d,function(e){e.x=(e.x+m)*v,e.y=e.depth*y})}return u}function t(e){for(var t,n={A:null,children:[e]},i=[n];null!=(t=i.pop());)for(var r,a=t.children,o=0,s=a.length;s>o;++o)i.push((a[o]=r={_:a[o],parent:t,children:(r=a[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,i=e.i?n[e.i-1]:null;if(t.length){Er(e);var a=(t[0].z+t[t.length-1].z)/2;i?(e.z=i.z+s(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+s(e._,i._));e.parent.A=r(e,i,e.parent.A||n[0])}function i(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e,t,n){if(t){for(var i,r=e,a=e,o=t,l=r.parent.children[0],c=r.m,u=a.m,d=o.m,p=l.m;o=$r(o),r=Tr(r),o&&r;)l=Tr(l),a=$r(a),a.a=e,i=o.z+d-r.z-c+s(o._,r._),i>0&&(Ar(Pr(o,e,n),e,i),c+=i,u+=i),d+=o.m,c+=r.m,p+=l.m,u+=a.m;o&&!$r(a)&&(a.t=o,a.m+=d-u),r&&!Tr(l)&&(l.t=r,l.m+=c-p,n=e)}return n}function a(e){e.x*=l[0],e.y=e.depth*l[1]}var o=to.layout.hierarchy().sort(null).value(null),s=_r,l=[1,1],c=null;return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(c=null==(l=t)?a:null,e):c?null:l},e.nodeSize=function(t){return arguments.length?(c=null==(l=t)?null:a,e):c?l:null},Qi(e,o)},to.layout.cluster=function(){function e(e,a){
var o,s=t.call(this,e,a),l=s[0],c=0;er(l,function(e){var t=e.children;t&&t.length?(e.x=Dr(t),e.y=Ir(t)):(e.x=o?c+=n(e,o):0,e.y=0,o=e)});var u=Mr(l),d=Nr(l),p=u.x-n(u,d)/2,h=d.x+n(d,u)/2;return er(l,r?function(e){e.x=(e.x-l.x)*i[0],e.y=(l.y-e.y)*i[1]}:function(e){e.x=(e.x-p)/(h-p)*i[0],e.y=(1-(l.y?e.y/l.y:1))*i[1]}),s}var t=to.layout.hierarchy().sort(null).value(null),n=_r,i=[1,1],r=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(r=null==(i=t),e):r?null:i},e.nodeSize=function(t){return arguments.length?(r=null!=(i=t),e):r?i:null},Qi(e,t)},to.layout.treemap=function(){function e(e,t){for(var n,i,r=-1,a=e.length;++r<a;)i=(n=e[r]).value*(0>t?0:t),n.area=isNaN(i)||0>=i?0:i}function t(n){var a=n.children;if(a&&a.length){var o,s,l,c=d(n),u=[],p=a.slice(),f=1/0,g="slice"===h?c.dx:"dice"===h?c.dy:"slice-dice"===h?1&n.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(e(p,c.dx*c.dy/n.value),u.area=0;(l=p.length)>0;)u.push(o=p[l-1]),u.area+=o.area,"squarify"!==h||(s=i(u,g))<=f?(p.pop(),f=s):(u.area-=u.pop().area,r(u,g,c,!1),g=Math.min(c.dx,c.dy),u.length=u.area=0,f=1/0);u.length&&(r(u,g,c,!0),u.length=u.area=0),a.forEach(t)}}function n(t){var i=t.children;if(i&&i.length){var a,o=d(t),s=i.slice(),l=[];for(e(s,o.dx*o.dy/t.value),l.area=0;a=s.pop();)l.push(a),l.area+=a.area,null!=a.z&&(r(l,a.z?o.dx:o.dy,o,!s.length),l.length=l.area=0);i.forEach(n)}}function i(e,t){for(var n,i=e.area,r=0,a=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(a>n&&(a=n),n>r&&(r=n));return i*=i,t*=t,i?Math.max(t*r*f/i,i/(t*a*f)):1/0}function r(e,t,n,i){var r,a=-1,o=e.length,s=n.x,c=n.y,u=t?l(e.area/t):0;if(t==n.dx){for((i||u>n.dy)&&(u=n.dy);++a<o;)r=e[a],r.x=s,r.y=c,r.dy=u,s+=r.dx=Math.min(n.x+n.dx-s,u?l(r.area/u):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=n.dx);++a<o;)r=e[a],r.x=s,r.y=c,r.dx=u,c+=r.dy=Math.min(n.y+n.dy-c,u?l(r.area/u):0);r.z=!1,r.dy+=n.y+n.dy-c,n.x+=u,n.dx-=u}}function a(i){var r=o||s(i),a=r[0];return a.x=0,a.y=0,a.dx=c[0],a.dy=c[1],o&&s.revalue(a),e([a],a.dx*a.dy/a.value),(o?n:t)(a),p&&(o=r),r}var o,s=to.layout.hierarchy(),l=Math.round,c=[1,1],u=null,d=jr,p=!1,h="squarify",f=.5*(1+Math.sqrt(5));return a.size=function(e){return arguments.length?(c=e,a):c},a.padding=function(e){function t(t){var n=e.call(a,t,t.depth);return null==n?jr(t):Or(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Or(t,e)}if(!arguments.length)return u;var i;return d=null==(u=e)?jr:"function"==(i=typeof e)?t:"number"===i?(e=[e,e,e,e],n):n,a},a.round=function(e){return arguments.length?(l=e?Math.round:Number,a):l!=Number},a.sticky=function(e){return arguments.length?(p=e,o=null,a):p},a.ratio=function(e){return arguments.length?(f=e,a):f},a.mode=function(e){return arguments.length?(h=e+"",a):h},Qi(a,s)},to.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return e+t*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=to.random.normal.apply(to,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=to.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},to.scale={};var kl={floor:Te,ceil:Te};to.scale.linear=function(){return Br([0,1],[0,1],yi,!1)};var Cl={s:1,g:1,p:1,r:1,e:1};to.scale.log=function(){return Jr(to.scale.linear().domain([0,1]),10,!0,[1,10])};var Sl=to.format(".0e"),_l={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};to.scale.pow=function(){return Qr(to.scale.linear(),1,[0,1])},to.scale.sqrt=function(){return to.scale.pow().exponent(.5)},to.scale.ordinal=function(){return ea([],{t:"range",a:[[]]})},to.scale.category10=function(){return to.scale.ordinal().range(Tl)},to.scale.category20=function(){return to.scale.ordinal().range($l)},to.scale.category20b=function(){return to.scale.ordinal().range(Al)},to.scale.category20c=function(){return to.scale.ordinal().range(El)};var Tl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ye),$l=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ye),Al=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ye),El=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ye);to.scale.quantile=function(){return ta([],[])},to.scale.quantize=function(){return na(0,1,[0,1])},to.scale.threshold=function(){return ia([.5],[0,1])},to.scale.identity=function(){return ra([0,1])},to.svg={},to.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),c=Math.max(0,+i.apply(this,arguments)),u=o.apply(this,arguments)-Fo,d=s.apply(this,arguments)-Fo,p=Math.abs(d-u),h=u>d?0:1;if(e>c&&(f=c,c=e,e=f),p>=Ro)return t(c,h)+(e?t(e,1-h):"")+"Z";var f,g,m,v,y,b,w,x,k,C,S,_,T=0,$=0,A=[];if((v=(+l.apply(this,arguments)||0)/2)&&(m=a===Pl?Math.sqrt(e*e+c*c):+a.apply(this,arguments),h||($*=-1),c&&($=ee(m/c*Math.sin(v))),e&&(T=ee(m/e*Math.sin(v)))),c){y=c*Math.cos(u+$),b=c*Math.sin(u+$),w=c*Math.cos(d-$),x=c*Math.sin(d-$);var E=Math.abs(d-u-2*$)<=Oo?0:1;if($&&da(y,b,w,x)===h^E){var P=(u+d)/2;y=c*Math.cos(P),b=c*Math.sin(P),w=x=null}}else y=b=0;if(e){k=e*Math.cos(d-T),C=e*Math.sin(d-T),S=e*Math.cos(u+T),_=e*Math.sin(u+T);var I=Math.abs(u-d+2*T)<=Oo?0:1;if(T&&da(k,C,S,_)===1-h^I){var D=(u+d)/2;k=e*Math.cos(D),C=e*Math.sin(D),S=_=null}}else k=C=0;if((f=Math.min(Math.abs(c-e)/2,+r.apply(this,arguments)))>.001){g=c>e^h?0:1;var M=null==S?[k,C]:null==w?[y,b]:Mn([y,b],[S,_],[w,x],[k,C]),N=y-M[0],j=b-M[1],O=w-M[0],L=x-M[1],R=1/Math.sin(Math.acos((N*O+j*L)/(Math.sqrt(N*N+j*j)*Math.sqrt(O*O+L*L)))/2),F=Math.sqrt(M[0]*M[0]+M[1]*M[1]);if(null!=w){var U=Math.min(f,(c-F)/(R+1)),z=pa(null==S?[k,C]:[S,_],[y,b],c,U,h),q=pa([w,x],[k,C],c,U,h);f===U?A.push("M",z[0],"A",U,",",U," 0 0,",g," ",z[1],"A",c,",",c," 0 ",1-h^da(z[1][0],z[1][1],q[1][0],q[1][1]),",",h," ",q[1],"A",U,",",U," 0 0,",g," ",q[0]):A.push("M",z[0],"A",U,",",U," 0 1,",g," ",q[0])}else A.push("M",y,",",b);if(null!=S){var B=Math.min(f,(e-F)/(R-1)),H=pa([y,b],[S,_],e,-B,h),V=pa([k,C],null==w?[y,b]:[w,x],e,-B,h);f===B?A.push("L",V[0],"A",B,",",B," 0 0,",g," ",V[1],"A",e,",",e," 0 ",h^da(V[1][0],V[1][1],H[1][0],H[1][1]),",",1-h," ",H[1],"A",B,",",B," 0 0,",g," ",H[0]):A.push("L",V[0],"A",B,",",B," 0 0,",g," ",H[0])}else A.push("L",k,",",C)}else A.push("M",y,",",b),null!=w&&A.push("A",c,",",c," 0 ",E,",",h," ",w,",",x),A.push("L",k,",",C),null!=S&&A.push("A",e,",",e," 0 ",I,",",1-h," ",S,",",_);return A.push("Z"),A.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=oa,i=sa,r=aa,a=Pl,o=la,s=ca,l=ua;return e.innerRadius=function(t){return arguments.length?(n=_e(t),e):n},e.outerRadius=function(t){return arguments.length?(i=_e(t),e):i},e.cornerRadius=function(t){return arguments.length?(r=_e(t),e):r},e.padRadius=function(t){return arguments.length?(a=t==Pl?Pl:_e(t),e):a},e.startAngle=function(t){return arguments.length?(o=_e(t),e):o},e.endAngle=function(t){return arguments.length?(s=_e(t),e):s},e.padAngle=function(t){return arguments.length?(l=_e(t),e):l},e.centroid=function(){var e=(+n.apply(this,arguments)+ +i.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-Fo;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Pl="auto";to.svg.line=function(){return ha(Te)};var Il=to.map({linear:fa,"linear-closed":ga,step:ma,"step-before":va,"step-after":ya,basis:Sa,"basis-open":_a,"basis-closed":Ta,bundle:$a,cardinal:xa,"cardinal-open":ba,"cardinal-closed":wa,monotone:Ma});Il.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Dl=[0,2/3,1/3,0],Ml=[0,1/3,2/3,0],Nl=[0,1/6,2/3,1/6];to.svg.line.radial=function(){var e=ha(Na);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},va.reverse=ya,ya.reverse=va,to.svg.area=function(){return ja(Te)},to.svg.area.radial=function(){var e=ja(Na);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},to.svg.chord=function(){function e(e,s){var l=t(this,a,e,s),c=t(this,o,e,s);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,c)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,c.r,c.p0)+i(c.r,c.p1,c.a1-c.a0)+r(c.r,c.p1,l.r,l.p0))+"Z"}function t(e,t,n,i){var r=t.call(e,n,i),a=s.call(e,r,i),o=l.call(e,r,i)-Fo,u=c.call(e,r,i)-Fo;return{r:a,a0:o,a1:u,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(u),a*Math.sin(u)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function i(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Oo)+",1 "+t}function r(e,t,n,i){return"Q 0,0 "+i}var a=yn,o=bn,s=Oa,l=la,c=ca;return e.radius=function(t){return arguments.length?(s=_e(t),e):s},e.source=function(t){return arguments.length?(a=_e(t),e):a},e.target=function(t){return arguments.length?(o=_e(t),e):o},e.startAngle=function(t){return arguments.length?(l=_e(t),e):l},e.endAngle=function(t){return arguments.length?(c=_e(t),e):c},e},to.svg.diagonal=function(){function e(e,r){var a=t.call(this,e,r),o=n.call(this,e,r),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=yn,n=bn,i=La;return e.source=function(n){return arguments.length?(t=_e(n),e):t},e.target=function(t){return arguments.length?(n=_e(t),e):n},e.projection=function(t){return arguments.length?(i=t,e):i},e},to.svg.diagonal.radial=function(){var e=to.svg.diagonal(),t=La,n=e.projection;return e.projection=function(e){return arguments.length?n(Ra(t=e)):t},e},to.svg.symbol=function(){function e(e,i){return(jl.get(t.call(this,e,i))||za)(n.call(this,e,i))}var t=Ua,n=Fa;return e.type=function(n){return arguments.length?(t=_e(n),e):t},e.size=function(t){return arguments.length?(n=_e(t),e):n},e};var jl=to.map({circle:za,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ll)),n=t*Ll;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Ol),n=t*Ol/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Ol),n=t*Ol/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});to.svg.symbolTypes=jl.keys();var Ol=Math.sqrt(3),Ll=Math.tan(30*Uo);To.transition=function(e){for(var t,n,i=Rl||++ql,r=Wa(e),a=[],o=Fl||{time:Date.now(),ease:_i,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&Ga(n,u,r,i,o),t.push(n)}return Ba(a,r,i)},To.interrupt=function(e){return this.each(null==e?Ul:qa(Wa(e)))};var Rl,Fl,Ul=qa(Wa()),zl=[],ql=0;zl.call=To.call,zl.empty=To.empty,zl.node=To.node,zl.size=To.size,to.transition=function(e,t){return e&&e.transition?Rl?e.transition(t):e:Eo.transition(e)},to.transition.prototype=zl,zl.select=function(e){var t,n,i,r=this.id,a=this.namespace,o=[];e=_(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(i=c[u])&&(n=e.call(i,i.__data__,u,s))?("__data__"in i&&(n.__data__=i.__data__),Ga(n,u,a,r,i[a][r]),t.push(n)):t.push(null)}return Ba(o,a,r)},zl.selectAll=function(e){var t,n,i,r,a,o=this.id,s=this.namespace,l=[];e=T(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],p=-1,h=d.length;++p<h;)if(i=d[p]){a=i[s][o],n=e.call(i,i.__data__,p,c),l.push(t=[]);for(var f=-1,g=n.length;++f<g;)(r=n[f])&&Ga(r,f,s,o,a),t.push(r)}return Ba(l,s,o)},zl.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=R(e));for(var a=0,o=this.length;o>a;a++){r.push(t=[]);for(var n=this[a],s=0,l=n.length;l>s;s++)(i=n[s])&&e.call(i,i.__data__,s,a)&&t.push(i)}return Ba(r,this.namespace,this.id)},zl.tween=function(e,t){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(e):U(this,null==t?function(t){t[i][n].tween.remove(e)}:function(r){r[i][n].tween.set(e,t)})},zl.attr=function(e,t){function n(){this.removeAttribute(s)}function i(){this.removeAttributeNS(s.space,s.local)}function r(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=o(n,e),function(e){this.setAttribute(s,t(e))})})}function a(e){return null==e?i:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?zi:yi,s=to.ns.qualify(e);return Ha(this,"attr."+e,t,s.local?a:r)},zl.attrTween=function(e,t){function n(e,n){var i=t.call(this,e,n,this.getAttribute(r));return i&&function(e){this.setAttribute(r,i(e))}}function i(e,n){var i=t.call(this,e,n,this.getAttributeNS(r.space,r.local));return i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}var r=to.ns.qualify(e);return this.tween("attr."+e,r.local?i:n)},zl.style=function(e,t,n){function i(){this.style.removeProperty(e)}function r(t){return null==t?i:(t+="",function(){var i,r=oo.getComputedStyle(this,null).getPropertyValue(e);return r!==t&&(i=yi(r,t),function(t){this.style.setProperty(e,i(t),n)})})}var a=arguments.length;if(3>a){if("string"!=typeof e){2>a&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Ha(this,"style."+e,t,r)},zl.styleTween=function(e,t,n){function i(i,r){var a=t.call(this,i,r,oo.getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,i)},zl.text=function(e){return Ha(this,"text",e,Va)},zl.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},zl.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=to.ease.apply(to,arguments)),U(this,function(i){i[n][t].ease=e}))},zl.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:U(this,"function"==typeof e?function(i,r,a){i[n][t].delay=+e.call(i,i.__data__,r,a)}:(e=+e,function(i){i[n][t].delay=e}))},zl.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:U(this,"function"==typeof e?function(i,r,a){i[n][t].duration=Math.max(1,e.call(i,i.__data__,r,a))}:(e=Math.max(1,e),function(i){i[n][t].duration=e}))},zl.each=function(e,t){var n=this.id,i=this.namespace;if(arguments.length<2){var r=Fl,a=Rl;try{Rl=n,U(this,function(t,r,a){Fl=t[i][n],e.call(t,t.__data__,r,a)})}finally{Fl=r,Rl=a}}else U(this,function(r){var a=r[i][n];(a.event||(a.event=to.dispatch("start","end","interrupt"))).on(e,t)});return this},zl.transition=function(){for(var e,t,n,i,r=this.id,a=++ql,o=this.namespace,s=[],l=0,c=this.length;c>l;l++){s.push(e=[]);for(var t=this[l],u=0,d=t.length;d>u;u++)(n=t[u])&&(i=n[o][r],Ga(n,u,o,a,{time:i.time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration})),e.push(n)}return Ba(s,o,a)},to.svg.axis=function(){function e(e){e.each(function(){var e,c=to.select(this),u=this.__chart__||n,d=this.__chart__=n.copy(),p=null==l?d.ticks?d.ticks.apply(d,s):d.domain():l,h=null==t?d.tickFormat?d.tickFormat.apply(d,s):Te:t,f=c.selectAll(".tick").data(p,d),g=f.enter().insert("g",".domain").attr("class","tick").style("opacity",No),m=to.transition(f.exit()).style("opacity",No).remove(),v=to.transition(f.order()).style("opacity",1),y=Math.max(r,0)+o,b=Rr(d),w=c.selectAll(".domain").data([0]),x=(w.enter().append("path").attr("class","domain"),to.transition(w));g.append("line"),g.append("text");var k,C,S,_,T=g.select("line"),$=v.select("line"),A=f.select("text").text(h),E=g.select("text"),P=v.select("text"),I="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(e=Ka,k="x",S="y",C="x2",_="y2",A.attr("dy",0>I?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+b[0]+","+I*a+"V0H"+b[1]+"V"+I*a)):(e=Xa,k="y",S="x",C="y2",_="x2",A.attr("dy",".32em").style("text-anchor",0>I?"end":"start"),x.attr("d","M"+I*a+","+b[0]+"H0V"+b[1]+"H"+I*a)),T.attr(_,I*r),E.attr(S,I*y),$.attr(C,0).attr(_,I*r),P.attr(k,0).attr(S,I*y),d.rangeBand){var D=d,M=D.rangeBand()/2;u=d=function(e){return D(e)+M}}else u.rangeBand?u=d:m.call(e,d,u);g.call(e,u,d),v.call(e,d,d)})}var t,n=to.scale.linear(),i=Bl,r=6,a=6,o=3,s=[10],l=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(i=t in Hl?t+"":Bl,e):i},e.ticks=function(){return arguments.length?(s=arguments,e):s},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(r=+t,a=+arguments[n-1],e):r},e.innerTickSize=function(t){return arguments.length?(r=+t,e):r},e.outerTickSize=function(t){return arguments.length?(a=+t,e):a},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var Bl="bottom",Hl={top:1,right:1,bottom:1,left:1};to.svg.brush=function(){function e(a){a.each(function(){var a=to.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),o=a.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),a.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=a.selectAll(".resize").data(f,Te);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Vl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var u,d=to.transition(a),p=to.transition(o);l&&(u=Rr(l),p.attr("x",u[0]).attr("width",u[1]-u[0]),n(d)),c&&(u=Rr(c),p.attr("y",u[0]).attr("height",u[1]-u[0]),i(d)),t(d)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+u[+/e$/.test(e)]+","+d[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",u[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",u[1]-u[0])}function i(e){e.select(".extent").attr("y",d[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function r(){function r(){32==to.event.keyCode&&(A||(y=null,P[0]-=u[1],P[1]-=d[1],A=2),x())}function f(){32==to.event.keyCode&&2==A&&(P[0]+=u[1],P[1]+=d[1],A=0,x())}function g(){var e=to.mouse(w),r=!1;b&&(e[0]+=b[0],e[1]+=b[1]),A||(to.event.altKey?(y||(y=[(u[0]+u[1])/2,(d[0]+d[1])/2]),P[0]=u[+(e[0]<y[0])],P[1]=d[+(e[1]<y[1])]):y=null),T&&m(e,l,0)&&(n(S),r=!0),$&&m(e,c,1)&&(i(S),r=!0),r&&(t(S),C({type:"brush",mode:A?"move":"resize"}))}function m(e,t,n){var i,r,s=Rr(t),l=s[0],c=s[1],f=P[n],g=n?d:u,m=g[1]-g[0];return A&&(l-=f,c-=m+f),i=(n?h:p)?Math.max(l,Math.min(c,e[n])):e[n],A?r=(i+=f)+m:(y&&(f=Math.max(l,Math.min(c,2*y[n]-i))),i>f?(r=i,i=f):r=f),g[0]!=i||g[1]!=r?(n?o=null:a=null,g[0]=i,g[1]=r,!0):void 0}function v(){g(),S.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),to.select("body").style("cursor",null),I.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),C({type:"brushend"})}var y,b,w=this,k=to.select(to.event.target),C=s.of(w,arguments),S=to.select(w),_=k.datum(),T=!/^(n|s)$/.test(_)&&l,$=!/^(e|w)$/.test(_)&&c,A=k.classed("extent"),E=W(),P=to.mouse(w),I=to.select(oo).on("keydown.brush",r).on("keyup.brush",f);if(to.event.changedTouches?I.on("touchmove.brush",g).on("touchend.brush",v):I.on("mousemove.brush",g).on("mouseup.brush",v),S.interrupt().selectAll("*").interrupt(),A)P[0]=u[0]-P[0],P[1]=d[0]-P[1];else if(_){var D=+/w$/.test(_),M=+/^n/.test(_);b=[u[1-D]-P[0],d[1-M]-P[1]],P[0]=u[D],P[1]=d[M]}else to.event.altKey&&(y=P.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),to.select("body").style("cursor",k.style("cursor")),C({type:"brushstart"}),g()}var a,o,s=C(e,"brushstart","brush","brushend"),l=null,c=null,u=[0,0],d=[0,0],p=!0,h=!0,f=Wl[0];return e.event=function(e){e.each(function(){var e=s.of(this,arguments),t={x:u,y:d,i:a,j:o},n=this.__chart__||t;this.__chart__=t,Rl?to.select(this).transition().each("start.brush",function(){a=n.i,o=n.j,u=n.x,d=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=bi(u,t.x),i=bi(d,t.y);return a=o=null,function(r){u=t.x=n(r),d=t.y=i(r),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,o=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(l=t,f=Wl[!l<<1|!c],e):l},e.y=function(t){return arguments.length?(c=t,f=Wl[!l<<1|!c],e):c},e.clamp=function(t){return arguments.length?(l&&c?(p=!!t[0],h=!!t[1]):l?p=!!t:c&&(h=!!t),e):l&&c?[p,h]:l?p:c?h:null},e.extent=function(t){var n,i,r,s,p;return arguments.length?(l&&(n=t[0],i=t[1],c&&(n=n[0],i=i[0]),a=[n,i],l.invert&&(n=l(n),i=l(i)),n>i&&(p=n,n=i,i=p),(n!=u[0]||i!=u[1])&&(u=[n,i])),c&&(r=t[0],s=t[1],l&&(r=r[1],s=s[1]),o=[r,s],c.invert&&(r=c(r),s=c(s)),r>s&&(p=r,r=s,s=p),(r!=d[0]||s!=d[1])&&(d=[r,s])),e):(l&&(a?(n=a[0],i=a[1]):(n=u[0],i=u[1],l.invert&&(n=l.invert(n),i=l.invert(i)),n>i&&(p=n,n=i,i=p))),c&&(o?(r=o[0],s=o[1]):(r=d[0],s=d[1],c.invert&&(r=c.invert(r),s=c.invert(s)),r>s&&(p=r,r=s,s=p))),l&&c?[[n,r],[i,s]]:l?[n,i]:c&&[r,s])},e.clear=function(){return e.empty()||(u=[0,0],d=[0,0],a=o=null),e},e.empty=function(){return!!l&&u[0]==u[1]||!!c&&d[0]==d[1]},to.rebind(e,s,"on")};var Vl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Gl=ps.format=ys.timeFormat,Kl=Gl.utc,Xl=Kl("%Y-%m-%dT%H:%M:%S.%LZ");Gl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ya:Xl,Ya.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Ya.toString=Xl.toString,ps.second=Fe(function(e){return new hs(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),ps.seconds=ps.second.range,ps.seconds.utc=ps.second.utc.range,ps.minute=Fe(function(e){return new hs(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),ps.minutes=ps.minute.range,ps.minutes.utc=ps.minute.utc.range,ps.hour=Fe(function(e){var t=e.getTimezoneOffset()/60;return new hs(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),ps.hours=ps.hour.range,ps.hours.utc=ps.hour.utc.range,ps.month=Fe(function(e){return e=ps.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),ps.months=ps.month.range,ps.months.utc=ps.month.utc.range;var Yl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Jl=[[ps.second,1],[ps.second,5],[ps.second,15],[ps.second,30],[ps.minute,1],[ps.minute,5],[ps.minute,15],[ps.minute,30],[ps.hour,1],[ps.hour,3],[ps.hour,6],[ps.hour,12],[ps.day,1],[ps.day,2],[ps.week,1],[ps.month,1],[ps.month,3],[ps.year,1]],Ql=Gl.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",At]]),Zl={range:function(e,t,n){return to.range(Math.ceil(e/n)*n,+t,n).map(Qa)},floor:Te,ceil:Te};Jl.year=ps.year,ps.scale=function(){return Ja(to.scale.linear(),Jl,Ql)};var ec=Jl.map(function(e){return[e[0].utc,e[1]]}),tc=Kl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",At]]);ec.year=ps.year.utc,ps.scale.utc=function(){return Ja(to.scale.linear(),ec,tc)},to.text=$e(function(e){return e.responseText}),to.json=function(e,t){return Ae(e,"application/json",Za,t)},to.html=function(e,t){return Ae(e,"text/html",eo,t)},to.xml=$e(function(e){return e.responseXML}),"function"==typeof define&&define.amd?define(to):"object"==typeof module&&module.exports&&(module.exports=to),this.d3=to}(),function(e,t,n){"use strict";var i={};i.tabbable=function(){return{restrict:"C",compile:function(e){var n=t.element('<ul class="nav nav-tabs"></ul>'),i=t.element('<div class="tab-content"></div>');i.append(e.contents()),e.append(n).append(i)},controller:["$scope","$element",function(e,n){var i,r=n.contents().eq(0),a=n.controller("ngModel")||{},o=[];a.$render=function(){var e=this.$viewValue;if((i?i.value!=e:e)&&(i&&(i.paneElement.removeClass("active"),i.tabElement.removeClass("active"),i=null),e)){for(var t=0,n=o.length;n>t;t++)if(e==o[t].value){i=o[t];break}i&&(i.paneElement.addClass("active"),i.tabElement.addClass("active"))}},this.addPane=function(n,s){function l(){d.title=s.title,d.value=s.value||s.title,a.$setViewValue||a.$viewValue&&d!=i||(a.$viewValue=d.value),a.$render()}var c=t.element("<li><a href></a></li>"),u=c.find("a"),d={paneElement:n,paneAttrs:s,tabElement:c};return o.push(d),s.$observe("value",l)(),s.$observe("title",function(){l(),u.text(d.title)})(),r.append(c),c.bind("click",function(t){t.preventDefault(),t.stopPropagation(),a.$setViewValue?e.$apply(function(){a.$setViewValue(d.value),a.$render()}):(a.$viewValue=d.value,a.$render())}),function(){d.tabElement.remove();for(var e=0,t=o.length;t>e;e++)d==o[e]&&o.splice(e,1)}}}]}},i.tabPane=function(){return{require:"^tabbable",restrict:"C",link:function(e,t,n,i){t.bind("$remove",i.addPane(t,n))}}};var r="hawtio-tabbable";t.module(r,[]).directive(i),hawtioPluginLoader.addModule(r)}(window,window.angular);var DataTable;!function(e){e.pluginName="datatable",e.log=Logger.get("DataTable"),e._module=angular.module(e.pluginName,[]),hawtioPluginLoader.addModule(e.pluginName)}(DataTable||(DataTable={}));var DataTable;!function(e){function t(e,t,n){var i=n,r=!1;return angular.forEach(t,function(t){var n=e[t];!r&&angular.isDefined(n)&&(i=n,r=!0)}),i}e._module.directive("hawtioSimpleTable",["$compile",function(n){return{restrict:"A",scope:{config:"=hawtioSimpleTable"},link:function(i,r,a){function o(){var e=c.selectedItems;if(e||(e=[],c.selectedItems=e),angular.isString(e)){var t=e;e=Core.pathGet(p,t),e||(e=[],p[t]=e)}return e}function s(){var e=i.config.multiSelect;return angular.isUndefined(e)&&(e=!0),e}var l=function(e,t){return e.id||e._id||e.name||t},c=i.config,u=c.data||"data",d=c.primaryKeyFn||l;i.rows=[];var p=i.$parent||i,h=function(){var t=Core.pathGet(p,u);if(t&&!angular.isArray(t)&&(t=[t],Core.pathSet(p,u,t)),!("sortInfo"in c)&&"columnDefs"in c){var n,r=c.columnDefs.first().defaultSort;n=angular.isUndefined(r)||r===!0?c.columnDefs.first().field:c.columnDefs.slice(1).first().field,c.sortInfo={sortBy:n,ascending:!0}}var a=c.columnDefs.find(function(e){return e.field===c.sortInfo.sortBy?e:void 0});angular.isDefined(a)&&(a=a.customSortField);var o=i.config.sortInfo||{sortBy:"",ascending:!0},s=-1,l=(t||[]).sortBy(a||o.sortBy,!o.ascending).map(function(e){return s++,{entity:e,index:s,getProperty:function(t){return e[t]}}}),h=[];l.forEach(function(t,n){var i=d(t.entity,t.index),r=c.selectedItems.some(function(e){var t=d(e,e.index);return angular.equals(i,t)});r&&(t.entity.index=t.index,h.push(t.entity),e.log.debug("Data changed so keep selecting row at index "+t.index))}),c.selectedItems=h,Core.pathSet(p,["hawtioSimpleTable",u,"rows"],l),i.rows=l};p.$watchCollection(u,h),p.$on("hawtio.datatable."+u,h),i.toggleAllSelections=function(){var e=i.config.allRowsSelected,t=e,n=o();n.splice(0,n.length),angular.forEach(i.rows,function(i){i.selected=t,e&&n.push(i.entity)})},i.toggleRowSelection=function(e){if(e){var t=o();s()||(t.splice(0,t.length),angular.forEach(i.rows,function(t){t!==e&&(t.selected=!1)}));var n=e.entity;if(n){var r=t.indexOf(n);e.selected?0>r&&t.push(n):(i.config.allRowsSelected=!1,r>=0&&t.splice(r,1))}}},i.sortBy=function(e){i.config.sortInfo.sortBy===e?i.config.sortInfo.ascending=!i.config.sortInfo.ascending:(i.config.sortInfo.sortBy=e,i.config.sortInfo.ascending=!0),p.$broadcast("hawtio.datatable."+u)},i.getClass=function(e){return"sortInfo"in i.config&&i.config.sortInfo.sortBy===e?i.config.sortInfo.ascending?"asc":"desc":""},i.showRow=function(e){var t=Core.pathGet(i,["config","filterOptions","filterText"]);if(Core.isBlank(t))return!0;var n=null;try{n=e.entity.title}catch(r){}n||(n=e.entity);var a=FilterHelpers.search(n,t);return a},i.isSelected=function(e){return c.selectedItems.some(e.entity)},i.onRowSelected=function(t){var n=c.selectedItems.indexOf(t.entity);n>=0?(e.log.debug("De-selecting row at index "+t.index),c.selectedItems.splice(n,1)):(c.multiSelect||(c.selectedItems.length=0),e.log.debug("Selecting row at index "+t.index),t.entity.index=t.index,c.selectedItems.push(t.entity))},i.$watchCollection("rows",function(){var e=r;e.empty();var a,o=t(c,["showSelectionCheckbox","displaySelectionCheckbox"],!0),l=t(c,["enableRowClickSelection"],!1);a=l?"ng-mousedown='onRowSelected(row)' ":"";var u="<thead><tr>",d="<tbody><tr ng-repeat='row in rows track by $index' ng-show='showRow(row)' "+a+"ng-class=\"{'selected': isSelected(row)}\" >",p=0;if(o){var h=s()?"<input type='checkbox' ng-show='rows.length' ng-model='config.allRowsSelected' ng-change='toggleAllSelections()'>":"";u+="\n<th class='simple-table-checkbox'>"+h+"</th>",d+="\n<td class='simple-table-checkbox'><input type='checkbox' ng-model='row.selected' ng-change='toggleRowSelection(row)'></td>"}angular.forEach(c.columnDefs,function(e){var t=e.field,n=e.cellTemplate||'<div class="ngCellText" title="{{row.entity.'+t+'}}">{{row.entity.'+t+"}}</div>";u+="\n<th class='clickable no-fade table-header' ng-click=\"sortBy('"+t+"')\" ng-class=\"getClass('"+t+"')\">{{config.columnDefs["+p+"].displayName}}<span class='indicator'></span></th>",d+="\n<td>"+n+"</td>",p+=1});var f=u+"\n</tr></thead>\n"+d+"\n</tr></tbody>",g=n(f)(i);e.html(g)})}}}])}(DataTable||(DataTable={}));var CodeEditor;!function(e){function t(e){var t="text";if(e){t="javascript";var n=e.toString().trimLeft().trimRight();n&&"<"===n.first()&&">"===n.last()&&(t="xml")}return t}function n(e){if(e){var t=e.lineCount(),n={line:0,ch:0},i={line:t-1,ch:e.getLine(t-1).length};e.autoFormatRange(n,i),e.setSelection(n,n)}}function i(t){void 0===t&&(t={}),t.extraKeys=t.extraKeys||{},function(e){e=e||{name:"text"},"object"!=typeof e&&(e={name:e});var t=e.name;"javascript"===t&&angular.extend(e,{json:!0})}(t.mode),function(e){var t=CodeMirror.newFoldFunction(CodeMirror.braceRangeFinder),n=CodeMirror.newFoldFunction(CodeMirror.tagRangeFinder),i=function(e,i){var r=e.getOption("mode"),a=r.name;r&&a&&("javascript"===a?t(e,i):("xml"===a||a.startsWith("html"))&&n(e,i))};e.onGutterClick=i,e.extraKeys=angular.extend(e.extraKeys,{"Ctrl-Q":function(e){i(e,e.getCursor().line)}})}(t);var n=t.readOnly;return n||(t.matchBrackets=!0),angular.extend(t,e.GlobalCodeMirrorOptions),t}e.GlobalCodeMirrorOptions={theme:"default",tabSize:4,lineNumbers:!0,indentWithTabs:!0,lineWrapping:!0,autoCloseTags:!0},e.detectTextFormat=t,
e.autoFormatEditor=n,e.createEditorSettings=i}(CodeEditor||(CodeEditor={}));var HawtioEditor;!function(e){e.pluginName="hawtio-editor",e.templatePath="plugins/editor/html",e.log=Logger.get(e.pluginName)}(HawtioEditor||(HawtioEditor={}));var HawtioEditor;!function(e){e._module=angular.module(e.pluginName,[]),e._module.run(function(){e.log.debug("loaded")}),hawtioPluginLoader.addModule(e.pluginName)}(HawtioEditor||(HawtioEditor={}));var HawtioEditor;!function(e){function t(t){return{restrict:"A",replace:!0,templateUrl:UrlHelpers.join(e.templatePath,"editor.html"),scope:{text:"=hawtioEditor",mode:"=",outputEditor:"@",name:"@"},controller:["$scope","$element","$attrs",function(e,t,n){e.codeMirror=null,e.doc=null,e.options=[],UI.observe(e,n,"name","editor"),e.applyOptions=function(){e.codeMirror&&(e.options.each(function(t){e.codeMirror.setOption(t.key,t.value)}),e.options=[])},e.$watch(_.debounce(function(){e.codeMirror&&e.codeMirror.refresh()},100,{trailing:!0})),e.$watch("codeMirror",function(){e.codeMirror&&(e.doc=e.codeMirror.getDoc(),e.codeMirror.on("change",function(t){e.text=e.doc.getValue(),e.dirty=!e.doc.isClean(),Core.$apply(e)}))}),e.$watch("text",function(t,n){if(e.codeMirror&&e.doc&&!e.codeMirror.hasFocus()){var i=e.text||"";(angular.isArray(i)||angular.isObject(i))&&(i=JSON.stringify(i,null,"  "),e.mode="javascript",e.codeMirror.setOption("mode","javascript")),e.doc.setValue(i)}})}],link:function(e,n,i){"dirty"in i&&(e.dirtyTarget=i.dirty,e.$watch("$parent['"+e.dirtyTarget+"']",function(t,n){t!==n&&(e.dirty=t)}));var r=_.cloneDeep(i);if(delete r.$$element,delete r.$attr,delete r["class"],delete r.hawtioEditor,delete r.mode,delete r.dirty,delete r.outputEditor,"onChange"in i){var a=i.onChange;delete r.onChange,e.options.push({onChange:function(n){var i=t(a);i&&i(e.$parent,{codeMirror:n})}})}angular.forEach(r,function(t,n){e.options.push({key:n,value:t})}),e.$watch("mode",function(){e.mode&&(e.codeMirror?e.codeMirror.setOption("mode",e.mode):e.options.push({key:"mode",value:e.mode}))}),e.$watch("dirty",function(t,n){e.dirty&&!e.doc.isClean()&&e.doc.markClean(),t!==n&&"dirtyTarget"in e&&(e.$parent[e.dirtyTarget]=e.dirty)}),e.$watch("text",function(){if(!e.codeMirror){var t={value:e.text};t=CodeEditor.createEditorSettings(t),e.codeMirror=CodeMirror.fromTextArea(n.find("textarea").get(0),t);var i=e.outputEditor;if(i){var r=e.$parent||e;Core.pathSet(r,i,e.codeMirror)}e.applyOptions()}})}}}e._module.directive("hawtioEditor",["$parse",function(t){return e.Editor(t)}]),e.Editor=t}(HawtioEditor||(HawtioEditor={}));var ForceGraph;!function(e){var t="forceGraph";e._module=angular.module(t,[]),e._module.directive("hawtioForceGraph",function(){return new e.ForceGraphDirective}),hawtioPluginLoader.addModule(t)}(ForceGraph||(ForceGraph={}));var ForceGraph;!function(e){var t=(Logger.get("ForceGraph"),function(){function e(){this.restrict="A",this.replace=!0,this.transclude=!1,this.scope={graph:"=graph",nodesize:"@",selectedModel:"@",linkDistance:"@",markerKind:"@",charge:"@"},this.link=function(e,t,n){e.trans=[0,0],e.scale=1,e.$watch("graph",function(e,t){i()}),e.redraw=function(){e.trans=d3.event.translate,e.scale=d3.event.scale,e.viewport.attr("transform","translate("+e.trans+") scale("+e.scale+")")},e.tick=function(){e.graphEdges.attr("d",function(e){var t=e.target.x-e.source.x,n=e.target.y-e.source.y,i=Math.sqrt(t*t+n*n);return"M"+e.source.x+","+e.source.y+"A"+i+","+i+" 0 0,1 "+e.target.x+","+e.target.y}),e.graphNodes.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),e.graphLabels.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),(Object.hasOwnProperty.call(window,"ActiveXObject")||!window.ActiveXObject)&&e.svg.selectAll(".link").each(function(){this.parentNode.insertBefore(this,this)})},e.mover=function(t){null!=t.popup&&$("#pop-up").fadeOut(100,function(){$("#pop-up-title").html(null!=t.popup.title?t.popup.title:""),$("#pop-up-content").html(null!=t.popup.content?t.popup.content:"");var n=t.x*e.scale+e.trans[0]+20,i=t.y*e.scale+e.trans[1]+20;$("#pop-up").css({left:n,top:i}),$("#pop-up").fadeIn(100)})},e.mout=function(e){$("#pop-up").fadeOut(50)};var i=function(){function n(e){return e.image&&e.image.url}var i=$(t),r=$(t).parent().height(),a=$(t).parent().width();i.children("svg").remove(),e.svg=d3.select(i[0]).append("svg").attr("width",a).attr("height",r);var o=null;if(e.graph&&(o=e.graph.linktypes),o&&(e.svg.append("svg:defs").selectAll("marker").data(o).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",-1.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5"),e.svg.append("svg:g").append("svg:rect").attr("class","graphbox.frame").attr("width",a).attr("height",r),e.viewport=e.svg.append("svg:g").call(d3.behavior.zoom().on("zoom",e.redraw)).append("svg:g"),e.viewport.append("svg:rect").attr("width",1e6).attr("height",1e6).attr("class","graphbox").attr("transform","translate(-50000, -500000)"),e.graph)){var s=e.$parent||e,l=e.selectedModel||"selectedNode";e.force=d3.layout.force().nodes(e.graph.nodes).links(e.graph.links).size([a,r]).on("tick",e.tick),angular.isDefined(e.linkDistance)&&e.force.linkDistance(e.linkDistance),angular.isDefined(e.charge)&&e.force.charge(e.charge);var c=e.markerKind||"marker-end";e.graphEdges=e.viewport.append("svg:g").selectAll("path").data(e.force.links()).enter().append("svg:path").attr("class",function(e){return"link "+e.type}).attr(c,function(e){return"url(#"+e.type+")"}),e.graphNodes=e.viewport.append("svg:g").selectAll("circle").data(e.force.nodes()).enter().append("a").attr("xlink:href",function(e){return e.navUrl}).on("mouseover.onLink",function(e,t){var n=d3.select(d3.event.target);n.classed("selected",!0),s[l]=e,Core.pathSet(s,l,e),Core.$apply(s)}).on("mouseout.onLink",function(e,t){var n=d3.select(d3.event.target);n.classed("selected",!1)}),e.graphNodes.filter(function(e){return null!=e.image}).append("image").attr("xlink:href",function(e){return e.image.url}).attr("x",function(e){return-(e.image.width/2)}).attr("y",function(e){return-(e.image.height/2)}).attr("width",function(e){return e.image.width}).attr("height",function(e){return e.image.height}),e.graphNodes.filter(function(e){return!n(e)}).append("circle").attr("class",function(e){return e.type}).attr("r",function(t){return t.size||e.nodesize}),e.graphLabels=e.viewport.append("svg:g").selectAll("g").data(e.force.nodes()).enter().append("svg:g"),e.graphLabels.append("svg:text").attr("x",8).attr("y",".31em").attr("class","shadow").text(function(e){return e.name}),e.graphLabels.append("svg:text").attr("x",8).attr("y",".31em").text(function(e){return e.name}),e.force.start(),e.graphNodes.call(e.force.drag).on("mouseover",e.mover).on("mouseout",e.mout)}}}}return e}());e.ForceGraphDirective=t}(ForceGraph||(ForceGraph={}));var ForceGraph;!function(e){var t=function(){function e(){this.nodes={},this.links=[],this.linkTypes={}}return e.prototype.addNode=function(e){this.nodes[e.id]||(this.nodes[e.id]=e)},e.prototype.getNode=function(e){return this.nodes[e]},e.prototype.hasLinks=function(e){var t=this,n=!1;return this.links.forEach(function(i){(i.source.id==e||i.target.id==e)&&(n=n||null!=t.nodes[i.source.id]&&null!=t.nodes[i.target.id])}),n},e.prototype.addLink=function(e,t,n){null!=this.nodes[e]&&null!=this.nodes[t]&&(this.links.push({source:this.nodes[e],target:this.nodes[t],type:n}),this.linkTypes[n]||(this.linkTypes[n]={used:!0}))},e.prototype.nodeIndex=function(e,t){var n=-1,i=0;for(i=0;i<t.length;i++){var r=t[i];if(r.id==e){n=i;break}}return n},e.prototype.filterNodes=function(e){var t={},n=[];d3.values(this.nodes).forEach(function(n){e(n)&&(t[n.id]=n)}),this.links.forEach(function(e){t[e.source.id]&&t[e.target.id]&&n.push(e)}),this.nodes=t,this.links=n},e.prototype.buildGraph=function(){var e=this,t=[],n=d3.keys(this.linkTypes),i=[];return d3.values(this.nodes).forEach(function(e){(null==e.includeInGraph||e.includeInGraph)&&(e.includeInGraph=!0,t.push(e))}),this.links.forEach(function(n){null!=e.nodes[n.source.id]&&null!=e.nodes[n.target.id]&&e.nodes[n.source.id].includeInGraph&&e.nodes[n.target.id].includeInGraph&&i.push({source:e.nodeIndex(n.source.id,t),target:e.nodeIndex(n.target.id,t),type:n.type})}),{nodes:t,links:i,linktypes:n}},e}();e.GraphBuilder=t}(ForceGraph||(ForceGraph={}));var Toastr;!function(e){{var t="hawtio-toastr";angular.module(t,[])}hawtioPluginLoader.addModule(t)}(Toastr||(Toastr={}));var Core;!function(e){function t(e,t,n){void 0===n&&(n=null),null===n&&(n={}),("error"===e||"warning"===e)&&(angular.isDefined(n.onclick)||(n.onclick=window.showLogPanel)),toastr[e](t,"",n)}function n(){toastr.clear()}e.notification=t,e.clearNotifications=n}(Core||(Core={}));var UI;!function(e){e.log=Logger.get("UI"),e.scrollBarWidth=null,e.pluginName="hawtio-ui",e.templatePath="plugins/ui/html/"}(UI||(UI={}));var UI;!function(e){e._module=angular.module(e.pluginName,[]),e._module.factory("UI",function(){return e}),e._module.factory("marked",function(){return marked.setOptions({gfm:!0,tables:!0,breaks:!1,pedantic:!0,sanitize:!1,smartLists:!0,langPrefix:"language-"}),marked}),e._module.directive("compile",["$compile",function(e){return function(t,n,i){t.$watch(function(e){return e.$eval(i.compile)},function(i){n.html(i),e(n.contents())(t)})}}]),e._module.run([function(){e.log.debug("loaded")}]),hawtioPluginLoader.addModule(e.pluginName)}(UI||(UI={}));var UI;!function(e){e._module.directive("hawtioAutoColumns",function(){return new e.AutoColumns});var t=function(){function t(){this.restrict="A",this.link=function(t,n,i){var r=e.getIfSet("hawtioAutoColumns",i,"div"),a=e.getIfSet("minMargin",i,"3").toNumber(),o=Core.throttled(function(){var e=n.innerWidth(),t=0,i=n.children(r);if(0!==i.length&&(i.each(function(e){var n=$(this);n.is(":visible")&&n.outerWidth()>t&&(t=n.outerWidth())}),0!==t)){t+=2*a;var o=Math.floor(e/t);i.length<o&&(o=i.length);var s=(e-o*t)/o/2;i.each(function(e){$(this).css({"margin-left":s,"margin-right":s})})}},500);setTimeout(o,300),t.$watch(o),$(window).resize(o)}}return t}();e.AutoColumns=t}(UI||(UI={}));var UI;!function(e){e._module.directive("hawtioAutoDropdown",function(){return e.AutoDropDown}),e.AutoDropDown={restrict:"A",link:function(t,n,i){function r(t){var i=n.get(0);if(!(t&&t.relatedNode!==i&&t.type&&t&&"resize"!==t.type)){var r=$(n.find(".overflow")),a=$(r.find("ul.dropdown-menu")),o=0,s=0;try{o=r.outerWidth()-r.innerWidth(),s=r.position().left-n.position().left-50}catch(l){e.log.debug("caught "+l)}if(n.children("li:not(.overflow):not(.pull-right):not(:hidden)").each(function(){var e=$(this);s-=e.outerWidth(!0),0>s&&(e.detach(),e.prependTo(a))}),a.children().length>0&&r.css({visibility:"visible"}),s>130){var c=!1;a.children("li:not(.overflow):not(.pull-right)").filter(function(){return"none"!==$(this).css("display")}).each(function(){if(!c){var e=$(this);s>e.outerWidth()?(s-=e.outerWidth(),e.detach(),e.insertBefore(r)):c=!0}})}0===a.children().length&&r.css({visibility:"hidden"})}}$(window).resize(r),n.get(0).addEventListener("DOMNodeInserted",r),t.$watch(setTimeout(r,500))}}}(UI||(UI={}));var UI;!function(e){function t(){return{restrict:"E",replace:!0,templateUrl:e.templatePath+"breadcrumbs.html",require:"hawtioDropDown",scope:{config:"="},controller:["$scope","$element","$attrs",function(e,t,n){function i(t,n){t.level=n,n>0&&(t.breadcrumbAction=t.action,t.action=e.action),t.items&&t.items.forEach(function(e){i(e,n+1)})}function r(t,n,i){if(0!==n.length){var a=n.removeAt(0)[0];if(t&&t.items){var o=!1;t.items.forEach(function(t){o||t.title!==a||(o=!0,e.levels[i]=t,r(t,n,i+1))})}}}e.action="itemClicked(config, $event)",e.levels={},e.itemClicked=function(t,n){if(t.level&&angular.isNumber(t.level)){e.levels[t.level]=t;var i=_.keys(e.levels).sortBy(""),r=i.from(t.level+1);if(r.forEach(function(t){t in e.levels&&(e.levels[t]={},delete e.levels[t])}),angular.forEach(e.levels,function(t,n){t.items&&t.items.length>0&&t.items.forEach(function(t){t.action=e.action})}),t.items)t.open=!0,t.items.forEach(function(t){t.action=e.action}),delete t.action;else{var i=_.keys(e.levels).keys().sortBy(""),a=[];i.forEach(function(t){a.push(e.levels[t].title)});var o="/"+a.join("/");e.config.path=o}t.level>1&&(n.preventDefault(),n.stopPropagation())}},e.$watch("config.path",function(t,n){if(!Core.isBlank(t)){var i=t.split("/").exclude(function(e){return Core.isBlank(e)}),a=!0;if(i.forEach(function(t,n){a&&(!e.levels[n]||Core.isBlank(e.levels[n].title)||e.levels[n].title!==t)&&(a=!1)}),a)return;e.levels=[],e.levels[0]=e.config,r(e.config,i.from(0),1)}}),e.$watch("config",function(t,n){i(e.config,0),e.levels[0]=e.config})}]}}e.hawtioBreadcrumbs=t,e._module.directive("hawtioBreadcrumbs",e.hawtioBreadcrumbs)}(UI||(UI={}));var UI;!function(e){e.colors=["#5484ED","#A4BDFC","#46D6DB","#7AE7BF","#51B749","#FBD75B","#FFB878","#FF887C","#DC2127","#DBADFF","#E1E1E1"]}(UI||(UI={}));var UI;!function(e){e._module.directive("hawtioColorPicker",function(){return new e.ColorPicker}),e.selected="selected",e.unselected="unselected";var t=function(){function t(){this.restrict="A",this.replace=!0,this.scope={property:"=hawtioColorPicker"},this.templateUrl=e.templatePath+"colorPicker.html",this.compile=function(t,n,i){return{post:function(t,n,i,r){t.colorList=[],angular.forEach(e.colors,function(n){var i=e.unselected;t.property===n&&(i=e.selected),t.colorList.push({color:n,select:i})})}}},this.controller=["$scope","$element","$timeout",function(t,n,i){t.popout=!1,t.$watch("popout",function(){n.find(".color-picker-popout").toggleClass("popout-open",t.popout)}),t.selectColor=function(n){for(var i=0;i<t.colorList.length;i++)t.colorList[i].select=e.unselected,t.colorList[i]===n&&(t.property=n.color,t.colorList[i].select=e.selected)}}]}return t}();e.ColorPicker=t}(UI||(UI={}));var UI;!function(e){e._module.directive("hawtioConfirmDialog",function(){return new e.ConfirmDialog});var t=function(){function t(){this.restrict="A",this.replace=!0,this.transclude=!0,this.templateUrl=e.templatePath+"confirmDialog.html",this.scope={show:"=hawtioConfirmDialog",title:"@",okButtonText:"@",showOkButton:"@",cancelButtonText:"@",onCancel:"&?",onOk:"&?",onClose:"&?"},this.controller=["$scope","$element","$attrs","$transclude","$compile",function(e,t,n,i,r){function a(){setTimeout(function(){var e=$("div.modal-backdrop");e&&e.length&&(Logger.get("ConfirmDialog").debug("Removing the backdrop div! "+e),e.remove())},200)}e.clone=null,i(function(t){e.clone=$(t).filter(".dialog-body")}),e.$watch("show",function(){e.show&&setTimeout(function(){e.body=$(".modal-body"),e.body.html(r(e.clone.html())(e.$parent)),Core.$apply(e)},50)}),n.$observe("okButtonText",function(t){angular.isDefined(t)||(e.okButtonText="OK")}),n.$observe("cancelButtonText",function(t){angular.isDefined(t)||(e.cancelButtonText="Cancel")}),n.$observe("title",function(t){angular.isDefined(t)||(e.title="Are you sure?")}),e.cancel=function(){e.show=!1,e.$parent.$eval(e.onCancel),a()},e.submit=function(){e.show=!1,e.$parent.$eval(e.onOk),a()},e.close=function(){e.$parent.$eval(e.onClose),a()}}]}return t}();e.ConfirmDialog=t}(UI||(UI={}));var UI;!function(e){e._module.controller("UI.DeveloperPageController",["$scope","$http",function(t,n){t.getContents=function(t,i){var r=UrlHelpers.join(e.templatePath,"test",t);n({method:"GET",url:r}).success(function(e,t,n,r){i(e)}).error(function(e,n,r,a){i("Failed to fetch "+t+": "+e)})}}])}(UI||(UI={}));var UI;!function(e){function t(t){var n=HawtioCore.injector.get("$dialog");return n.dialog({resolve:{options:function(){return t}},templateUrl:UrlHelpers.join(e.templatePath,"multiItemConfirmActionDialog.html"),controller:["$scope","dialog","options",function(e,t,n){e.options=n,e.close=function(e){t.close(),n.onClose(e)},e.getName=function(e){return Core.pathGet(e,n.index.split("."))}}]})}var n=function(){function e(){this.show=!1,this.options={backdropFade:!0,dialogFade:!0}}return e.prototype.open=function(){this.show=!0},e.prototype.close=function(){this.show=!1,this.removeBackdropFadeDiv(),setTimeout(this.removeBackdropFadeDiv,100)},e.prototype.removeBackdropFadeDiv=function(){$("div.modal-backdrop").remove()},e}();e.Dialog=n,e.multiItemConfirmActionDialog=t}(UI||(UI={}));var UI;!function(e){e.hawtioDrag=e._module.directive("hawtioDrag",[function(){return{replace:!1,transclude:!0,restrict:"A",template:"<span ng-transclude></span>",scope:{data:"=hawtioDrag"},link:function(e,t,n){t.attr({draggable:"true"});var i=t[0];i.draggable=!0,i.addEventListener("dragstart",function(n){return n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("data",e.data),t.addClass("drag-started"),!1},!1),i.addEventListener("dragend",function(e){t.removeClass("drag-started")},!1)}}}]),e.hawtioDrop=e._module.directive("hawtioDrop",[function(){return{replace:!1,transclude:!0,restrict:"A",template:"<span ng-transclude></span>",scope:{onDrop:"&?hawtioDrop",ngModel:"=",property:"@",prefix:"@"},link:function(e,t,n){var i=function(e){return e.preventDefault&&e.preventDefault(),t.addClass("drag-over"),!1},r=t[0];r.addEventListener("dragenter",i,!1),r.addEventListener("dragover",i,!1),r.addEventListener("dragleave",function(e){return t.removeClass("drag-over"),!1},!1),r.addEventListener("drop",function(n){n.stopPropagation&&n.stopPropagation(),t.removeClass("drag-over");var i=n.dataTransfer.getData("data");e.onDrop&&e.$eval(e.onDrop,{data:i,model:e.ngModel,property:e.property});var r="hawtio-drop";return Core.isBlank(e.prefix)||(r=e.prefix+"-"+r),e.$emit(r,{data:i,model:e.ngModel,property:e.property}),Core.$apply(e),!1},!1)}}}])}(UI||(UI={}));var UI;!function(e){function t(t){return{restrict:"A",replace:!0,templateUrl:e.templatePath+"dropDown.html",scope:{config:"=hawtioDropDown"},controller:["$scope","$element","$attrs",function(e,t,n){e.config||(e.config={}),"open"in e.config||(e.config.open=!1),e.action=function(t,n){if("items"in t&&!("action"in t))t.open=!t.open,n.preventDefault(),n.stopPropagation();else if("action"in t){var i=t.action;angular.isFunction(i)?i():angular.isString(i)&&e.$parent.$eval(i,{config:t,$event:n})}},e.$watch("config.items",function(t,n){t!==n&&(e.menuStyle=e.menuStyle+" ")},!0),e.submenu=function(e){return e&&e.submenu?"sub-menu":""},e.icon=function(e){return e&&!Core.isBlank(e.icon)?e.icon:"fa fa-spacer"},e.open=function(e){return e&&!e.open?"":"open"}}],link:function(e,n,i){e.menuStyle=t.get("withsubmenus.html"),"processSubmenus"in i&&(Core.parseBooleanValue(i.processSubmenus)||(e.menuStyle=t.get("withoutsubmenus.html")))}}}e.hawtioDropDown=t,e._module.directive("hawtioDropDown",["$templateCache",e.hawtioDropDown])}(UI||(UI={}));var UI;!function(e){e._module.directive("editableProperty",["$parse",function(t){return new e.EditableProperty(t)}]);var t=function(){function t(t){this.$parse=t,this.restrict="E",this.scope=!0,this.templateUrl=e.templatePath+"editableProperty.html",this.require="ngModel",this.link=null,this.link=function(e,n,i,r){function a(){return":input[type="+e.inputType+"]"}e.inputType=i.type||"text",e.min=i.min,e.max=i.max,e.getText=function(){return e.text?"password"===e.inputType?StringHelpers.obfusicate(e.text):e.text:""},e.editing=!1,$(n.find(".fa fa-pencil")[0]).hide(),e.getPropertyName=function(){var n=t(i.property)(e);return n||0===n||(n=i.property),n},r.$render=function(){r.$viewValue&&(e.text=r.$viewValue[e.getPropertyName()])},e.getInputStyle=function(){if(!e.text)return{};var t=(e.text+"").length/1.2;return 5>t&&(t=5),{width:t+"em"}},e.showEdit=function(){$(n.find(".fa fa-pencil")[0]).show()},e.hideEdit=function(){$(n.find(".fa fa-pencil")[0]).hide()},e.$watch("editing",function(e,t){e!==t&&e&&$(n.find(a())).focus().select()}),e.doEdit=function(){e.editing=!0},e.stopEdit=function(){$(n.find(a())[0]).val(r.$viewValue[e.getPropertyName()]),e.editing=!1},e.saveEdit=function(){var t=$(n.find(a())[0]).val(),o=r.$viewValue;o[e.getPropertyName()]=t,r.$setViewValue(o),r.$render(),e.editing=!1,e.$parent.$eval(i.onSave)}}}return t}();e.EditableProperty=t}(UI||(UI={}));var UI;!function(e){function t(e){return e.hasClass("opened")||!e.hasClass("closed")}function n(e){return e?!0:!1}e._module.directive("expandable",function(){return new e.Expandable});var i=function(){function e(){var e=this;this.log=Logger.get("Expandable"),this.restrict="C",this.replace=!1,this.link=null,this.link=function(i,r,a){var o=e,s=r,l=null,c=null;angular.isDefined(a.model)&&(l=a.model,c=i[l],angular.isDefined(i[l].expanded)?c.expanded?o.forceOpen(c,s,i):o.forceClose(c,s,i):c.expanded=s.hasClass("opened"),l&&i.$watch(l+".expanded",function(e,t){n(e)!==n(t)&&(e?o.open(c,s,i):o.close(c,s,i))}));var u=s.find(".title"),d=s.find(".cancel");d.bind("click",function(){return c=i[l],o.forceClose(c,s,i),!1}),u.bind("click",function(){return c=i[l],t(s)?o.close(c,s,i):o.open(c,s,i),!1})}}return e.prototype.open=function(e,t,n){t.find(".expandable-body").slideDown(400,function(){t.hasClass("opened")||t.addClass("opened"),t.removeClass("closed"),e&&(e.expanded=!0),Core.$apply(n)})},e.prototype.close=function(e,t,n){t.find(".expandable-body").slideUp(400,function(){t.removeClass("opened"),t.hasClass("closed")||t.addClass("closed"),e&&(e.expanded=!1),Core.$apply(n)})},e.prototype.forceClose=function(e,t,n){t.find(".expandable-body").slideUp(0,function(){t.hasClass("closed")||t.addClass("closed"),t.removeClass("opened"),e&&(e.expanded=!1),Core.$apply(n)})},e.prototype.forceOpen=function(e,t,n){t.find(".expandable-body").slideDown(0,function(){t.hasClass("opened")||t.addClass("opened"),t.removeClass("closed"),e&&(e.expanded=!0),Core.$apply(n)})},e}();e.Expandable=i}(UI||(UI={}));var UI;!function(e){e._module.directive("hawtioFileDrop",[function(){return{restrict:"A",replace:!1,link:function(t,n,i){var r=i.hawtioFileDrop,a=i.downloadUrl,o=i.mimeType||"application/octet-stream";if(!Core.isBlank(r)&&!Core.isBlank(a)){if(!a.startsWith("http")){var s=new URI;a=s.path(a).toString()}var l=o+":"+r+":"+a;n.attr({draggable:!0}),n[0].addEventListener("dragstart",function(t){t.dataTransfer?(e.log.debug("Drag started, event: ",t,"File details: ",l),t.dataTransfer.setData("DownloadURL",l)):e.log.debug("Drag event object doesn't contain data transfer: ",t)})}}}}])}(UI||(UI={}));var UI;!function(e){e.hawtioFilter=e._module.directive("hawtioFilter",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:e.templatePath+"filter.html",scope:{placeholder:"@",cssClass:"@",saveAs:"@?",ngModel:"="},controller:["$scope","localStorage","$location","$element",function(e,t,n,i){if(e.getClass=function(){var t=[];return Core.isBlank(e.cssClass)||t.push(e.cssClass),Core.isBlank(e.ngModel)||t.push("has-text"),t.join(" ")},!Core.isBlank(e.saveAs)){if(e.saveAs in t){var r=t[e.saveAs];e.ngModel=Core.isBlank(r)?"":r}else e.ngModel="";var a=function(){t[e.saveAs]=e.ngModel};e.$watch("ngModel",a)}}]}}])}(UI||(UI={}));var UI;!function(e){e._module.directive("gridster",function(){return new e.GridsterDirective});var t=function(){function e(){this.restrict="A",this.replace=!0,this.controller=["$scope","$element","$attrs",function(e,t,n){}],this.link=function(e,t,n){var i=[6,6],r=[150,150],a=10,o=6;angular.isDefined(n.extraRows)&&(a=n.extraRows.toNumber()),angular.isDefined(n.extraCols)&&(o=n.extraCols.toNumber());var s=$('<ul style="margin: 0"></ul>'),l='<style type="text/css">',l=l+"</style>";t.append($(l)),t.append(s),e.gridster=s.gridster({widget_margins:i,grid_size:r,extra_rows:a,extra_cols:o}).data("gridster")}}return e}();e.GridsterDirective=t}(UI||(UI={}));var UI;!function(e){function t(){return function(e,t){function n(e,n,i){n[r]=!0,n[a]=!1,o=n[t],i>0&&(e[i-1][a]=!0)}function i(e){e[r]=!1,e[a]=!1}if(0===e.length)return e;if(Core.isBlank(t))return e;var r="newGroup",a="endGroup",o=void 0;return e.forEach(function(r,a){var s=r[t]!==o;if(angular.isArray(r[t]))if(void 0===o)s=!0;else{var l=r[t];l.length!==o.length?s=!0:(s=!1,l.forEach(function(e){s||o.any(function(t){return t===e})||(s=!0)}))}s?n(e,r,a):i(r)}),e}}e.groupBy=t,e._module.filter("hawtioGroupBy",e.groupBy)}(UI||(UI={}));var UI;!function(e){function t(){return e.log.debug("Creating icon directive"),{restrict:"E",replace:!0,templateUrl:e.templatePath+"icon.html",scope:{icon:"=config"},link:function(e,t,n){e.icon&&("type"in e.icon||Core.isBlank(e.icon.src)||(e.icon.type=e.icon.src.startsWith("fa fa-")?"icon":"img"))}}}e.IconTestController=e._module.controller("UI.IconTestController",["$scope","$templateCache",function(e,t){e.exampleHtml=t.get("example-html"),e.exampleConfigJson=t.get("example-config-json"),e.$watch("exampleConfigJson",function(t,n){e.icons=angular.fromJson(e.exampleConfigJson)})}]),e.hawtioIcon=t,e._module.directive("hawtioIcon",e.hawtioIcon)}(UI||(UI={}));var UI;!function(e){e._module.directive("hawtioJsplumb",["$timeout","$window",function(t,n){return{restrict:"A",link:function(i,r,a){function o(e){var t=$(e),n=t.attr("id"),i=t.attr("anchors");if(!Core.isBlank(i)&&(i.has("{{")||i.has("}}")))return null;i=Core.isBlank(i)?["Continuous"]:i.split(",").map(function(e){return e.trim()});var r={id:n,label:"node "+n,el:t,width:t.outerWidth(),height:t.outerHeight(),edges:[],connections:[],endpoints:[],anchors:i};return r}function s(e,t){var n={isSource:!0,isTarget:!0,anchor:t.anchors,connector:w,maxConnections:-1};angular.isFunction(i.customizeEndpointOptions)&&i.customizeEndpointOptions(e,t,n);var a=e.addEndpoint(t.el,n);t.endpoints.push(a),u&&e.draggable(t.el,{containment:r})}function l(){var e=r.find(".jsplumb-node");x.length>0,angular.forEach(e,function(e){if(!C[e.id]){var t=o(e);t&&(x.push(t),C[t.id]=t)}}),angular.forEach(x,function(e){var t=e.el.attr("connect-to");t&&(t=t.split(","),angular.forEach(t,function(t){var n=C[t.trim()];if(n){var i={source:e,target:n};k.push(i),e.edges.push(i),n.edges.push(i)}}))})}function c(){if(!i.jsPlumb){i.jsPlumb=jsPlumb.getInstance({Container:r});var e={Anchor:"AutoDefault",Connector:"Flowchart",ConnectorStyle:w,DragOptions:{cursor:"pointer",zIndex:2e3},Endpoint:v,PaintStyle:{strokeStyle:"#42a62c",lineWidth:4},HoverPaintStyle:{strokeStyle:"#42a62c",lineWidth:4},ConnectionOverlays:[b,y]};u||(e.ConnectionsDetachable=!1),angular.isFunction(i.customizeDefaultOptions)&&i.customizeDefaultOptions(e),i.jsPlumb.importDefaults(e)}l(),i.jsPlumbNodes=x,i.jsPlumbNodesById=C,i.jsPlumbTransitions=k,d&&(i.layout=dagre.layout().nodeSep(h).edgeSep(f).rankSep(g).rankDir(p).nodes(x).edges(k).run()),angular.forEach(i.jsPlumbNodes,function(e){if(d){var t=e.el.width(),n=e.el.height(),r=e.dagre.y-n/2,a=e.dagre.x-t/2;e.el.css({top:r,left:a})}s(i.jsPlumb,e)}),angular.forEach(i.jsPlumbTransitions,function(e){var t={connector:w,maxConnections:-1},n={source:e.source.el,target:e.target.el};angular.isFunction(i.customizeConnectionOptions)&&i.customizeConnectionOptions(i.jsPlumb,e,n,t);var r=i.jsPlumb.connect(n,t);e.source.connections.push(r),e.target.connections.push(r)}),i.jsPlumb.recalculateOffsets(r),i.jsPlumb.isSuspendDrawing()||i.jsPlumb.repaintEverything(),angular.isDefined(i.jsPlumbCallback)&&angular.isFunction(i.jsPlumbCallback)&&i.jsPlumbCallback(i.jsPlumb,i.jsPlumbNodes,i.jsPlumbNodesById,i.jsPlumbTransitions)}n.addEventListener("resize",function(){i.jsPlumb&&(i.jsPlumb.recalculateOffsets(r),i.jsPlumb.repaintEverything())});var u=!0;angular.isDefined(a.draggable)&&(u=Core.parseBooleanValue(a.draggable));var d=!0;angular.isDefined(a.layout)&&(d=Core.parseBooleanValue(a.layout));var p="TB";if(angular.isDefined(a.direction))switch(a.direction){case"down":p="LR";break;default:p="TB"}var h=50,f=10,g=50;angular.isDefined(a.nodeSep)&&(h=Core.parseIntValue(a.nodeSep)),angular.isDefined(a.edgeSep)&&(f=Core.parseIntValue(a.edgeSep)),angular.isDefined(a.rankSep)&&(g=Core.parseIntValue(a.rankSep));var m=100;angular.isDefined(a.timeout)&&(m=Core.parseIntValue(a.timeout,"timeout"));var v=["Dot",{radius:10,cssClass:"jsplumb-circle",hoverClass:"jsplumb-circle-hover"}],y=["Label"],b=["Arrow",{location:1,id:"arrow",length:8,width:8,foldback:.8}],w=["Flowchart",{cornerRadius:4,gap:8}];angular.isDefined(i.connectorStyle)&&(w=i.connectorStyle);var x=[],k=[],C={};i.$on("jsplumbDoWhileSuspended",function(t,n){if(i.jsPlumb){var r=i.jsPlumb;r.doWhileSuspended(function(){e.log.debug("Suspended jsplumb"),i.jsPlumb.reset(),n(),x=[],C={},k=[],c()})}}),t(c,m)}}}])}(UI||(UI={}));var UI;!function(e){function t(t,n){return{restrict:"",replace:!0,templateUrl:e.templatePath+"list.html",scope:{config:"=hawtioList"},link:function(i,r,a){i.rows=[],i.name="hawtioListScope",i.config.selectedItems||(i.config.selectedItems=[]),i.$watch("rows",function(e,t){if(e!==t){i.config.selectedItems.length=0;var n=i.rows.findAll(function(e){return e.selected});n.forEach(function(e){i.config.selectedItems.push(e.entity)})}},!0),i.cellTemplate=t.get("cellTemplate.html"),i.rowTemplate=t.get("rowTemplate.html");var o=i.config.columnDefs,s="name",l="Name";if(o&&o.length>0){var c=o.first();s=c.field||s,l=c.displayName||l,c.cellTemplate&&(i.cellTemplate=c.cellTemplate)}var u=a.hawtioList,d=i.config.data;if(!Core.isBlank(u)&&!Core.isBlank(d)){i.listRoot=function(){return r.find(".list-root")},i.getContents=function(e){var t=i.$new();t.row=e;var r=n(i.rowTemplate)(t),a=i.parentScope.$new();a.row=e,a.col={field:s};var o=n(i.cellTemplate)(a);return $(r).find(".list-row-contents").append(o),r},i.setRows=function(e){i.rows=[];var t=i.listRoot();t.empty(),e&&e.forEach(function(e){var n={entity:e,getProperty:function(t){return angular.isDefined(t)?e[t]:null}};t.append(i.getContents(n)),i.rows.push(n)})};var p=e.findParentWith(i,u);p&&(i.parentScope=p,p.$watch(d,i.setRows,!0))}}}}e.hawtioList=t,e._module.directive("hawtioList",["$templateCache","$compile",e.hawtioList])}(UI||(UI={}));var UI;!function(e){e._module.directive("hawtioObject",["$templateCache","$interpolate","$compile",function(t,n,i){return{restrict:"A",replace:!0,templateUrl:e.templatePath+"object.html",scope:{entity:"=?hawtioObject",config:"=?",path:"=?",row:"=?"},link:function(e,r,a){function o(e,t,i,r){var a=n(e);return a(i?{key:i.titleize(),data:r,path:t}:{data:r,path:t})}function s(e,t){var n=void 0,i=Core.pathGet(t,["properties"]);return!n&&i&&angular.forEach(i,function(t,i){var r=new RegExp(i);r.test(e)&&(n=!n||n.override||t.override?_.clone(t,!0):_.merge(n,t))}),n}function l(e,t,n){var i=n,t=s(e,t);return t&&t.template&&(i=t.template),i}function c(t,n,r,a,l){var l=s(n,l);if(!l||!l.hidden){var c=null;c=l&&l.template?l.template:o(t,n,r,a);var u=e.$new();return u.row=e.row,u.entityConfig=l,u.data=a,u.path=n,i(c)(u)}}function u(e,n,i){var r=l(e,i,t.get("primitiveValueTemplate.html"));return c(r,e,void 0,n,i)}function d(e,n,i){var r=l(e,i,t.get("dateValueTemplate.html"));return c(r,e,void 0,n,i)}function p(e,t,n){var i=!1,r=void 0;return angular.forEach(t,function(a,o){angular.isNumber(o)&&"length"in t&&(i=!0),i||o.startsWith("$")||(r||(r=angular.element("<span></span>")),r.append(angular.isArray(a)?b(e+"/"+o,o,a,n):angular.isObject(a)?0===_.size(a)?m(e+"/"+o,o,"empty",n):y(e+"/"+o,o,a,n):StringHelpers.isDate(a)?v(e+"/"+o,o,Date.create(a),n):m(e+"/"+o,o,a,n)))}),r?r.children():r}function h(e,t,n){var i=void 0;if(!t)return i;var r=!1;return t.forEach(function(t){!r&&angular.isObject(t)?(i||(i=[]),i=_.keys(t).filter(function(e){return!angular.isFunction(t[e])}).filter(function(t){var i=s(e+"/"+t,n);return i&&i.hidden?!1:!0}).union(i)):(i=void 0,r=!0)}),i&&(i=i.exclude(function(e){return(""+e).startsWith("$")})),i}function f(e,n,i,r,a,s){var l=angular.element(o(e,n,i,r)),c=l.find("thead"),u=l.find("tbody"),d=t.get("headerTemplate.html"),p=t.get("cellTemplate.html"),h=t.get("rowTemplate.html"),f=angular.element(o(h,n,void 0,void 0));return a.forEach(function(e){f.append(o(d,n+"/"+e,e,void 0))}),c.append(f),r.forEach(function(e,t){var i=angular.element(o(h,n+"/"+t,void 0,void 0));a.forEach(function(r){var a=angular.element(o(p,n+"/"+t+"/"+r,void 0,void 0));a.append(w(n+"/"+t+"/"+r,e[r],s)),i.append(a)}),u.append(i)}),l}function g(e,n,i){var r=h(e,n,i);

if(r){var a=l(e,i,t.get("arrayValueTableTemplate.html"));return f(a,e,void 0,n,r,i)}var a=l(e,i,t.get("arrayValueListTemplate.html"));return c(a,e,void 0,n,i)}function m(e,n,i,r){var a=l(e,r,t.get("primitiveAttributeTemplate.html"));return c(a,e,n,i,r)}function v(e,n,i,r){var a=l(e,r,t.get("dateAttributeTemplate.html"));return c(a,e,n,i,r)}function y(e,n,i,r){var a=l(e,r,t.get("objectAttributeTemplate.html"));return c(a,e,n,i,r)}function b(e,n,i,r){var a=h(e,i,r);if(a){var o=l(e,r,t.get("arrayAttributeTableTemplate.html"));return f(o,e,n,i,a,r)}var o=l(e,r,t.get("arrayAttributeListTemplate.html"));return c(o,e,n,i,r)}function w(e,t,n){return angular.isArray(t)?g(e,t,n):angular.isObject(t)?p(e,t,n):StringHelpers.isDate(t)?d(e,Date.create(t),n):u(e,t,n)}e.$watch("entity",function(t){return t?(e.path||(e.path=""),angular.isDefined(e.row)||(e.row={entity:t}),void r.html(w(e.path,t,e.config))):void r.empty()},!0)}}}])}(UI||(UI={}));var UI;!function(e){function t(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:e.templatePath+"pane.html",scope:{position:"@",width:"@",header:"@"},controller:["$scope","$element","$attrs","$transclude","$document","$timeout","$compile","$templateCache","$window",function(e,t,n,i,r,a,o,s,l){e.moving=!1,i(function(n){if(t.find(".pane-content").append(n),!Core.isBlank(e.header)){var i=s.get(e.header),r=t.find(".pane-header-wrapper");r.html(o(i)(e)),a(function(){t.find(".pane-viewport").css("top",r.height())},500)}}),e.setViewportTop=function(){var e=t.find(".pane-header-wrapper");a(function(){t.find(".pane-viewport").css("top",e.height())},10)},e.setWidth=function(n){6>n||(t.width(n),t.parent().css(e.padding,t.width()+"px"),e.setViewportTop())},e.open=function(){e.setWidth(e.width)},e.close=function(){e.width=t.width(),e.setWidth(6)},e.$on("pane.close",e.close),e.$on("pane.open",e.open),e.toggle=function(){e.moving||(t.width()>6?e.close():e.open())},e.startMoving=function(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation(),r.on("mouseup.hawtio-pane",function(t){a(function(){e.moving=!1},250),t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation(),r.off(".hawtio-pane"),Core.$apply(e)}),r.on("mousemove.hawtio-pane",function(t){e.moving=!0,t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation(),e.setWidth("left"===e.position?t.pageX+2:l.innerWidth-t.pageX+2),Core.$apply(e)})}}],link:function(e,t,n){var i=t.parent(),r="left";e.position&&(r=e.position),t.addClass(r);var a=t.width(),o="padding-"+r;e.padding=o;var s=i.css(o);i.css(o,a+"px"),e.$on("$destroy",function(){i.css(o,s)})}}}e.hawtioPane=t,e._module.directive("hawtioPane",e.hawtioPane)}(UI||(UI={}));var UI;!function(e){e._module.directive("hawtioMessagePanel",function(){return new e.MessagePanel});var t=function(){function e(){this.restrict="A",this.link=function(e,t,n){var i="100%";if("hawtioMessagePanel"in n){var r=n.hawtioMessagePanel;r&&!r.isBlank()&&(i=r)}var a="1s";if("speed"in n){var o=n.speed;a&&!a.isBlank()&&(a=o)}t.css({position:"absolute",bottom:0,height:0,"min-height":0,transition:"all "+a+" ease-in-out"}),t.parent().mouseover(function(){t.css({height:i,"min-height":"auto"})}),t.parent().mouseout(function(){t.css({height:0,"min-height":0})})}}return e}();e.MessagePanel=t,e._module.directive("hawtioInfoPanel",function(){return new e.InfoPanel});var n=function(){function e(){this.restrict="A",this.link=function(e,t,n){var i={left:{side:"right",out:"width"},right:{side:"left",out:"width"},up:{side:"bottom",out:"height"},down:{side:"top",out:"height"}},r="right";if("hawtioInfoPanel"in n){var a=n.hawtioInfoPanel;a&&!a.isBlank()&&_.keys(i).any(a)&&(r=a)}var o="1s";if("speed"in n){var s=n.speed;o&&!o.isBlank()&&(o=s)}var l="open";if("toggle"in n){var c=n.toggle;l&&!l.isBlank()&&(l=c)}var u={position:"absolute",transition:"all "+o+" ease-in-out"},d={};d[i[r].out]="100%";var p={};p[i[r].out]=0,u[i[r].side]=0,u[i[r].out]=0,t.css(u),e.$watch(l,function(e,n){t.css(Core.parseBooleanValue(e)?d:p)}),t.click(function(){e[l]=!1,Core.$apply(e)})}}return e}();e.InfoPanel=n}(UI||(UI={}));var UI;!function(e){e._module.directive("hawtioRow",function(){return new e.DivRow});var t=function(){function e(){this.restrict="A",this.link=function(e,t,n){t.get(0).addEventListener("DOMNodeInserted",function(){var e=t.children(),n=0;angular.forEach(e,function(e){var t=angular.element(e);switch(t.css("display")){case"none":break;default:n=n+t.outerWidth(!0)+5}}),t.width(n)})}}return e}();e.DivRow=t}(UI||(UI={}));var UI;!function(e){e._module.directive("hawtioSlideout",function(){return new e.SlideOut});var t=function(){function t(){this.restrict="A",this.replace=!0,this.transclude=!0,this.templateUrl=e.templatePath+"slideout.html",this.scope={show:"=hawtioSlideout",direction:"@",top:"@",height:"@",title:"@",close:"@"},this.controller=["$scope","$element","$attrs","$transclude","$compile",function(t,n,i,r,a){t.clone=null,r(function(e){t.clone=$(e).filter(".dialog-body")}),e.observe(t,i,"direction","right"),e.observe(t,i,"top","10%",function(e){n.css("top",e)}),e.observe(t,i,"height","80%",function(e){n.css("height",e)}),e.observe(t,i,"title",""),e.observe(t,i,"close","true"),t.$watch("show",function(){t.show&&(t.body=n.find(".slideout-body"),t.body.html(a(t.clone.html())(t.$parent)))}),t.hidePanel=function(n){e.log.debug("Event: ",n),t.show=!1}}],this.link=function(e,t,n){e.$watch("show",function(){e.show?(t.addClass("out"),t.focus()):t.removeClass("out")})}}return t}();e.SlideOut=t}(UI||(UI={}));var UI;!function(e){e._module.directive("hawtioPager",function(){return new e.TablePager});var t=function(){function t(){var t=this;this.restrict="A",this.scope=!0,this.templateUrl=e.templatePath+"tablePager.html",this.$scope=null,this.element=null,this.attrs=null,this.tableName=null,this.setRowIndexName=null,this.rowIndexName=null,this.link=function(e,n,i){return t.doLink(e,n,i)}}return t.prototype.doLink=function(e,t,n){var i=this;this.$scope=e,this.element=t,this.attrs=n,this.tableName=n.hawtioPager||n.array||"data",this.setRowIndexName=n.onIndexChange||"onIndexChange",this.rowIndexName=n.rowIndex||"rowIndex",e.first=function(){i.goToIndex(0)},e.last=function(){i.goToIndex(e.tableLength()-1)},e.previous=function(){i.goToIndex(e.rowIndex()-1)},e.next=function(){i.goToIndex(e.rowIndex()+1)},e.isEmptyOrFirst=function(){var t=e.rowIndex(),n=e.tableLength();return 0>=n||0>=t},e.isEmptyOrLast=function(){var t=e.rowIndex(),n=e.tableLength();return 1>n||t+1>=n},e.rowIndex=function(){return Core.pathGet(e.$parent,i.rowIndexName.split("."))},e.tableLength=function(){var e=i.tableData();return e?e.length:0}},t.prototype.tableData=function(){return Core.pathGet(this.$scope.$parent,this.tableName.split("."))||[]},t.prototype.goToIndex=function(e){var t=this.setRowIndexName,n=this.$scope[t];angular.isFunction(n)?n(e):(console.log("No function defined in scope for "+t+" but was "+n),this.$scope[this.rowIndexName]=e)},t}();e.TablePager=t}(UI||(UI={}));var UI;!function(e){e.selectedTags=e._module.filter("selectedTags",["$rootScope",function(e){return function(t,n,i){if(0===i.length)return t;var r=[];return _.forEach(t,function(t){var a=e.$eval(n,t);_.intersection(a,i).length===i.length&&r.push(t)}),r}}]),e.hawtioTagFilter=e._module.directive("hawtioTagFilter",["localStorage","$location",function(t,n){return{restrict:"E",replace:!0,templateUrl:e.templatePath+"tagFilter.html",scope:{selected:"=",tags:"=?",collection:"=",collectionProperty:"@",saveAs:"@"},link:function(e,t,n){function i(){e.collection&&e.collectionProperty?(e.selected.length?r():(e.visibleTags=e.tags,e.filteredCollection=e.collection),e.visibleTags=e.visibleTags.map(function(t){return{id:t,count:e.filteredCollection.map(function(t){return t[e.collectionProperty]}).reduce(function(e,n){return n.any(t)?e+1:e},0)}})):e.visibleTags=e.tags}function r(){e.filteredCollection=e.collection.filter(function(t){return SelectionHelpers.filterByGroup(e.selected,t[e.collectionProperty])}),e.visibleTags=[],e.filteredCollection.forEach(function(t){e.visibleTags=e.visibleTags.union(t[e.collectionProperty])})}SelectionHelpers.decorate(e),e.$watchCollection("collection",function(t){var n=_.union(_.map(t,function(t){return e.$eval(e.collectionProperty,t)})),i=[];_.forEach(n,function(e){i=_.union(i,e)}),e.tags=i}),e.$watchCollection("tags",function(t,n){t!==n&&(SelectionHelpers.syncGroupSelection(e.selected,e.tags),i())}),e.$watchCollection("selected",function(t){e.selected=_.uniq(t),i()})}}}])}(UI||(UI={}));var UI;!function(e){e.hawtioTagList=e._module.directive("hawtioTagList",["$interpolate","$compile","$templateCache",function(t,n,i){return{restrict:"E",replace:!0,templateUrl:UrlHelpers.join(e.templatePath,"tagList.html"),scope:{tags:"=",remove:"=?",selected:"=?"},link:function(e,r,a){var o=i.get("tagBase.html"),s=i.get("tagRemove.html");e.addSelected=function(t){e.selected&&e.selected.push(t)},e.isSelected=function(t){return e.selected?_.any(e.selected,function(e){return t===e})?"badge-success":"":"badge-success"},e.removeTag=function(t){e.tags.remove(t)},e.$watchCollection("tags",function(i){var a=angular.element("<div></div>");i.forEach(function(n){var i=t(o),r=angular.element(i({tag:n}));e.remove&&r.append(t(s)({tag:n})),e.selected&&r.attr("ng-click","addSelected('"+n+"')"),a.append(r)}),r.html(n(a.children())(e))})}}}])}(UI||(UI={}));var UI;!function(e){function t(t,n,i){return{restrict:"A",link:function(r,a,o){var s=e.getIfSet("title",o,void 0),l=e.getIfSet("trigger",o,"hover"),c=!0,u=e.getIfSet("content",o,"popoverTemplate"),d=e.getIfSet("placement",o,"auto"),p=e.getIfSet("delay",o,"100"),h=e.getIfSet("container",o,"body"),f=e.getIfSet("selector",o,"false");"false"===h&&(h=!1),"false"===f&&(f=!1);var g=t.get(u);g&&(a.on("$destroy",function(){a.popover("destroy")}),a.popover({title:s,trigger:l,html:c,content:function(){var e=n(g)(r);return Core.$digest(r),e},delay:p,container:h,selector:f,placement:function(e,t){if("auto"!==d)return d;var n=a,r=n.offset(),o=i.innerWidth(),s=r.left+n.outerWidth()/2,l=o/2;return l>s?"right":"left"}}))}}}e.TemplatePopover=t,e._module.directive("hawtioTemplatePopover",["$templateCache","$compile","$document",e.TemplatePopover])}(UI||(UI={}));var UI;!function(e){function t(e,t,n,i){var r=Logger.get("UI");return{restrict:"A",scope:{getContents:"&"},controller:["$scope","$element","$attrs",function(t,n,i){t.remaining=-1,t.render=!1,t.chapters=[],t.addChapter=function(e){console.log("Adding: ",e),t.chapters.push(e),angular.isDefined(e.text)||t.fetchItemContent(e)},t.getTarget=function(e){return e?e.replace(".","_"):""},t.getFilename=function(e,t){var n=e.split("/").last();return t&&!n.endsWith(t)&&(n=n+"."+t),n},t.$watch("remaining",function(e,n){if(e!==n){var i=!1;(0===e||i)&&(t.render=!0)}}),t.fetchItemContent=function(n){var i=t;t.$eval(function(r){r.getContents({filename:n.filename,cb:function(r){r&&(n.text=n.filename.endsWith(".md")?e(r):r,t.remaining--,Core.$apply(i))}})})}}],link:function(e,n,a){function o(){var e=$(window).scrollTop();n.find("li a").removeClass("active"),$(".panel-body").each(function(){var t=$(this).offset();if(t&&t.top>=e){var n=$(this).attr("id");if(n){var i=g.find("a[chapter-id='"+n+"']");return i.addClass("active"),!1}}})}function s(){var e=g.find("a");return y&&(e=e.filter(y)),e}function l(){g.get(0).id||(g.get(0).id="toc"),e.tocId="#"+g.get(0).id,e.remaining=s().length,s().each(function(t,n){r.debug("Found: ",n);var i=e.getFilename(n.href,n.getAttribute("file-extension")),a={filename:i,title:n.textContent,link:n};e.addChapter(a)}),setTimeout(function(){o()},100)}function c(e){if(r.debug("selected chapter changed: "+e),e){var t="#"+e,n=0,i=$(t);if(i.length){var a=i.offset();a&&(n=a.top-u),$("body,html").animate({scrollTop:n},v)}}}var u=0,d=$(".logbar"),p=$("#toc-content");if(d.length)u=d.height()+d.offset().top;else if(p.length){var h=p.offset();h&&(u=h.top)}u||(u=90);var f=null,g=n;p&&p.length||(p=n);var m=e.$parent||e,v=1e3,y=a.linkFilter,b=a.html;b?m.$watch(b,function(){var e=m[b];if(e&&e!==f){f=e;var t=i(e)(m);n.children().remove(),n.append(t),l()}}):l(),$(window).scroll(o),e.$watch("render",function(n,a){if(n!==a&&n&&!p.next(".hawtio-toc").length){var o=$('<div class="hawtio-toc"></div>');o.appendTo(p);var l=t.search().chapter;e.chapters.forEach(function(t,n){r.debug("index:",n);var a=$("<div></div>"),s=null,u=e.getTarget(t.filename),d=t.link;d&&d.setAttribute("chapter-id",u),n>0&&(s=$('<div class="panel-title"><a class="toc-back" href="">Back to Top</a></div>'));var p=$('<div class="panel-body" id="'+u+'">'+t.text+"</div>");s?a.append(s).append(i(p)(e)):a.append(i(p)(e)),a.hide().appendTo(o).fadeIn(1e3),u===l&&c(u)});var d=p.offset().top-u;o.find("a.toc-back").each(function(e,t){$(t).click(function(e){e.preventDefault(),$("body,html").animate({scrollTop:d},2e3)})}),s().each(function(n,i){var a=i.href,o=e.getFilename(a,i.getAttribute("file-extension"));$(i).click(function(n){r.debug("Clicked: ",n),n.preventDefault();var i=e.getTarget(o);return t.search("chapter",i),Core.$apply(m),c(i),!0})})}}),m.$on("$locationChangeSuccess",function(e,n,i){setTimeout(function(){var e=t.search().chapter;c(e)},50)})}}}e.HawtioTocDisplay=t,e._module.directive("hawtioTocDisplay",["marked","$location","$anchorScroll","$compile",e.HawtioTocDisplay])}(UI||(UI={}));var UI;!function(e){e._module.directive("hawtioViewport",function(){return new e.ViewportHeight});var t=function(){function e(){this.restrict="A",this.link=function(e,t,n){var i=0,r=function(){var e=angular.element(n.hawtioViewport),r=angular.element(n.containingDiv),a=e.position().top+e.height(),o=r.height()-a;if(angular.isDefined(n.heightAdjust))var s=n.heightAdjust.toNumber();o+=s,t.css({height:o,"min-height":o}),i!==o&&(i=o,t.trigger("resize"))};r(),e.$watch(r),$().resize(function(){return r(),Core.$apply(e),!1})}}return e}();e.ViewportHeight=t,e._module.directive("hawtioHorizontalViewport",function(){return new e.HorizontalViewport});var n=function(){function t(){this.restrict="A",this.link=function(t,n,i){var r=angular.isDefined(i.adjustParent)&&Core.parseBooleanValue(i.adjustParent);n.get(0).addEventListener("DOMNodeInserted",function(){var t=n.children();n.height(t.outerHeight(!0)),r&&n.parent().height(n.outerHeight(!0)+e.getScrollbarWidth())})}}return t}();e.HorizontalViewport=n}(UI||(UI={}));var UI;!function(e){function t(e){return{restrict:"A",link:function(t,n,i){var r=new ZeroClipboard(n.get(0),{moviePath:"img/ZeroClipboard.swf"});if(r.on("complete",function(e,n){n.text&&angular.isString(n.text)&&Core.notification("info","Copied text to clipboard: "+n.text.truncate(20)),Core.$apply(t)}),"useCallback"in i){var a=e(i.useCallback);a&&a(t,{clip:r})}}}}e._module.directive("zeroClipboard",["$parse",function(t){return e.ZeroClipboardDirective(t)}]),e.ZeroClipboardDirective=t}(UI||(UI={}));var UIBootstrap;!function(e){var t="hawtio-ui-bootstrap";angular.module(t,["ui.bootstrap"]),hawtioPluginLoader.addModule(t),hawtioPluginLoader.addModule("hawtio-compat.transition"),hawtioPluginLoader.addModule("hawtio-compat.dialog"),hawtioPluginLoader.addModule("hawtio-compat.modal")}(UIBootstrap||(UIBootstrap={})),angular.module("hawtio-ui-templates",[]).run(["$templateCache",function(e){e.put("plugins/editor/html/editor.html",'<div class="editor-autoresize">\n  <textarea name="{{name}}" ng-model="text"></textarea>\n</div>\n'),e.put("plugins/ui-bootstrap/html/message.html",'<div class="modal-header">\n	<h3>{{ title }}</h3>\n</div>\n<div class="modal-body">\n	<p>{{ message }}</p>\n</div>\n<div class="modal-footer">\n	<button ng-repeat="btn in buttons" ng-click="close(btn.result)" class="btn" ng-class="btn.cssClass">{{ btn.label }}</button>\n</div>\n'),e.put("plugins/ui/html/breadcrumbs.html",'<span class="hawtio-breadcrumb">\n  <li ng-repeat="(level, config) in levels track by level" ng-show="config">\n    <div hawtio-drop-down="config" process-submenus="false"></div>\n  </li>\n</span>\n'),e.put("plugins/ui/html/colorPicker.html",'<div class="color-picker">\n  <div class="wrapper">\n    <div class="selected-color" style="background-color: {{property}};" ng-click="popout = !popout"></div>\n  </div>\n  <div class="color-picker-popout">\n    <table>\n      <tr>\n        <td ng-repeat="color in colorList">\n          <div class="{{color.select}}" style="background-color: {{color.color}};"\n               ng-click="selectColor(color)">\n          </div>\n        <td>\n        <td>\n          <i class="fa fa-remove clickable" ng-click="popout = !popout"></i>\n        </td>\n      </tr>\n    </table>\n  </div>\n</div>\n'),e.put("plugins/ui/html/confirmDialog.html",'<div modal="show">\n  <form class="form-horizontal no-bottom-margin">\n    <div class="modal-header"><h4>{{title}}</h4></div>\n    <div class="modal-body">\n    </div>\n    <div class="modal-footer">\n      <input class="btn btn-danger" ng-show="{{showOkButton != \'false\'}}" type="submit" value="{{okButtonText}}" ng-click="submit()">\n      <button class="btn btn-primary" ng-click="cancel()">{{cancelButtonText}}</button>\n    </div>\n  </form>\n</div>\n'),e.put("plugins/ui/html/developerPage.html",'<div ng-controller="UI.DeveloperPageController">\n\n  <div class="tocify" wiki-href-adjuster>\n    <div hawtio-toc-display\n         get-contents="getContents(filename, cb)">\n      <ul>\n        <li>\n          <a href="plugins/ui/html/test/icon.html" chapter-id="icons">icons</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/auto-columns.html" chapter-id="auto-columns">auto-columns</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/auto-dropdown.html" chapter-id="auto-dropdown">auto-dropdown</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/breadcrumbs.html" chapter-id="breadcrumbs">breadcrumbs</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/color-picker.html" chapter-id="color-picker">color-picker</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/confirm-dialog.html" chapter-id="confirm-dialog">confirm-dialog</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/drop-down.html" chapter-id="drop-down">drop-down</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/editable-property.html" chapter-id="editableProperty">editable-property</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/editor.html" chapter-id="editor">editor</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/expandable.html" chapter-id="expandable">expandable</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/file-upload.html" chapter-id="file-upload">file-upload</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/jsplumb.html" chapter-id="jsplumb">jsplumb</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/pager.html" chapter-id="pager">pager</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/slideout.html" chapter-id="slideout">slideout</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/template-popover.html" chapter-id="template-popover">template-popover</a>\n        </li>\n        <li>\n          <a href="plugins/ui/html/test/zero-clipboard.html" chapter-id="zero-clipboard">zero-clipboard</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class="toc-content" id="toc-content"></div>\n</div>\n'),e.put("plugins/ui/html/dropDown.html",'<span>\n\n  <script type="text/ng-template" id="withsubmenus.html">\n    <span class="hawtio-dropdown dropdown" ng-class="open(config)" ng-click="action(config, $event)">\n      <p ng-show="config.heading" ng-bind="config.heading"></p>\n      <span ng-show="config.title">\n        <i ng-class="icon(config)"></i>&nbsp;<span ng-bind="config.title"></span>\n        <span ng-show="config.items" ng-hide="config.submenu" class="caret"></span>\n        <span ng-show="config.items && config.submenu" class="submenu-caret"></span>\n      </span>\n\n      <ul ng-hide="config.action" ng-show="config.items" class="dropdown-menu" ng-class="submenu(config)">\n        <li ng-repeat="item in config.items track by $index" ng-init="config=item; config[\'submenu\']=true" ng-include="\'withsubmenus.html\'" hawtio-show object-name="{{item.objectName}}" method-name="{{item.methodName}}" argument-types="{{item.argumentTypes}}" mode="remove">\n        </li>\n      </ul>\n    </span>\n  </script>\n\n  <script type="text/ng-template" id="withoutsubmenus.html">\n    <span class="hawtio-dropdown dropdown" ng-class="open(config)" ng-click="action(config, $event)">\n      <p ng-show="config.heading" ng-bind="config.heading"></p>\n      <span ng-show="config.title">\n        <i ng-class="icon(config)"></i>&nbsp;<span ng-bind="config.title"></span>\n        <span ng-show="config.items && config.items.length > 0" class="caret"></span>\n     </span>\n\n      <ul ng-hide="config.action" ng-show="config.items" class="dropdown-menu" ng-class="submenu(config)">\n        <li ng-repeat="item in config.items track by $index" hawtio-show object-name="{{item.objectName}}" method-name="{{item.methodName}}" argument-types="{{item.argumentTypes}}" mode="remove">\n          <span class="menu-item" ng-click="action(item, $event)">\n            <i ng-class="icon(item)"></i>&nbsp;<span ng-bind="item.title"></span>\n            <span ng-show="item.items" class="submenu-caret"></span>\n          </span>\n        </li>\n      </ul>\n\n    </span>\n  </script>\n\n  <span compile="menuStyle"></span>\n\n</span>\n'),e.put("plugins/ui/html/editableProperty.html",'<div ng-mouseenter="showEdit()" ng-mouseleave="hideEdit()" class="ep" ng-dblclick="doEdit()">\n  {{getText()}}&nbsp;<i class="ep-edit fa fa-pencil" title="Edit this item" ng-click="doEdit()" no-click></i>\n</div>\n<div class="ep editing" ng-show="editing" no-click>\n  <form class="form-inline no-bottom-margin" ng-submit="saveEdit()">\n    <fieldset>\n      <span ng-switch="inputType">\n        <span ng-switch-when="number">\n          <input type="number" size="{{text.length}}" ng-style="getInputStyle()" value="{{text}}" max="{{max}}" min="{{min}}">\n        </span>\n        <span ng-switch-when="password">\n          <input type="password" size="{{text.length}}" ng-style="getInputStyle()" value="{{text}}">\n        </span>\n        <span ng-switch-default>\n          <input type="text" size="{{text.length}}" ng-style="getInputStyle()" value="{{text}}">\n        </span>\n      </span>\n      <i class="green clickable fa fa-ok icon1point5x" title="Save changes" ng-click="saveEdit()"></i>\n      <i class="red clickable fa fa-remove icon1point5x" title="Discard changes" ng-click="stopEdit()"></i>\n    </fieldset>\n  </form>\n</div>\n'),e.put("plugins/ui/html/editor.html",'<div class="editor-autoresize">\n  <textarea name="{{name}}" ng-model="text"></textarea>\n</div>\n'),e.put("plugins/ui/html/editorPreferences.html",'<div ng-controller="CodeEditor.PreferencesController">\n  <form class="form-horizontal">\n    <div class="control-group">\n      <label class="control-label" for="theme" title="The default theme to be used by the code editor">Theme</label>\n\n      <div class="controls">\n        <select id="theme" ng-model="preferences.theme">\n          <option value="default">Default</option>\n          <option value="ambiance">Ambiance</option>\n          <option value="blackboard">Blackboard</option>\n          <option value="cobalt">Cobalt</option>\n          <option value="eclipse">Eclipse</option>\n          <option value="monokai">Monokai</option>\n          <option value="neat">Neat</option>\n          <option value="twilight">Twilight</option>\n          <option value="vibrant-ink">Vibrant ink</option>\n        </select>\n      </div>\n    </div>\n  </form>\n\n  <form name="editorTabForm" class="form-horizontal">\n    <div class="control-group">\n      <label class="control-label" for="tabSIze">Tab size</label>\n\n      <div class="controls">\n        <input type="number" id="tabSize" name="tabSize" ng-model="preferences.tabSize" ng-required="ng-required" min="1" max="10"/>\n        <span class="help-block"\n            ng-hide="editorTabForm.tabSize.$valid">Please specify correct size (1-10).</span>\n      </div>\n    </div>\n  </form>\n\n  <div compile="codeMirrorEx"></div>\n\n<!-- please do not change the tabs into spaces in the following script! -->\n<script type="text/ng-template" id="exampleText">\nvar foo = "World!";\n\nvar myObject = {\n	message: "Hello",\n		getMessage: function() {\n		return message + " ";\n 	}\n};\n\nwindow.alert(myObject.getMessage() + foo);\n</script>\n\n<script type="text/ng-template" id="codeMirrorExTemplate">\n  <div hawtio-editor="exampleText" mode="javascript"></div>\n</script>\n</div>\n\n</div>\n'),e.put("plugins/ui/html/filter.html",'<div class="inline-block section-filter">\n  <input type="text"\n         class="search-query"\n         ng-class="getClass()"\n         ng-model="ngModel"\n         placeholder="{{placeholder}}">\n  <i class="fa fa-remove clickable"\n     title="Clear Filter"\n     ng-click="ngModel = \'\'"></i>\n</div>\n'),e.put("plugins/ui/html/icon.html",'<span>\n  <span ng-show="icon && icon.type && icon.src" title="{{icon.title}}" ng-switch="icon.type">\n    <i ng-switch-when="icon" class="{{icon.src}} {{icon.class}}"></i>\n    <img ng-switch-when="img" ng-src="{{icon.src}}" class="{{icon.class}}">\n  </span>\n  <span ng-hide="icon && icon.type && icon.src">\n    &nbsp;\n  </span>\n</span>\n\n'),e.put("plugins/ui/html/layoutUI.html","<div ng-view></div>\n"),e.put("plugins/ui/html/list.html",'<div>\n\n  <!-- begin cell template -->\n  <script type="text/ng-template" id="cellTemplate.html">\n    <div class="ngCellText">\n      {{row.entity}}\n    </div>\n  </script>\n  <!-- end cell template -->\n\n  <!-- begin row template -->\n  <script type="text/ng-template" id="rowTemplate.html">\n    <div class="list-row">\n      <div ng-show="config.showSelectionCheckbox"\n           class="list-row-select">\n        <input type="checkbox" ng-model="row.selected">\n      </div>\n      <div class="list-row-contents"></div>\n    </div>\n  </script>\n  <!-- end row template -->\n\n  <!-- must have a little margin in the top -->\n  <div class="list-root" style="margin-top: 15px"></div>\n\n</div>\n'),e.put("plugins/ui/html/multiItemConfirmActionDialog.html",'<div>\n  <form class="no-bottom-margin">\n    <div class="modal-header">\n      <span>{{options.title || \'Are you sure?\'}}</span>\n    </div>\n    <div class="modal-body">\n      <p ng-show=\'options.action\'\n         ng-class=\'options.actionClass\'\n         ng-bind=\'options.action\'></p>\n      <ul>\n        <li ng-repeat="item in options.collection" ng-bind="getName(item)"></li>\n      </ul>\n      <p ng-show="options.custom" \n         ng-class="options.customClass" \n         ng-bind="options.custom"></p>\n    </div>\n    <div class="modal-footer">\n      <button class="btn" \n              ng-class="options.okClass" \n              ng-click="close(true)">{{options.okText || \'Ok\'}}</button>\n      <button class="btn" \n              ng-class="options.cancelClass"\n              ng-click="close(false)">{{options.cancelText || \'Cancel\'}}</button>\n    </div>\n  </form>\n</div>\n'),e.put("plugins/ui/html/object.html",'<div>\n  <script type="text/ng-template" id="primitiveValueTemplate.html">\n    <span ng-show="data" object-path="{{path}}">{{data}}</span>\n  </script>\n  <script type="text/ng-template" id="arrayValueListTemplate.html">\n    <ul class="zebra-list" ng-show="data" object-path="{{path}}">\n      <li ng-repeat="item in data">\n        <div hawtio-object="item" config="config" path="path" row="row"></div>\n      </li>\n    </ul>\n  </script>\n  <script type="text/ng-template" id="arrayValueTableTemplate.html">\n    <table class="table table-striped" object-path="{{path}}">\n      <thead>\n      </thead>\n      <tbody>\n      </tbody>\n    </table>\n  </script>\n  <script type="text/ng-template" id="dateAttributeTemplate.html">\n    <dl class="" ng-show="data" object-path="{{path}}">\n      <dt>{{key}}</dt>\n      <dd ng-show="data && data.getTime() > 0">{{data | date:"EEEE, MMMM dd, yyyy \'at\' hh : mm : ss a Z"}}</dd>\n      <dd ng-show="data && data.getTime() <= 0"></dd>\n\n    </dl>\n  </script>\n  <script type="text/ng-template" id="dateValueTemplate.html">\n    <span ng-show="data">\n      <span ng-show="data && data.getTime() > 0" object-path="{{path}}">{{data | date:"EEEE, MMMM dd, yyyy \'at\' hh : mm : ss a Z"}}</span>\n      <span ng-show="data && data.getTime() <= 0" object-path="{{path}}"></span>\n    </span>\n  </script>\n  <script type="text/ng-template" id="primitiveAttributeTemplate.html">\n    <dl class="" ng-show="data" object-path="{{path}}">\n      <dt>{{key}}</dt>\n      <dd>{{data}}</dd>\n    </dl>\n  </script>\n  <script type="text/ng-template" id="objectAttributeTemplate.html">\n    <dl class="" ng-show="data" object-path="{{path}}">\n      <dt>{{key}}</dt>\n      <dd>\n        <div hawtio-object="data" config="config" path="path" row="row"></div>\n      </dd>\n    </dl>\n  </script>\n  <script type="text/ng-template" id="arrayAttributeListTemplate.html">\n    <dl class="" ng-show="data" object-path="{{path}}">\n      <dt>{{key}}</dt>\n      <dd>\n        <ul class="zebra-list">\n          <li ng-repeat="item in data" ng-init="path = path + \'/\' + $index">\n            <div hawtio-object="item" config="config" path="path" row="row"></div>\n          </li>\n        </ul>\n      </dd>\n    </dl>\n  </script>\n  <script type="text/ng-template" id="arrayAttributeTableTemplate.html">\n    <dl class="" ng-show="data" object-path="{{path}}">\n      <dt>{{key}}</dt>\n      <dd>\n        <table class="table table-striped">\n          <thead>\n          </thead>\n          <tbody>\n          </tbody>\n        </table>\n      </dd>\n    </dl>\n  </script>\n  <script type="text/ng-template" id="headerTemplate.html">\n    <th object-path="{{path}}">{{key}}</th>\n  </script>\n  <script type="text/ng-template" id="rowTemplate.html">\n    <tr object-path="{{path}}"></tr>\n  </script>\n  <script type="text/ng-template" id="cellTemplate.html">\n    <td object-path="{{path}}"></td>\n  </script>\n</div>\n'),e.put("plugins/ui/html/pane.html",'<div class="pane">\n  <div class="pane-wrapper">\n    <div class="pane-header-wrapper">\n    </div>\n    <div class="pane-viewport">\n      <div class="pane-content">\n      </div>\n    </div>\n    <div class="pane-bar"\n         ng-mousedown="startMoving($event)"\n         ng-click="toggle()"></div>\n  </div>\n</div>\n'),e.put("plugins/ui/html/slideout.html",'<div class="slideout {{direction || \'right\'}}">\n  <div class=slideout-title>\n    <div ng-show="{{close || \'true\'}}" class="mouse-pointer pull-right" ng-click="hidePanel($event)" title="Close panel">\n      <i class="fa fa-remove"></i>\n    </div>\n    <span>{{title}}</span>\n  </div>\n  <div class="slideout-content">\n    <div class="slideout-body"></div>\n  </div>\n</div>\n'),e.put("plugins/ui/html/tablePager.html",'<div class="hawtio-pager clearfix">\n  <label>{{rowIndex() + 1}} / {{tableLength()}}</label>\n  <div class=btn-group>\n    <button class="btn" ng-disabled="isEmptyOrFirst()" ng-click="first()"><i class="fa fa-fast-backward"></i></button>\n    <button class="btn" ng-disabled="isEmptyOrFirst()" ng-click="previous()"><i class="fa fa-step-backward"></i></button>\n    <button class="btn" ng-disabled="isEmptyOrLast()" ng-click="next()"><i class="fa fa-step-forward"></i></button>\n    <button class="btn" ng-disabled="isEmptyOrLast()" ng-click="last()"><i class="fa fa-fast-forward"></i></button>\n  </div>\n</div>\n'),e.put("plugins/ui/html/tagFilter.html",'<div>\n  <ul class="list-unstyled label-list">\n    <li ng-repeat="tag in visibleTags | orderBy:\'tag.id || tag\'"\n        class="mouse-pointer"\n        ng-click="toggleSelectionFromGroup(selected, tag.id || tag)">\n              <span class="badge"\n                    ng-class="isInGroup(selected, tag.id || tag, \'badge-success\', \'\')"\n                      >{{tag.id || tag}}</span>\n              <span class="pull-right"\n                    ng-show="tag.count">{{tag.count}}&nbsp;</span>\n    </li>\n  </ul>\n  <div class="mouse-pointer"\n       ng-show="selected.length"\n       ng-click="clearGroup(selected)">\n    <i class="fa fa-remove" ></i> Clear Tags\n  </div>\n</div>\n'),
e.put("plugins/ui/html/tagList.html",'<span>\n<script type="text/ng-template" id="tagBase.html">\n  <span class="badge mouse-pointer" ng-class="isSelected(\'{{tag}}\')">{{tag}}</span>\n</script>\n<script type="text/ng-template" id="tagRemove.html">\n  <i class="fa fa-remove" ng-click="removeTag({{tag}})"></i>\n</script>\n</span>\n'),e.put("plugins/ui/html/toc.html",'<div>\n  <div ng-repeat="item in myToc">\n    <div id="{{item[\'href\']}}Target" ng-bind-html="item.text">\n    </div>\n  </div>\n</div>\n')}]),hawtioPluginLoader.addModule("hawtio-ui-templates");var HawtioForms;!function(e){function t(e){var t=e||{properties:{}};return _.defaults(t,{style:2,mode:1}),t}!function(e){e[e.VIEW=0]="VIEW",e[e.EDIT=1]="EDIT"}(e.FormMode||(e.FormMode={}));e.FormMode;!function(e){e[e.STANDARD=0]="STANDARD",e[e.INLINE=1]="INLINE",e[e.HORIZONTAL=2]="HORIZONTAL",e[e.UNWRAPPED=3]="UNWRAPPED"}(e.FormStyle||(e.FormStyle={}));e.FormStyle;e.createFormConfiguration=t}(HawtioForms||(HawtioForms={}));var HawtioForms;!function(e){function t(e,t,n){t in e.postInterpolateActions||(e.postInterpolateActions[t]=[]),e.postInterpolateActions[t].push(n)}function n(e,t,n){t in e.preCompileActions||(e.preCompileActions[t]=[]),e.preCompileActions[t].push(n)}function i(e,t){switch(t.style){case 0:return e.$templateCache.get(y.FORM_STANDARD);case 1:return e.$templateCache.get(y.FORM_INLINE);case 3:return e.$templateCache.get(y.FORM_UNWRAPPED);default:return e.$templateCache.get(y.FORM_HORIZONTAL)}}function r(e,t,n,i){var r=void 0;switch(t.style){case 2:r=e.$templateCache.get(y.STANDARD_HORIZONTAL_INPUT);break;default:r=e.$templateCache.get(y.STANDARD_INPUT)}return a(e,t,n,r,i)}function a(e,t,n,i,r){var a=angular.element(i);"tooltip"in n&&a.attr({title:n.tooltip}),"control-group-attributes"in n&&a.attr(n["control-group-attributes"]),"label-attributes"in n&&a.find("label").attr(n["label-attributes"]);var o=a.find("input");return r&&o.attr({type:r}),"input-attributes"in n&&o.attr(n["input-attributes"]),a.prop("outerHTML")}function o(e,t){switch(t.style){case 2:return e.$templateCache.get(y.STATIC_HORIZONTAL_TEXT);default:return e.$templateCache.get(y.STATIC_TEXT)}}function s(e,t,n){}function l(e,n,i,r){var o=void 0;switch(n.style){case 2:o=e.$templateCache.get(y.SELECT_HORIZONTAL);break;default:o=e.$templateCache.get(y.SELECT)}return t(e,i,function(t){var n=t.find("select"),i=_.isArray(r["enum"]);if(i)if(_.isObject(_.first(r["enum"]))){var a=e.$templateCache.get(y.OPTION_CONFIG_OBJECT),o=e.$interpolate(a);_.forEach(r["enum"],function(e){var t=angular.element(o(e));t.attr(e.attributes),n.append(t)})}else{var a=e.$templateCache.get(y.OPTION_ARRAY),o=e.$interpolate(a);_.forEach(r["enum"],function(e){n.append(o({value:e}))})}else{var a=e.$templateCache.get(y.OPTION_OBJECT),o=e.$interpolate(a);_.forIn(r["enum"],function(e,t){n.append(o({key:t,value:e}))})}}),a(e,n,r,o)}function c(e,t,n){switch(t.style){case 2:return e.$templateCache.get(y.CHECKBOX_HORIZONTAL);default:return e.$templateCache.get(y.CHECKBOX)}}function u(e,n,i,r){var a="config.properties."+i;return"javaType"in r&&(a=r.javaType),t(e,i,function(t){t.find(".inline-object").attr({"hawtio-form-2":a,entity:"entity."+i,"no-wrap":"true",mode:n.mode,style:n.style,label:r.label||e.maybeHumanize(i)})}),e.$templateCache.get(y.OBJECT)}function d(e,n,i,r){return t(e,i,function(e){e.find(".inline-map").attr({"hawtio-forms-2-map":"config.properties."+i,entity:"entity."+i,mode:n.mode})}),e.$templateCache.get(y.MAP)}function p(e,n,i,r){return t(e,i,function(e){e.find(".inline-array").attr({"hawtio-forms-2-array":"config.properties."+i,entity:"entity."+i,mode:n.mode})}),e.$templateCache.get(y.ARRAY)}function h(e,t,n,i){var s=e.mappings.getMapping(i.type);if("enum"in i&&(s="select"),"properties"in i&&(s="object"),i.hidden&&(s="hidden"),"object"===i.type&&i.javaType&&_.startsWith(i.javaType,"java.util.Map")&&(s="map"),s)switch(s){case"array":return p(e,t,n,i);case"number":return r(e,t,i,"number");case"password":return r(e,t,i,"password");case"text":return r(e,t,i,"text");case"static":return o(e,t);case"object":return u(e,t,n,i);case"map":return d(e,t,n,i);case"hidden":return i.hidden=!0,a(e,t,i,e.$templateCache.get(y.HIDDEN));case"select":return l(e,t,n,i);case"checkbox":return c(e,t,i)}var h=i.javaType||i.type,f=e.schemas.getSchema(h);return f?u(e,t,n,_.extend(i,f)):void 0}function f(e,t,n,i){return"formTemplate"in i?i.formTemplate:h(e,t,n,i)}function g(e,t,n,i,r,a){var o=e.$interpolate(r),s=o({maybeHumanize:e.maybeHumanize,control:i,name:n,model:a});if(e.postInterpolateActions[n]){var l=angular.element(s);e.postInterpolateActions[n].forEach(function(e){e(l)}),s=l.prop("outerHTML")}return s}function m(e){return function(t){var n=e.config;return!n||n&&!n.disableHumanizeLabel?Core.humanizeValue(t):t}}function v(t,n,i){void 0===i&&(i=!0);var r=n;if(!r&&i){var a=t.attrs[t.directiveName];a&&(r=t.schemas.cloneSchema(a),r||(r={}))}return r&&("label"in t.attrs&&(r.label=t.attrs.label),"mode"in t.attrs&&(r.mode=Number(t.attrs.mode)),"style"in t.attrs&&(r.style=Number(t.attrs.style)),"noWrap"in t.attrs&&t.attrs.noWrap&&(r.style=3)),e.createFormConfiguration(r)}e.pluginName="hawtio-forms2",e.templatePath="plugins/forms2/html",e.log=Logger.get(e.pluginName);var y=function(){function t(){}return Object.defineProperty(t,"FORM_STANDARD",{get:function(){return UrlHelpers.join(e.templatePath,"form-standard.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"FORM_INLINE",{get:function(){return UrlHelpers.join(e.templatePath,"form-inline.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"FORM_UNWRAPPED",{get:function(){return UrlHelpers.join(e.templatePath,"form-unwrapped.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"FORM_HORIZONTAL",{get:function(){return UrlHelpers.join(e.templatePath,"form-horizontal.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"STANDARD_HORIZONTAL_INPUT",{get:function(){return UrlHelpers.join(e.templatePath,"standard-horizontal-input.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"STANDARD_INPUT",{get:function(){return UrlHelpers.join(e.templatePath,"standard-input.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"STATIC_HORIZONTAL_TEXT",{get:function(){return UrlHelpers.join(e.templatePath,"static-horizontal-text.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"STATIC_TEXT",{get:function(){return UrlHelpers.join(e.templatePath,"static-text.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SELECT_HORIZONTAL",{get:function(){return UrlHelpers.join(e.templatePath,"select-horizontal.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SELECT",{get:function(){return UrlHelpers.join(e.templatePath,"select.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OPTION_ARRAY",{get:function(){return UrlHelpers.join(e.templatePath,"optionArray.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OPTION_OBJECT",{get:function(){return UrlHelpers.join(e.templatePath,"optionObject.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OPTION_CONFIG_OBJECT",{get:function(){return UrlHelpers.join(e.templatePath,"optionConfigObject.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CHECKBOX_HORIZONTAL",{get:function(){return UrlHelpers.join(e.templatePath,"checkbox-horizontal.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CHECKBOX",{get:function(){return UrlHelpers.join(e.templatePath,"checkbox.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OBJECT",{get:function(){return UrlHelpers.join(e.templatePath,"object.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ARRAY",{get:function(){return UrlHelpers.join(e.templatePath,"array.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAP",{get:function(){return UrlHelpers.join(e.templatePath,"map.html")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"HIDDEN",{get:function(){return UrlHelpers.join(e.templatePath,"hidden.html")},enumerable:!0,configurable:!0}),t}();e.Constants=y,e.addPostInterpolateAction=t,e.addPreCompileAction=n,e.getFormMain=i,e.getStandardTemplate=r,e.applyElementConfig=a,e.getStaticTextTemplate=o,e.setSelectOptions=s,e.getSelectTemplate=l,e.getCheckboxTemplate=c,e.getObjectTemplate=u,e.getMapTemplate=d,e.getArrayTemplate=p,e.lookupTemplate=h,e.getTemplate=f,e.interpolateTemplate=g,e.createMaybeHumanize=m,e.initConfig=v}(HawtioForms||(HawtioForms={}));var HawtioForms;!function(e){e._module=angular.module(e.pluginName,[]),e._module.run(function(){e.log.debug("loaded")}),hawtioPluginLoader.addModule(e.pluginName)}(HawtioForms||(HawtioForms={}));var HawtioForms;!function(e){e._module.directive("hawtioCombobox",[function(){return{restrict:"A",link:function(e,t,n){e.$watch(_.debounce(function(){t.prop("disabled")||t.children().length>5&&t.combobox()},100,{trailing:!0}))}}}])}(HawtioForms||(HawtioForms={}));var HawtioForms;!function(e){function t(e,t){var n=t.find("tbody");return n.empty(),n}function n(t,n,r,a){_.forEach(r,function(r,o){var s=i(t);n.properties.$items?s.append("<td>"+r+"</td>"):_.forIn(n.properties,function(n,i){var a={style:3,mode:0,properties:{}};a.properties[i]=n;var l=e.getTemplate(t,a,i,n);if(l){var c=angular.element(l);c.attr({"class":""}),c.find("label").text(""),["input","select"].forEach(function(e){c.find(e).attr({"ng-disabled":"true",style:"width: auto"}).removeClass("form-control").addClass("table-control")}),n["enum"]&&e.addPostInterpolateAction(t,i,function(t){var r=t.find("select"),a="config.columnSchema.properties['"+i+"'].enum";e.setSelectOptions(_.isArray(n["enum"]),a,r)}),("properties"in n||"javaType"in n)&&e.addPostInterpolateAction(t,i,function(e){e.find("h4").remove(),e.find(".inline-object").attr({entity:"entity["+o+"]."+i,label:!1})}),l=e.interpolateTemplate(t,a,i,n,c.prop("outerHTML"),"entity["+o+"]."+i);var u=angular.element("<td></td>");u.append(l),s.append(u)}else s.append("<td>"+r[i]+"</td>")});var l=angular.element(t.$templateCache.get("deleteRow.html"));l.find(".deleteRow").attr({"ng-click":"deleteRow("+o+")"}),l.find(".editRow").attr({"ng-click":"editRow("+o+")"}),s.append(l),a.append(s)})}function i(e){return angular.element(e.$templateCache.get("rowTemplate.html"))}function r(e,t){var n=t.find("thead");return n.empty(),n.append(e.$templateCache.get("rowTemplate.html")).find("tr")}function a(e,t,n){var i=r(e,t);return _.forIn(n.properties,function(t,n){var r=e.$interpolate(t.headerTemplate||e.$templateCache.get("header.html"));i.append(r({control:t,name:e.maybeHumanize(n)}))}),i.append(e.$templateCache.get("newItemHeader.html")),i}var o="hawtioForms2Array";e._module.directive(o,["$compile","$templateCache","$interpolate","SchemaRegistry","ControlMappingRegistry","$modal",function(i,r,s,l,c,u){return{restrict:"A",replace:!0,templateUrl:UrlHelpers.join(e.templatePath,"forms2Array.html"),scope:{config:"="+o,entity:"=?"},link:function(d,p,h){d.$watch("config",function(f){function g(e){var t=_.clone(e,!0);return t.style=0,"$items"in t.properties&&(t.properties.$items["label-attributes"]={style:"display: none"}),t}var m={postInterpolateActions:{},maybeHumanize:void 0,config:void 0,element:p,attrs:h,mappings:c,schemas:l,$templateCache:r,$interpolate:s,$compile:i,directiveName:o},v=e.initConfig(m,_.cloneDeep(f),!1);if(m.config=v,m.maybeHumanize=e.createMaybeHumanize(m),d.entity||(d.entity=[]),v&&v.items){var y=v.items.type||v.items.javaType,b=d.entity,w={properties:{}};if(c.hasMapping(y)){var x={};_.merge(x,v,{type:c.getMapping(y)}),"items"in x&&delete x.items,x.label||(x.label="Entries"),w.properties.$items=x}else w=l.getSchema(y);var k=angular.element(r.get("table.html")),C=(a(m,k,w),d.$new());v.columnSchema=w,C.config=v,C.entity=b,C.deleteRow=function(t){var n=u.open({templateUrl:UrlHelpers.join(e.templatePath,"arrayItemModal.html"),controller:["$scope","$modalInstance",function(e,i){e.schema=g(w),e.schema.mode=0,e.header="Delete Entry?",e.description="<p>Are you sure you want to delete the following entry?</p><p><strong>This operation cannot be undone!</strong></p>",e.newEntity=w.properties.$items?{$items:b[t]}:_.clone(b[t]),e.ok=function(){n.close(),b.splice(t,1)},e.cancel=function(){n.dismiss()}}]})},C.editRow=function(t){var n=u.open({templateUrl:UrlHelpers.join(e.templatePath,"arrayItemModal.html"),controller:["$scope","$modalInstance",function(e,i){e.schema=g(w),e.header="Edit Entry",e.newEntity=w.properties.$items?{$items:b[t]}:_.clone(b[t]),e.ok=function(){n.close(),b[t]="$items"in e.newEntity?e.newEntity.$items:e.newEntity},e.cancel=function(){n.dismiss()}}]})},C.createNewRow=function(){var t=u.open({templateUrl:UrlHelpers.join(e.templatePath,"arrayItemModal.html"),controller:["$scope","$modalInstance",function(e,n){e.schema=g(w),e.newEntity=void 0,e.header="Add New Entry",e.ok=function(){t.close(),b.push("$items"in e.newEntity?e.newEntity.$items:e.newEntity)},e.cancel=function(){t.dismiss()}}]})},C.watch=C.$watchCollection("entity",function(e,r){d.entity=e;var a=t(m,k),o=angular.element("<div></div>");n(m,w,e,o),a.append(i(o.children())(C))}),p.append(i(k)(C))}},!0)}}}])}(HawtioForms||(HawtioForms={}));var HawtioForms;!function(e){var t="hawtioForm2";e._module.directive(t,["$compile","$templateCache","$interpolate","SchemaRegistry","ControlMappingRegistry",function(n,i,r,a,o){return{restrict:"A",replace:!0,templateUrl:UrlHelpers.join(e.templatePath,"forms2Directive.html"),scope:{config:"="+t,entity:"=?"},link:function(s,l,c){s.$watch("config",function(){l.empty();var u={postInterpolateActions:{},preCompileActions:{},maybeHumanize:void 0,config:void 0,scope:void 0,element:l,attrs:c,mappings:o,schemas:a,$templateCache:i,$interpolate:r,$compile:n,directiveName:t},d=e.initConfig(u,_.cloneDeep(s.config));u.config=d,u.maybeHumanize=e.createMaybeHumanize(u),s.entity||(s.entity={});var p=s.entity;if("properties"in d){var h=u.scope=s.$new();h.config=d,h.maybeHumanize=u.maybeHumanize;var f={},g={},m=angular.element(e.getFormMain(u,d));m.find("form").attr({name:d.id||"form"});var v=m.find("fieldset");0===v.length&&(v=m);var y=!1;if("wizard"in d&&d.wizard.pages){var b=d.wizard,w=i.get("wizardParent.html");v.append(w),h.pageIds=[],v=v.find(".wizardParent"),h.onFinish=function(){e.log.warn("No onFinish() function supplied to form wizard")},h.buttons={next:"Next",back:"Back",finish:"Finish"},_.forIn(b,function(e,t){h[t]=e}),_.forIn(b.pages,function(t,r){"title"in t||(t.title=r),t.el=angular.element(i.get("wizardPage.html")),t.el.attr({"ng-switch-when":r}),t.el.find("h3").text(r),"template"in t&&t.el.append(n(t.template)(s)),t.parent=t.el.find(".wizardPageBody"),t.parent.attr({"ng-form":_.camelCase(r)}),e.addPreCompileAction(u,_.camelCase(r),function(){var e=angular.element(i.get("wizardButtons.html")),n={"ng-disabled":_.camelCase(r)+".$invalid"};e.find(".next").attr(n),e.find(".finish").attr(n),t.parent.append(e)}),f[r]=t,h.pageIds.push(r)}),h.currentPageIndex=0,h.gotoPage=function(e,t){if(!(0>e||e>h.pageIds.length)){if(h.onChange){var n=h.onChange(t,e,h.pageIds);if(n)return void(h.currentPageIndex=n)}h.currentPageIndex=e}},h.isValid=function(){return e.log.debug("scope: ",s),!0},h.getCurrentPageId=function(){return h.pageIds[h.currentPageIndex]},h.atFront=function(){return 0===h.currentPageIndex},h.atBack=function(){return h.currentPageIndex===h.pageIds.length-1},h.next=function(){h.gotoPage(h.currentPageIndex+1,h.currentPageIndex)},h.back=function(){h.gotoPage(h.currentPageIndex-1,h.currentPageIndex)}}else if("tabs"in d){v.append(i.get("tabElement.html")),v=v.find(".tabbable");var x=d.tabs;_.forIn(x,function(e,t){var n=angular.element(i.get("tabPage.html"));n.attr({title:t});var r={controls:e,el:n,parent:n};f[t]=r})}else"controls"in d?(f.$main={controls:d.controls,el:m,parent:v},y=!0):(f.$main={controls:["*"],el:m,parent:v},y=!0);_.forIn(d.properties,function(t,n){var i=Core.pathGet(t,["typeaheadData"]);i&&!Core.pathGet(t,["input-attributes","typeahead"])&&Core.pathSet(t,["input-attributes","typeahead"],"item for item in config.properties."+n+".typeaheadData");var r=Core.pathGet(t,["input-attributes","value"]);r&&(p[n]=r);var a=Core.pathGet(t,["default"]);a&&(p[n]=a);var o=e.getTemplate(u,d,n,t);o&&(o=e.interpolateTemplate(u,d,n,t,o,"entity."+n),g[n]=o)});var k=_.keys(f),C=void 0;k.forEach(function(t){var n=f[t];n.controls&&n.controls.forEach(function(i){"*"===i?y?_.forIn(g,function(e,t){_.any(n.controls,function(e){return e===t})||(n.parent.append(e),delete g[t])}):C=t:i in g?(n.parent.append(g[i]),delete g[i]):e.log.debug("Control with name ",i," not found")})}),_.keys(g).length>0&&(C||(C=_.last(k)),_.forIn(g,function(e,t){f[C].parent.append(e),delete g[t]})),_.forIn(f,function(e,t){"$main"!==t&&v.append(e.el)}),_.forIn(u.preCompileActions,function(e,t){_.forEach(e,function(e){e()})}),l.append(n(m)(h))}},!0)}}}])}(HawtioForms||(HawtioForms={}));var HawtioForms;!function(e){var t="hawtioForms2Map";e._module.directive(t,["$compile","$templateCache","$interpolate","SchemaRegistry","ControlMappingRegistry","$modal",function(n,i,r,a,o,s){function l(e,t){var n=t.find("tbody");return n.empty(),n}function c(e,t,n){var i={properties:{},control:n};return"items"in n?i.properties[e]={noLabel:!0,type:t,items:{type:n.items.type}}:o.hasMapping(t)?i.properties[e]={noLabel:!0,type:o.getMapping(t)}:i=a.getSchema(t),i.control=n,i}function u(e,t,n,i,a){var s=e.s;s.keys={},s.values={},_.forIn(t,function(t,n){s.keys[n]={key:n},s.values[n]=i.control.items||o.hasMapping(i.control.type)?{value:t}:t;var l=e.$templateCache.get("mapRowTemplate.html"),c=r(l);l=c({key:n}),a.append(l)})}return{restrict:"A",replace:!0,templateUrl:UrlHelpers.join(e.templatePath,"forms2Map.html"),scope:{config:"="+t,entity:"=?"},link:function(d,p,h){d.$watch("config",function(f){function g(t){var n=_.cloneDeep(t);return n.style=0,_.forIn(n.properties,function(e,t){"noLabel"in e&&delete e.noLabel}),e.log.debug("Schema: ",t),n}var m={postInterpolateActions:{},maybeHumanize:void 0,config:void 0,s:void 0,element:p,attrs:h,mappings:o,schemas:a,$templateCache:i,$interpolate:r,$compile:n,directiveName:t},v=e.initConfig(m,_.cloneDeep(f),!1);if(m.config=v,m.maybeHumanize=e.createMaybeHumanize(m),d.entity||(d.entity={}),!v||!v.items)return void e.log.debug("Invalid map config, no 'items' configured");if(!v.items.key)return void e.log.debug("Invalid map config, no 'key' attribute configured in 'items'");if(!v.items.value)return void e.log.debug("Invalid map config, no 'value' attribute configured in 'items'");var y=d.entity,b=d.$new();m.s=b;{var w=c("key",v.items.key.type,v.items.key),x=c("value",v.items.value.type,v.items.value),k=angular.element(i.get("table.html"));k.find("tbody")}b.config=v,b.entity=y,b.keySchema=_.cloneDeep(w),b.valueSchema=_.cloneDeep(x),b.keySchema.mode=b.valueSchema.mode=0,b.keySchema.style=b.valueSchema.style=3,b.keySchema.hideLegend=b.valueSchema.hideLegend=!0,b.editRow=function(t){e.log.debug("Edit row: ",t)},b.deleteRow=function(t){e.log.debug("Delete row: ",t)},b.createRow=function(){e.log.debug("create row");var t=s.open({templateUrl:"mapItemModal.html",controller:["$scope","$modalInstance",function(n,i){n.header="Create Entry",n.description="<p>Add a new entry to the map by filling in the details for the key and value</p>",n.keySchema=g(w),n.valueSchema=g(x),n.ok=function(){t.close();var i=n.newKeyEntity.key,r=n.newValueEntity;(x.control.items||o.hasMapping(x.control.type))&&(r=n.newValueEntity.value),e.log.debug("New key: ",i),e.log.debug("New value: ",r),y[i]=r},n.cancel=function(){t.dismiss()}}]})},b.$watch("entity",function(e,t){d.entity=e;var i=l(m,k),r=angular.element("<div></div>");u(m,e,w,x,r),i.append(n(r.children())(b))},!0),p.append(n(k)(b))})}}}])}(HawtioForms||(HawtioForms={}));var HawtioForms;!function(e){e._module.factory("SchemaRegistry",["ControlMappingRegistry",function(e){function t(e,t){i[e]=t,_.forIn(r,function(n,i){n(e,t)})}function n(t){return e.getMapping(t)===t?{type:"object",javaType:t}:{type:t}}var i={},r={},a={addListener:function(e,t){e&&t&&(_.forIn(i,function(e,n){t(n,e)}),r[e]=t)},removeListener:function(e){e in r&&delete r[e]},addSchema:function(e,i){var r=_.cloneDeep(i);_.forIn(r.properties,function(e,t){if(_.startsWith(e.javaType,"java.util.Map")){var i=e.javaType.replace("java.util.Map<","").replace(">",""),r=i.split(",");if(2!==r.length)return;e.type="map",e.items={key:n(r[0]),value:n(r[1])}}}),t(e,r),i.javaType&&t(i.javaType,r),i.definitions&&_.forIn(i.definitions,function(e,t){a.addSchema(t,e)})},getSchema:function(e){return i[e]},cloneSchema:function(e){return _.clone(i[e],!0)},removeSchema:function(e){var t=void 0;return e in i&&(t=i[e],delete i[e]),t},iterate:function(e){_.forIn(i,e)}};return a}])}(HawtioForms||(HawtioForms={}));var HawtioForms;!function(e){e._module.factory("ControlMappingRegistry",[function(){var e={},t={hasMapping:function(t){return t?t.toLowerCase()in e:!1},addMapping:function(t,n){e[t.toLowerCase()]=n},getMapping:function(t){if(!t)return void 0;var n=e[t.toLowerCase()];return n?n:t},removeMapping:function(t){var n=void 0;return t.toLowerCase()in e&&(n=e[t.toLowerCase()],delete e[t.toLowerCase()]),n},iterate:function(t){_.forIn(e,t)}};return _.forEach(["int","number","integer","long","short","java.lang.integer","java.lang.long","float","double","java.lang.float","java.lang.double"],function(e){return t.addMapping(e,"number")}),_.forEach(["boolean","bool","java.lang.boolean"],function(e){return t.addMapping(e,"checkbox")}),t.addMapping("password","password"),t.addMapping("hidden","hidden"),t.addMapping("static","static"),t.addMapping("enum","select"),t.addMapping("choice","radio-group"),t.addMapping("multiple","multiple-select"),_.forEach(["string","text","java.lang.string"],function(e){return t.addMapping(e,"text")}),t}])}(HawtioForms||(HawtioForms={}));var Forms;!function(e){function t(e,t){e&&t&&angular.forEach(t.properties,function(t,n){var i=t["default"];i&&!e[n]&&(console.log("===== defaulting value "+i+" into entity["+n+"]"),e[n]=i)})}function n(e,t){if(e&&t){var n=a(e,t);if(n){var i=n.type;i&&(e=i)}}return e}function i(e,t,n){for(var i=a(e,t);i;){var r=Core.pathGet(i,["extends","type"]);if(!r)return!1;if(n===r)return!0;i=a(r,t)}return!1}function r(e){return e?e.replace(/-/g,"_"):e}function a(e,t){if(t){var n=t.definitions;if(n){var i=n[e];if(i){var r=i.fullSchema;if(r)return r;var o=Core.pathGet(i,["extends","type"]);if(o)return r=angular.copy(i),r.properties=r.properties||{},angular.isArray(o)||(o=[o]),angular.forEach(o,function(e){if(angular.isString(e)){var n=a(e,t),i=Core.pathGet(n,["properties"]);i&&angular.forEach(i,function(e,t){r.properties[t]=e})}}),i.fullSchema=r,r}return i}}return null}function o(e,t){var n=null;if(e&&t){if(n=e.items){var i=n.type;if(i){var r=a(i,t);if(r)return r}}var o=e.additionalProperties;if(o&&"#"===o.$ref)return t}return n}function s(e){var t=Core.pathGet(e,"type");return t&&"object"===t}function l(e,t){if(e){var i=n(e.type,t);if(i&&("object"===i||"array"===i))return!0}return!1}function c(e,t,n){return angular.isDefined(t)&&(e=angular.extend(e,t)),angular.extend(e,n)}function u(e,t,n){var i=angular.element('<div class="'+e.controlgroupclass+'"></div>');if(angular.isDefined(t.description)&&i.attr("title",t.description),e.properties&&e.properties[n]){var r=e.properties[n];r&&"control-attributes"in r&&angular.forEach(r["control-attributes"],function(e,t){i.attr(t,e)})}return i}function d(e,t,n,i){return void 0===i&&(i=!1),angular.element(i?'<label class="strong '+e.labelclass+'">'+n+": </label>":'<label class="'+e.labelclass+'">'+n+": </label>")}function p(e){return angular.element('<div class="'+e.controlclass+'"></div>')}function h(e,t,n,i){void 0===i&&(i=null);var r=Core.pathGet(e.data,["properties",n,"help"]);Core.isBlank(r)&&(r=Core.pathGet(e.data,["properties",n,"description"])),Core.isBlank(r)&&angular.isDefined(i)&&(r=Core.pathGet(i,["help"]),Core.isBlank(r)&&(r=Core.pathGet(i,["description"])));var a=e.showhelp||"true";return angular.element(Core.isBlank(r)?'<span class="help-block"></span>':'<span class="help-block" ng-show="'+a+'">'+r+"</span>")}e.log=Logger.get("Forms"),e.defaultValues=t,e.resolveTypeNameAlias=n,e.isJsonType=i,e.safeIdentifier=r,e.lookupDefinition=a,e.findArrayItemsSchema=o,e.isObjectType=s,e.isArrayOrNestedObject=l,e.configure=c,e.getControlGroup=u,e.getLabel=d,e.getControlDiv=p,e.getHelpSpan=h}(Forms||(Forms={}));var Forms;!function(e){function t(t,i,r,a,o,s,l,c,u){function d(e,t){var n=i[t];n&&angular.forEach(n,function(t,n){angular.isString(t)&&e.attr(n,t)})}function p(){d(h,"input-attributes"),angular.forEach(i,function(e,t){if(angular.isString(e)&&t.indexOf("$")<0&&"type"!==t){var n=Core.escapeHtml(e);h.attr(t,n)}})}void 0===c&&(c=!0),void 0===u&&(u=!1);var h=null,f=null,g={valueConverter:null},m=e.safeIdentifier(o),v=i.required||!1,y=n(t,i,r,a,g,m);if(y){h=angular.element(y),p(),o=m;var b=a.model||Core.pathGet(i,["input-attributes","ng-model"]);b||(b=a.getEntity()+"."+o),h.attr("ng-model",b),h.attr("name",o);var w=i.title||i.tooltip||i.label;w&&h.attr("title",w);var x=i.tooltip||i.description;x&&h.attr("tooltip",x);var k=u||i.disableHumanizeLabel,C=o;if(s||i.ignorePrefixInLabel){var S=o.lastIndexOf(".");S>0&&(C=o.substring(S+1))}if("hidden"!==h.attr("type")&&c){f=this.getControlGroup(a,a,o);var _=i.title||i.label||(k?C:Core.humanizeValue(C)),T=e.getLabel(a,a,_,v);x?T.attr("title",x):w&&T.attr("title",w),f.append(T),d(T,"label-attributes");var $=e.getControlDiv(a);$.append(h),$.append(e.getHelpSpan(a,a,o,i)),f.append($);var A=a.showempty;if(angular.isDefined(A)){var E="true";"true"===A||"false"===A?E=A:angular.isString(o)&&(E=A+"('"+o+"')"),f.attr("ng-show",E)}d($,"control-attributes"),d(f,"control-group-attributes");var P=a.scope;if(P&&b){var I=function(e){P.$emit("hawtio.form.modelChange",b,e)},D=I,M=g.valueConverter;M&&(D=function(){M(P,b);var e=Core.pathGet(P,b);I(e)}),P.$watch(b,D)}}}else{h=angular.element("<div></div>"),h.attr(e.normalize(t,i,r),""),p(),h.attr("entity",a.getEntity()),h.attr("mode",a.getMode());var N=a.schemaName;N&&h.attr("schema",N),l&&h.attr("data",l),(s||i.ignorePrefixInLabel)&&h.attr("ignore-prefix-in-label",!0),(u||i.disableHumanizeLabel)&&h.attr("disable-humanize-label",!0),h.attr("name",o)}var j=i.label;j&&h.attr("title",j);try{a.isReadOnly()&&(h.attr("readonly","true"),("select"===h[0].localName||"input"===h[0].localName&&"checkbox"===h.attr("type"))&&h.attr("disabled","true"))}catch(O){}return v&&("select"===h[0].localName||"input"===h[0].localName&&"checkbox"===h.attr("type")?h.removeAttr("required"):h.attr("required","true")),f?f:h}function n(t,n,i,r,a,o){function s(e,t){var i=Core.pathGet(e,t);if(!i){var r=n["default"]||n.defaultValue;r&&(i=r,Core.pathSet(e,t,i))}return i}var l=e.resolveTypeNameAlias(t,i);if(!l)return'<input type="text"/>';var c=Core.pathGet(n,["formTemplate"]);if(c)return null;var u=Core.pathGet(n,["input-element"]);if(u)return"<"+u+"></"+u+">";var d=Core.pathGet(n,["enum"]);if(d){var p=!0,h=null,f="";if(d){var g=r.scope,m=r.data;if(m&&g){var v=g[r.schemaName],y=angular.isString(m)?g[m]:m,b=o.split("."),n=null;angular.forEach(b,function(t){n=Core.pathGet(y,["properties",t]);var i=Core.pathGet(n,["type"]),r=e.lookupDefinition(i,v);r&&(y=r)});var w=Core.pathGet(n,["enum"]);angular.isUndefined(w)&&(w=d),h="$values_"+o.replace(/\./g,"_"),g[h]=w}}h&&(f+=' ng-options="value for value in '+h+'"');var x=p?"":'<option value=""></option>';return"<select"+f+">"+x+"</select>"}if(angular.isArray(l))return null;if(!angular.isString(l))return null;var k=null,C=n["default"]||n.defaultValue;switch(C&&(k=function(e,t){var n=Core.pathGet(e,t);n||Core.pathSet(e,t,C)},a.valueConverter=k),l.toLowerCase()){case"int":case"integer":case"long":case"short":case"java.lang.integer":case"java.lang.long":case"float":case"double":case"java.lang.float":case"java.lang.double":return a.valueConverter=function(e,t){var n=s(e,t);if(n&&angular.isString(n)){var i=Number(n);Core.pathSet(e,t,i)}},'<input type="number" class="form-input"/>';case"array":case"java.lang.array":case"java.lang.iterable":case"java.util.list":case"java.util.collection":case"java.util.iterator":case"java.util.set":case"object[]":return null;case"boolean":case"bool":case"java.lang.boolean":return a.valueConverter=function(e,t){var n=s(e,t);n&&"true"===n&&Core.pathSet(e,t,!0)},'<input type="checkbox" class="form-input"/>';case"password":return'<input type="password" class="form-input"/>';case"hidden":return'<input type="hidden" class="form-input"/>';case"map":return null;default:return'<input type="text" class="form-input"/>'}}function i(e){switch(e.toLowerCase()){case"int":case"integer":case"long":case"short":case"java.lang.integer":case"java.lang.long":case"float":case"double":case"java.lang.float":case"java.lang.double":return"number";case"array":case"java.lang.array":case"java.lang.iterable":case"java.util.list":case"java.util.collection":case"java.util.iterator":case"java.util.set":case"object[]":return"text";case"boolean":case"bool":case"java.lang.boolean":return"checkbox";case"password":return"password";case"hidden":return"hidden";default:return"text"}}function r(t,n,i){if(t=e.resolveTypeNameAlias(t,i),!t)return"hawtio-form-text";var r=Core.pathGet(n,["formTemplate"]);if(r)return"hawtio-form-custom";var a=Core.pathGet(n,["enum"]);if(a)return"hawtio-form-select";if(angular.isArray(t))return null;if(!angular.isString(t)){try{console.log("Unsupported JSON schema type value "+JSON.stringify(t))}catch(o){console.log("Unsupported JSON schema type value "+t)}return null}switch(t.toLowerCase()){case"int":case"integer":case"long":case"short":case"java.lang.integer":case"java.lang.long":case"float":case"double":case"java.lang.float":case"java.lang.double":return"hawtio-form-number";case"array":case"java.lang.array":case"java.lang.iterable":case"java.util.list":case"java.util.collection":case"java.util.iterator":case"java.util.set":case"object[]":var s=n.items;if(!s)return"hawtio-form-string-array";var l=s.type;return l&&"string"===l?"hawtio-form-string-array":(e.log.debug("Returning hawtio-form-array for : ",n),"hawtio-form-array");case"boolean":case"bool":case"java.lang.boolean":return"hawtio-form-checkbox";case"password":return"hawtio-form-password";case"hidden":return"hawtio-form-hidden";case"map":return"hawtio-form-map";default:return"hawtio-form-text"}}e.createWidget=t,e.createStandardWidgetMarkup=n,e.mapType=i,e.normalize=r}(Forms||(Forms={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},Forms;!function(e){var t=function(){function e(){this.name="input",this.type="",this.description="",this._default="",this.scope=null,this.mode="edit",this.schemaName="schema",this.controlgroupclass="control-group",this.controlclass="controls",this.labelclass="control-label",this.showtypes="false",this.formtemplate=null,this.entity="entity",this.model=void 0}return e.prototype.getEntity=function(){return this.entity||"entity"},e.prototype.getMode=function(){return this.mode||"edit"},e.prototype.isReadOnly=function(){return"view"===this.getMode()},e}();e.InputBaseConfig=t;var n=function(){function n(e){var t=this;this.$compile=e,this.restrict="A",this.scope=!0,this.replace=!1,this.transclude=!1,this.attributeName="",this.link=function(e,n,i){return t.doLink(e,n,i)}}return n.prototype.doLink=function(n,i,r){function a(e){n.$emit("hawtio.form.modelChange",c,e)}var o=new t;o=e.configure(o,null,r),o.scope=n,o.schemaName=r.schema||"schema";var s=e.safeIdentifier(o.name),l=this.getControlGroup(o,o,s),c=o.model;angular.isDefined(c)||(c=o.getEntity()+"."+s);var u=s;if("true"===r.ignorePrefixInLabel){var d=s.lastIndexOf(".");d>0&&(u=s.substring(d+1))}var p="true"===r.disableHumanizeLabel,h=r.title||(p?u:Core.humanizeValue(u));l.append(e.getLabel(o,o,h));var f=e.getControlDiv(o);f.append(this.getInput(o,o,s,c)),f.append(e.getHelpSpan(o,o,s)),l.append(f),$(i).append(this.$compile(l)(n)),
n&&c&&n.$watch(c,a)},n.prototype.getControlGroup=function(t,n,i){return e.getControlGroup(t,n,i)},n.prototype.getInput=function(e,t,n,i){var r=$('<span class="form-data"></span>');return i&&(r.attr("ng-model",i),r.append("{{"+i+"}}")),r},n}();e.InputBase=n;var i=function(e){function t(t){e.call(this,t),this.$compile=t,this.type="text"}return __extends(t,e),t.prototype.getInput=function(t,n,i,r){if(t.isReadOnly())return e.prototype.getInput.call(this,t,n,i,r);var a=$('<input type="'+this.type+'">');a.attr("name",i),r&&a.attr("ng-model",r),t.isReadOnly()&&a.attr("readonly","true");var o=t.$attr.required;return o&&"false"!==o&&a.attr("required","true"),a},t}(n);e.TextInput=i;var r=function(e){function t(t){e.call(this,t),this.$compile=t,this.type="hidden"}return __extends(t,e),t.prototype.getControlGroup=function(t,n,i){var r=e.prototype.getControlGroup.call(this,t,n,i);return r.css({display:"none"}),r},t.prototype.getInput=function(t,n,i,r){var a=e.prototype.getInput.call(this,t,n,i,r);return a.attr("readonly","true"),a},t}(i);e.HiddenText=r;var a=function(e){function t(t){e.call(this,t),this.$compile=t,this.type="password"}return __extends(t,e),t}(i);e.PasswordInput=a;var o=function(e){function t(t){e.call(this,t),this.$compile=t}return __extends(t,e),t.prototype.getInput=function(e,t,n,i){var r=t.formtemplate;r=Core.unescapeHtml(r);var a=$(r);return a.attr("name")||a.attr("name",n),i&&a.attr("ng-model",i),e.isReadOnly()&&a.attr("readonly","true"),a},t}(n);e.CustomInput=o;var s=function(t){function n(e){t.call(this,e),this.$compile=e}return __extends(n,t),n.prototype.getInput=function(n,i,r,a){if(n.isReadOnly())return t.prototype.getInput.call(this,n,i,r,a);var o=!0,s=o?"":'<option value=""></option>',l=$("<select>"+s+"</select>");l.attr("name",r);var c=n.scope,u=n.data;if(u&&c){var d=c[n.schemaName],p=c[u],h=r.split("."),f=null;angular.forEach(h,function(t){f=Core.pathGet(p,["properties",t]);var n=Core.pathGet(f,["type"]),i=e.lookupDefinition(n,d);i&&(p=i)});var g=Core.pathGet(f,["enum"]);c.$selectValues=g,l.attr("ng-options","value for value in $selectValues")}return a&&l.attr("ng-model",a),n.isReadOnly()&&l.attr("readonly","true"),l},n}(n);e.SelectInput=s;var l=function(e){function t(t){e.call(this,t),this.$compile=t}return __extends(t,e),t.prototype.getInput=function(t,n,i,r){function a(){var e=Core.pathGet(s,r);if(e&&angular.isString(e)){var t=Number(e);Core.pathSet(s,r,t)}}if(t.isReadOnly())return e.prototype.getInput.call(this,t,n,i,r);var o=$('<input type="number">');o.attr("name",i),angular.isDefined(n.def)&&o.attr("value",n.def),angular.isDefined(n.minimum)&&o.attr("min",n.minimum),angular.isDefined(n.maximum)&&o.attr("max",n.maximum),r&&o.attr("ng-model",r),t.isReadOnly()&&o.attr("readonly","true");var s=t.scope;return s&&(s.$watch(r,a),a()),o},t}(n);e.NumberInput=l;var c=function(t){function n(e){t.call(this,e),this.$compile=e}return __extends(n,t),n.prototype.getInput=function(t,n,i,r){function a(){var e=Core.pathGet(l,r);l[w]=e?Object.keys(e):[],l.$emit("hawtio.form.modelChange",r,e)}var o="_"+i,s="{{"+o+"}}";if(t.isReadOnly())return angular.element('<ul><li ng-repeat="'+o+" in "+r+'">'+s+"</li></ul>");var l=t.scope,c=(n.$attr||{}).schema||"schema",u=l[t.schemaName]||l[c]||{},d=u.properties||{},p=d[i]||{},h=p.items||{},f=h.type,g=!0,m=h.disableHumanizeLabel,v=null,y=Core.pathGet(l,r);y||Core.pathSet(l,r,[]);var b="_form_stringArray"+o+"_",w=b+"keys",x=b+"add",k=b+"remove";a(),l[x]=function(){var e=Core.pathGet(l,r)||[];e.push(""),Core.pathSet(l,r,e),a()},l[k]=function(e){var t=Core.pathGet(l,r)||[];e<t.length&&t.splice(e,1),Core.pathSet(l,r,t),a()};var C=r+"["+o+"]",S={model:C},_=!1,T=e.createWidget(f,h,u,S,C,g,v,_,m);T||(T=angular.element(s));var $=angular.element('<div class="controls" style="white-space: nowrap" ng-repeat="'+o+" in "+w+'"></div>');return $.append(T),$.append(angular.element('<a ng-click="'+k+"("+o+')" title="Remove this value"><i class="red icon-remove"></i></a>')),$.after(angular.element('<a ng-click="'+x+'()" title="Add a new value"><i class="icon-plus"></i></a>')),$},n}(n);e.StringArrayInput=c;var u=function(n){function i(e){n.call(this,e),this.$compile=e}return __extends(i,n),i.prototype.doLink=function(n,i,r){function a(e,t,n){if(n){var i=n.description;return i||angular.forEach(n,function(e,t){e&&!i&&(i=e)}),i}return null}var o=new t;o=e.configure(o,null,r);var s=o.name,l=r.data||"",c=r.entity||o.entity,u=r.schema||o.schemaName,d=["properties",s,"inputTable"],p=null;if(Core.pathGet(n,d),!p){var h=d.join("."),f="true"===r.disableHumanizeLabel,g=f?s:Core.humanizeValue(s);p={formConfig:o,title:g,data:o.entity+"."+s,displayFooter:!1,showFilter:!1,columnDefs:[{field:"_id",displayName:g,render:a}]},Core.pathSet(n,d,p)}var m=$('<div hawtio-input-table="'+h+'" data="'+l+'" property="'+s+'" entity="'+c+'" schema="'+u+'"></div>');o.isReadOnly()&&m.attr("readonly","true"),$(i).append(this.$compile(m)(n))},i}(n);e.ArrayInput=u;var d=function(e){function t(t){e.call(this,t),this.$compile=t}return __extends(t,e),t.prototype.getInput=function(e,t,n,i){function r(){var e=Core.pathGet(o,i);e&&"true"===e&&Core.pathSet(o,i,!0)}var a=$('<input class="hawtio-checkbox" type="checkbox">');a.attr("name",n),e.isReadOnly()&&a.attr("disabled","true"),i&&a.attr("ng-model",i),e.isReadOnly()&&a.attr("readonly","true");var o=e.scope;return o&&(o.$watch(i,r),r()),a},t}(n);e.BooleanInput=d}(Forms||(Forms={}));var Forms;!function(e){e.pluginName="hawtio-forms",e.templateUrl="plugins/forms/html/",e.log=Logger.get(e.pluginName)}(Forms||(Forms={}));var Forms;!function(e){var t=function(){function e(){this.name="form",this.method="post",this.entity="entity",this.schemaName="schema",this.mode="edit",this.data={},this.json=void 0,this.scope=null,this.scopeName=null,this.properties=[],this.action="",this.formclass="hawtio-form form-horizontal no-bottom-margin",this.controlgroupclass="form-group",this.controlclass="col-sm-10",this.labelclass="col-sm-2 control-label",this.showtypes="false",this.showhelp="true",this.showempty="true",this.onsubmit="onSubmit"}return e.prototype.getMode=function(){return this.mode||"edit"},e.prototype.getEntity=function(){return this.entity||"entity"},e.prototype.isReadOnly=function(){return"view"===this.getMode()},e}();e.SimpleFormConfig=t;var n=function(){function n(e){var t=this;this.$compile=e,this.restrict="A",this.scope=!0,this.replace=!0,this.transclude=!0,this.attributeName="simpleForm",this.link=function(e,n,i){return t.doLink(e,n,i)}}return n.prototype.isReadOnly=function(){return!1},n.prototype.doLink=function(n,i,r){function a(e){e&&o(e)}function o(t){d=e.configure(d,t,r),d.schemaName=p,d.scopeName=b,d.scope=n;var a=d.getEntity();d.data=angular.isDefined(d.json)?$.parseJSON(d.json):t;var o=x.createForm(d);if(v=o.find("fieldset"),y=d.data,m={elements:{},locations:{},use:!1},y&&angular.isDefined(y.tabs)&&(m.use=!0,m.div=$('<div class="tabbable hawtio-form-tabs"></div>'),angular.forEach(y.tabs,function(e,t){m.elements[t]=$('<div class="tab-pane" title="'+t+'"></div>'),m.div.append(m.elements[t]),e.forEach(function(e){m.locations[e]=t})}),m.locations["*"]||(m.locations["*"]=_.keys(y.tabs)[0])),m.use||v.append('<div class="spacer"></div>'),y)if(m.use){var s={};angular.forEach(y.properties,function(e,t){var n=l(t),i=s[n];i||(i=[],s[n]=i),i.push({id:t,property:e})}),angular.forEach(y.tabs,function(e,t){e.forEach(function(e){var t=s[e];t&&angular.forEach(t,function(e){var t=e.id,n=e.property;t&&n&&c(t,n)})})})}else angular.forEach(y.properties,function(e,t){c(t,e)});if(m.use){var h=m.div,k=Object.keys(m.elements).length;2>k?angular.forEach(h.children().children(),function(e){v.append(e)}):v.append(h)}var C=function(e,t){return angular.isDefined(e[t])&&angular.isFunction(e[t])?e:angular.isDefined(e.$parent)&&null!==e.$parent?C(e.$parent,t):null},S=d.onsubmit.replace("(","").replace(")",""),T=u(C(n,S),S);null===T&&(T=function(t,n){e.log.info("No submit handler defined for form:",n.get(0).name)}),angular.isDefined(T)&&o.submit(function(){if(e.log.debug("child scope: ",g),e.log.debug("form name: ",d),g[d.name].$invalid)return!1;var t=n[a];return T(t,o),!1}),v.append('<input type="submit" style="position: absolute; left: -9999px; width: 1px; height: 1px;">');var A=o.find("*[autofocus]");if((!A||!A.length)&&w){console.log("No autofocus element, so lets add one!");var E=w.find("input").first()||w.find("select").first();E&&E.attr("autofocus","true")}f&&$(f).remove(),g&&g.$destroy(),g=n.$new(!1),f=x.$compile(o)(g);var P="forms",I=n[P];I||(I={},n[P]=I);var D=d.name;if(D){var M=g[D];M&&(I[D]=M);var N=D+="$scope";I[N]=g}$(i).append(f)}function s(e){var t=m.locations[e];return t||angular.forEach(m.locations,function(n,i){!t&&"*"!==i&&e.match(i)&&(t=n)}),t||(t=m.locations["*"]),t}function l(e){var t=null;return angular.forEach(y.tabs,function(n,i){n.forEach(function(n){!t&&"*"!==n&&e.match(n)&&(t=n)})}),t||(t="*"),t}function c(t,n,i){void 0===i&&(i=n.ignorePrefixInLabel);var r=n.type;"java.lang.String"===r&&(r="string");var a=e.lookupDefinition(r,y);a||(a=e.lookupDefinition(r,h));var o=y?y.disableHumanizeLabel:!1;if(!n.hidden){if("expression"===n.kind){a=e.lookupDefinition("expression",h);var l=t+".language",u=t+".expression",p=jQuery.extend(!0,{},a.properties.expression);p.description=n.description,p.title=n.title,p.required=n.required;var f=e.createWidget(r,a.properties.language,y,d,l,i,b,!0,o),g=e.createWidget(r,p,y,d,u,i,b,!0,o),x=f.find("select"),k=g.find("input");return x&&k&&(x.attr("style","width: 120px; margin-right: 10px"),k.attr("style","width: 470px"),k.before(x)),void v.append(g)}var C=null;if(!a&&"object"===r&&n.properties?C=n.properties:a&&e.isObjectType(a)&&(C=a.properties),C)angular.forEach(C,function(e,i){var r=t+"."+i;c(r,e,n.ignorePrefixInLabel)});else{var S=!0,f=e.createWidget(r,n,y,d,t,i,b,S,o);if(m.use){var _=s(t);m.elements[_].append(f)}else v.append(f);w||(w=f)}}}function u(e,t){return null!==e?e[t]:null}var d=new t,p=r.schema,h=p?n[p]:null,f=null,g=null,m=null,v=null,y=null,b=r[this.attributeName]||r.data,w=null,x=this;n.$watch(b,a)},n.prototype.createForm=function(e){var t=$('<form class="'+e.formclass+'" novalidate><fieldset></fieldset></form>');return t.attr("name",e.name),t.attr("action",e.action),t.attr("method",e.method),t.find("fieldset").append(this.getLegend(e)),t},n.prototype.getLegend=function(e){var t=Core.pathGet(e,"data.description");return t?"<legend>"+t+"</legend>":""},n}();e.SimpleForm=n}(Forms||(Forms={}));var Forms;!function(e){var t=function(){function e(){this.name="form",this.method="post",this.entity="entity",this.tableConfig="tableConfig",this.mode="edit",this.data={},this.json=void 0,this.properties=[],this.action="",this.tableclass="table table-striped inputTable",this.controlgroupclass="control-group",this.controlclass="controls pull-right",this.labelclass="control-label",this.showtypes="true",this.removeicon="icon-remove",this.editicon="icon-edit",this.addicon="icon-plus",this.removetext="Remove",this.edittext="Edit",this.addtext="Add",this.onadd="onadd",this.onedit="onedit",this.onremove="onRemove",this.primaryKeyProperty=void 0}return e.prototype.getTableConfig=function(){return this.tableConfig||"tableConfig"},e}();e.InputTableConfig=t;var n=function(){function n(e){var t=this;this.$compile=e,this.restrict="A",this.scope=!0,this.replace=!0,this.transclude=!0,this.attributeName="hawtioInputTable",this.link=function(e,n,i){return t.doLink(e,n,i)}}return n.prototype.doLink=function(n,i,r){function a(e){var t=Core.pathGet(n,f);t||(t=[]),!angular.isArray(t)&&t&&(t=[t]),t=e(t),Core.pathSet(n,f,t),n.$emit("hawtio.datatable."+f,t),Core.$apply(n)}function o(e){return angular.forEach(n.config.selectedItems,function(t){var n=t._id;if(angular.isArray(e))e=e.remove(function(e){return _.isEqual(e,t)}),delete t._id,e=e.remove(function(e){return _.isEqual(e,t)});else if(delete t._id,n)delete e[n];else{var i=!1;angular.forEach(e,function(n,r){!i&&_.isEqual(n,t)&&(console.log("Found row to delete! "+r),delete e[r],i=!0)}),i||console.log("Could not find "+JSON.stringify(t)+" in "+JSON.stringify(e))}}),e}function s(e,t){return null!==e?e[t]:null}var l=this,c=new t,u=r[this.attributeName],d=Core.pathGet(n,u);c=e.configure(c,d,r);var p=r.entity||c.data||"entity",h=r.property||"arrayData",f=p+"."+h,g=c.primaryKeyProperty,m=c.title||p;c.data=angular.isDefined(c.json)?$.parseJSON(c.json):n[c.data];var v=$("<div></div>"),d=Core.pathGet(n,u);d?(d.selectedItems=[],n.config=d):console.log("No table configuration for table "+m);var y=this.createTable(c,u),b=this.getControlGroup(c,{},""),w=this.getControlDiv(c);w.addClass("btn-group"),b.append(w);var x=null,k=null,C=null,S=null,T=null,A=r.readonly;if(!A){var E=null,P=r.data,I=P?Core.pathGet(n,P):null,D=r.schema||P,M=D?Core.pathGet(n,D):null;h&&I&&(E=Core.pathGet(I,["properties",h])),x=this.getAddButton(c),n.addDialogOptions={backdropFade:!0,dialogFade:!0},n.showAddDialog=!1,n.openAddDialog=function(){n.addEntity={},n.addFormConfig=e.findArrayItemsSchema(E,M);var t="addFormConfig";if(!S){var i="Add "+m;S=$('<div modal="showAddDialog" close="closeAddDialog()" options="addDialogOptions">\n<div class="modal-header"><h4>'+i+'</h4></div>\n<div class="modal-body"><div simple-form="addFormConfig" entity="addEntity" data="'+t+'" schema="'+D+'"></div></div>\n<div class="modal-footer"><button class="btn btn-primary add" type="button" ng-click="addAndCloseDialog()">Add</button><button class="btn btn-warning cancel" type="button" ng-click="closeAddDialog()">Cancel</button></div></div>'),v.append(S),l.$compile(S)(n)}n.showAddDialog=!0,Core.$apply(n)},n.closeAddDialog=function(){n.showAddDialog=!1,n.addEntity={}},n.addAndCloseDialog=function(){var t=n.addEntity;e.log.info("About to add the new entity "+JSON.stringify(t)),t&&a(function(e){return g&&e.remove(function(e){return e[g]===t[g]}),e.push(t),e}),n.closeAddDialog()},k=this.getEditButton(c),n.editDialogOptions={backdropFade:!0,dialogFade:!0},n.showEditDialog=!1,n.openEditDialog=function(){var t=n.config.selectedItems,i={};if(t&&t.length&&angular.copy(t[0],i),n.editEntity=i,n.editFormConfig=e.findArrayItemsSchema(E,M),!T){var r="Edit "+m;T=$('<div modal="showEditDialog" close="closeEditDialog()" options="editDialogOptions">\n<div class="modal-header"><h4>'+r+'</h4></div>\n<div class="modal-body"><div simple-form="editFormConfig" entity="editEntity"></div></div>\n<div class="modal-footer"><button class="btn btn-primary save" type="button" ng-click="editAndCloseDialog()">Save</button><button class="btn btn-warning cancel" type="button" ng-click="closeEditDialog()">Cancel</button></div></div>'),v.append(T),l.$compile(T)(n)}n.showEditDialog=!0,Core.$apply(n)},n.closeEditDialog=function(){n.showEditDialog=!1,n.editEntity={}},n.editAndCloseDialog=function(){var e=n.editEntity;console.log("About to edit the new entity "+JSON.stringify(e)),e&&a(function(t){return t=o(t),t.push(e),t}),n.closeEditDialog()},C=this.getRemoveButton(c)}var N=function(e,t){return angular.isDefined(e[t])&&angular.isFunction(e[t])?e:angular.isDefined(e.$parent)&&null!==e.$parent?N(e.$parent,t):null},j=c.onremove.replace("(","").replace(")",""),O=c.onedit.replace("(","").replace(")",""),L=c.onadd.replace("(","").replace(")",""),R=s(N(n,j),j),F=s(N(n,O),O),U=s(N(n,L),L);null===R&&(R=function(){a(function(e){return o(e)})}),null===F&&(F=function(){n.openEditDialog()}),null===U&&(U=function(e){n.openAddDialog()}),x&&(x.click(function(e){return U(),!1}),w.append(x)),k&&(k.click(function(e){return F(),!1}),w.append(k)),C&&(C.click(function(e){return R(),!1}),w.append(C)),$(v).append(b),$(v).append(y),$(i).append(v),this.$compile(v)(n)},n.prototype.getAddButton=function(e){return $('<button type="button" class="btn add"><i class="'+e.addicon+'"></i> '+e.addtext+"</button>")},n.prototype.getEditButton=function(e){return $('<button type="button" class="btn edit" ng-disabled="!config.selectedItems.length"><i class="'+e.editicon+'"></i> '+e.edittext+"</button>")},n.prototype.getRemoveButton=function(e){return $('<button type="remove" class="btn remove" ng-disabled="!config.selectedItems.length"><i class="'+e.removeicon+'"></i> '+e.removetext+"</button>")},n.prototype.createTable=function(e,t){var n="hawtio-simple-table",i=$('<table class="'+e.tableclass+'" '+n+'="'+t+'"></table>');return i},n.prototype.getLegend=function(e){var t=Core.pathGet(e,"data.description");return t?"<legend>"+e.data.description+"</legend>":""},n.prototype.getControlGroup=function(e,t,n){var i=$('<div class="'+e.controlgroupclass+'"></div>');return angular.isDefined(t.description)&&i.attr("title",t.description),i},n.prototype.getControlDiv=function(e){return $('<div class="'+e.controlclass+'"></div>')},n.prototype.getHelpSpan=function(e,t,n){var i=$('<span class="help-block"></span>');return angular.isDefined(t.type)&&"false"!==e.showtypes&&i.append("Type: "+t.type),i},n}();e.InputTable=n}(Forms||(Forms={}));var Forms;!function(e){var t=function(){function e(){var e=this;this.restrict="A",this.scope=!0,this.link=function(t,n,i){return e.doLink(t,n,i)}}return e.prototype.doLink=function(e,t,n){var i=$(t),r="form[name="+n.hawtioSubmit+"]";i.click(function(){return $(r).submit(),!1})},e}();e.SubmitForm=t}(Forms||(Forms={}));var Forms;!function(e){var t=function(){function e(){var e=this;this.restrict="A",this.scope=!0,this.link=function(t,n,i){return e.doLink(t,n,i)}}return e.prototype.doLink=function(e,t,n){var i=$(t),r="form[name="+n.hawtioReset+"]";i.click(function(){for(var e=$(r),t=0;t<e.length;t++)e[t].reset();return!1})},e}();e.ResetForm=t}(Forms||(Forms={}));var Forms;!function(e){e._module=angular.module(e.pluginName,[]),e._module.directive("simpleForm",["$compile",function(t){return new e.SimpleForm(t)}]),e._module.directive("hawtioForm",["$compile",function(t){return new e.SimpleForm(t)}]),e._module.directive("hawtioInputTable",["$compile",function(t){return new e.InputTable(t)}]),e._module.directive("hawtioFormText",["$compile",function(t){return new e.TextInput(t)}]),e._module.directive("hawtioFormPassword",["$compile",function(t){return new e.PasswordInput(t)}]),e._module.directive("hawtioFormHidden",["$compile",function(t){return new e.HiddenText(t)}]),e._module.directive("hawtioFormNumber",["$compile",function(t){return new e.NumberInput(t)}]),e._module.directive("hawtioFormSelect",["$compile",function(t){return new e.SelectInput(t)}]),e._module.directive("hawtioFormArray",["$compile",function(t){return new e.ArrayInput(t)}]),e._module.directive("hawtioFormStringArray",["$compile",function(t){return new e.StringArrayInput(t)}]),e._module.directive("hawtioFormCheckbox",["$compile",function(t){return new e.BooleanInput(t)}]),e._module.directive("hawtioFormCustom",["$compile",function(t){return new e.CustomInput(t)}]),e._module.directive("hawtioSubmit",function(){return new e.SubmitForm}),e._module.directive("hawtioReset",function(){return new e.ResetForm}),e._module.run(function(){e.log.debug("loaded")}),hawtioPluginLoader.addModule(e.pluginName)}(Forms||(Forms={}));var Forms;!function(e){function t(){return{type:void 0}}function n(){return{}}function i(){return{properties:{}}}function r(){return{rowSchema:{},rows:[]}}e.createFormElement=t,e.createFormTabs=n,e.createFormConfiguration=i,e.createFormGridConfiguration=r}(Forms||(Forms={}));var Forms;!function(e){e._module.directive("hawtioFormGrid",["$templateCache","$interpolate","$compile",function(t,n,i){return{restrict:"A",replace:!0,scope:{configuration:"=hawtioFormGrid"},templateUrl:e.templateUrl+"formGrid.html",link:function(r,a,o){function s(){return[]}function l(){var e=s();if(angular.isDefined(r.configuration.rowSchema.columnOrder)){var t=r.configuration.rowSchema.columnOrder;t.forEach(function(t){var n=Core.pathGet(r.configuration.rowSchema.properties,[t]);Core.pathSet(n,["key"],t),e.push(n)})}return angular.forEach(r.configuration.rowSchema.properties,function(t,n){e.some(function(e){return e.key===n})||(t.key=n,e.push(t))}),e}function c(){var e=a.find("thead");return e.empty(),e.append(t.get("rowTemplate.html")).find("tr")}function u(e){var i=c();e.forEach(function(e){var a=e.label||e.key;r.configuration.rowSchema.disableHumanizeLabel||(a=a.titleize());var o=e.headerTemplate||t.get("headerCellTemplate.html"),s=n(o);i.append(s({label:a}))}),i.append(t.get("emptyHeaderCellTemplate.html"))}function d(){var e=a.find("tbody");return e.empty(),e}function p(){return angular.element(t.get("rowTemplate.html"))}function h(i,a){var o=r.configuration.rows;o.forEach(function(r,o){var s=p();i.forEach(function(i){var r=e.mapType(i.type);if("number"===r&&"input-attributes"in i){var a=i.template||t.get("cellNumberTemplate.html"),l=n(a),c={row:"configuration.rows["+o+"]",type:r,key:i.key,min:Core.pathGet(i,["input-attributes","min"]),max:Core.pathGet(i,["input-attributes","max"])};s.append(l(c))}else{var a=i.template||t.get("cellTemplate.html"),l=n(a);s.append(l({row:"configuration.rows["+o+"]",type:r,key:i.key}))}});var l=n(t.get("deleteRowTemplate.html"));s.append(l({index:o})),a.append(s)})}r.removeThing=function(e){r.configuration.rows.removeAt(e)},r.addThing=function(){r.configuration.rows.push(r.configuration.onAdd())},r.getHeading=function(){return Core.isBlank(r.configuration.rowName)?"items".titleize():r.configuration.rowName.pluralize().titleize()},r.$watch("configuration.noDataTemplate",function(e,n){var o=r.configuration.noDataTemplate||t.get("heroUnitTemplate.html");a.find(".nodata").html(i(o)(r))}),r.$watch("configuration.rowSchema",function(e,t){if(e!==t){var n=l();u(n)}},!0),r.$watchCollection("configuration.rows",function(e,t){if(e!==t){var n=d(),a=l(),o=angular.element("<div></div>");h(a,o),n.append(i(o.children())(r))}})}}}])}(Forms||(Forms={}));var Forms;!function(e){e._module.directive("hawtioFormMap",[function(){return{restrict:"A",replace:!0,templateUrl:UrlHelpers.join(e.templateUrl,"formMapDirective.html"),scope:{description:"@",entity:"=",mode:"=",data:"=",name:"@"},link:function(t,n,i){t.deleteKey=function(n){try{delete t.entity[t.name][""+n]}catch(i){e.log.debug("failed to delete key: ",n," from entity: ",t.entity)}},t.addItem=function(e){t.entity||(t.entity={}),Core.pathSet(t.entity,[t.name,e.key],e.value),t.showForm=!1},t.$watch("showForm",function(e){e&&(t.newItem={key:void 0,value:void 0})})}}}])}(Forms||(Forms={})),angular.module("hawtio-forms-templates",[]).run(["$templateCache",function(e){e.put("plugins/forms/html/formGrid.html",'<div>\n\n  <script type="text/ng-template" id="heroUnitTemplate.html">\n    <div class="hero-unit">\n      <h5>No Items Added</h5>\n      <p><a href="" ng-click="addThing()">Add an item</a> to the table</p>\n    </div>\n  </script>\n\n  <script type="text/ng-template" id="headerCellTemplate.html">\n    <th>{{label}}</th>\n  </script>\n\n  <script type="text/ng-template" id="emptyHeaderCellTemplate.html">\n    <th></th>\n  </script>\n\n  <script type="text/ng-template" id="deleteRowTemplate.html">\n    <td ng-click="removeThing({{index}})" class="align-center">\n      <i class="icon-remove red mouse-pointer"></i>\n    </td>\n  </script>\n\n  <script type="text/ng-template" id="cellTemplate.html">\n    <td>\n      <editable-property ng-model="{{row}}"\n                         type="{{type}}"\n                         property="{{key}}"></editable-property>\n    </td>\n  </script>\n\n  <script type="text/ng-template" id="cellNumberTemplate.html">\n    <td>\n      <editable-property ng-model="{{row}}"\n                         type="{{type}}"\n                         property="{{key}}" min="{{min}}" max="{{max}}"></editable-property>\n    </td>\n  </script>\n\n  <script type="text/ng-template" id="rowTemplate.html">\n    <tr></tr>\n  </script>\n\n  <div ng-show="configuration.rows.length == 0" class="row-fluid">\n    <div class="span12 nodata">\n    </div>\n  </div>\n  <div ng-hide="configuration.rows.length == 0" class="row-fluid">\n    <div class="span12">\n      <h3 ng-show="configuration.heading">{{getHeading()}}</h3>\n      <table class="table table-striped">\n        <thead>\n        </thead>\n        <tbody>\n        </tbody>\n      </table>\n    </div>\n    <div ng-click="addThing()" class="centered mouse-pointer">\n      <i class="icon-plus green"></i><span ng-show="configuration.rowName"> Add {{configuration.rowName.titleize()}}</span>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/forms/html/formMapDirective.html",'<div class="control-group">\n  <label class="control-label" for="keyValueList">{{data[name].label || name | humanize}}:</label>\n  <div class="controls">\n    <ul id="keyValueList" class="zebra-list">\n      <li ng-repeat="(key, value) in entity[name]">\n        <strong>Key:</strong>&nbsp;{{key}}&nbsp;<strong>Value:</strong>&nbsp;{{value}}\n        <i class="pull-right icon-remove red mouse-pointer" ng-click="deleteKey(key)"></i>\n      </li>\n      <li>\n        <button class="btn btn-success"  ng-click="showForm = true" ng-hide="showForm"><i class="icon-plus"></i></button>\n        <div class="well" ng-show="showForm">\n          <form class="form-horizontal">\n            <fieldset>\n              <div class="control-group">\n                <label class="control-label" for="newItemKey">Key:</label>\n                <div class="controls">\n                  <input id="newItemKey" type="text" ng-model="newItem.key">\n                </div>\n              </div>\n              <div class="control-group">\n                <label class="control-label" for="newItemKey">Value:</label>\n                <div id="valueInput" class="controls">\n                  <input id="newItemValue" type="text" ng-model="newItem.value">\n                </div>\n              </div>\n              <p>\n              <input type="submit" class="btn btn-success pull-right" ng-disabled="!newItem.key && !newItem.value" ng-click="addItem(newItem)" value="Add">\n              <span class="pull-right">&nbsp;</span>\n              <button class="btn pull-right" ng-click="showForm = false">Cancel</button>\n              </p>\n            </fieldset>\n          </form>\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>\n'),e.put("plugins/forms2/html/array.html",'<div class="row">\n  <div class="clearfix col-md-12">\n    <div ng-hide="{{control.noLabel}}" class="row"><h4>{{control.label || maybeHumanize(name)}}</h4></div>\n    <div class="row">\n      <div class="inline-array"></div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/forms2/html/arrayItemModal.html",'<div class="modal-header">\n  <h3 class="modal-title">{{header}}</h3>\n</div>\n<div class="modal-body">\n  <div ng-show="description" ng-bind-html="description"></div>\n  <div hawtio-form-2="schema" entity="newEntity"></div>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-primary" ng-click="ok()">OK</button>\n  <button class="btn btn-warning" ng-click="cancel()">Cancel</button>\n</div>\n'),e.put("plugins/forms2/html/checkbox-horizontal.html",'<div class="form-group">\n  <div class="col-sm-offset-2 col-sm-10">\n    <div class="checkbox">\n      <label>\n        <input ng-disabled="config.mode == 0" type="checkbox" ng-model="{{model}}"> {{control.label || maybeHumanize(name)}}\n      </label>\n      <p class="help-block">{{control.description}}</p>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/forms2/html/checkbox.html",'<div class="form-group">\n  <div class="checkbox">\n    <label>\n      <input ng-disabled="config.mode == 0" type="checkbox" ng-model="{{model}}"> {{control.label || maybeHumanize(name)}}\n    </label>\n    <p class="help-block">{{control.description}}</p>\n  </div>\n</div>\n'),e.put("plugins/forms2/html/form-horizontal.html",'<form ng-disabled="config.mode == 0" class="hawtio-form-2 form-horizontal">\n  <fieldset>\n    <legend ng-show="config.label || config.description" ng-hide="config.hideLegend">{{config.label || config.description}}</legend>\n  </fieldset>\n</form>\n'),e.put("plugins/forms2/html/form-inline.html",'<form class="hawtio-form-2 hawtio-form-2-inline">\n  <fieldset>\n    <legend ng-show="config.label || config.description" ng-hide="config.hideLegend">{{config.label || config.description}}</legend>\n  </fieldset>\n</form>\n'),e.put("plugins/forms2/html/form-standard.html",'<form class="hawtio-form-2 hawtio-form-2-standard">\n  <fieldset>\n    <legend ng-show="config.label || config.description" ng-hide="config.hideLegend">{{config.label || config.description}}</legend>\n  </fieldset>\n</form>\n'),e.put("plugins/forms2/html/form-unwrapped.html",'<div class="hawtio-form-2 hawtio-form-2-unwrapped">\n  <h4 ng-show="config.label || config.description" ng-hide="config.hideLegend || config.label == \'false\'">{{config.label || config.description}}</h4>\n\n</div>\n'),e.put("plugins/forms2/html/form2Map.html","<div>\n\n</div>\n"),e.put("plugins/forms2/html/forms2Array.html",'<div>\n  <script type="text/ng-template" id="header.html">\n    <th>{{control.label || name}}</th>\n  </script>\n  <script type="text/ng-template" id="emptyHeader.html">\n    <th></th>\n  </script>\n  <script type="text/ng-template" id="newItemHeader.html">\n    <th class="align-right">\n      <button ng-hide="config.mode == 0" class="button button-success" ng-click="createNewRow()">\n        <i class="fa fa-plus green" ></i>\n      </button>\n    </th>\n  </script>\n  <script type="text/ng-template" id="rowTemplate.html">\n    <tr></tr>\n  </script>\n  <script type="text/ng-template" id="deleteRow.html">\n    <td class="align-right">\n      <button ng-hide="config.mode == 0" class=\'editRow\'><i class="fa fa-pencil yellow"></i></button>\n      <button ng-hide="config.mode == 0" class=\'deleteRow\'><i class="fa fa-minus red"></i></button>\n    </td>\n  </script>\n  <script type="text/ng-template" id="table.html">\n    <table class="table table-striped">\n      <thead>\n      </thead>\n      <tbody>\n      </tbody>\n    </table>\n  </script>\n</div> \n'),e.put("plugins/forms2/html/forms2Directive.html",'<div>\n  <script type="text/ng-template" id="wizardParent.html">\n    <div>\n      <div class="wizardParent" ng-switch="getCurrentPageId()">\n      </div>\n    </div>\n  </script>\n\n  <script type="text/ng-template" id="wizardButtons.html">\n    <div class="wizardButtons align-right">\n      <span>{{currentPageIndex + 1}} / {{pageIds.length}}</span>\n      <button class="btn" ng-click="back()" ng-hide="atFront()">{{buttons.back}}</button>\n      <button class="btn btn-primary next" ng-click="next()" ng-hide="atBack()">{{buttons.next}}</button>\n      <button class="btn btn-primary finish" ng-click="onFinish()" ng-show="atBack()">{{buttons.finish}}</button>\n    </div>\n  </script>\n\n  <script type="text/ng-template" id="wizardPage.html">\n    <div class="wizardPage">\n      <h3></h3>\n      <div class="wizardPageBody">\n      </div>\n    </div>\n  </script>\n\n  <script type="text/ng-template" id="tabElement.html">\n    <div class="tabbable hawtio-form-tabs"></div>\n  </script>\n\n  <script type="text/ng-template" id="tabPage.html">\n    <div class="tab-pane"></div>\n  </script>\n</div>\n'),e.put("plugins/forms2/html/forms2Map.html",'<div>\n  <script type="text/ng-template" id="mapItemModal.html">\n    <div class="modal-header">\n      <h3 class="modal-title">{{header}}</h3>\n    </div>\n    <div class="modal-body">\n      <div class="row">\n        <div ng-show="description" ng-bind-html="description"></div>\n      </div>\n      <div class="row">\n        <div class="col-md-6">\n          <div hawtio-form-2="keySchema" entity="newKeyEntity"></div>\n        </div>\n        <div class="col-md-6">\n          <div hawtio-form-2="valueSchema" entity="newValueEntity"></div>\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <button class="btn btn-primary" ng-click="ok()">OK</button>\n      <button class="btn btn-warning" ng-click="cancel()">Cancel</button>\n    </div>\n  </script>\n  <script type="text/ng-template" id="table.html">\n    <table class="table table-striped">\n      <thead>\n        <tr>\n          <th>\n            Key\n          </th>\n          <th>\n            Value\n          </th>\n          <th class="align-right">\n            <button ng-hide="config.mode == 0" class="button button-success" ng-click="createRow()">\n              <i class="fa fa-plus green" ></i>\n            </button>\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n      </tbody>\n    </table>\n  </script>\n  <script type="text/ng-template" id="mapRowTemplate.html">\n    <tr>\n      <td>\n        <div class="inline form-map-key" hawtio-form-2="keySchema" entity="keys[\'{{key}}\']"></div>\n      </td>\n      <td>\n        <div class="inline form-map-value" hawtio-form-2="valueSchema" entity="values[\'{{key}}\']"></div>\n      </td>\n      <td class="align-right">\n        <button ng-hide="config.mode == 0" class="form-map-edit button button-warning" ng-click="editRow(\'{{key}}\')">\n          <i class="fa fa-pencil yellow"></i>\n        </button>\n        <button ng-hide="config.mode == 0" class="form-map-remove button button-danger" ng-click="deleteRow(\'{{key}}\')">\n          <i class="fa fa-remove red"></i>\n        </button>\n      </td>\n    </tr>\n  </script>\n\n</div>\n'),
e.put("plugins/forms2/html/hidden.html",'<div class="form-group" ng-hide="true">\n  <input type="hidden" ng-model="{{model}}">\n</div>\n'),e.put("plugins/forms2/html/map.html",'<div class="row">\n  <div class="clearfix col-md-12">\n    <div class="row"><h4>{{control.label || maybeHumanize(name)}}</h4></div>\n    <div class="row">\n      <div class="inline-map"></div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/forms2/html/object.html",'<div class="row">\n  <div class="clearfix col-md-12">\n    <div class="inline-object"></div>\n  </div>\n</div>\n'),e.put("plugins/forms2/html/optionArray.html","<option>{{value}}</option>\n"),e.put("plugins/forms2/html/optionConfigObject.html",'<option value="{{value}}">{{label}}</option>\n'),e.put("plugins/forms2/html/optionObject.html",'<option value="{{value}}">{{key}}</option>\n'),e.put("plugins/forms2/html/radio-group-member.html",'<label>\n  <input type="radio" name="" value="">\n</label>\n'),e.put("plugins/forms2/html/radio-top-level.html",'<div class="radio">\n</div>\n'),e.put("plugins/forms2/html/select-horizontal.html",'<div class="form-group">\n  <label class="col-sm-2 control-label">{{control.label || maybeHumanize(name)}}</label>\n  <div class="col-sm-10">\n    <select ng-disabled="config.mode == 0" hawtio-combobox class="form-control" ng-model="{{model}}"></select>\n    <p class="help-block">{{control.description}}</p>\n  </div>\n</div>\n'),e.put("plugins/forms2/html/select.html",'<div class="form-group">\n  <label class="control-label">{{control.label || maybeHumanize(name)}}</label>\n  <select ng-disabled="config.mode == 0" hawtio-combobox class="form-control" ng-model="{{model}}"></select>\n  <p class="help-block">{{control.description}}</p>\n</div>\n'),e.put("plugins/forms2/html/standard-horizontal-input.html",'<div class="form-group">\n  <label ng-hide="{{control.noLabel}}" class="col-sm-2 control-label">{{control.label || maybeHumanize(name)}}</label>\n  <div class="col-sm-10">\n    <input ng-disabled="config.mode == 0" type="" class="form-control" placeholder="{{control.placeholder}}" ng-model="{{model}}">\n    <p class="help-block">{{control.description}}</p>\n  </div>\n</div>\n'),e.put("plugins/forms2/html/standard-input.html",'<div class="form-group">\n  <label ng-hide="{{control.noLabel}}" class="control-label">{{control.label || maybeHumanize(name)}}</label>\n  <input ng-disabled="config.mode == 0" type="" class="form-control" placeholder="{{control.placeholder}}" ng-model="{{model}}">\n  <p class="help-block">{{control.description}}</p>\n</div>\n'),e.put("plugins/forms2/html/static-horizontal-text.html",'<div class="form-group">\n  <label class="col-sm-2 control-label">{{control.label}}</label>\n  <div class="col-sm-10">\n    <p ng-hide="{{model}}" class="form-control-static">{{control.description}}</p>\n    <p ng-show="{{model}}" class="form-control-static" ng-bind="{{model}}"></p>\n  </div>\n</div>\n'),e.put("plugins/forms2/html/static-text.html",'<div class="form-group">\n  <label class="control-label">{{control.label}}</label>\n  <p ng-hide="{{model}}" class="form-control-static">{{control.description}}</p>\n  <p ng-show="{{model}}" class="form-control-static" ng-bind="{{model}}"></p>\n</div>\n')}]),hawtioPluginLoader.addModule("hawtio-forms-templates"),!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.combobox.defaults,n),this.$source=e(t),this.$container=this.setup(),this.$element=this.$container.find("input[type=text]"),this.$target=this.$container.find("input[type=hidden]"),this.$button=this.$container.find(".dropdown-toggle"),this.$menu=e(this.options.menu).appendTo("body"),this.template=this.options.template||this.template,this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.shown=!1,this.selected=!1,this.refresh(),this.transferAttributes(),this.listen()};t.prototype={constructor:t,setup:function(){var t=e(this.template());return this.$source.before(t),this.$source.hide(),t},disable:function(){this.$element.prop("disabled",!0),this.$button.attr("disabled",!0),this.disabled=!0,this.$container.addClass("combobox-disabled")},enable:function(){this.$element.prop("disabled",!1),this.$button.attr("disabled",!1),this.disabled=!1,this.$container.removeClass("combobox-disabled")},parse:function(){var t=this,n={},i=[],r=!1,a="";return this.$source.find("option").each(function(){var o=e(this);return""===o.val()?void(t.options.placeholder=o.text()):(n[o.text()]=o.val(),i.push(o.text()),void(o.prop("selected")&&(r=o.text(),a=o.val())))}),this.map=n,r&&(this.$element.val(r),this.$target.val(a),this.$container.addClass("combobox-selected"),this.selected=!0),i},transferAttributes:function(){this.options.placeholder=this.$source.attr("data-placeholder")||this.options.placeholder,this.$element.attr("placeholder",this.options.placeholder),this.$target.prop("name",this.$source.prop("name")),this.$target.val(this.$source.val()),this.$source.removeAttr("name"),this.$element.attr("required",this.$source.attr("required")),this.$element.attr("rel",this.$source.attr("rel")),this.$element.attr("title",this.$source.attr("title")),this.$element.attr("class",this.$source.attr("class")),this.$element.attr("tabindex",this.$source.attr("tabindex")),this.$source.removeAttr("tabindex"),void 0!==this.$source.attr("disabled")&&this.disable()},select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).trigger("change"),this.$target.val(this.map[e]).trigger("change"),this.$source.val(this.map[e]).trigger("change"),this.$container.addClass("combobox-selected"),this.selected=!0,this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),e(".dropdown-menu").on("mousedown",e.proxy(this.scrollSafety,this)),this.shown=!0,this},hide:function(){return this.$menu.hide(),e(".dropdown-menu").off("mousedown",e.proxy(this.scrollSafety,this)),this.$element.on("blur",e.proxy(this.blur,this)),this.shown=!1,this},lookup:function(e){return this.query=this.$element.val(),this.process(this.source)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},template:function(){return"2"==this.options.bsVersion?'<div class="combobox-container"><input type="hidden" /> <div class="input-append"> <input type="text" autocomplete="off" /> <span class="add-on dropdown-toggle" data-dropdown="dropdown"> <span class="caret"/> <i class="icon-remove"/> </span> </div> </div>':'<div class="combobox-container"> <input type="hidden" /> <div class="input-group"> <input type="text" autocomplete="off" /> <span class="input-group-addon dropdown-toggle" data-dropdown="dropdown"> <span class="caret" /> <span class="glyphicon glyphicon-remove" /> </span> </div> </div>'},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,n=[],i=[],r=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?i.push(t):r.push(t):n.push(t);return n.concat(i,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,i){return t=e(n.options.item).attr("data-value",i),t.find("a").html(n.highlighter(i)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),i=n.next();i.length||(i=e(this.$menu.find("li")[0])),i.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},toggle:function(){this.disabled||(this.$container.hasClass("combobox-selected")?(this.clearTarget(),this.triggerChange(),this.clearElement()):this.shown?this.hide():(this.clearElement(),this.lookup()))},scrollSafety:function(e){"UL"==e.target.tagName&&this.$element.off("blur")},clearElement:function(){this.$element.val("").focus()},clearTarget:function(){this.$source.val(""),this.$target.val(""),this.$container.removeClass("combobox-selected"),this.selected=!1},triggerChange:function(){this.$source.trigger("change")},refresh:function(){this.source=this.parse(),this.options.items=this.source.length},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this)),this.$button.on("click",e.proxy(this.toggle,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 39:case 38:case 37:case 36:case 35:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.clearTarget(),this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){var t=this;this.focused=!1;var n=this.$element.val();this.selected||""===n||(this.$element.val(""),this.$source.val("").trigger("change"),this.$target.val("").trigger("change")),!this.mousedover&&this.shown&&setTimeout(function(){t.hide()},200)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1}},e.fn.combobox=function(n){return this.each(function(){var i=e(this),r=i.data("combobox"),a="object"==typeof n&&n;r||i.data("combobox",r=new t(this,a)),"string"==typeof n&&r[n]()})},e.fn.combobox.defaults={bsVersion:"3",menu:'<ul class="typeahead typeahead-long dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},e.fn.combobox.Constructor=t}(window.jQuery),angular.module("dangle",[]),angular.module("dangle").directive("fsArea",[function(){"use strict";return{restrict:"E",scope:{onClick:"=",width:"=",height:"=",bind:"=",label:"@",field:"@",duration:"@",delay:"@",plot:"@",pointRadius:"@"},link:function(e,t,n){var i={top:20,right:20,bottom:30,left:80},r=e.width||1280,a=e.height||300,o=(n.interpolate||"false",n.label||"Frequency"),s=n["class"]||"";r=r-i.left-i.right,a=a-i.top-i.bottom;var l=d3.time.scale().range([0,r]),c=d3.scale.linear().range([a,0]),u=d3.svg.axis().scale(l).orient("bottom"),d=d3.svg.axis().scale(c).orient("left"),p=d3.svg.line().x(function(e){return l(e.time)}).y(function(e){return c(e.count)}),h=d3.svg.area().x(function(e){return l(e.time)}).y0(a).y1(function(e){return c(e.count)});"true"==n.interpolate&&(p.interpolate("cardinal"),h.interpolate("cardinal"));var f=d3.select(t[0]).append("svg").attr("preserveAspectRatio","xMinYMin").attr("viewBox","0 0 "+(r+i.left+i.right)+" "+(a+i.top+i.bottom)).append("g").attr("transform","translate("+i.left+","+i.top+")");f.append("path").datum([]).attr("class","area fill "+s).attr("d",h),f.append("g").attr("class","area x axis "+s).attr("transform","translate(0,"+a+")").call(u),f.append("g").attr("class","area y axis "+s).call(d).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(o),f.append("path").datum([]).attr("class","area line "+s).attr("d",p),e.$watch("bind",function(t){var i=e.duration||0,r=(e.delay||0,e.plot||"true"),a=e.pointRadius||8,o=e.field||n.bind.split(".").pop().toLowerCase();if(t){t=t.entries||[],l.domain(d3.extent(t,function(e){return e.time})),c.domain([0,d3.max(t,function(e){return e.count})]);var g=f.transition().duration(i);if(g.select(".area").attr("d",h(t)),g.select(".line").attr("d",p(t)),"true"==r){var m=f.selectAll("circle").data(t.filter(function(e){return e.count}),function(e){return Math.random()});m.enter().append("circle").attr("class","area line points "+s).attr("cursor","pointer").attr("cx",p.x()).attr("cy",p.y()).style("opacity",0).transition().duration(i).style("opacity",1).attr("cx",p.x()).attr("cy",p.y()).attr("r",a),m.on("mousedown",function(t){e.$apply(function(){(e.onClick||angular.noop)(o,t.time)})}),m.exit().remove()}g.select(".x").call(u),g.select(".y").call(d)}})}}}]),angular.module("dangle").directive("fsBar",[function(){"user strict";return{restrict:"E",scope:{onClick:"=",width:"=",height:"=",bind:"=",duration:"@"},link:function(e,t,n){var i={top:10,right:10,bottom:10,left:10},r=e.width||300,a=e.height||1020;r=r-i.left-i.right,a=a-i.top-i.bottom;var o=n["class"]||"",s=n.align||"left",l="right"===s?"xMaxYMin":"xMinYMin",c=d3.scale.linear().range([0,r]),u=d3.scale.ordinal().rangeBands([0,a],.1),d=d3.select(t[0]).append("svg").attr("preserveAspectRatio",l+" meet").attr("viewBox","0 0 "+(r+i.left+i.right)+" "+(a+i.top+i.bottom)).append("g").attr("transform","translate("+i.left+","+i.top+")");e.$watch("bind",function(t){var i=e.duration||0,a=(e.delay||0,e.field||n.bind.split(".").pop().toLowerCase());if(t){t=t.terms||[],c.domain([0,2*d3.max(t,function(e){return e.count})]),u.domain(t.map(function(e){return e.term}));var l=d.selectAll("rect").data(t,function(e){return Math.random()});l.enter().append("rect").attr("class","bar rect "+o).attr("cursor","pointer").attr("y",function(e){return u(e.term)}).attr("height",u.rangeBand()).attr("x",function(e){return"right"===s?r:0}).transition().duration(i).attr("width",function(e){return c(e.count)}).attr("x",function(e){return"right"===s?r-c(e.count):0}),l.on("mousedown",function(t){e.$apply(function(){(e.onClick||angular.noop)(a,t.term)})}),l.exit().remove();var p=d.selectAll("text").data(t,function(e){return Math.random()});p.enter().append("text").attr("class","bar text "+o).attr("cursor","pointer").attr("y",function(e){return u(e.term)+u.rangeBand()/2}).attr("x",function(e){return"right"===s?r-c(e.count)-3:c(e.count)+3}).attr("dy",".35em").attr("text-anchor",function(e){return"right"===s?"end":"start"}).text(function(e){return"right"===s?"("+e.count+") "+e.term:e.term+" ("+e.count+")"}),p.on("mousedown",function(t){e.$apply(function(){(e.onClick||angular.noop)(a,t.term)})}),p.exit().remove()}})}}}]),angular.module("dangle").directive("fsColumn",[function(){"use strict";return{restrict:"E",scope:{fontSize:"=",onClick:"=",width:"=",height:"=",bind:"="},link:function(e,t,n){var i={top:20,right:20,bottom:30,left:40},r=e.width||960,a=e.height||500,o=n.color||"steelblue",s=n.fontColor||"#000",l=e.fontSize||14,c=n.label||"Frequency";void 0==n.field&&(n.field=n.bind.split(".").pop().toLowerCase()),r=r-i.left-i.right,a=a-i.top-i.bottom;var u=d3.scale.ordinal().rangeRoundBands([0,r],.1),d=d3.scale.linear().range([a,0]),p=d3.svg.axis().scale(u).orient("bottom"),h=d3.svg.axis().scale(d).orient("left"),f=d3.select(t[0]).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+(r+i.left+i.right)+" "+(a+i.top+i.bottom)).append("g").attr("transform","translate("+i.left+","+i.top+")");e.$watch("bind",function(t){t&&(t=t.terms||[],f.selectAll("*").remove(),u.domain(t.map(function(e){return e.term})),d.domain([0,d3.max(t,function(e){return e.count})]),f.append("g").attr("fill",s).attr("font-size",l).attr("class","x axis").attr("transform","translate(0,"+a+")").call(p),f.append("g").attr("class","y axis").attr("font-size",l).attr("fill",s).call(h).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".51em").style("text-anchor","end").text(c),f.selectAll(".bar").data(t).enter().append("rect").attr("fill",o).attr("x",function(e){return u(e.term)}).attr("width",u.rangeBand()).attr("y",function(e){return d(e.count)}).attr("height",function(e){return a-d(e.count)}).on("mousedown",function(t){e.$apply(function(){(e.onClick||angular.noop)(n.field,t.term)})}))})}}}]),angular.module("dangle").directive("fsDateHisto",[function(){"use strict";return{restrict:"E",scope:{onClick:"=",width:"=",height:"=",bind:"=",label:"@",field:"@",duration:"@",delay:"@",interval:"@"},link:function(e,t,n){var i={top:20,right:20,bottom:30,left:80},r=e.width||1280,a=e.height||300,o=n.label||"Frequency",s=n["class"]||"";r=r-i.left-i.right,a=a-i.top-i.bottom;var l=d3.time.scale().range([0,r]),c=d3.scale.linear().range([a,0]),u=d3.svg.axis().scale(l).orient("bottom"),d=d3.svg.axis().scale(c).orient("left"),p=d3.select(t[0]).append("svg").attr("preserveAspectRatio","xMinYMin").attr("viewBox","0 0 "+(r+i.left+i.right)+" "+(a+i.top+i.bottom)).append("g").attr("transform","translate("+i.left+","+i.top+")");p.append("g").attr("class","histo x axis "+s).attr("transform","translate(0,"+a+")").call(u),p.append("g").attr("class","histo y axis "+s).call(d).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".51em").style("text-anchor","end").text(o),e.$watch("bind",function(t){var i=e.duration||0,o=e.delay||0,h=e.field||n.bind.split(".").pop().toLowerCase(),f=e.interval||"day";if(t){t=t.entries||[];var g=r/t.length-2,m=864e5;switch(f.toLowerCase()){case"minute":m=6e4;break;case"hour":m=36e5;break;case"day":m=864e5;break;case"week":m=6048e5;break;case"month":m=263e7;break;case"year":m=3156e7}l.domain([d3.min(t,function(e){return e.time}),d3.max(t,function(e){return e.time})+m]),c.domain([0,d3.max(t,function(e){return e.count})]);var v=p.transition().duration(i),y=p.selectAll("rect").data(t,function(e){return Math.random()});y.enter().append("rect").attr("class","histo rect "+s).attr("cursor","pointer").attr("x",function(e){return l(e.time)}).attr("y",function(e){return a}).attr("width",g).transition().delay(function(e,t){return t*o}).duration(i).attr("height",function(e){return a-c(e.count)}).attr("y",function(e){return c(e.count)}),y.on("mousedown",function(t){e.$apply(function(){(e.onClick||angular.noop)(h,t.time)})}),y.exit().remove(),v.select(".x").call(u),v.select(".y").call(d)}},!0)}}}]),angular.module("dangle").directive("fsDonut",[function(){"use strict";return{restrict:"E",scope:{outerRadius:"=",innerRadius:"=",fontSize:"=",domain:"=",colorMap:"=",onClick:"=",bind:"=",duration:"@"},link:function(e,t,n){var i=e.outerRadius||200,r=e.innerRadius||0,a=(e.fontSize||14,n.fontColor||"#fff",void 0);void 0==n.field&&(n.field=n.bind.split(".").pop().toLowerCase()),void 0===e.colorMap?(a=d3.scale.category20c(),void 0!==e.domain&&a.domain(e.domain)):a=function(t){return e.colorMap[t]};var o=3*i+30,s=i*(/Trident\/7\./.test(navigator.userAgent)&&e.$parent.inDashboard?.25:3),l=d3.svg.arc().outerRadius(i-10).innerRadius(r),c=d3.layout.pie().sort(null).value(function(e){return e.count}),u="xMinYMin meet";/Trident\/7\./.test(navigator.userAgent)&&e.$parent.inDashboard&&(u="xMinYMax meet");var d=d3.select(t[0]).append("svg").attr("preserveAspectRatio",u).attr("viewBox","0 0 "+o+" "+s),p=d.append("g").attr("transform","translate("+o/2+","+s/2+") rotate(180) scale(-1, -1)"),h=d.append("g").attr("class","label_group").attr("transform","translate("+o/2+","+s/2+")");e.$watch("bind",function(t){function r(e,t){var t=d3.interpolate(this._current,e);return this._current=t(0),function(e){return l(t(e))}}function o(e,t){var n=(this._current.startAngle+this._current.endAngle-Math.PI)/2,r=(e.startAngle+e.endAngle-Math.PI)/2,a=d3.interpolateNumber(n,r);return function(e){var t=a(e);return"translate("+Math.cos(t)*(i+f)+","+Math.sin(t)*(i+f)+")"}}var s=e.duration||0,u=function(e){return(e.startAngle+e.endAngle)/2<Math.PI?"beginning":"end"},f=14;if(t){t=t.terms||[];for(var g=c(t),m=0,v=0;v<t.length;v++)m+=t[v].count;if(m>0){var y=p.selectAll("path").data(g);y.enter().append("path").attr("d",l).attr("stroke","#fff").attr("stroke-width","1.5").attr("cursor","pointer").style("fill",function(e){return a(e.data.term)}).each(function(e){this._current=e}).on("mousedown",function(t){e.$apply(function(){(e.onClick||angular.noop)(n.field,t.data.term)})}),y.transition().duration(s).attrTween("d",r);var b=h.selectAll("line").data(g);b.enter().append("line").attr("x1",0).attr("x2",0).attr("y1",-i-3).attr("y2",-i-8).attr("stroke","grey").attr("stroke-width",2).attr("transform",function(e){return"rotate("+(e.startAngle+e.endAngle)/2*(180/Math.PI)+")"}).each(function(e){this._current=e}),b.transition().duration(750).attr("transform",function(e){return"rotate("+(e.startAngle+e.endAngle)/2*(180/Math.PI)+")"}),b.exit().remove();var w=h.selectAll("text.value").data(g).attr("dy",function(e){return(e.startAngle+e.endAngle)/2>Math.PI/2&&(e.startAngle+e.endAngle)/2<1.5*Math.PI?17:-17}).attr("text-anchor",u).text(function(e){var t=e.value/m*100;return t.toFixed(1)+"%"});w.enter().append("text").attr("class","value").attr("font-size",20).attr("font-weight","bold").attr("transform",function(e){return"translate("+Math.cos((e.startAngle+e.endAngle-Math.PI)/2)*(i+f)+","+Math.sin((e.startAngle+e.endAngle-Math.PI)/2)*(i+f)+")"}).attr("dy",function(e){return(e.startAngle+e.endAngle)/2>Math.PI/2&&(e.startAngle+e.endAngle)/2<1.5*Math.PI?17:-17}).attr("text-anchor",u).text(function(e){var t=e.value/m*100;return t.toFixed(1)+"%"}).each(function(e){this._current=e}),w.transition().duration(s).attrTween("transform",o),w.exit().remove();var x=h.selectAll("text.units").data(g).attr("dy",function(e){return(e.startAngle+e.endAngle)/2>Math.PI/2&&(e.startAngle+e.endAngle)/2<1.5*Math.PI?36:2}).attr("text-anchor",function(e){return(e.startAngle+e.endAngle)/2<Math.PI?"beginning":"end"}).text(function(e){return"T"===e.data.term?"TRUE ("+e.value+")":"F"===e.data.term?"FALSE ("+e.value+")":e.data.term+" ("+e.value+")"});x.enter().append("text").attr("class","units").attr("font-size",16).attr("stroke","none").attr("fill","#000").attr("transform",function(e){return"translate("+Math.cos((e.startAngle+e.endAngle-Math.PI)/2)*(i+f)+","+Math.sin((e.startAngle+e.endAngle-Math.PI)/2)*(i+f)+")"}).attr("dy",function(e){return(e.startAngle+e.endAngle)/2>Math.PI/2&&(e.startAngle+e.endAngle)/2<1.5*Math.PI?36:2}).attr("text-anchor",u).text(function(e){return"T"===e.data.term?"TRUE ("+e.value+")":"F"===e.data.term?"FALSE ("+e.value+")":e.data.term+" ("+e.value+")"}).each(function(e){this._current=e}),x.transition().duration(s).attrTween("transform",o),x.exit().remove()}else d.selectAll("path").remove(),h.selectAll("line").remove(),h.selectAll("text.value").remove(),h.selectAll("text.units").remove()}})}}}]),angular.module("dangle").directive("fsPie",[function(){"use strict";return{restrict:"E",scope:{outerRadius:"=",innerRadius:"=",fontSize:"=",domain:"=",colorMap:"=",onClick:"=",bind:"="},link:function(e,t,n){var i=e.outerRadius||200,r=e.innerRadius||0,a=e.fontSize||14,o=n.fontColor||"#fff",s=void 0;void 0==n.field&&(n.field=n.bind.split(".").pop().toLowerCase()),void 0==e.colorMap?(s=d3.scale.category20c(),void 0!==e.domain&&s.domain(e.domain)):s=function(t){return e.colorMap[t]};var l=d3.svg.arc().outerRadius(i-10).innerRadius(r),c=d3.layout.pie().sort(null).value(function(e){return e.count}),u=d3.select(t[0]).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+2*i+" "+2*i).append("g").attr("transform","translate("+i+","+i+") rotate(180) scale(-1, -1)");e.$watch("bind",function(t){if(t){t=t.terms||[],u.selectAll("*").remove();var i=u.selectAll(".arc").data(c(t)).enter().append("g").attr("class","arc").on("mousedown",function(t){e.$apply(function(){(e.onClick||angular.noop)(n.field,t.data.term)})});i.append("path").attr("d",l).style("fill",function(e){return s(e.data.term)}),i.append("text").attr("transform",function(e){return"translate("+l.centroid(e)+")"}).attr("dy",".55em").style("text-anchor","middle").attr("fill",o).attr("font-size",a).text(function(e){return e.data.term})}})}}}]);var _canLog=!0,getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;!function($){function getDtNodeFromElement(e){return alert("getDtNodeFromElement is deprecated"),$.ui.dynatree.getNode(e)}function noop(){}function _initDragAndDrop(e){var t=e.options.dnd||null;t&&(t.onDragStart||t.onDrop)&&_registerDnd(),t&&t.onDragStart&&e.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:!0,helper:function(e){var t=$.ui.dynatree.getNode(e.target);return t?t.tree._onDragEvent("helper",t,null,e,null,null):"<div></div>"},start:function(e,t){var n=t.helper.data("dtSourceNode");return!!n},_last:null}),t&&t.onDrop&&e.$tree.droppable({addClasses:!1,tolerance:"intersect",greedy:!1,_last:null})}var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(e,t,n){this.parent=e,this.tree=t,"string"==typeof n&&(n={title:n}),void 0===n.key&&(n.key="_"+t._nodeCount++),this.data=$.extend({},$.ui.dynatree.nodedatadefaults,n),this.li=null,this.span=null,this.ul=null,this.childList=null,this._isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(e,t){var n=$.extend({},this.data);if(n.activate=this.tree.activeNode===this,n.focus=this.tree.focusNode===this,n.expand=this.bExpanded,n.select=this.bSelected,t&&t(n),e&&this.childList){n.children=[];for(var i=0,r=this.childList.length;r>i;i++)n.children.push(this.childList[i].toDict(!0,t))}else delete n.children;return n},fromDict:function(e){var t=e.children;return void 0===t?(this.data=$.extend(this.data,e),void this.render()):(e=$.extend({},e),e.children=void 0,this.data=$.extend(this.data,e),this.removeChildren(),void this.addChild(t))},_getInnerHtml:function(){var e,t=this.tree,n=t.options,i=t.cache,r=this.getLevel(),a=this.data,o="";r<n.minExpandLevel?r>1&&(o+=i.tagConnector):o+=this.hasChildren()!==!1?i.tagExpander:i.tagConnector,n.checkbox&&a.hideCheckbox!==!0&&!a.isStatusNode&&(o+=i.tagCheckbox),a.icon?(e="/"===a.icon.charAt(0)?a.icon:n.imagePath+a.icon,o+="<img src='"+e+"' alt='' />"):a.icon===!1||(o+=i.tagNodeIcon);var s="";if(n.onCustomRender&&(s=n.onCustomRender.call(t,this)||""),!s){var l=a.tooltip?' title="'+a.tooltip.replace(/\"/g,"&quot;")+'"':"",c=a.href||"#";s=n.noLink||a.noLink?'<span style="display:inline-block;" class="'+n.classNames.title+'"'+l+">"+a.title+"</span>":'<a href="'+c+'" class="'+n.classNames.title+'"'+l+">"+a.title+"</a>"}return o+=s},_fixOrder:function(){var e=this.childList;if(e&&this.ul)for(var t=this.ul.firstChild,n=0,i=e.length-1;i>n;n++){var r=e[n],a=t.dtnode;r!==a?(this.tree.logDebug("_fixOrder: mismatch at index "+n+": "+r+" != "+a),this.ul.insertBefore(r.li,a.li)):t=t.nextSibling}},render:function(e,t){var n=this.tree,i=this.parent,r=this.data,a=n.options,o=a.classNames,s=this.isLastSibling(),l=!1;if(i||this.ul){if(i){this.li||(l=!0,this.li=document.createElement("li"),this.li.dtnode=this,r.key&&a.generateIds&&(this.li.id=a.idPrefix+r.key),this.span=document.createElement("span"),this.span.className=o.title,this.li.appendChild(this.span),i.ul||(i.ul=document.createElement("ul"),i.ul.style.display="none",i.li.appendChild(i.ul)),i.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var c=[];c.push(o.node),r.isFolder&&c.push(o.folder),this.bExpanded&&c.push(o.expanded),this.hasChildren()!==!1&&c.push(o.hasChildren),r.isLazy&&null===this.childList&&c.push(o.lazy),s&&c.push(o.lastsib),this.bSelected&&c.push(o.selected),this.hasSubSel&&c.push(o.partsel),n.activeNode===this&&c.push(o.active),r.addClass&&c.push(r.addClass),c.push(o.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(r.isLazy&&null===this.childList?"d":"")+(s?"l":"")),c.push(o.combinedIconPrefix+(this.bExpanded?"e":"c")+(r.isFolder?"f":"")),this.span.className=c.join(" "),this.li.className=s?o.lastsib:"",l&&a.onCreate&&a.onCreate.call(n,this,this.span),a.onRender&&a.onRender.call(n,this,this.span)}}else this.li=this.span=null,this.ul=document.createElement("ul"),this.ul.className=a.minExpandLevel>1?o.container+" "+o.noConnector:o.container;if((this.bExpanded||t===!0)&&this.childList){for(var u=0,d=this.childList.length;d>u;u++)this.childList[u].render(!1,t);this._fixOrder()}if(this.ul){var p="none"===this.ul.style.display,h=!!this.bExpanded;if(e&&a.fx&&p===h){var f=a.fx.duration||200;$(this.ul).animate(a.fx,f)}else this.ul.style.display=this.bExpanded||!i?"":"none"}},getKeyPath:function(e){var t=[];return this.visitParents(function(e){e.parent&&t.unshift(e.data.key)},!e),"/"+t.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return void 0===this.hasChildren()?void 0:this.childList},hasChildren:function(){return this.data.isLazy?null===this.childList||void 0===this.childList?void 0:0===this.childList.length?!1:1===this.childList.length&&this.childList[0].isStatusNode()?void 0:!0:!!this.childList},isFirstSibling:function(){var e=this.parent;return!e||e.childList[0]===this},isLastSibling:function(){var e=this.parent;return!e||e.childList[e.childList.length-1]===this},isLoading:function(){return!!this._isLoading},getPrevSibling:function(){if(!this.parent)return null;for(var e=this.parent.childList,t=1,n=e.length;n>t;t++)if(e[t]===this)return e[t-1];return null},getNextSibling:function(){if(!this.parent)return null;for(var e=this.parent.childList,t=0,n=e.length-1;n>t;t++)if(e[t]===this)return e[t+1];return null},isStatusNode:function(){return this.data.isStatusNode===!0},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(e){if(!e)return!1;for(var t=this.parent;t;){if(t===e)return!0;t=t.parent}return!1},countChildren:function(){var e=this.childList;if(!e)return 0;for(var t=e.length,n=0,i=t;i>n;n++){var r=e[n];t+=r.countChildren()}return t},sortChildren:function(e,t){var n=this.childList;if(n){if(e=e||function(e,t){var n=e.data.title.toLowerCase(),i=t.data.title.toLowerCase();return n===i?0:n>i?1:-1},n.sort(e),t)for(var i=0,r=n.length;r>i;i++)n[i].childList&&n[i].sortChildren(e,"$norender$");"$norender$"!==t&&this.render()}},_setStatusNode:function(e){var t=this.childList?this.childList[0]:null;if(e)t?(e.isStatusNode=!0,e.key="_statusNode",t.data=e,t.render()):(e.isStatusNode=!0,e.key="_statusNode",t=this.addChild(e));else if(t&&t.isStatusNode()){try{this.ul&&(this.ul.removeChild(t.li),t.li=null)}catch(n){}1===this.childList.length?this.childList=[]:this.childList.shift()}},setLazyNodeStatus:function(e,t){var n=t&&t.tooltip?t.tooltip:null,i=t&&t.info?" ("+t.info+")":"";switch(e){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this._isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this._isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+i,tooltip:n,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this._isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+i,tooltip:n,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+e+"'."}},_parentList:function(e,t){for(var n=[],i=t?this:this.parent;i;)(e||i.parent)&&n.unshift(i),
i=i.parent;return n},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},_getTypeForOuterNodeEvent:function(e){var t=this.tree.options.classNames,n=e.target;if(n.className.indexOf(t.node)<0)return null;for(var i=e.pageX-n.offsetLeft,r=e.pageY-n.offsetTop,a=0,o=n.childNodes.length;o>a;a++){var s=n.childNodes[a],l=s.offsetLeft-n.offsetLeft,c=s.offsetTop-n.offsetTop,u=s.clientWidth,d=s.clientHeight;if(i>=l&&l+u>=i&&r>=c&&c+d>=r){if(s.className==t.title)return"title";if(s.className==t.expander)return"expander";if(s.className==t.checkbox)return"checkbox";if(s.className==t.nodeIcon)return"icon"}}return"prefix"},getEventTargetType:function(e){var t=e&&e.target?e.target.className:"",n=this.tree.options.classNames;return t===n.title?"title":t===n.expander?"expander":t===n.checkbox?"checkbox":t===n.nodeIcon?"icon":t===n.empty||t===n.vline||t===n.connector?"prefix":t.indexOf(n.node)>=0?this._getTypeForOuterNodeEvent(e):null},isVisible:function(){for(var e=this._parentList(!0,!1),t=0,n=e.length;n>t;t++)if(!e[t].bExpanded)return!1;return!0},makeVisible:function(){for(var e=this._parentList(!0,!1),t=0,n=e.length;n>t;t++)e[t]._expand(!0)},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(e,t){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",e,t,this);var n=this.tree.options;if(!(this.data.isStatusNode||t&&n.onQueryActivate&&n.onQueryActivate.call(this.tree,e,this)===!1))if(e){if(this.tree.activeNode){if(this.tree.activeNode===this)return;this.tree.activeNode.deactivate()}n.activeVisible&&this.makeVisible(),this.tree.activeNode=this,n.persist&&$.cookie(n.cookieId+"-active",this.data.key,n.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(n.classNames.active),t&&n.onActivate&&n.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this){if(n.onQueryActivate&&n.onQueryActivate.call(this.tree,!1,this)===!1)return;$(this.span).removeClass(n.classNames.active),n.persist&&$.cookie(n.cookieId+"-active","",n.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,t&&n.onDeactivate&&n.onDeactivate.call(this.tree,this)}},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var e=!0,t=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:e=!1,t=!0;break;case 3:e=t=!0}null===this.parent&&(t=!1),t&&(this.toggleExpand(),this.focus()),e&&this.activate()},_setSubSel:function(e){e?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_updatePartSelectionState:function(){var e;if(!this.hasChildren())return e=this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode,this._setSubSel(!1),e;var t,n,i=this.childList,r=!0,a=!0;for(t=0,n=i.length;n>t;t++){var o=i[t],s=o._updatePartSelectionState();s!==!1&&(a=!1),s!==!0&&(r=!1)}return e=r?!0:a?!1:void 0,this._setSubSel(void 0===e),this.bSelected=e===!0,e},_fixSelectionState:function(){var e,t,n;if(this.bSelected)for(this.visit(function(e){e.parent._setSubSel(!0),e.data.unselectable||e._select(!0,!1,!1)}),e=this.parent;e;){e._setSubSel(!0);var i=!0;for(t=0,n=e.childList.length;n>t;t++){var r=e.childList[t];if(!r.bSelected&&!r.data.isStatusNode&&!r.data.unselectable){i=!1;break}}i&&e._select(!0,!1,!1),e=e.parent}else for(this._setSubSel(!1),this.visit(function(e){e._setSubSel(!1),e._select(!1,!1,!1)}),e=this.parent;e;){e._select(!1,!1,!1);var a=!1;for(t=0,n=e.childList.length;n>t;t++)if(e.childList[t].bSelected||e.childList[t].hasSubSel){a=!0;break}e._setSubSel(a),e=e.parent}},_select:function(e,t,n){var i=this.tree.options;this.data.isStatusNode||this.bSelected!==e&&(t&&i.onQuerySelect&&i.onQuerySelect.call(this.tree,e,this)===!1||(1==i.selectMode&&e&&this.tree.visit(function(e){return e.bSelected?(e._select(!1,!1,!1),!1):void 0}),this.bSelected=e,e?(i.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(i.classNames.selected),n&&3===i.selectMode&&this._fixSelectionState(),t&&i.onSelect&&i.onSelect.call(this.tree,!0,this)):(i.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(i.classNames.selected),n&&3===i.selectMode&&this._fixSelectionState(),t&&i.onSelect&&i.onSelect.call(this.tree,!1,this))))},select:function(e){return this.data.unselectable?this.bSelected:this._select(e!==!1,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return!!this.data.isLazy},_loadContent:function(){try{var e=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===e.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(t){this.tree.logWarning("_loadContent: failed - %o",t),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+t})}},_expand:function(e,t){if(this.bExpanded===e)return void this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",e,this);this.tree.logDebug("dtnode._expand(%o) - %o",e,this);var n=this.tree.options;if(!e&&this.getLevel()<n.minExpandLevel)return void this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",e,this);if(!n.onQueryExpand||n.onQueryExpand.call(this.tree,e,this)!==!1){this.bExpanded=e,n.persist&&(e?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var i=!(this.data.isLazy&&null===this.childList||this._isLoading||t);if(this.render(i),this.bExpanded&&this.parent&&n.autoCollapse)for(var r=this._parentList(!1,!0),a=0,o=r.length;o>a;a++)r[a].collapseSiblings();return n.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate(),e&&this.data.isLazy&&null===this.childList&&!this._isLoading?void this._loadContent():void(n.onExpand&&n.onExpand.call(this.tree,e,this))}},isExpanded:function(){return this.bExpanded},expand:function(e){e=e!==!1,(this.childList||this.data.isLazy||!e)&&(null!==this.parent||e)&&this._expand(e)},scheduleAction:function(e,t){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var n=this;switch(e){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){n.tree.logDebug("setTimeout: trigger expand"),n.expand(!0)},t);break;case"activate":this.tree.timer=setTimeout(function(){n.tree.logDebug("setTimeout: trigger activate"),n.activate()},t);break;default:throw"Invalid mode "+e}this.tree.logDebug("setTimeout(%s, %s): %s",e,t,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(null!==this.parent)for(var e=this.parent.childList,t=0,n=e.length;n>t;t++)e[t]!==this&&e[t].bExpanded&&e[t]._expand(!1)},_onClick:function(e){var t=this.getEventTargetType(e);if("expander"===t)this.toggleExpand(),this.focus();else if("checkbox"===t)this.toggleSelect(),this.focus();else{this._userActivate();var n=this.span.getElementsByTagName("a");if(!n[0])return!0;$.browser.msie&&parseInt($.browser.version,10)<9||n[0].focus()}e.preventDefault()},_onDblClick:function(e){},_onKeydown:function(e){var t,n=!0;switch(e.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:this.bExpanded||!this.childList&&!this.data.isLazy?this.childList&&this.childList[0].focus():(this.toggleExpand(),this.focus());break;case 38:for(t=this.getPrevSibling();t&&t.bExpanded&&t.childList;)t=t.childList[t.childList.length-1];!t&&this.parent&&this.parent.parent&&(t=this.parent),t&&t.focus();break;case 40:if(this.bExpanded&&this.childList)t=this.childList[0];else for(var i=this._parentList(!1,!0),r=i.length-1;r>=0&&!(t=i[r].getNextSibling());r--);t&&t.focus();break;default:n=!1}n&&e.preventDefault()},_onKeypress:function(e){},_onFocus:function(e){var t=this.tree.options;"blur"==e.type||"focusout"==e.type?(t.onBlur&&t.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(t.classNames.focused),this.tree.tnFocused=null,t.persist&&$.cookie(t.cookieId+"-focus","",t.cookie)):("focus"==e.type||"focusin"==e.type)&&(this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(t.classNames.focused)),this.tree.tnFocused=this,t.onFocus&&t.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(t.classNames.focused),t.persist&&$.cookie(t.cookieId+"-focus",this.data.key,t.cookie))},visit:function(e,t){var n=!0;if(t===!0&&(n=e(this),n===!1||"skip"==n))return n;if(this.childList)for(var i=0,r=this.childList.length;r>i&&(n=this.childList[i].visit(e,!0),n!==!1);i++);return n},visitParents:function(e,t){if(t&&e(this)===!1)return!1;for(var n=this.parent;n;){if(e(n)===!1)return!1;n=n.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";return this.parent.removeChild(this)},removeChild:function(e){var t=this.childList;if(1==t.length){if(e!==t[0])throw"removeChild: invalid child";return this.removeChildren()}e===this.tree.activeNode&&e.deactivate(),this.tree.options.persist&&(e.bSelected&&this.tree.persistence.clearSelect(e.data.key),e.bExpanded&&this.tree.persistence.clearExpand(e.data.key)),e.removeChildren(!0),this.ul.removeChild(e.li);for(var n=0,i=t.length;i>n;n++)if(t[n]===e){this.childList.splice(n,1);break}},removeChildren:function(e,t){this.tree.logDebug("%s.removeChildren(%o)",this,e);var n=this.tree,i=this.childList;if(i){for(var r=0,a=i.length;a>r;r++){var o=i[r];o!==n.activeNode||t||o.deactivate(),this.tree.options.persist&&!t&&(o.bSelected&&this.tree.persistence.clearSelect(o.data.key),o.bExpanded&&this.tree.persistence.clearExpand(o.data.key)),o.removeChildren(!0,t),this.ul&&$("li",$(this.ul)).remove()}this.childList=null}e||(this._isLoading=!1,this.render())},setTitle:function(e){this.fromDict({title:e})},reload:function(e){throw"Use reloadChildren() instead"},reloadChildren:function(e){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(e){var t=this,n="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(n,function(i,r,a){if(t.tree.$tree.unbind(n),t.tree.logDebug("loaded %o, %o, %o",i,r,a),r!==t)throw"got invalid load event";e.call(t.tree,r,a)})}this.removeChildren(),this._loadContent()},_loadKeyPath:function(e,t){var n=this.tree;if(n.logDebug("%s._loadKeyPath(%s)",this,e),""===e)throw"Key path must not be empty";var i=e.split(n.options.keyPathSeparator);if(""===i[0])throw"Key path must be relative (don't start with '/')";var r=i.shift();if(this.childList)for(var a=0,o=this.childList.length;o>a;a++){var s=this.childList[a];if(s.data.key===r){if(0===i.length)t.call(n,s,"ok");else if(!s.data.isLazy||null!==s.childList&&void 0!==s.childList)t.call(n,s,"loaded"),s._loadKeyPath(i.join(n.options.keyPathSeparator),t);else{n.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,e,s);var l=this;s.reloadChildren(function(r,a){a?(n.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",r,e,r),t.call(n,s,"loaded"),r._loadKeyPath(i.join(n.options.keyPathSeparator),t)):(n.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",l,e),t.call(n,s,"error"))})}return}}t.call(n,void 0,"notfound",r,0===i.length),n.logWarning("Node not found: "+r)},resetLazy:function(){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1),this.removeChildren()},_addChildNode:function(e,t){var n=this.tree,i=n.options,r=n.persistence;if(e.parent=this,null===this.childList?this.childList=[]:t||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(i.classNames.lastsib),t){var a=$.inArray(t,this.childList);if(0>a)throw"<beforeNode> must be a child of <this>";this.childList.splice(a,0,e)}else this.childList.push(e);var o=n.isInitializing();if(i.persist&&r.cookiesFound&&o?(r.activeKey===e.data.key&&(n.activeNode=e),r.focusedKey===e.data.key&&(n.focusNode=e),e.bExpanded=$.inArray(e.data.key,r.expandedKeyList)>=0,e.bSelected=$.inArray(e.data.key,r.selectedKeyList)>=0):(e.data.activate&&(n.activeNode=e,i.persist&&(r.activeKey=e.data.key)),e.data.focus&&(n.focusNode=e,i.persist&&(r.focusedKey=e.data.key)),e.bExpanded=e.data.expand===!0,e.bExpanded&&i.persist&&r.addExpand(e.data.key),e.bSelected=e.data.select===!0,e.bSelected&&i.persist&&r.addSelect(e.data.key)),i.minExpandLevel>=e.getLevel()&&(this.bExpanded=!0),e.bSelected&&3==i.selectMode)for(var s=this;s;)s.hasSubSel||s._setSubSel(!0),s=s.parent;return n.bEnableUpdate&&this.render(),e},addChild:function(e,t){if("string"==typeof e)throw"Invalid data type for "+e;if(e&&0!==e.length){if(e instanceof DynaTreeNode)return this._addChildNode(e,t);e.length||(e=[e]);for(var n=this.tree.enableUpdate(!1),i=null,r=0,a=e.length;a>r;r++){var o=e[r],s=this._addChildNode(new DynaTreeNode(this,this.tree,o),t);i||(i=s),o.children&&s.addChild(o.children,null)}return this.tree.enableUpdate(n),i}},append:function(e){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(e,null)},appendAjax:function(e){var t=this;if(this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading),e.debugLazyDelay){var n=e.debugLazyDelay;return e.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+n),void setTimeout(function(){t.appendAjax(e)},n)}var i=e.success,r=e.error,a="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,o=$.extend({},this.tree.options.ajaxDefaults,e,{success:function(e,n,r){var s=t.tree.phase;t.tree.phase="init",o.postProcess?e=o.postProcess.call(this,e,this.dataType):e&&e.hasOwnProperty("d")&&(e="string"==typeof e.d?$.parseJSON(e.d):e.d),$.isArray(e)&&0===e.length||t.addChild(e,null),t.tree.phase="postInit",i&&i.call(o,t,e,n),t.tree.logDebug("trigger "+a),t.tree.$tree.trigger(a,[t,!0]),t.tree.phase=s,t.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(e)&&0===e.length&&(t.childList=[],t.render())},error:function(e,n,i){t.tree.logWarning("appendAjax failed:",n,":\n",e,"\n",i),r&&r.call(o,t,e,n,i),t.tree.$tree.trigger(a,[t,!1]),t.setLazyNodeStatus(DTNodeStatus_Error,{info:n,tooltip:""+i})}});$.ajax(o)},move:function(e,t){var n;if(this!==e){if(!this.parent)throw"Cannot move system root";(void 0===t||"over"==t)&&(t="child");var i=this.parent,r="child"===t?e:e.parent;if(r.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(1==this.parent.childList.length)this.parent.childList=this.parent.data.isLazy?[]:null,this.parent.bExpanded=!1;else{if(n=$.inArray(this,this.parent.childList),0>n)throw"Internal error";this.parent.childList.splice(n,1)}if(this.parent.ul&&this.parent.ul.removeChild(this.li),this.parent=r,r.hasChildren())switch(t){case"child":r.childList.push(this);break;case"before":if(n=$.inArray(e,r.childList),0>n)throw"Internal error";r.childList.splice(n,0,this);break;case"after":if(n=$.inArray(e,r.childList),0>n)throw"Internal error";r.childList.splice(n+1,0,this);break;default:throw"Invalid mode "+t}else r.childList=[this];if(r.ul||(r.ul=document.createElement("ul"),r.ul.style.display="none",r.li.appendChild(r.ul)),this.li&&r.ul.appendChild(this.li),this.tree!==e.tree)throw this.visit(function(t){t.tree=e.tree},null,!0),"Not yet implemented.";i.isDescendantOf(r)||i.render(),r.isDescendantOf(i)||r.render()}},lastentry:void 0};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(e,t){var n=new DynaTreeStatus(e,t);return n.read(),n.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(e,t){void 0===e&&(e=$.ui.dynatree.prototype.options.cookieId),t=$.extend({},$.ui.dynatree.prototype.options.cookie,t),this.cookieId=e,this.cookieOpts=t,this.cookiesFound=void 0,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(e){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var e=$.cookie(this.cookieId+"-active");this.activeKey=null===e?"":e,null!==e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-focus"),this.focusedKey=null===e?"":e,null!==e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=null===e?[]:e.split(","),null!==e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-select"),this.selectedKeyList=null===e?[]:e.split(","),null!==e&&(this.cookiesFound=!0)},write:function(){$.cookie(this.cookieId+"-active",null===this.activeKey?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",null===this.focusedKey?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",null===this.expandedKeyList?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",null===this.selectedKeyList?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(e){$.inArray(e,this.expandedKeyList)<0&&(this.expandedKeyList.push(e),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(e){var t=$.inArray(e,this.expandedKeyList);t>=0&&(this.expandedKeyList.splice(t,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(e){$.inArray(e,this.selectedKeyList)<0&&(this.selectedKeyList.push(e),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(e){var t=$.inArray(e,this.selectedKeyList);t>=0&&(this.selectedKeyList.splice(t,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return this.cookiesFound===!0},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:void 0};var DynaTree=Class.create();DynaTree.version="$Version:$",DynaTree.prototype={initialize:function(e){this.phase="init",this.$widget=e,this.options=e.options,this.$tree=e.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(e){var t=(this.$widget,this.options),n=this;this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,void 0!==t.rootVisible&&this.logWarning("Option 'rootVisible' is no longer supported."),t.minExpandLevel<1&&(this.logWarning("Option 'minExpandLevel' must be >= 1."),t.minExpandLevel=1),t.classNames!==$.ui.dynatree.prototype.options.classNames&&(t.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,t.classNames)),t.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(t.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,t.ajaxDefaults)),t.dnd!==$.ui.dynatree.prototype.options.dnd&&(t.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,t.dnd)),t.imagePath||$("script").each(function(){var e=/.*dynatree[^\/]*\.js$/i;return this.src.search(e)>=0?(t.imagePath=this.src.indexOf("/")>=0?this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":"skin/",n.logDebug("Guessing imagePath from '%s': '%s'",this.src,t.imagePath),!1):void 0}),this.persistence=new DynaTreeStatus(t.cookieId,t.cookie),t.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+t.classNames.empty+"'></span>",tagVline:"<span class='"+t.classNames.vline+"'></span>",tagExpander:"<span class='"+t.classNames.expander+"'></span>",tagConnector:"<span class='"+t.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+t.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+t.classNames.checkbox+"'></span>",lastentry:void 0},(t.children||t.initAjax&&t.initAjax.url||t.initId)&&$(this.divTree).empty();var i=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var r=this.tnRoot,a=t.persist&&this.persistence.isReloading(),o=!1,s=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),t.children?r.addChild(t.children):t.initAjax&&t.initAjax.url?(o=!0,r.data.isLazy=!0,this._reloadAjax(e)):t.initId?this._createFromTag(r,$("#"+t.initId)):(this._createFromTag(r,i),i.remove()),this._checkConsistency(),o||3!=t.selectMode||r._updatePartSelectionState(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(s),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",t.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),o||(t.onPostInit&&t.onPostInit.call(this,a,!1),e&&e.call(this,"ok")),this.phase="idle"},_reloadAjax:function(e){var t=this.options;if(!t.initAjax||!t.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var n=this.persistence,i=$.extend({},t.initAjax);i.addActiveKey&&(i.data.activeKey=n.activeKey),i.addFocusedKey&&(i.data.focusedKey=n.focusedKey),i.addExpandedKeyList&&(i.data.expandedKeyList=n.expandedKeyList.join(",")),i.addSelectedKeyList&&(i.data.selectedKeyList=n.selectedKeyList.join(",")),i.success&&this.logWarning("initAjax: success callback is ignored; use onPostInit instead."),i.error&&this.logWarning("initAjax: error callback is ignored; use onPostInit instead.");var r=n.isReloading();i.success=function(n,i,a){3==t.selectMode&&n.tree.tnRoot._updatePartSelectionState(),t.onPostInit&&t.onPostInit.call(n.tree,r,!1),e&&e.call(n.tree,"ok")},i.error=function(n,i,a,o){t.onPostInit&&t.onPostInit.call(n.tree,r,!0,i,a,o),e&&e.call(n.tree,"error",i,a,o)},this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(i)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(!0)},serializeArray:function(e){for(var t=this.getSelectedNodes(e),n=this.$tree.attr("name")||this.$tree.attr("id"),i=[],r=0,a=t.length;a>r;r++)i.push({name:n,value:t[r].data.key});return i},getPersistData:function(){return this.persistence.toDict()},logDebug:function(e){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(e){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(e){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return"init"==this.phase||"postInit"==this.phase},isReloading:function(){return("init"==this.phase||"postInit"==this.phase)&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return"userEvent"==this.phase},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(e){this._load(e)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(e){var t=document.getElementById(this.options.idPrefix+e);if(t)return t.dtnode?t.dtnode:null;var n=null;return this.visit(function(t){return t.data.key==e?(n=t,!1):void 0},!0),n},getActiveNode:function(){return this.activeNode},reactivate:function(e){var t=this.activeNode;t&&(this.activeNode=null,t.activate(),e&&t.focus())},getSelectedNodes:function(e){var t=[];return this.tnRoot.visit(function(n){return n.bSelected&&(t.push(n),e===!0)?"skip":void 0}),t},activateKey:function(e){var t=null===e?null:this.getNodeByKey(e);return t?(t.focus(),t.activate(),t):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(e,t){var n=e.split(this.options.keyPathSeparator);return""===n[0]&&n.shift(),n[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),n.shift()),e=n.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(e,t)},selectKey:function(e,t){var n=this.getNodeByKey(e);return n?(n.select(t),n):null},enableUpdate:function(e){return this.bEnableUpdate==e?e:(this.bEnableUpdate=e,e&&this.redraw(),!e)},count:function(){return this.tnRoot.countChildren()},visit:function(e,t){return this.tnRoot.visit(e,t)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length)title=$liSpan.html();else if($liA.length)title=$liA.html(),href=$liA.attr("href"),target=$liA.attr("target"),tooltip=$liA.attr("title");else{title=$li.html();var iPos=title.search(/<ul/i);title=$.trim(iPos>=0?title.substring(0,iPos):title)}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if(href&&(data.href=href,data.target=target),$li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=$li.attr("id")),$li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){"{"!=dataAttr.charAt(0)&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw"Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)})},_checkConsistency:function(){},_setDndStatus:function(e,t,n,i,r){var a=e?$(e.span):null,o=$(t.span);if(this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo($(this.divTree).parent())),"after"===i||"before"===i||"over"===i){var s="0 0";switch(i){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),s="0 -8";break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),s="0 8";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),o.addClass("dynatree-drop-target"),s="8 0"}this.$dndMarker.show().position({my:"left top",at:"left top",of:o,offset:s})}else o.removeClass("dynatree-drop-target"),this.$dndMarker.hide();"after"===i?o.addClass("dynatree-drop-after"):o.removeClass("dynatree-drop-after"),"before"===i?o.addClass("dynatree-drop-before"):o.removeClass("dynatree-drop-before"),r===!0?(a&&a.addClass("dynatree-drop-accept"),o.addClass("dynatree-drop-accept"),n.addClass("dynatree-drop-accept")):(a&&a.removeClass("dynatree-drop-accept"),o.removeClass("dynatree-drop-accept"),n.removeClass("dynatree-drop-accept")),r===!1?(a&&a.addClass("dynatree-drop-reject"),o.addClass("dynatree-drop-reject"),n.addClass("dynatree-drop-reject")):(a&&a.removeClass("dynatree-drop-reject"),o.removeClass("dynatree-drop-reject"),n.removeClass("dynatree-drop-reject"))},_onDragEvent:function(e,t,n,i,r,a){var o,s,l=(this.options,this.options.dnd),c=null,u=$(t.span);switch(e){case"helper":var d=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(i.target).closest("a").clone());$("ul.dynatree-container",t.tree.divTree).append(d),d.data("dtSourceNode",t),c=d;break;case"start":t.isStatusNode()?c=!1:l.onDragStart&&(c=l.onDragStart(t)),c===!1?(this.logDebug("tree.onDragStart() cancelled"),r.helper.trigger("mouseup"),r.helper.hide()):u.addClass("dynatree-drag-source");break;case"enter":c=l.onDragEnter?l.onDragEnter(t,n):null,c=c?{over:c===!0||"over"===c||$.inArray("over",c)>=0,before:c===!0||"before"===c||$.inArray("before",c)>=0,after:c===!0||"after"===c||$.inArray("after",c)>=0}:!1,r.helper.data("enterResponse",c);break;case"over":if(s=r.helper.data("enterResponse"),o=null,s===!1);else if("string"==typeof s)o=s;else{var p=u.offset(),h={x:i.pageX-p.left,y:i.pageY-p.top},f={x:h.x/u.width(),y:h.y/u.height()};s.after&&f.y>.75?o="after":!s.over&&s.after&&f.y>.5?o="after":s.before&&f.y<=.25?o="before":!s.over&&s.before&&f.y<=.5?o="before":s.over&&(o="over"),l.preventVoidMoves&&(t===n?o=null:"before"===o&&n&&t===n.getNextSibling()?o=null:"after"===o&&n&&t===n.getPrevSibling()?o=null:"over"===o&&n&&n.parent===t&&n.isLastSibling()&&(o=null)),r.helper.data("hitMode",o)}"over"===o&&l.autoExpandMS&&t.hasChildren()!==!1&&!t.bExpanded&&t.scheduleAction("expand",l.autoExpandMS),o&&l.onDragOver&&(c=l.onDragOver(t,n,o),("over"===c||"before"===c||"after"===c)&&(o=c)),this._setDndStatus(n,t,r.helper,o,c!==!1&&null!==o);break;case"drop":var g=r.helper.hasClass("dynatree-drop-reject");o=r.helper.data("hitMode"),o&&l.onDrop&&!g&&l.onDrop(t,n,o,r,a);break;case"leave":t.scheduleAction("cancel"),r.helper.data("enterResponse",null),r.helper.data("hitMode",null),this._setDndStatus(n,t,r.helper,"out",void 0),l.onDragLeave&&l.onDragLeave(t,n);break;case"stop":u.removeClass("dynatree-drag-source"),l.onDragStop&&l.onDragStop(t);break;default:throw"Unsupported drag event: "+e}return c},cancelDrag:function(){var e=$.ui.ddmanager.current;e&&e.cancel()},lastentry:void 0},$.widget("ui.dynatree",{_init:function(){return parseFloat($.ui.version)<1.8?(this.options.debugLevel>=0&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create()):void(this.options.debugLevel>=2&&_log("debug","ui.dynatree._init() was called; no current default functionality."))},_create:function(){var e=this.options;e.debugLevel>=1&&logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel),this.options.event+=".dynatree";this.element.get(0);this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function e(e){e=$.event.fix(e||window.event);var t=$.ui.dynatree.getNode(e.target);return t?t._onFocus(e):!1}this.unbind();var t="click.dynatree dblclick.dynatree";this.options.keyboard&&(t+=" keypress.dynatree keydown.dynatree"),this.element.bind(t,function(e){var t=$.ui.dynatree.getNode(e.target);if(!t)return!0;var n=t.tree,i=n.options;n.logDebug("event(%s): dtnode: %s",e.type,t);var r=n.phase;n.phase="userEvent";try{switch(e.type){case"click":return i.onClick&&i.onClick.call(n,t,e)===!1?!1:t._onClick(e);case"dblclick":return i.onDblClick&&i.onDblClick.call(n,t,e)===!1?!1:t._onDblClick(e);case"keydown":return i.onKeydown&&i.onKeydown.call(n,t,e)===!1?!1:t._onKeydown(e);case"keypress":return i.onKeypress&&i.onKeypress.call(n,t,e)===!1?!1:t._onKeypress(e)}}catch(a){n.logWarning("bind(%o): dtnode: %o, error: %o",e,t,a)}finally{n.phase=r}});var n=this.tree.divTree;n.addEventListener?(n.addEventListener("focus",e,!0),n.addEventListener("blur",e,!0)):n.onfocusin=n.onfocusout=e},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:void 0}),parseFloat($.ui.version)<1.8&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.ui.dynatree.version="$Version:$",
$.ui.dynatree.getNode=function(e){if(e instanceof DynaTreeNode)return e;for(void 0!==e.selector&&(e=e[0]);e;){if(e.dtnode)return e.dtnode;e=e.parentNode}return null},$.ui.dynatree.getPersistData=DynaTreeStatus._getTreePersistData,$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1e3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:2,lastentry:void 0},parseFloat($.ui.version)<1.8&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,href:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:void 0};var didRegisterDnd=!1,_registerDnd=function(){didRegisterDnd||($.ui.plugin.add("draggable","connectToDynatree",{start:function(e,t){var n=$(this).data("draggable"),i=t.helper.data("dtSourceNode")||null;return i?(n.offset.click.top=-2,n.offset.click.left=16,i.tree._onDragEvent("start",i,null,e,t,n)):void 0},drag:function(e,t){var n=$(this).data("draggable"),i=t.helper.data("dtSourceNode")||null,r=t.helper.data("dtTargetNode")||null,a=$.ui.dynatree.getNode(e.target);if(e.target&&!a){var o=$(e.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(o)return}t.helper.data("dtTargetNode",a),r&&r!==a&&r.tree._onDragEvent("leave",r,i,e,t,n),a&&a.tree.options.dnd.onDrop&&(a===r?a.tree._onDragEvent("over",a,i,e,t,n):a.tree._onDragEvent("enter",a,i,e,t,n))},stop:function(e,t){var n=$(this).data("draggable"),i=t.helper.data("dtSourceNode")||null,r=t.helper.data("dtTargetNode")||null,a=(n._mouseDownEvent,e.type),o="mouseup"==a&&1==e.which;o||logMsg("Drag was cancelled"),r&&(o&&r.tree._onDragEvent("drop",r,i,e,t,n),r.tree._onDragEvent("leave",r,i,e,t,n)),i&&i.tree._onDragEvent("stop",i,null,e,t,n)}}),didRegisterDnd=!0)}}(jQuery),function(){function e(e){var t={};return e.forEach(function(e,n){t[e]=n}),t}function t(e,t){Object.keys(e).forEach(function(n){t[n]=e[n]})}function n(e){return Math.min.apply(null,e)}function i(e){return Math.max.apply(null,e)}function r(e){return Array.prototype.concat.apply([],e)}function a(e){return Object.keys(e).map(function(t){return e[t]})}function o(e){for(var t={},n=0;n<e.length;++n)for(var i=e[n],r=0;r<i.length;++r){var a=i[r];t[a]=a}var o=[];for(var s in t)o.push(t[s]);return o}function s(e,t,n,i){return function(r){return arguments.length?(t[n]=r,i&&i(r),e):t[n]}}function l(){function e(t){var i=d,r=2*t,a=r+1,o=t;r<i.length&&(o=i[r].pri<i[o].pri?r:o,a<i.length&&(o=i[a].pri<i[o].pri?a:o),o!==t&&(n(t,o),e(o)))}function t(e){for(var t,i=d,r=i[e].pri;e>0&&(t=e>>1,!(i[t].pri<r));)n(e,t),e=t}function n(e,t){var n=d,i=p,r=n[e];n[e]=n[t],n[t]=r,i[n[e].key]=e,i[n[t].key]=t}function i(){return d.length}function r(){return Object.keys(p)}function a(e){return e in p}function o(e){var t=p[e];return void 0!==t?d[t].pri:void 0}function s(e,n){if(!(e in p)){var i={key:e,pri:n},r=d.length;return p[e]=r,d.push(i),t(r),!0}return!1}function l(){return i()>0?d[0].key:void 0}function c(){n(0,d.length-1);var t=d.pop();return delete p[t.key],e(0),t.key}function u(e,n){var i=p[e];if(n>d[i].pri)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+d[i].pri+" New: "+n);d[i].pri=n,t(i)}var d=[],p={};return{size:i,keys:r,has:a,priority:o,add:s,min:l,removeMin:c,decrease:u}}dagre={},dagre.version="0.0.5",dagre.graph={},dagre.graph=function(){function e(e,t,n){var i=e[t];i||(i=e[t]={count:0,edges:{}}),i.count++,i.edges[n]=!0}function t(e,t,n){var i=e[t];0==--i.count?delete e[t]:delete i.edges[n]}function n(e){var t=s[e];if(!(e in s))throw new Error("Node '"+e+"' is not in buildGraph:\n"+p.toString());return t}function i(e){var t=u[e];if(!t)throw new Error("Edge '"+e+"' is not in buildGraph:\n"+p.toString());return t}var s={},l={},c={},u={},p={};return p.addNode=function(e,t){if(p.hasNode(e))throw new Error("Graph already has node '"+e+"':\n"+p.toString());s[e]={id:e,value:t},l[e]={},c[e]={}},p.delNode=function(e){n(e),p.edges(e).forEach(function(e){p.delEdge(e)}),delete l[e],delete c[e],delete s[e]},p.node=function(e){return n(e).value},p.hasNode=function(e){return e in s},p.addEdge=function(t,i,r,a){if(n(i),n(r),p.hasEdge(t))throw new Error("Graph already has edge '"+t+"':\n"+p.toString());u[t]={id:t,source:i,target:r,value:a},e(l[r],i,t),e(c[i],r,t)},p.delEdge=function(e){var n=i(e);t(l[n.target],n.source,e),t(c[n.source],n.target,e),delete u[e]},p.edge=function(e){return i(e).value},p.source=function(e){return i(e).source},p.target=function(e){return i(e).target},p.hasEdge=function(e){return e in u},p.successors=function(e){return n(e),d(c[e]).map(function(e){return s[e].id})},p.predecessors=function(e){return n(e),d(l[e]).map(function(e){return s[e].id})},p.neighbors=function(e){n(e);var t={};return d(c[e]).map(function(e){t[e]=!0}),d(l[e]).map(function(e){t[e]=!0}),d(t).map(function(e){return s[e].id})},p.nodes=function(){var e=[];return p.eachNode(function(t,n){e.push(t)}),e},p.eachNode=function(e){for(var t in s){var n=s[t];e(n.id,n.value)}},p.edges=function(e,t){var i,r;return arguments.length?1===arguments.length?o([p.inEdges(e),p.outEdges(e)]):2===arguments.length?(n(e),n(t),r=c[e],i=t in r?d(r[t].edges):[],i.map(function(e){return u[e].id})):void 0:(i=[],p.eachEdge(function(e){i.push(e)}),i)},p.eachEdge=function(e){for(var t in u){var n=u[t];e(n.id,n.source,n.target,n.value)}},p.inEdges=function(e){return n(e),r(a(l[e]).map(function(e){return d(e.edges)}))},p.outEdges=function(e){return n(e),r(a(c[e]).map(function(e){return d(e.edges)}))},p.subgraph=function(e){var t=dagre.graph();return e.forEach(function(e){t.addNode(e,p.node(e))}),a(u).forEach(function(e){t.hasNode(e.source)&&t.hasNode(e.target)&&t.addEdge(e.id,e.source,e.target,p.edge(e.id))}),t},p.toString=function(){var e="GRAPH:\n";return e+="    Nodes:\n",d(s).forEach(function(t){e+="        "+t+": "+JSON.stringify(s[t].value)+"\n"}),e+="    Edges:\n",d(u).forEach(function(t){var n=u[t];e+="        "+t+" ("+n.source+" -> "+n.target+"): "+JSON.stringify(u[t].value)+"\n"}),e},p},dagre.layout=function(){function e(){var e=dagre.graph(),t=0;return o.nodes.forEach(function(n){var i="id"in n?n.id:"_N"+t++;n.dagre={id:i,width:n.width,height:n.height},e.addNode(i,n.dagre)}),o.edges.forEach(function(n){var i=n.source.dagre.id;if(!e.hasNode(i))throw new Error("Source node for '"+n+"' not in node list");var r=n.target.dagre.id;if(!e.hasNode(r))throw new Error("Target node for '"+n+"' not in node list");if(n.dagre={points:[]},i!==r){var a="id"in n?n.id:"_E"+t++;n.dagre.id=a,n.dagre.minLen=n.minLen||1,n.dagre.width=n.width||0,n.dagre.height=n.height||0,e.addEdge(a,i,r,n.dagre)}}),e}function t(){var t=f.rankSep();try{if(!o.nodes.length)return;var a=e();a.eachEdge(function(e,t,n,i){i.minLen*=2}),f.rankSep(t/2),c.run(a),u.run(a),n(a),d.run(a),p.run(a),i(a),r(a),c.undo(a)}finally{f.rankSep(t)}return f}function n(e){var t=0;e.eachEdge(function(n,i,r,a){var o=e.node(i).rank,s=e.node(r).rank;if(s>o+1){for(var l=i,c=o+1,u=0;s>c;++c,++u){var d="_D"+ ++t,p={width:a.width,height:a.height,edge:{id:n,source:i,target:r,attrs:a},index:u,rank:c,dummy:!0};e.addNode(d,p),e.addEdge("_D"+ ++t,l,d,{}),l=d}e.addEdge("_D"+ ++t,l,r,{}),e.delEdge(n)}})}function i(e){e.eachNode(function(t,n){if(n.dummy){var i=n.edge;e.hasEdge(i.id)||e.addEdge(i.id,i.source,i.target,i.attrs);var r=e.edge(i.id).points;r[n.index]={x:n.x,y:n.y},e.delNode(t)}})}function r(e){e.eachEdge(function(e,t,n,i){i.reversed&&i.points.reverse()})}function a(e){return function(){return arguments.length?(e.apply(null,arguments),f):e()}}var o={nodes:[],edges:[],debugLevel:0},l=h(),c=dagre.layout.acyclic(),u=dagre.layout.rank(),d=dagre.layout.order(),p=dagre.layout.position(),f={};return f.nodes=s(f,o,"nodes"),f.edges=s(f,o,"edges"),f.orderIters=a(d.iterations),f.nodeSep=a(p.nodeSep),f.edgeSep=a(p.edgeSep),f.rankSep=a(p.rankSep),f.rankDir=a(p.rankDir),f.debugAlignment=a(p.debugAlignment),f.debugLevel=s(f,o,"debugLevel",function(e){l.enabled(e),c.debugLevel(e),u.debugLevel(e),d.debugLevel(e),p.debugLevel(e)}),f.run=l.wrap("Total layout",t),f},dagre.layout.acyclic=function(){function e(e){function n(t){t in r||(r[t]=i[t]=!0,e.outEdges(t).forEach(function(r){var o,s=e.target(r);s in i?(o=e.edge(r),e.delEdge(r),o.reversed=!0,++a,e.addEdge(r,s,t,o)):n(s)}),delete i[t])}var i={},r={},a=0;e.eachNode(function(e){n(e)}),t.debugLevel>=2&&console.log("Acyclic Phase: reversed "+a+" edge(s)")}var t={debugLevel:0},n=h(),i={};return i.debugLevel=s(i,t,"debugLevel",function(e){n.enabled(e)}),i.run=n.wrap("Acyclic Phase",e),i.undo=function(e){e.eachEdge(function(t,n,i,r){r.reversed&&(delete r.reversed,e.delEdge(t),e.addEdge(t,i,n,r))})},i},dagre.layout.rank=function(){function e(e){t(e),p(e).forEach(function(t){var n=e.subgraph(t);i(n),r(n)})}function t(e){var t={},n=l();for(e.eachNode(function(i){n.add(i,e.inEdges(i).length),t[i]=0});n.size()>0;){var i=n.min();if(n.priority(i)>0)throw new Error("Input buildGraph is not acyclic: "+e.toString());n.removeMin();var r=t[i];e.node(i).rank=r,e.outEdges(i).forEach(function(i){var a=e.target(i);t[a]=Math.max(t[a],r+(e.edge(i).minLen||1)),n.decrease(a,n.priority(a)-1)})}}function i(e){function t(o,s){r[o]=!0,e.node(o).rank=s,i[o].forEach(function(i){if(!(i in r)){var l=n[a(o,i)];t(i,s+(e.edges(o,i).length?l:-l))}})}var n={};e.eachEdge(function(e,t,i,r){var o=a(t,i);n[o]=Math.max(n[o]||1,r.minLen||1)});var i=dagre.util.prim(e,function(t,i){return Math.abs(e.node(t).rank-e.node(i).rank)-n[a(t,i)]}),r={};return t(e.nodes()[0],0),i}function r(e){var t=n(e.nodes().map(function(t){return e.node(t).rank}));e.eachNode(function(e,n){n.rank-=t})}function a(e,t){return t>e?e.length+":"+e+"-"+t:t.length+":"+t+"-"+e}var o={debugLevel:0},c=h(),u={};return u.debugLevel=s(u,o,"debugLevel",function(e){c.enabled(e)}),u.run=c.wrap("Rank Phase",e),u},dagre.layout.order=function(){function t(e){var t=n(e),r=o(t),a=c(e,t);l.debugLevel>=2&&console.log("Order phase start cross count: "+a);var s,u,d;for(u=0,d=0;4>d&&u<l.iterations;++u,++d)s=i(e,u,t),a>s&&(r=o(t),a=s,d=0),l.debugLevel>=3&&console.log("Order phase iter "+u+" cross count: "+a);return r.forEach(function(t){t.forEach(function(t,n){e.node(t).order=n})}),l.debugLevel>=2&&(console.log("Order iterations: "+u),console.log("Order phase best cross count: "+a)),r}function n(e){var t=[];return e.eachNode(function(e,n){var i=t[n.rank]||(t[n.rank]=[]);i.push(e)}),t}function i(e,t,n){var i,a=0;if(t%2===0)for(i=1;i<n.length;++i)r(e,n[i-1],n[i],"inEdges"),a+=u(e,n[i-1],n[i]);else for(i=n.length-2;i>=0;--i)r(e,n[i+1],n[i],"outEdges"),a+=u(e,n[i],n[i+1]);return a}function r(t,n,i,r){for(var o=e(i),s=a(t,n,i,r),l=i.slice(0).sort(function(e,t){return s[e]-s[t]||o[e]-o[t]}),c=i.length-1;c>=0;--c)-1!==s[i[c]]&&(i[c]=l.pop())}function a(t,n,i,r){var a=e(n),o={};return i.forEach(function(e){var n=-1,i=t[r](e);i.length>0&&(n=0,i.forEach(function(i){var r=t.source(i),o=r===e?t.target(i):r;n+=a[o]}),n/=i.length),o[e]=n}),o}function o(e){return e.map(function(e){return e.slice(0)})}var l={iterations:24,debugLevel:0},d=h(),p={};return p.iterations=s(p,l,"iterations"),p.debugLevel=s(p,l,"debugLevel",function(e){d.enabled(e)}),p.run=d.wrap("Order Phase",t),p};var c=dagre.layout.order.crossCount=function(e,t){var n,i=0;return t.forEach(function(t){n&&(i+=u(e,n,t)),n=t}),i},u=dagre.layout.order.bilayerCrossCount=function(t,n,i){var r=e(i),a=[];n.forEach(function(e){var n=[];t.outEdges(e).forEach(function(e){n.push(r[t.target(e)])}),n.sort(function(e,t){return e-t}),a=a.concat(n)});for(var o=1;o<i.length;)o<<=1;var s=2*o-1;o-=1;for(var l=[],c=0;s>c;++c)l[c]=0;var u=0;return a.forEach(function(e){var t=e+o;++l[t];for(;t>0;)t%2&&(u+=l[t+1]),t=t-1>>1,++l[t]}),u};dagre.layout.position=function(){function e(e){var r=[];e.eachNode(function(e,t){var n=r[t.rank]||(r[t.rank]=[]);n[t.order]=e});var s=t(e,r),l={};["up","down"].forEach(function(t){"down"===t&&r.reverse(),["left","right"].forEach(function(n){"right"===n&&m(r);var i=t+"-"+n;if(!x.debugAlignment||x.debugAlignment===i){var a=o(e,r,s,"up"===t?"predecessors":"successors");l[i]=c(e,r,a.pos,a.root,a.align),"right"===n&&g(r,l[i])}"right"===n&&m(r)}),"down"===t&&r.reverse()}),x.debugAlignment?e.eachNode(function(t,n){b(e,t,l[x.debugAlignment][t])}):(f(e,r,l),e.eachNode(function(t){var n=a(l).map(function(e){return e[t]}).sort(function(e,t){return e-t});b(e,t,(n[1]+n[2])/2)}));var u=n(e.nodes().map(function(t){return b(e,t)-v(e,t)/2}));e.eachNode(function(t){b(e,t,b(e,t)-u)});var d=0;r.forEach(function(t){var n=i(t.map(function(t){return y(e,t)}));d+=n/2,t.forEach(function(t){w(e,t,d)}),d+=n/2+x.rankSep})}function t(e,t){var n={},i={};t[0].forEach(function(e,t){i[e]=t});for(var r=1;r<t.length;++r)for(var a=t[r],o=0,s=0,l=0;l<a.length;++l){var c=a[l];i[c]=l;var u=null;if(e.node(c).dummy&&e.predecessors(c).some(function(t){return e.node(t).dummy?(u=i[t],!0):!1}),null===u&&l===a.length-1&&(u=t[r-1].length-1),null!==u){for(;l>=s;++s){var d=a[s];e.inEdges(d).forEach(function(t){var r=i[e.source(t)];(o>r||r>u)&&(n[t]=!0)})}o=u}}return n}function o(e,t,n,i){var a={},o={},s={};return t.forEach(function(e){e.forEach(function(e,t){o[e]=e,s[e]=e,a[e]=t})}),t.forEach(function(t){var l=-1;t.forEach(function(t){var c=e[i](t);if(c.length>0){c.sort(function(e,t){return a[e]-a[t]});var u=(c.length-1)/2;c.slice(Math.floor(u),Math.ceil(u)+1).forEach(function(i){s[t]===t&&!n[r([e.edges(t,i),e.edges(i,t)])[0]]&&l<a[i]&&(s[i]=t,s[t]=o[t]=o[i],l=a[i])})}})}),{pos:a,root:o,align:s}}function l(e,t){var n=e.node(t).dummy?x.edgeSep:x.nodeSep;return v(e,t)/2+n/2}function c(e,t,n,i,r){function o(t){if(!(t in d)){d[t]=0;var a=t;do{if(n[a]>0){var p=i[u[a]];o(p),s[t]===t&&(s[t]=s[p]);var h=l(e,u[a])+l(e,a);s[t]!==s[p]?c[s[p]]=Math.min(c[s[p]]||Number.POSITIVE_INFINITY,d[t]-d[p]-h):d[t]=Math.max(d[t],d[p]+h)}a=r[a]}while(a!==t)}}var s={},c={},u={},d={};t.forEach(function(e){e.forEach(function(t,n){s[t]=t,u[t]=n>0?e[n-1]:null})}),a(i).forEach(function(e){o(e)});var p=0;return t.forEach(function(e){var t=c[e[0]];void 0===t&&(t=0),p=c[e[0]]=t+p}),t.forEach(function(e){e.forEach(function(e){if(d[e]=d[i[e]],i[e]===e){var t=c[s[e]];t<Number.POSITIVE_INFINITY&&(d[e]+=t)}})}),d}function u(e,t,i){return n(t.map(function(t){var n=t[0];return i[n]-v(e,n)/2}))}function d(e,t,n){return i(t.map(function(t){var i=t[t.length-1];return n[i]-v(e,i)/2}))}function p(e,t){Object.keys(t).forEach(function(n){t[n]+=e})}function f(e,t,n){var i,r,o=Number.POSITIVE_INFINITY;a(n).forEach(function(n){var a=u(e,t,n),s=d(e,t,n),l=s-a;o>l&&(i=a,r=s,o=l)}),["up","down"].forEach(function(r){var a=n[r+"-left"],o=i-u(e,t,a);o&&p(o,a)}),["up","down"].forEach(function(i){var a=n[i+"-right"],o=r-d(e,t,a);o&&p(o,a)})}function g(e,t){var n=i(a(t));Object.keys(t).forEach(function(e){t[e]=n-t[e]})}function m(e){e.forEach(function(e){e.reverse()})}function v(e,t){switch(x.rankDir){case"LR":return e.node(t).height;default:return e.node(t).width}}function y(e,t){switch(x.rankDir){case"LR":return e.node(t).width;default:return e.node(t).height}}function b(e,t,n){switch(x.rankDir){case"LR":if(arguments.length<3)return e.node(t).y;e.node(t).y=n;break;default:if(arguments.length<3)return e.node(t).x;e.node(t).x=n}}function w(e,t,n){switch(x.rankDir){case"LR":if(arguments.length<3)return e.node(t).x;e.node(t).x=n;break;default:if(arguments.length<3)return e.node(t).y;e.node(t).y=n}}var x={nodeSep:50,edgeSep:10,rankSep:30,rankDir:"TB",debugAlignment:null,debugLevel:0},k=h(),C={};return C.nodeSep=s(C,x,"nodeSep"),C.edgeSep=s(C,x,"edgeSep"),C.rankSep=s(C,x,"rankSep"),C.rankDir=s(C,x,"rankDir"),C.debugAlignment=s(C,x,"debugAlignment"),C.debugLevel=s(C,x,"debugLevel",function(e){k.enabled(e)}),C.run=k.wrap("Position Phase",e),C},dagre.util={};var d=dagre.util.keys=Object.keys,p=dagre.util.components=function(e){function t(n,r){n in i||(i[n]=!0,r.push(n),e.neighbors(n).forEach(function(e){t(e,r)}))}var n=[],i={};return e.eachNode(function(e){var i=[];t(e,i),i.length>0&&n.push(i)}),n},h=(dagre.util.prim=function(e,t){var n={},i={},r=l();if(0===e.nodes().length)return n;e.eachNode(function(e){r.add(e,Number.POSITIVE_INFINITY),n[e]=[]}),r.decrease(e.nodes()[0],0);for(var a,o=!1;r.size()>0;){if(a=r.removeMin(),a in i)n[a].push(i[a]),n[i[a]].push(a);else{if(o)throw new Error("Input buildGraph is not connected:\n"+e.toString());o=!0}e.neighbors(a).forEach(function(e){var n=r.priority(e);if(void 0!==n){var o=t(a,e);n>o&&(i[e]=a,r.decrease(e,o))}})}return n},dagre.util.intersectRect=function(e,t){var n,i,r=e.x,a=e.y,o=t.x-r,s=t.y-a,l=e.width/2,c=e.height/2;return Math.abs(s)*l>Math.abs(o)*c?(0>s&&(c=-c),n=0===s?0:c*o/s,i=c):(0>o&&(l=-l),n=l,i=0===o?0:l*s/o),{x:r+n,y:a+i}},dagre.util.pointStr=function(e){return e.x+","+e.y},function(){var e={},t=!1;return e.enabled=function(n){return arguments.length?(t=n,e):t},e.wrap=function(e,n){return function(){var i=t?(new Date).getTime():null;try{return n.apply(null,arguments)}finally{i&&console.log(e+" time: "+((new Date).getTime()-i)+"ms")}}},e});dagre.dot={},dagre.dot.toGraph=function(e){function n(e,n){o.hasNode(e)||o.addNode(e,{id:e,label:e}),n&&t(n,o.node(e))}function i(e,n,i){var r=e+"-"+n,a=l[r];a||(a=l[r]=0),l[r]++;var s=i.id||r+"-"+a,c={};t(i,c),t({id:s},c),o.addEdge(s,e,n,c)}function r(e){switch(e.type){case"node":n(e.id,e.attrs);break;case"edge":var t;e.elems.forEach(function(n){switch(r(n),n.type){case"node":var a=n.id;t&&(i(t,a,e.attrs),s&&i(a,t,e.attrs)),t=a;break;default:throw new Error("Unsupported type incident on edge: "+n.type)}});break;case"attr":break;default:throw new Error("Unsupported statement type: "+e.type)}}var a=dot_parser.parse(e),o=dagre.graph(),s="buildGraph"===a.type,l={};return a.stmts&&a.stmts.forEach(function(e){r(e)}),o},dagre.dot.toObjects=function(e){var t=dagre.dot.toGraph(e),n=t.nodes().map(function(e){return t.node(e)}),i=t.edges().map(function(e){var n=t.edge(e);return n.source=t.node(t.source(e)),n.target=t.node(t.target(e)),n});return{nodes:n,edges:i}},dot_parser=function(){function e(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var t={parse:function(t,n){function i(e){F>L||(L>F&&(F=L,U=[]),U.push(e))}function r(){var e,n,r,o,s,l,c,u,d,p,h,f,g,m,v,y;for(m=L,v=L,e=[],n=I();null!==n;)e.push(n),n=I();if(null!==e)if(y=L,n=$(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,L=y)):(n=null,L=y),n=null!==n?n:"",null!==n)if(r=A(),null!==r){for(o=[],s=I();null!==s;)o.push(s),s=I();if(null!==o)if(s=x(),s=null!==s?s:"",null!==s){for(l=[],c=I();null!==c;)l.push(c),c=I();if(null!==l)if(123===t.charCodeAt(L)?(c="{",L++):(c=null,0===R&&i('"{"')),null!==c){for(u=[],d=I();null!==d;)u.push(d),d=I();if(null!==u)if(d=a(),d=null!==d?d:"",null!==d){for(p=[],h=I();null!==h;)p.push(h),h=I();if(null!==p)if(125===t.charCodeAt(L)?(h="}",L++):(h=null,0===R&&i('"}"')),null!==h){for(f=[],g=I();null!==g;)f.push(g),g=I();null!==f?e=[e,n,r,o,s,l,c,u,d,p,h,f]:(e=null,L=v)}else e=null,L=v;else e=null,L=v}else e=null,L=v;else e=null,L=v}else e=null,L=v;else e=null,L=v}else e=null,L=v;else e=null,L=v}else e=null,L=v;else e=null,L=v;else e=null,L=v;return null!==e&&(e=function(e,t,n,i){return{type:t,id:n,stmts:i}}(m,e[2],e[4],e[8])),null===e&&(L=m),e}function a(){var e,n,r,a,s,l,c,u,d,p,h;if(d=L,p=L,e=o(),null!==e){for(n=[],r=I();null!==r;)n.push(r),r=I();if(null!==n)if(59===t.charCodeAt(L)?(r=";",L++):(r=null,0===R&&i('";"')),r=null!==r?r:"",null!==r){for(a=[],h=L,s=[],l=I();null!==l;)s.push(l),l=I();if(null!==s)if(l=o(),null!==l){for(c=[],u=I();null!==u;)c.push(u),u=I();null!==c?(59===t.charCodeAt(L)?(u=";",L++):(u=null,0===R&&i('";"')),u=null!==u?u:"",null!==u?s=[s,l,c,u]:(s=null,L=h)):(s=null,L=h)}else s=null,L=h;else s=null,L=h;for(;null!==s;){for(a.push(s),h=L,s=[],l=I();null!==l;)s.push(l),l=I();if(null!==s)if(l=o(),null!==l){for(c=[],u=I();null!==u;)c.push(u),u=I();null!==c?(59===t.charCodeAt(L)?(u=";",L++):(u=null,0===R&&i('";"')),u=null!==u?u:"",null!==u?s=[s,l,c,u]:(s=null,L=h)):(s=null,L=h)}else s=null,L=h;else s=null,L=h}null!==a?e=[e,n,r,a]:(e=null,L=p)}else e=null,L=p;else e=null,L=p}else e=null,L=p;return null!==e&&(e=function(e,t,n){for(var i=[t],r=0;r<n.length;++r)i.push(n[r][1]);return i}(d,e[0],e[3])),null===e&&(L=d),e}function o(){var e;return e=s(),null===e&&(e=d(),null===e&&(e=l(),null===e&&(e=u(),null===e&&(e=c())))),e}function s(){var e,t,n,i,r;if(i=L,r=L,e=S(),null===e&&(e=k(),null===e&&(e=C())),null!==e){for(t=[],n=I();null!==n;)t.push(n),n=I();null!==t?(n=p(),null!==n?e=[e,t,n]:(e=null,L=r)):(e=null,L=r)}else e=null,L=r;return null!==e&&(e=function(e,t,n){return{type:"attr",attrType:t,attrs:n||{}}}(i,e[0],e[2])),null===e&&(L=i),e}function l(){var e,n,r,a,o,s,l;if(s=L,l=L,e=x(),null!==e){for(n=[],r=I();null!==r;)n.push(r),r=I();if(null!==n)if(61===t.charCodeAt(L)?(r="=",L++):(r=null,0===R&&i('"="')),null!==r){for(a=[],o=I();null!==o;)a.push(o),o=I();null!==a?(o=x(),null!==o?e=[e,n,r,a,o]:(e=null,L=l)):(e=null,L=l)}else e=null,L=l;else e=null,L=l}else e=null,L=l;return null!==e&&(e=function(e,t,n){var i={};return i[t]=n,{type:"inlineAttr",attrs:i}}(s,e[0],e[4])),null===e&&(L=s),e}function c(){var e,t,n,i,r;if(i=L,r=L,e=y(),null!==e){for(t=[],n=I();null!==n;)t.push(n),n=I();null!==t?(n=p(),n=null!==n?n:"",null!==n?e=[e,t,n]:(e=null,L=r)):(e=null,L=r)}else e=null,L=r;return null!==e&&(e=function(e,t,n){return{type:"node",id:t,attrs:n||{}}}(i,e[0],e[2])),null===e&&(L=i),e}function u(){var e,t,n,i,r,a,o;if(a=L,o=L,e=v(),null!==e){for(t=[],n=I();null!==n;)t.push(n),n=I();if(null!==t)if(n=g(),null!==n){for(i=[],r=I();null!==r;)i.push(r),r=I();null!==i?(r=p(),r=null!==r?r:"",null!==r?e=[e,t,n,i,r]:(e=null,L=o)):(e=null,L=o)}else e=null,L=o;else e=null,L=o}else e=null,L=o;return null!==e&&(e=function(e,t,n,i){for(var r=[t],a=0;a<n.length;++a)r.push(n[a]);return{type:"edge",elems:r,attrs:i||{}}}(a,e[0],e[2],e[4])),null===e&&(L=a),e}function d(){var e,n,r,o,s,l,c,u,d,p;if(c=L,u=L,d=L,e=T(),null!==e){for(n=[],r=I();null!==r;)n.push(r),r=I();if(null!==n){if(p=L,r=x(),null!==r){for(o=[],s=I();null!==s;)o.push(s),s=I();null!==o?r=[r,o]:(r=null,L=p)}else r=null,L=p;r=null!==r?r:"",null!==r?e=[e,n,r]:(e=null,L=d)}else e=null,L=d}else e=null,L=d;if(e=null!==e?e:"",null!==e)if(123===t.charCodeAt(L)?(n="{",L++):(n=null,0===R&&i('"{"')),null!==n){for(r=[],o=I();null!==o;)r.push(o),o=I();if(null!==r)if(o=a(),null!==o){for(s=[],l=I();null!==l;)s.push(l),l=I();null!==s?(125===t.charCodeAt(L)?(l="}",L++):(l=null,0===R&&i('"}"')),null!==l?e=[e,n,r,o,s,l]:(e=null,L=u)):(e=null,L=u)}else e=null,L=u;else e=null,L=u}else e=null,L=u;else e=null,L=u;return null!==e&&(e=function(e,t,n){return t=t[2]||[],{type:"subgraph",id:t[0],stmts:n}}(c,e[0],e[3])),null===e&&(L=c),e}function p(){var e,t,n,i,r,a,o;if(r=L,a=L,e=h(),null!==e){for(t=[],o=L,n=[],i=I();null!==i;)n.push(i),i=I();for(null!==n?(i=h(),null!==i?n=[n,i]:(n=null,L=o)):(n=null,L=o);null!==n;){for(t.push(n),o=L,n=[],i=I();null!==i;)n.push(i),i=I();null!==n?(i=h(),null!==i?n=[n,i]:(n=null,L=o)):(n=null,L=o)}null!==t?e=[e,t]:(e=null,L=a)}else e=null,L=a;return null!==e&&(e=function(e,t,n){for(var i=t,r=0;r<n.length;++r)i=N(i,n[r][1]);return i}(r,e[0],e[1])),null===e&&(L=r),e}function h(){var e,n,r,a,o,s,l;if(s=L,l=L,91===t.charCodeAt(L)?(e="[",L++):(e=null,0===R&&i('"["')),null!==e){for(n=[],r=I();null!==r;)n.push(r),r=I();if(null!==n)if(r=f(),r=null!==r?r:"",null!==r){for(a=[],o=I();null!==o;)a.push(o),o=I();null!==a?(93===t.charCodeAt(L)?(o="]",L++):(o=null,0===R&&i('"]"')),null!==o?e=[e,n,r,a,o]:(e=null,L=l)):(e=null,L=l)}else e=null,L=l;else e=null,L=l}else e=null,L=l;return null!==e&&(e=function(e,t){return t}(s,e[2])),null===e&&(L=s),e}function f(){var e,n,r,a,o,s,l,c,u;if(l=L,c=L,e=m(),null!==e){for(n=[],u=L,r=[],a=I();null!==a;)r.push(a),a=I();if(null!==r)if(44===t.charCodeAt(L)?(a=",",L++):(a=null,0===R&&i('","')),a=null!==a?a:"",null!==a){for(o=[],s=I();null!==s;)o.push(s),s=I();null!==o?(s=m(),null!==s?r=[r,a,o,s]:(r=null,L=u)):(r=null,L=u)}else r=null,L=u;else r=null,L=u;for(;null!==r;){for(n.push(r),u=L,r=[],a=I();null!==a;)r.push(a),a=I();if(null!==r)if(44===t.charCodeAt(L)?(a=",",L++):(a=null,0===R&&i('","')),a=null!==a?a:"",null!==a){for(o=[],s=I();null!==s;)o.push(s),s=I();null!==o?(s=m(),null!==s?r=[r,a,o,s]:(r=null,L=u)):(r=null,L=u)}else r=null,L=u;else r=null,L=u}null!==n?e=[e,n]:(e=null,L=c)}else e=null,L=c;return null!==e&&(e=function(e,t,n){for(var i=t,r=0;r<n.length;++r)i=N(i,n[r][3]);return i}(l,e[0],e[1])),null===e&&(L=l),e}function g(){var e,n,r,a,o,s,l,c;if(s=L,l=L,c=L,"--"===t.substr(L,2)?(e="--",L+=2):(e=null,0===R&&i('"--"')),null!==e?(n=function(e){return O}(L)?null:"",null!==n?e=[e,n]:(e=null,L=c)):(e=null,L=c),null===e&&(c=L,"->"===t.substr(L,2)?(e="->",L+=2):(e=null,0===R&&i('"->"')),null!==e?(n=function(e){return O}(L)?"":null,null!==n?e=[e,n]:(e=null,L=c)):(e=null,L=c)),null!==e){for(n=[],r=I();null!==r;)n.push(r),r=I();if(null!==n)if(r=v(),null!==r){for(a=[],o=I();null!==o;)a.push(o),o=I();null!==a?(o=g(),o=null!==o?o:"",null!==o?e=[e,n,r,a,o]:(e=null,L=l)):(e=null,L=l)}else e=null,L=l;else e=null,L=l}else e=null,L=l;return null!==e&&(e=function(e,t,n){for(var i=[t],r=0;r<n.length;++r)i.push(n[r]);return i}(s,e[2],e[4])),null===e&&(L=s),e}function m(){var e,n,r,a,o,s,l,c;if(s=L,l=L,e=x(),null!==e){for(c=L,n=[],r=I();null!==r;)n.push(r),r=I();if(null!==n)if(61===t.charCodeAt(L)?(r="=",L++):(r=null,0===R&&i('"="')),null!==r){for(a=[],o=I();null!==o;)a.push(o),o=I();null!==a?(o=x(),null!==o?n=[n,r,a,o]:(n=null,L=c)):(n=null,L=c)}else n=null,L=c;else n=null,L=c;n=null!==n?n:"",null!==n?e=[e,n]:(e=null,L=l)}else e=null,L=l;return null!==e&&(e=function(e,t,n){var i={};return i[t]=n[3],i}(s,e[0],e[1])),null===e&&(L=s),e}function v(){var e,t;return e=d(),null===e&&(t=L,e=y(),null!==e&&(e=function(e,t){return{type:"node",id:t,attrs:{}}}(t,e)),null===e&&(L=t)),e}function y(){var e,t,n,i,r;if(i=L,r=L,e=x(),null!==e){for(t=[],n=I();null!==n;)t.push(n),n=I();null!==t?(n=b(),n=null!==n?n:"",null!==n?e=[e,t,n]:(e=null,L=r)):(e=null,L=r)}else e=null,L=r;return null!==e&&(e=function(e,t){return t}(i,e[0])),null===e&&(L=i),e}function b(){var e,n,r,a,o,s,l,c,u;if(c=L,58===t.charCodeAt(L)?(e=":",L++):(e=null,0===R&&i('":"')),null!==e){for(n=[],r=I();null!==r;)n.push(r),r=I();if(null!==n)if(r=x(),null!==r){for(a=[],o=I();null!==o;)a.push(o),o=I();if(null!==a){if(u=L,58===t.charCodeAt(L)?(o=":",L++):(o=null,0===R&&i('":"')),null!==o){for(s=[],l=I();null!==l;)s.push(l),l=I();null!==s?(l=w(),null!==l?o=[o,s,l]:(o=null,L=u)):(o=null,L=u)}else o=null,L=u;o=null!==o?o:"",null!==o?e=[e,n,r,a,o]:(e=null,L=c)}else e=null,L=c}else e=null,L=c;else e=null,L=c}else e=null,L=c;return e}function w(){var e;return 110===t.charCodeAt(L)?(e="n",L++):(e=null,0===R&&i('"n"')),null===e&&("ne"===t.substr(L,2)?(e="ne",L+=2):(e=null,0===R&&i('"ne"')),null===e&&(101===t.charCodeAt(L)?(e="e",L++):(e=null,0===R&&i('"e"')),null===e&&("se"===t.substr(L,2)?(e="se",L+=2):(e=null,0===R&&i('"se"')),null===e&&(115===t.charCodeAt(L)?(e="s",L++):(e=null,0===R&&i('"s"')),null===e&&("sw"===t.substr(L,2)?(e="sw",L+=2):(e=null,0===R&&i('"sw"')),null===e&&(119===t.charCodeAt(L)?(e="w",L++):(e=null,0===R&&i('"w"')),null===e&&("nw"===t.substr(L,2)?(e="nw",L+=2):(e=null,0===R&&i('"nw"')),null===e&&(99===t.charCodeAt(L)?(e="c",L++):(e=null,0===R&&i('"c"')),null===e&&(95===t.charCodeAt(L)?(e="_",L++):(e=null,0===R&&i('"_"'))))))))))),e}function x(){var e,n,r,a,o,s,l,c,u;if(R++,s=L,l=L,/^[a-zA-Z\u0200-\u0377_]/.test(t.charAt(L))?(e=t.charAt(L),L++):(e=null,0===R&&i("[a-zA-Z\\u0200-\\u0377_]")),null!==e){for(n=[],/^[a-zA-Z\u0200-\u0377_0-9]/.test(t.charAt(L))?(r=t.charAt(L),L++):(r=null,0===R&&i("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==r;)n.push(r),/^[a-zA-Z\u0200-\u0377_0-9]/.test(t.charAt(L))?(r=t.charAt(L),L++):(r=null,0===R&&i("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==n?e=[e,n]:(e=null,L=l)}else e=null,L=l;if(null!==e&&(e=function(e,t,n){return t+n.join("")}(s,e[0],e[1])),null===e&&(L=s),null===e){if(s=L,l=L,45===t.charCodeAt(L)?(e="-",L++):(e=null,0===R&&i('"-"')),e=null!==e?e:"",null!==e)if(46===t.charCodeAt(L)?(n=".",L++):(n=null,0===R&&i('"."')),null!==n){if(/^[0-9]/.test(t.charAt(L))?(a=t.charAt(L),L++):(a=null,0===R&&i("[0-9]")),null!==a)for(r=[];null!==a;)r.push(a),/^[0-9]/.test(t.charAt(L))?(a=t.charAt(L),L++):(a=null,0===R&&i("[0-9]"));else r=null;null!==r?e=[e,n,r]:(e=null,L=l)}else e=null,L=l;else e=null,L=l;if(null!==e&&(e=function(e,t,n,i){return t+n+i.join("")}(s,e[0],e[1],e[2])),null===e&&(L=s),null===e){if(s=L,l=L,45===t.charCodeAt(L)?(e="-",L++):(e=null,0===R&&i('"-"')),e=null!==e?e:"",null!==e){if(/^[0-9]/.test(t.charAt(L))?(r=t.charAt(L),L++):(r=null,0===R&&i("[0-9]")),null!==r)for(n=[];null!==r;)n.push(r),/^[0-9]/.test(t.charAt(L))?(r=t.charAt(L),L++):(r=null,0===R&&i("[0-9]"));else n=null;if(null!==n){if(c=L,46===t.charCodeAt(L)?(r=".",L++):(r=null,0===R&&i('"."')),null!==r){for(a=[],/^[0-9]/.test(t.charAt(L))?(o=t.charAt(L),L++):(o=null,0===R&&i("[0-9]"));null!==o;)a.push(o),/^[0-9]/.test(t.charAt(L))?(o=t.charAt(L),L++):(o=null,0===R&&i("[0-9]"));null!==a?r=[r,a]:(r=null,L=c)}else r=null,L=c;r=null!==r?r:"",null!==r?e=[e,n,r]:(e=null,L=l)}else e=null,L=l}else e=null,L=l;if(null!==e&&(e=function(e,t,n,i){return t+n.join("")+(i[0]||"")+(i[1]||[]).join("")}(s,e[0],e[1],e[2])),null===e&&(L=s),null===e){if(s=L,l=L,34===t.charCodeAt(L)?(e='"',L++):(e=null,0===R&&i('"\\""')),null!==e){if(c=L,'\\"'===t.substr(L,2)?(r='\\"',L+=2):(r=null,0===R&&i('"\\\\\\""')),null!==r&&(r=function(e){return'"'}(c)),null===r&&(L=c),null===r&&(c=L,u=L,92===t.charCodeAt(L)?(r="\\",L++):(r=null,0===R&&i('"\\\\"')),null!==r?(/^[^"]/.test(t.charAt(L))?(a=t.charAt(L),L++):(a=null,0===R&&i('[^"]')),null!==a?r=[r,a]:(r=null,L=u)):(r=null,L=u),null!==r&&(r=function(e,t){return"\\"+t}(c,r[1])),null===r&&(L=c),null===r&&(/^[^"]/.test(t.charAt(L))?(r=t.charAt(L),L++):(r=null,0===R&&i('[^"]')))),null!==r)for(n=[];null!==r;)n.push(r),c=L,'\\"'===t.substr(L,2)?(r='\\"',L+=2):(r=null,0===R&&i('"\\\\\\""')),null!==r&&(r=function(e){return'"'}(c)),null===r&&(L=c),null===r&&(c=L,u=L,92===t.charCodeAt(L)?(r="\\",L++):(r=null,0===R&&i('"\\\\"')),null!==r?(/^[^"]/.test(t.charAt(L))?(a=t.charAt(L),L++):(a=null,0===R&&i('[^"]')),null!==a?r=[r,a]:(r=null,L=u)):(r=null,L=u),null!==r&&(r=function(e,t){return"\\"+t}(c,r[1])),null===r&&(L=c),null===r&&(/^[^"]/.test(t.charAt(L))?(r=t.charAt(L),
L++):(r=null,0===R&&i('[^"]'))));else n=null;null!==n?(34===t.charCodeAt(L)?(r='"',L++):(r=null,0===R&&i('"\\""')),null!==r?e=[e,n,r]:(e=null,L=l)):(e=null,L=l)}else e=null,L=l;null!==e&&(e=function(e,t){return t.join("")}(s,e[1])),null===e&&(L=s)}}}return R--,0===R&&null===e&&i("identifier"),e}function k(){var e,n;return n=L,"node"===t.substr(L,4).toLowerCase()?(e=t.substr(L,4),L+=4):(e=null,0===R&&i('"node"')),null!==e&&(e=function(e,t){return t.toLowerCase()}(n,e)),null===e&&(L=n),e}function C(){var e,n;return n=L,"edge"===t.substr(L,4).toLowerCase()?(e=t.substr(L,4),L+=4):(e=null,0===R&&i('"edge"')),null!==e&&(e=function(e,t){return t.toLowerCase()}(n,e)),null===e&&(L=n),e}function S(){var e,n;return n=L,"buildGraph"===t.substr(L,5).toLowerCase()?(e=t.substr(L,5),L+=5):(e=null,0===R&&i('"buildGraph"')),null!==e&&(e=function(e,t){return t.toLowerCase()}(n,e)),null===e&&(L=n),e}function _(){var e,n;return n=L,"digraph"===t.substr(L,7).toLowerCase()?(e=t.substr(L,7),L+=7):(e=null,0===R&&i('"digraph"')),null!==e&&(e=function(e,t){return t.toLowerCase()}(n,e)),null===e&&(L=n),e}function T(){var e,n;return n=L,"subgraph"===t.substr(L,8).toLowerCase()?(e=t.substr(L,8),L+=8):(e=null,0===R&&i('"subgraph"')),null!==e&&(e=function(e,t){return t.toLowerCase()}(n,e)),null===e&&(L=n),e}function $(){var e,n;return n=L,"strict"===t.substr(L,6).toLowerCase()?(e=t.substr(L,6),L+=6):(e=null,0===R&&i('"strict"')),null!==e&&(e=function(e,t){return t.toLowerCase()}(n,e)),null===e&&(L=n),e}function A(){var e,t;return e=S(),null===e&&(t=L,e=_(),null!==e&&(e=function(e,t){return O="digraph"===t,t}(t,e)),null===e&&(L=t)),e}function E(){var e,n;if(R++,/^[ \t\r\n]/.test(t.charAt(L))?(n=t.charAt(L),L++):(n=null,0===R&&i("[ \\t\\r\\n]")),null!==n)for(e=[];null!==n;)e.push(n),/^[ \t\r\n]/.test(t.charAt(L))?(n=t.charAt(L),L++):(n=null,0===R&&i("[ \\t\\r\\n]"));else e=null;return R--,0===R&&null===e&&i("whitespace"),e}function P(){var e,n,r,a,o,s,l;if(R++,o=L,"//"===t.substr(L,2)?(e="//",L+=2):(e=null,0===R&&i('"//"')),null!==e){for(n=[],/^[^\n]/.test(t.charAt(L))?(r=t.charAt(L),L++):(r=null,0===R&&i("[^\\n]"));null!==r;)n.push(r),/^[^\n]/.test(t.charAt(L))?(r=t.charAt(L),L++):(r=null,0===R&&i("[^\\n]"));null!==n?e=[e,n]:(e=null,L=o)}else e=null,L=o;if(null===e)if(o=L,"/*"===t.substr(L,2)?(e="/*",L+=2):(e=null,0===R&&i('"/*"')),null!==e){for(n=[],s=L,l=L,R++,"*/"===t.substr(L,2)?(r="*/",L+=2):(r=null,0===R&&i('"*/"')),R--,null===r?r="":(r=null,L=l),null!==r?(t.length>L?(a=t.charAt(L),L++):(a=null,0===R&&i("any character")),null!==a?r=[r,a]:(r=null,L=s)):(r=null,L=s);null!==r;)n.push(r),s=L,l=L,R++,"*/"===t.substr(L,2)?(r="*/",L+=2):(r=null,0===R&&i('"*/"')),R--,null===r?r="":(r=null,L=l),null!==r?(t.length>L?(a=t.charAt(L),L++):(a=null,0===R&&i("any character")),null!==a?r=[r,a]:(r=null,L=s)):(r=null,L=s);null!==n?("*/"===t.substr(L,2)?(r="*/",L+=2):(r=null,0===R&&i('"*/"')),null!==r?e=[e,n,r]:(e=null,L=o)):(e=null,L=o)}else e=null,L=o;return R--,0===R&&null===e&&i("comment"),e}function I(){var e;return e=E(),null===e&&(e=P()),e}function D(e){e.sort();for(var t=null,n=[],i=0;i<e.length;i++)e[i]!==t&&(n.push(e[i]),t=e[i]);return n}function M(){for(var e=1,n=1,i=!1,r=0;r<Math.max(L,F);r++){var a=t.charAt(r);"\n"===a?(i||e++,n=1,i=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(e++,n=1,i=!0):(n++,i=!1)}return{line:e,column:n}}function N(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n}var j={start:r,stmtList:a,stmt:o,attrStmt:s,inlineAttrStmt:l,nodeStmt:c,edgeStmt:u,subgraphStmt:d,attrList:p,attrListBlock:h,aList:f,edgeRHS:g,idDef:m,nodeIdOrSubgraph:v,nodeId:y,port:b,compassPt:w,id:x,node:k,edge:C,graph:S,digraph:_,subgraph:T,strict:$,graphType:A,whitespace:E,comment:P,_:I};if(void 0!==n){if(void 0===j[n])throw new Error("Invalid rule name: "+e(n)+".")}else n="start";var O,L=0,R=0,F=0,U=[],z=j[n]();if(null===z||L!==t.length){var q=Math.max(L,F),B=q<t.length?t.charAt(q):null,H=M();throw new this.SyntaxError(D(U),B,q,H.line,H.column)}return z},toSource:function(){return this._source}};return t.SyntaxError=function(t,n,i,r,a){function o(t,n){var i,r;switch(t.length){case 0:i="end of input";break;case 1:i=t[0];break;default:i=t.slice(0,t.length-1).join(", ")+" or "+t[t.length-1]}return r=n?e(n):"end of input","Expected "+i+" but "+r+" found."}this.name="SyntaxError",this.expected=t,this.found=n,this.message=o(t,n),this.offset=i,this.line=r,this.column=a},t.SyntaxError.prototype=Error.prototype,t}()}(),function(){var e=function(e){function t(i){if(!(this instanceof arguments.callee))return new t(i);this.CLIENT_VERSION="1.1.3";var r=[],a={},o=!1;"string"==typeof i&&(i={url:i}),e.extend(a,m,i),this.request=function(n,i){var r=e.extend({},a,i);g(r.url,"No URL given");var o={};if(e.each(["username","password","timeout"],function(e,t){r[t]&&(o[t]=r[t])}),o.username&&o.password&&(window.btoa&&(o.beforeSend=function(e){var t=o.username+":"+o.password;e.setRequestHeader("Authorization","Basic "+window.btoa(t))}),o.xhrFields={withCredentials:!0}),"post"===l(n,r)?(e.extend(o,y),o.data=JSON.stringify(n),o.url=d(r.url)):(e.extend(o,v),o.dataType=r.jsonp?"jsonp":"json",o.url=r.url+"/"+u(n)),o.url=c(o.url,r),r.ajaxError&&(o.error=r.ajaxError),r.success){var p=s(r.success),h=s(r.error);return o.success=function(n){for(var i=e.isArray(n)?n:[n],r=0;r<i.length;r++){var a=i[r];t.isError(a)?h(a,r):p(a,r)}},e.ajax(o),null}if(r.jsonp)throw Error("JSONP is not supported for synchronous requests");o.async=!1;var m=e.ajax(o);return f(m)?e.parseJSON(m.responseText):null},this.register=function(){if(arguments.length<2)throw"At a least one request must be provided";var t,n=arguments[0],i=Array.prototype.slice.call(arguments,1);if("object"==typeof n){if(n.success&&n.error)t={success:n.success,error:n.error};else{if(!n.callback)throw"Either 'callback' or ('success' and 'error') callback must be provided when registering a Jolokia job";t={callback:n.callback}}t=e.extend(t,{config:n.config,onlyIfModified:n.onlyIfModified})}else{if("function"!=typeof n)throw"First argument must be either a callback func or an object with 'success' and 'error' attributes";t={success:null,error:null,callback:n}}if(!i)throw"No requests given";t.requests=i;var a=r.length;return r[a]=t,a},this.unregister=function(e){e<r.length&&(r[e]=void 0)},this.jobs=function(){for(var e=[],t=r.length,n=0;t>n;n++)r[n]&&e.push(n);return e},this.start=function(e){if(e=e||a.fetchInterval||3e4,o){if(e===a.fetchInterval)return;this.stop()}a.fetchInterval=e,this.timerId=setInterval(n(this,r),e),o=!0},this.stop=function(){(o||void 0==this.timerId)&&(clearInterval(this.timerId),this.timerId=null,o=!1)},this.isRunning=function(){return o}}function n(e,t){return function(){var n,s,l=[],c=[],u=t.length,d=[];for(n=0;u>n;n++){var p=t[n];if(p){var h=p.requests.length;if(p.success){var f=o(p,n),g=a(p,n);for(s=0;h>s;s++)d.push(i(p,s)),c.push(f),l.push(g)}else{var m=r(p,e);for(s=0;h-1>s;s++)d.push(i(p,s)),c.push(m.cb),l.push(m.cb);d.push(i(p,h-1)),c.push(m.lcb),l.push(m.lcb)}}}var v={success:function(t,n){return c[n].apply(e,[t,n])},error:function(t,n){return l[n].apply(e,[t,n])}};return e.request(d,v)}}function i(t,n){var i=t.requests[n],r=t.config||{},a=t.onlyIfModified&&t.lastModified?{ifModifiedSince:t.lastModified}:{};return i.config=e.extend({},r,i.config,a),i}function r(e,t){function n(e,t){304!=e.status&&((0==a||e.timestamp<a)&&(a=e.timestamp),i.push(e))}var i=[],r=e.callback,a=0;return{cb:n,lcb:function(o,s){n(o),i.length>0&&(e.lastModified=a,r.apply(t,i))}}}function a(e,t){var n=e.error;return function(e,i){304!=e.status&&n&&n(e,t,i)}}function o(e,t){var n=e.success;return function(i,r){n&&(e.onlyIfModified&&(e.lastModified=i.timestamp),n(i,t,r))}}function s(t){if(null==t)return function(e){console.warn("Ignoring response "+JSON.stringify(e))};if("ignore"===t)return function(){};var n=e.isArray(t)?t:[t];return function(e,t){n[t%n.length](e,t)}}function l(t,n){var i,r=n&&n.method?n.method.toLowerCase():null;if(r){if("get"===r){if(e.isArray(t))throw new Error("Cannot use GET with bulk requests");if("read"===t.type.toLowerCase()&&e.isArray(t.attribute))throw new Error("Cannot use GET for read with multiple attributes");if(t.target)throw new Error("Cannot use GET request with proxy mode");if(t.config)throw new Error("Cannot use GET with request specific config")}i=r}else i=e.isArray(t)||t.config||"read"===t.type.toLowerCase()&&e.isArray(t.attribute)||t.target?"post":"get";if(n.jsonp&&"post"===i)throw new Error("Can not use JSONP with POST requests");return i}function c(t,n){var i=t.indexOf("?")>0?"&":"?";return e.each(b,function(e,r){null!=n[r]&&(t+=i+r+"="+n[r],i="&")}),t}function u(n){var i=n.type;g(i,"No request type given for building a GET request"),i=i.toLowerCase();var r=w[i];g(r,"Unknown request type "+i);var a=r(n),o=a.parts||{},s=i;return e.each(o,function(e,n){s+="/"+t.escape(n)}),a.path&&(s+=("/"==a.path[0]?"":"/")+a.path),s}function d(e){return e.replace(/\/*$/,"/")}function p(t){if(null==t)return"[null]";if(e.isArray(t)){for(var n="",i=0;i<t.length;i++)n+=null==t?"[null]":h(t[i]),i<t.length-1&&(n+=",");return n}return h(t)}function h(e){return"string"==typeof e&&0==e.length?'""':e.toString()}function f(e){try{return!e.status&&"file:"===location.protocol||e.status>=200&&e.status<300||304===e.status||1223===e.status}catch(t){}return!1}function g(e,t){if(null==e)throw new Error(t)}var m={type:"POST",jsonp:!1},v={type:"GET"},y={type:"POST",processData:!1,dataType:"json",contentType:"text/json"},b=["maxDepth","maxCollectionSize","maxObjects","ignoreErrors","canonicalNaming","serializeException","includeStackTrace","ifModifiedSince"],w={read:function(e){return null==e.attribute?{parts:[e.mbean]}:{parts:[e.mbean,e.attribute],path:e.path}},write:function(e){return{parts:[e.mbean,e.attribute,p(e.value)],path:e.path}},exec:function(t){var n=[t.mbean,t.operation];return t.arguments&&t.arguments.length>0&&e.each(t.arguments,function(e,t){n.push(p(t))}),{parts:n}},version:function(){return{}},search:function(e){return{parts:[e.mbean]}},list:function(e){return{path:e.path}}};return t.prototype.escape=t.escape=function(e){return encodeURIComponent(e.replace(/!/g,"!!").replace(/\//g,"!/"))},t.prototype.isError=t.isError=function(e){return null==e.status||200!=e.status},t};!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):e.Jolokia=t(e.jQuery)}(this,function(t){return e(t)})}(),function(e){function t(e){return e}function n(){}function r(e){return Math.floor(e/1e3)}function a(e){{var t=e.indexOf("|"),n=e.substring(0,t),i=n.lastIndexOf(","),r=n.lastIndexOf(",",i-1),a=n.lastIndexOf(",",r-1);1e3*n.substring(a+1,r),1e3*n.substring(i+1)}return e.substring(t+1).split(",").slice(1).map(function(e){return+e})}function o(e){if(!(e instanceof n))throw new Error("invalid context");this.context=e}function s(e,t){return function(n,i,r,a){e(new Date(+n+t),new Date(+i+t),r,a)}}function l(e,t){o.call(this,e),t=+t;var n=t+"";this.valueOf=function(){return t},this.toString=function(){return n}}function c(e,t){function n(t,n){if(n instanceof o){if(t.context!==n.context)throw new Error("mismatch context")}else n=new l(t.context,n);o.call(this,t.context),this.left=t,this.right=n,this.toString=function(){return t+" "+e+" "+n}}var i=n.prototype=Object.create(o.prototype);return i.valueAt=function(e){return t(this.left.valueAt(e),this.right.valueAt(e))},i.shift=function(e){return new n(this.left.shift(e),this.right.shift(e))},i.on=function(e,t){return arguments.length<2?this.left.on(e):(this.left.on(e,t),this.right.on(e,t),this)},function(e){return new n(this,e)}}function u(e){return 16777214&e}function d(e){return(e+1&16777214)-1}function p(e){e.style("position","absolute").style("top",0).style("bottom",0).style("width","1px").style("pointer-events","none")}function h(e){return e+"px"}var f=e.cubism={version:"1.6.0"},g=0;f.option=function(e,t){var n=f.options(e);return n.length?n[0]:t},f.options=function(e,t){for(var n,i=location.search.substring(1).split("&"),r=[],a=-1,o=i.length;++a<o;)(n=i[a].split("="))[0]==e&&r.push(decodeURIComponent(n[1]));return r.length||arguments.length<2?r:t},f.context=function(){function e(){var e=Date.now();return i=new Date(Math.floor((e-d-p)/c)*c),t=new Date(i-u*c),a=new Date(Math.floor((e-d)/c)*c),r=new Date(a-u*c),f.domain([t,i]),l}var t,i,r,a,o,s,l=new n,c=1e4,u=1440,d=5e3,p=5e3,h=d3.dispatch("prepare","beforechange","change","focus"),f=l.scale=d3.time.scale().range([0,u]);return l.start=function(){o&&clearTimeout(o);var e=+a+d-Date.now();return p>e&&(e+=c),o=setTimeout(function n(){a=new Date(Math.floor((Date.now()-d)/c)*c),r=new Date(a-u*c),h.prepare.call(l,r,a),setTimeout(function(){f.domain([t=r,i=a]),h.beforechange.call(l,r,a),h.change.call(l,r,a),h.focus.call(l,s)},p),o=setTimeout(n,c)},e),l},l.stop=function(){return o=clearTimeout(o),l},o=setTimeout(l.start,10),l.step=function(t){return arguments.length?(c=+t,e()):c},l.size=function(t){return arguments.length?(f.range([0,u=+t]),e()):u},l.serverDelay=function(t){return arguments.length?(d=+t,e()):d},l.clientDelay=function(t){return arguments.length?(p=+t,e()):p},l.focus=function(e){return h.focus.call(l,s=e),l},l.on=function(e,n){return arguments.length<2?h.on(e):(h.on(e,n),null!=n&&(/^prepare(\.|$)/.test(e)&&n.call(l,r,a),/^beforechange(\.|$)/.test(e)&&n.call(l,t,i),/^change(\.|$)/.test(e)&&n.call(l,t,i),/^focus(\.|$)/.test(e)&&n.call(l,s)),l)},d3.select(window).on("keydown.context-"+ ++g,function(){switch(!d3.event.metaKey&&d3.event.keyCode){case 37:null==s&&(s=u-1),s>0&&l.focus(--s);break;case 39:null==s&&(s=u-2),u-1>s&&l.focus(++s);break;default:return}d3.event.preventDefault()}),e()};var m=f.context.prototype=n.prototype;m.constant=function(e){return new l(this,+e)},m.cube=function(e){arguments.length||(e="");var t={},n=this;return t.metric=function(t){return n.metric(function(n,i,r,a){d3.json(e+"/1.0/metric?expression="+encodeURIComponent(t)+"&start="+v(n)+"&stop="+v(i)+"&step="+r,function(e){return e?void a(null,e.map(function(e){return e.value})):a(new Error("unable to load data"))})},t+="")},t.toString=function(){return e},t};var v=d3.time.format.iso;m.librato=function(e,t){function n(e){var t=avail_rsts[0],n=avail_rsts[avail_rsts.length];if(e>=n)return n;if(t>=e)return t;var i,r,a;for(a=e;n>=a;a++)if(i=avail_rsts.indexOf(a),i>-1){r=avail_rsts[i];break}var o;for(a=e;a>=t;a--)if(i=avail_rsts.indexOf(a),i>-1){o=avail_rsts[i];break}return e-o>r-e?r:o}function r(e,t,i){var r,a=t-e,o=2419200,s=604800,l=172800;return a>o?3600:(r=n(i),a>s&&900>r?900:a>l&&60>r?60:r)}var a={},o=this;auth_string="Basic "+btoa(e+":"+t),avail_rsts=[1,60,900,3600];var s=function(e){function t(t,n,i){var o="compose="+e+"&start_time="+t+"&end_time="+n+"&resolution="+r(t,n,i);return a+"?"+o}function n(e,t,n,r){var a=[];for(i=e;i<=t;i+=n){for(var o=[];r.length&&r[0].measure_time<=i;)o.push(r.shift().value);var s;s=o.length?o.reduce(function(e,t){return e+t})/o.length:a.length?a[a.length-1]:0,a.push(s)}return a}var a="https://metrics-api.librato.com/v1/metrics";return request={},request.fire=function(e,i,r,a){function o(l){d3.json(l).header("X-Requested-With","XMLHttpRequest").header("Authorization",auth_string).header("Librato-User-Agent","cubism/"+f.version).get(function(l,c){if(!l){if(0===c.measurements.length)return;c.measurements[0].series.forEach(function(e){s.push(e)});var u="query"in c&&"next_time"in c.query;if(u)o(t(c.query.next_time,i,r));else{var d=n(e,i,r,s);a(d)}}})}var s=[];o(t(e,i,r))},request};return a.metric=function(e){return o.metric(function(t,n,i,r){s(e).fire(y(t),y(n),y(i),function(e){r(null,e)})},e+="")},a.toString=function(){return"librato"},a};var y=function(e){return Math.floor(e/1e3)};m.graphite=function(e){arguments.length||(e="");var t={},n=this;return t.metric=function(t){var i="sum",o=n.metric(function(n,o,s,l){var c=t;1e4!==s&&(c="summarize("+c+",'"+(s%36e5?s%6e4?s/1e3+"sec":s/6e4+"min":s/36e5+"hour")+"','"+i+"')"),d3.text(e+"/render?format=raw&target="+encodeURIComponent("alias("+c+",'')")+"&from="+r(n-2*s)+"&until="+r(o-1e3),function(e){return e?void l(null,a(e)):l(new Error("unable to load data"))})},t+="");return o.summarize=function(e){return i=e,o},o},t.find=function(t,n){d3.json(e+"/metrics/find?format=completer&query="+encodeURIComponent(t),function(e){return e?void n(null,e.metrics.map(function(e){return e.path})):n(new Error("unable to find metrics"))})},t.toString=function(){return e},t},m.gangliaWeb=function(e){var t="",n="/ganglia2/";arguments.length&&(e.host&&(t=e.host),e.uriPathPrefix&&(n=e.uriPathPrefix,"/"!=n[0]&&(n="/"+n),"/"!=n[n.length-1]&&(n+="/")));var i={},r=this;return i.metric=function(e){var i=e.clusterName,a=e.metricName,o=e.hostName,s=e.isReport||!1,l=e.titleGenerator||function(e){return"clusterName:"+i+" metricName:"+a+(o?" hostName:"+o:"")},c=e.onChangeCallback,u=s?"g":"m",d=r.metric(function(e,r,s,l){function c(){return"c="+i+"&"+u+"="+a+(o?"&h="+o:"")+"&cs="+e/1e3+"&ce="+r/1e3+"&step="+s/1e3+"&graphlot=1"}d3.json(t+n+"graph.php?"+c(),function(e){return e?void l(null,e[0].data):l(new Error("Unable to fetch GangliaWeb data"))})},l(e));return d.toString=function(){return l(e)},c&&d.on("change",c),d},i.toString=function(){return t+n},i};var b=o.prototype;f.metric=o,b.valueAt=function(){return 0/0},b.alias=function(e){return this.toString=function(){return e},this},b.extent=function(){for(var e,t=0,n=this.context.size(),i=1/0,r=-(1/0);++t<n;)e=this.valueAt(t),i>e&&(i=e),e>r&&(r=e);return[i,r]},b.on=function(e,t){return arguments.length<2?null:this},b.shift=function(){return this},b.on=function(){return arguments.length<2?null:this},m.metric=function(e,t){function n(t,n){var i=Math.min(h,Math.round((t-d)/p));if(i&&!a){a=!0,i=Math.min(h,i+w);var r=new Date(n-i*p);e(r,n,p,function(e,t){if(a=!1,e)return console.warn(e);for(var i=isFinite(d)?Math.round((r-d)/p):0,o=0,s=t.length;s>o;++o)f[o+i]=t[o];m.change.call(c,d,n)})}}function i(e,t){isFinite(d)||(d=e),f.splice(0,Math.max(0,Math.min(h,Math.round((e-d)/p)))),d=e,r=t}var r,a,l=this,c=new o(l),u=".metric-"+ ++g,d=-(1/0),p=l.step(),h=l.size(),f=[],m=d3.dispatch("change"),v=0;return c.valueAt=function(e){return f[e]},c.shift=function(t){return l.metric(s(e,+t))},c.on=function(e,t){return arguments.length?(null==t?null!=m.on(e)&&0==--v&&l.on("prepare"+u,null).on("beforechange"+u,null):null==m.on(e)&&1==++v&&l.on("prepare"+u,n).on("beforechange"+u,i),m.on(e,t),null!=t&&/^change(\.|$)/.test(e)&&t.call(l,d,r),c):m.on(e)},arguments.length>1&&(c.toString=function(){return t}),c};var w=6,x=l.prototype=Object.create(o.prototype);x.valueAt=function(){return+this},x.extent=function(){return[+this,+this]},b.add=c("+",function(e,t){return e+t}),b.subtract=c("-",function(e,t){return e-t}),b.multiply=c("*",function(e,t){return e*t}),b.divide=c("/",function(e,t){return e/t}),m.horizon=function(){function e(e){e.on("mousemove.horizon",function(){n.focus(Math.round(d3.mouse(this)[0]))}).on("mouseout.horizon",function(){n.focus(null)}),e.append("canvas").attr("width",a).attr("height",o),e.append("span").attr("class","title").text(u),e.append("span").attr("class","value"),e.each(function(e,u){function h(e,t){T.save();var l=x.extent();v=l.every(isFinite),null!=C&&(l=C);var c=0,u=Math.max(-l[0],l[1]);if(this===n){if(u==m){c=a-w;var d=(e-S)/_;if(a>d){var p=r.getContext("2d");p.clearRect(0,0,a,o),p.drawImage(T.canvas,d,0,a-d,o,0,0,a-d,o),T.clearRect(0,0,a,o),T.drawImage(p.canvas,0,0)}}S=e}s.domain([0,m=u]),T.clearRect(c,0,a-c,o);for(var h,f=0;A>f;++f){T.fillStyle=k[A+f];var g=(f-A+1)*o;s.range([A*o+g,g]),g=s(0);for(var y,b=c,$=a;$>b;++b)y=x.valueAt(b),0>=y?h=!0:void 0!==y&&T.fillRect(b,y=s(y),1,g-y)}if(h){"offset"===i&&(T.translate(0,o),T.scale(1,-1));for(var f=0;A>f;++f){T.fillStyle=k[A-1-f];var g=(f-A+1)*o;s.range([A*o+g,g]),g=s(0);for(var y,b=c,$=a;$>b;++b)y=x.valueAt(b),y>=0||T.fillRect(b,s(-y),1,g-s(-y))}}T.restore()}function f(e){null==e&&(e=a-1);var t=x.valueAt(e);$.datum(t).text(isNaN(t)?null:d)}var m,v,y=this,b=++g,x="function"==typeof l?l.call(y,e,u):l,k="function"==typeof p?p.call(y,e,u):p,C="function"==typeof c?c.call(y,e,u):c,S=-(1/0),_=n.step(),T=d3.select(y).select("canvas"),$=d3.select(y).select(".value"),A=k.length>>1;T.datum({id:b,metric:x}),T=T.node().getContext("2d"),n.on("change.horizon-"+b,h),n.on("focus.horizon-"+b,f),x.on("change.horizon-"+b,function(e,n){h(e,n),f(),v&&x.on("change.horizon-"+b,t)})})}var n=this,i="offset",r=document.createElement("canvas"),a=r.width=n.size(),o=r.height=30,s=d3.scale.linear().interpolate(d3.interpolateRound),l=t,c=null,u=t,d=d3.format(".2s"),p=["#08519c","#3182bd","#6baed6","#bdd7e7","#bae4b3","#74c476","#31a354","#006d2c"];return e.remove=function(e){function t(e){e.metric.on("change.horizon-"+e.id,null),n.on("change.horizon-"+e.id,null),n.on("focus.horizon-"+e.id,null)}e.on("mousemove.horizon",null).on("mouseout.horizon",null),e.selectAll("canvas").each(t).remove(),e.selectAll(".title,.value").remove()},e.mode=function(t){return arguments.length?(i=t+"",e):i},e.height=function(t){return arguments.length?(r.height=o=+t,e):o},e.metric=function(t){return arguments.length?(l=t,e):l},e.scale=function(t){return arguments.length?(s=t,e):s},e.extent=function(t){return arguments.length?(c=t,e):c},e.title=function(t){return arguments.length?(u=t,e):u},e.format=function(t){return arguments.length?(d=t,e):d},e.colors=function(t){return arguments.length?(p=t,e):p},e},m.comparison=function(){function e(e){e.on("mousemove.comparison",function(){n.focus(Math.round(d3.mouse(this)[0]))}).on("mouseout.comparison",function(){n.focus(null)}),e.append("canvas").attr("width",i).attr("height",r),e.append("span").attr("class","title").text(c),e.append("span").attr("class","value primary"),e.append("span").attr("class","value change"),e.each(function(e,c){function v(e,t){$.save(),$.clearRect(0,0,i,r);var o=C.extent(),s=S.extent(),l=null==_?o:_;a.domain(l).range([r,0]),w=o.concat(s).every(isFinite);var c=e/n.step()&1?d:u;$.fillStyle=f[2];for(var p=0,h=i;h>p;++p){var g=a(C.valueAt(p)),v=a(S.valueAt(p));v>g&&$.fillRect(c(p),g,1,v-g)}for($.fillStyle=f[0],p=0;h>p;++p){var g=a(C.valueAt(p)),v=a(S.valueAt(p));g>v&&$.fillRect(c(p),v,1,g-v)}for($.fillStyle=f[3],p=0;h>p;++p){var g=a(C.valueAt(p)),v=a(S.valueAt(p));v>=g&&$.fillRect(c(p),g,1,m)}for($.fillStyle=f[1],p=0;h>p;++p){var g=a(C.valueAt(p)),v=a(S.valueAt(p));g>v&&$.fillRect(c(p),g-m,1,m)}$.restore()}function y(e){null==e&&(e=i-1);var t=C.valueAt(e),n=S.valueAt(e),r=(t-n)/n;A.datum(t).text(isNaN(t)?null:p),E.datum(r).text(isNaN(r)?null:h).attr("class","value change "+(r>0?"positive":0>r?"negative":""))}function b(e,n){v(e,n),y(),w&&(C.on("change.comparison-"+k,t),S.on("change.comparison-"+k,t))}var w,x=this,k=++g,C="function"==typeof o?o.call(x,e,c):o,S="function"==typeof s?s.call(x,e,c):s,_="function"==typeof l?l.call(x,e,c):l,T=d3.select(x),$=T.select("canvas"),A=T.select(".value.primary"),E=T.select(".value.change");$.datum({id:k,primary:C,secondary:S}),$=$.node().getContext("2d"),C.on("change.comparison-"+k,b),S.on("change.comparison-"+k,b),n.on("change.comparison-"+k,v),n.on("focus.comparison-"+k,y)})}var n=this,i=n.size(),r=120,a=d3.scale.linear().interpolate(d3.interpolateRound),o=function(e){return e[0]},s=function(e){return e[1]},l=null,c=t,p=k,h=C,f=["#9ecae1","#225b84","#a1d99b","#22723a"],m=1.5;return e.remove=function(e){function t(e){e.primary.on("change.comparison-"+e.id,null),e.secondary.on("change.comparison-"+e.id,null),n.on("change.comparison-"+e.id,null),n.on("focus.comparison-"+e.id,null)}e.on("mousemove.comparison",null).on("mouseout.comparison",null),e.selectAll("canvas").each(t).remove(),e.selectAll(".title,.value").remove()},e.height=function(t){return arguments.length?(r=+t,e):r},e.primary=function(t){return arguments.length?(o=t,e):o},e.secondary=function(t){return arguments.length?(s=t,e):s},e.scale=function(t){return arguments.length?(a=t,e):a},e.extent=function(t){return arguments.length?(l=t,e):l},e.title=function(t){return arguments.length?(c=t,e):c},e.formatPrimary=function(t){return arguments.length?(p=t,e):p},e.formatChange=function(t){return arguments.length?(h=t,e):h},e.colors=function(t){return arguments.length?(f=t,e):f},e.strokeWidth=function(t){return arguments.length?(m=t,e):m},e};var k=d3.format(".2s"),C=d3.format("+.0%");m.axis=function(){function e(r){var o,s=++g,l=r.append("svg").datum({id:s}).attr("width",t.size()).attr("height",Math.max(28,-e.tickSize())).append("g").attr("transform","translate(0,"+("top"===i.orient()?27:4)+")").call(i);t.on("change.axis-"+s,function(){l.call(i),o||(o=d3.select(l.node().appendChild(l.selectAll("text").node().cloneNode(!0))).style("display","none").text(null))}),t.on("focus.axis-"+s,function(e){if(o)if(null==e)o.style("display","none"),l.selectAll("text").style("fill-opacity",null);else{o.style("display",null).attr("x",e).text(a(n.invert(e)));var t=o.node().getComputedTextLength()+6;l.selectAll("text").style("fill-opacity",function(i){return Math.abs(n(i)-e)<t?0:1})}})}var t=this,n=t.scale,i=d3.svg.axis().scale(n),r=t.step()<6e4?S:t.step()<864e5?_:T,a=r;return e.remove=function(e){function n(e){t.on("change.axis-"+e.id,null),t.on("focus.axis-"+e.id,null)}e.selectAll("svg").each(n).remove()},e.focusFormat=function(t){return arguments.length?(a=null==t?r:t,e):a==r?null:t},d3.rebind(e,i,"orient","ticks","tickSubdivide","tickSize","tickPadding","tickFormat")};var S=d3.time.format("%I:%M:%S %p"),_=d3.time.format("%I:%M %p"),T=d3.time.format("%B %d");m.rule=function(){function e(e){var t=++g,r=e.append("div").datum({id:t}).attr("class","line").call(p);e.each(function(t,r){function a(t,i){for(var r=[],a=0,o=n.size();o>a;++a)l.valueAt(a)&&r.push(a);var s=e.selectAll(".metric").data(r);s.exit().remove(),s.enter().append("div").attr("class","metric line").call(p),s.style("left",h)}var o=this,s=++g,l="function"==typeof i?i.call(o,t,r):i;l&&(n.on("change.rule-"+s,a),l.on("change.rule-"+s,a))}),n.on("focus.rule-"+t,function(e){r.datum(e).style("display",null==e?"none":null).style("left",null==e?null:h)})}var n=this,i=t;return e.remove=function(e){function t(e){n.on("focus.rule-"+e.id,null)}e.selectAll(".line").each(t).remove()},e.metric=function(t){return arguments.length?(i=t,e):i},e}}(this),function(){var e=function(e,t){function n(t,n,i,r){3===arguments.length&&e.isPlainObject(i)?(r=i,i=null):2==arguments.length&&e.isPlainObject(n)&&(r=n,n=null,i=null);var a={type:"read",mbean:t,attribute:n};return l(a,i),c(this.request(a,u(r)),r)}function i(t,n,i,r,a){4===arguments.length&&e.isPlainObject(r)&&(a=r,r=null);var o={type:"write",mbean:t,attribute:n,value:i};return l(o,r),c(this.request(o,u(a)),a)}function r(t,n){var i,r={type:"exec",mbean:t,operation:n},a=arguments.length;if(arguments.length>2&&e.isPlainObject(arguments[arguments.length-1])&&(i=arguments[arguments.length-1],a=arguments.length-1),a>2){for(var o=[],s=2;a>s;s++)o[s-2]=arguments[s];r.arguments=o}return c(this.request(r,u(i)),i)}function a(e,t){var n={type:"search",mbean:e};return c(this.request(n,u(t)),t)}function o(e){return c(this.request({type:"version"},u(e)),e)}function s(t,n){1==arguments.length&&!e.isArray(t)&&e.isPlainObject(t)&&(n=t,t=null);var i={type:"list"};return l(i,t),c(this.request(i,u(n)),n)}function l(n,i){null!=i&&(n.path=e.isArray(i)?e.map(i,t.escape).join("/"):i)}function c(e,t){if(null==e)return null;if(200==e.status)return e.value;if(t&&t.error)return t.error(e);throw new Error("Jolokia-Error: "+JSON.stringify(e))}function u(t){if(t&&t.success){var n=e.extend({},t);return n.success=function(e){t.success(e.value)},n}return t}return e.extend(t.prototype,{getAttribute:n,setAttribute:i,execute:r,search:a,version:o,list:s}),t};!function(t,n){"function"==typeof define&&define.amd?define(["jquery","jolokia"],n):t.Jolokia?e(jQuery,t.Jolokia):console.error("No Jolokia definition found. Please include jolokia.js before jolokia-simple.js")}(this,function(t,n){return e(t,n)})}(),function(){var e=function(e,t){var n="1.1.3",i=function(e,n){function i(e,n){if(e instanceof t)return e;var i;if("string"==typeof e){if(i={url:e},n)for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])}else i=e;return new t(i)}function r(e,t,n){return function(i,r,a,o){i=+i,r=+r;var s=[],l=r,c=e.length,u=0,d=c>0?e[c-1].time:void 0;if(!c||d>r){for(var p=i;r>=p;p+=a)s.push(0/0);return o(null,s)}for(;l>e[0].time+a;)s.unshift(0/0),l-=a;for(;l>=i&&l>=d;){for(;e[u].time>l;)u++;s.unshift(e[u].value),l-=a}for(;l>=i;)s.unshift(0/0),l-=a;if(c>n)if(t){for(var h=e[n].time-t,f=n;c>f&&e[f].time>h;)f++;e.length=f}else e.length=n;o(null,s)}}var a={},o=this,s=i(e,n),l=5e3;try{o.on("start",function(){s.start()}),o.on("stop",function(){s.stop()})}catch(c){}return a.metric=function(){var e,t=[],n=arguments.length,i={},a=arguments.length-1,l=arguments[a];"string"==typeof l&&(e=l,n=a),"object"!=typeof l||l.type||(i=l,e=i.name,n=a),e||"function"==typeof arguments[0]||(e=arguments[0].mbean);var c=o.metric(r(t,i.keepDelay,o.width),e);if(i.delta){var u=c.shift(-i.delta);c=c.subtract(u),e&&(c.toString=function(){return e})}if("function"==typeof arguments[0]){for(var d=arguments[0],p=function(e){for(var n=!1,i=0;i<arguments.length;i++)if(s.isError(arguments[i])){n=!0;break}t.unshift({time:Date.now(),value:n?0/0:d.apply(c,arguments)})},h=[p],f=1;n>f;f++)h.push(arguments[f]);s.register.apply(s,h)}else{var g=arguments[0];s.register(function(e){t.unshift({time:Date.now(),value:s.isError(e)?0/0:Number(e.value)})},g)}return c},a.start=function(e){e=e||l,s.start(e)},a.stop=function(){s.stop()},a.isRunning=function(){return s.isRunning()},a};return i.VERSION=n,e.context.prototype.jolokia=i,i};!function(t){"function"==typeof define&&define.amd?define(["cubism","jolokia"],function(t,n){return e(t,n)}):t.Jolokia&&t.cubism?e(t.cubism,t.Jolokia):console.error("No "+(t.cubism?"Cubism":"Jolokia")+" definition found. Please include jolokia.js and cubism.js before jolokia-cubism.js")}(this)}();var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},Core;!function(e){var t=function(){function t(t){this.title=t,this.id=null,this.typeName=null,this.items=[],this.folderNames=[],this.domain=null,this.objectName=null,this.map={},this.entries={},this.addClass=null,this.parent=null,this.isLazy=!1,this.icon=null,this.tooltip=null,this.entity=null,this.version=null,this.mbean=null,this.addClass=e.escapeTreeCssStyles(t)}return Object.defineProperty(t.prototype,"key",{get:function(){return this.id},set:function(e){this.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this.items},set:function(e){this.items=e},enumerable:!0,configurable:!0}),t.prototype.get=function(e){return this.map[e]},t.prototype.isFolder=function(){return this.children.length>0},t.prototype.navigate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=this;return e.forEach(function(e){n&&(n=n.get(e))}),n},t.prototype.hasEntry=function(e,t){var n=this.entries;if(n){var i=n[e];return i&&t===i}return!1},t.prototype.parentHasEntry=function(e,t){return this.parent?this.parent.hasEntry(e,t):!1},t.prototype.ancestorHasEntry=function(e,t){for(var n=this.parent;n;){if(n.hasEntry(e,t))return!0;n=n.parent}return!1},t.prototype.ancestorHasType=function(e){for(var t=this.parent;t;){if(e===t.typeName)return!0;t=t.parent}return!1},t.prototype.getOrElse=function(e,n){void 0===n&&(n=new t(e));var i=this.map[e];return i||(i=n,this.map[e]=i,this.children.push(i),i.parent=this),i},t.prototype.sortChildren=function(e){var t=this.children;t&&(this.children=t.sortBy("title"),e&&angular.forEach(t,function(t){return t.sortChildren(e)}))},t.prototype.moveChild=function(e){e&&e.parent!==this&&(e.detach(),e.parent=this,this.children.push(e))},t.prototype.insertBefore=function(e,t){e.detach(),e.parent=this;var n=_.indexOf(this.children,t);n>=0&&this.children.splice(n,0,e)},t.prototype.insertAfter=function(e,t){e.detach(),e.parent=this;var n=_.indexOf(this.children,t);n>=0&&this.children.splice(n+1,0,e);

},t.prototype.detach=function(){var e=this,t=this.parent;if(t){var n=t.children;if(n){var i=n.indexOf(this);0>i?t.children=t.children.remove(function(t){return t.key===e.key}):n.splice(i,1)}this.parent=null}},t.prototype.findDescendant=function(e){if(e(this))return this;var t=null;return angular.forEach(this.children,function(n){t||(t=n.findDescendant(e))}),t},t.prototype.findAncestor=function(e){return e(this)?this:null!=this.parent?this.parent.findAncestor(e):null},t}();e.Folder=t}(Core||(Core={}));var Folder=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Core.Folder),Core;!function(e){function t(e,t,n){if(e){var i=e.mbeanTypesToDomain||{},r=i[n]||{},a=r[t];return angular.isArray(a)&&a.length?a[0]:a}return null}function n(t,n,i){var r=e.getMBeanTypeFolder(t,n,i);return e.pathGet(r,["objectName"])}function i(t,n,i,r,a,o,s,l){void 0===r&&(r=null),void 0===a&&(a=null),void 0===o&&(o=null),void 0===s&&(s=null),void 0===l&&(l=null);var c={xhr:null},u=e.lazyLoaders,d=new e.Workspace(t,c,u,n,a,o,i,r,s,l);return e.log.info("Loading the profile using jolokia: "+t),d.loadTree(),d}e.getMBeanTypeFolder=t,e.getMBeanTypeObjectName=n,e.createRemoteWorkspace=i}(Core||(Core={}));var Jmx;!function(e){function t(e,t,n,i){var r=new URI(e);return r.segment(t).segment(n).segment(i),r.toString()}function n(e,t,n,i){void 0===i&&(i="jmx");var r=e.id(i+"-attributes").title(function(){return'<i class="fa fa-list"></i> Attributes'}).tooltip(function(){return"List the attributes on the MBean"}).href(function(){return"/jmx/attributes"+t.hash()}).build(),a=e.id(i+"-operations").title(function(){return'<i class="fa fa-leaf"></i> Operations'}).tooltip(function(){return"List the operations on the MBean"}).href(function(){return"/jmx/operations"+t.hash()}).build(),o=e.id(i+"-chart").title(function(){return'<i class="fa fa-bar-chart"></i> Charts'}).tooltip(function(){return"Real time chart of the attributes from the MBean"}).href(function(){return"/jmx/charts"+t.hash()}).build(),s=e.id(i+"-edit-chart").title(function(){return'<i class="fa fa-cog"></i> Edit Chart'}).tooltip(function(){return"Edit the chart to choose which attributes to show from the MBean"}).href(function(){return"/jmx/chartEdit"+t.hash()}).build(),l=e.id(i+"-add-dashboard").title(function(){return'<i class="fa fa-share"></i>'}).tooltip(function(){return"Add current view to dashboard"}).attributes({"class":"pull-right"}).show(function(){if(!HawtioCore.injector)return!0;var e=HawtioCore.injector.get("HawtioDashboard");return e&&e.hasDashboard}).click(function(){if(HawtioCore.injector){var e=HawtioCore.injector.get("HawtioDashboard");if(e){var n=2,i=2,r=t.getSelectedMBeanName(),a=t.$location;a.path().has("/jmx/charts")&&(n=4,i=3);var o=e.getAddLink(r,n,i);t.$location.url(o.toString()),Core.$apply(t.$rootScope)}return!1}}).href(function(){return""}).build();return s.show=function(){return t.isLinkActive("jmx/chart")},[r,a,o,s,l]}function i(e,t){var n=e.jmxTreeLazyLoadRegistry[t.domain],i=null;return n&&n.length&&angular.forEach(n,function(e){i||(i=e(t))}),i}function r(e,t){Core.lazyLoaders||(Core.lazyLoaders={});var n=Core.lazyLoaders[e];n||(n=[],Core.lazyLoaders[e]=n),n.push(t)}function a(e,t){if(Core.lazyLoaders){var n=Core.lazyLoaders[e];n&&n.remove(t)}}function o(e,t,n){var i=p[t];i||(i=[],p[t]=i),i.push(n)}function s(t,n){n||(n=UrlHelpers.join(e.templatePath,"attributeToolBar.html"));var i=null,r=t?t.domain:null;if(r){var a=p[r];if(a)for(var o=0;o<a.length;o++){var s=a[o];if(s&&(i=s(t)))break}}return i?i:n}function l(e,t,n){void 0===n&&(n=!1),c(e,t,null,n)}function c(e,t,n,i){void 0===i&&(i=!1);var r=t.dynatree("getTree");if(r){var a=null,o=e.search().nid;if(o)try{a=r.activateKey(o)}catch(s){}if(a)a.expand(!0);else if(!t.dynatree("getActiveNode")){var l=t.dynatree("getRoot"),c=l?l.getChildren():null;if(c&&c.length){var u=c[0];if(u.expand(!0),n){var d=n(u);d&&(u=d)}i&&(u.expand(),u.activate())}}}}function u(e){var t={};angular.forEach(e,function(e){var n=e.typeName;n&&(t[n]=e)});var n=Object.keys(t);return n}function d(t,n,i,r,a,o,s){void 0===o&&(o=!1),void 0===s&&(s=null),r.length&&(s||(s=function(e){var n=e.data;i.updateSelectionNode(n),Core.$apply(t)}),i.treeElement=r,r.dynatree({onActivate:s,onLazyRead:function(t){var n=t.data,r=null;if(n&&(r=e.findLazyLoadingFunction(i,n)),r){console.log("Lazy loading folder "+n.title);var a=n.childen;r(i,n,function(){t.setLazyNodeStatus(DTNodeStatus_Ok);var e=n.children;e!==a&&(t.removeChildren(),angular.forEach(e,function(e){t.addChild(e)}))})}else t.setLazyNodeStatus(DTNodeStatus_Ok)},onClick:function(e,t){if(t.metaKey){t.preventDefault();var i=n.absUrl();if(e&&e.data){var r=e.data.key;if(r){var a=n.search();a.nid=r;var o=i.indexOf("?");0>=o?i+="?":i=i.substring(0,o+1),i+=$.param(a)}}return window.open(i,"_blank"),window.focus(),!1}return!0},persist:!1,debugLevel:0,children:a}),o&&i.redrawTree())}e.pluginName="hawtio-jmx",e.log=Logger.get(e.pluginName),e.currentProcessId="",e.templatePath="plugins/jmx/html",e.getUrlForThing=t,e.getNavItems=n;var p={};e.findLazyLoadingFunction=i,e.registerLazyLoadHandler=r,e.unregisterLazyLoadHandler=a,e.addAttributeToolBar=o,e.getAttributeToolBar=s,e.updateTreeSelectionFromURL=l,e.updateTreeSelectionFromURLAndAutoSelect=c,e.getUniqueTypeNames=u,e.enableTree=d}(Jmx||(Jmx={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},Core;!function(e){var t=Logger.get("workspace"),n=function(){function n(n,i,r,a,o,s,l,c,u,d){this.jolokia=n,this.jolokiaStatus=i,this.jmxTreeLazyLoadRegistry=r,this.$location=a,this.$compile=o,this.$templateCache=s,this.localStorage=l,this.$rootScope=c,this.userDetails=u,this.HawtioNav=d,this.operationCounter=0,this.tree=new e.Folder("MBeans"),this.mbeanTypesToDomain={},this.mbeanServicesToDomain={},this.attributeColumnDefs={},this.treePostProcessors={},this.topLevelTabs=void 0,this.subLevelTabs=[],this.keyToNodeMap={},this.pluginRegisterHandle=null,this.pluginUpdateCounter=null,this.treeWatchRegisterHandle=null,this.treeWatcherCounter=null,this.treeElement=null,this.treeFetched=!1,this.mapData={},"autoRefresh"in l||(l.autoRefresh=!0),"updateRate"in l||(l.updateRate=5e3);var p=this;this.topLevelTabs={push:function(e){t.debug("Added menu item: ",e);var n={id:e.id,title:function(){return e.content},isValid:function(){return e.isValid(p)},href:function(){return UrlHelpers.noHash(e.href())}};e.isActive&&(n.isSelected=function(){return e.isActive(p)}),p.HawtioNav.add(n)},find:function(e){}}}return n.prototype.createChildWorkspace=function(e){var t=new n(this.jolokia,this.jolokiaStatus,this.jmxTreeLazyLoadRegistry,this.$location,this.$compile,this.$templateCache,this.localStorage,this.$rootScope,this.userDetails,this.HawtioNav);return angular.forEach(this,function(e,n){return t[n]=e}),t.$location=e,t},n.prototype.getLocalStorage=function(e){return this.localStorage[e]},n.prototype.setLocalStorage=function(e,t){this.localStorage[e]=t},n.prototype.loadTree=function(){var n=this,i=this;if(this.jolokia.isDummy)return void setTimeout(function(){i.treeFetched=!0,i.populateTree({value:{}})},10);var r={ignoreErrors:!0,maxDepth:7,error:function(e){i.treeFetched=!0,t.debug("Error fetching JMX tree: ",e)}};t.debug("jolokia: ",this.jolokia),this.jolokia.request({type:"list"},e.onSuccess(function(e){e.value&&(n.jolokiaStatus.xhr=null),i.treeFetched=!0,i.populateTree(e)},r))},n.prototype.addTreePostProcessor=function(e){var t=_.keys(this.treePostProcessors).length,n=t+1;return this.addNamedTreePostProcessor(n+"",e)},n.prototype.addNamedTreePostProcessor=function(e,t){this.treePostProcessors[e]=t;var n=this.tree;return this.treeFetched&&n&&t(n),e},n.prototype.removeNamedTreePostProcessor=function(e){delete this.treePostProcessors[e]},n.prototype.maybeMonitorPlugins=function(){this.treeContainsDomainAndProperties("hawtio",{type:"Registry"})?null===this.pluginRegisterHandle&&(this.pluginRegisterHandle=this.jolokia.register(angular.bind(this,this.maybeUpdatePlugins),{type:"read",mbean:"hawtio:type=Registry",attribute:"UpdateCounter"})):null!==this.pluginRegisterHandle&&(this.jolokia.unregister(this.pluginRegisterHandle),this.pluginRegisterHandle=null,this.pluginUpdateCounter=null),this.treeContainsDomainAndProperties("hawtio",{type:"TreeWatcher"})&&null===this.treeWatchRegisterHandle&&(this.treeWatchRegisterHandle=this.jolokia.register(angular.bind(this,this.maybeReloadTree),{type:"read",mbean:"hawtio:type=TreeWatcher",attribute:"Counter"}))},n.prototype.maybeUpdatePlugins=function(t){return null===this.pluginUpdateCounter?void(this.pluginUpdateCounter=t.value):void(this.pluginUpdateCounter!==t.value&&e.parseBooleanValue(localStorage.autoRefresh)&&window.location.reload())},n.prototype.maybeReloadTree=function(t){function n(e){var t={value:e};r.populateTree(t)}var i=t.value;if(null===this.treeWatcherCounter)return void(this.treeWatcherCounter=i);if(this.treeWatcherCounter!==i){this.treeWatcherCounter=i;var r=this;this.jolokia.list(null,e.onSuccess(n,{ignoreErrors:!0,maxDepth:2}))}},n.prototype.folderGetOrElse=function(e,n){if(e)try{return e.getOrElse(n)}catch(i){t.warn("Failed to find value "+n+" on folder "+e)}return null},n.prototype.populateTree=function(n){t.debug("JMX tree has been loaded, data: ",n.value);var i="root",r="-";this.mbeanTypesToDomain={},this.mbeanServicesToDomain={},this.keyToNodeMap={};var a=new e.Folder("MBeans");a.key=i;var o=n.value;for(var s in o){var l=e.escapeDots(s),c=o[s];for(var u in c){var d={},p=this.folderGetOrElse(a,s);p.domain=s,p.key||(p.key=i+r+s);var h=[s];p.folderNames=h,h=h.clone();var f=u.split(","),g=[],m=null,v=null;f.forEach(function(e){var t=e.indexOf("="),n=[];t>0?(n[0]=e.substr(0,t),n[1]=e.substr(t+1)):n[0]=e;var i=n[0],r=n[1]||i;d[i]=r;var a=!1,o=i.toLowerCase();"type"===o&&(m=r,p.map[r]&&(a=!0)),"service"===o&&(v=r),a?g.splice(0,0,r):g.push(r)});var y=function(t,n){t.domain=s,t.key||(t.key=i+r+h.join(r)),this.keyToNodeMap[t.key]=t,t.folderNames=h.clone();var a="",o=t.entries,c=Object.keys(o).filter(function(e){return e.toLowerCase().indexOf("type")>=0});if(c.length)angular.forEach(c,function(e){var n=o[e];t.ancestorHasEntry(e,n)||(a+=" "+l+r+n)});else{var u=h.last();u===n&&(u+="-folder"),u&&(a+=" "+l+r+u)}return t.addClass=e.escapeTreeCssStyles(a),t},b=g.pop(),w=this;g.forEach(function(e){p=w.folderGetOrElse(p,e),p&&(h.push(e),angular.bind(w,y,p,e)())});var x=i+r+h.join(r)+r+b,k=s+":"+u;if(p){if(p=this.folderGetOrElse(p,b)){p.entries=d,p.key=x,angular.bind(this,y,p,b)(),p.title=e.trimQuotes(b),p.objectName=k,p.mbean=c[u],p.typeName=m;var C=function(e,t){var n=e[t];n||(n={},e[t]=n);var i=n[s];if(i){var r=null;angular.isArray(i)?r=i:(r=[i],n[s]=r),r.push(p)}else n[s]=p};v&&angular.bind(this,C,this.mbeanServicesToDomain,v)(),m&&angular.bind(this,C,this.mbeanTypesToDomain,m)()}}else t.info("No folder found for lastPath: "+b)}}a.sortChildren(!0),this.enableLazyLoading(a),this.tree=a;var S=this.treePostProcessors;_.forIn(S,function(e,n){t.debug("Running tree post processor: ",n),e(a)}),this.maybeMonitorPlugins();var T=this.$rootScope;T&&(T.$broadcast("jmxTreeUpdated"),e.$apply(T))},n.prototype.enableLazyLoading=function(e){var t=this,n=e.children;if(n&&n.length)angular.forEach(n,function(e){t.enableLazyLoading(e)});else{var i=Jmx.findLazyLoadingFunction(this,e);i&&(e.isLazy=!0)}},n.prototype.hash=function(){var t=this.$location.search(),n=e.hashToString(t);return n?"?"+n:""},n.prototype.getActiveTab=function(){var e=this;return this.topLevelTabs.find(function(t){return angular.isDefined(t.isActive)?t.isActive(e):e.isLinkActive(t.href())})},n.prototype.getStrippedPathName=function(){var t=e.trimLeading(this.$location.path()||"/","#");return t=t.replace(/^\//,"")},n.prototype.linkContains=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=this.getStrippedPathName();return e.all(function(e){return n.has(e)})},n.prototype.isLinkActive=function(t){var n=this.getStrippedPathName(),i=e.trimLeading(t,"#");i=i.replace(/^\//,"");var r=i.indexOf("?");return r>=0&&(i=i.substring(0,r)),n.length?n.startsWith(i):i===n},n.prototype.isLinkPrefixActive=function(t){var n=this.getStrippedPathName(),i=e.trimLeading(t,"#");i=i.replace(/^\//,"");var r=i.indexOf("?");return r>=0&&(i=i.substring(0,r)),n.startsWith(i)},n.prototype.isTopTabActive=function(e){var t=this.$location.search().tab;return angular.isString(t)?t.startsWith(e):this.isLinkActive(e)},n.prototype.getSelectedMBeanName=function(){var e=this.selection;return e?e.objectName:null},n.prototype.getSelectedMBean=function(){if(this.selection)return this.selection;t.debug("Location: ",this.$location);var e=this.$location.search().nid;if(e&&this.tree){var n=this.tree.findDescendant(function(t){return e===t.id});return this.selection||(this.selection=n),n}return null},n.prototype.validSelection=function(e){return!0},n.prototype.removeAndSelectParentNode=function(){var e=this.selection;if(e){var t=e.parent;if(t){var n=t.children.indexOf(e);0>n&&(n=t.children.findIndex(function(t){return t.key===e.key})),n>=0&&t.children.splice(n,1),this.updateSelectionNode(t)}}},n.prototype.selectParentNode=function(){var e=this.selection;if(e){var t=e.parent;t&&this.updateSelectionNode(t)}},n.prototype.selectionViewConfigKey=function(){return this.selectionConfigKey("view/")},n.prototype.selectionConfigKey=function(e){void 0===e&&(e="");var t=null,n=this.selection;if(n){t=e+n.domain;var i=n.typeName;i||(i=n.title),t+="/"+i,n.isFolder()&&(t+="/folder")}return t},n.prototype.moveIfViewInvalid=function(){var n=this,i=e.trimLeading(this.$location.path(),"/");if(this.selection){var r=this.selectionViewConfigKey();if(this.validSelection(i))return this.setLocalStorage(r,i),!1;t.info("the uri '"+i+"' is not valid for this selection");var a=this.getLocalStorage(r);return a&&this.validSelection(a)||(a=null,angular.forEach(this.subLevelTabs,function(e){var t=e.isValid;!a&&e.href&&angular.isDefined(t)&&t(n)&&(a=e.href())})),a||(a="#/jmx/help"),t.info("moving the URL to be "+a),a.startsWith("#")&&(a=a.substring(1)),this.$location.path(a),!0}return!1},n.prototype.updateSelectionNode=function(e){this.selection;this.selection=e;var t=null;if(e&&(t=e.key),t){var n=this.$location,i=n.search();i.nid=t,n.search(i)}},n.prototype.redrawTree=function(){var e=this.treeElement;if(e&&angular.isDefined(e.dynatree)&&angular.isFunction(e.dynatree)){var t=e.dynatree("getTree");if(angular.isDefined(t))try{t.reload()}catch(n){}}},n.prototype.expandSelection=function(e){var t=this.treeElement;if(t&&angular.isDefined(t.dynatree)&&angular.isFunction(t.dynatree)){var n=t.dynatree("getActiveNode");angular.isDefined(n)&&n.expand(e)}},n.prototype.matchesProperties=function(e,t){if(!e)return!1;for(var n in t){var i=t[n];if(!i||e[n]!==i)return!1}return!0},n.prototype.hasInvokeRightsForName=function(n){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var a=!0;if(n){var o=e.parseMBean(n);if(o){var s=this.findMBeanWithProperties(o.domain,o.attributes);if(s)return this.hasInvokeRights.apply(this,[s].concat(i));t.debug("Failed to find mbean folder with name "+n)}else t.debug("Failed to parse mbean name "+n)}return a},n.prototype.hasInvokeRights=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=!0;if(e){var a=e,o=a.mbean;if(o&&(angular.isDefined(o.canInvoke)&&(r=o.canInvoke),r&&n&&n.length>0)){var s=o.opByString,l=o.op;s&&l&&n.forEach(function(e){if(r){var n=null;return(n=e.endsWith(")")?s[e]:l[e])?void(angular.isDefined(n.canInvoke)&&(r=n.canInvoke)):void t.debug("Could not find method:",e," to check permissions, skipping")}})}}return r},n.prototype.treeContainsDomainAndProperties=function(e,t){var n=this;void 0===t&&(t=null);var i=this,r=i.tree;if(r){var a=r.get(e);if(a){if(t){var o=a.children||[],s=function(i){return n.matchesProperties(i.entries,t)?!0:i.domain===e&&i.children&&i.children.length>0?i.children.some(s):!1};return o.some(s)}return!0}}return!1},n.prototype.matches=function(e,t,n){if(e){var i=e.entries;if(t){if(!i)return!1;for(var r in t){var a=t[r];if(!a||i[r]!==a)return!1}}return n?i&&Object.keys(i).length===n:!0}return!1},n.prototype.hasDomainAndProperties=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var i=this.selection;return i?this.matches(i,t,n)&&i.domain===e:!1},n.prototype.findMBeanWithProperties=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var i=this.tree;return i?this.findChildMBeanWithProperties(i.get(e),t,n):null},n.prototype.findChildMBeanWithProperties=function(e,t,n){var i=this;void 0===t&&(t=null),void 0===n&&(n=null);var r=this;if(e){var a=e.children;if(a){var o=a.find(function(e){return i.matches(e,t,n)});return o?o:a.map(function(e){return r.findChildMBeanWithProperties(e,t,n)}).find(function(e){return e})}}return null},n.prototype.selectionHasDomainAndLastFolderName=function(e,t){function n(e){return(e||"").toLowerCase()===i}var i=(t||"").toLowerCase(),r=this.selection;if(r&&e===r.domain){var a=r.folderNames;if(a){var o=a.last();return(n(o)||n(r.title))&&r.isFolder()&&!r.objectName}}return!1},n.prototype.selectionHasDomain=function(e){var t=this.selection;return t?e===t.domain:!1},n.prototype.selectionHasDomainAndType=function(e,t){var n=this.selection;return n?e===n.domain&&t===n.typeName:!1},n.prototype.hasMBeans=function(){var e=!1,t=this.tree;if(t){var n=t.children;angular.isArray(n)&&n.length>0&&(e=!0)}return e},n.prototype.hasFabricMBean=function(){return this.hasDomainAndProperties("io.fabric8",{type:"Fabric"})},n.prototype.isFabricFolder=function(){return this.hasDomainAndProperties("io.fabric8")},n.prototype.isCamelContext=function(){return this.hasDomainAndProperties("org.apache.camel",{type:"context"})},n.prototype.isCamelFolder=function(){return this.hasDomainAndProperties("org.apache.camel")},n.prototype.isEndpointsFolder=function(){return this.selectionHasDomainAndLastFolderName("org.apache.camel","endpoints")},n.prototype.isEndpoint=function(){return this.hasDomainAndProperties("org.apache.camel",{type:"endpoints"})},n.prototype.isRoutesFolder=function(){return this.selectionHasDomainAndLastFolderName("org.apache.camel","routes")},n.prototype.isRoute=function(){return this.hasDomainAndProperties("org.apache.camel",{type:"routes"})},n.prototype.isComponentsFolder=function(){return this.selectionHasDomainAndLastFolderName("org.apache.camel","components")},n.prototype.isComponent=function(){return this.hasDomainAndProperties("org.apache.camel",{type:"components"})},n.prototype.isOsgiFolder=function(){return this.hasDomainAndProperties("osgi.core")},n.prototype.isKarafFolder=function(){return this.hasDomainAndProperties("org.apache.karaf")},n.prototype.isOsgiCompendiumFolder=function(){return this.hasDomainAndProperties("osgi.compendium")},n}();e.Workspace=n}(Core||(Core={}));var Workspace=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Core.Workspace),JVM;!function(e){function t(t,n,i){t.isActive=function(e){var t=Core.trimLeading(e,"#"),i=n.path();return i===t},t.isValid=function(e){return e&&e.isValid(i)},t.hasLocalMBean=function(){return e.hasLocalMBean(i)}}function n(e){return e.treeContainsDomainAndProperties("hawtio",{type:"JVMList"})}function i(e){return e.treeContainsDomainAndProperties("jolokia",{type:"Discovery"})}e.rootPath="plugins/jvm",e.templatePath=UrlHelpers.join(e.rootPath,"/html"),e.pluginName="hawtio-jvm",e.log=Logger.get(e.pluginName),e.connectControllerKey="jvmConnectSettings",e.connectionSettingsKey=Core.connectionSettingsKey,e.logoPath="img/icons/jvm/",e.logoRegistry={jetty:e.logoPath+"jetty-logo-80x22.png",tomcat:e.logoPath+"tomcat-logo.gif",generic:e.logoPath+"java-logo.svg"},e.configureScope=t,e.hasLocalMBean=n,e.hasDiscoveryMBean=i}(JVM||(JVM={}));var Core;!function(e){function t(e,t,n){var i={url:e,username:t,password:n,canonicalNaming:!1,ignoreErrors:!0,mimeType:"application/json"};return new Jolokia(i)}function n(t){return e.isBlank(t.recentConnections)&&e.clearConnections(),angular.fromJson(t.recentConnections)}function i(e,t){var i=n(e);i=i.add(t).unique().first(5),e.recentConnections=angular.toJson(i)}function r(e,t){var i=n(e);i=i.exclude(function(e){return e===t}),e.recentConnections=angular.toJson(i)}function a(){localStorage.recentConnections="[]"}function o(){return"con"in(new URI).query(!0)}function s(t){var n=e.loadConnectionMap(),i=angular.extend({},t);delete i.userName,delete i.password,n[t.name]=i,e.saveConnectionMap(n)}function l(t,n){if(e.log.debug("Connecting with options: ",StringHelpers.toString(n)),i(t,n.name),!("userName"in n)){var r=HawtioCore.injector.get("userDetails");n.userName=r.username,n.password=r.password}s(n);var a=HawtioCore.injector.get("$window"),o=(n.view||"/")+"?con="+n.name;o=o.replace(/\?/g,"&"),o=o.replace(/&/,"?");var l=a.open(o);l.con=n.name,l.userDetails={username:n.userName,password:n.password,loginDetails:{}}}function c(){var t=e.getLocalStorage();try{var n=angular.fromJson(t[e.connectionSettingsKey]);return n?n:{}}catch(i){return delete t[e.connectionSettingsKey],{}}}function u(t){Logger.get("Core").debug("Saving connection map: ",StringHelpers.toString(t)),localStorage[e.connectionSettingsKey]=angular.toJson(t)}function d(){return(new URI).search(!0).con}function p(t,n){return void 0===n&&(n=e.getLocalStorage()),t?e.loadConnectionMap()[t]:null}function h(e){Logger.get("Core").debug("Connect to server, options: ",StringHelpers.toString(e));var t=null;if(e.jolokiaUrl&&(t=e.jolokiaUrl),null===t){var n=new URI;n.protocol(e.scheme||"http").host(e.host||"localhost").port(e.port||"80").path(e.path),t=e.useProxy?UrlHelpers.join("proxy",n.protocol(),n.hostname(),n.port(),n.path()):n.toString()}return Logger.get(JVM.pluginName).debug("Using URL: ",t),t}e.createJolokia=t,e.getRecentConnections=n,e.addRecentConnection=i,e.removeRecentConnection=r,e.clearConnections=a,e.isRemoteConnection=o,e.saveConnection=s,e.connectToServer=l,e.loadConnectionMap=c,e.saveConnectionMap=u,e.getConnectionNameParameter=d,e.getConnectOptions=p,e.createServerConnectionUrl=h}(Core||(Core={}));var Jmx;!function(e){function t(e,t){var n="#"+e.route,i=angular.toJson(t),r=t.title,a=angular.toJson({size_x:e.size_x,size_y:e.size_y});return"/dashboard/add?tab=dashboard&href="+encodeURIComponent(n)+"&size="+encodeURIComponent(a)+"&title="+encodeURIComponent(r)+"&routeParams="+encodeURIComponent(i)}function n(t){return e.jmxWidgetTypes.find(function(e){return e.type===t.type})}e.createDashboardLink=t,e.getWidgetType=n,e.jmxWidgetTypes=[{type:"donut",icon:"fa fa-pie-chart",route:"/jmx/widget/donut",size_x:2,size_y:2,title:"Add Donut chart to Dashboard"},{type:"area",icon:"fa fa-bar-chart",route:"/jmx/widget/area",size_x:4,size_y:2,title:"Add Area chart to Dashboard"}],e.jmxWidgets=[{type:"donut",title:"Java Heap Memory",mbean:"java.lang:type=Memory",attribute:"HeapMemoryUsage",total:"Max",terms:"Used",remaining:"Free"},{type:"donut",title:"Java Non Heap Memory",mbean:"java.lang:type=Memory",attribute:"NonHeapMemoryUsage",total:"Max",terms:"Used",remaining:"Free"},{type:"donut",title:"File Descriptor Usage",mbean:"java.lang:type=OperatingSystem",total:"MaxFileDescriptorCount",terms:"OpenFileDescriptorCount",remaining:"Free"},{type:"donut",title:"Loaded Classes",mbean:"java.lang:type=ClassLoading",total:"TotalLoadedClassCount",terms:"LoadedClassCount,UnloadedClassCount",remaining:"-"},{type:"donut",title:"Swap Size",mbean:"java.lang:type=OperatingSystem",total:"TotalSwapSpaceSize",terms:"FreeSwapSpaceSize",remaining:"Used Swap"},{type:"area",title:"Process CPU Time",mbean:"java.lang:type=OperatingSystem",attribute:"ProcessCpuTime"},{type:"area",title:"Process CPU Load",mbean:"java.lang:type=OperatingSystem",attribute:"ProcessCpuLoad"},{type:"area",title:"System CPU Load",mbean:"java.lang:type=OperatingSystem",attribute:"SystemCpuLoad"},{type:"area",title:"System CPU Time",mbean:"java.lang:type=OperatingSystem",attribute:"SystemCpuTime"}]}(Jmx||(Jmx={}));var Jmx;!function(e){e._module=angular.module(e.pluginName,[]),e._module.config(["HawtioNavBuilderProvider","$routeProvider",function(t,n){n.when("/jmx",{redirectTo:"/jmx/attributes"}).when("/jmx/attributes",{templateUrl:UrlHelpers.join(e.templatePath,"attributes.html")}).when("/jmx/operations",{templateUrl:UrlHelpers.join(e.templatePath,"operations.html")}).when("/jmx/charts",{templateUrl:UrlHelpers.join(e.templatePath,"charts.html")}).when("/jmx/chartEdit",{templateUrl:UrlHelpers.join(e.templatePath,"chartEdit.html")}).when("/jmx/help/:tabName",{templateUrl:"app/core/html/help.html"}).when("/jmx/widget/donut",{templateUrl:UrlHelpers.join(e.templatePath,"donutChart.html")}).when("/jmx/widget/area",{templateUrl:UrlHelpers.join(e.templatePath,"areaChart.html")})}]),e._module.factory("jmxWidgetTypes",function(){return e.jmxWidgetTypes}),e._module.factory("jmxWidgets",function(){return e.jmxWidgets}),e._module.factory("workspace",["$location","jmxTreeLazyLoadRegistry","$compile","$templateCache","localStorage","jolokia","jolokiaStatus","$rootScope","userDetails","HawtioNav",function(e,t,n,i,r,a,o,s,l,c){var u=new Workspace(a,o,t,e,n,i,r,s,l,c);return u.loadTree(),u}]),e._module.controller("Jmx.MBeanTreeController",["$scope","workspace",function(t,n){t.node={},n.addNamedTreePostProcessor("MBeanTree",function(n){angular.copy(n,t.node),t.node.open=!0,e.log.debug("got tree: ",t.node)}),t.select=function(e){n.updateSelectionNode(e)}}]),e._module.factory("rbacACLMBean",function(){return{then:function(){}}}),e._module.constant("layoutTree","plugins/jmx/html/layoutTree.html"),e._module.factory("jolokiaStatus",function(){return{xhr:null}}),e.DEFAULT_MAX_DEPTH=7,e.DEFAULT_MAX_COLLECTION_SIZE=500,e._module.factory("jolokiaParams",["jolokiaUrl","localStorage",function(t,n){var i={canonicalNaming:!1,ignoreErrors:!0,mimeType:"application/json",maxDepth:e.DEFAULT_MAX_DEPTH,maxCollectionSize:e.DEFAULT_MAX_COLLECTION_SIZE};return"jolokiaParams"in n?i=angular.fromJson(n.jolokiaParams):n.jolokiaParams=angular.toJson(i),i.url=t,i}]),e._module.factory("jmxTreeLazyLoadRegistry",function(){return Core.lazyLoaders}),e._module.controller("Jmx.EditChartNav",["$scope","$location",function(e,t){e.valid=function(){return t.path().startsWith("/jmx/chart")}}]),e._module.run(["HawtioNav","$location","workspace","viewRegistry","layoutTree","jolokia","helpRegistry","pageTitle","$templateCache",function(t,n,i,r,a,o,s,l,c){e.log.debug("loaded"),r['{ "main-tab": "jmx" }']=a,s.addUserDoc("jmx","app/jmx/doc/help.md"),l.addTitleElement(function(){if(""===e.currentProcessId){try{e.currentProcessId=o.getAttribute("java.lang:type=Runtime","Name")}catch(t){}e.currentProcessId&&e.currentProcessId.has("@")&&(e.currentProcessId="pid:"+e.currentProcessId.split("@")[0])}return e.currentProcessId});var u="/jmx/attributes",d=t.builder(),p=d.id("jmx").title(function(){return"JMX"}).defaultPage({rank:10,isValid:function(e,t){var n="JmxDefaultPage";i.addNamedTreePostProcessor(n,function(r){i.removeNamedTreePostProcessor(n),i.hasMBeans()?e():t()})}}).isValid(function(){return i.hasMBeans()}).href(function(){return u}).build();p.tabs=e.getNavItems(d,i,c),t.add(p)}]),hawtioPluginLoader.addModule(e.pluginName),hawtioPluginLoader.addModule("dangle")}(Jmx||(Jmx={}));var Jmx;!function(e){e.AreaChartController=e._module.controller("Jmx.AreaChartController",["$scope","$routeParams","jolokia","$templateCache","localStorage",function(e,t,n,i,r){e.mbean=t.mbean,e.attribute=t.attribute,e.duration=r.updateRate,e.width=308,e.height=296,e.template="",e.entries=[],e.data={entries:e.entries},e.req=[{type:"read",mbean:e.mbean,attribute:e.attribute}],e.render=function(t){e.entries.push({time:t.timestamp,count:t.value}),e.entries=e.entries.last(15),""===e.template&&(e.template=i.get("areaChart")),e.data={_type:"date_histogram",entries:e.entries},Core.$apply(e)},Core.register(n,e,e.req,Core.onSuccess(e.render))}])}(Jmx||(Jmx={}));var Jmx;!function(e){e._module.controller("Jmx.AttributeController",["$scope","jolokia",function(e,t){function n(t){_.isEqual(e.data,t.value)&&(e.data=Core.safeNull(t.value),Core.$apply(e))}e.init=function(i,r){e.mbean=i,e.attribute=r,angular.isDefined(e.mbean)&&angular.isDefined(e.attribute)&&Core.register(t,e,{type:"read",mbean:e.mbean,attribute:e.attribute},Core.onSuccess(n))}}]),e._module.controller("Jmx.AttributeChartController",["$scope","jolokia","$document",function(e,t,n){function i(i){angular.isDefined(e.chart)||(e.chart=$(n.find("#"+e.attribute)[0]),e.chart&&(e.width=e.chart.width())),angular.isDefined(e.context)||(console.log("Got: ",i),e.context=cubism.context().serverDelay(0).clientDelay(0).step(1e3).size(e.width),e.jcontext=e.context.jolokia(t),e.metrics=[],_.forIn(i.value,function(t,n){e.metrics.push(e.jcontext.metric({type:"read",mbean:e.mbean,attribute:e.attribute,path:n},e.attribute))}),d3.select("#"+e.attribute).call(function(t){t.append("div").data(e.metrics).call(e.context.horizon())}),Core.unregister(t,e),Core.$apply(e))}e.init=function(n,r){e.mbean=n,e.attribute=r,angular.isDefined(e.mbean)&&angular.isDefined(e.attribute)&&Core.register(t,e,{type:"read",mbean:e.mbean,attribute:e.attribute},Core.onSuccess(i))}}])}(Jmx||(Jmx={}));var Jmx;!function(e){e.propertiesColumnDefs=[{field:"name",displayName:"Property",width:"27%",cellTemplate:'<div class="ngCellText" title="{{row.entity.attrDesc}}" data-placement="bottom"><div ng-show="!inDashboard" class="inline" compile="row.entity.getDashboardWidgets()"></div><a href="" ng-click="row.entity.onViewAttribute()">{{row.entity.name}}</a></div>'},{field:"value",displayName:"Value",width:"70%",cellTemplate:'<div class="ngCellText mouse-pointer" ng-click="row.entity.onViewAttribute()" title="{{row.entity.tooltip}}" ng-bind-html="row.entity.summary"></div>'}],e.foldersColumnDefs=[{displayName:"Name",cellTemplate:'<div class="ngCellText"><a href="{{row.entity.folderHref(row)}}"><i class="{{row.entity.folderIconClass(row)}}"></i> {{row.getProperty("title")}}</a></div>'}],e.AttributesController=e._module.controller("Jmx.AttributesController",["$scope","$element","$location","workspace","jolokia","jolokiaUrl","jmxWidgets","jmxWidgetTypes","$templateCache","localStorage","$browser","HawtioDashboard",function(t,n,i,r,a,o,s,l,c,u,d,p){function h(){f()}function f(){Core.unregister(a,t),t.gridData=[],t.mbeanIndex=null;var n=r.getSelectedMBeanName(),o=null,s=r.getSelectedMBean();if(null===s||angular.isUndefined(s)||s.key!==t.lastKey){if(t.attributesInfoCache=null,null==n){var l=i.search().nid,c=r.keyToNodeMap[l];c&&(n=c.objectName)}if(n){var u=function(e){var t=Core.escapeMBeanPath(e),n={type:"LIST",method:"post",path:t,ignoreErrors:!0};return n},d=u(n);a.request(d,Core.onSuccess(function(i){t.attributesInfoCache=i.value,e.log.debug("Updated attributes info cache for mbean "+n)}))}}if(n)o={type:"read",mbean:n},(null===s||angular.isUndefined(s)||s.key!==t.lastKey)&&(t.gridOptions.columnDefs=e.propertiesColumnDefs,t.gridOptions.enableRowClickSelection=!1);else if(s){s.key!==t.lastKey&&(t.gridOptions.columnDefs=[],t.gridOptions.enableRowClickSelection=!0);var p=s.children;if(p){var h=p.map(function(e){return e.objectName}),f=h.filter(function(e){return void 0!==e});if(f){var v=e.getUniqueTypeNames(p);if(v.length<=1){var y=f.map(function(e){return{type:"READ",mbean:e,ignoreErrors:!0}});y.length>0&&(o=y,t.mbeanIndex={},t.mbeanRowCounter=0,t.mbeanCount=f.length)}else console.log("Too many type names "+v)}}}var b=Core.onSuccess(g);o?(t.request=o,Core.register(a,t,o,b)):s&&(s.key!==t.lastKey&&(t.gridOptions.columnDefs=e.foldersColumnDefs,t.gridOptions.enableRowClickSelection=!0),t.gridData=s.children,m(t.gridData),Core.$apply(t)),s&&(t.lastKey=s.key)}function g(n){var i=n.value,a=t.mbeanIndex,o=n.request.mbean;if(o&&(i._id=o),a)if(o){var s=a[o];if(angular.isDefined(s)||(s=t.mbeanRowCounter,a[o]=s,t.mbeanRowCounter+=1),0===s&&(t.selectedIndices=t.selectedItems.map(function(e){return t.gridData.indexOf(e)}),t.gridData=[],!t.gridOptions.columnDefs.length)){var l=r.selectionConfigKey(),c=r.attributeColumnDefs[l]||[],u=c.length,d={};

angular.forEach(c,function(e,t){var n=e.field;n&&(d[n]=e)});var p=[];angular.forEach(i,function(e,t){w(t,e)&&(d[t]||p.push({field:t,displayName:"_id"===t?"Object name":Core.humanizeValue(t),visible:0===u}))}),p=p.sort(function(e,t){return e.field.startsWith("_")?1:t.field.startsWith("_")?-1:e.field.localeCompare(t.field)}),p.forEach(function(e){c.push(e)}),c=c.remove(function(e){return angular.isDefined(e.visible)&&null!=e.visible?!e.visible:!1}),t.gridOptions.columnDefs=c,t.gridOptions.enableRowClickSelection=!0}t.gridData[s]=i,m(t.gridData);var h=t.mbeanCount;if(!h||s+1>=h){var f=t.selectedIndices.map(function(e){return t.gridData[e]}).filter(function(e){return e});t.selectedItems.splice(0,t.selectedItems.length),t.selectedItems.push.apply(t.selectedItems,f)}}else console.log("No mbean name in request "+JSON.stringify(n.request));else{t.gridOptions.columnDefs=e.propertiesColumnDefs,t.gridOptions.enableRowClickSelection=!1;var g=!0;if(angular.isObject(i)){var x=Array();if(angular.forEach(i,function(e,t){if((g||w(t,e))&&!t.startsWith("_")){"ObjectName"===t&&(e=v(e)),angular.isArray(e)&&(e=e.map(function(e){return v(e)}));var n=b(t),i={key:t,name:Core.humanizeValue(t),value:Core.safeNullAsString(e,n)};y(t,i),x.push(i)}}),!x.any(function(e){return"ObjectName"===e.key})){var k={key:"ObjectName",name:"Object Name",value:o};y(k.key,k),x.push(k)}x=x.sortBy("name"),t.selectedItems=[i],i=x}t.gridData=i,m(t.gridData)}Core.$apply(t)}function m(e){e.forEach(function(e){e.inDashboard=t.inDashboard,e.getDashboardWidgets=function(){return t.getDashboardWidgets(e)},e.onViewAttribute=function(){t.onViewAttribute(e)},e.folderIconClass=function(e){return t.folderIconClass(e)},e.folderHref=function(e){return t.folderHref(e)}})}function v(e){if(!angular.isObject(e))return e;var t=Object.keys(e);return 1===t.length&&"objectName"===t[0]?e.objectName:e}function y(e,n){var i=n.value;if(!angular.isArray(i)&&angular.isObject(i)){var r="<table class='table table-striped'>",a="",o=i,s=Object.keys(i).sort();angular.forEach(s,function(e){var t=o[e];r+="<tr><td>"+Core.humanizeValue(e)+"</td><td>"+t+"</td></tr>",a+=""+Core.humanizeValue(e)+": "+t+"  "}),r+="</table>",n.summary=a,n.detailHtml=r,n.tooltip=a}else{var l=i;if(""===l?(l="&nbsp;",n.tooltip=""):n.tooltip=l,n.summary=""+l,n.detailHtml="<pre>"+l+"</pre>",angular.isArray(i)){var c="<ul>";angular.forEach(i,function(e){c+="<li>"+e+"</li>"}),c+="</ul>",n.detailHtml=c}}if(n.rw=!1,n.attrDesc=n.name,n.type="string",null!=t.attributesInfoCache&&"attr"in t.attributesInfoCache){var u=t.attributesInfoCache.attr[e];angular.isDefined(u)&&(n.rw=u.rw,n.attrDesc=u.desc,n.type=u.type)}}function b(e){if(null!=t.attributesInfoCache&&"attr"in t.attributesInfoCache){var n=t.attributesInfoCache.attr[e];if(angular.isDefined(n))return n.type}return null}function w(e,t){return!angular.isObject(t)}t.searchText="",t.nid="empty",t.selectedItems=[],t.lastKey=null,t.attributesInfoCache={},t.entity={},t.attributeSchema={},t.gridData=[],t.attributes="",t.inDashboard=p.inDashboard,t.$watch("gridData.length",function(e,n){e!==n&&(t.attributes=e>0?c.get("gridTemplate"):"")});var x={style:0,mode:0,hideLegend:!0,properties:{key:{label:"Key",tooltip:"Attribute key",type:"static"},attrDesc:{label:"Description",type:"static"},type:{label:"Type",tooltip:"Attribute type",type:"static"},jolokia:{label:"Jolokia URL",tooltip:"Jolokia REST URL",type:"string","input-attributes":{readonly:!0}}}};t.gridOptions={scope:t,selectedItems:[],showFilter:!1,canSelectRows:!1,enableRowSelection:!1,enableRowClickSelection:!1,keepLastSelected:!1,multiSelect:!0,showColumnMenu:!0,displaySelectionCheckbox:!1,filterOptions:{filterText:""},data:"gridData",columnDefs:e.propertiesColumnDefs},t.$watch(function(e){return e.gridOptions.selectedItems.map(function(e){return e})},function(n,i){n!==i&&(e.log.debug("Selected items: ",n),t.selectedItems=n)},!0);var k=_.debounce(f,100,{trailing:!0});t.$on("$routeChangeSuccess",function(e,n,r){t.nid=i.search().nid,setTimeout(function(){k()},10)}),t.$watch("workspace.selection",function(){return r.moveIfViewInvalid()?void Core.unregister(a,t):void setTimeout(function(){k()},10)}),k(),t.hasWidget=function(e){return!0},t.onCancelAttribute=function(){t.entity={}},t.onUpdateAttribute=function(){var e=t.entity.value,n=t.entity.key;t.entity={};var i=r.getSelectedMBeanName();i&&a.setAttribute(i,n,e,Core.onSuccess(function(e){Core.notification("success","Updated attribute "+n)}))},t.onViewAttribute=function(n){if(n.summary){var i=t.entity=_.cloneDeep(n),a=t.attributeSchema=_.cloneDeep(x);"ObjectName"===i.key?delete a.properties.jolokia:i.jolokia=e.getUrlForThing(o,"read",r.getSelectedMBeanName(),i.key),a.properties.value={formTemplate:'<div class="form-group"><label class="control-label">Value</label><div hawtio-editor={{model}}></div></div>'},t.showAttributeDialog=!0}},t.getDashboardWidgets=function(n){var i=r.getSelectedMBeanName();if(!i)return"";var a=s.filter(function(e){return i===e.mbean});if(a.isEmpty())return"";if(a=a.filter(function(e){return e.attribute===n.key||e.total===n.key}),a.isEmpty())return"";n.addChartToDashboard=function(e){t.addChartToDashboard(n,e)};var o=[];return a.forEach(function(t){var n=e.getWidgetType(t);o.push('<i class="'+n.icon+' clickable" title="'+n.title+'" ng-click="row.entity.addChartToDashboard(\''+n.type+"')\"></i>")}),o.join()+"&nbsp;"},t.addChartToDashboard=function(t,n){var a=r.getSelectedMBeanName(),o=s.filter(function(e){return a===e.mbean});o=o.filter(function(e){return e.attribute===t.key||e.total===t.key}),o=o.filter(function(e){return e.type===n});var l=o.first(),c=e.getWidgetType(l);i.url(e.createDashboardLink(c,l))},t.toolBarTemplate=function(){var t=e.getAttributeToolBar(r.selection);return t},t.invokeSelectedMBeans=function(e,n){void 0===n&&(n=null);var i=[];if(angular.forEach(t.selectedItems||[],function(t){var n=t._id;if(n){var r=e;angular.isFunction(e)&&(r=e(t)),i.push({type:"exec",operation:r,mbean:n})}}),i.length){var r=function(){n?n():h()};a.request(i,Core.onSuccess(r,{error:r}))}},t.folderHref=function(e){if(!e.getProperty)return"";var t=e.getProperty("key");return t?Core.createHref(i,"#"+i.path()+"?nid="+t,["nid"]):""},t.folderIconClass=function(e){return e.getProperty?e.getProperty("objectName")?"fa fa-cog":"fa fa-folder-close":""}}])}(Jmx||(Jmx={}));var Jmx;!function(e){e._module.controller("Jmx.ChartEditController",["$scope","$location","workspace","jolokia",function(e,t,n,i){function r(){var r=n.selection;if(angular.isDefined(r)){e.selectedAttributes=[],e.selectedMBeans=[],e.metrics={},e.mbeans={};var a=0,o=0,s=r.children;s&&s.length&&!r.objectName||(s=[r]),s&&s.forEach(function(n){var r=n.objectName,s=n.title;if(s&&r){a++,e.mbeans[s]=s;var l=function(e){var t=Core.escapeMBeanPath(e),n={type:"list",path:t,ignoreErrors:!0};return n},c=l(r);i.request(c,Core.onSuccess(function(n){var i=n.value.attr;if(i){for(var r in i){var s=i[r];if(s){var l=s.type;Core.isNumberTypeName(l)&&(e.metrics[r]||(e.metrics[r]=r))}}if(++o>=a){var c=t.search(),u=Core.toSearchArgumentArray(c.att),d=Core.toSearchArgumentArray(c.el);if(u&&u.length&&u.forEach(function(t){e.metrics[t]&&e.selectedAttributes.push(t)}),d&&d.length&&d.forEach(function(t){e.mbeans[t]&&e.selectedMBeans.push(t)}),e.selectedMBeans.length<1&&(e.selectedMBeans=Object.keys(e.mbeans)),e.selectedAttributes.length<1){var p=Object.keys(e.metrics).sort();e.selectedAttributes=e.selectedMBeans.length>1?[p.first()]:p}$("#attributes").attr("size",_.keys(e.metrics).length),$("#mbeans").attr("size",_.keys(e.mbeans).length),Core.$apply(e)}}Core.$apply(e)},{method:"post"}))}})}}e.selectedAttributes=[],e.selectedMBeans=[],e.metrics={},e.mbeans={},e.size=function(e){return angular.isObject(e)?_.keys(e).length:angular.isArray(e)?e.length:1},e.canViewChart=function(){return e.selectedAttributes.length&&e.selectedMBeans.length&&e.size(e.mbeans)>0&&e.size(e.metrics)>0},e.showAttributes=function(){return e.canViewChart()&&e.size(e.metrics)>1},e.showElements=function(){return e.canViewChart()&&e.size(e.mbeans)>1},e.viewChart=function(){var n=t.search();e.selectedAttributes.length===e.size(e.metrics)?delete n.att:n.att=e.selectedAttributes,e.selectedMBeans.length===e.size(e.mbeans)&&1===e.size(e.mbeans)?delete n.el:n.el=e.selectedMBeans,t.search(n),t.path("jmx/charts")},e.$watch("workspace.selection",r),e.$on("$routeChangeSuccess",function(e,t,n){setTimeout(r,50)})}])}(Jmx||(Jmx={}));var Jmx;!function(e){e._module.controller("Jmx.ChartController",["$scope","$element","$location","workspace","localStorage","jolokiaUrl","jolokiaParams",function(e,t,n,i,r,a,o){function s(){var r=i.selection||i.getSelectedMBean();if(null!=r){if(!angular.isDefined(r)||!angular.isDefined(e.updateRate)||0===e.updateRate)return setTimeout(c,500),void Core.$apply(e);var a=594,s=t.find("#charts");if(!s)return setTimeout(c,500),void Core.$apply(e);a=s.width(),e.reset(),e.charts=s,e.jolokia=new Jolokia(o),e.jolokia.start(e.updateRate);var u=r.objectName;e.metrics=[];var d=cubism.context().serverDelay(e.updateRate).clientDelay(e.updateRate).step(e.updateRate).size(a);e.context=d,e.jolokiaContext=d.jolokia(e.jolokia);var p=n.search(),h=Core.toSearchArgumentArray(p.att);if(u){var f=function(e){var t=Core.escapeMBeanPath(e),n={type:"list",path:t,ignoreErrors:!0};return n},g=f(u),m=e.jolokia.request(g,{method:"post"});if(m){Core.defaultJolokiaErrorHandler(m,{});var v=m.value?m.value.attr:null;if(v){var y=[];for(var b in v){var w=v[b];if(w){var x=w.type;Core.isNumberTypeName(x)&&y.push(b)}}if(h.length){var k=y.filter(function(e){return h.indexOf(e)>=0});k.length&&(y=k)}y=y.sort(),angular.forEach(y,function(t){var n=e.jolokiaContext.metric({type:"read",mbean:u,attribute:t},Core.humanizeValue(t));n&&e.metrics.push(n)})}}}else{var C=Core.toSearchArgumentArray(p.el);if(h&&h.length&&C&&C.length){var S={};C.forEach(function(e){var t=r.get(e);if(!t&&r.children&&(t=r.children.find(function(t){return e===t.title})),t){var n=t.objectName;n&&(S[e]=n)}}),h=h.sort(),h.forEach(function(t){angular.forEach(S,function(n,i){var r=Core.humanizeValue(t),a=i+": "+r,o=e.jolokiaContext.metric({type:"read",mbean:n,attribute:t},a);o&&e.metrics.push(o)})})}r.children.length&&!e.metrics.length&&n.path("jmx/chartEdit")}if(e.metrics.length>0){var _=d3.select(s.get(0)),T=_.selectAll(".axis"),$=!1;if(T.data(["top","bottom"]).enter().append("div").attr("class",function(e){return e+" axis"}).each(function(e){if(!$)try{d3.select(this).call(d.axis().ticks(12).orient(e))}catch(t){$||($=!0)}}),$)return e.reset(),setTimeout(c,500),void Core.$apply(e);_.append("div").attr("class","rule").call(d.rule()),d.on("focus",function(e){try{_.selectAll(".value").style("right",null===e?null:d.size()-e+"px")}catch(t){l.info("error: ",t)}}),e.metrics.forEach(function(e){_.call(function(t){t.append("div").data([e]).attr("class","horizon").call(d.horizon())})})}else e.reset();Core.$apply(e)}}var l=Logger.get("JMX");e.metrics=[],e.updateRate=1e3,e.context=null,e.jolokia=null,e.charts=null,e.reset=function(){e.context&&(e.context.stop(),e.context=null),e.jolokia&&(e.jolokia.stop(),e.jolokia=null),e.charts&&(e.charts.empty(),e.charts=null)},e.$on("$destroy",function(){try{e.deregRouteChange()}catch(t){}try{e.dereg()}catch(t){}e.reset()}),e.errorMessage=function(){return 0===e.updateRate?"updateRate":0===e.metrics.length?"metrics":void 0};var c=_.debounce(s,200,{trailing:!0});e.deregRouteChange=e.$on("$routeChangeSuccess",function(e,t,n){c()}),e.dereg=e.$watch("workspace.selection",function(){i.moveIfViewInvalid()||c()}),c()}])}(Jmx||(Jmx={}));var Jmx;!function(e){e.DonutChartController=e._module.controller("Jmx.DonutChartController",["$scope","$routeParams","jolokia","$templateCache",function(e,t,n,i){if(e.mbean=t.mbean,e.total=t.total,e.attribute=t.attribute,e.terms=t.terms,e.remainder=t.remaining,e.template="",e.termsArray=e.terms.split(","),e.data={total:0,terms:[]},e.attribute){var r=e.termsArray.include(e.total);e.reqs=[{type:"read",mbean:e.mbean,attribute:e.attribute,paths:r.join(",")}],e.termsArray.forEach(function(t){e.data.terms.push({term:t,count:0})})}else e.reqs=[{type:"read",mbean:e.mbean,attribute:e.total}],e.termsArray.forEach(function(t){e.reqs.push({type:"read",mbean:e.mbean,attribute:t}),e.data.terms.push({term:t,count:0})});e.remainder&&"-"!==e.remainder&&e.data.terms.push({term:e.remainder,count:0}),e.render=function(t){var n=null;if(e.remainder&&"-"!==e.remainder&&(n=e.data.terms.find(function(t){return t.term===e.remainder})),e.attribute)t.request.attribute===e.attribute&&(e.data.total=t.value[e.total.toLowerCase()],e.data.terms.forEach(function(n){n.term!==e.remainder&&(n.count=t.value[n.term.toLowerCase()])}),n&&(n.count=e.data.total,e.data.terms.forEach(function(t){t.term!==e.remainder&&(n.count=n.count-t.count)})));else if(t.request.attribute===e.total)e.data.total=t.value;else{var r=e.data.terms.find(function(e){return e.term===t.request.attribute});r&&(r.count=t.value),n&&(n.count=e.data.total,e.data.terms.forEach(function(t){t.term!==e.remainder&&(n.count=n.count-t.count)}))}""===e.template&&(e.template=i.get("donut")),e.data=Object.clone(e.data),Core.$apply(e)},Core.register(n,e,e.reqs,Core.onSuccess(e.render))}])}(Jmx||(Jmx={}));var Core;!function(e){function t(e,t,n,i){e.graphForce&&e.graphForce.stop(),i||(i=$("#canvas")[0]);var r=$(i);if(r.children("svg").remove(),t.length){var a=r.parent().width(),o=r.parent().height();if(100>o){var s=r.offset();o=$(document).height()-5,s&&(o-=s.top)}var l=d3.select(r[0]).append("svg").attr("width",a).attr("height",o),c=d3.layout.force().distance(100).charge(-1200).linkDistance(50).size([a,o]);e.graphForce=c,l.append("svg:defs").selectAll("marker").data(["from"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",25).attr("refY",-1.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5"),c.nodes(t).links(n).start();var u=l.selectAll(".link").data(n).enter().append("line").attr("class","link");u.attr("class","link from"),u.attr("marker-end","url(#from)");var d=l.selectAll(".node").data(t).enter().append("g").attr("class","node").call(c.drag);d.append("image").attr("xlink:href",function(e){return e.imageUrl}).attr("x",-15).attr("y",-15).attr("width",30).attr("height",30),d.append("text").attr("dx",20).attr("dy",".35em").text(function(e){return e.label}),c.on("tick",function(){u.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),d.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})})}}function n(e,t,n){var i={};e.forEach(function(e){var t=e.id;void 0===t?console.log("No node found for node "+JSON.stringify(e)):(void 0===e.edges&&(e.edges=[]),e.label||(e.label="node "+t),i[t]=e)});var r=d3.values(i);return t.forEach(function(e){var t=i[e.source],r=i[e.target];if(void 0===t||void 0===r)console.log("Bad link!  "+t+" target "+r+" for "+e);else{var a={source:t,target:r};n.push(a),t.edges.push(a),r.edges.push(a)}}),r}function i(t,n,i,r,s,l,c){function u(e){var t=e.dagre.points.slice(0),n=dagre.util.intersectRect(e.source.dagre,t.length>0?t[0]:e.source.dagre),i=dagre.util.intersectRect(e.target.dagre,t.length>0?t[t.length-1]:e.source.dagre);return t.unshift(n),t.push(i),d3.svg.line().x(function(e){return e.x}).y(function(e){return e.y}).interpolate("linear")(t)}function d(e,t,n){e.dagre.points.forEach(function(e){e.x=Math.max(0,Math.min(_.width,e.x+t)),e.y=Math.max(0,Math.min(_.height,e.y+n))})}void 0===l&&(l=!1),void 0===c&&(c=null);var p=10,h=[],f=e.createGraphStates(t,n,h),g=d3.select(s?s:"svg");s&&$(s).children("g").remove(),$(g).children("g").remove();var m=g.append("g").attr("transform","translate(5, 5)"),t=m.selectAll("g .node").data(f).enter().append("g").attr("class","node").attr("data-cid",function(e){return e.cid}).attr("id",function(e){return"node-"+e.label});t.append("title").text(function(e){return e.tooltip||""});var v=m.selectAll("path .edge").data(h).enter().append("path").attr("class","edge").attr("marker-end","url(#arrowhead)"),y=t.append("rect").attr("rx","4").attr("ry","4").attr("class",function(e){return e.type}),b=t.append("image").attr("xlink:href",function(e){return e.imageUrl}).attr("x",-12).attr("y",-20).attr("height",24).attr("width",24),w=t.append("text").attr("text-anchor","end").attr("class","counter").attr("x",0).attr("dy",0).text(a),x=(t.append("text").attr("text-anchor","middle").attr("class","inflight").attr("x",10).attr("dy",-32).text(o),t.append("text").attr("text-anchor","middle").attr("x",0));x.append("tspan").attr("x",0).attr("dy",28).text(function(e){return e.label});var k=12,C=80;x.each(function(e){var t=this.getBBox();e.bbox=t,t.width<C&&(t.width=C),e.width=t.width+2*p,e.height=t.height+2*p+k}),y.attr("x",function(e){return-(e.bbox.width/2+p)}).attr("y",function(e){return-(e.bbox.height/2+p+k/2)}).attr("width",function(e){return e.width}).attr("height",function(e){return e.height}),null!=c&&y.on("click",c),b.attr("x",function(e){return-e.bbox.width/2}),x.attr("x",function(e){return-e.bbox.width/2}).attr("y",function(e){return-e.bbox.height/2}),w.attr("x",function(e){var t=e.bbox.width;return t/2}),dagre.layout().nodeSep(50).edgeSep(10).rankSep(50).nodes(f).edges(h).debugLevel(1).run(),t.attr("transform",function(e){return"translate("+e.dagre.x+","+e.dagre.y+")"}),v.attr("id",function(e){return e.dagre.id}).attr("d",function(e){return u(e)});var S=g.node();if(S){var _=S.getBBox();_&&(g.attr("width",_.width+10),g.attr("height",_.height+10))}if(l){var T=d3.behavior.drag().origin(function(e){return e.pos?{x:e.pos.x,y:e.pos.y}:{x:e.dagre.x,y:e.dagre.y}}).on("drag",function(e,t){var n=e.dagre.x,i=e.dagre.y;e.dagre.x=Math.max(e.width/2,Math.min(_.width-e.width/2,d3.event.x)),e.dagre.y=Math.max(e.height/2,Math.min(_.height-e.height/2,d3.event.y)),d3.select(this).attr("transform","translate("+e.dagre.x+","+e.dagre.y+")");var r=e.dagre.x-n,a=e.dagre.y-i;e.edges.forEach(function(e){d(e,r,a),d3.select("#"+e.dagre.id).attr("d",u(e))})}),A=d3.behavior.drag().on("drag",function(e,t){d(e,d3.event.dx,d3.event.dy),d3.select(this).attr("d",u(e))});t.call(T),v.call(A)}return f}function r(e){var t=d3.select("svg");t.selectAll("text.counter").text(a),t.selectAll("text.inflight").text(o),t.selectAll("g .node title").text(function(e){return e.tooltip||""})}function a(e){return e.counter||""}function o(e){return e.inflight||""}e.d3ForceGraph=t,e.createGraphStates=n,e.dagreLayoutGraph=i,e.dagreUpdateGraphData=r}(Core||(Core={}));var Tree;!function(e){function t(e){i(e,!0)}function n(e){i(e,!1)}function i(e,t){$(e).dynatree("getRoot").visit(function(e){e.expand(t)})}function r(t){if(t){angular.isArray(t)&&t.forEach(function(t){e.sanitize(t)});var n=t.title;n&&(t.title=n.unescapeHTML(!0).escapeHTML()),t.children&&e.sanitize(t.children)}}e.pluginName="tree",e.log=Logger.get("Tree"),e.expandAll=t,e.contractAll=n,e.sanitize=r,e._module=angular.module(e.pluginName,[]),e._module.directive("hawtioTree",["workspace","$timeout","$location",function(t,n,i){return function(r,a,o){function s(e){var t=null,n=o[e];return n&&(t=Core.pathGet(r,n),angular.isFunction(t)||(t=null)),t}function l(){Core.$applyNowOrLater(r)}function c(n){if(x=n,x&&e.sanitize(x),x&&!p){var s=$(a),c=Core.asArray(x),u=o.hideroot;"true"===u&&(c=x.children);var d={clickFolderMode:3,onActivate:function(e){var n=e.data;f?f(n,e):t.updateSelectionNode(n),Core.$apply(r)},onClick:function(e,t){if(t.metaKey){t.preventDefault();var n=i.absUrl();if(e&&e.data){var r=e.data.key;if(r){var a=i.search();a[y]=r;var o=n.indexOf("?");0>=o?n+="?":n=n.substring(0,o+1),n+=$.param(a)}}return window.open(n,"_blank"),window.focus(),!1}return!0},persist:!1,debugLevel:0,children:c,dnd:{onDragStart:g?g:function(e){return console.log("onDragStart!"),!0},onDragEnter:m?m:function(e,t){return console.log("onDragEnter!"),!0},onDrop:v?v:function(e,t,n){return console.log("onDrop!"),t.move(e,n),!0}}};v||m||g||delete d.dnd,p=s.dynatree(d);var h=!1,b=o.activatenodes;if(b){var w=r[b],x=s.dynatree("getTree");w&&x&&angular.forEach(Core.asArray(w),function(e){x.activateKey(e),h=!0})}var k=s.dynatree("getRoot");if(k){var C=o.onroot;if(C){var S=r[C];S&&S(k)}if(!h){var c=k.getChildren();if(c&&c.length){var _=c[0];_.expand(!0),_.activate(!0)}}}}l()}function u(){h=n(function(){l()},300)}var d=null,p=null,h=null,f=s("onselect"),g=s("ondragstart"),m=s("ondragenter"),v=s("ondrop"),d=o.hawtioTree,y=d;r.$watch(d,c),r.$on("hawtio.tree."+d,function(e){var t=Core.pathGet(r,d);c(t)}),a.bind("$destroy",function(){n.cancel(h)}),u()}}]),e._module.run(["helpRegistry",function(t){t.addDevDoc(e.pluginName,"app/tree/doc/developer.md")}]),hawtioPluginLoader.addModule(e.pluginName)}(Tree||(Tree={}));var Jmx;!function(e){e._module.controller("Jmx.TreeHeaderController",["$scope",function(e){e.expandAll=function(){Tree.expandAll("#jmxtree")},e.contractAll=function(){Tree.contractAll("#jmxtree")}}]),e._module.controller("Jmx.MBeansController",["$scope","$location","workspace",function(t,n,i){function r(){e.updateTreeSelectionFromURL(n,$("#jmxtree"))}t.num=1,t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(r,50)}),t.select=function(e){t.workspace.updateSelectionNode(e),Core.$apply(t)},t.populateTree=function(){var a=$("#jmxtree");t.tree=i.tree,e.enableTree(t,n,i,a,t.tree.children,!0),setTimeout(r,50)},t.$on("jmxTreeUpdated",t.populateTree),t.populateTree()}])}(Jmx||(Jmx={}));var Jmx;!function(e){e.NavBarController=e._module.controller("Jmx.NavBarController",["$scope","$location","workspace","$route","jolokia","localStorage",function(t,n,i,r,a,o){t.hash=i.hash(),t.topLevelTabs=[],t.subLevelTabs=i.subLevelTabs,t.currentPerspective=null,t.localStorage=o,t.recentConnections=[],t.goTo=function(e){n.url(e)},t.$watch("hash",function(t,n){t!==n&&e.log.debug("hash changed from ",n," to ",t)}),t.$on("$routeChangeSuccess",function(){t.hash=i.hash()}),t.isValid=function(e){return"isValid"in e?e.isValid(i):!0},t.link=function(e,t){void 0===t&&(t=!1);var i;i=angular.isString(e)?e:angular.isObject(e)?e.href():null,i=i||"";var r=["tab","nid","chapter","pref","q"];return!t&&i&&(i.indexOf("?p=")>=0||i.indexOf("&p=")>=0)&&r.push("p"),Core.createHref(n,i,r)},t.fullScreenLink=function(){var e="#"+n.path()+"?tab=notree";return Core.createHref(n,e,["tab"])},t.addToDashboardLink=function(){var e="#"+n.path()+i.hash(),t="#/dashboard/add?tab=dashboard&href="+encodeURIComponent(e);if(n.url().has("/jmx/charts")){var r={size_x:4,size_y:3};t+="&size="+encodeURIComponent(angular.toJson(r))}return t},t.isActive=function(e){if(angular.isString(e))return i.isLinkActive(e);var t=e.isActive;return t?t(i):i.isLinkActive(e.href())},t.isTopTabActive=function(e){if(angular.isString(e))return i.isTopTabActive(e);var t=e.isActive;return t?t(i):i.isTopTabActive(e.href())},t.activeLink=function(){var e=t.topLevelTabs();if(!e)return"Loading...";var n=e.find(function(e){return t.isActive(e)});return n?n.content:""}}])}(Jmx||(Jmx={}));var Jmx;!function(e){e._module.controller("Jmx.OperationController",["$scope","workspace","jolokia","jolokiaUrl","$timeout","$location","localStorage","$browser",function(t,n,i,r,a,o,s,l){t.item=t.selectedOperation,t.title=t.item.humanReadable,t.desc=t.item.desc,t.operationResult="",t.executeIcon="fa fa-ok",t.mode="text",t.entity={},t.formConfig={hideLegend:!0,properties:{}},t.jolokiaUrl=e.getUrlForThing(r,"exec",n.getSelectedMBeanName(),t.item.name),t.item.args.forEach(function(e){var n={type:e.type,tooltip:e.desc,description:"Type: "+e.type};("java.util.list"===e.type.toLowerCase()||"[j"===e.type.toLowerCase())&&(n.type="array",n.items={type:"string"}),"java.util.map"===e.type.toLowerCase()&&(n.type="map",n.items={key:{type:"string"},value:{type:"string"}}),t.formConfig.properties[e.name]=n}),e.log.debug("Form config: ",t.formConfig),a(function(){$("html, body").animate({scrollTop:0},"medium")},250),t.dump=function(e){console.log(e)},t.ok=function(){t.operationResult=""},t.reset=function(){t.entity={}},t.close=function(){t.$parent.showInvoke=!1},t.handleResponse=function(e){t.executeIcon="fa fa-ok",t.operationStatus="success",t.operationResult=null===e||"null"===e?"Operation Succeeded!":"string"==typeof e?e:angular.toJson(e,!0),t.mode=CodeEditor.detectTextFormat(t.operationResult),Core.$apply(t)},t.onSubmit=function(){var n=t.entity;e.log.debug("onSubmit: json:",n),e.log.debug("$scope.item.args: ",t.item.args),angular.forEach(n,function(e,n){t.item.args.find(function(e){return e.name===n}).value=e}),t.execute()},t.execute=function(){var e=n.selection;if(e){var r=e.objectName;if(r){var a=[r,t.item.name];t.item.args&&t.item.args.forEach(function(e){a.push(e.value)}),a.push(Core.onSuccess(t.handleResponse,{error:function(e){t.executeIcon="fa fa-ok",t.operationStatus="error";var n=e.error;t.operationResult=n;var i=e.stacktrace;i&&(t.operationResult=i),Core.$apply(t)}})),t.executeIcon="fa fa-spinner fa fa-spin";var o=i.execute;o.apply(i,a)}}}}]),e._module.controller("Jmx.OperationsController",["$scope","workspace","jolokia","rbacACLMBean","$templateCache",function(t,n,i,r,a){function o(e){return"("+e.map(function(e){return e.type}).join()+")"}function s(e){for(var t in e)t=""+t,e[t].name=t,e[t].humanReadable=Core.humanizeValue(t);return e}function l(n,a){var o={};o[n]=[],angular.forEach(a,function(e,t){o[n].push(e.name)}),r.then(function(r){i.request({type:"exec",mbean:r,operation:"canInvoke(java.util.Map)",arguments:[o]},Core.onSuccess(function(i){var r=i.value;angular.forEach(r[n],function(e,t){a[t].canInvoke=e.CanInvoke}),e.log.debug("Got operations: ",t.operations),Core.$apply(t)},{error:function(n){e.log.debug("Failed to fetch ACL for operations: ",n),Core.$apply(t)}}))})}function c(e){t.fetched=!0;var n=e.value.op,i={};angular.forEach(n,function(e,t){angular.isArray(e)?angular.forEach(e,function(e,n){i[t+o(e.args)]=e}):i[t+o(e.args)]=e}),t.operations=s(i),t.isOperationsEmpty()?Core.$apply(t):(l(t.objectName,t.operations),Core.$apply(t))}t.fetched=!1,t.operations={},t.objectName="",t.methodFilter="",t.workspace=n,t.selectedOperation=null,t.showInvoke=!1,t.template="",t.invokeOp=function(e){t.canInvoke(e)&&(t.selectedOperation=e,t.showInvoke=!0)},t.getJson=function(e){return angular.toJson(e,!0)},t.cancel=function(){t.selectedOperation=null,t.showInvoke=!1},t.$watch("showInvoke",function(e,n){e!==n&&(t.template=e?a.get("operationTemplate"):"")});var u=_.debounce(function(){var e=n.selection||n.getSelectedMBean();e&&(t.objectName=e.objectName,t.objectName&&i.request({type:"list",path:Core.escapeMBeanPath(t.objectName)},Core.onSuccess(c)))},100,{trailing:!0});t.isOperationsEmpty=function(){return $.isEmptyObject(t.operations)},t.doFilter=function(e){return Core.isBlank(t.methodFilter)?!0:e.name.toLowerCase().has(t.methodFilter.toLowerCase())||e.humanReadable.toLowerCase().has(t.methodFilter.toLowerCase())?!0:!1},t.canInvoke=function(e){return"canInvoke"in e?e.canInvoke:!0},t.getClass=function(e){return t.canInvoke(e)?"can-invoke":"cant-invoke"},t.$watch("workspace.selection",function(e,t){n.moveIfViewInvalid()||u()})}])}(Jmx||(Jmx={}));var Jmx;!function(e){e.ViewController=e._module.controller("Jmx.ViewController",["$scope","$route","$location","layoutTree","layoutFull","viewRegistry",function(t,n,i,r,a,o){function s(t){var n=void 0;return _.forIn(o,function(i,r){if(!n)if(r.startsWith("/")&&r.endsWith("/")){var a=r.substring(1,r.length-1);try{var o=new RegExp(a,"");o.exec(t)&&(n=i)}catch(s){e.log.debug("Invalid RegExp "+a+" for viewRegistry value: "+i)}}else t.startsWith(r)&&(n=i)}),n}function l(){var n=null,a=i.search(),o=a.tab;if(angular.isString(o)&&(n=s(o)),!n){var l=i.path();l&&(l.startsWith("/")&&(l=l.substring(1)),n=s(l))}return n||(n=r),t.viewPartial=n,e.log.debug("Using view partial: "+n),n}l(),t.$on("$routeChangeSuccess",function(e,t,n){l()})}])}(Jmx||(Jmx={}));var JVM;!function(e){e.windowJolokia=void 0,e._module=angular.module(e.pluginName,[]),e._module.config(["$provide","$routeProvider",function(t,n){n.when("/jvm",{redirectTo:"/jvm/connect"}).when("/jvm/welcome",{templateUrl:UrlHelpers.join(e.templatePath,"welcome.html")}).when("/jvm/discover",{templateUrl:UrlHelpers.join(e.templatePath,"discover.html")}).when("/jvm/connect",{templateUrl:UrlHelpers.join(e.templatePath,"connect.html")}).when("/jvm/local",{templateUrl:UrlHelpers.join(e.templatePath,"local.html")})}]),e._module.constant("mbeanName","hawtio:type=JVMList"),e._module.run(["HawtioNav","$location","workspace","viewRegistry","layoutFull","helpRegistry","preferencesRegistry","ConnectOptions","locationChangeStartTasks","HawtioDashboard","HawtioExtension","$templateCache","$compile",function(t,n,i,r,a,o,s,l,c,u,d,p,h){d.add("hawtio-header",function(t){var n=p.get(UrlHelpers.join(e.templatePath,"navbarHeaderExtension.html"));return h(n)(t)}),u.inDashboard||c.addTask("ConParam",function(e,t,i){if(HawtioCore.injector&&l&&l.name&&t){var r=new URI(t).query(!0);r.con||(r.con=l.name,n.search(r))}});var f=t.builder(),g=f.id("jvm-remote").href(function(){return"/jvm/connect"}).title(function(){return"Remote"}).tooltip(function(){return"To connect to a remote JVM"}).build(),m=f.id("jvm-local").href(function(){return"/jvm/local"}).title(function(){return"Local"}).tooltip(function(){return"To connect to a locale JVM"}).show(function(){return e.hasLocalMBean(i)}).build(),v=f.id("jvm-discover").href(function(){return"/jvm/discover"}).title(function(){return"Discover"}).tooltip(function(){return"To discover JVMs in the network that has Jolokia agent running"}).show(function(){return e.hasDiscoveryMBean(i)}).build(),y=f.id("jvm").href(function(){return"/jvm"}).title(function(){return"Connect"}).isValid(function(){return null==l||null==l.name}).tabs(g,m,v).build();t.add(y),o.addUserDoc("jvm","plugins/jvm/doc/help.md"),s.addTab("Connect","plugins/jvm/html/reset.html"),s.addTab("Jolokia","plugins/jvm/html/jolokiaPreferences.html")}]),hawtioPluginLoader.addModule(e.pluginName)}(JVM||(JVM={}));var JVM;!function(e){e.ConnectController=e._module.controller("JVM.ConnectController",["$scope","$location","localStorage","workspace","$http",function(t,n,i,r,a){function o(){return Core.createConnectOptions({scheme:"http",host:"localhost",path:"jolokia",port:8181,userName:"",password:"",useProxy:!t.disableProxy})}e.configureScope(t,n,r),t.forms={},a.get("proxy").then(function(e){t.disableProxy=200===e.status&&Core.isBlank(e.data)?!1:!0});var s=!1;if(r.addNamedTreePostProcessor("ConnectTab",function(e){s=r&&r.tree&&r.tree.children&&r.tree.children.length>0,t.disableProxy=!s||Core.isChromeApp(),Core.$apply(t)}),t.lastConnection="",e.connectControllerKey in i)try{t.lastConnection=angular.fromJson(i[e.connectControllerKey])}catch(l){t.lastConnection="",delete i[e.connectControllerKey]}t.connectionConfigs=Core.loadConnectionMap(),t.currentConfig=Core.isBlank(t.lastConnection)?o():t.connectionConfigs[t.lastConnection],t.formConfig={properties:{name:{type:"java.lang.String",tooltip:"Name for this connection",required:!0,"input-attributes":{placeholder:"Unnamed..."}},scheme:{type:"java.lang.String",tooltip:"HTTP or HTTPS","enum":["http","https"],required:!0},host:{type:"java.lang.String",tooltip:"Target host to connect to",required:!0},port:{type:"java.lang.Integer",tooltip:"The HTTP port used to connect to the server","input-attributes":{min:"0"},required:!0},path:{type:"java.lang.String",tooltip:"The URL path used to connect to Jolokia on the remote server"},userName:{type:"java.lang.String",tooltip:"The user name to be used when connecting to Jolokia"},password:{type:"password",tooltip:"The password to be used when connecting to Jolokia"},useProxy:{type:"java.lang.Boolean",tooltip:"Whether or not we should use a proxy. See more information in the panel to the left.","control-attributes":{"ng-hide":"disableProxy"}}}},t.newConnection=function(){t.lastConnection=""},t.deleteConnection=function(){delete t.connectionConfigs[t.lastConnection],Core.saveConnectionMap(t.connectionConfigs);var e=_.keys(t.connectionConfigs);

t.lastConnection=0===e.length?"":e[0]},t.$watch("lastConnection",function(n,r){e.log.debug("lastConnection: ",n),n!==r&&(t.currentConfig=Core.isBlank(n)?o():t.connectionConfigs[n],i[e.connectControllerKey]=angular.toJson(n))},!0),t.save=function(){t.gotoServer(t.currentConfig,null,!0)},t.gotoServer=function(e,n,r){e||(e=Core.getConnectOptions(t.lastConnection));var a=e.name;return t.connectionConfigs[a]=e,t.lastConnection=a,r===!0?(Core.saveConnectionMap(t.connectionConfigs),t.connectionConfigs=Core.loadConnectionMap(),angular.extend(t.currentConfig,t.connectionConfigs[t.lastConnection]),void Core.$apply(t)):(Core.connectToServer(i,e),t.connectionConfigs=Core.loadConnectionMap(),angular.extend(t.currentConfig,t.connectionConfigs[t.lastConnection]),void Core.$apply(t))}}])}(JVM||(JVM={}));var JVM;!function(e){e._module.controller("JVM.DiscoveryController",["$scope","localStorage","jolokia",function(t,n,i){function r(e){if(!e.url)return void Core.notification("warning","No URL available to connect to agent");var t=Core.createConnectOptions();t.name=e.agent_description;var i=Core.parseUrl(e.url);angular.extend(t,i),t.userName=e.username,t.password=e.password,Core.connectToServer(n,t)}t.discovering=!0,t.agents=void 0,t.$watch("agents",function(e,n){e!==n&&(t.selectedAgent=t.agents.find(function(e){return e.selected}))},!0),t.closePopover=function(e){$(e.currentTarget).parents(".popover").prev().popover("hide")},t.connectWithCredentials=function(e,n){t.closePopover(e),r(n)},t.gotoServer=function(e,t){t.secured?$(e.currentTarget).popover("show"):r(t)},t.getElementId=function(e){return e.agent_id.dasherize().replace(/\./g,"-")},t.getLogo=function(t){return t.server_product?e.logoRegistry[t.server_product]:e.logoRegistry.generic},t.filterMatches=function(e){return Core.isBlank(t.filter)?!0:angular.toJson(e).toLowerCase().has(t.filter.toLowerCase())},t.getAgentIdClass=function(e){return t.hasName(e)?"":"strong"},t.hasName=function(e){return e.server_vendor&&e.server_product&&e.server_version?!0:!1},t.render=function(e){if(t.discovering=!1,e){var n=angular.toJson(e,!0);t.responseJson!==n&&(t.responseJson=n,t.agents=e)}Core.$apply(t)},t.fetch=function(){t.discovering=!0,i.execute("jolokia:type=Discovery","lookupAgentsWithTimeout(int)",1e4,Core.onSuccess(t.render))},t.fetch()}])}(JVM||(JVM={}));var JVM;!function(e){e.HeaderController=e._module.controller("JVM.HeaderController",["$scope","ConnectOptions",function(e,t){t&&(e.containerName=t.name||"",t.returnTo&&(e.goBack=function(){window.location.href=t.returnTo}))}])}(JVM||(JVM={}));var JVM;!function(e){e._module.controller("JVM.JolokiaPreferences",["$scope","localStorage","jolokiaParams","$window",function(t,n,i,r){var a={properties:{maxDepth:{type:"number",description:"The number of levels jolokia will marshal an object to json on the server side before returning"},maxCollectionSize:{type:"number",description:"The maximum number of elements in an array that jolokia will marshal in a response"}}};t.entity=t,t.config=a,Core.initPreferenceScope(t,n,{maxDepth:{value:e.DEFAULT_MAX_DEPTH,converter:parseInt,formatter:parseInt,post:function(e){i.maxDepth=e,n.jolokiaParams=angular.toJson(i)}},maxCollectionSize:{value:e.DEFAULT_MAX_COLLECTION_SIZE,converter:parseInt,formatter:parseInt,post:function(e){i.maxCollectionSize=e,n.jolokiaParams=angular.toJson(i)}}}),t.reboot=function(){r.location.reload()}}])}(JVM||(JVM={}));var JVM;!function(e){var t=["/hawtio/jolokia","/jolokia","jolokia"],n=null;hawtioPluginLoader.registerPreBootstrapTask(function(i){function r(e){0===e.length?i():a(e.pop())}function a(a){e.log.debug("trying URL: ",a),$.ajax(a).always(function(o,s,l){if(200===l.status)try{var c=angular.fromJson(o);"value"in c&&"agent"in c.value?(n=a,e.log.debug("Found jolokia agent at: ",a," version: ",c.value.agent),i()):r(t)}catch(u){r(t)}else 401===l.status||403===l.status?(n=a,e.log.debug("Using URL: ",a," assuming it could be an agent but got return code: ",l.status),i()):r(t)})}var o=new URI,s=o.query(!0);e.log.debug("query: ",s);var l=s.jolokiaUrl;if(l){delete s["sub-tab"],delete s["main-tab"],l=l.unescapeURL();var c=new URI(l),u=s.title||"Unknown Connection",d=s.token||Core.trimLeading(o.hash(),"#"),p=Core.createConnectOptions({name:u,scheme:c.protocol(),host:c.hostname(),port:Core.parseIntValue(c.port()),path:Core.trimLeading(c.pathname(),"/"),useProxy:!1});Core.isBlank(d)||(p.token=d),_.merge(p,c.query(!0)),_.assign(p,s),e.log.debug("options: ",p);var h=Core.loadConnectionMap();h[u]=p,Core.saveConnectionMap(h),o.hash("").query({con:u}),window.location.replace(o.toString())}var f=s.con;return f?(e.log.debug("Not discovering jolokia"),void i()):void a(t.pop())}),e._module.service("ConnectionName",["$location",function(t){var n=null;return function(i){if(void 0===i&&(i=!1),!Core.isBlank(n)&&!i)return n;n="";var r=t.search();return"con"in window?(n=window.con,e.log.debug("Using connection name from window: ",n)):"con"in r?(n=r.con,e.log.debug("Using connection name from URL: ",n)):e.log.debug("No connection name found, using direct connection to JVM"),n}}]),e._module.service("ConnectOptions",["ConnectionName",function(e){var t=e();if(Core.isBlank(t))return!1;var n=Core.getConnectOptions(t);try{window.opener&&"passUserDetails"in window.opener&&(n.userName=window.opener.passUserDetails.username,n.password=window.opener.passUserDetails.password)}catch(i){}return n}]),e._module.factory("jolokiaUrl",["ConnectOptions",function(t){var i=void 0;if(t&&t.name?(i=Core.createServerConnectionUrl(t),e.log.debug("Using configured URL")):(e.log.debug("Using discovered URL"),i=n),!i)return!1;var r=new URI,a=new URI(i);return a.protocol()||a.protocol(r.protocol()),a.hostname()||a.host(r.hostname()),a.port()||a.port(r.port()),i=a.toString(),e.log.debug("Complete jolokia URL: ",i),i}]),e._module.factory("jolokiaStatus",function(){return{xhr:null}}),e.DEFAULT_MAX_DEPTH=7,e.DEFAULT_MAX_COLLECTION_SIZE=500,e._module.factory("jolokiaParams",["jolokiaUrl","localStorage",function(t,n){var i={canonicalNaming:!1,ignoreErrors:!0,mimeType:"application/json",maxDepth:e.DEFAULT_MAX_DEPTH,maxCollectionSize:e.DEFAULT_MAX_COLLECTION_SIZE};return"jolokiaParams"in n?i=angular.fromJson(n.jolokiaParams):n.jolokiaParams=angular.toJson(i),i.url=t,i}]),e._module.factory("jolokia",["$location","localStorage","jolokiaStatus","$rootScope","userDetails","jolokiaParams","jolokiaUrl","ConnectOptions","HawtioDashboard",function(t,n,i,r,a,o,s,l,c){if(c.inDashboard&&e.windowJolokia)return e.windowJolokia;if(s){var u=null,d=null;if(l.userName&&l.password)u=l.userName,d=l.password;else if(angular.isDefined(a)&&angular.isDefined(a.username)&&angular.isDefined(a.password))u=a.username,d=a.password;else{var p=t.search();u=p._user,d=p._pwd,angular.isArray(u)&&(u=u[0]),angular.isArray(d)&&(d=d[0])}u&&d&&!l.token?(a.username=u,a.password=d,e.log.debug("Setting authorization header to username/password"),$.ajaxSetup({beforeSend:function(e){e.setRequestHeader("Authorization",Core.getBasicAuthHeader(u,d))}})):l.token?(e.log.debug("Setting authorization header to token"),$.ajaxSetup({beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+l.token)}})):e.log.debug("Not setting any authorization header"),o.ajaxError=function(e,t,n){401===e.status||403===e.status?(a.username=null,a.password=null,delete a.loginDetails,delete window.opener.passUserDetails):(i.xhr=e,!e.responseText&&n&&(e.responseText=n.stack)),Core.$apply(r)};var h=new Jolokia(o);return h.stop(),"updateRate"in n&&n.updateRate>0&&h.start(n.updateRate),e.windowJolokia=h,h}var f={isDummy:!0,running:!1,request:function(e,t){return null},register:function(e,t){return null},list:function(e,t){return null},search:function(e,t){return null},getAttribute:function(e,t,n,i){return null},setAttribute:function(e,t,n,i,r){},version:function(e){return null},execute:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return null},start:function(e){f.running=!0},stop:function(){f.running=!1},isRunning:function(){return f.running},jobs:function(){return[]}};return e.windowJolokia=f,f}])}(JVM||(JVM={}));var JVM;!function(e){e._module.controller("JVM.JVMsController",["$scope","$window","$location","localStorage","workspace","jolokia","mbeanName",function(t,n,i,r,a,o,s){function l(e){t.initDone=!0,t.data=e.value,0===t.data.length&&(t.status="Could not discover local JVM processes"),Core.$apply(t)}e.configureScope(t,i,a),t.data=[],t.deploying=!1,t.status="",t.initDone=!1,t.filter="",t.filterMatches=function(e){return Core.isBlank(t.filter)?!0:e.alias.toLowerCase().has(t.filter.toLowerCase())},t.fetch=function(){o.request({type:"exec",mbean:s,operation:"listLocalJVMs()",arguments:[]},{success:l,error:function(e){t.data=[],t.initDone=!0,t.status="Could not discover local JVM processes: "+e.error,Core.$apply(t)}})},t.stopAgent=function(e){o.request({type:"exec",mbean:s,operation:"stopAgent(java.lang.String)",arguments:[e]},Core.onSuccess(function(){t.fetch()}))},t.startAgent=function(e){o.request({type:"exec",mbean:s,operation:"startAgent(java.lang.String)",arguments:[e]},Core.onSuccess(function(){t.fetch()}))},t.connectTo=function(n,i,a,o,s){var l={};l.scheme=i,l.host=a,l.port=o,l.path=s,l.userName="",l.password="";var c=Core.createConnectToServerOptions(l);c.name="local",e.log.debug("Connecting to local JVM agent: "+n),Core.connectToServer(r,c),Core.$apply(t)},t.fetch()}])}(JVM||(JVM={}));var JVM;!function(e){e._module.controller("JVM.NavController",["$scope","$location","workspace",function(t,n,i){e.configureScope(t,n,i)}])}(JVM||(JVM={}));var JVM;!function(e){e._module.controller("JVM.ResetController",["$scope","localStorage",function(t,n){t.doClearConnectSettings=function(){var t=function(){delete n[e.connectControllerKey],delete n[e.connectionSettingsKey],setTimeout(function(){window.location.reload()},10)};t()}}])}(JVM||(JVM={}));var Threads;!function(e){e.pluginName="threads",e.templatePath="plugins/threads/html/",e.log=Logger.get("Threads"),e.jmxDomain="java.lang",e.mbeanType="Threading",e.mbean=e.jmxDomain+":type="+e.mbeanType,e._module=angular.module(e.pluginName,[]),e._module.config(["$routeProvider",function(t){t.when("/threads",{templateUrl:UrlHelpers.join(e.templatePath,"index.html")})}]),e._module.run(["$templateCache","workspace","viewRegistry","layoutFull","helpRegistry","HawtioNav",function(t,n,i,r,a,o){i.threads=r,a.addUserDoc("threads","plugins/threads/doc/help.md");var s=o.builder(),l=s.id("threads-toolbar").href(function(){return"#"}).template(function(){return t.get(UrlHelpers.join(e.templatePath,"toolbar.html"))}).build(),c=s.id("threads").href(function(){return"/threads"}).isValid(function(){return n.treeContainsDomainAndProperties(e.jmxDomain,{type:e.mbeanType})}).title(function(){return"Threads"}).tooltip(function(){return"View information about the threads in the JVM"}).isSelected(function(){return n.isTopTabActive("threads")}).tabs(l).build();o.add(c)}]),hawtioPluginLoader.addModule(e.pluginName)}(Threads||(Threads={}));var Threads;!function(e){e._module.controller("Threads.ToolbarController",["$scope","$rootScope","jolokia",function(t,n,i){t.$on("ThreadControllerSupport",function(e,n){t.support=n}),t.$on("ThreadControllerThreads",function(n,i){e.log.debug("got threads: ",i),t.unfilteredThreads=i,t.totals={},i.forEach(function(e){var n=e.threadState;n in t.totals?t.totals[n]++:t.totals[n]=1}),t.threads=i}),t.stateFilter="NONE",t.filterOn=function(e){t.stateFilter=e,n.$broadcast("ThreadsToolbarState",e)},t.selectedFilterClass=function(e){return e===t.stateFilter?"active":""},t.getMonitorClass=function(e,t){return t.toString()},t.getMonitorName=function(e){return e=e.replace("Supported",""),e.titleize()}}]),e._module.controller("Threads.ThreadsController",["$scope","$rootScope","$routeParams","$templateCache","jolokia",function(t,n,i,r,a){function o(e){var i=angular.toJson(e.value,!0);if(t.getThreadInfoResponseJson!==i){t.getThreadInfoResponseJson=i;var r=e.value.exclude(function(e){return null===e});t.unfilteredThreads=r,r=t.filterThreads(t.stateFilter,r),t.threads=r,n.$broadcast("ThreadControllerThreads",r),Core.$apply(t)}}function s(n){e.log.info("Disabled contention monitoring: ",n),Core.$apply(t)}function l(n){t.$on("$routeChangeStart",function(){a.setAttribute(e.mbean,"ThreadContentionMonitoringEnabled",!1,Core.onSuccess(s))}),e.log.info("Enabled contention monitoring"),Core.$apply(t)}t.selectedRowJson="",t.lastThreadJson="",t.getThreadInfoResponseJson="",t.threads=[],t.totals={},t.support={},t.row={},t.threadSelected=!1,t.selectedRowIndex=-1,t.stateFilter="NONE",t.showRaw={expanded:!1},t.addToDashboardLink=function(){var e="#/threads",t=angular.toJson({size_x:8,size_y:2}),n="Threads";return"#/dashboard/add?tab=dashboard&href="+encodeURIComponent(e)+"&title="+encodeURIComponent(n)+"&size="+encodeURIComponent(t)},t.isInDashboardClass=function(){return angular.isDefined(t.inDashboard&&t.inDashboard)?"threads-dashboard":"threads logbar"},t.$watch("searchFilter",function(e,n){e!==n&&(t.threadGridOptions.filterOptions.filterText=e)}),t.$watch("stateFilter",function(e,n){e!==n&&(t.threads="NONE"===t.stateFilter?t.unfilteredThreads:t.filterThreads(t.stateFilter,t.unfilteredThreads))}),t.threadGridOptions={selectedItems:[],data:"threads",showSelectionCheckbox:!1,enableRowClickSelection:!0,multiSelect:!1,primaryKeyFn:function(e,t){return e.threadId},filterOptions:{filterText:""},sortInfo:{sortBy:"threadId",ascending:!1},columnDefs:[{field:"threadId",displayName:"ID"},{field:"threadState",displayName:"State",cellTemplate:r.get("threadStateTemplate")},{field:"threadName",displayName:"Name"},{field:"waitedTime",displayName:"Waited Time",cellTemplate:'<div class="ngCellText" ng-show="row.entity.waitedTime > 0">{{row.entity.waitedTime | humanizeMs}}</div>'},{field:"blockedTime",displayName:"Blocked Time",cellTemplate:'<div class="ngCellText" ng-show="row.entity.blockedTime > 0">{{row.entity.blockedTime | humanizeMs}}</div>'},{field:"inNative",displayName:"Native",cellTemplate:'<div class="ngCellText"><span ng-show="row.entity.inNative" class="orange">(in native)</span></div>'},{field:"suspended",displayName:"Suspended",cellTemplate:'<div class="ngCellText"><span ng-show="row.entity.suspended" class="red">(suspended)</span></div>'}]},t.$watch("threadGridOptions.selectedItems",function(e,n){e!==n&&(0===e.length?(t.row={},t.threadSelected=!1,t.selectedRowIndex=-1):(t.row=e.first(),t.threadSelected=!0,t.selectedRowIndex=Core.pathGet(t,["hawtioSimpleTable","threads","rows"]).findIndex(function(e){return e.entity.threadId===t.row.threadId})),t.selectedRowJson=angular.toJson(t.row,!0))},!0),t.$on("ThreadsToolbarState",function(e,n){t.filterOn(n)}),t.filterOn=function(e){t.stateFilter=e},t.filterThreads=function(t,n){return e.log.debug("Filtering threads by: ",t),"NONE"===t?n:n.filter(function(e){return e&&e.threadState===t})},t.deselect=function(){t.threadGridOptions.selectedItems=[]},t.selectThreadById=function(e){t.threadGridOptions.selectedItems=t.threads.filter(function(t){return t.threadId===e})},t.selectThreadByIndex=function(e){var n=Core.pathGet(t,["hawtioSimpleTable","threads","rows"])[e];t.threadGridOptions.selectedItems=t.threads.filter(function(e){return e&&e.threadId==n.entity.threadId})},t.init=function(){a.request([{type:"read",mbean:e.mbean,attribute:"ThreadContentionMonitoringSupported"},{type:"read",mbean:e.mbean,attribute:"ObjectMonitorUsageSupported"},{type:"read",mbean:e.mbean,attribute:"SynchronizerUsageSupported"}],{method:"post",success:[function(i){t.support.threadContentionMonitoringSupported=i.value,n.$broadcast("ThreadControllerSupport",t.support),e.log.debug("ThreadContentionMonitoringSupported: ",t.support.threadContentionMonitoringSupported),t.maybeRegister()},function(i){t.support.objectMonitorUsageSupported=i.value,n.$broadcast("ThreadControllerSupport",t.support),e.log.debug("ObjectMonitorUsageSupported: ",t.support.objectMonitorUsageSupported),t.maybeRegister()},function(i){t.support.synchronizerUsageSupported=i.value,n.$broadcast("ThreadControllerSupport",t.support),e.log.debug("SynchronizerUsageSupported: ",t.support.synchronizerUsageSupported),t.maybeRegister()}],error:function(t){e.log.error("Failed to query for supported usages: ",t.error)}})};var c=Core.throttled(t.init,500);t.maybeRegister=function(){"objectMonitorUsageSupported"in t.support&&"synchronizerUsageSupported"in t.support&&"threadContentionMonitoringSupported"in t.support&&(e.log.debug("Registering dumpAllThreads polling"),Core.register(a,t,{type:"exec",mbean:e.mbean,operation:"dumpAllThreads",arguments:[t.support.objectMonitorUsageSupported,t.support.synchronizerUsageSupported]},Core.onSuccess(o)),t.support.threadContentionMonitoringSupported&&a.request({type:"read",mbean:e.mbean,attribute:"ThreadContentionMonitoringEnabled"},Core.onSuccess(t.maybeEnableThreadContentionMonitoring)))},t.maybeEnableThreadContentionMonitoring=function(n){n.value===!1?(e.log.info("Thread contention monitoring not enabled, enabling"),a.setAttribute(e.mbean,"ThreadContentionMonitoringEnabled",!0,Core.onSuccess(l))):e.log.info("Thread contention monitoring already enabled"),Core.$apply(t)},c()}])}(Threads||(Threads={})),angular.module("hawtio-jmx-templates",[]).run(["$templateCache",function(e){e.put("plugins/jmx/html/areaChart.html",'<div ng-controller="Jmx.AreaChartController">\n  <script type="text/ng-template" id="areaChart">\n    <fs-area bind="data" duration="250" interpolate="false" point-radius="5" width="width" height="height" label=""></fs-area>\n  </script>\n  <div compile="template"></div>\n</div>\n'),e.put("plugins/jmx/html/attributeToolBar.html",'<div class="pull-right" ng-hide="inDashboard">\n  <hawtio-filter ng-model="gridOptions.filterOptions.filterText" placeholder="Filter..." save-as="{{nid}}-filter-text"></hawtio-filter>\n</div>\n'),e.put("plugins/jmx/html/attributes.html",'<script type="text/ng-template" id="gridTemplate">\n  <table id="attributesGrid"\n         class="table table-condensed table-striped"\n         hawtio-simple-table="gridOptions">\n  </table>\n</script>\n\n<div ng-controller="Jmx.AttributesController">\n  <div ng-include src="toolBarTemplate()"></div>\n\n  <div class="attributes-wrapper gridStyle">\n    <div compile="attributes"></div>\n  </div>\n\n  <!-- modal dialog to show/edit the attribute -->\n  <div hawtio-confirm-dialog="showAttributeDialog"\n       ok-button-text="Update" show-ok-button="{{entity.rw ? \'true\' : \'false\'}}" on-ok="onUpdateAttribute()" on-cancel="onCancelAttribute()"\n       cancel-button-text="Close"\n       title="Attribute: {{entity.key}}">\n    <div class="dialog-body">\n      <div hawtio-form-2=\'attributeSchema\' entity=\'entity\'></div>\n    </div>\n  </div>\n\n</div>\n'),e.put("plugins/jmx/html/chartEdit.html",'<div ng-controller="Jmx.ChartEditController">\n  <form>\n    <fieldset>\n      <div class="control-group" ng-show="canViewChart()">\n        <input type="submit" class="btn" value="View Chart" ng-click="viewChart()"\n               ng-disabled="!selectedAttributes.length && !selectedMBeans.length"/>\n      </div>\n      <div class="control-group">\n        <table class="table">\n          <thead>\n          <tr>\n            <th ng-show="showAttributes()">Attributes</th>\n            <th ng-show="showElements()">Elements</th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr>\n            <td ng-show="showAttributes()">\n              <select id="attributes" size="20" multiple ng-multiple="true" ng-model="selectedAttributes"\n                      ng-options="name | humanize for (name, value) in metrics"></select>\n            </td>\n            <td ng-show="showElements()">\n              <select id="mbeans" size="20" multiple ng-multiple="true" ng-model="selectedMBeans"\n                      ng-options="name for (name, value) in mbeans"></select>\n            </td>\n          </tr>\n          </tbody>\n        </table>\n\n        <div class="alert" ng-show="!canViewChart()">\n          <button type="button" class="close" data-dismiss="alert">×</button>\n          <strong>No numeric metrics available!</strong> Try select another item to chart on.\n        </div>\n      </div>\n    </fieldset>\n  </form>\n</div>\n'),e.put("plugins/jmx/html/charts.html",'<div ng-controller="Jmx.ChartController" ng-switch="errorMessage()">\n  <div ng-switch-when="metrics">No valid metrics to show for this mbean.</div>\n  <div ng-switch-when="updateRate">Charts aren\'t available when the update rate is set to "No refreshes", go to the <a ng-href="#/preferences{{hash}}">Preferences</a> panel and set a refresh rate to enable charts</div>\n  <div id="charts"></div>\n</div>\n\n'),e.put("plugins/jmx/html/donutChart.html",'<div ng-controller="Jmx.DonutChartController">\n  <script type="text/ng-template" id="donut">\n    <fs-donut bind="data" outer-radius="200" inner-radius="75"></fs-donut>\n  </script>\n  <div compile="template"></div>\n</div>\n'),e.put("plugins/jmx/html/layoutTree.html",'<script type="text/ng-template" id="header">\n  <div class="tree-header" ng-controller="Jmx.TreeHeaderController">\n    <div class="left">\n    </div>\n    <div class="right">\n      <i class="fa fa-chevron-down clickable"\n         title="Expand all nodes"\n         ng-click="expandAll()"></i>\n      <i class="fa fa-chevron-up clickable"\n         title="Unexpand all nodes"\n         ng-click="contractAll()"></i>\n    </div>\n  </div>\n</script>\n\n<hawtio-pane position="left" width="300" header="header">\n  <div id="tree-container"\n       ng-controller="Jmx.MBeansController">\n    <div id="jmxtree"></div>\n  </div>\n</hawtio-pane>\n\n<div class="row-fluid">\n  <!--\n  <ng-include src="\'plugins/jmx/html/subLevelTabs.html\'"></ng-include>\n  -->\n  <div id="properties" ng-view></div>\n</div>\n\n\n'),e.put("plugins/jmx/html/operations.html",'  <script type="text/ng-template" id="operationTemplate">\n    <div>\n      <div ng-controller="Jmx.OperationController">\n        <div ng-show="operationResult!=\'\'">\n          <div class="row">\n            <h3 ng-bind="item.name"></h3>\n            <div hawtio-editor="operationResult" mode="mode"></div>\n            <p></p>\n            <div class="control-group pull-right">\n              <div class="controls">\n                <button class="btn cancel"\n                        title="Back to operation list"\n                        ng-click="close()">\n                        <i class="fa fa-list"></i>\n                </button>\n                <button class="btn"\n                        zero-clipboard\n                        data-clipboard-text="{{operationResult}}"\n                        title="Copy value to clipboard">\n                  <i class="fa fa-copy"></i>\n                </button>\n                <button class="btn"\n                        title="Back to operation"\n                        ng-click="ok()">\n                  <i class="fa fa-check"></i> Invoke Again\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div ng-show="operationResult==\'\'">\n          <div class="row">\n            <h3 ng-bind="item.name"></h3>\n            <div ng-hide="item.args.length">\n              This JMX operation requires no arguments.  Click the \'Execute\' button to invoke the operation.\n            </div>\n            <div ng-show="item.args.length">\n              This JMX operation requires some parameters.  Fill in the fields below as necessary and click the \'Execute\' button to invoke the operation.\n            </div>\n            <p></p>\n            <div ng-show="item.args.length" hawtio-form-2="formConfig"\n              entity="entity"\n              name="entryForm"></div>\n            <div class="row">\n              <div class="control-group pull-right">\n                <div class="controls">\n                  <button class="btn cancel"\n                    title="Back to list"\n                    ng-click="close()">\n                    <i class="fa fa-list"></i>\n                  </button>\n                  <button class="btn"\n                    title="Clear form"\n                    ng-click="reset()"\n                    ng-show="item.args.length">\n                    <i class="fa fa-undo"></i>\n                  </button>\n                  <button class="btn btn-success execute"\n                    ng-click="onSubmit()">\n                    <i class="{{executeIcon}}"></i> Execute\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="row">\n          <div class="expandable closed">\n            <div class="title">\n              <i class="expandable-indicator"></i> Jolokia REST URL\n            </div>\n            <div class="expandable-body well">\n              <div class="input-group">\n                <span class="input-group-addon" zero-clipboard\n                    data-clipboard-text="{{jolokiaUrl}}"\n                    title="Copy Jolokia REST Url to clipboard">\n                    <i class="fa fa-copy"></i>\n                </span>\n                <input class="form-control" type="text" name="jolokiaUrl" id="jolokiaUrl" value="{{jolokiaUrl}}" readonly>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </script>\n\n<div id="threadForm" ng-controller="Jmx.OperationsController">\n  <div ng-show="fetched">\n    <h2 ng-bind="objectName"></h2>\n    <div class="row" ng-hide="isOperationsEmpty() || showInvoke">\n      This MBean supports the following JMX operations.  Click an item in the list to invoke that operation.\n    </div>\n    <div class="row" ng-show="isOperationsEmpty()">\n      This MBean has no JMX operations.\n    </div>\n    <hr>\n    <div class="row" ng-hide="isOperationsEmpty() || showInvoke">\n      <div class="pull-right">\n        <hawtio-filter ng-model="methodFilter" placeholder="Filter..." save-as="{{objectName}}-text-filter"></hawtio-filter>\n      </div>\n    </div>\n\n    <div ng-show="showInvoke">\n      <div compile="template"></div>\n    </div>\n\n    <ul ng-hide="showInvoke" class="zebra-list" ng-hide="isOperationsEmpty()">\n      <li class="operation-row"\n          ng-repeat="operation in operations"\n          ng-show="doFilter(operation)"\n          ng-click="invokeOp(operation)"\n          ng-class="getClass(operation)"\n          title="Click to invoke {{operation.name}}"\n          data-placement="bottom">\n        <i class="fa fa-cog"\n           ng-class="getClass(operation)"></i>\n        <span>{{operation.name}}</span>\n        <span class="operation-actions">\n          <button class="btn"\n                  zero-clipboard\n                  data-clipboard-text="{{operation.name}}"\n                  title="Copy method name to clipboard">\n            <i class="fa fa-copy"></i>\n          </button>\n        </span>\n      </li>\n    </ul>\n  </div>\n\n</div>\n'),e.put("plugins/jmx/html/subLevelTabs.html",'<ul class="nav nav-tabs" ng-controller="Jmx.NavBarController" hawtio-auto-dropdown>\n  <li ng-repeat="nav in subLevelTabs track by $index | orderBy:index" ng-show="isValid(nav)" ng-class="{active : isActive(nav)}">\n    <a ng-href="{{nav.href()}}{{hash}}" title="{{nav.title}}"\n       data-placement="bottom" ng-bind-html="nav.content">\n    </a>\n  </li>\n\n  <li class="pull-right">\n    <a ng-href="{{fullScreenLink()}}" title="Show this view in full screen" data-placement="bottom">\n      <i class="fa fa-fullscreen"></i>\n    </a>\n  </li>\n  <li class="pull-right">\n    <a ng-href="{{addToDashboardLink()}}" title="Add this view to a dashboard" data-placement="bottom">\n      <i class="fa fa-share"></i>\n    </a>\n  </li>\n  <li class="pull-right dropdown overflow" style="visibility: hidden;">\n    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-chevron-down"></i></a>\n    <ul class="dropdown-menu right"></ul>\n  </li>\n\n\n</ul>\n\n'),e.put("plugins/jvm/html/connect.html",'<div ng-controller="JVM.ConnectController">\n\n  <div class="row">\n    <div class="col-md-6">\n      <div class="alert alert-info">\n        <p>\n          This page allows you to connect to remote processes which <strong>already have a <a\n                href="http://jolokia.org/">jolokia agent</a> running inside them</strong>. You will need to know the\n          host name, port and path of the jolokia agent to be able to connect.\n        </p>\n\n        <p>\n          If the process you wish to connect to does not have a jolokia agent inside, please refer to the <a\n                href="http://jolokia.org/agent.html">jolokia documentation</a> for how to add a JVM, servlet or OSGi\n          based agent inside it.\n        </p>\n\n        <p>\n          If you are using <a href="http://fabric8.io/">Fabric8</a>, <a href="http://www.jboss.org/products/fuse">JBoss Fuse</a>, or <a href="http://activemq.apache.org">Apache ActiveMQ</a>;\n          then a jolokia agent is included by default. Or you can always just deploy hawtio inside the process (which includes the jolokia agent).\n        </p>\n\n        <p>\n          <strong>Use Proxy</strong>:\n          hawtio is running in your browser; usually due to CORS; you cannot open a different host or port from your browser (due to browse security restrictions);\n          so we have to use a proxy servlet inside the hawtio web app to proxy all requests for a different jolokia server - so we can communicate with a different jolokia agent.\n          If you use the hawtio Chrome Extension this isn’t required; since Chrome Extensions are allowed to connect to any host/port.\n        </p>\n\n        <p ng-show="hasLocalMBean()">\n          Use the <strong><a href="#/jvm/local">Local Tab</a></strong> to connect to processes locally on this machine (which will install a jolokia agent automatically if required).\n        </p>\n\n        <p ng-show="!hasLocalMBean()">\n          The <strong>Local Tab</strong> is not currently enabled because either the server side <strong>hawtio-local-jvm-mbean plugin</strong> is not installed or this\n          JVM cannot find the <strong>com.sun.tools.attach.VirtualMachine</strong> API usually found in the <strong>tool.jar</strong>.\n          Please see the <a href="http://hawt.io/faq/index.html">FAQ entry</a> for more details.\n        </p>\n      </div>\n    </div>\n\n    <div class="col-md-6">\n      <dl>\n        <dt>Saved Connections</dt>\n        <dd>\n          <form class="form-horizontal no-bottom-margin">\n            <fieldset>\n              <div class="control-group">\n                <label class="control-label">Connections: </label>\n                <div class="controls">\n                  <select ng-model="lastConnection"\n                          ng-options="value.name as key for (key, value) in connectionConfigs">\n                    <option value=""\n                            ng-hide="lastConnection">New connection...</option>\n                  </select>\n                  <button class="btn btn-success"\n                          title="Connect to this server"\n                          ng-disabled="!lastConnection"\n                          ng-click="gotoServer()"><i class="fa fa-share"></i></button>\n                  <button class="btn btn-danger"\n                          title="Delete this connection"\n                          ng-disabled="!lastConnection"\n                          ng-click="deleteConnection()"><i class="fa fa-remove"></i></button>\n                  <button class="btn btn-primary"\n                          title="Create a new connection"\n                          ng-disabled="!lastConnection"\n                          ng-click="newConnection()"><i class="fa fa-plus"></i></button>\n                </div>\n              </div>\n            </fieldset>\n          </form>\n        </dd>\n      </dl>\n\n      <dl>\n        <dt>Connection Settings</dt>\n        <dd>\n          <div simple-form name="connectForm" data="formConfig" entity="currentConfig" onSubmit="gotoServer()"></div>\n\n          <div class="centered">\n            <button class="btn btn-primary"\n                    ng-disabled="!forms.connectForm.$valid"\n                    hawtio-submit="connectForm"\n                    title="Saves the connection and opens a new browser window connecting to the given JVM process via its Jolokia servlet URL">Connect to remote server</button>\n            <button class="btn"\n                    title="Save this configuration but don\'t open a new tab"\n                    ng-disabled="!forms.connectForm.$valid"\n                    ng-click="save()">Save</button>\n          </div>\n        </dd>\n      </dl>\n\n    </div>\n\n  </div>\n\n</div>\n'),
e.put("plugins/jvm/html/discover.html",'<div ng-controller="JVM.DiscoveryController">\n\n  <div class="row">\n\n    <div class="pull-right">\n      <button class="btn" ng-click="fetch()" title="Refresh"><i class="fa fa-refresh"></i></button>\n    </div>\n    <div class="pull-right">\n      <input class="search-query" type="text" ng-model="filter" placeholder="Filter...">\n    </div>\n\n    <script type="text/ng-template" id="authPrompt">\n      <div class="auth-form">\n        <form name="authForm">\n          <input type="text"\n                 class="input-sm"\n                 placeholder="Username..."\n                 ng-model="agent.username"\n                 required>\n          <input type="password"\n                 class="input-sm"\n                 placeholder="Password..."\n                 ng-model="agent.password"\n                 required>\n          <button ng-disabled="!authForm.$valid"\n                  ng-click="connectWithCredentials($event, agent)"\n                  class="btn btn-success">\n            <i class="fa fa-share"></i> Connect\n          </button>\n          <button class="btn" ng-click="closePopover($event)"><i class="fa fa-remove"></i></button>\n        </form>\n      </div>\n    </script>\n\n  </div>\n\n  <div class="row">\n\n    <div ng-show="discovering">\n      <p></p>\n\n      <div class="alert alert-info">\n        <i class="fa fa-spinner icon-spin"></i> Please wait, discovering agents ...\n      </div>\n    </div>\n\n    <div ng-hide="discovering">\n      <div ng-hide="agents">\n        <p></p>\n\n        <div class="alert alert-warning">\n          No agents discovered.\n        </div>\n      </div>\n      <div ng-show="agents">\n        <ul class="discovery zebra-list">\n          <li ng-repeat="agent in agents track by $index" ng-show="filterMatches(agent)">\n\n            <div class="inline-block">\n              <img ng-src="{{getLogo(agent)}}">\n            </div>\n\n            <div class="inline-block">\n              <p ng-hide="!hasName(agent)">\n              <span class="strong"\n                    ng-show="agent.server_vendor">\n                {{agent.server_vendor}} {{agent.server_product.titleize()}} {{agent.server_version}}\n              </span>\n              </p>\n            <span ng-class="getAgentIdClass(agent)">\n              <strong ng-show="hasName(agent)">Agent ID: </strong>{{agent.agent_id}}<br/>\n              <strong ng-show="hasName(agent)">Agent Version: </strong><span ng-hide="hasName(agent)"> Version: </span>{{agent.agent_version}}</span><br/>\n              <strong ng-show="hasName(agent)">Agent Description: </strong><span\n                ng-hide="hasName(agent)"> Description: </span>{{agent.agent_description}}</span><br/>\n\n              <p ng-hide="!agent.url"><strong>Agent URL: </strong><a ng-href="{{agent.url}}"\n                                                                     target="_blank">{{agent.url}}</a>\n              </p>\n            </div>\n\n            <div class="inline-block lock" ng-show="agent.secured">\n              <i class="fa fa-lock" title="A valid username and password will be required to connect"></i>\n            </div>\n\n            <div class="inline-block" ng-hide="!agent.url">\n              <div class="connect-button"\n                   ng-click="gotoServer($event, agent)"\n                   hawtio-template-popover\n                   content="authPrompt"\n                   trigger="manual"\n                   placement="auto"\n                   data-title="Please enter your username and password">\n                <i ng-show="agent.url" class="icon-play-circle"></i>\n              </div>\n            </div>\n\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/jvm/html/jolokiaPreferences.html",'<div ng-controller="JVM.JolokiaPreferences">\n  <div hawtio-form-2="config" entity="entity"></div>\n\n  <div class="control-group">\n    <div class="controls">\n      <button class="btn btn-primary" ng-click="reboot()">Apply</button>\n      <span class="help-block">Restart hawtio with the new values in effect</span>\n    </div>\n  </div>\n\n</div>\n'),e.put("plugins/jvm/html/layoutConnect.html",'<ul class="nav nav-tabs connected" ng-controller="JVM.NavController">\n  <li ng-repeat="link in breadcrumbs" ng-show="isValid(link)" ng-class=\'{active : isActive(link.href)}\'>\n    <a ng-href="{{link.href}}{{hash}}" ng-bind-html="link.content"></a>\n  </li>\n</ul>\n<div class="row">\n  <div ng-view></div>\n</div>\n'),e.put("plugins/jvm/html/local.html",'<div ng-controller="JVM.JVMsController">\n\n  <div class="row">\n    <div class="pull-right">\n      <button class="btn" ng-click="fetch()" title="Refresh"><i class="fa fa-refresh"></i></button>\n    </div>\n    <div class="pull-right">\n      <input class="search-query" type="text" ng-model="filter" placeholder="Filter...">\n    </div>\n  </div>\n\n  <div ng-hide="initDone">\n    <div class="alert alert-info">\n      <i class="fa fa-spinner icon-spin"></i> Please wait, discovering local JVM processes ...\n    </div>\n  </div>\n\n  <div ng-hide=\'data.length > 0\' class=\'row\'>\n    {{status}}\n  </div>\n\n  <div ng-show=\'data.length > 0\' class="row">\n    <table class=\'centered table table-bordered table-condensed table-striped\'>\n      <thead>\n      <tr>\n        <th style="width: 70px">PID</th>\n        <th>Name</th>\n        <th style="width: 300px">Agent URL</th>\n        <th style="width: 50px"></th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr ng-repeat="jvm in data track by $index" ng-show="filterMatches(jvm)">\n        <td>{{jvm.id}}</td>\n        <td title="{{jvm.displayName}}">{{jvm.alias}}</td>\n        <td><a href=\'\' title="Connect to this agent"\n               ng-click="connectTo(jvm.url, jvm.scheme, jvm.hostname, jvm.port, jvm.path)">{{jvm.agentUrl}}</a></td>\n        <td>\n          <a class=\'btn control-button\' href="" title="Stop agent" ng-show="jvm.agentUrl"\n             ng-click="stopAgent(jvm.id)"><i class="fa fa-off"></i></a>\n          <a class=\'btn control-button\' href="" title="Start agent" ng-hide="jvm.agentUrl"\n             ng-click="startAgent(jvm.id)"><i class="icon-play-circle"></i></a>\n        </td>\n      </tr>\n\n      </tbody>\n    </table>\n\n  </div>\n\n\n</div>\n'),e.put("plugins/jvm/html/navbarHeaderExtension.html",'<style>\n  .navbar-header-hawtio-jvm {\n    float: left;\n    margin: 0;\n  }\n\n  .navbar-header-hawtio-jvm h4 {\n    color: white;\n    margin: 0px;\n  }\n\n  .navbar-header-hawtio-jvm li {\n    list-style-type: none;\n    display: inline-block;\n    margin-right: 10px;\n    margin-top: 4px;\n  }\n</style>\n<ul class="navbar-header-hawtio-jvm" ng-controller="JVM.HeaderController">\n  <li ng-show="containerName"><h4 ng-bind="containerName"></h4></li>\n  <li ng-show="goBack"><strong><a href="" ng-click="goBack()">Back</a></strong></li>\n</ul>\n'),e.put("plugins/jvm/html/reset.html",'<div ng-controller="JVM.ResetController">\n  <form class="form-horizontal">\n    <fieldset>\n      <div class="control-group">\n        <label class="control-label">\n          <strong>\n            <i class=\'yellow text-shadowed icon-warning-sign\'></i> Clear saved connections\n          </strong>\n        </label>\n        <div class="controls">\n          <button class="btn btn-danger" ng-click="doClearConnectSettings()">Clear saved connections</button>\n          <span class="help-block">Wipe all saved connection settings stored by {{branding.appName}} in your browser\'s local storage</span>\n        </div>\n      </div>\n    </fieldset>\n  </form>\n</div>\n\n'),e.put("plugins/threads/html/index.html",'<div ng-controller="Threads.ThreadsController">\n\n  <div>\n    <div class="pull-right">\n      <hawtio-filter ng-model="searchFilter" placeholder="Filter..." save-as="threads-text-filter"></hawtio-filter>\n    </div>\n\n    <p></p>\n\n    <table class="table table-condensed table-striped"\n           hawtio-simple-table="threadGridOptions"></table>\n\n    <div ng-show="threadSelected" class="log-info-panel">\n      <div class="log-info-panel-frame">\n        <div class="log-info-panel-header">\n          <div class="row-fluid">\n            <button class="btn" ng-click="deselect()"><i class="icon-remove"></i> Close</button>\n            <div class="btn-group"\n                 style="margin-top: 9px;"\n                 hawtio-pager="hawtioSimpleTable.threads.rows"\n                 on-index-change="selectThreadByIndex"\n                 row-index="selectedRowIndex">\n            </div>\n\n            <span><strong>Thread ID:</strong> {{row.threadId}}</span>\n          </div>\n\n          <div class="row-fluid">\n            <span><strong>Thread Name:</strong> {{row.threadName}}</span>\n          </div>\n\n        </div>\n        <div class="log-info-panel-body">\n\n          <div class="row-fluid">\n            <span><strong>Waited Count:</strong> {{row.waitedCount}}</span>\n            <span><strong>Waited Time:</strong> {{row.waitedTime}}ms</span>\n          </div>\n\n          <div class="row-fluid">\n            <span><strong>Blocked Count:</strong> {{row.blockedCount}}</span>\n            <span><strong>Blocked Time:</strong> {{row.blockedTime}}ms</span>\n          </div>\n\n          <div class="row-fluid" ng-show="row.lockInfo != null">\n            <span><strong>Lock Name:</strong> {{row.lockName}}</span>\n            <span><strong>Lock Class Name:</strong> {{row.lockInfo.className}}</span>\n            <span><strong>Lock Identity Hash Code:</strong> {{row.lockInfo.identityHashCode}}</span>\n          </div>\n\n          <div class="row-fluid" ng-show="row.lockOwnerId > 0">\n            <span>Waiting for lock owned by <a href="" ng-click="selectThreadById(row.lockOwnerId)">{{row.lockOwnerId}}</a></span>\n            <span><strong>Owner Name:</strong> {{row.lockOwnerName}}</span>\n          </div>\n\n          <dl ng-show="row.lockedSynchronizers.length > 0">\n            <dt>Locked Synchronizers</dt>\n            <dd>\n              <ol class="zebra-list">\n                <li ng-repeat="synchronizer in row.lockedSynchronizers">\n                  <span><strong>Class Name:</strong> {{synchronizer.className}}</span>\n                  <span><strong>Identity Hash Code:</strong> {{synchronizer.identityHashCode}}</span>\n                </li>\n              </ol>\n            </dd>\n          </dl>\n\n          <dl ng-show="row.lockedMonitors.length > 0">\n            <dt>Locked Monitors</dt>\n            <dd>\n              <ol class="zebra-list">\n                <li ng-repeat="monitor in row.lockedMonitors">\n                  Frame: <strong>{{monitor.lockedStackDepth}}</strong>\n                  <span class="green">{{monitor.lockedStackFrame.className}}</span>\n                  <span class="bold">.</span>\n                  <span class="blue bold">{{monitor.lockedStackFrame.methodName}}</span>\n                  &nbsp;({{monitor.lockedStackFrame.fileName}}<span ng-show="frame.lineNumber > 0">:{{monitor.lockedStackFrame.lineNumber}}</span>)\n                  <span class="orange" ng-show="monitor.lockedStackFrame.nativeMethod">(Native)</span>\n                </li>\n              </ol>\n            </dd>\n          </dl>\n\n          <!-- a simple stack trace display, ideally we\n          could show maven links eventually -->\n          <dl>\n            <dt>Stack Trace</dt>\n            <dd>\n              <ol class="zebra-list">\n                <li ng-repeat="frame in row.stackTrace">\n                  <span class="green">{{frame.className}}</span>\n                  <span class="bold">.</span>\n                  <span class="blue bold">{{frame.methodName}}</span>\n                  &nbsp;({{frame.fileName}}<span ng-show="frame.lineNumber > 0">:{{frame.lineNumber}}</span>)\n                  <span class="orange" ng-show="frame.nativeMethod">(Native)</span>\n                </li>\n              </ol>\n            </dd>\n          </dl>\n\n          <!--\n          <div class="expandable" model="showRaw">\n            <div class="title">\n              <i class="expandable-indicator"></i><span> Show JSON</span>\n            </div>\n            <div class="expandable-body">\n              <div hawtio-editor="selectedRowJson" mode="javascript"></div>\n            </div>\n          </div>\n          -->\n\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n\n\n\n'),e.put("plugins/threads/html/toolbar.html",'<div ng-controller="Threads.ToolbarController">\n  <script type="text/ng-template" id="threadStateTemplate">\n    <div class="thread-state-indicator"\n         title="{{row.entity.threadState | humanize}}"\n         ng-switch on="row.entity.threadState">\n      <i ng-switch-when="NEW"\n         class="lightgreen icon-bolt"></i>\n      <i ng-switch-when="RUNNABLE"\n         class="green icon-play-circle"></i>\n      <i ng-switch-when="BLOCKED"\n         class="red icon-stop"></i>\n      <i ng-switch-when="WAITING"\n         class="darkgray icon-pause"></i>\n      <i ng-switch-when="TIMED_WAITING"\n         class="orange icon-time"></i>\n      <i ng-switch-default="TERMINATED"\n         class="darkred icon-remove"></i>\n    </div>\n  </script>\n\n  <div class="state-panel inline-block">\n    <ul class="inline">\n      <li ng-click="filterOn(\'NONE\')"\n          title="Clear state filter"\n          ng-class="selectedFilterClass(\'NONE\')">\n        <span class="clickable no-fade total">Total:</span> {{unfilteredThreads.length}}\n      </li>\n      <li ng-repeat="(state, total) in totals track by $index"\n          ng-click="filterOn(state)"\n          title="Filter by {{state}}"\n          ng-class="selectedFilterClass(state)">\n        <span class="clickable no-fade {{state.dasherize()}}">{{state | humanize}}:</span> {{total}}\n      </li>\n    </ul>\n  </div>\n\n  <div class="inline-block support-panel pull-right">\n    <ul class="inline">\n      <li ng-repeat="(name, value) in support track by $index">\n        <span class="monitor-indicator {{getMonitorClass(name, value)}}" ng-click="maybeToggleMonitor(name, value)">{{getMonitorName(name)}}</span>\n      </li>\n      <li ng-hide="inDashboard">\n        <a ng-href="{{addToDashboardLink()}}" title="Add this view to a dashboard">\n          <i class="icon-share"></i>\n        </a>\n      </li>\n    </ul>\n  </div>\n\n</div>\n\n')}]),hawtioPluginLoader.addModule("hawtio-jmx-templates"),function(e,t,n){"use strict";function i(e){return null!=e&&""!==e&&"hasOwnProperty"!==e&&s.test("."+e)}function r(e,t){if(!i(t))throw o("badmember",'Dotted member path "@{0}" is invalid.',t);for(var r=t.split("."),a=0,s=r.length;s>a&&e!==n;a++){var l=r[a];e=null!==e?e[l]:n}return e}function a(e,n){n=n||{},t.forEach(n,function(e,t){delete n[t]});for(var i in e)!e.hasOwnProperty(i)||"$"===i.charAt(0)&&"$"===i.charAt(1)||(n[i]=e[i]);return n}var o=t.$$minErr("$resource"),s=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;t.module("ngResource",["ng"]).provider("$resource",function(){var e=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}},this.$get=["$http","$q",function(i,s){function l(e){return c(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function c(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}function u(t,n){this.template=t,this.defaults=f({},e.defaults,n),this.urlParams={}}function d(l,c,v,y){function b(e,t){var n={};return t=f({},c,t),h(t,function(t,i){m(t)&&(t=t()),n[i]=t&&t.charAt&&"@"==t.charAt(0)?r(e,t.substr(1)):t}),n}function w(e){return e.resource}function x(e){a(e||{},this)}var k=new u(l,y);return v=f({},e.defaults.actions,v),x.prototype.toJSON=function(){var e=f({},this);return delete e.$promise,delete e.$resolved,e},h(v,function(e,r){var l=/^(POST|PUT|PATCH)$/i.test(e.method);x[r]=function(c,u,d,v){var y,C,S,_={};switch(arguments.length){case 4:S=v,C=d;case 3:case 2:if(!m(u)){_=c,y=u,C=d;break}if(m(c)){C=c,S=u;break}C=u,S=d;case 1:m(c)?C=c:l?y=c:_=c;break;case 0:break;default:throw o("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var T=this instanceof x,$=T?y:e.isArray?[]:new x(y),A={},E=e.interceptor&&e.interceptor.response||w,P=e.interceptor&&e.interceptor.responseError||n;h(e,function(e,t){"params"!=t&&"isArray"!=t&&"interceptor"!=t&&(A[t]=g(e))}),l&&(A.data=y),k.setUrlParams(A,f({},b(y,e.params||{}),_),e.url);var I=i(A).then(function(n){var i=n.data,s=$.$promise;if(i){if(t.isArray(i)!==!!e.isArray)throw o("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2}",r,e.isArray?"array":"object",t.isArray(i)?"array":"object");e.isArray?($.length=0,h(i,function(e){$.push("object"==typeof e?new x(e):e)})):(a(i,$),$.$promise=s)}return $.$resolved=!0,n.resource=$,n},function(e){return $.$resolved=!0,(S||p)(e),s.reject(e)});return I=I.then(function(e){var t=E(e);return(C||p)(t,e.headers),t},P),T?I:($.$promise=I,$.$resolved=!1,$)},x.prototype["$"+r]=function(e,t,n){m(e)&&(n=t,t=e,e={});var i=x[r].call(this,e,this,t,n);return i.$promise||i}}),x.bind=function(e){return d(l,f({},c,e),v)},x}var p=t.noop,h=t.forEach,f=t.extend,g=t.copy,m=t.isFunction;return u.prototype={setUrlParams:function(e,n,i){var r,a,s=this,c=i||s.template,u=s.urlParams={};h(c.split(/\W/),function(e){if("hasOwnProperty"===e)throw o("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(c)&&(u[e]=!0)}),c=c.replace(/\\:/g,":"),n=n||{},h(s.urlParams,function(e,i){r=n.hasOwnProperty(i)?n[i]:s.defaults[i],t.isDefined(r)&&null!==r?(a=l(r),c=c.replace(new RegExp(":"+i+"(\\W|$)","g"),function(e,t){return a+t})):c=c.replace(new RegExp("(/?):"+i+"(\\W|$)","g"),function(e,t,n){return"/"==n.charAt(0)?n:t+n})}),s.defaults.stripTrailingSlashes&&(c=c.replace(/\/+$/,"")||"/"),c=c.replace(/\/\.(?=\w+($|\?))/,"."),e.url=c.replace(/\/\\\./,"/."),h(n,function(t,n){s.urlParams[n]||(e.params=e.params||{},e.params[n]=t)})}},d}]})}(window,window.angular);var DockerRegistry;!function(e){function t(t){var n=HawtioCore.injector.get("DockerRegistryRestURL"),i=HawtioCore.injector.get("$http");n.then(function(n){i.get(UrlHelpers.join(n,e.SEARCH_FRAGMENT)).success(function(e){t(n,e)}).error(function(i){e.log.debug("Error fetching image repositories:",i),t(n,null)})})}function n(){var e=HawtioCore.injector.get("$q"),n=(HawtioCore.injector.get("$rootScope"),e.defer());return t(function(e,t){if(t&&t.results){var i=t.results;i=i.sortBy(function(e){return e.name}).first(15);var r=i.map(function(e){return e.name});n.resolve(r)}else n.reject([])}),n.promise}e.context="/docker-registry",e.hash=UrlHelpers.join("#",e.context),e.defaultRoute=UrlHelpers.join(e.hash,"list"),e.basePath=UrlHelpers.join("plugins",e.context),e.templatePath=UrlHelpers.join(e.basePath,"html"),e.pluginName="DockerRegistry",e.log=Logger.get(e.pluginName),e.SEARCH_FRAGMENT="/v1/search",e.getDockerImageRepositories=t,e.completeDockerRegistry=n}(DockerRegistry||(DockerRegistry={}));var DockerRegistry;!function(e){e._module=angular.module(e.pluginName,["hawtio-core","ngResource"]),e.controller=PluginHelpers.createControllerFunction(e._module,e.pluginName),e.route=PluginHelpers.createRoutingFunction(e.templatePath),e._module.config(["$routeProvider",function(t){t.when(UrlHelpers.join(e.context,"list"),e.route("list.html",!1))}]),e._module.factory("DockerRegistryRestURL",["$injector","$q","$timeout",function(e,t,n){var i=t.defer();return i.resolve(""),i.promise}]),e._module.run(["viewRegistry","workspace","DockerRegistryRestURL",function(t,n){e.log.debug("Running"),t["docker-registry"]=UrlHelpers.join(e.templatePath,"layoutDockerRegistry.html")}]),hawtioPluginLoader.addModule(e.pluginName)}(DockerRegistry||(DockerRegistry={}));var DockerRegistry;!function(e){e.TopLevel=e.controller("TopLevel",["$scope","$http","$timeout",function(t,n,i){t.repositories=[],t.fetched=!1,t.restURL="",e.getDockerImageRepositories(function(i,r){if(t.restURL=i,t.fetched=!0,r){t.repositories=r.results;var a=angular.toJson(t.repositories);t.fetch=PollHelpers.setupPolling(t,function(i){var r=UrlHelpers.join(t.restURL,e.SEARCH_FRAGMENT);n.get(r).success(function(e){e&&e.results&&a!==angular.toJson(e.results)&&(t.repositories=e.results,a=angular.toJson(t.repositories)),i()})}),t.fetch()}else e.log.debug("Failed initial fetch of image repositories")}),t.$watchCollection("repositories",function(r){function a(){o-=1,0>=o&&t.$broadcast("DockerRegistry.Repositories",t.restURL,r)}if(!Core.isBlank(t.restURL)){if(!r||0===r.length)return void t.$broadcast("DockerRegistry.Repositories",t.restURL,r);var o=r.length;r.forEach(function(r){var o=UrlHelpers.join(t.restURL,"v1/repositories/"+r.name+"/tags");i(function(){e.log.debug("Fetching tags from URL: ",o),n.get(o).success(function(t){e.log.debug("Got tags: ",t," for image repository: ",r.name),r.tags=t,a()}).error(function(t){e.log.debug("Error fetching data for image repository: ",r.name," error: ",t),a()})},500)})}})}])}(DockerRegistry||(DockerRegistry={}));var DockerRegistry;!function(e){e.TagController=e.controller("TagController",["$scope",function(e){e.selectImage=function(t){e.$emit("DockerRegistry.SelectedImageID",t)}}]),e.ListController=e.controller("ListController",["$scope","$templateCache","$http",function(t,n,i){t.imageRepositories=[],t.selectedImage=void 0,t.tableConfig={data:"imageRepositories",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:""},columnDefs:[{field:"name",displayName:"Name",defaultSort:!0},{field:"description",displayName:"Description"},{field:"tags",displayName:"Tags",cellTemplate:n.get("tagsTemplate.html")}]},t.deletePrompt=function(n){UI.multiItemConfirmActionDialog({collection:n,index:"name",onClose:function(r){r&&n.forEach(function(n){var r=UrlHelpers.join(t.restURL,"/v1/repositories/"+n.name+"/");e.log.debug("Using URL: ",r),i["delete"](r).success(function(t){e.log.debug("Deleted repository: ",n.name)}).error(function(t){e.log.debug("Failed to delete repository: ",n.name)})})},title:"Delete Repositories?",action:"The following repositories will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()},t.$on("DockerRegistry.SelectedImageID",function(n,r){var a=UrlHelpers.join(t.restURL,"/v1/images/"+r+"/json");i.get(a).success(function(n){e.log.debug("Got image: ",n),t.selectedImage=n})}),t.$on("DockerRegistry.Repositories",function(e,n,i){t.imageRepositories=i})}])}(DockerRegistry||(DockerRegistry={}));var Dozer;!function(e){function t(t,n){var i=t;angular.isString(t)&&(i=$.parseXML(t)),console.log("Has Dozer XML document: "+i);var r=new e.Mappings(i),a=i.documentElement;return f(r,a),$(a).children("mapping").each(function(e,t){var n=d(t);r.mappings.push(n)}),r}function n(t){var n=t.doc.documentElement.cloneNode(!1);m(t.mappings,n,null,1),e.addTextNode(n,"\n");var i=Core.xmlNodeToString(n);return'<?xml version="1.0" encoding="UTF-8"?>\n'+i}function i(t,n,i){var a=n.class_a.value;r(t,a,null,function(t){var r=[];angular.forEach(t,function(t){console.log("got property "+JSON.stringify(t,null,"  "));var i=t.name;i&&(n.hasFromField(i)||r.push(new e.UnmappedField(i,t)))}),i(r)})}function r(e,t,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var r=o(e);return r?n?e.jolokia.execute(r,"findProperties",t,n,Core.onSuccess(i)):e.jolokia.execute(r,"getProperties",t,Core.onSuccess(i)):i?i([]):[]}function a(e,t,n,i){void 0===n&&(n=20),void 0===i&&(i=null);var r=o(e);return r?e.jolokia.execute(r,"findClassNames",t,n,Core.onSuccess(i)):i?i([]):[]}function o(t){return e.introspectorMBean}function s(e,t){return t.mappings=[],angular.forEach(e.childList,function(e){var n=Core.pathGet(e,["data","entity"]);n&&t.mappings.push(n)}),t}function l(t){var n="mappings",i=new Folder(n);return i.addClass="net-sourceforge-dozer-mappings",i.domain=e.jmxDomain,i.typeName="mappings",i.entity=t,i.key=Core.toSafeDomID(n),angular.forEach(t.mappings,function(e){var t=c(e,i);i.children.push(t)}),i}function c(t,n){var i=t.name(),r=new Folder(i);return r.addClass="net-sourceforge-dozer-mapping",r.typeName="mapping",r.domain=e.jmxDomain,r.key=(n?n.key+"_":"")+Core.toSafeDomID(i),r.parent=n,r.entity=t,r.icon=Core.url("/plugins/dozer/img/class.gif"),angular.forEach(t.fields,function(e){u(e,r)}),r}function u(t,n){var i=t.name(),r=new Folder(i);return r.addClass="net-sourceforge-dozer-field",r.typeName="field",r.domain=e.jmxDomain,r.key=n.key+"_"+Core.toSafeDomID(i),r.parent=n,r.entity=t,r.icon=Core.url("/plugins/dozer/img/attribute.gif"),n.children.push(r),r}function d(t){var n=new e.Mapping,i=$(t);return n.class_a=h(i.children("class-a")),n.class_b=h(i.children("class-b")),i.children("field").each(function(e,t){var i=p(t);n.fields.push(i)}),f(n,t),n}function p(t){if(t){var n=$(t),i=n.children("a").text(),r=n.children("b").text(),a=new e.Field(new e.FieldDefinition(i),new e.FieldDefinition(r));return f(a,t),a}return new e.Field(new e.FieldDefinition(""),new e.FieldDefinition(""))}function h(t){if(t&&t[0]){var n=t[0],i=n.textContent;if(i){var r=new e.MappingClass(i);return f(r,n),r}}return new e.MappingClass("")}function f(e,t){for(var n=t.attributes,i=0;i<n.length;i++){var r=n,a=r.item(i);if(a){var o=a.localName,s=a.value;if(o&&!o.startsWith("xmlns")){var l=Forms.safeIdentifier(o);e[l]=s}}}}function g(e,t,n){angular.forEach(e,function(e,i){if(n.any(i));else if(e){var r=e.toString(),a=i.replace(/_/g,"-");t.setAttribute(a,r)}})}function m(t,n,i,r){void 0===i&&(i=null),void 0===r&&(r=0);var a=null;if(angular.isArray(t))angular.forEach(t,function(e){a=m(e,n,i,r)});else if(t){if(!i){var o=Core.pathGet(t,["constructor","name"]);o?(i=e.elementNameMappings[o],i||console.log("WARNING: could not map class name "+o+" to an XML element name")):console.log("WARNING: no class name for value "+t)}if(i){if(r){var s=b(r);e.addTextNode(n,s)}var l=n.ownerDocument||document,c=l.createElement(i),u=t.saveToElement;if(u?u.apply(t,[c]):angular.forEach(t,function(e,t){console.log("has key "+t+" value "+e)}),$(c).children().length){var s=b(r);e.addTextNode(c,s)}n.appendChild(c),a=c}}return a}function v(e){var t=angular.isObject(e)?e.value:null;return!t&&angular.isString(e)&&(t=e),t||"?"}function y(e,t){if(t){var n=e.ownerDocument||document,i=n.createTextNode(t);e.appendChild(i)}}function b(e){for(var t="\n",n=0;e>n;n++)t+="  ";return t}e.jmxDomain="net.sourceforge.dozer",e.introspectorMBean="hawtio:type=Introspector",e.excludedPackages=["java.lang","int","double","long"],e.elementNameMappings={Mapping:"mapping",MappingClass:"class",Field:"field"},e.log=Logger.get("Dozer"),e.loadDozerModel=t,e.saveToXmlText=n,e.findUnmappedFields=i,e.findProperties=r,e.findClassNames=a,e.getIntrospectorMBean=o,e.loadModelFromTree=s,e.createDozerTree=l,e.createMappingFolder=c,e.addMappingFieldFolder=u,e.appendAttributes=g,e.appendElement=m,e.nameOf=v,e.addTextNode=y}(Dozer||(Dozer={}));var Dozer;!function(e){var t=function(){function e(e,t){void 0===t&&(t=[]),this.doc=e,this.mappings=t}return e}();e.Mappings=t;var n=function(){function t(){this.fields=[],this.map_id=Core.getUUID(),this.class_a=new i(""),this.class_b=new i("")}return t.prototype.name=function(){return e.nameOf(this.class_a)+" -> "+e.nameOf(this.class_b)},t.prototype.hasFromField=function(e){return this.fields.find(function(t){return e===t.a.value})},t.prototype.hasToField=function(e){return this.fields.find(function(t){return e===t.b.value})},t.prototype.saveToElement=function(t){e.appendElement(this.class_a,t,"class-a",2),e.appendElement(this.class_b,t,"class-b",2),e.appendElement(this.fields,t,"field",2),e.appendAttributes(this,t,["class_a","class_b","fields"])},t}();e.Mapping=n;var i=function(){function t(e){this.value=e}return t.prototype.saveToElement=function(t){e.addTextNode(t,this.value),e.appendAttributes(this,t,["value","properties","error"])},t}();e.MappingClass=i;var r=function(){function t(e,t){this.a=e,this.b=t}return t.prototype.name=function(){return e.nameOf(this.a)+" -> "+e.nameOf(this.b)},t.prototype.saveToElement=function(t){e.appendElement(this.a,t,"a",3),e.appendElement(this.b,t,"b",3),e.appendAttributes(this,t,["a","b"])},t}();e.Field=r;var a=function(){function t(e){this.value=e}return t.prototype.saveToElement=function(t){e.addTextNode(t,this.value),e.appendAttributes(this,t,["value","properties","error"])},t}();e.FieldDefinition=a;var o=function(){function e(e,t,n){void 0===n&&(n=null),this.fromField=e,this.property=t,this.toField=n}return e}();e.UnmappedField=o}(Dozer||(Dozer={}));var Dozer;!function(e){function t(){function t(e){return'<input type="text" ng-model="dozerEntity.'+e+'.value" typeahead="title for title in classNames($viewValue) | filter:$viewValue" typeahead-editable="true"  title="The Java class name"/>'}e.io_hawt_dozer_schema_Field.tabs={Fields:["a.value","b.value"],"From Field":["a\\..*"],"To Field":["b\\..*"],"Field Configuration":["*"]},e.io_hawt_dozer_schema_Mapping.tabs={Classes:["class-a.value","class-b.value"],"From Class":["class-a\\..*"],"To Class":["class-b\\..*"],"Class Configuration":["*"]},e.io_hawt_dozer_schema_Mapping.properties.fieldOrFieldExclude.hidden=!0,Core.pathSet(e.io_hawt_dozer_schema_Field,["properties","a","properties","value","label"],"From Field"),Core.pathSet(e.io_hawt_dozer_schema_Field,["properties","b","properties","value","label"],"To Field"),Core.pathSet(e.io_hawt_dozer_schema_Mapping,["properties","class-a","properties","value","label"],"From Class"),Core.pathSet(e.io_hawt_dozer_schema_Mapping,["properties","class-b","properties","value","label"],"To Class"),Core.pathSet(e.io_hawt_dozer_schema_Field,["properties","a","ignorePrefixInLabel"],!0),Core.pathSet(e.io_hawt_dozer_schema_Field,["properties","b","ignorePrefixInLabel"],!0),Core.pathSet(e.io_hawt_dozer_schema_Mapping,["properties","class-a","ignorePrefixInLabel"],!0),Core.pathSet(e.io_hawt_dozer_schema_Mapping,["properties","class-b","ignorePrefixInLabel"],!0),Core.pathSet(e.io_hawt_dozer_schema_Mapping,["properties","class-a","properties","value","formTemplate"],t("class_a")),Core.pathSet(e.io_hawt_dozer_schema_Mapping,["properties","class-b","properties","value","formTemplate"],t("class_b")),Core.pathSet(e.io_hawt_dozer_schema_Field,["properties","a","properties","value","formTemplate"],'<input type="text" ng-model="dozerEntity.a.value" typeahead="title for title in fromFieldNames($viewValue) | filter:$viewValue" typeahead-editable="true"  title="The Java class name"/>'),Core.pathSet(e.io_hawt_dozer_schema_Field,["properties","b","properties","value","formTemplate"],'<input type="text" ng-model="dozerEntity.b.value" typeahead="title for title in toFieldNames($viewValue) | filter:$viewValue" typeahead-editable="true"  title="The Java class name"/>')}e.schemaConfigure=t}(Dozer||(Dozer={}));var Git;!function(e){function t(t,n,r){var a=i(t);return a&&n?new e.JolokiaGit(a,n,r,t.userDetails):null}function n(e){return null!==i(e)}function i(t){return Core.getMBeanTypeObjectName(t,e.jmxDomain,e.mbeanType)}function r(t){return Core.getMBeanTypeFolder(t,e.jmxDomain,e.mbeanType)}function a(e){var t=r(e);return t&&"fabric"===t.entries.repo}e.createGitRepository=t,e.jmxDomain="hawtio",e.mbeanType="GitFacade",e.hasGit=n,e.getGitMBean=i,e.getGitMBeanFolder=r,e.isGitMBeanFabric=a}(Git||(Git={}));var Git;!function(e){var t=function(){function e(e,t,n,i,r){void 0===r&&(r="master"),this.mbean=e,this.jolokia=t,this.localStorage=n,this.userDetails=i,this.branch=r}return e.prototype.getRepositoryLabel=function(e,t){return this.jolokia.request({type:"read",mbean:this.mbean,attribute:["RepositoryLabel"]},Core.onSuccess(function(t){e(t.value.RepositoryLabel)},{error:t
}))},e.prototype.exists=function(e,t,n){var i;return i=angular.isDefined(n)&&n?this.jolokia.execute(this.mbean,"exists",e,t,Core.onSuccess(n)):this.jolokia.execute(this.mbean,"exists",e,t),angular.isDefined(i)&&i?!0:!1},e.prototype.read=function(e,t,n){return this.jolokia.execute(this.mbean,"read",e,t,Core.onSuccess(n))},e.prototype.write=function(e,t,n,i,r){var a=this.getUserName(),o=this.getUserEmail();return this.jolokia.execute(this.mbean,"write",e,t,n,a,o,i,Core.onSuccess(r))},e.prototype.writeBase64=function(e,t,n,i,r){var a=this.getUserName(),o=this.getUserEmail();return this.jolokia.execute(this.mbean,"writeBase64",e,t,n,a,o,i,Core.onSuccess(r))},e.prototype.createDirectory=function(e,t,n,i){var r=this.getUserName(),a=this.getUserEmail();return this.jolokia.execute(this.mbean,"createDirectory",e,t,n,r,a,Core.onSuccess(i))},e.prototype.revertTo=function(e,t,n,i,r){var a=this.getUserName(),o=this.getUserEmail();return this.jolokia.execute(this.mbean,"revertTo",e,t,n,i,a,o,Core.onSuccess(r))},e.prototype.rename=function(e,t,n,i,r){var a=this.getUserName(),o=this.getUserEmail();return this.jolokia.execute(this.mbean,"rename",e,t,n,i,a,o,Core.onSuccess(r))},e.prototype.remove=function(e,t,n,i){var r=this.getUserName(),a=this.getUserEmail();return this.jolokia.execute(this.mbean,"remove",e,t,n,r,a,Core.onSuccess(i))},e.prototype.completePath=function(e,t,n,i){return this.jolokia.execute(this.mbean,"completePath",e,t,n,Core.onSuccess(i))},e.prototype.history=function(e,t,n,i,r){return this.jolokia.execute(this.mbean,"history",e,t,n,i,Core.onSuccess(r))},e.prototype.commitTree=function(e,t){return this.jolokia.execute(this.mbean,"getCommitTree",e,Core.onSuccess(t))},e.prototype.commitInfo=function(e,t){return this.jolokia.execute(this.mbean,"getCommitInfo",e,Core.onSuccess(t))},e.prototype.diff=function(e,t,n,i){return this.jolokia.execute(this.mbean,"diff",e,t,n,Core.onSuccess(i))},e.prototype.getContent=function(e,t,n){return this.jolokia.execute(this.mbean,"getContent",e,t,Core.onSuccess(n))},e.prototype.readJsonChildContent=function(e,t,n,i){return this.jolokia.execute(this.mbean,"readJsonChildContent",this.branch,e,t,n,Core.onSuccess(i))},e.prototype.branches=function(e){return this.jolokia.execute(this.mbean,"branches",Core.onSuccess(e))},e.prototype.getUserName=function(){return this.localStorage.gitUserName||this.userDetails.username||"anonymous"},e.prototype.getUserEmail=function(){return this.localStorage.gitUserEmail||"anonymous@gmail.com"},e}();e.JolokiaGit=t}(Git||(Git={}));var Maven;!function(e){function t(e){if(e){var t=e.mbeanTypesToDomain.Indexer||{},n=t.hawtio||{};return n.objectName}return null}function n(e){if(e){var t=e.mbeanTypesToDomain.AetherFacade||{},n=t.hawtio||{};return n.objectName}return null}function i(e){var t=null;if(e)if(e.startsWith("mvn:"))t=e.substring(4);else{var n=e.indexOf(":mvn:");n>0&&(t=e.substring(n+5))}return t?"#/maven/artifact/"+t:null}function r(e){var t=(e.group||e.groupId)+"/"+(e.artifact||e.artifactId);return e.version&&(t+="/"+e.version),e.classifier&&(t+="/"+e.classifier),e.packaging&&(t+="/"+e.packaging),t}function a(n,i,r,a,o){var s=t(r);if(!angular.isDefined(s))return n.when([]);var l=o.split("/");return 1===l.length?e.completeGroupId(s,n,i,r,a,o,null,null):2===l.length?e.completeArtifactId(s,n,i,r,a,l[0],l[1],null,null):3===l.length?e.completeVersion(s,n,i,r,a,l[0],l[1],l[2],null,null):n.when([])}function o(e,t,n,i,r,a,o,s,l,c){var u=t.defer();return r.request({type:"exec",mbean:e,operation:"versionComplete(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String)",arguments:[a,o,s,l,c]},{method:"POST",success:function(e){n.$apply(function(){u.resolve(e.value.sortBy().first(15))})},error:function(e){n.$apply(function(){console.log("got back an error: ",e),u.reject()})}}),u.promise}function s(e,t,n,i,r,a,o,s,l){var c=t.defer();return r.request({type:"exec",mbean:e,operation:"artifactIdComplete(java.lang.String, java.lang.String, java.lang.String, java.lang.String)",arguments:[a,o,s,l]},{method:"POST",success:function(e){n.$apply(function(){c.resolve(e.value.sortBy().first(15))})},error:function(e){n.$apply(function(){console.log("got back an error: ",e),c.reject()})}}),c.promise}function l(e,t,n,i,r,a,o,s){if(a.length<5)return t.when([]);var l=t.defer();return r.request({type:"exec",mbean:e,operation:"groupIdComplete(java.lang.String, java.lang.String, java.lang.String)",arguments:[a,o,s]},{method:"POST",success:function(e){n.$apply(function(){l.resolve(e.value.sortBy().first(15))})},error:function(e){console.log("got back an error: ",e),n.$apply(function(){l.reject()})}}),l.promise}function c(t,n){t.detailLink=function(e){var t=e.groupId,n=e.artifactId,i=e.version||"",r=e.classifier||"",a=e.packaging||"";return t&&n?"#/maven/artifact/"+t+"/"+n+"/"+i+"/"+r+"/"+a:""},t.javadocLink=function(e){var t=e.groupId,n=e.artifactId,i=e.version;return t&&n&&i?"javadoc/"+t+":"+n+":"+i+"/":""},t.versionsLink=function(e){var t=e.groupId,n=e.artifactId,i=e.classifier||"",r=e.packaging||"";return t&&n?"#/maven/versions/"+t+"/"+n+"/"+i+"/"+r:""},t.dependenciesLink=function(e){var t=e.groupId,n=e.artifactId,i=e.classifier||"",r=e.packaging||"",a=e.version;return t&&n?"#/maven/dependencies/"+t+"/"+n+"/"+a+"/"+i+"/"+r:""},t.hasDependencyMBean=function(){var t=e.getAetherMBean(n);return angular.isDefined(t)},t.sourceLink=function(e){var t=e.groupId,n=e.artifactId,i=e.version;return t&&n&&i?"#/source/index/"+t+":"+n+":"+i+"/":""}}e.log=Logger.get("Maven"),e.getMavenIndexerMBean=t,e.getAetherMBean=n,e.mavenLink=i,e.getName=r,e.completeMavenUri=a,e.completeVersion=o,e.completeArtifactId=s,e.completeGroupId=l,e.addMavenFunctions=c}(Maven||(Maven={}));var Maven;!function(e){var t="maven";e._module=angular.module(t,["ngResource","datatable","tree","hawtio-core","hawtio-ui"]),e._module.config(["$routeProvider",function(e){e.when("/maven",{redirectTo:"/maven/search"}).when("/maven/search",{templateUrl:"plugins/maven/html/search.html"}).when("/maven/advancedSearch",{templateUrl:"plugins/maven/html/advancedSearch.html"}).when("/maven/artifact/:group/:artifact/:version/:classifier/:packaging",{templateUrl:"plugins/maven/html/artifact.html"}).when("/maven/artifact/:group/:artifact/:version/:classifier",{templateUrl:"plugins/maven/html/artifact.html"}).when("/maven/artifact/:group/:artifact/:version",{templateUrl:"plugins/maven/html/artifact.html"}).when("/maven/dependencies/:group/:artifact/:version/:classifier/:packaging",{templateUrl:"plugins/maven/html/dependencies.html"}).when("/maven/dependencies/:group/:artifact/:version/:classifier",{templateUrl:"plugins/maven/html/dependencies.html"}).when("/maven/dependencies/:group/:artifact/:version",{templateUrl:"plugins/maven/html/dependencies.html"}).when("/maven/versions/:group/:artifact/:classifier/:packaging",{templateUrl:"plugins/maven/html/versions.html"}).when("/maven/view/:group/:artifact/:version/:classifier/:packaging",{templateUrl:"plugins/maven/html/view.html"}).when("/maven/test",{templateUrl:"plugins/maven/html/test.html"})}]),e._module.run(["HawtioNav","$location","workspace","viewRegistry","helpRegistry",function(t,n,i,r,a){var o=t.builder(),s=o.id("maven-search").title(function(){return"Search"}).href(function(){return"/maven/search"+i.hash()}).isSelected(function(){return i.isLinkPrefixActive("/maven/search")}).build(),l=o.id("maven-advanced-search").title(function(){return"Advanced Search"}).href(function(){return"/maven/advancedSearch"+i.hash()}).isSelected(function(){return i.isLinkPrefixActive("/maven/advancedSearch")}).build(),c=o.id("maven").title(function(){return"Maven"}).isValid(function(){return e.getMavenIndexerMBean(i)}).href(function(){return"/maven"}).isSelected(function(){return i.isLinkActive("/maven")}).tabs(s,l).build();t.add(c),a.addUserDoc("maven","plugins/maven/doc/help.md",function(){return null!==e.getMavenIndexerMBean(i)}),a.addDevDoc("maven","plugins/maven/doc/developer.md")}]),hawtioPluginLoader.addModule(t)}(Maven||(Maven={}));var Maven;!function(e){e._module.controller("Maven.ArtifactController",["$scope","$routeParams","workspace","jolokia",function(t,n,i,r){function a(){var t=e.getMavenIndexerMBean(i);t?r.execute(t,"search",s.groupId,s.artifactId,s.version,s.packaging,s.classifier,"",Core.onSuccess(o)):console.log("No MavenIndexerMBean!")}function o(e){if(e&&e.length){var n=e[0];s.name=n.name,s.description=n.description}Core.$apply(t)}t.row={groupId:n.group||"",artifactId:n.artifact||"",version:n.version||"",classifier:n.classifier||"",packaging:n.packaging||""};var s=t.row;t.id=e.getName(s),e.addMavenFunctions(t,i),t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(a,50)}),t.$watch("workspace.selection",function(){a()})}])}(Maven||(Maven={}));var Maven;!function(e){e._module.controller("Maven.DependenciesController",["$scope","$routeParams","$location","workspace","jolokia",function(t,n,i,r,a){function o(){var n=e.getAetherMBean(r);n?a.execute(n,"resolveJson(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String)",t.group,t.artifact,t.version,t.packaging,t.classifier,Core.onSuccess(s)):console.log("No AetherMBean!")}function s(e){if(e){var n=JSON.parse(e);n&&(t.dependencyTree=new Folder("Dependencies"),t.dependencyActivations=[],l(t.dependencyTree,n),t.dependencyActivations.reverse(),t.rootDependency=t.dependencyTree.children[0])}Core.$apply(t)}function l(n,i){var r=e.getName(i),a=new Folder(r);a.key=r.replace(/\//g,"_"),a.dependency=i,t.dependencyActivations.push(a.key),n.children.push(a);var o=i.children;angular.forEach(o,function(e){l(a,e)})}t.artifacts=[],t.group=n.group||"",t.artifact=n.artifact||"",t.version=n.version||"",t.classifier=n.classifier||"",t.packaging=n.packaging||"",t.dependencyTree=null,e.addMavenFunctions(t,r),t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(o,50)}),t.$watch("workspace.selection",function(){o()}),t.onSelectNode=function(e){t.selected=e},t.onRootNode=function(e){},t.validSelection=function(){return t.selected&&t.selected!==t.rootDependency},t.viewDetails=function(){var e=Core.pathGet(t.selected,["dependency"]),n=t.detailLink(e);if(n){var r=Core.trimLeading(n,"#");console.log("going to view "+r),i.path(r)}}}])}(Maven||(Maven={}));var Maven;!function(e){e._module.controller("Maven.PomXmlController",["$scope",function(e){function t(e){return e||""}e.mavenPomXml="\n  <dependency>\n    <groupId>"+t(e.row.groupId)+"</groupId>\n    <artifactId>"+t(e.row.artifactId)+"</artifactId>\n    <version>"+t(e.row.version)+"</version>\n  </dependency>\n"}])}(Maven||(Maven={}));var Maven;!function(e){e._module.controller("Maven.SearchController",["$scope","$location","workspace","jolokia",function(t,n,i,r){function a(e){if(o.debug("Search done, preparing result."),t.done=!0,t.inProgress=!1,e.length>l){var n=e.length===c;t.tooManyResponses=n?"This search returned more than "+(c-1)+" artifacts, showing the first "+l+", please refine your search":"This search returned "+e.length+" artifacts, showing the first "+l+", please refine your search"}else t.tooManyResponses="";t.artifacts=e.first(l),Core.$apply(t)}var o=Logger.get("Maven");t.artifacts=[],t.selected=[],t.done=!1,t.inProgress=!1,t.form={searchText:""},t.search="",t.searchForm="plugins/maven/html/searchForm.html",e.addMavenFunctions(t,i);var s=[{field:"groupId",displayName:"Group"},{field:"artifactId",displayName:"Artifact",cellTemplate:'<div class="ngCellText" title="Name: {{row.entity.name}}">{{row.entity.artifactId}}</div>'},{field:"version",displayName:"Version",cellTemplate:'<div class="ngCellText" title="Name: {{row.entity.name}}"><a ng-href="{{detailLink(row.entity)}}">{{row.entity.version}}</a</div>'}];t.gridOptions={data:"artifacts",displayFooter:!0,selectedItems:t.selected,selectWithCheckboxOnly:!0,columnDefs:s,rowDetailTemplateId:"artifactDetailTemplate",filterOptions:{filterText:"search"}},t.hasAdvancedSearch=function(e){return e.searchGroup||e.searchArtifact||e.searchVersion||e.searchPackaging||e.searchClassifier||e.searchClassName},t.doSearch=function(){t.done=!1,t.inProgress=!0,t.artifacts=[],setTimeout(function(){Core.$apply(t)},50);var n=e.getMavenIndexerMBean(i),s=t.form;if(n){var l=s.searchText,c=s.artifactType;if(c)if("className"===c)o.debug("Search for: "+s.searchText+" className"),r.execute(n,"searchClasses",l,Core.onSuccess(a));else{var u=c.split("/"),d=u[0],p=u[1];o.debug("Search for: "+s.searchText+" packaging "+d+" classifier "+p),r.execute(n,"searchTextAndPackaging",l,d,p,Core.onSuccess(a))}else l?(o.debug("Search text is: "+s.searchText),r.execute(n,"searchText",s.searchText,Core.onSuccess(a))):t.hasAdvancedSearch(s)&&(o.debug("Searching for "+s.searchGroup+"/"+s.searchArtifact+"/"+s.searchVersion+"/"+s.searchPackaging+"/"+s.searchClassifier+"/"+s.searchClassName),r.execute(n,"search",s.searchGroup||"",s.searchArtifact||"",s.searchVersion||"",s.searchPackaging||"",s.searchClassifier||"",s.searchClassName||"",Core.onSuccess(a)))}else Core.notification("error","Cannot find the Maven Indexer MBean!")};var l=1e3,c=10*l+1}])}(Maven||(Maven={}));var Maven;!function(e){e._module.controller("Maven.TestController",["$scope","workspace","jolokia","$q","$templateCache",function(t,n,i,r,a){t.html="text/html",t.someUri="",t.uriParts=[],t.mavenCompletion=a.get("mavenCompletionTemplate"),t.$watch("someUri",function(e,n){e!==n&&(t.uriParts=e.split("/"))}),t.$watch("uriParts",function(e,n){if(e!==n&&1===e.length&&e.length<n.length&&""!==n.last()&&e.first().has(n.last())){var i=n.first(n.length-1).include(e.first());t.someUri=i.join("/")}},!0),t.doCompletionMaven=function(a){return e.completeMavenUri(r,t,n,i,a)}}])}(Maven||(Maven={}));var Maven;!function(e){e._module.controller("Maven.VersionsController",["$scope","$routeParams","workspace","jolokia",function(t,n,i,r){function a(){var n=e.getMavenIndexerMBean(i);n?r.execute(n,"versionComplete",t.group,t.artifact,t.version,t.packaging,t.classifier,Core.onSuccess(o)):console.log("No MavenIndexerMBean!")}function o(e){t.artifacts=[],angular.forEach(e,function(e){for(var n=Core.parseVersionNumbers(e),i=0,r=0;4>=r;r++){var a=r>=n.length?0:n[r];i*=1e3,i+=a}t.artifacts.push({groupId:t.group,artifactId:t.artifact,packaging:t.packaging,classifier:t.classifier,version:e,versionNumber:i})}),Core.$apply(t)}t.artifacts=[],t.group=n.group||"",t.artifact=n.artifact||"",t.version="",t.classifier=n.classifier||"",t.packaging=n.packaging||"";var s=t.group+"/"+t.artifact;t.classifier&&(s+="/"+t.classifier),t.packaging&&(s+="/"+t.packaging);var l=s+" versions",c=[{field:"version",displayName:l,cellTemplate:'<div class="ngCellText"><a href="#/maven/artifact/{{row.entity.groupId}}/{{row.entity.artifactId}}/{{row.entity.version}}">{{row.entity.version}}</a></div>'}];t.gridOptions={data:"artifacts",displayFooter:!0,selectedItems:t.selected,selectWithCheckboxOnly:!0,columnDefs:c,rowDetailTemplateId:"artifactDetailTemplate",sortInfo:{field:"versionNumber",direction:"DESC"},filterOptions:{filterText:"search"}},e.addMavenFunctions(t,i),t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(a,50)}),t.$watch("workspace.selection",function(){a()})}])}(Maven||(Maven={}));var Maven;!function(e){e._module.controller("Maven.ViewController",["$scope","$location","workspace","jolokia",function(e,t,n,i){function r(){}e.$watch("workspace.tree",function(){setTimeout(r,50)}),e.$on("$routeChangeSuccess",function(e,t,n){setTimeout(r,50)})}])}(Maven||(Maven={}));var Wiki;!function(e){function t(e){return!1}function n(e,t,n){return null!==Git.createGitRepository(e,t,n)}function i(t,n,i){var r=Core.trimLeading(t,"#");n(function(){e.log.debug("About to navigate to: "+r),i.url(r)},100)}function r(t){var n=t.branch,i=Core.trimLeading(e.startLink(n),"#");return e.customWikiViewPages.map(function(e){return i+e})}function a(t,n){var i=new Folder("New Documents");return o(t,n,i,e.documentTemplates),i}function o(e,t,n,i){angular.forEach(i,function(i){if(i.generated){if(i.generated.mbean){var r=e.treeContainsDomainAndProperties.apply(e,i.generated.mbean);if(!r)return}i.generated.init&&i.generated.init(e,t)}var a=i.label||c,s=new Folder(a);s.parent=n,s.entity=i;var l=i.addClass;l&&(s.addClass=l);var c=i.exemplar,u=n.key||"";s.key=u?u+"_"+c:c;var d=i.icon;d&&(s.icon=Core.url(d));var p=i.tooltip||i.description||"";s.tooltip=p,i.folder&&(s.isFolder=function(){return!0}),n.children.push(s);var h=i.children;h&&o(e,t,s,h)})}function s(e){var t="/wiki";return e&&(t=UrlHelpers.join(t,"branch",e)),t}function l(e){return e&&(e.endsWith("index.md")||e.endsWith("index.html")||e.endsWith("index"))?!0:!1}function c(e,t,n,i){void 0===i&&(i=null);var r=null,a=s(e);if(t){var o=l(t)?"/book/":"/view/";r=a+o+h(Core.trimLeading(t,"/"))}else{var c=n.path();r="#"+c.replace(/(edit|create)/,"view")}return i&&t&&t.endsWith(i)?r:(i&&(r.endsWith("/")||(r+="/"),r+=i),r)}function u(e,t,n,i){return void 0===i&&(i=null),c(e,t,n,i)}function d(t,n,i){var r=null,a=e.fileFormat(n);switch(a){case"image":break;default:var o=s(t);if(n)r=o+"/edit/"+h(n);else{var l=i.path();r="#"+l.replace(/(view|create)/,"edit")}}return r}function p(e,t,n,i){var r=n.path(),a=s(e),o="";o=t?a+"/create/"+h(t):"#"+r.replace(/(view|edit|formTable)/,"create");var l=o.lastIndexOf("/");return l>0&&!i.children&&!r.startsWith("/wiki/formTable")&&(o=o.substring(0,l+1)),o}function h(e){return e.split("/").map(encodeURIComponent).join("/")}function f(e){return e.split("/").map(decodeURIComponent).join("/")}function g(e,t){var n=A(e),i=null;return t||(t=HawtioCore.injector.get("fileExtensionTypeRegistry")),angular.forEach(t,function(e,t){e.indexOf(n)>=0&&(i=t)}),i}function m(e){if(e){var t=e.lastIndexOf("/");if(t>0)return e.substring(t+1)}return e}function v(e){if(e){var t=e.lastIndexOf("/");if(t>0)return e.substring(0,t)}return""}function y(t){return t&&angular.forEach(e.hideExtensions,function(e){t.endsWith(e)&&(t=t.substring(0,t.length-e.length))}),t}function b(e,t){var n=x(e,t);n=Core.url("/"+n);var i=Core.getConnectionNameParameter();if(i){var r=Core.getConnectOptions(i);r&&(r.path=n,n=Core.createServerConnectionUrl(r))}return n}function w(){var e="",t=HawtioCore.injector;return t&&(e=t.get("WikiGitUrlPrefix")||""),e}function x(e,t){var n=w();return e=e||"master",t=t||"/",UrlHelpers.join(n,"git/"+e,t)}function k(t){var n=t.name,i=t.path,r=t.branch,a=t.directory,o=t.xmlNamespaces,s=t.iconUrl,l=t.entity;l&&(n=n||l.name,i=i||l.path,r=r||l.branch,a=a||l.directory,o=o||l.xmlNamespaces,s=s||l.iconUrl),r=r||"master";var c=null,u=null,d=A(n);if(o&&o.length&&(o.any(function(t){return e.camelNamespaces.any(t)})?u="img/icons/camel.svg":o.any(function(t){return e.dozerNamespaces.any(t)})?u="img/icons/dozer/dozer.gif":o.any(function(t){return e.activemqNamespaces.any(t)})?u="img/icons/messagebroker.svg":e.log.debug("file "+n+" has namespaces "+o)),s){c=null;var p=w();u=UrlHelpers.join(p,"git",s);var h=Core.getConnectionNameParameter();if(h){var f=Core.getConnectOptions(h);f&&(f.path=Core.url("/"+u),u=Core.createServerConnectionUrl(f))}}if(!u)if(a)switch(d){case"profile":c="fa fa-book";break;default:c="fa fa-folder"}else switch(d){case"png":case"svg":case"jpg":case"gif":c=null,u=e.gitRelativeURL(r,i);var h=Core.getConnectionNameParameter();if(h){var f=Core.getConnectOptions(h);f&&(f.path=Core.url("/"+u),u=Core.createServerConnectionUrl(f))}break;case"json":case"xml":c="fa fa-file-text";break;case"md":c="fa fa-file-text-o";break;default:c="fa fa-file-alt"}return u?"<img src='"+Core.url(u)+"'>":"<i class='"+c+"'></i>"}function C(e){var t=e.getProperty("name"),n=A(t),i=e.getProperty("directory");return i?"fa fa-folder":"xml"===n?"fa fa-cog":"md"===n?"fa fa-file-text-o":"fa fa-file-alt"}function S(t,n,i){t.pageId=e.pageId(n,i),t.branch=n.branch||i.search().branch,t.objectId=n.objectId,t.startLink=e.startLink(t.branch),t.historyLink=s(t.branch)+"/history/"+(t.pageId||"")}function _(e,t,n,i){void 0===i&&(i=!1),t.branches(function(e){n.branches=e.sortBy(function(e){return Core.versionToSortableString(e)},!0),!n.branch&&n.branches.find(function(e){return"master"===e})&&(n.branch="master"),Core.$apply(n)})}function T(e,t){var n=e.page;if(!n){for(var i=0;100>i;i++){var r=e["path"+i];if(!angular.isDefined(r))break;n?n+="/"+r:n=r}return n||"/"}return n||(n=$(t.path())),n}function $(e){var t="/wiki/";if(e&&e.startsWith(t)){var n=e.indexOf("/",t.length+1);if(n>0)return e.substring(n+1,e.length)}return null}function A(e){return e.indexOf("#")>0&&(e=e.substring(0,e.indexOf("#"))),Core.fileExtension(e,"markdown")}function E(e){console.log("Completed operation with status: "+JSON.stringify(e))}function P(e){if(e)try{return JSON.parse(e)}catch(t){Core.notification("error","Failed to parse JSON: "+t)}return null}function I(t,n,i,r){var a=r?"."+r:"",o=n.path(),s=o,l=o.lastIndexOf("/");if(l>0){var c=o.substring(l+1);c.indexOf(".")>=0&&(s=o.substring(0,l))}if(i.startsWith("../")){var u=i.split("/"),d=s.split("/"),p=u.filter(function(e){return".."===e});return u=u.last(u.length-p.length),d=d.first(d.length-p.length),"#"+d.join("/")+"/"+u.join("/")+a+n.hash()}return i.startsWith("/")?e.branchLink(t.branch,i+a,n)+a:e.excludeAdjustmentPrefixes.any(function(e){return i.startsWith(e)})?null:"#"+s+"/"+i+a+n.hash()}e.log=Logger.get("Wiki"),e.camelNamespaces=["http://camel.apache.org/schema/spring","http://camel.apache.org/schema/blueprint"],e.springNamespaces=["http://www.springframework.org/schema/beans"],e.droolsNamespaces=["http://drools.org/schema/drools-spring"],e.dozerNamespaces=["http://dozer.sourceforge.net"],e.activemqNamespaces=["http://activemq.apache.org/schema/core"],e.excludeAdjustmentPrefixes=["http://","https://","#"],function(e){e[e.List=0]="List",e[e.Icon=1]="Icon"}(e.ViewMode||(e.ViewMode={}));e.ViewMode;e.customWikiViewPages=["/formTable","/camel/diagram","/camel/canvas","/camel/properties","/dozer/mappings"],e.hideExtensions=[".profile"];var D=/^[a-zA-Z0-9._-]*$/,M="Name must be: letters, numbers, and . _ or - characters",N=/^[a-z0-9._-]*$/,j="Name must be: lower-case letters, numbers, and . _ or - characters";e.documentTemplates=[{label:"Folder",tooltip:"Create a new folder to contain documents",folder:!0,icon:"/img/icons/wiki/folder.gif",exemplar:"myfolder",regex:N,invalid:j},{label:"App",tooltip:"Creates a new App folder used to configure and run containers",addClass:"fa fa-cog green",exemplar:"myapp",regex:D,invalid:M,extension:"",generated:{mbean:["io.fabric8",{type:"KubernetesTemplateManager"}],init:function(e,t){},generate:function(t){e.log.debug("Got options: ",t),t.form.name=t.name,t.form.path=t.parentId,t.form.branch=t.branch;var n=angular.toJson(t.form),i=HawtioCore.injector.get("jolokia");i.request({type:"exec",mbean:"io.fabric8:type=KubernetesTemplateManager",operation:"createAppByJson",arguments:[n]},Core.onSuccess(function(n){e.log.debug("Generated app, response: ",n),t.success(void 0)},{error:function(e){t.error(e.error)}}))},form:function(e,t){return t.doDockerRegistryCompletion||(t.fetchDockerRepositories=function(){return DockerRegistry.completeDockerRegistry()}),{summaryMarkdown:"Add app summary here",replicaCount:1}},schema:{description:"App settings",type:"java.lang.String",properties:{dockerImage:{description:"Docker Image",type:"java.lang.String","input-attributes":{required:"","class":"input-xlarge",typeahead:"repo for repo in fetchDockerRepositories() | filter:$viewValue","typeahead-wait-ms":"200"}},summaryMarkdown:{description:"Short Description",type:"java.lang.String","input-attributes":{"class":"input-xlarge"}},replicaCount:{description:"Replica Count",type:"java.lang.Integer","input-attributes":{min:"0"}},labels:{description:"Labels",type:"map",items:{type:"string"}}}}}},{label:"Fabric8 Profile",tooltip:"Create a new empty fabric profile. Using a hyphen ('-') will create a folder heirarchy, for example 'my-awesome-profile' will be available via the path 'my/awesome/profile'.",profile:!0,addClass:"fa fa-book green",exemplar:"user-profile",regex:N,invalid:j,fabricOnly:!0},{label:"Properties File",tooltip:"A properties file typically used to configure Java classes",exemplar:"properties-file.properties",regex:D,invalid:M,extension:".properties"},{label:"JSON File",tooltip:"A file containing JSON data",exemplar:"document.json",regex:D,invalid:M,extension:".json"},{label:"Key Store File",tooltip:"Creates a keystore (database) of cryptographic keys, X.509 certificate chains, and trusted certificates.",exemplar:"keystore.jks",regex:D,invalid:M,extension:".jks",generated:{mbean:["hawtio",{type:"KeystoreService"}],init:function(e,t){{var n="hawtio:type=KeystoreService";e.jolokia.request({type:"read",mbean:n,attribute:"SecurityProviderInfo"},{success:function(e){t.securityProviderInfo=e.value,Core.$apply(t)},error:function(e){console.log("Could not find the supported security algorithms: ",e.error),Core.$apply(t)}})}},generate:function(e){{var t=JSON.stringify(e.form),n="hawtio:type=KeystoreService";e.workspace.jolokia.request({type:"exec",mbean:n,operation:"createKeyStoreViaJSON(java.lang.String)",arguments:[t]},{method:"POST",success:function(t){e.success(t.value)},error:function(t){e.error(t.error)}})}},form:function(e,t){return{storeType:t.securityProviderInfo.supportedKeyStoreTypes[0],createPrivateKey:!1,keyLength:4096,keyAlgorithm:t.securityProviderInfo.supportedKeyAlgorithms[0],keyValidity:365}},schema:{description:"Keystore Settings",type:"java.lang.String",properties:{storePassword:{description:"Keystore password.",type:"password","input-attributes":{required:"","ng-minlength":6}},storeType:{description:"The type of store to create",type:"java.lang.String","input-element":"select","input-attributes":{"ng-options":"v for v in securityProviderInfo.supportedKeyStoreTypes"}},createPrivateKey:{description:"Should we generate a self-signed private key?",type:"boolean"},keyCommonName:{description:"The common name of the key, typically set to the hostname of the server",type:"java.lang.String","control-group-attributes":{"ng-show":"formData.createPrivateKey"}},keyLength:{description:"The length of the cryptographic key",type:"Long","control-group-attributes":{"ng-show":"formData.createPrivateKey"}},keyAlgorithm:{description:"The key algorithm",type:"java.lang.String","input-element":"select","input-attributes":{"ng-options":"v for v in securityProviderInfo.supportedKeyAlgorithms"},"control-group-attributes":{"ng-show":"formData.createPrivateKey"}},keyValidity:{description:"The number of days the key will be valid for",type:"Long","control-group-attributes":{"ng-show":"formData.createPrivateKey"}},keyPassword:{description:"Password to the private key",type:"password","control-group-attributes":{"ng-show":"formData.createPrivateKey"}}}}}},{label:"Markdown Document",tooltip:"A basic markup document using the Markdown wiki markup, particularly useful for ReadMe files in directories",exemplar:"ReadMe.md",regex:D,invalid:M,extension:".md"},{label:"Text Document",tooltip:"A plain text file",exemplar:"document.text",regex:D,invalid:M,extension:".txt"},{label:"HTML Document",tooltip:"A HTML document you can edit directly using the HTML markup",exemplar:"document.html",regex:D,invalid:M,extension:".html"},{label:"XML Document",tooltip:"An empty XML document",exemplar:"document.xml",regex:D,invalid:M,extension:".xml"},{label:"Integration Flows",tooltip:"Camel routes for defining your integration flows",children:[{label:"Camel XML document",tooltip:"A vanilla Camel XML document for integration flows",icon:"/img/icons/camel.svg",exemplar:"camel.xml",regex:D,invalid:M,extension:".xml"},{label:"Camel OSGi Blueprint XML document",tooltip:"A vanilla Camel XML document for integration flows when using OSGi Blueprint",icon:"/img/icons/camel.svg",exemplar:"camel-blueprint.xml",regex:D,invalid:M,extension:".xml"},{label:"Camel Spring XML document",tooltip:"A vanilla Camel XML document for integration flows when using the Spring framework",icon:"/img/icons/camel.svg",exemplar:"camel-spring.xml",regex:D,invalid:M,extension:".xml"}]},{label:"Data Mapping Document",tooltip:"Dozer based configuration of mapping documents",icon:"/img/icons/dozer/dozer.gif",exemplar:"dozer-mapping.xml",regex:D,invalid:M,extension:".xml"}],e.isFMCContainer=t,e.isWikiEnabled=n,e.goToLink=i,e.customViewLinks=r,e.createWizardTree=a,e.addCreateWizardFolders=o,e.startLink=s,e.isIndexPage=l,e.viewLink=c,e.branchLink=u,e.editLink=d,e.createLink=p,e.encodePath=h,e.decodePath=f,e.fileFormat=g,e.fileName=m,e.fileParent=v,e.hideFileNameExtensions=y,e.gitRestURL=b,e.gitRelativeURL=x,e.fileIconHtml=k,e.iconClass=C,e.initScope=S,e.loadBranches=_,e.pageId=T,e.pageIdFromURI=$,e.fileExtension=A,e.onComplete=E,e.parseJson=P,e.adjustHref=I}(Wiki||(Wiki={}));var Wiki;!function(e){e.pluginName="wiki",e.templatePath="plugins/wiki/html/",e.tab=null,e._module=angular.module(e.pluginName,["ngResource","hawtio-core","hawtio-ui"]),e.controller=PluginHelpers.createControllerFunction(e._module,"Wiki"),e.route=PluginHelpers.createRoutingFunction(e.templatePath),e._module.config(["$routeProvider",function(t){angular.forEach(["","/branch/:branch"],function(n){t.when(UrlHelpers.join("/wiki",n,"view"),e.route("viewPage.html",!1)).when(UrlHelpers.join("/wiki",n,"create/:page*"),e.route("create.html",!1)).when("/wiki"+n+"/view/:page*",{templateUrl:"plugins/wiki/html/viewPage.html",reloadOnSearch:!1}).when("/wiki"+n+"/book/:page*",{templateUrl:"plugins/wiki/html/viewBook.html",reloadOnSearch:!1}).when("/wiki"+n+"/edit/:page*",{templateUrl:"plugins/wiki/html/editPage.html"}).when("/wiki"+n+"/version/:page*/:objectId",{templateUrl:"plugins/wiki/html/viewPage.html"}).when("/wiki"+n+"/history/:page*",{templateUrl:"plugins/wiki/html/history.html"}).when("/wiki"+n+"/commit/:page*/:objectId",{templateUrl:"plugins/wiki/html/commit.html"}).when("/wiki"+n+"/diff/:page*/:objectId/:baseObjectId",{templateUrl:"plugins/wiki/html/viewPage.html",reloadOnSearch:!1}).when("/wiki"+n+"/formTable/:page*",{templateUrl:"plugins/wiki/html/formTable.html"}).when("/wiki"+n+"/dozer/mappings/:page*",{templateUrl:"plugins/wiki/html/dozerMappings.html"}).when("/wiki"+n+"/configurations/:page*",{templateUrl:"plugins/wiki/html/configurations.html"}).when("/wiki"+n+"/configuration/:pid/:page*",{templateUrl:"plugins/wiki/html/configuration.html"}).when("/wiki"+n+"/newConfiguration/:factoryPid/:page*",{templateUrl:"plugins/wiki/html/configuration.html"})})}]),e._module.factory("wikiRepository",["workspace","jolokia","localStorage",function(t,n,i){return new e.GitWikiRepository(function(){return Git.createGitRepository(t,n,i)})}]),e._module.factory("wikiBranchMenu",function(){var e={items:[],addExtension:function(t){e.items.push(t)},applyMenuExtensions:function(t){if(0!==e.items.length){var n=[{heading:"Actions"}];e.items.forEach(function(e){e.valid()&&n.push(e)}),n.length>1&&t.add(n)}}};return e}),e._module.factory("WikiGitUrlPrefix",function(){return""}),e._module.factory("fileExtensionTypeRegistry",function(){return{image:["svg","png","ico","bmp","jpg","gif"],markdown:["md","markdown","mdown","mkdn","mkd"],htmlmixed:["html","xhtml","htm"],"text/x-java":["java"],"text/x-scala":["scala"],javascript:["js","json","javascript","jscript","ecmascript","form"],xml:["xml","xsd","wsdl","atom"],properties:["properties"]}}),e._module.filter("fileIconClass",function(){return e.iconClass}),e._module.run(["$location","workspace","viewRegistry","jolokia","localStorage","layoutFull","helpRegistry","preferencesRegistry","wikiRepository","$rootScope",function(t,n,i,r,a,o,s,l,c,u){i.wiki=e.templatePath+"layoutWiki.html",s.addUserDoc("wiki","plugins/wiki/doc/help.md",function(){return e.isWikiEnabled(n,r,a)}),l.addTab("Git","plugins/wiki/html/gitPreferences.html"),e.tab={id:"wiki",content:"Wiki",title:"View and edit wiki pages",isValid:function(t){return e.isWikiEnabled(t,r,a)},href:function(){return"#/wiki/view"},isActive:function(e){return e.isLinkActive("/wiki")&&!e.linkContains("fabric","profiles")&&!e.linkContains("editFeatures")}},n.topLevelTabs.push(e.tab),e.documentTemplates.forEach(function(e){e.regex||(e.regex=/(?:)/);

})}]),hawtioPluginLoader.addModule(e.pluginName)}(Wiki||(Wiki={}));var Wiki;!function(e){e._module.controller("Wiki.CommitController",["$scope","$location","$routeParams","$templateCache","workspace","marked","fileExtensionTypeRegistry","wikiRepository","jolokia",function(t,n,i,r,a,o,s,l,c){function u(e){return e.path||e.name}function d(){var n=t.commitId;e.loadBranches(c,l,t,p),l.commitInfo(n,function(e){t.commitInfo=e,Core.$apply(t)}),l.commitTree(n,function(i){t.commits=i,angular.forEach(i,function(i){i.fileIconHtml=e.fileIconHtml(i),i.fileClass=i.name.endsWith(".profile")?"green":"";var r=i.changeType,a=u(i);a&&(i.fileLink=e.startLink(t.branch)+"/version/"+a+"/"+n),r&&(r=r.toLowerCase(),r.startsWith("a")?(i.changeClass="change-add",i.change="add",i.title="added"):r.startsWith("d")?(i.changeClass="change-delete",i.change="delete",i.title="deleted",i.fileLink=null):(i.changeClass="change-modify",i.change="modify",i.title="modified"),i.changeTypeHtml='<span class="'+i.changeClass+'">'+i.title+"</span>")}),Core.$apply(t)})}var p=e.isFMCContainer(a);e.initScope(t,i,n),t.commitId=t.objectId,t.selectedItems=[],t.dateFormat="EEE, MMM d, y : hh:mm:ss a",t.gridOptions={data:"commits",showFilter:!1,multiSelect:!1,selectWithCheckboxOnly:!0,showSelectionCheckbox:!0,displaySelectionCheckbox:!0,selectedItems:t.selectedItems,filterOptions:{filterText:""},columnDefs:[{field:"path",displayName:"File Name",cellTemplate:r.get("fileCellTemplate.html"),width:"***",cellFilter:""}]},t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(d,50)}),t.$watch("workspace.tree",function(){!t.git&&Git.getGitMBean(a)&&setTimeout(d,50)}),t.canRevert=function(){return 1===t.selectedItems.length},t.revert=function(){if(t.selectedItems.length>0){var n=u(t.selectedItems[0]),i=t.commitId;if(n&&i){var r="Reverting file "+t.pageId+" to previous version "+i;l.revertTo(t.branch,i,t.pageId,r,function(t){e.onComplete(t),d()})}}},t.diff=function(){if(t.selectedItems.length>0){var i=t.selectedItems[0],r=e.startLink(t.branch)+"/diff/"+u(i)+"/"+t.commitId+"/",a=Core.trimLeading(r,"#");n.path(a)}},d()}])}(Wiki||(Wiki={}));var Wiki;!function(e){e.controller("CreateController",["$scope","$location","$routeParams","$route","$http","$timeout","workspace","jolokia","wikiRepository",function(t,n,i,r,a,o,s,l,c){function u(){var i=e.viewLink(t.branch,t.pageId,n);e.log.debug("Cancelling, going to link: ",i),e.goToLink(i,o,n)}function d(i,r,a,s,l){c.putPage(t.branch,i,s,l,function(s){e.log.debug("Created file "+r),e.onComplete(s),t.git=c.getPage(t.branch,a,t.objectId,function(r){var a=null;if(r&&r.children){e.log.debug("scanned the directory "+r.children.length+" children");var s=r.children.find(function(t){return t.name===e.fileName});s?a=t.childLink(s):e.log.debug("Could not find name '"+e.fileName+"' in the list of file names "+JSON.stringify(r.children.map(function(e){return e.name})))}a||(e.log.debug("WARNING: could not find the childLink so reverting to the wiki edit page!"),a=e.editLink(t.branch,i,n)),e.goToLink(a,o,n)})})}function p(){var n=t.selectedCreateDocumentTemplate;if(!n)return e.log.debug("No template selected."),null;var i=n.exemplar||"",r=t.newDocumentName||i;if(r.indexOf(".")<0){var a=i.lastIndexOf(".");a>0&&(r+=i.substring(a))}var o=t.pageId;if(t.isFile){var a=o.lastIndexOf("/");o=0>=a?"":o.substring(0,a)}var a=r.lastIndexOf("/");return a>0&&(o+="/"+r.substring(0,a),r=r.substring(a+1)),o=Core.trimLeading(o,"/"),o+(o?"/":"")+r}e.isFMCContainer(s);e.initScope(t,i,n),t.createDocumentTree=e.createWizardTree(s,t),t.createDocumentTreeActivations=["camel-spring.xml","ReadMe.md"],t.fileExists={exists:!1,name:""},t.newDocumentName="",t.selectedCreateDocumentExtension=null,t.fileExists.exists=!1,t.fileExists.name="",t.newDocumentName="",t.cancel=function(){u()},t.onCreateDocumentSelect=function(n){t.fileExists.exists=!1,t.fileExists.name="";var i=n?n.entity:null;t.selectedCreateDocumentTemplate=i,t.selectedCreateDocumentTemplateRegex=t.selectedCreateDocumentTemplate.regex||/.*/,t.selectedCreateDocumentTemplateInvalid=t.selectedCreateDocumentTemplate.invalid||"invalid name",t.selectedCreateDocumentTemplateExtension=t.selectedCreateDocumentTemplate.extension||null,e.log.debug("Entity: ",i),i&&(i.generated?(t.formSchema=i.generated.schema,t.formData=i.generated.form(s,t)):(t.formSchema={},t.formData={}),Core.$apply(t))},t.addAndCloseDialog=function(i){function r(e){var t="fabric/profiles/"+e;return t=t.replace(/-/g,"/"),t+=".profile"}function l(e){var t=e.replace(/^fabric\/profiles\//,"");return t=t.replace(/\//g,"-"),t=t.replace(/\.profile$/,"")}t.newDocumentName=i;var h=t.selectedCreateDocumentTemplate,f=p();if(t.newDocumentName=null,t.fileExists.exists=!1,t.fileExists.name="",t.fileExtensionInvalid=null,h&&f){if(t.selectedCreateDocumentTemplateExtension){var g=f.lastIndexOf(".");if(g>0){var m=f.substring(g);if(t.selectedCreateDocumentTemplateExtension!==m)return t.fileExtensionInvalid="File extension must be: "+t.selectedCreateDocumentTemplateExtension,void Core.$apply(t)}}var v=c.exists(t.branch,f,null);if(v)return t.fileExists.exists=!0,t.fileExists.name=f,void Core.$apply(t);var y=e.fileName(f),b=e.fileParent(f),w=h.exemplar,x="Created "+h.label,k=Core.url("/plugins/wiki/exemplar/"+w);if(h.folder)Core.notification("success","Creating new folder "+y),c.createDirectory(t.branch,f,x,function(i){var r=e.viewLink(t.branch,f,n);e.goToLink(r,o,n)});else if(h.profile){b=b.replace(/\/=?(\w*)\.profile$/,"");{var C=b+"/"+y,S=l(C);r(S)}}else if(h.generated){var _={workspace:s,form:t.formData,name:i,parentId:b,branch:t.branch,success:function(n){n?c.putPageBase64(t.branch,f,n,x,function(t){e.log.debug("Created file "+y),e.onComplete(t),u()}):u()},error:function(e){Core.notification("error",e),Core.$apply(t)}};h.generated.generate(_)}else a.get(k).success(function(e,t,n,i){d(f,y,b,e,x)}).error(function(e,t,n,i){d(f,y,b,"",x)})}}}])}(Wiki||(Wiki={}));var Wiki;!function(e){e._module.controller("Wiki.DozerMappingsController",["$scope","$location","$routeParams","workspace","jolokia","wikiRepository","$templateCache",function(t,n,i,r,a,o,s){function l(e,t){return e&&e.properties?e.properties.find(function(e){return e.path.endsWith("/"+t)}):null}function c(e,t){e.bind("click",function(e){t.detach(e)})}function u(){return{strokeStyle:UI.colors.sample(),lineWidth:4}}function d(e,t){var n=Dozer.findProperties(r,e,t,null);return n.map(function(e){return e.name})}function p(){t.pageId=e.pageId(i,n),Git.getGitMBean(r)&&(t.git=o.getPage(t.branch,t.pageId,t.objectId,h))}function h(e){var n=e.text;n?t.responseText!==n&&(t.responseText=n,t.model=Dozer.loadDozerModel(n,t.pageId),t.mappings=Core.pathGet(t.model,["mappings"]),t.mappingTree=Dozer.createDozerTree(t.model),angular.isDefined(t.selectedMapping)||(t.selectedMapping=t.mappings.first()),t.main=s.get("pageTemplate.html")):m.warn("No XML found for page "+t.pageId),Core.$apply(t)}function f(){t.modified=!0}function g(){}var m=Logger.get("Dozer");e.initScope(t,i,n),Dozer.schemaConfigure(),t.versionId=t.branch||"1.0",t.schema={},t.addDialog=new UI.Dialog,t.propertiesDialog=new UI.Dialog,t.deleteDialog=!1,t.unmappedFieldsHasValid=!1,t.modified=!1,t.selectedItems=[],t.mappings=[],t.schemas=[],t.aName="",t.bName="",t.connectorStyle=["Bezier"],t.main="",t.tab="Mappings",t.gridOptions={selectedItems:t.selectedItems,data:"mappings",displayFooter:!1,showFilter:!1,filterOptions:{filterText:"searchText"},columnDefs:[{field:"class_a",displayName:"From",cellTemplate:'<div class="ngCellText">{{row.entity.class_a.name}}</div>'},{field:"class_b",displayName:"To",cellTemplate:'<div class="ngCellText">{{row.entity.class_b.name}}</div>'}]},t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(p,50)}),t.triggerRefresh=function(e){void 0===e&&(e=500),t.main="",setTimeout(function(){t.main=s.get("pageTemplate.html"),Core.$apply(t)},e)},t.disableReload=function(){var e=Core.pathGet(t,["selectedMapping","class_a","value"]),n=Core.pathGet(t,["selectedMapping","class_b","value"]);return e===t.aName&&n===t.bName},t.doReload=function(){t.selectedMapping.class_a.value=t.aName,t.selectedMapping.class_b.value=t.bName,t.triggerRefresh()},t.$watch("selectedMapping",function(e,n){e!==n&&(t.aName=e.class_a.value,t.bName=e.class_b.value,t.triggerRefresh())}),t.$watch("selectedMapping.class_a.value",function(e,n){e!==n&&""!==e&&t.fetchProperties(e,t.selectedMapping.class_a,"Right")}),t.$watch("selectedMapping.class_b.value",function(e,n){e!==n&&""!==e&&t.fetchProperties(e,t.selectedMapping.class_b,"Left")}),t.fetchProperties=function(e,n,i){var o=Dozer.getIntrospectorMBean(r);if(o&&!t.missingContainer){var s=t.containerJolokia||a;s.request({type:"exec",mbean:o,operation:"getProperties(java.lang.String)",arguments:[e]},{success:function(e){n.error=null,n.properties=e.value;var r="";r=angular.isDefined(n.value)?n.value:n.path,angular.forEach(n.properties,function(e){e.id=Core.getUUID(),e.path=r+"/"+e.displayName,e.anchor=i}),Core.$apply(t)},error:function(e){n.properties=null,n.error={type:e.error_type,stackTrace:e.error},m.error("got: "+e),Core.$apply(t)}})}},t.getSourceAndTarget=function(e){var t=e.source.attr("field-path"),n=(e.target.attr("field-path"),t.split("/").last()),i=t.split("/").last();return{from:n,to:i}},t.jsPlumbCallback=function(e,n,i,r){angular.forEach(t.selectedMapping.fields,function(n){var r=l(t.selectedMapping.class_a,n.a.value),a=l(t.selectedMapping.class_b,n.b.value);if(r&&a){var o=i[r.id],s=i[a.id],d=t.jsPlumb.connect({source:o.el,target:s.el},{connector:t.connectorStyle,maxConnections:1,paintStyle:u()});c(d,e),o.connections.push(d),s.connections.push(d)}}),e.bind("connection",function(n){c(n.connection,e),n.connection.setPaintStyle(u());var i=t.getSourceAndTarget(n),r=new Dozer.Field(new Dozer.FieldDefinition(i.from),new Dozer.FieldDefinition(i.to));t.selectedMapping.fields.push(r),t.modified=!0,Core.$apply(t)}),e.bind("connectionDetached",function(e){var n=t.getSourceAndTarget(e),i=new Dozer.Field(new Dozer.FieldDefinition(n.from),new Dozer.FieldDefinition(n.to));t.selectedMapping.fields.remove(i),t.modified=!0,Core.$apply(t)})},t.formatStackTrace=function(e){return Log.formatStackTrace(e)},t.addMapping=function(){var e=t.rootTreeNode;if(e){var n=e.data,i=new Dozer.Mapping,r=Dozer.createMappingFolder(i,n),a=e.addChild(r);a&&(a.expand(!0),a.select(!0),a.activate(!0),f()),t.mappings.push(i),t.selectedMapping=i}},t.addField=function(){t.selectedMapping&&Dozer.findUnmappedFields(r,t.selectedMapping,function(e){m.warn("has unmapped data fields: "+e),t.unmappedFields=e,t.unmappedFieldsHasValid=!1,t.addDialog.open(),Core.$apply(t)})},t.addAndCloseDialog=function(){m.info("About to add the unmapped fields "+JSON.stringify(t.unmappedFields,null,"  ")),t.selectedMapping&&angular.forEach(t.unmappedFields,function(e){if(e.valid){var n=new Dozer.Field(new Dozer.FieldDefinition(e.fromField),new Dozer.FieldDefinition(e.toField));t.selectedMapping.fields.push(n);var i=t.selectedMappingTreeNode,r=t.selectedMappingFolder;if(i&&r){var a=Dozer.addMappingFieldFolder(n,r),o=i.addChild(a);o&&(o.expand(!0),o.select(!0),o.activate(!0),f())}else m.warn("No treenode and folder for mapping node! treeNode "+i+" mappingFolder "+r)}}),t.addDialog.close()},t.canDelete=function(){return t.selectedFolder?!0:!1},t.removeNode=function(){if(t.selectedFolder&&t.treeNode){var e=t.selectedFolder,n=e.entity;if(n instanceof Dozer.Field){var i=Core.pathGet(e,["parent","entity"]);i&&i.fields.remove(n)}t.selectedFolder.detach(),t.treeNode.remove(),t.selectedFolder=null,t.treeNode=null,f()}},t.saveMappings=function(){t.model.mappings=t.mappings;var n=Dozer.saveToXmlText(t.model);if(n){var i=t.commitMessage||"Updated page "+t.pageId;o.putPage(t.branch,t.pageId,n,i,function(n){e.onComplete(n),t.modified=!1,Core.notification("success","Saved "+t.pageId),g(),Core.$apply(t)})}},t.save=function(){if("Mappings"===t.tab)return void t.saveMappings();if(t.model){var n=Dozer.loadModelFromTree(t.rootTreeNode,t.model),i=Dozer.saveToXmlText(n);if(i){var r=t.commitMessage||"Updated page "+t.pageId;o.putPage(t.branch,t.pageId,i,r,function(n){e.onComplete(n),t.modified=!1,Core.notification("success","Saved "+t.pageId),g(),Core.$apply(t)})}}},t.cancel=function(){m.info("cancelling...")},t.onRootTreeNode=function(e){t.rootTreeNode=e},t.onNodeSelect=function(e,n){if(t.selectedFolder=e,t.treeNode=n,t.propertiesTemplate=null,t.dozerEntity=null,t.selectedDescription="",t.selectedMapping=null,t.selectedMappingTreeNode=null,t.selectedMappingFolder=null,t.removeModelChangeListener&&(t.removeModelChangeListener(),t.removeModelChangeListener=null),e){var i=e.entity;t.dozerEntity=i;var r="plugins/wiki/html/dozerPropertiesEdit.html";i instanceof Dozer.Field?(t.propertiesTemplate=r,t.nodeModel=Dozer.io_hawt_dozer_schema_Field,t.selectedDescription="Field Mapping",t.selectedMapping=Core.pathGet(e,["parent","entity"]),t.selectedMappingFolder=e.parent,t.selectedMappingTreeNode=n.parent):i instanceof Dozer.Mapping&&(t.propertiesTemplate=r,t.nodeModel=Dozer.io_hawt_dozer_schema_Mapping,t.selectedDescription="Class Mapping",t.selectedMapping=i,t.selectedMappingFolder=e,t.selectedMappingTreeNode=n),t.selectedMapping&&!t.removeModelChangeListener}Core.$apply(t)},t.onUnmappedFieldChange=function(e){e.valid=e.toField?!0:!1,t.unmappedFieldsHasValid=t.unmappedFields.find(function(e){return e.valid})},t.fromFieldNames=function(e){var n=Core.pathGet(t.selectedMapping,["class_a","value"]);return d(n,e)},t.toFieldNames=function(e){var n=Core.pathGet(t.selectedMapping,["class_b","value"]);return d(n,e)},t.classNames=function(e){return!e||e.length<2?[]:Core.time("Time the query of classes",function(){m.info("searching for class names with filter '"+e+"'");var t=Dozer.findClassNames(r,e);return m.info("Found results: "+t.length),t})},p()}])}(Wiki||(Wiki={}));var Wiki;!function(e){e._module.controller("Wiki.EditController",["$scope","$location","$routeParams","fileExtensionTypeRegistry","wikiRepository",function(t,n,i,r,a){function o(){return n.path().startsWith("/wiki/create")}function s(){o()?c():(e.log.debug("Getting page, branch: ",t.branch," pageId: ",t.pageId," objectId: ",t.objectId),a.getPage(t.branch,t.pageId,t.objectId,l))}function l(n){var i=n.text;t.entity.source=i,t.fileName=t.pageId.split("/").last(),e.log.debug("file name: ",t.fileName),e.log.debug("file details: ",n),c(),Core.$apply(t)}function c(){f?(o()&&(t.fileName||(t.fileName=""+Core.getUUID()+".json")),t.sourceView=null,t.git=a.getPage(t.branch,f,t.objectId,function(t){u(e.parseJson(t.text))})):t.sourceView="plugins/wiki/html/sourceEdit.html"}function u(n){t.formDefinition=n,t.entity.source&&(t.formEntity=e.parseJson(t.entity.source)),t.sourceView="plugins/wiki/html/formEdit.html",Core.$apply(t)}function d(){var i=Core.trimLeading(t.viewLink(),"#");e.log.debug("going to view "+i),n.path(e.decodePath(i)),e.log.debug("location is now "+n.path())}function p(n){var i=t.commitMessage||"Updated page "+t.pageId,r=t.entity.source;t.formEntity&&(r=JSON.stringify(t.formEntity,null,"  ")),e.log.debug("Saving file, branch: ",t.branch," path: ",t.path),a.putPage(t.branch,n,r,i,function(i){e.onComplete(i),t.modified=!1,Core.notification("success","Saved "+n),d(),Core.$apply(t)})}e.initScope(t,i,n),t.entity={source:null};var h=e.fileFormat(t.pageId,r),f=null;(h&&"javascript"===h||o())&&(f=n.search().form);var g={mode:{name:h}};t.codeMirrorOptions=CodeEditor.createEditorSettings(g),t.modified=!1,t.isValid=function(){return t.fileName},t.canSave=function(){return!t.modified},t.$watch("entity.source",function(e,n){t.modified=e&&n&&e!==n},!0),e.log.debug("path: ",t.path),t.$watch("modified",function(t,n){e.log.debug("modified: ",t)}),t.viewLink=function(){return e.viewLink(t.branch,t.pageId,n,t.fileName)},t.cancel=function(){d()},t.save=function(){t.modified&&t.fileName&&p(t.pageId)},t.create=function(){var e=t.pageId+"/"+t.fileName;console.log("creating new file at "+e),p(e)},t.onSubmit=function(e,n){o()?t.create():t.save()},t.onCancel=function(e){setTimeout(function(){d(),Core.$apply(t)},50)},s()}])}(Wiki||(Wiki={}));var Wiki;!function(e){e._module.controller("Wiki.FormTableController",["$scope","$location","$routeParams","workspace","wikiRepository",function(t,n,i,r,a){function o(i,r){var a=e.startLink(t.branch),o=i?i._id||"":"";return Core.createHref(n,a+r+"/"+t.pageId+"/"+o)}function s(n){var i=[],r=e.parseJson(n);angular.forEach(r,function(e,t){e._id=t,i.push(e)}),t.list=i,Core.$apply(t)}function l(){var e=Core.pathGet(t,["gridOptions","filterOptions","filterText"])||"";t.git=a.jsonChildContents(t.pageId,"*.json",e,s)}function c(n){var i=n.text;if(i){t.formDefinition=e.parseJson(i);var r=[],a=t.formDefinition;angular.forEach(a.properties,function(e,t){if(t&&!Forms.isArrayOrNestedObject(e,a)){var n={field:t,displayName:e.description||t,visible:!0};r.push(n)}}),r.push(u),t.columnDefs=r,t.gridOptions.columnDefs=r,t.tableView="plugins/wiki/html/formTableDatatable.html"}}e.initScope(t,i,n),t.columnDefs=[],t.gridOptions={data:"list",displayFooter:!1,showFilter:!1,filterOptions:{filterText:""},columnDefs:t.columnDefs},t.viewLink=function(e){return o(e,"/view")},t.editLink=function(e){return o(e,"/edit")};var u={field:"_id",displayName:"Actions",cellTemplate:'<div class="ngCellText""><a ng-href="{{viewLink(row.entity)}}" class="btn">View</a> <a ng-href="{{editLink(row.entity)}}" class="btn">Edit</a></div>'};t.$watch("workspace.tree",function(){!t.git&&Git.getGitMBean(r)&&setTimeout(l,50)}),t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(l,50)});var d=n.search().form;d&&a.getPage(t.branch,d,t.objectId,c),l(),Core.$apply(t)}])}(Wiki||(Wiki={}));var Wiki;!function(e){e._module.controller("Wiki.GitPreferences",["$scope","localStorage","userDetails",function(e,t,n){var i={properties:{gitUserName:{type:"string",label:"Username",description:"The user name to be used when making changes to files with the source control system"},gitUserEmail:{type:"string",label:"Email",description:"The email address to use when making changes to files with the source control system"}}};e.entity=e,e.config=i,Core.initPreferenceScope(e,t,{gitUserName:{value:n.username||""},gitUserEmail:{value:""}})}])}(Wiki||(Wiki={}));var Wiki;!function(e){e._module.controller("Wiki.HistoryController",["$scope","$location","$routeParams","$templateCache","workspace","marked","fileExtensionTypeRegistry","wikiRepository","jolokia",function(t,n,i,r,a,o,s,l,c){function u(){var n="",i=0;t.git=l.history(t.branch,n,t.pageId,i,function(n){angular.forEach(n,function(n){var i=n.commitHashText||n.name;n.commitLink=e.startLink(t.branch)+"/commit/"+t.pageId+"/"+i}),t.logs=n,Core.$apply(t)}),e.loadBranches(c,l,t,d)}var d=e.isFMCContainer(a);e.initScope(t,i,n),t.selectedItems=[],t.dateFormat="EEE, MMM d, y : hh:mm:ss a",t.gridOptions={data:"logs",showFilter:!1,selectedItems:t.selectedItems,showSelectionCheckbox:!0,displaySelectionCheckbox:!0,filterOptions:{filterText:""},columnDefs:[{field:"commitHashText",displayName:"Change",cellTemplate:r.get("changeCellTemplate.html"),cellFilter:"",width:"*"},{field:"date",displayName:"Modified",cellFilter:"date: dateFormat",width:"**"},{field:"author",displayName:"Author",cellFilter:"",width:"**"},{field:"shortMessage",displayName:"Message",cellTemplate:'<div class="ngCellText" title="{{row.entity.shortMessage}}">{{row.entity.trimmedMessage}}</div>',cellFilter:"",width:"****"}]},t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(u,50)}),t.$watch("workspace.tree",function(){!t.git&&Git.getGitMBean(a)&&setTimeout(u,50)}),t.canRevert=function(){return 1===t.selectedItems.length&&t.selectedItems[0]!==t.logs[0]},t.revert=function(){if(t.selectedItems.length>0){var n=t.selectedItems[0].name;if(n){var i="Reverting file "+t.pageId+" to previous version "+n;l.revertTo(t.branch,n,t.pageId,i,function(n){e.onComplete(n),Core.notification("success","Successfully reverted "+t.pageId),u()})}t.selectedItems.splice(0,t.selectedItems.length)}},t.diff=function(){var i=" ",r=i;t.selectedItems.length>0&&(r=t.selectedItems[0].name||i);var a=i;if(t.selectedItems.length>1&&(a=t.selectedItems[1].name||i,t.selectedItems[0].date<t.selectedItems[1].date)){var o=a;a=r,r=o}var s=e.startLink(t.branch)+"/diff/"+t.pageId+"/"+r+"/"+a,l=Core.trimLeading(s,"#");n.path(l)},u()}])}(Wiki||(Wiki={}));var Wiki;!function(e){e._module.controller("Wiki.NavBarController",["$scope","$location","$routeParams","workspace","jolokia","wikiRepository","wikiBranchMenu",function(t,n,i,r,a,o,s){function l(e,t){var n=e.href;n&&(e.href=n.replace("wiki/view",t))}function c(){var r=e.startLink(t.branch),a=r+"/view";t.breadcrumbs=[{href:a,name:"root"}];var o=e.pageId(i,n),s=o?o.split("/"):[];angular.forEach(s,function(n){n.startsWith("/")||a.endsWith("/")||(a+="/"),a+=e.encodePath(n),n.isBlank()||t.breadcrumbs.push({href:a,name:n})});var c=n.path();if(t.breadcrumbs.length){var u=t.breadcrumbs[t.breadcrumbs.length-1];u.name=e.hideFileNameExtensions(u.name);var d=!1;if(angular.forEach(e.customViewLinks(t),function(e){!d&&c.startsWith(e)&&(l(t.breadcrumbs.last(),Core.trimLeading(e,"/")),d=!0)}),!d&&n.search().form){var p=t.breadcrumbs.last().name;p&&p.endsWith(".json")&&l(t.breadcrumbs[t.breadcrumbs.length-2],"wiki/formTable")}}var h=null;if(c.startsWith("/wiki/version")&&(h=(i.objectId||"").substring(0,6)||"Version",t.breadcrumbs.push({href:"#"+c,name:h})),c.startsWith("/wiki/diff")){var f=(i.objectId||"").substring(0,6),g=(i.baseObjectId||"").substring(0,6);h="Diff",f&&(h+=g?" "+f+" "+g:" "+f),t.breadcrumbs.push({href:"#"+c,name:h})}Core.$apply(t)}var u=e.isFMCContainer(r);e.initScope(t,i,n),t.branchMenuConfig={title:t.branch,items:[]},t.ViewMode=e.ViewMode,t.setViewMode=function(e){t.$emit("Wiki.SetViewMode",e)},s.applyMenuExtensions(t.branchMenuConfig.items),t.$watch("branches",function(i,r){i!==r&&i&&(t.branchMenuConfig.items=[],i.length>0&&t.branchMenuConfig.items.push({heading:u?"Versions":"Branches"}),i.sort().forEach(function(i){var r={title:i,icon:"",action:function(){}};i===t.branch?r.icon="fa fa-ok":r.action=function(){var r=e.branchLink(i,t.pageId,n);n.path(Core.toPath(r)),Core.$apply(t)},t.branchMenuConfig.items.push(r)}),s.applyMenuExtensions(t.branchMenuConfig.items))},!0),t.createLink=function(){var r=e.pageId(i,n);return e.createLink(t.branch,r,n,t)},t.startLink=e.startLink(t.branch),t.sourceLink=function(){var i=n.path(),r=null;return angular.forEach(e.customViewLinks(t),function(a){i.startsWith(a)&&(r=Core.createHref(n,e.startLink(t.branch)+"/view"+i.substring(a.length)))}),!r&&n.search().form?Core.createHref(n,"#"+i,["form"]):r},t.isActive=function(e){return e?e.endsWith(i.page):!1},t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(c,50)}),c()}])}(Wiki||(Wiki={}));var Wiki;!function(e){e.FileDropController=e._module.controller("Wiki.FileDropController",["$scope","FileUploader","$route","$timeout","userDetails",function(t,n,i,r,a){var o=e.gitRestURL(t.branch,t.pageId)+"/",s=t.uploader=new n({headers:{Authorization:Core.authHeaderValue(a)},autoUpload:!0,withCredentials:!0,method:"POST",url:o});t.doUpload=function(){s.uploadAll()},s.onWhenAddingFileFailed=function(t,n,i){e.log.debug("onWhenAddingFileFailed",t,n,i)},s.onAfterAddingFile=function(t){e.log.debug("onAfterAddingFile",t)},s.onAfterAddingAll=function(t){e.log.debug("onAfterAddingAll",t)},s.onBeforeUploadItem=function(t){t.fileSizeMB="file"in t?(t.file.size/1024/1024).toFixed(2):0,t.url=o,e.log.info("Loading files to "+o),e.log.debug("onBeforeUploadItem",t)},s.onProgressItem=function(t,n){e.log.debug("onProgressItem",t,n)},s.onProgressAll=function(t){e.log.debug("onProgressAll",t)},s.onSuccessItem=function(t,n,i,r){e.log.debug("onSuccessItem",t,n,i,r)},s.onErrorItem=function(t,n,i,r){e.log.debug("onErrorItem",t,n,i,r)},s.onCancelItem=function(t,n,i,r){e.log.debug("onCancelItem",t,n,i,r)},s.onCompleteItem=function(t,n,i,r){e.log.debug("onCompleteItem",t,n,i,r)},s.onCompleteAll=function(){e.log.debug("onCompleteAll"),s.clearQueue(),r(function(){e.log.info("Completed all uploads. Lets force a reload"),i.reload(),Core.$apply(t)},200)}}]),e.ViewController=e._module.controller("Wiki.ViewController",["$scope","$location","$routeParams","$route","$http","$timeout","workspace","marked","fileExtensionTypeRegistry","wikiRepository","$compile","$templateCache","jolokia","localStorage","$interpolate","$dialog",function(t,n,i,r,a,o,s,l,c,u,d,p,h,f,g,m){function v(){var e=n.path();return e&&(e.startsWith("/wiki/diff")||e.startsWith("/wiki/branch/"+t.branch+"/diff"))}function y(){if(v()){var n=i.baseObjectId;t.git=u.diff(t.objectId,n,t.pageId,x)}else t.git=u.getPage(t.branch,t.pageId,t.objectId,x);e.loadBranches(h,u,t,S)}function b(i,r){t.sourceView=null;var a=null;switch(a=v()?"diff":e.fileFormat(i,c)||t.format,e.log.debug("File format: ",a),a){case"image":var o="git/"+t.branch;e.log.debug("$scope: ",t),o=UrlHelpers.join(o,t.pageId);var s=g(p.get("imageTemplate.html"));t.html=s({imageURL:o});break;case"markdown":t.html=r?l(r):"";break;case"javascript":var d=null;d=n.search().form,t.source=r,t.form=d,d?(t.sourceView=null,t.git=u.getPage(t.branch,d,t.objectId,function(t){w(e.parseJson(t.text))})):t.sourceView="plugins/wiki/html/sourceView.html";break;default:t.html=null,t.source=r,t.sourceView="plugins/wiki/html/sourceView.html"}Core.$apply(t)}function w(n){t.formDefinition=n,t.source&&(t.formEntity=e.parseJson(t.source)),t.sourceView="plugins/wiki/html/formView.html",Core.$apply(t)}function x(n){var i=n.text;if(t.directory=n.directory,t.fileDetails=n,t.format=n&&n.format?n.format:e.fileFormat(t.pageId,c),t.codeMirrorOptions.mode.name=t.format,t.children=null,n.directory){var r=n.children.filter(function(e){return e.directory&&!e.name.has(".profile")}),a=n.children.filter(function(e){return e.directory&&e.name.has(".profile")}),o=n.children.filter(function(e){return!e.directory});r=r.sortBy(function(e){return e.name}),a=a.sortBy(function(e){return e.name}),o=o.sortBy(function(e){return e.name}).sortBy(function(e){return e.name.split(".").last()}),t.children=Array.create(r,a,o).map(function(n){return n.branch=t.branch,n.fileName=n.name,n.directory&&(n.fileName+=".zip"),n.downloadURL=e.gitRestURL(t.branch,n.path),n})}if(t.html=null,t.source=null,t.readMePath=null,t.isFile=!1,t.children){t.$broadcast("pane.open");var s=t.children.find(function(t){var n=(t.name||"").toLowerCase(),i=e.fileExtension(n);return n&&i&&(n.startsWith("readme.")||"readme"===n||n.startsWith("index.")||"index"===n)});if(s){var l=s.path;t.readMePath=l,u.getPage(t.branch,l,t.objectId,function(e){b(l,e.text)})}var d=t.children.find(function(t){var n=(t.name||"").toLowerCase(),i=e.fileExtension(n);return n&&i&&n.startsWith("kubernetes")&&"json"===i});d&&u.getPage(t.branch,d.path,void 0,function(e){if(e&&e.text){try{t.kubernetesJson=angular.fromJson(e.text)}catch(n){t.kubernetesJson={errorParsing:!0,error:n}}t.showAppHeader=!0,Core.$apply(t)}}),t.$broadcast("Wiki.ViewPage.Children",t.pageId,t.children)}else{t.$broadcast("pane.close");var l=t.pageId;b(l,i),t.isFile=!0}Core.$apply(t)}function k(n){t.operationCounter+=1;var i=t.operationCounter;n&&u.exists(t.branch,n,function(r){t.operationCounter===i&&(e.log.debug("checkFileExists for path "+n+" got result "+r),t.fileExists.exists=r?!0:!1,t.fileExists.name=r?r.name:null,Core.$apply(t))})}function C(){var e=t.rename.newFileName;return t.pageId&&e?t.pageId+"/"+e:null}t.name="WikiViewController";var S=e.isFMCContainer(s);e.initScope(t,i,n),SelectionHelpers.decorate(t),t.fabricTopLevel="fabric/profiles/",t.versionId=t.branch,t.paneTemplate="",t.profileId="",t.showProfileHeader=!1,t.showAppHeader=!1,t.operationCounter=1,t.renameDialog=null,t.moveDialog=null,t.deleteDialog=null,t.isFile=!1,t.rename={newFileName:""},t.move={moveFolder:""},t.ViewMode=e.ViewMode,Core.bindModelToSearchParam(t,n,"searchText","q",""),StorageHelpers.bindModelToLocalStorage({$scope:t,$location:n,localStorage:f,modelName:"mode",paramName:"wikiViewMode",initialValue:0,to:Core.numberToString,from:Core.parseIntValue}),Core.reloadWhenParametersChange(r,t,n,["wikiViewMode"]),t.gridOptions={data:"children",displayFooter:!1,selectedItems:[],showSelectionCheckbox:!0,enableSorting:!1,useExternalSorting:!0,columnDefs:[{field:"name",displayName:"Name",cellTemplate:p.get("fileCellTemplate.html"),headerCellTemplate:p.get("fileColumnTemplate.html")}]},t.$on("Wiki.SetViewMode",function(n,i){switch(t.mode=i,i){case 0:e.log.debug("List view mode");break;case 1:e.log.debug("Icon view mode");break;default:t.mode=0,e.log.debug("Defaulting to list view mode")}}),t.childActions=[];var _=Core.throttled(y,1e3);t.marked=function(e){return e?l(e):""},t.$on("wikiBranchesUpdated",function(){y()}),t.createDashboardLink=function(){var e="/wiki/branch/:branch/view/*page",t=i.page,n=t?t.split("/").last():null,r=angular.toJson({size_x:2,size_y:2}),a="#/dashboard/add?tab=dashboard&href="+encodeURIComponent(e)+"&size="+encodeURIComponent(r)+"&routeParams="+encodeURIComponent(angular.toJson(i));return n&&(a+="&title="+encodeURIComponent(n)),a},t.displayClass=function(){return t.children&&0!==t.children.length?"span9":""},t.parentLink=function(){var i=e.startLink(t.branch),r=i+"/view",a=t.pageId.split("/"),o="/"+a.first(a.length-1).join("/");return Core.createHref(n,r+o,[])},t.childLink=function(i){var r=e.startLink(t.branch),a=r+"/view",o="",s=e.encodePath(i.path);if(i.directory){var l=s+".form",c=t.children;if(c){var u=c.find(function(e){return e.path===l});u&&(a=r+"/formTable",o="?form="+l)}}else{var d=i.xmlNamespaces;d&&d.length&&(d.any(function(t){return e.camelNamespaces.any(t)})?a=r+"/camel/canvas":d.any(function(t){return e.dozerNamespaces.any(t)})?a=r+"/dozer/mappings":e.log.debug("child "+s+" has namespaces "+d)),i.path.endsWith(".form")?o="?form=/":e.isIndexPage(i.path)&&(a=r+"/book")}return Core.createHref(n,a+s+o,["form"])},t.fileName=function(t){return e.hideFileNameExtensions(t.displayName||t.name)},t.fileClass=function(e){return e.name.has(".profile")?"green":""},t.fileIconHtml=function(t){return e.fileIconHtml(t)},t.format=e.fileFormat(t.pageId,c);var T={readOnly:!0,mode:{name:t.format}};t.codeMirrorOptions=CodeEditor.createEditorSettings(T),t.editLink=function(){var i=t.directory?t.readMePath:t.pageId;return i?e.editLink(t.branch,i,n):null},t.branchLink=function(i){return i?e.branchLink(i,t.pageId,n):null},t.historyLink="#/wiki"+(t.branch?"/branch/"+t.branch:"")+"/history/"+t.pageId,t.$watch("workspace.tree",function(){!t.git&&Git.getGitMBean(s)&&setTimeout(_,50)}),t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(_,50)}),t.openDeleteDialog=function(){t.gridOptions.selectedItems.length?(t.selectedFileHtml="<ul>"+t.gridOptions.selectedItems.map(function(e){return"<li>"+e.name+"</li>"}).sort().join("")+"</ul>",t.deleteWarning=t.gridOptions.selectedItems.find(function(e){return e.name.endsWith(".profile")})?"You are about to delete document(s) which represent Fabric8 profile(s). This really can't be undone! Wiki operations are low level and may lead to non-functional state of Fabric.":null,t.deleteDialog=e.getDeleteDialog(m,{callbacks:function(){return t.deleteAndCloseDialog},selectedFileHtml:function(){return t.selectedFileHtml},warning:function(){return t.deleteWarning}}),t.deleteDialog.open()):e.log.debug("No items selected right now! "+t.gridOptions.selectedItems)},t.deleteAndCloseDialog=function(){var n=t.gridOptions.selectedItems,i=n.length;e.log.debug("Deleting selection: "+n),angular.forEach(n,function(n,r){var a=t.pageId+"/"+n.name;e.log.debug("About to delete "+a),t.git=u.removePage(t.branch,a,null,function(e){if(r+1===i){t.gridOptions.selectedItems.splice(0,i);var n=Core.maybePlural(i,"document");Core.notification("success","Deleted "+n),Core.$apply(t),y()}})}),t.deleteDialog.close()},t.$watch("rename.newFileName",function(){var e=C();t.originalRenameFilePath===e?t.fileExists={exists:!1,name:null}:k(e)}),t.renameAndCloseDialog=function(){if(t.gridOptions.selectedItems.length){var n=t.gridOptions.selectedItems[0],i=C();if(n&&i){var r=n.name,a=e.fileName(i),o=t.pageId+"/"+r;e.log.debug("About to rename file "+o+" to "+i),
t.git=u.rename(t.branch,o,i,null,function(e){Core.notification("success","Renamed file to  "+a),t.gridOptions.selectedItems.splice(0,1),t.renameDialog.close(),Core.$apply(t),y()})}}t.renameDialog.close()},t.openRenameDialog=function(){var n=null;if(t.gridOptions.selectedItems.length){var i=t.gridOptions.selectedItems[0];n=i.name}n?(t.rename.newFileName=n,t.originalRenameFilePath=C(),t.renameDialog=e.getRenameDialog(m,{rename:function(){return t.rename},fileExists:function(){return t.fileExists},fileName:function(){return t.fileName},callbacks:function(){return t.renameAndCloseDialog}}),t.renameDialog.open(),o(function(){$("#renameFileName").focus()},50)):e.log.debug("No items selected right now! "+t.gridOptions.selectedItems)},t.moveAndCloseDialog=function(){var n=t.gridOptions.selectedItems,i=n.length,r=t.move.moveFolder,a=t.pageId;r&&i&&r!==a&&(e.log.debug("Moving "+i+" file(s) to "+r),angular.forEach(n,function(n,o){var s=a+"/"+n.name,l=r+"/"+n.name;e.log.debug("About to move "+s+" to "+l),t.git=u.rename(t.branch,s,l,null,function(e){if(o+1===i){t.gridOptions.selectedItems.splice(0,i);var n=Core.maybePlural(i,"document");Core.notification("success","Moved "+n+" to "+l),t.moveDialog.close(),Core.$apply(t),y()}})})),t.moveDialog.close()},t.folderNames=function(e){return u.completePath(t.branch,e,!0,null)},t.openMoveDialog=function(){t.gridOptions.selectedItems.length?(t.move.moveFolder=t.pageId,t.moveDialog=e.getMoveDialog(m,{move:function(){return t.move},folderNames:function(){return t.folderNames},callbacks:function(){return t.moveAndCloseDialog}}),t.moveDialog.open(),o(function(){$("#moveFolder").focus()},50)):e.log.debug("No items selected right now! "+t.gridOptions.selectedItems)},setTimeout(_,50),t.updateView=y,t.getContents=function(n,i){var r=n;if(t.directory)r=t.pageId+"/"+n;else{var a=t.pageId.split("/");a=a.remove(a.last()),a.push(n),r=a.join("/")}e.log.debug("pageId: ",t.pageId),e.log.debug("branch: ",t.branch),e.log.debug("filename: ",n),e.log.debug("using pageId: ",r),u.getPage(t.branch,r,void 0,function(e){i(e.text)})}}])}(Wiki||(Wiki={}));var Wiki;!function(e){function t(e,t){return e.dialog({resolve:t,templateUrl:"plugins/wiki/html/modal/renameDialog.html",controller:["$scope","dialog","callbacks","rename","fileExists","fileName",function(e,t,n,i,r,a){e.rename=i,e.fileExists=r,e.fileName=a,e.close=function(e){t.close()},e.renameAndCloseDialog=n}]})}function n(e,t){return e.dialog({resolve:t,templateUrl:"plugins/wiki/html/modal/moveDialog.html",controller:["$scope","dialog","callbacks","move","folderNames",function(e,t,n,i,r){e.move=i,e.folderNames=r,e.close=function(e){t.close()},e.moveAndCloseDialog=n}]})}function i(e,t){return e.dialog({resolve:t,templateUrl:"plugins/wiki/html/modal/deleteDialog.html",controller:["$scope","dialog","callbacks","selectedFileHtml","warning",function(e,t,n,i,r){e.selectedFileHtml=i,e.close=function(e){t.close()},e.deleteAndCloseDialog=n,e.warning=r}]})}e.getRenameDialog=t,e.getMoveDialog=n,e.getDeleteDialog=i}(Wiki||(Wiki={}));var Wiki;!function(e){e._module.directive("wikiHrefAdjuster",["$location",function(t){return{restrict:"A",link:function(n,i,r){i.bind("DOMNodeInserted",function(r){var a=i.find("a");angular.forEach(a,function(i){if(!i.hasAttribute("no-adjust")){i=$(i);var r=(i.attr("href")||"").trim();if(r){var a=i.attr("file-extension"),o=e.adjustHref(n,t,r,a);o&&i.attr("href",o)}}});var o=i.find("img");angular.forEach(o,function(e){if(!e.hasAttribute("no-adjust")){e=$(e);var t=(e.attr("src")||"").trim();t&&t.startsWith("/")&&(t=Core.url(t),e.attr("src",t),e.attr("no-adjust","true"))}})})}}}]),e._module.directive("wikiTitleLinker",["$location",function(e){return{restrict:"A",link:function(t,n,i){function r(e){if(e){var t=e.offset();if(t)return t.top}return 0}function a(){var t=e.search().hash;return o(t)}function o(t){var i=!1,t=e.search().hash;if(t){var a='a[name="'+t+'"]',o=n.find(a);if(o&&o.length){var s=1,l=r($(n)),c=r(o)-l;0>c&&(c=0),$("body,html").animate({scrollTop:c},s),i=!0}}return i}function s(t){var i=n.find("h1,h2,h3,h4,h5,h6,h7"),r=!1;angular.forEach(i,function(t){var n=$(t),i=n.parent("a");if(!i||!i.length){var a=n.text();if(a){var s=a.replace(/ /g,"-"),l="#"+e.path()+"?hash="+s,c=Core.createHref(e,l,["hash"]),u=$('<a name="'+s+'" href="'+c+'" ng-click="onLinkClick()"></a>');u.on("click",function(){setTimeout(function(){o(s)},50)}),u.insertBefore(n),n.detach(),u.append(n),r=!0}}}),r&&!c&&setTimeout(function(){a()&&(c=!0)},50)}function l(e){n.unbind("DOMNodeInserted",l),s(e),n.bind("DOMNodeInserted",l)}var c=!1;n.bind("DOMNodeInserted",l)}}}])}(Wiki||(Wiki={}));var Wiki;!function(e){var t=function(){function e(e){this.factoryMethod=e,this.directoryPrefix=""}return e.prototype.getRepositoryLabel=function(e,t){this.git().getRepositoryLabel(e,t)},e.prototype.exists=function(e,t,n){var i=this.getPath(t);return this.git().exists(e,i,n)},e.prototype.completePath=function(e,t,n,i){return this.git().completePath(e,t,n,i)},e.prototype.getPage=function(e,t,n,i){var r=this,a=this.git();if(t=t||"/",a)if(n){var o=this.getLogPath(t);a.getContent(n,o,function(e){var t={text:e,directory:!1};i(t)})}else{var s=this.getPath(t);a.read(e,s,function(e){var t=e.children;angular.forEach(t,function(e){var t=e.path;if(t){var n="/"+r.directoryPrefix;t.startsWith(n)&&(t="/"+t.substring(n.length),e.path=t)}}),i(e)})}return a},e.prototype.diff=function(e,t,n,i){var r=this.getLogPath(n),a=this.git();return a&&a.diff(e,t,r,function(e){var t={text:e,format:"diff",directory:!1};i(t)}),a},e.prototype.commitInfo=function(e,t){this.git().commitInfo(e,t)},e.prototype.commitTree=function(e,t){this.git().commitTree(e,t)},e.prototype.putPage=function(e,t,n,i,r){var a=this.getPath(t);this.git().write(e,a,i,n,r)},e.prototype.putPageBase64=function(e,t,n,i,r){var a=this.getPath(t);this.git().writeBase64(e,a,i,n,r)},e.prototype.createDirectory=function(e,t,n,i){var r=this.getPath(t);this.git().createDirectory(e,r,n,i)},e.prototype.revertTo=function(e,t,n,i,r){var a=this.getLogPath(n);this.git().revertTo(e,t,a,i,r)},e.prototype.rename=function(e,t,n,i,r){var a=this.getPath(t),o=this.getPath(n);i||(i="Renaming page "+t+" to "+n),this.git().rename(e,a,o,i,r)},e.prototype.removePage=function(e,t,n,i){var r=this.getPath(t);n||(n="Removing page "+t),this.git().remove(e,r,n,i)},e.prototype.getPath=function(e){var t=this.directoryPrefix;return t?t+e:e},e.prototype.getLogPath=function(e){return Core.trimLeading(this.getPath(e),"/")},e.prototype.history=function(e,t,n,i,r){var a=this.getLogPath(n),o=this.git();return o&&o.history(e,t,a,i,r),o},e.prototype.getContent=function(e,t,n){var i=this.getLogPath(t),r=this.git();return r&&r.getContent(e,i,n),r},e.prototype.branches=function(e){var t=this.git();return t&&t.branches(e),t},e.prototype.jsonChildContents=function(e,t,n,i){var r=this.getLogPath(e),a=this.git();return a&&a.readJsonChildContent(r,t,n,i),a},e.prototype.git=function(){var e=this.factoryMethod();return e||console.log("No repository yet! TODO we should use a local impl!"),e},e}();e.GitWikiRepository=t}(Wiki||(Wiki={}));var Wiki;!function(e){e.TopLevelController=e._module.controller("Wiki.TopLevelController",["$scope","workspace","$route","$routeParams",function(e,t,n,i){}])}(Wiki||(Wiki={})),angular.module("hawtio-wiki-templates",[]).run(["$templateCache",function(e){e.put("plugins/docker-registry/html/layoutDockerRegistry.html",'<div class="row" ng-controller="DockerRegistry.TopLevel">\n  <div class="col-md-12">\n    <div ng-view></div>\n  </div>\n</div>\n'),e.put("plugins/docker-registry/html/list.html",'<div class="row" ng-controller="DockerRegistry.ListController">\n  <script type="text/ng-template" id="tagsTemplate.html">\n    <ul class="zebra-list">\n      <li ng-repeat="(name, imageId) in row.entity.tags" ng-controller="DockerRegistry.TagController">\n        <a href="" ng-click="selectImage(imageId)">{{name}}</a>\n      </li>\n    </ul>\n  </script>\n  <p></p>\n  <div class="row">\n    <div class="col-md-12">\n      <span ng-hide="selectedImage">\n        <hawtio-filter ng-model="tableConfig.filterOptions.filterText"\n                       css-class="input-xxlarge"\n                       placeholder="Filter images..."\n                       save-as="docker-registry-image-list-text-filter"></hawtio-filter>\n      </span>\n      <button class="pull-right btn btn-danger"\n              ng-disabled="tableConfig.selectedItems.length == 0"\n              ng-hide="selectedImage"\n              ng-click="deletePrompt(tableConfig.selectedItems)"><i class="fa fa-remove"></i> Delete</button>\n      <span class="pull-right">&nbsp;</span>\n      <button class="pull-right btn btn-primary" \n              ng-show="selectedImage"\n              ng-click="selectedImage = undefined"><i class="fa fa-list"></i></button>\n    </div>\n  </div>\n  <p></p>\n  <div class="row" ng-show="!fetched">\n    <div class="col-md-12">\n      <p class="text-center"><i class="fa fa-spinner icon-spin"></i></p>\n    </div>\n  </div>\n  <div class="row" ng-show="fetched && !selectedImage && imageRepositories.length === 0">\n    <div class="col-md-12">\n      <p class="alert alert-info">No images are stored in this repository</p>\n    </div>\n  </div>\n  <div class="row" ng-show="fetched && !selectedImage && imageRepositories.length">\n    <div class="col-md-12">\n      <table class="table table-condensed table-striped"\n             hawtio-simple-table="tableConfig"></table>\n    </div>\n  </div>\n  <div class="row" ng-show="fetched && selectedImage">\n    <div class="col-md-12">\n      <div hawtio-object="selectedImage"></div>\n    </div>\n  </div>\n</div>\n\n'),e.put("plugins/maven/html/advancedSearch.html",'<div ng-controller="Maven.SearchController">\n  <div style="height: 8em;" ng-hide="artifacts.length > 0"></div>\n\n  <div class="row">\n    <div class="control-group">\n      <div class="controls inline-block" style="white-space: nowrap;">\n        <form class="form-horizontal">\n          <div class="control-group">\n            <label class="control-label" for="searchGroupId">Maven coordinates:</label>\n\n            <div class="controls">\n              <input type="text" id="searchGroupId" ng-model="form.searchGroup" placeholder="Group ID">\n              <input type="text" id="searchArtifactId" ng-model="form.searchArtifact" placeholder="Artifact ID">\n              <input type="text" id="searchVersion" ng-model="form.searchVersion" placeholder="Version">\n            </div>\n          </div>\n          <div class="control-group">\n            <label class="control-label" for="searchPackaging">Packaging:</label>\n\n            <div class="controls">\n              <input type="text" id="searchPackaging" ng-model="form.searchPackaging" placeholder="Packaging">\n              <input type="text" id="searchClassifier" ng-model="form.searchClassifier" placeholder="Classifier">\n            </div>\n          </div>\n          <div class="control-group">\n            <label class="control-label" for="searchClassName">Class name:</label>\n\n            <div class="controls">\n              <input type="text" id="searchClassName" class="input-xxlarge" ng-model="form.searchClassName" placeholder="Class name">\n            </div>\n          </div>\n          <div class="control-group">\n            <div class="controls">\n              <button type="submit" class="btn" ng-disabled="!hasAdvancedSearch(form)" ng-click="doSearch()"\n                      title="Search the maven repositories for artifacts containing this text" data-placement="bottom">\n                <i class="fa fa-search"></i> Search\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n\n  <ng-include src="\'plugins/maven/html/searchResults.html\'"></ng-include>\n</div>\n'),e.put("plugins/maven/html/artifact.html",'<div class="controller-section" ng-controller="Maven.ArtifactController">\n  <div class="row">\n    <div class="pull-right">\n      <a class="btn" href="{{versionsLink(row)}}">Versions</a>\n      <a class="btn" href="{{dependenciesLink(row)}}" ng-show="{{hasDependencyMBean()}}">Dependencies</a>\n      <a class="btn" target="javadoc" href="{{javadocLink(row)}}">JavaDoc</a>\n      <a class="btn" target="source" href="{{sourceLink(row)}}">Source</a>\n    </div>\n    <div title="Name" class="title">\n      <p>\n        {{row.name}}\n      </p>\n\n      <p>\n        {{row.description}}\n      </p>\n    </div>\n  </div>\n  <div class="row">\n    <div title="Description" class="title">\n      <i class="expandable-indicator"></i> pom.xml\n    </div>\n    <ng-include src="\'plugins/maven/html/pom.html\'"></ng-include>\n  </div>\n</div>\n</div>\n'),e.put("plugins/maven/html/dependencies.html",'<div class="controller-section" ng-controller="Maven.DependenciesController">\n  <div class="pull-right">\n    <button class="btn" ng-click="viewDetails()" ng-disabled="!validSelection()">View details</button>\n  </div>\n  <div class="row">\n    <div hawtio-tree="dependencyTree" onselect="onSelectNode" onRoot="onRootNode" activateNodes="dependencyActivations" hideRoot="true" ></div>\n  </div>\n</div>\n'),e.put("plugins/maven/html/layoutMaven.html",'<ul class="nav nav-tabs" ng-controller="Core.NavBarController">\n  <li ng-class=\'{active : isActive("#/maven/search")}\'>\n    <a ng-href="{{link(\'#/maven/search\')}}">Search</a>\n  </li>\n  <li ng-class=\'{active : isActive("#/maven/advancedSearch")}\'>\n    <a ng-href="{{link(\'#/maven/advancedSearch\')}}">Advanced Search</a>\n  </li>\n</ul>\n<div class="row">\n  <div ng-view></div>\n</div>\n\n\n'),e.put("plugins/maven/html/pom.html",'<div class="expandable-body well editor-autoresize" ng-controller="Maven.PomXmlController">\n  <div class="CodeMirror cm-s-default CodeMirror-wrap">\n    <div class="CodeMirror-lines">\n<pre>\n<span class="cm-tag">&lt;dependency&gt;</span>\n  <span class="cm-tag">&lt;groupId&gt;</span><span class="cm-string">{{row.groupId}}</span><span class="cm-tag">&lt;/groupId&gt;</span>\n  <span class="cm-tag">&lt;artifactId&gt;</span><span class="cm-string">{{row.artifactId}}</span><span class="cm-tag">&lt;/artifactId&gt;</span>\n  <span class="cm-tag">&lt;version&gt;</span><span class="cm-string">{{row.version}}</span><span class="cm-tag">&lt;/version&gt;</span>\n<span class="cm-tag">&lt;/dependency&gt;</span>\n</pre>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/maven/html/search.html",'<div ng-controller="Maven.SearchController">\n  <div style="height: 8em;" ng-hide="artifacts.length > 0"></div>\n  <div class="row">\n    <form class="form-inline no-bottom-margin">\n      <div class="control-group" style="text-align: center;">\n        <div class="controls inline-block" style="white-space: nowrap;">\n          <input class="search-query col-md-10" type="text" id="mavenSearch" ng-model="form.searchText"\n                 placeholder="Search maven repositories...">\n\n          <select ng-model="form.artifactType">\n          	<option value="">any artifact</option>\n            <!-- camel component does not work\n            <option value="properties/camelComponent">camel component</option>\n            -->\n            <option value="className">class name</option>\n            <option value="ear">ear</option>\n          	<option value="xml/features">karaf feature</option>\n          	<option value="maven-archetype/">maven archetype</option>\n          	<option value="war">war</option>\n            <option value="wsdl">wsdl</option>\n          	<option value="xsd">xsd</option>\n          </select>\n\n          <button type="submit" class="btn" ng-disabled="!form.searchText && !form.artifactType" ng-click="doSearch()"\n                  title="Search the maven repositories for artifacts containing this text" data-placement="bottom">\n            <i class="fa fa-search"></i> Search\n          </button>\n        </div>\n      </div>\n    </form>\n  </div>\n\n  <ng-include src="\'plugins/maven/html/searchResults.html\'"></ng-include>\n</div>\n'),e.put("plugins/maven/html/searchResults.html",'<div ng-show="tooManyResponses != \'\' && done">\n  <p class="alert alert-warning">{{tooManyResponses}}</p>\n</div>\n<div ng-show="artifacts.length > 0" class="controller-section">\n  <div class="gridStyle" hawtio-datatable="gridOptions"></div>\n</div>\n<div ng-show="inProgress" class="controller-section centered">\n  <p>Searching in progress...</p>\n</div>\n<div ng-show="artifacts.length == 0 && done" class="controller-section centered">\n  <p>No results found</p>\n</div>\n\n<script type="text/ng-template" id="artifactDetailTemplate">\n  <div class="pull-right">\n    <a class="btn" href="{{versionsLink(row)}}">Versions</a>\n    <a class="btn" href="{{dependenciesLink(row)}}" ng-show="{{hasDependencyMBean()}}">Dependencies</a>\n    <a class="btn" target="javadoc" href="{{javadocLink(row)}}">JavaDoc</a>\n    <a class="btn" target="source" href="{{sourceLink(row)}}">Source</a>\n  </div>\n  <div title="Name" class="title">\n    <p>\n      {{row.name}}\n    </p>\n\n    <p>\n      {{row.description}}\n    </p>\n  </div>\n  <div class="expandable opened">\n    <div title="Description" class="title">\n      <i class="expandable-indicator"></i> pom.xml\n    </div>\n    <ng-include src="\'plugins/maven/html/pom.html\'"></ng-include>\n  </div>\n</script>\n'),e.put("plugins/maven/html/test.html",'<div ng-controller="Maven.TestController">\n\n  <div class="row">\n\n    <script type="text/ng-template" id="mavenCompletionTemplate">\n      <div>\n        <p>Maven completion</p>\n        <p>Model: {{someUri}}</p>\n        <p>uriParts</p>\n        <ol>\n          <li ng-repeat="part in uriParts">{{part}}</li>\n        </ol>\n        <input class="input-xlarge" type="text" ng-model="someUri" typeahead="name for name in doCompletionMaven($viewValue) | filter:$viewValue" typeahead-wait-ms="200">\n      </div>\n    </script>\n    <div hawtio-editor="mavenCompletion" mode="html"></div>\n    <div compile="mavenCompletion"></div>\n\n    <!--\n    <div class="col-md-3">\n      <p>Fabric completion</p>\n      <p>Model: {{someUri2}}</p>\n      <p>uriParts</p>\n      <ol>\n        <li ng-repeat="part in uriParts2">{{part}}</li>\n      </ol>\n      <input class="input-xlarge" type="text" ng-model="someUri2" typeahead="name for name in doCompletionFabric($viewValue) | filter:$viewValue" typeahead-wait-ms="200">\n    </div>\n    -->\n  </div>\n\n\n</div>\n'),e.put("plugins/maven/html/versions.html",'<div class="controller-section" ng-controller="Maven.VersionsController">\n  <div class="row">\n    <form class="form-horizontal no-bottom-margin">\n      <fieldset>\n        <div class="control-group">\n          <input class="search-query col-md-12" type="text" ng-model="search"\n                 placeholder="Filter versions">\n        </div>\n      </fieldset>\n    </form>\n  </div>\n  <div class="row">\n    <ng-include src="\'plugins/maven/html/searchResults.html\'"></ng-include>\n  </div>\n</div>\n'),e.put("plugins/maven/html/view.html",'<div ng-controller="Maven.ViewController">\n\n</div>'),e.put("plugins/wiki/exemplar/document.html","<h2>This is a title</h2>\n\n<p>Here are some notes</p>"),e.put("plugins/wiki/html/commit.html",'<link rel="stylesheet" href="plugins/wiki/css/wiki.css" type="text/css"/>\n\n<div ng-controller="Wiki.CommitController">\n  <script type="text/ng-template" id="fileCellTemplate.html">\n    <div class="ngCellText">\n      <a ng-href="{{row.entity.fileLink}}" class="file-name"\n         title="{{row.entity.title}}">\n        <span class="file-icon" ng-class="row.entity.fileClass" ng-bind-html-unsafe="row.entity.fileIconHtml"></span>\n        <span ng-class="row.entity.changeClass">{{row.entity.path}}</span>\n      </a>\n    </div>\n  </script>\n\n  <div ng-hide="inDashboard" class="logbar" ng-controller="Wiki.NavBarController">\n    <div class="wiki logbar-container">\n      <ul class="nav nav-tabs">\n        <li ng-show="branches.length || branch" class="dropdown">\n          <a href="#" class="dropdown-toggle" data-toggle="dropdown"\n             title="The branch to view">\n            {{branch || \'branch\'}}\n            <span class="caret"></span>\n          </a>\n          <ul class="dropdown-menu">\n            <li ng-repeat="otherBranch in branches">\n              <a ng-href="{{branchLink(otherBranch)}}{{hash}}"\n                 ng-hide="otherBranch === branch"\n                 title="Switch to the {{otherBranch}} branch"\n                 data-placement="bottom">\n                {{otherBranch}}</a>\n            </li>\n          </ul>\n        </li>\n        <li ng-repeat="link in breadcrumbs">\n          <a ng-href="{{link.href}}{{hash}}">{{link.name}}</a>\n        </li>\n        <li>\n          <a ng-href="{{historyLink}}{{hash}}">History</a>\n        </li>\n        <li title="{{commitInfo.shortMessage}}" class="active">\n          <a class="commit-id">{{commitInfo.commitHashText}}</a>\n        </li>\n        <li class="pull-right">\n        <span class="commit-author">\n          <i class="fa fa-user"></i> {{commitInfo.author}}\n        </span>\n        </li>\n        <li class="pull-right">\n          <span class="commit-date">{{commitInfo.date | date: dateFormat}}</span>\n        </li>\n      </ul>\n    </div>\n  </div>\n\n  <div class="wiki-fixed row">\n    <div class="commit-message" title="{{commitInfo.shortMessage}}">\n      {{commitInfo.trimmedMessage}}\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-md-4">\n      <div class="control-group">\n        <button class="btn" ng-disabled="!selectedItems.length" ng-click="diff()"\n                title="Compare the selected versions of the files to see how they differ"><i class="fa fa-exchange"></i>\n          Compare\n        </button>\n\n        <!--\n                <button class="btn" ng-disabled="!canRevert()" ng-click="revert()"\n                        title="Revert to this version of the file"><i class="fa fa-exchange"></i> Revert\n                </button>\n        -->\n      </div>\n    </div>\n    <div class="col-md-8">\n      <div class="control-group">\n        <input class="col-md-12 search-query" type="text" ng-model="gridOptions.filterOptions.filterText"\n               placeholder="search">\n      </div>\n    </div>\n  </div>\n\n  <div class="form-horizontal">\n    <div class="row">\n      <table class="table-condensed table-striped" hawtio-simple-table="gridOptions"></table>\n    </div>\n  </div>\n\n</div>\n'),e.put("plugins/wiki/html/configuration.html",'<div ng-hide="inDashboard" class="logbar" ng-controller="Wiki.NavBarController">\n  <div class="wiki logbar-container">\n    <ul class="nav nav-tabs">\n      <li ng-show="branches.length || branch" class="dropdown">\n        <a href="#" class="dropdown-toggle" data-toggle="dropdown"\n           title="The branch to view">\n          {{branch || \'branch\'}}\n          <span class="caret"></span>\n        </a>\n        <ul class="dropdown-menu">\n          <li ng-repeat="otherBranch in branches">\n            <a ng-href="{{branchLink(otherBranch)}}{{hash}}"\n               ng-hide="otherBranch === branch"\n               title="Switch to the {{otherBranch}} branch"\n               data-placement="bottom">\n              {{otherBranch}}</a>\n          </li>\n        </ul>\n      </li>\n      <li ng-repeat="link in breadcrumbs">\n        <a ng-href="{{link.href}}{{hash}}">{{link.name}}</a>\n      </li>\n      <li class="ng-scope">\n        <a ng-href="{{startLink}}/configurations/{{pageId}}">configuration</a>\n      </li>\n      <li class="ng-scope active">\n        <a>pid</a>\n      </li>\n    </ul>\n  </div>\n</div>\n<div class="wiki-fixed">\n  <div class="controller-section" ng-controller="Osgi.PidController">\n    <div ng-include src="\'plugins/osgi/html/pid-details.html\'"></div>\n  </div>\n</div>\n'),e.put("plugins/wiki/html/configurations.html",'<div ng-hide="inDashboard" class="logbar" ng-controller="Wiki.NavBarController">\n  <div class="wiki logbar-container">\n    <ul class="nav nav-tabs">\n      <li ng-show="branches.length || branch" class="dropdown">\n        <a href="#" class="dropdown-toggle" data-toggle="dropdown"\n           title="The branch to view">\n          {{branch || \'branch\'}}\n          <span class="caret"></span>\n        </a>\n        <ul class="dropdown-menu">\n          <li ng-repeat="otherBranch in branches">\n            <a ng-href="{{branchLink(otherBranch)}}{{hash}}"\n               ng-hide="otherBranch === branch"\n               title="Switch to the {{otherBranch}} branch"\n               data-placement="bottom">\n              {{otherBranch}}</a>\n          </li>\n        </ul>\n      </li>\n      <li ng-repeat="link in breadcrumbs">\n        <a ng-href="{{link.href}}{{hash}}">{{link.name}}</a>\n      </li>\n      <li class="ng-scope active">\n        <a>configuration</a>\n      </li>\n    </ul>\n  </div>\n</div>\n\n<div class="wiki-fixed">\n  <div ng-include src="\'plugins/osgi/html/configurations.html\'"></div>\n</div>\n'),e.put("plugins/wiki/html/create.html",'<div class="row" ng-controller="Wiki.CreateController">\n  <div class="row">\n    <div class="col-md-12">\n      <form name="createForm"\n            novalidate\n            class="form-horizontal no-bottom-margin"\n            ng-submit="addAndCloseDialog(newDocumentName)">\n        <fieldset>\n\n          <div class="row">\n            <div class="col-md-12">\n              <h4>Create Document</h4>\n            </div>\n          </div>\n\n          <div class="row">\n            <div class="col-md-2">\n            </div>\n            <div class="col-md-4">\n              <div hawtio-tree="createDocumentTree"\n                     hideRoot="true"\n                     onSelect="onCreateDocumentSelect"\n                     activateNodes="createDocumentTreeActivations"></div>\n            </div>\n            <div class="col-md-4">\n              <div class="row">\n                <div class="well">\n                  {{selectedCreateDocumentTemplate.tooltip}}\n                </div>\n              </div>\n              <div class="row">\n                <div ng-show="fileExists.exists" class="alert">\n                  Please choose a different name as <b>{{fileExists.name}}</b> already exists\n                </div>\n                <div ng-show="fileExtensionInvalid" class="alert">\n                  {{fileExtensionInvalid}}\n                </div>\n                <div ng-show="!createForm.$valid" class="alert">\n                  {{selectedCreateDocumentTemplateInvalid}}\n                </div>\n                <div class="control-group">\n                  <label class="control-label" for="fileName">Name: </label>\n                  <div class="controls">\n                    <input name="fileName" id="fileName"\n                           class="input-xlarge"\n                           type="text"\n                           ng-pattern="selectedCreateDocumentTemplateRegex"\n                           ng-model="newDocumentName"\n                           placeholder="{{selectedCreateDocumentTemplate.exemplar}}">\n                  </div>\n                </div>\n              </div>\n              <div class="row">\n                <div simple-form data="formSchema" entity="formData" onSubmit="generate()"></div>\n              </div>\n              <div class="row">\n                <input class="btn btn-primary add pull-right"\n                       type="submit"\n                       ng-disabled="!selectedCreateDocumentTemplate.exemplar || !createForm.$valid"\n                       value="Create">\n                <span class="pull-right">&nbsp;</span>\n                <button class="btn btn-warning cancel pull-right" type="button" ng-click="cancel()">Cancel</button>\n              </div>\n            </div>\n            <div class="col-md-2">\n            </div>\n          </div>\n        </fieldset>\n      </form>\n    </div>\n  </div>\n\n</div>\n'),e.put("plugins/wiki/html/createPage.html",'<div ng-controller="Wiki.EditController">\n  <div class="logbar" ng-controller="Wiki.NavBarController">\n\n    <div class="wiki logbar-container">\n\n      <ul class="connected nav nav-tabs">\n        <li ng-repeat="link in breadcrumbs" ng-class=\'{active : isActive(link.href)}\'>\n          <a ng-href="{{link.href}}{{hash}}">\n            {{link.name}}\n          </a>\n        </li>\n\n        <li class="pull-right">\n\n          <a href="" id="cancelButton" ng-click="cancel()"\n                  class="pull-right"\n                  title="Discards any updates">\n            <i class="fa fa-remove"></i> Cancel\n          </a>\n        </li>\n\n        <li class="pull-right">\n          <a href="" id="saveButton" ng-show="isValid()" ng-click="create()"\n                  class="pull-right"\n                  title="Creates this page and saves it in the wiki">\n            <i class="fa fa-file-alt"></i> Create\n          </a>\n        </li>\n\n      </ul>\n    </div>\n  </div>\n\n  <div class="wiki-fixed form-horizontal">\n    <div class="control-group">\n      <input type="text" ng-model="fileName" placeholder="File name" class="col-md-12"/>\n    </div>\n    <div class="control-group">\n      <div ng-include="sourceView" class="editor-autoresize"></div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/wiki/html/dozerMappings.html",'<div class="wiki-fixed" ng-controller="Wiki.DozerMappingsController">\n  <div class="logbar" ng-controller="Wiki.NavBarController">\n    <div class="wiki logbar-container">\n      <ul class="nav nav-tabs connected">\n        <li ng-repeat="link in breadcrumbs" ng-class=\'{active : isActive(link.href)}\'>\n          <a ng-href="{{link.href}}{{hash}}">{{link.name}}</a>\n        </li>\n\n        <!--\n                <li class="pull-right">\n                  <a ng-href="{{editLink()}}{{hash}}" ng-hide="!editLink()" title="Edit this camel configuration"\n                     data-placement="bottom">\n                    <i class="fa fa-edit"></i> Edit</a></li>\n                <li class="pull-right" ng-show="sourceLink()">\n        -->\n        <li class="pull-right">\n          <a href="" id="saveButton" ng-disabled="!isValid()" ng-click="save()"\n             ng-class="{\'nav-primary\' : modified}"\n             title="Saves the Mappings document">\n            <i class="fa fa-save"></i> Save</a>\n        </li>\n        <li class="pull-right">\n          <a href="" id="cancelButton" ng-click="cancel()"\n             title="Discards any updates">\n            <i class="fa fa-remove"></i> Cancel</a>\n        </li>\n\n        <li class="pull-right">\n          <a ng-href="{{sourceLink()}}" title="View source code"\n             data-placement="bottom">\n            <i class="fa fa-file-alt"></i> Source</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n\n  <div class="tabbable hawtio-form-tabs" ng-model="tab" ng-hide="missingContainer">\n\n    <div class="tab-pane" title="Mappings">\n\n      <div class="row">\n        <div class="col-md-12 centered spacer">\n          <select class="no-bottom-margin" ng-model="selectedMapping" ng-options="m.map_id for m in mappings"></select>\n          <button class="btn"\n                  ng-click="addMapping()"\n                  title="Add mapping">\n            <i class="fa fa-plus"></i>\n          </button>\n          <button class="btn"\n                  ng-click="deleteDialog = true"\n                  title="Delete mapping">\n            <i class="fa fa-minus"></i>\n          </button>\n          &nbsp;\n          &nbsp;\n          <label class="inline-block" for="map_id">Map ID: </label>\n          <input id="map_id" type="text" class="input-xxlarge no-bottom-margin" ng-model="selectedMapping.map_id">\n        </div>\n      </div>\n\n      <div class="row">\n        <!-- "From" class header -->\n        <div class="col-md-5">\n          <div class="row">\n            <input type="text" class="col-md-12"\n                   ng-model="aName"\n                   typeahead="title for title in classNames($viewValue) | filter:$viewValue"\n                   typeahead-editable="true" title="Java classname for class \'A\'"\n                   placeholder="Java classname for class \'A\'">\n          </div>\n          <div class="row" ng-show="selectedMapping.class_a.error">\n            <div class="alert alert-error">\n              <div class="expandable closed">\n                <div class="title">\n                  <i class="expandable-indicator"></i> Failed to load properties for {{selectedMapping.class_a.value}} due to {{selectedMapping.class_a.error.type}}\n                </div>\n                <div class="expandable-body well">\n                  <div ng-bind-html-unsafe="formatStackTrace(selectedMapping.class_a.error.stackTrace)"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="col-md-2 centered">\n          <button class="btn" ng-click="doReload()" ng-disabled="disableReload()"><i class="fa fa-refresh"></i> Reload</button>\n        </div>\n\n        <!-- "To" class header -->\n        <div class="col-md-5">\n          <div class="row">\n            <input type="text" class="col-md-12"\n                   ng-model="bName"\n                   typeahead="title for title in classNames($viewValue) | filter:$viewValue"\n                   typeahead-editable="true" title="Java classname for class \'B\'"\n                   placeholder="Java classname for class \'B\'">\n          </div>\n          <div class="row" ng-show="selectedMapping.class_b.error">\n            <div class="alert alert-error">\n              <div class="expandable closed">\n                <div class="title">\n                  <i class="expandable-indicator"></i> Failed to load properties for {{selectedMapping.class_b.value}} due to {{selectedMapping.class_b.error.type}}\n                </div>\n                <div class="expandable-body well">\n                  <div ng-bind-html-unsafe="formatStackTrace(selectedMapping.class_b.error.stackTrace)"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </div>\n\n      <script type="text/ng-template" id="property.html">\n        <span class="jsplumb-node dozer-mapping-node"\n              id="{{field.id}}"\n              anchors="{{field.anchor}}"\n              field-path="{{field.path}}">\n          <strong>{{field.displayName}}</strong> : <span class="typeName">{{field.typeName}}</span>\n        </span>\n        <ul>\n          <li ng-repeat="field in field.properties"\n              ng-include="\'property.html\'"></li>\n        </ul>\n      </script>\n\n\n      <script type="text/ng-template" id="pageTemplate.html">\n        <div hawtio-jsplumb draggable="false" layout="false" timeout="500">\n\n          <!-- "from" class -->\n          <div class="col-md-6">\n            <div class="row" ng-hide="selectedMapping.class_a.error">\n              <ul class="dozer-mappings from">\n                <li ng-repeat="field in selectedMapping.class_a.properties"\n                    ng-include="\'property.html\'"></li>\n              </ul>\n            </div>\n          </div>\n\n\n          <!-- "to" class -->\n          <div class="col-md-6">\n            <div class="row" ng-hide="selectedMapping.class_b.error">\n              <ul class="dozer-mappings to">\n                <li ng-repeat="field in selectedMapping.class_b.properties"\n                    ng-include="\'property.html\'"></li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </script>\n      <div class="row" compile="main"></div>\n\n    </div>\n\n    <div class="tab-pane" title="Tree">\n\n      <div class="row">\n        <div class="col-md-12">\n          <ul class="nav nav-pills">\n            <li>\n              <a href=\'\' title="Add a new mapping between two classes" ng-click="addMapping()" data-placement="bottom">\n                <i class="fa fa-plus"></i> Class</a></li>\n            <li>\n              <a href=\'\' title="Add new mappings between fields in these classes" ng-disable="!selectedMapping" ng-click="addField()" data-placement="bottom">\n                <i class="fa fa-plus"></i> Field</a></li>\n            <li>\n              <a href=\'\' title="Deletes the selected item" ng-disabled="!canDelete()" ng-click="deleteDialog = true" data-placement="bottom">\n                <i class="fa fa-remove"></i> Delete</a></li>\n          </ul>\n        </div>\n      </div>\n\n      <div class="row">\n        <div id="tree-container" class="col-md-4">\n          <div hawtio-tree="mappingTree" onselect="onNodeSelect" onDragEnter="onNodeDragEnter" onDrop="onNodeDrop"\n               onRoot="onRootTreeNode"\n               hideRoot="true"></div>\n        </div>\n\n        <div class="col-md-8">\n          <div ng-include="propertiesTemplate"></div>\n        </div>\n      </div>\n\n      <div hawtio-confirm-dialog="deleteDialog"\n           ok-button-text="Delete"\n           on-ok="removeNode()">\n        <div class="dialog-body">\n          <p>You are about to delete the selected {{selectedDescription}}\n          </p>\n          <p>This operation cannot be undone so please be careful.</p>\n        </div>\n      </div>\n\n      <div class="modal-large">\n        <div modal="addDialog.show" close="addDialog.close()" ng-options="addDialog.options">\n          <form class="form-horizontal no-bottom-margin" ng-submit="addAndCloseDialog()">\n            <div class="modal-header"><h4>Add Fields</h4></div>\n            <div class="modal-body">\n              <table class="">\n                <tr>\n                  <th>From</th>\n                  <th></th>\n                  <th>To</th>\n                  <th>Exclude</th>\n                </tr>\n                <tr ng-repeat="unmapped in unmappedFields">\n                  <td>\n                    {{unmapped.fromField}}\n                  </td>\n                  <td>-></td>\n                  <td>\n                    <input type="text" ng-model="unmapped.toField" ng-change="onUnmappedFieldChange(unmapped)"\n                           typeahead="title for title in toFieldNames($viewValue) | filter:$viewValue" typeahead-editable=\'true\'\n                           title="The field to map to"/>\n                  </td>\n                  <td>\n                    <input type="checkbox" ng-model="unmapped.exclude" ng-click="onUnmappedFieldChange(unmapped)"\n                           title="Whether or not the field should be excluded"/>\n                  </td>\n                </tr>\n              </table>\n            </div>\n            <div class="modal-footer">\n              <input id="submit" class="btn btn-primary add" type="submit" ng-disabled="!unmappedFieldsHasValid"\n                     value="Add">\n              <button class="btn btn-warning cancel" type="button" ng-click="addDialog.close()">Cancel</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n\n  </div>\n\n  <div class="jumbotron" ng-show="missingContainer">\n    <p>You cannot edit the dozer mapping file as there is no container running for the profile <b>{{profileId}}</b>.</p>\n\n    <p>\n      <a class="btn btn-primary btn-lg"\n         href="#/fabric/containers/createContainer?profileIds={{profileId}}&versionId={{versionId}}">\n        Create a container for: <strong>{{profileId}}</strong>\n      </a>\n    </p>\n  </div>\n</div>\n'),
e.put("plugins/wiki/html/dozerPropertiesEdit.html","<div simple-form name=\"formEditor\" entity='dozerEntity' data='nodeModel' schema=\"schema\"></div>\n"),e.put("plugins/wiki/html/editPage.html",'<div ng-controller="Wiki.EditController">\n  <div class="logbar" ng-controller="Wiki.NavBarController">\n    <div class="wiki logbar-container">\n      <ul class="nav nav-tabs">\n        <li ng-repeat="link in breadcrumbs" ng-class=\'{active : isActive(link.href)}\'>\n          <a ng-href="{{link.href}}{{hash}}">{{link.name}}</a>\n        </li>\n\n        <li class="pull-right">\n          <a id="saveButton"\n             href=""\n             ng-disabled="canSave()"\n             ng-click="save()"\n             title="Saves the updated wiki page">\n            <i class="fa fa-save"></i> Save</a>\n        </li>\n        <li class="pull-right">\n          <a id="cancelButton"\n             href=""\n             ng-click="cancel()"\n             title="Discards any updates">\n            <i class="fa fa-remove"></i> Cancel</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n\n  <div class="wiki-fixed form-horizontal">\n    <div class="control-group editor-autoresize">\n      <div ng-include="sourceView" class="editor-autoresize"></div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/wiki/html/formEdit.html","<div simple-form name=\"formEditor\" entity='formEntity' data='formDefinition'></div>\n"),e.put("plugins/wiki/html/formTable.html",'<div ng-controller="Wiki.FormTableController">\n  <div class="logbar" ng-controller="Wiki.NavBarController">\n    <div class="wiki logbar-container">\n      <ul class="nav nav-tabs">\n        <li ng-repeat="link in breadcrumbs" ng-class=\'{active : isActive(link.href)}\'>\n          <a ng-href="{{link.href}}{{hash}}">{{link.name}}</a>\n        </li>\n\n        <li class="pull-right">\n          <a ng-href="{{editLink()}}{{hash}}" ng-hide="!editLink()" title="Edit this page"\n             data-placement="bottom">\n            <i class="fa fa-edit"></i> Edit</a></li>\n        <li class="pull-right">\n          <a ng-href="{{historyLink}}{{hash}}" ng-hide="!historyLink" title="View the history of this file"\n             data-placement="bottom">\n            <i class="fa fa-comments-alt"></i> History</a></li>\n        <li class="pull-right">\n          <a ng-href="{{createLink()}}{{hash}}" title="Create new page"\n             data-placement="bottom">\n            <i class="fa fa-plus"></i> Create</a></li>\n        <li class="pull-right" ng-show="sourceLink()">\n          <a ng-href="{{sourceLink()}}" title="View source code"\n             data-placement="bottom">\n            <i class="fa fa-file-alt"></i> Source</a></li>\n      </ul>\n    </div>\n  </div>\n\n  <div class="wiki-fixed row">\n    <input class="search-query col-md-12" type="text" ng-model="gridOptions.filterOptions.filterText"\n           placeholder="Filter...">\n  </div>\n\n  <div class="form-horizontal">\n    <div class="row">\n      <div ng-include="tableView"></div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/wiki/html/formTableDatatable.html",'<div class="gridStyle" hawtio-datatable="gridOptions"></div>\n'),e.put("plugins/wiki/html/formView.html","<div simple-form name=\"formViewer\" mode='view' entity='formEntity' data='formDefinition'></div>\n"),e.put("plugins/wiki/html/gitPreferences.html",'<div title="Git" ng-controller="Wiki.GitPreferences">\n  <div hawtio-form-2="config" entity="entity"></div>\n</div>\n'),e.put("plugins/wiki/html/history.html",'<link rel="stylesheet" href="plugins/wiki/css/wiki.css" type="text/css"/>\n\n<div ng-controller="Wiki.HistoryController">\n  <script type="text/ng-template" id="changeCellTemplate.html">\n    <div class="ngCellText">\n      <a class="commit-link" ng-href="{{row.entity.commitLink}}{{hash}}" title="{{row.entity.name}}">{{row.entity.commitHashText}}\n        <i class="fa fa-circle-arrow-right"></i></a>\n    </div>\n  </script>\n\n  <div ng-hide="inDashboard" class="logbar" ng-controller="Wiki.NavBarController">\n    <div class="wiki logbar-container">\n      <ul class="nav nav-tabs">\n        <li ng-show="branches.length || branch" class="dropdown">\n          <a href="#" class="dropdown-toggle" data-toggle="dropdown"\n             title="The branch to view">\n            {{branch || \'branch\'}}\n            <span class="caret"></span>\n          </a>\n          <ul class="dropdown-menu">\n            <li ng-repeat="otherBranch in branches">\n              <a ng-href="{{branchLink(otherBranch)}}{{hash}}"\n                 ng-hide="otherBranch === branch"\n                 title="Switch to the {{otherBranch}} branch"\n                 data-placement="bottom">\n                {{otherBranch}}</a>\n            </li>\n          </ul>\n        </li>\n        <li ng-repeat="link in breadcrumbs">\n          <a ng-href="{{link.href}}{{hash}}">{{link.name}}</a>\n        </li>\n        <li class="ng-scope active">\n          <a>History</a>\n        </li>\n\n        <li class="pull-right" hawtio-show object-name="{{gitMBean}}" method-name="write">\n          <a ng-href="{{editLink()}}{{hash}}" ng-hide="!editLink()" title="Edit this page"\n             data-placement="bottom">\n            <i class="fa fa-edit"></i> Edit</a></li>\n        <li class="pull-right">\n          <a ng-href="{{historyLink}}{{hash}}" ng-hide="!historyLink" title="View the history of this file"\n             data-placement="bottom">\n            <i class="fa fa-comments-alt"></i> History</a></li>\n        <li class="pull-right" hawtio-show object-name="{{gitMBean}}" method-name="write">\n          <a ng-href="{{createLink()}}{{hash}}" title="Create new page"\n             data-placement="bottom">\n            <i class="fa fa-plus"></i> Create</a></li>\n      </ul>\n    </div>\n  </div>\n\n  <div class="wiki-fixed row">\n    <div class="col-md-4">\n      <div class="control-group">\n        <button class="btn" ng-disabled="!selectedItems.length" ng-click="diff()"\n                title="Compare the selected versions of the files to see how they differ"><i\n                class="fa fa-exchange"></i>\n          Compare\n        </button>\n\n        <button class="btn" ng-disabled="!canRevert()" ng-click="revert()"\n                title="Revert to this version of the file" hawtio-show object-name="{{gitMBean}}" method-name="revertTo"><i class="fa fa-exchange"></i> Revert\n        </button>\n      </div>\n    </div>\n    <div class="col-md-8">\n      <div class="control-group">\n        <input class="col-md-12 search-query" type="text" ng-model="gridOptions.filterOptions.filterText"\n               placeholder="search">\n      </div>\n    </div>\n  </div>\n\n  <div class="form-horizontal">\n    <!--\n        <div class="row">\n            <div class="gridStyle" ng-grid="gridOptions"></div>\n        </div>\n    </div>-->\n\n    <div class="row">\n      <table class="table-condensed table-striped" hawtio-simple-table="gridOptions"></table>\n    </div>\n\n  </div>\n</div>\n'),e.put("plugins/wiki/html/layoutWiki.html",'<div class="row" ng-controller="Wiki.TopLevelController">\n  <div ng-view></div>\n</div>\n\n'),e.put("plugins/wiki/html/sourceEdit.html",'<textarea id="source" ui-codemirror="codeMirrorOptions" ng-model="entity.source"></textarea>\n'),e.put("plugins/wiki/html/sourceView.html",'<textarea id="source" ui-codemirror="codeMirrorOptions" ng-model="source"></textarea>\n'),e.put("plugins/wiki/html/viewBook.html",'<div ng-controller="Wiki.ViewController">\n\n  <script type="text/ng-template" id="fileCellTemplate.html">\n    <div class="ngCellText"\n         title="{{fileName(row.entity)}} - Last Modified: {{row.entity.lastModified | date:\'medium\'}}, Size: {{row.entity.length}}">\n      <a href="{{childLink(row.entity)}}" class="file-name">\n        <span class="file-icon"\n              ng-class="fileClass(row.entity)"\n              ng-bind-html-unsafe="fileIconHtml(row)">\n\n              </span>{{fileName(row.entity)}}\n      </a>\n    </div>\n  </script>\n\n  <script type="text/ng-template" id="fileColumnTemplate.html">\n\n    <div class="ngHeaderSortColumn {{col.headerClass}}"\n         ng-style="{\'cursor\': col.cursor}"\n         ng-class="{ \'ngSorted\': !noSortVisible }">\n\n      <div class="ngHeaderText" ng-hide="pageId === \'/\'">\n        <a ng-href="{{parentLink()}}"\n           class="wiki-file-list-up"\n           title="Open the parent folder">\n          <i class="fa fa-level-up"></i> Up a directory\n        </a>\n      </div>\n    </div>\n\n  </script>\n\n  <ng-include src="\'plugins/wiki/html/viewNavBar.html\'"></ng-include>\n\n  <div class="wiki-fixed form-horizontal">\n    <div class="row">\n      <div class="tocify" wiki-href-adjuster>\n        <!-- TODO we maybe want a more flexible way to find the links to include than the current link-filter -->\n        <div hawtio-toc-display get-contents="getContents(filename, cb)"\n             html="html" link-filter="[file-extension]">\n        </div>\n      </div>\n      <div class="toc-content" id="toc-content"></div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/wiki/html/viewNavBar.html",'<div ng-hide="inDashboard" class="logbar" ng-controller="Wiki.NavBarController">\n  <div class="wiki logbar-container">\n    <ul class="nav nav-tabs">\n      <li ng-show="branches.length || branch">\n        <div hawtio-drop-down="branchMenuConfig"></div>\n      </li>\n      <li ng-repeat="link in breadcrumbs" ng-class=\'{active : isActive(link.href) && !objectId}\'>\n        <a class="breadcrumb-link" ng-href="{{link.href}}">\n          <span class="contained c-medium">{{link.name}}</span>\n        </a>\n      </li>\n      <li ng-show="objectId">\n        <a ng-href="{{historyLink}}{{hash}}">History</a>\n      </li>\n      <li ng-show="objectId" class="active">\n        <a>{{objectId}}</a>\n      </li>\n\n      <li class="pull-right dropdown">\n        <a href="" class="dropdown-toggle" data-toggle="dropdown">\n          Actions <span class="caret"></span>\n        </a>\n        <ul class="dropdown-menu">\n          <li ng-show="sourceLink()">\n            <a ng-href="{{sourceLink()}}" title="View source code"\n               data-placement="bottom">\n              <i class="fa fa-file-alt"></i> Source</a>\n          </li>\n          <li>\n            <a ng-href="{{historyLink}}{{hash}}" ng-hide="!historyLink" title="View the history of this file"\n               data-placement="bottom">\n              <i class="fa fa-comments-alt"></i> History</a>\n          </li>\n          <!--\n          <li class="divider">\n          </li>\n          -->\n          <li ng-hide="gridOptions.selectedItems.length !== 1" hawtio-show object-name="{{gitMBean}}" method-name="rename">\n            <a ng-click="openRenameDialog()"\n               title="Rename the selected document"\n               data-placement="bottom">\n              <i class="fa fa-adjust"></i> Rename</a>\n          </li>\n          <li ng-hide="!gridOptions.selectedItems.length" hawtio-show object-name="{{gitMBean}}" method-name="rename">\n            <a ng-click="openMoveDialog()"\n               title="move the selected documents to a new folder"\n               data-placement="bottom">\n              <i class="fa fa-move"></i> Move</a>\n          </li>\n          <!--\n          <li class="divider">\n          </li>\n          -->\n          <li ng-hide="!gridOptions.selectedItems.length" hawtio-show object-name="{{gitMBean}}" method-name="remove">\n            <a ng-click="openDeleteDialog()"\n               title="Delete the selected document(s)"\n               data-placement="bottom">\n              <i class="fa fa-remove"></i> Delete</a>\n          </li>\n          <li class="divider" ng-show="childActions.length">\n          </li>\n          <li ng-repeat="childAction in childActions">\n            <a ng-click="childAction.doAction()"\n               title="{{childAction.title}}"\n               data-placement="bottom">\n              <i class="{{childAction.icon}}"></i> {{childAction.name}}</a>\n          </li>\n        </ul>\n      </li>\n      <li class="pull-right" hawtio-show object-name="{{gitMBean}}" method-name="write">\n        <a ng-href="{{editLink()}}{{hash}}" ng-hide="!editLink()" title="Edit this page"\n           data-placement="bottom">\n          <i class="fa fa-edit"></i> Edit</a>\n      </li>\n      <li class="pull-right" hawtio-show object-name="{{gitMBean}}" method-name="write">\n        <a ng-href="{{createLink()}}{{hash}}"\n           title="Create new page"\n           data-placement="bottom">\n          <i class="fa fa-plus"></i> Create</a>\n      </li>\n      <li class="pull-right">\n        <div class="btn-group" \n             ng-hide="!children || profile">\n          <a class="btn btn-sm"\n             ng-disabled="mode == ViewMode.List"\n             href="" \n             ng-click="setViewMode(ViewMode.List)">\n            <i class="fa fa-list"></i></a>\n          <a class="btn btn-sm" \n             ng-disabled="mode == ViewMode.Icon"\n             href="" \n             ng-click="setViewMode(ViewMode.Icon)">\n            <i class="fa fa-th-large"></i></a>\n        </div>\n      </li>\n      <li class="pull-right">\n        <a href="" ng-hide="children || profile" title="Add to dashboard" ng-href="{{createDashboardLink()}}"\n           data-placement="bottom">\n          <i class="fa fa-share"></i>\n        </a>\n      </li>\n    </ul>\n  </div>\n</div>\n\n\n'),e.put("plugins/wiki/html/viewPage.html",'<div ng-controller="Wiki.ViewController">\n  <script type="text/ng-template" id="fileCellTemplate.html">\n    <div class="ngCellText"\n         title="{{fileName(row.entity)}} - Last Modified: {{row.entity.lastModified | date:\'medium\'}}, Size: {{row.entity.length}}">\n      <a href="{{childLink(row.entity)}}" class="file-name" hawtio-file-drop="{{row.entity.fileName}}" download-url="{{row.entity.downloadURL}}">\n        <span class="file-icon"\n              ng-class="fileClass(row.entity)"\n              compile="fileIconHtml(row)">\n        </span>{{fileName(row.entity)}}\n      </a>\n    </div>\n  </script>\n\n  <script type="text/ng-template" id="fileColumnTemplate.html">\n    <div class="ngHeaderSortColumn {{col.headerClass}}"\n         ng-style="{\'cursor\': col.cursor}"\n         ng-class="{ \'ngSorted\': !noSortVisible }">\n      <div class="ngHeaderText" ng-hide="pageId === \'/\'">\n        <a ng-href="{{parentLink()}}"\n           class="wiki-file-list-up"\n           title="Open the parent folder">\n          <i class="fa fa-level-up"></i> Up a directory\n        </a>\n      </div>\n    </div>\n  </script>\n\n  <script type="text/ng-template" id="imageTemplate.html">\n    <img src="{{imageURL}}">\n  </script>\n\n  <ng-include src="\'plugins/wiki/html/viewNavBar.html\'"></ng-include>\n\n  <!-- Icon View -->\n  <div ng-show="mode == ViewMode.Icon" class="wiki-fixed">\n    <div ng-hide="!showAppHeader">\n      <div class="row">\n        <div class="col-md-12">\n          <div kubernetes-json="kubernetesJson"></div>\n        </div>\n      </div>\n    </div>\n    <div ng-hide="!html" wiki-href-adjuster wiki-title-linker>\n      <div class="row" style="margin-left: 10px">\n        <div class="col-md-12">\n          <div compile="html"></div>\n        </div>\n      </div>\n    </div>\n    <div class="row" ng-show="html && children">\n      <div class="col-md-12 wiki-icon-view-header">\n        <h5>Directories and Files</h5>\n      </div>\n    </div>\n    <div class="row" ng-hide="!directory">\n      <div class="col-md-12" ng-controller="Wiki.FileDropController">\n        <div class="wiki-icon-view" nv-file-drop nv-file-over uploader="uploader" over-class="ready-drop">\n          <div class="column-box mouse-pointer well"\n               ng-repeat="child in children" \n               ng-class="isInGroup(gridOptions.selectedItems, child, \'selected\', \'\')"\n               ng-click="toggleSelectionFromGroup(gridOptions.selectedItems, child)">\n            <div class="row">\n              <div class="col-md-2" hawtio-file-drop="{{child.fileName}}" download-url="{{child.downloadURL}}">\n                  <span class="app-logo" ng-class="fileClass(child)" compile="fileIconHtml(child)"></span>\n              </div>\n              <div class="col-md-10">\n                <h3>\n                  <a href="{{childLink(child)}}">{{child.displayName || child.name}}</a>\n                </h3>\n              </div>\n            </div>\n            <div class="row" ng-show="child.summary">\n              <div class="col-md-12">\n                <p compile="marked(child.summary)"></p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- end Icon view -->\n\n  <!-- start List view -->\n  <div ng-show="mode == ViewMode.List" class="wiki-fixed">\n    <hawtio-pane position="left" width="300">\n      <div ng-controller="Wiki.FileDropController">\n        <div class="wiki-list-view" nv-file-drop nv-file-over uploader="uploader" over-class="ready-drop">\n          <div class="wiki-grid" hawtio-list="gridOptions"></div>\n        </div>\n      </div>\n    </hawtio-pane>\n    <div class="row">\n      <div ng-class="col-md-12">\n        <div ng-hide="!showProfileHeader">\n          <div class="row">\n            <div class="col-md-12">\n              <div fabric-profile-details version-id="versionId" profile-id="profileId"></div>\n              <p></p>\n            </div>\n          </div>\n        </div>\n        <div ng-hide="!showAppHeader">\n          <div class="row">\n            <div class="col-md-12">\n              <div kubernetes-json="kubernetesJson" children="children"></div>\n            </div>\n          </div>\n        </div>\n        <div ng-hide="!html" wiki-href-adjuster wiki-title-linker>\n          <div class="row" style="margin-left: 10px">\n            <div class="col-md-12">\n              <div compile="html"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- end List view -->\n  <div ng-include="sourceView" class="editor-autoresize"></div>\n</div>\n'),e.put("plugins/wiki/html/modal/deleteDialog.html",'<div>\n  <form class="form-horizontal" ng-submit="deleteAndCloseDialog()">\n    <div class="modal-header"><h4>Delete Document</h4></div>\n    <div class="modal-body">\n      <div class="control-group">\n        <p>You are about to delete\n          <ng-pluralize count="gridOptions.selectedItems.length"\n                        when="{\'1\': \'this document!\', \'other\': \'these {} documents!\'}">\n          </ng-pluralize>\n        </p>\n\n        <div ng-bind-html-unsafe="selectedFileHtml"></div>\n        <p class="alert alert-danger" ng-show="warning" ng-bind-html-unsafe="warning">\n        </p>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <input class="btn btn-primary" type="submit"\n             value="Delete">\n      <button class="btn btn-warning cancel" type="button" ng-click="close()">Cancel</button>\n    </div>\n  </form>\n</div>\n'),e.put("plugins/wiki/html/modal/moveDialog.html",'<div>\n    <form class="form-horizontal" ng-submit="moveAndCloseDialog()">\n    <div class="modal-header"><h4>Move Document</h4></div>\n    <div class="modal-body">\n      <div class="control-group">\n        <label class="control-label" for="moveFolder">Folder</label>\n\n        <div class="controls">\n          <input type="text" id="moveFolder" ng-model="move.moveFolder"\n                 typeahead="title for title in folderNames($viewValue) | filter:$viewValue" typeahead-editable=\'true\'>\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <input class="btn btn-primary" type="submit"\n             ng-disabled="!move.moveFolder"\n             value="Move">\n      <button class="btn btn-warning cancel" type="button" ng-click="close()">Cancel</button>\n    </div>\n  </form>\n</div>'),e.put("plugins/wiki/html/modal/renameDialog.html",'<div>\n  <form class="form-horizontal" ng-submit="renameAndCloseDialog()">\n    <div class="modal-header"><h4>Rename Document</h4></div>\n    <div class="modal-body">\n      <div class="control-group">\n        <label class="control-label" for="renameFileName">Name</label>\n\n        <div class="controls">\n          <input type="text" id="renameFileName" ng-model="rename.newFileName">\n        </div>\n      </div>\n\n      <div class="control-group">\n        <div ng-show="fileExists.exists" class="alert">\n          Please choose a different name as <b>{{fileExists.name}}</b> already exists\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <input class="btn btn-primary" type="submit"\n             ng-disabled="!fileName || fileExists.exists"\n             value="Rename">\n      <button class="btn btn-warning cancel" type="button" ng-click="close()">Cancel</button>\n    </div>\n  </form>\n</div>\n')}]),hawtioPluginLoader.addModule("hawtio-wiki-templates"),!function(e){"use strict";e.module("platanus.inflector",[]).provider("inflector",[function(){function e(e,t,n){if(-1===n.indexOf(e.toLowerCase()))for(var i,r=0;i=t[r++];)if(e.match(i[0]))return e.replace(i[0],i[1]);return e}var t="en",n={en:{uncountable:["music","art","love","happiness","advice","furniture","luggage","sugar","butter","water","electricity","gas","power","currency","equipment","information","rice","money","species","series","fish","sheep","moose","deer","news"],plural:[[new RegExp("(m)an$","gi"),"$1en"],[new RegExp("(pe)rson$","gi"),"$1ople"],[new RegExp("(child)$","gi"),"$1ren"],[new RegExp("^(ox)$","gi"),"$1en"],[new RegExp("(ax|test)is$","gi"),"$1es"],[new RegExp("(octop|vir)us$","gi"),"$1i"],[new RegExp("(alias|status)$","gi"),"$1es"],[new RegExp("(bu)s$","gi"),"$1ses"],[new RegExp("(buffal|tomat|potat)o$","gi"),"$1oes"],[new RegExp("([ti])um$","gi"),"$1a"],[new RegExp("sis$","gi"),"ses"],[new RegExp("(?:([^f])fe|([lr])f)$","gi"),"$1$2ves"],[new RegExp("(hive)$","gi"),"$1s"],[new RegExp("([^aeiouy]|qu)y$","gi"),"$1ies"],[new RegExp("(x|ch|ss|sh)$","gi"),"$1es"],[new RegExp("(matr|vert|ind)ix|ex$","gi"),"$1ices"],[new RegExp("([m|l])ouse$","gi"),"$1ice"],[new RegExp("(quiz)$","gi"),"$1zes"],[new RegExp("s$","gi"),"s"],[new RegExp("$","gi"),"s"]],singular:[[new RegExp("(m)en$","gi"),"$1an"],[new RegExp("(pe)ople$","gi"),"$1rson"],[new RegExp("(child)ren$","gi"),"$1"],[new RegExp("([ti])a$","gi"),"$1um"],[new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),"$1$2sis"],[new RegExp("(hive)s$","gi"),"$1"],[new RegExp("(tive)s$","gi"),"$1"],[new RegExp("(curve)s$","gi"),"$1"],[new RegExp("([lr])ves$","gi"),"$1f"],[new RegExp("([^fo])ves$","gi"),"$1fe"],[new RegExp("([^aeiouy]|qu)ies$","gi"),"$1y"],[new RegExp("(s)eries$","gi"),"$1eries"],[new RegExp("(m)ovies$","gi"),"$1ovie"],[new RegExp("(x|ch|ss|sh)es$","gi"),"$1"],[new RegExp("([m|l])ice$","gi"),"$1ouse"],[new RegExp("(bus)es$","gi"),"$1"],[new RegExp("(o)es$","gi"),"$1"],[new RegExp("(shoe)s$","gi"),"$1"],[new RegExp("(cris|ax|test)es$","gi"),"$1is"],[new RegExp("(octop|vir)i$","gi"),"$1us"],[new RegExp("(alias|status)es$","gi"),"$1"],[new RegExp("^(ox)en","gi"),"$1"],[new RegExp("(vert|ind)ices$","gi"),"$1ex"],[new RegExp("(matr)ices$","gi"),"$1ix"],[new RegExp("(quiz)zes$","gi"),"$1"],[new RegExp("s$","gi"),""]]}};return{registerLocale:function(e,t){n[e]=t},setLocale:function(e){t=e},$get:["$log",function(i){function r(e){e=e||t;var r=n[e];return r||i.warn("Invalid inflector locale "+e),r}return{camelize:function(e,t){return"string"!=typeof e?e:e.replace(/(?:^[-_\s]*|[-_\s]+)([A-Z\d])/gi,function(e,n,i){return t||0!==i?n.toUpperCase():n})},parameterize:function(e,t){return"string"!=typeof e?e:e.replace(/(?:[A-Z]+|[0-9]+)/g,function(e,n){return 0===n?e:(t||"-")+e}).toLowerCase()},dasherize:function(e,t){return e.replace(/[-_\s]+/g,t||"-")},singularize:function(t,n){var i=r(n);return i?e(t,i.singular,i.uncountable):t},pluralize:function(t,n){var i=r(n);return i?e(t,i.plural,i.uncountable):t}}}]}}])}(angular),!function(e,t){"use strict";!function(e){e.module("platanus.inflector",[]).provider("inflector",[function(){function e(e,t,n){if(-1===n.indexOf(e.toLowerCase()))for(var i,r=0;i=t[r++];)if(e.match(i[0]))return e.replace(i[0],i[1]);return e}var t="en",n={en:{uncountable:["music","art","love","happiness","advice","furniture","luggage","sugar","butter","water","electricity","gas","power","currency","equipment","information","rice","money","species","series","fish","sheep","moose","deer","news"],plural:[[new RegExp("(m)an$","gi"),"$1en"],[new RegExp("(pe)rson$","gi"),"$1ople"],[new RegExp("(child)$","gi"),"$1ren"],[new RegExp("^(ox)$","gi"),"$1en"],[new RegExp("(ax|test)is$","gi"),"$1es"],[new RegExp("(octop|vir)us$","gi"),"$1i"],[new RegExp("(alias|status)$","gi"),"$1es"],[new RegExp("(bu)s$","gi"),"$1ses"],[new RegExp("(buffal|tomat|potat)o$","gi"),"$1oes"],[new RegExp("([ti])um$","gi"),"$1a"],[new RegExp("sis$","gi"),"ses"],[new RegExp("(?:([^f])fe|([lr])f)$","gi"),"$1$2ves"],[new RegExp("(hive)$","gi"),"$1s"],[new RegExp("([^aeiouy]|qu)y$","gi"),"$1ies"],[new RegExp("(x|ch|ss|sh)$","gi"),"$1es"],[new RegExp("(matr|vert|ind)ix|ex$","gi"),"$1ices"],[new RegExp("([m|l])ouse$","gi"),"$1ice"],[new RegExp("(quiz)$","gi"),"$1zes"],[new RegExp("s$","gi"),"s"],[new RegExp("$","gi"),"s"]],singular:[[new RegExp("(m)en$","gi"),"$1an"],[new RegExp("(pe)ople$","gi"),"$1rson"],[new RegExp("(child)ren$","gi"),"$1"],[new RegExp("([ti])a$","gi"),"$1um"],[new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),"$1$2sis"],[new RegExp("(hive)s$","gi"),"$1"],[new RegExp("(tive)s$","gi"),"$1"],[new RegExp("(curve)s$","gi"),"$1"],[new RegExp("([lr])ves$","gi"),"$1f"],[new RegExp("([^fo])ves$","gi"),"$1fe"],[new RegExp("([^aeiouy]|qu)ies$","gi"),"$1y"],[new RegExp("(s)eries$","gi"),"$1eries"],[new RegExp("(m)ovies$","gi"),"$1ovie"],[new RegExp("(x|ch|ss|sh)es$","gi"),"$1"],[new RegExp("([m|l])ice$","gi"),"$1ouse"],[new RegExp("(bus)es$","gi"),"$1"],[new RegExp("(o)es$","gi"),"$1"],[new RegExp("(shoe)s$","gi"),"$1"],[new RegExp("(cris|ax|test)es$","gi"),"$1is"],[new RegExp("(octop|vir)i$","gi"),"$1us"],[new RegExp("(alias|status)es$","gi"),"$1"],[new RegExp("^(ox)en","gi"),"$1"],[new RegExp("(vert|ind)ices$","gi"),"$1ex"],[new RegExp("(matr)ices$","gi"),"$1ix"],[new RegExp("(quiz)zes$","gi"),"$1"],[new RegExp("s$","gi"),""]]}};return{registerLocale:function(e,t){n[e]=t},setLocale:function(e){t=e},$get:["$log",function(i){function r(e){e=e||t;var r=n[e];return r||i.warn("Invalid inflector locale "+e),r}return{camelize:function(e,t){return"string"!=typeof e?e:e.replace(/(?:^[-_\s]*|[-_\s]+)([A-Z\d])/gi,function(e,n,i){return t||0!==i?n.toUpperCase():n})},parameterize:function(e,t){return"string"!=typeof e?e:e.replace(/(?:[A-Z]+|[0-9]+)/g,function(e,n){return 0===n?e:(t||"-")+e}).toLowerCase()},dasherize:function(e,t){return e.replace(/[-_\s]+/g,t||"-")},singularize:function(t,n){var i=r(n);return i?e(t,i.singular,i.uncountable):t},pluralize:function(t,n){var i=r(n);return i?e(t,i.plural,i.uncountable):t}}}]}}])}(e);var n=e.module("restmod",["ng","platanus.inflector"]);n.provider("restmod",[function(){function t(e){return function(t){t.invoke(e,this,{$builder:this})}}var n=["RMBuilderExt","RMBuilderRelations","RMBuilderComputed"];return{rebase:function(){var i,r,a=arguments.length;for(r=0;a>r;r++)i=arguments[r],(e.isArray(i)||e.isFunction(i))&&(i=t(i)),n.push(i);return this},$get:["RMModelFactory","$log",function(e,t){var i=Array.prototype.slice,r={model:function(r){var a=e(r,n);return arguments.length>1&&(a.mix(i.call(arguments,1)),t.warn("Passing mixins and difinitions in the model method will be deprecated in restmod 1.2, use restmod.model().mix() instead.")),a},mixin:function(){return{$isAbstract:!0,$$chain:i.call(arguments,0)}},singleton:function(e){return r.model.apply(this,arguments).single(e)}};return r}]}}]).factory("model",["restmod",function(e){return e.model}]).factory("mixin",["restmod",function(e){return e.mixin}]),n.factory("RMCollectionApi",["RMUtils",function(n){var i=e.extend;return{$isCollection:!0,$initialize:function(){this.$dispatch("after-collection-init")},$decode:function(t,i){n.assert(t&&e.isArray(t),"Collection $decode expected array");for(var r=0,a=t.length;a>r;r++)this.$buildRaw(t[r],i).$reveal();return this.$dispatch("after-feed-many",[t]),this},$encode:function(e){for(var t=[],n=0,i=this.length;i>n;n++)t.push(this[n].$encode(e));return this.$dispatch("before-render-many",[t]),t},$clear:function(){return this.$always(function(){this.length=0})},$fetch:function(e){return this.$action(function(){var t={method:"GET",url:this.$url("fetchMany"),params:this.$params};e&&(t.params=t.params?i(t.params,e):e),this.$dispatch("before-fetch-many",[t]).$send(t,function(e){this.$unwrap(e.data).$dispatch("after-fetch-many",[e])},function(e){this.$dispatch("after-fetch-many-error",[e])})})},$add:function(e,i){return n.assert(e.$type&&e.$type===this.$type,"Collection $add expects record of the same $type"),this.$action(function(){e.$position===t&&(i!==t?this.splice(i,0,e):this.push(e),e.$position=!0,this.$dispatch("after-add",[e]))})},$remove:function(e){return this.$action(function(){var n=this.$indexOf(e);-1!==n&&(this.splice(n,1),e.$position=t,this.$dispatch("after-remove",[e]))})},$indexOf:function(e,t){var i="function"!=typeof e?function(t){return t===e}:e;return n.indexWhere(this,i,t)}}}]),n.factory("RMCommonApi",["$http","RMFastQ","$log","RMUtils",function(n,i,r,a){function o(e,n){var i=e.$dispatcher();return function(r){var a=e.$promise;e.$promise=t;try{e.$last=r;var o=i?e.$decorate(i,n,[e]):n.call(e,e);return o===t?e.$promise:o}finally{e.$promise=a}}}var s=[],l={$url:function(e){if(e){if(e="$"+e+"UrlFor",this.$scope[e])return this.$scope[e](this)}else if(this.$scope.$canonicalUrlFor)return this.$scope.$canonicalUrlFor(this);return this.$scope.$urlFor(this)},$dispatch:function(e,n,i){var r,a,o,l=this.$$dsp;if(i||(i=this),l&&(this.$$dsp=t,l(e,n,i)),this.$$cb&&(r=this.$$cb[e]))for(a=0;o=r[a];a++)o.apply(i,n||s);return this.$scope&&this.$scope.$dispatch?this.$scope.$dispatch(e,n,i):this.$type&&this.$type.$dispatch(e,n,i),this.$$dsp=l,this},$on:function(e,t){var n=(this.$$cb||(this.$$cb={}))[e]||(this.$$cb[e]=[]);return n.push(t),this},$off:function(e,t){if(this.$$cb&&this.$$cb[e]){var n=a.indexWhere(this.$$cb[e],function(e){return e===t});-1!==n&&this.$$cb[e].splice(n,1)}return this},$decorate:function(e,t,n){var i=this.$$dsp;this.$$dsp="function"!=typeof e&&e?function(t,n,r){i&&i.apply(null,arguments);var a=e[t];a&&a.apply(r,n||s)}:e;try{return t.apply(this,n)}finally{this.$$dsp=i}},$dispatcher:function(){return this.$$dsp},$asPromise:function(){var e=this;return this.$promise?this.$promise.then(function(){return e},function(){return i.reject(e)}):i.when(this)},$then:function(e,t){return this.$promise=this.$promise?this.$promise.then(e?o(this,e):e,t?o(this,t):t):i.when(o(this,e)(this)),this},$always:function(e){return this.$then(e,e)},$finally:function(e){return this.$promise=this.$promise["finally"](o(this,e)),this},$send:function(e,t,a){this.$type.getProperty("style")||r.warn("No API style base was selected, see the Api Integration FAQ for more information on this warning");var s=this.$$action;return this.$always(function(){return this.$response=null,this.$status="pending",this.$dispatch("before-request",[e]),n(e).then(o(this,function(){return s&&s.canceled?(this.$status="canceled",this.$dispatch("after-request-cancel",[]),i.reject(this)):(this.$status="ok",this.$response=this.$last,this.$dispatch("after-request",[this.$response]),void(t&&t.call(this,this.$response)))}),o(this,function(){return s&&s.canceled?(this.$status="canceled",this.$dispatch("after-request-cancel",[])):(this.$status="error",this.$response=this.$last,this.$dispatch("after-request-error",[this.$response]),a&&a.call(this,this.$response)),i.reject(this)}))})},$action:function(e){
var t={canceled:!1},n=this.$pending||(this.$pending=[]);return n.push(t),this.$always(function(){var n=this.$$action;try{return t.canceled?i.reject(this):(this.$$action=t,e.call(this))}finally{this.$$action=n}}).$finally(function(){n.splice(n.indexOf(t),1)})},$cancel:function(){return this.$pending&&e.forEach(this.$pending,function(e){e.canceled=!0}),this},$hasPendingActions:function(){var t=0;return this.$pending&&e.forEach(this.$pending,function(e){e.canceled||t++}),t>0}};return l}]),n.factory("RMExtendedApi",["$q","RMPackerCache",function(e,t){return{$decode:function(e,t){return this.$resolved===!1&&this.$clear&&this.$clear(),this.$super(e,t),this.$resolved=!0,this},$unwrap:function(e,n){try{return t.prepare(),e=this.$type.unpack(this,e),this.$decode(e,n)}finally{t.clear()}},$wrap:function(e){var t=this.$encode(e);return t=this.$type.pack(this,t)},$reset:function(){return this.$cancel().$action(function(){this.$resolved=!1})},$resolve:function(e){return this.$action(function(){this.$dispatch("before-resolve",[]),this.$resolved||this.$fetch(e)})},$refresh:function(e){return this.$reset().$fetch(e)}}}]),n.factory("RMListApi",[function(){return{$asList:function(e){var t=this.$type.list(),n=this.$asPromise();return t.$promise=n.then(function(n){t.push.apply(t,e?e(n):n)}),t}}}]),n.factory("RMRecordApi",["RMUtils",function(e){var n=function(t,n,i){this.$scope=t,this.$target=n,this.$partial=e.cleanUrl(i)};return n.prototype={$nestedUrl:function(){return e.joinUrl(this.$scope.$url(),this.$partial)},$urlFor:function(e){return e.$isCollection||this.$target.isNested()?this.$nestedUrl():this.$target.$urlFor(e)},$fetchUrlFor:function(){return this.$nestedUrl()},$createUrlFor:function(){return null}},{$initialize:function(){this.$super(),this.$dispatch("after-init")},$buildUrl:function(n){return this.$pk===t||null===this.$pk?null:e.joinUrl(n.$url(),this.$pk+"")},$buildScope:function(e,t){return e.$buildOwnScope?void 0:new n(this,e,t)},$each:function(e,t){for(var n in this)this.hasOwnProperty(n)&&"$"!==n[0]&&e.call(t||this[n],this[n],n);return this},$decode:function(n,i){return this.$type.decode(this,n,i||e.READ_MASK),(this.$pk===t||null===this.$pk)&&(this.$pk=this.$type.inferKey(n)),this.$dispatch("after-feed",[n]),this},$encode:function(t){var n=this.$type.encode(this,t||e.CREATE_MASK);return this.$dispatch("before-render",[n]),n},$fetch:function(t){return this.$action(function(){var n=this.$url("fetch");e.assert(!!n,"Cant $fetch if resource is not bound");var i={method:"GET",url:n,params:t};this.$dispatch("before-fetch",[i]),this.$send(i,function(e){this.$unwrap(e.data),this.$dispatch("after-fetch",[e])},function(e){this.$dispatch("after-fetch-error",[e])})})},$extend:function(e){return this.$action(function(){for(var t in e)e.hasOwnProperty(t)&&"$"!==t[0]&&(this[t]=e[t])})},$update:function(e){return this.$extend(e).$save()},$save:function(n){return this.$action(function(){var i,r=this.$url("update");r?(i=n?{method:this.$type.getProperty("patchMethod","PATCH"),url:r,data:this.$wrap(function(e){e=e.replace("[]","");for(var t=0,i=n.length;i>t;t++)if(e===n[t]||0===e.indexOf(n[t]+".")||0===n[t].indexOf(e+"."))return!1;return!0})}:{method:"PUT",url:r,data:this.$wrap(e.UPDATE_MASK)},this.$dispatch("before-update",[i,!!n]).$dispatch("before-save",[i]).$send(i,function(e){this.$unwrap(e.data).$dispatch("after-update",[e,!!n]).$dispatch("after-save",[e])},function(e){this.$dispatch("after-update-error",[e,!!n]).$dispatch("after-save-error",[e])})):(r=this.$url("create")||this.$scope.$url(),e.assert(!!r,"Cant $create if parent scope is not bound"),i={method:"POST",url:r,data:this.$wrap(e.CREATE_MASK)},this.$dispatch("before-save",[i]).$dispatch("before-create",[i]).$send(i,function(e){this.$unwrap(e.data),this.$scope.$isCollection&&this.$position===t&&!this.$preventReveal&&this.$scope.$add(this,this.$revealAt),this.$dispatch("after-create",[e]).$dispatch("after-save",[e])},function(e){this.$dispatch("after-create-error",[e]).$dispatch("after-save-error",[e])}))})},$destroy:function(){return this.$action(function(){var e=this.$url("destroy");if(e){var t={method:"DELETE",url:e};this.$dispatch("before-destroy",[t]).$send(t,function(e){this.$scope.$remove&&this.$scope.$remove(this),this.$dispatch("after-destroy",[e])},function(e){this.$dispatch("after-destroy-error",[e])})}else this.$scope.$remove&&this.$scope.$remove(this)})},$moveTo:function(e){return this.$position!==t||(this.$revealAt=e),this},$reveal:function(e){return e===t||e?this.$scope.$add(this,this.$revealAt):this.$preventReveal=!0,this}}}]),n.factory("RMScopeApi",["RMUtils",function(){return{$urlFor:function(e){var t=this.$type.isNested()?this:this.$type;return"function"==typeof e.$buildUrl?e.$buildUrl(t):t.$url()},$new:function(e,t){return this.$super(e,t)},$build:function(e){return this.$new().$extend(e)},$buildRaw:function(e,t){var n=this.$new(this.$type.inferKey(e));return n.$decode(e,t),n},$find:function(e,t){return this.$new(e).$resolve(t)},$create:function(e){return this.$build(e).$save()},$collection:function(e,t){return this.$super(e,t)},$search:function(e){return this.$collection(e).$fetch()}}}]),n.factory("RMBuilder",["$injector","inflector","$log","RMUtils",function(t,n,i,r){function a(e){var t={init:["attrDefault"],mask:["attrMask"],ignore:["attrMask"],map:["attrMap","force"],decode:["attrDecoder","param","chain"],encode:["attrEncoder","param","chain"],"volatile":["attrVolatile"]};this.dsl=u(e,{describe:function(e){return o(e,function(e,t){switch(t.charAt(0)){case"@":i.warn("Usage of @ in description objects will be removed in 1.2, use a $extend block instead"),this.define("Scope."+t.substring(1),e);break;case"~":t=n.parameterize(t.substring(1)),i.warn("Usage of ~ in description objects will be removed in 1.2, use a $hooks block instead"),this.on(t,e);break;default:if("$config"===t)for(var r in e)e.hasOwnProperty(r)&&this.setProperty(r,e[r]);else if("$extend"===t)for(var r in e)e.hasOwnProperty(r)&&this.define(r,e[r]);else if("$hooks"===t)for(var r in e)e.hasOwnProperty(r)&&this.on(r,e[r]);else d.test(t)?(i.warn("Usage of ~ in description objects will be removed in 1.2, use a $config block instead"),t=n.camelize(t.toLowerCase()),this.setProperty(t,e)):s(e)?this.attribute(t,e):c(e)?this.define(t,e):this.attrDefault(t,e)}},this),this},extend:function(e,n,i){return"string"==typeof e?(this[e]=r.override(this[name],n),i&&(t[i[0]]=i,i[0]=e)):r.extendOverriden(this,e),this},attribute:function(e,n){var i,r,a,o;for(i in n)if(n.hasOwnProperty(i)&&(r=t[i])){for(a=[e,n[i]],o=1;o<r.length;o++)a.push(n[r[o]]);a.push(n),this[r[0]].apply(this,a)}return this}})}var o=e.forEach,s=e.isObject,l=e.isArray,c=e.isFunction,u=e.extend,d=/^[A-Z]+[A-Z_0-9]*$/;return a.prototype={chain:function(e){for(var t=0,n=e.length;n>t;t++)this.mixin(e[t])},mixin:function(e){e.$$chain?this.chain(e.$$chain):"string"==typeof e?this.mixin(t.get(e)):l(e)?this.chain(e):c(e)?e.call(this.dsl,t):this.dsl.describe(e)}},a}]),n.factory("RMBuilderComputed",["restmod",function(e){var t={attrAsComputed:function(e,t){return this.attrComputed(e,t),this}};return e.mixin(function(){this.extend("attrAsComputed",t.attrAsComputed,["computed"])})}]),n.factory("RMBuilderExt",["$injector","$parse","inflector","$log","restmod",function(t,n,i,r,a){var o=e.bind,s=e.isFunction,l={setUrlPrefix:function(e){return this.setProperty("urlPrefix",e)},setPrimaryKey:function(e){return this.setProperty("primaryKey",e)},attrSerializer:function(e,n,r){return"string"==typeof n&&(n=t.get(i.camelize(n,!0)+"Serializer")),s(n)&&(n=n(r)),n.decode&&this.attrDecoder(e,o(n,n.decode)),n.encode&&this.attrEncoder(e,o(n,n.encode)),this},attrExpression:function(e,t){var i=n(t);return this.on("after-feed",function(){this[e]=i(this)})}};return a.mixin(function(){this.extend("setUrlPrefix",l.setUrlPrefix).extend("setPrimaryKey",l.setPrimaryKey).extend("attrSerializer",l.attrSerializer,["serialize"])})}]),n.factory("RMBuilderRelations",["$injector","inflector","$log","RMUtils","restmod","RMPackerCache",function(e,n,i,r,a,o){function s(e,t){return function(){var n=this.$owner;this.$owner=t;try{return e.apply(this,arguments)}finally{this.$owner=n}}}function l(e,t,n){for(var i in t)t.hasOwnProperty(i)&&e.$on(i,s(t[i],n))}var c={attrAsCollection:function(t,n,a,o,s,c,u){var d,p;return this.attrDefault(t,function(){if("string"==typeof n&&(n=e.get(n),d=n.getProperty("hasMany",{}),p=d.hooks,s)){var r=n.$$getDescription(s);r&&"belongs_to"===r.relation||(i.warn("Must define an inverse belongsTo relation for inverseOf to work"),s=!1)}var o,h=this.$buildScope(n,a||n.encodeUrlName(t));if(o=n.$collection(c||null,h),p&&l(o,p,this),u&&l(o,u,this),o.$dispatch("after-has-many-init"),s){var f=this;o.$on("after-add",function(e){e[s]=f})}return o}),(o||a)&&this.attrMap(t,o||a),this.attrDecoder(t,function(e){this[t].$reset().$decode(e)}).attrMask(t,r.WRITE_MASK).attrMeta(t,{relation:"has_many"}),this},attrAsResource:function(t,n,a,o,s,c){var u,d;return this.attrDefault(t,function(){if("string"==typeof n&&(n=e.get(n),u=n.getProperty("hasOne",{}),d=u.hooks,s)){var r=n.$$getDescription(s);r&&"belongs_to"===r.relation||(i.warn("Must define an inverse belongsTo relation for inverseOf to work"),s=!1)}var o,p=this.$buildScope(n,a||n.encodeUrlName(t));return o=n.$new(null,p),d&&l(o,d,this),c&&l(o,c,this),o.$dispatch("after-has-one-init"),s&&(o[s]=this),o}),(o||a)&&this.attrMap(t,o||a),this.attrDecoder(t,function(e){this[t].$decode(e)}).attrMask(t,r.WRITE_MASK).attrMeta(t,{relation:"has_one"}),this},attrAsReference:function(n,i,a,s){function l(){"string"==typeof i&&(i=e.get(i))}return this.attrDefault(n,null).attrMask(n,r.WRITE_MASK).attrMeta(n,{relation:"belongs_to"}),this.attrDecoder(n,function(e){return null===e?null:(l(),void(this[n]&&this[n].$pk===i.inferKey(e)?this[n].$decode(e):this[n]=i.$buildRaw(e)))}),a!==!1&&this.attrMap(n+"Id",a||"*",!0).attrDecoder(n+"Id",function(e){e!==t&&(this[n]&&this[n].$pk===e||(null!==e&&e!==!1?(l(),this[n]=o.resolve(i.$new(e)),s&&this[n].$fetch()):this[n]=null))}).attrEncoder(n+"Id",function(){return this[n]?this[n].$pk:null}),this},attrAsReferenceToMany:function(t,i,a){function s(){"string"==typeof i&&(i=e.get(i))}function l(e,t){s(),t.length=0;for(var n=0,r=e.length;r>n;n++)t.push("object"==typeof e[n]?i.$buildRaw(e[n]):o.resolve(i.$new(e[n])))}if(this.attrDefault(t,function(){return[]}).attrMask(t,r.WRITE_MASK).attrMeta(t,{relation:"belongs_to_many"}),this.attrDecoder(t,function(e){e&&l(e,this[t])}),a!==!1){var c=n.singularize(t)+"Ids";this.attrMap(c,a||"*",!0).attrDecoder(c,function(e){e&&l(e,this[t])}).attrEncoder(c,function(){for(var e=[],n=this[t],i=0,r=n.length;r>i;i++)e.push(n[i].$pk);return e})}return this}};return a.mixin(function(){this.extend("attrAsCollection",c.attrAsCollection,["hasMany","path","source","inverseOf","params","hooks"]).extend("attrAsResource",c.attrAsResource,["hasOne","path","source","inverseOf","hooks"]).extend("attrAsReference",c.attrAsReference,["belongsTo","key","prefetch"]).extend("attrAsReferenceToMany",c.attrAsReferenceToMany,["belongsToMany","keys"])})}]),n.factory("RMModelFactory",["$injector","$log","inflector","RMUtils","RMScopeApi","RMCommonApi","RMRecordApi","RMListApi","RMCollectionApi","RMExtendedApi","RMSerializer","RMBuilder",function(n,i,r,a,o,s,l,c,u,d,p,h){var f=/(.*?)([^\/]+)\/?$/,g=a.extendOverriden;return function(n,m){function v(e,t){this.$scope=e||v,this.$pk=t,this.$initialize()}function y(e,t){var n=new $;return n.$scope=t||v,n.$params=e,n.$initialize(),n}function b(e,t,n){var i=P[e];a.assert(!!i,"Invalid api name $1",e),t?i[t]=a.override(i[t],n):a.extendOverriden(i,n)}n=a.cleanUrl(n);var w,x={primaryKey:"id",urlPrefix:null},k=new p(v),C=[],S=[],_={},T={};n&&(x.name=r.singularize(n.replace(f,"$2")));var $=a.buildArrayType(),A=a.buildArrayType(),E=function(e){this.$isCollection=e,this.$initialize()};g(v,{$$getDescription:function(e){return _[e]},$$chain:[],$type:v,$new:function(e,t){return new v(t||v,e)},$collection:y,$url:function(){return x.urlPrefix?a.joinUrl(x.urlPrefix,n):n},$dispatch:function(e,t,n){var i,r,a=T[e];if(a)for(i=0;r=a[i];i++)r.apply(n||this,t||[]);return this},inferKey:function(e){return e&&"undefined"!=typeof e[x.primaryKey]?e[x.primaryKey]:null},getProperty:function(e,n){var i=x[e];return i!==t?i:n},isNested:function(){return!n},single:function(e){return new v({$urlFor:function(){return x.urlPrefix?a.joinUrl(x.urlPrefix,e):e}},"")},dummy:function(e){return new E(e)},list:function(e){var t=new A;return e&&t.push.apply(t,e),t},identity:function(e){if(!e)return x.name;if(e){if(x.plural)return x.plural;if(x.name)return r.pluralize(x.name)}return null},mix:function(){return w.chain(arguments),this.$$chain.push.apply(this.$$chain,arguments),this},unpack:function(e,t){return t},pack:function(e,t){return t},decode:k.decode,encode:k.encode,decodeName:null,encodeName:null,encodeUrlName:function(e){return i.warn("Default paremeterization of urls will be disabled in 1.2, override Model.encodeUrlName with inflector.parameterize in your base model to keep the same behaviour."),r.parameterize(e)}},o),g(v.prototype,{$type:v,$initialize:function(){var e,t,n=this;for(t=0;e=C[t];t++)this[e[0]]="function"==typeof e[1]?e[1].apply(this):e[1];for(t=0;e=S[t];t++)Object.defineProperty(n,e[0],{enumerable:!0,get:e[1]})}},s,l,d),g($.prototype,{$type:v,$new:function(e,t){return v.$new(e,t||this)},$collection:function(t,n){return t=this.$params?e.extend({},this.$params,t):t,y(t,n||this.$scope)}},c,o,s,u,d),g(A.prototype,{$type:v},c,s),g(E.prototype,{$type:v,$initialize:function(){}},s);var P={Model:v,Record:v.prototype,Collection:$.prototype,List:A.prototype,Dummy:E.prototype};return w=new h(e.extend(k.dsl(),{setProperty:function(e,t){return x[e]=t,this},attrDefault:function(e,t){return C.push([e,t]),this},attrComputed:function(e,t){return S.push([e,t]),this.attrMask(e,!0),this},attrMeta:function(e,t){return _[e]=g(_[e]||{},t),this},define:function(e,t){var n=!1,i="Record";switch("object"==typeof t&&t?i=e:(n=e.split("."),1===n.length?n=n[0]:(i=n[0],n=n[1])),i){case"List":b("Collection",n,t),b("List",n,t);break;case"Scope":b("Model",n,t),b("Collection",n,t);break;case"Resource":b("Record",n,t),b("Collection",n,t),b("List",n,t),b("Dummy",n,t);break;default:b(i,n,t)}return this},on:function(e,t){return(T[e]||(T[e]=[])).push(t),this}})),w.chain(m),v}}]),n.factory("RMFastQ",[function(){function t(e,a){return e&&i(e.then)?n(e):{simple:!0,then:function(n,i){return t(a?i(e):n(e))},"catch":r,"finally":function(r){var o=r();return o&&i(e.then)?n(e.then(function(){return a?t(e,!0):e},function(){return a?t(e,!0):e})):this}}}function n(e){if(e.simple)return e;var i;return e.then(function(e){i=t(e)},function(e){i=t(e,!0)}),{then:function(t,r){return i?i.then(t,r):n(e.then(t,r))},"catch":r,"finally":function(t){return i?i["finally"](t):n(e["finally"](t))}}}var i=e.isFunction,r=function(e){return this.then(null,e)};return{reject:function(e){return t(e,!0)},when:function(e){return t(e,!1)},wrap:n}}]),n.factory("RMPackerCache",[function(){var e;return{feed:function(t,n){e[t]=n},resolve:function(t){if(e){var n=t.$type,i=e[n.identity(!0)];if(i&&t.$pk)for(var r=0,a=i.length;a>r;r++)if(t.$pk===n.inferKey(i[r])){t.$decode(i[r]);break}}return t},prepare:function(){e={}},clear:function(){e=null}}}]),n.factory("RMSerializer",["$injector","inflector","$filter","RMUtils",function(n,i,r,a){function o(e,t){for(var n,i=0;e&&(n=t[i]);i++)e=e[n];return e}function s(e,t,n){for(var i=0,r=t.length-1;r>i;i++){var a=t[i];e=e[a]||(e[a]={})}e[t[t.length-1]]=n}return function(n){function i(e,t){if("function"==typeof t)return t(e);var n=h[e];return n&&(n===!0||-1!==n.indexOf(t))}function l(e,r,a,s,l){var u,d,p,h,f,g,y,b,w=a?a+".":"";if(f=v[a])for(y=0,b=f.length;b>y;y++)p=w+f[y].path,i(p,s)||(h=f[y].map?o(e,f[y].map):e[n.encodeName?n.encodeName(f[y].path):f[y].path],(f[y].forced||h!==t)&&(h=c(h,p,s,l),h!==t&&(r[f[y].path]=h)));for(u in e)if(e.hasOwnProperty(u)){if(d=n.decodeName?n.decodeName(u):u,"$"===d[0])continue;if(f){for(g=!1,y=0,b=f.length;b>y&&!(g=f[y].mapPath===u);y++);if(g)continue}if(p=w+d,m[p]||i(p,s))continue;h=c(e[u],p,s,l),h!==t&&(r[d]=h)}}function c(e,t,n,i){var r=f[t],a=e;if(r)a=r.call(i,e);else if("object"==typeof e)if(p(e)){a=[];for(var o=0,s=e.length;s>o;o++)a.push(c(e[o],t+"[]",n,i))}else e&&(a={},l(e,a,t,n,i));return a}function u(e,r,a,o,l){var c,u,p,h,f,g=a?a+".":"";for(c in e)if(e.hasOwnProperty(c)&&"$"!==c[0]){if(u=g+c,m[u]||i(u,o))continue;h=d(e[c],u,o,l),h!==t&&(p=n.encodeName?n.encodeName(c):c,r[p]=h),y[u]&&delete e[c]}if(f=v[a])for(var b=0,w=f.length;w>b;b++)u=g+f[b].path,i(u,o)||(h=e[f[b].path],(f[b].forced||h!==t)&&(h=d(h,u,o,l),h!==t&&(f[b].map?s(r,f[b].map,h):r[n.encodeName?n.encodeName(f[b].path):f[b].path]=h)))}function d(e,t,n,i){var r=g[t],a=e;if(r)a=r.call(i,e);else if(null!==e&&"object"==typeof e&&"function"!=typeof e.toJSON)if(p(e)){a=[];for(var o=0,s=e.length;s>o;o++)a.push(d(e[o],t+"[]",n,i))}else e&&(a={},u(e,a,t,n,i));return a}var p=e.isArray,h={},f={},g={},m={},v={},y={};return{decode:function(e,t,n){l(t,e,"",n,e)},encode:function(e,t){var n={};return u(e,n,"",t,e),n},dsl:function(){return{attrMap:function(e,t,n){var i=e.lastIndexOf("."),r=-1!==i?e.substr(0,i):"",a=-1!==i?e.substr(i+1):e;m[e]=!0;var o=v[r]||(v[r]=[]);return o.push({path:a,map:"*"===t?null:t.split("."),mapPath:t,forced:n}),this},attrMask:function(e,t){return t?h[e]=t:delete h[e],this},attrDecoder:function(e,t,n,i){if("string"==typeof t){var o=r(t);t=function(e){return o(e,n)}}return f[e]=i?a.chain(f[e],t):t,this},attrEncoder:function(e,t,n,i){if("string"==typeof t){var o=r(t);t=function(e){return o(e,n)}}return g[e]=i?a.chain(g[e],t):t,this},attrVolatile:function(e,n){return y[e]=n===t?!0:n,this}}}}}}]),n.factory("DefaultPacker",["restmod","inflector","RMPackerCache",function(t,n,i){function r(e,t,n){for(var i=0,r=t.length;r>i;i++)n(t[i],e[t[i]])}function a(e,t,n){for(var i in e)e.hasOwnProperty(i)&&-1===t.indexOf(i)&&n(i,e[i])}function o(t,n,i,o,s){if("."===i||i===!0){var l=[n];o&&l.push.apply(l,e.isArray(o)?o:[o]),a(t,l,s)}else"string"==typeof i?a(t[i],[],s):r(t,i,s)}return t.mixin(function(){this.define("Model.unpack",function(e,t){var n=null,r=this.getProperty("jsonLinks","linked"),a=this.getProperty("jsonMeta","meta");return n=e.$isCollection?this.getProperty("jsonRootMany")||this.getProperty("jsonRoot")||this.identity(!0):this.getProperty("jsonRootSingle")||this.getProperty("jsonRoot")||this.identity(),a&&(e.$metadata={},o(t,n,a,r,function(t,n){e.$metadata[t]=n})),r&&o(t,n,r,a,function(e,t){i.feed(e,t)}),t[n]})})}]),n.factory("RMUtils",["$log",function(e){var t=[],n=function(){var e=function(){};return Object.setPrototypeOf?function(e,t){Object.setPrototypeOf(e,t)}:(new e).__proto__===e.prototype?function(e,t){e.__proto__=t}:void 0}(),i={CREATE_MASK:"C",UPDATE_MASK:"U",READ_MASK:"R",WRITE_MASK:"CU",FULL_MASK:"CRU",format:function(e,t){for(var n=0;t&&n<t.length;n++)e=e.replace("$"+(n+1),t[n]);return e},assert:function(t,n){if(!t){var r=Array.prototype.slice.call(arguments,2);throw n=i.format(n,r),e.error(n),new Error(n)}},joinUrl:function(e,t){return e&&t?(e+"").replace(/\/$/,"")+"/"+(t+"").replace(/^\//,""):null},cleanUrl:function(e){return e?e.replace(/\/$/,""):e},chain:function(e,t){return e?function(n){return t.call(this,e.call(this,n))}:t},override:function(e,t){return e&&"function"==typeof t?function(){var n=this.$super;try{return this.$super=e,t.apply(this,arguments)}finally{this.$super=n}}:t},indexWhere:function(e,t,n){for(var i=n||0,r=e.length;r>i;i++)if(t(e[i]))return i;return-1},extendOverriden:function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=e[r]&&"function"==typeof e[r]?i.override(e[r],n[r]):n[r])}return e},buildArrayType:function(e){var i;if(n&&!e){var r=function(){var e=[];return e.push.apply(e,arguments),n(e,r.prototype),e};r.prototype=[],r.prototype.last=function(){return this[this.length-1]},i=r}else{var a=document.createElement("iframe");a.style.display="none",a.height=0,a.width=0,a.border=0,document.body.appendChild(a),window.frames[window.frames.length-1].document.write("<script>parent.RestmodArray = Array;</script>"),i=window.RestmodArray,delete window.RestmodArray;for(var o in Array.prototype)"function"!=typeof Array.prototype[o]||i.prototype[o]||(i.prototype[o]=Array.prototype[o]);document.body.removeChild(a),t.push(a)}return i}};return i}])}(angular);var Forge;!function(e){function t(e){return!0}function n(e,t){return e?t?UrlHelpers.join("/forge/command",e,t):UrlHelpers.join("/forge/command/",e):null}function i(e){return e?UrlHelpers.join("/forge/commands/user",e):"/forge/commands"}function r(e){return UrlHelpers.join(e,"/repos")}function a(e,t){return UrlHelpers.join(e,"/repos/user",t)}function o(e,t,n){return void 0===n&&(n=null),UrlHelpers.join(e,"command",t,n)}function s(e,t){return UrlHelpers.join(e,"command","execute",t)}function l(e,t){return UrlHelpers.join(e,"command","validate",t)}function c(e,t,n){return UrlHelpers.join(e,"commandInput",t,n)}function u(e,t){if(t){var n=e.projects[t];return n||(n={},e.projects[t]=n),n}return e.rootProject}function d(e,t,n){var i=u(e,t);i.$commands=n}function p(e,t){var n=u(e,t);return n.$commands||[]}function h(e,t){var n=u(e,t),i=n.$commandInputs;return i||(i={},n.$commandInputs=i),i}function f(e,t,n){var i=h(e,t);return i[n]}function g(e,t,n,i){var r=h(e,t);return r[n]=i}function m(t){var n=t.owner||{},r=n.username||t.user,a=t.name,o=n.avatar_url;if(o&&o.startsWith("http//")&&(o="http://"+o.substring(6),n.avatar_url=o),r&&a){var s=r+"/"+a;t.$commandsLink=i(s),t.$buildsLink="/kubernetes/builds?q=/"+s+".git";var l=HawtioCore.injector;if(l){var c=l.get("ServiceRegistry");if(c){var u=c.serviceLink(e.orionServiceName),d=c.findService(e.gogsServiceName);if(u&&d){var p=d.portalIP;if(p){var h=d.port,f=h&&80!==h&&443!==h?":"+h:"",g=h&&443===h?"https://":"http://",m=UrlHelpers.join(g+p+f+"/",s+".git");t.$openProjectLink=UrlHelpers.join(u,"/git/git-repository.html#,createProject.name="+a+",cloneGit="+m)}}}}}}function v(){var e=(localStorage.gogsAuthorization,localStorage.gogsEmail,{});return e}function y(e,t,n){if(e&&t&&n){var i=e.indexOf("?")>=0?"&":"?";return e+i+t+"="+encodeURIComponent(n)}return e}function b(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),t=t||localStorage.gogsAuthorization,n=n||localStorage.gogsEmail,e=y(e,"_gogsAuth",t),e=y(e,"_gogsEmail",n)}function w(e,t){return t?Core.matchFilterIgnoreCase(angular.toJson(e),t):!0}function x(){var t=localStorage.gogsAuthorization;return t?e.loggedInToGogs:!1}function k(e,t){void 0===t&&(t="/forge/repos"),x()||e.path(t)}e.context="/forge",e.hash="#"+e.context,e.defaultRoute=e.hash+"/projects",e.pluginName="Forge",e.pluginPath="plugins/forge/",e.templatePath=e.pluginPath+"html/",e.log=Logger.get(e.pluginName),e.defaultIconUrl=Core.url("/img/forge.svg"),e.gogsServiceName="gogs",e.orionServiceName="orion",e.loggedInToGogs=!1,e.isForge=t,e.commandLink=n,e.commandsLink=i,e.reposApiUrl=r,e.repoApiUrl=a,e.commandApiUrl=o,e.executeCommandApiUrl=s,e.validateCommandApiUrl=l,e.commandInputApiUrl=c,e.setModelCommands=d,e.getModelCommands=p,e.getModelCommandInputs=f,e.setModelCommandInputs=g,e.enrichRepo=m,e.createHttpConfig=v,e.createHttpUrl=b,e.commandMatchesText=w,e.isLoggedIntoGogs=x,e.redirectToGogsLoginIfRequired=k}(Forge||(Forge={}));var Forge;!function(e){e._module=angular.module(e.pluginName,["hawtio-core","hawtio-ui"]),e.controller=PluginHelpers.createControllerFunction(e._module,e.pluginName),e.route=PluginHelpers.createRoutingFunction(e.templatePath),e._module.config(["$routeProvider",function(t){t.when(UrlHelpers.join(e.context,"/repos/:path*"),e.route("repo.html",!1)).when(UrlHelpers.join(e.context,"/repos"),e.route("repos.html",!1)).when(UrlHelpers.join(e.context,"/commands"),e.route("commands.html",!1)).when(UrlHelpers.join(e.context,"/commands/:path*"),e.route("commands.html",!1)).when(UrlHelpers.join(e.context,"/command/:id"),e.route("command.html",!1)).when(UrlHelpers.join(e.context,"/command/:id/:path*"),e.route("command.html",!1)).when(e.context,{redirectTo:UrlHelpers.join(e.context,"repos")})}]),e._module.factory("ForgeApiURL",["jolokiaUrl","jolokia","$q","$rootScope",function(e,t,n,i){return"/api/forge"}]),e._module.factory("ServiceRegistry",[function(){return{hasService:function(t){return e.gogsServiceName===t},findService:function(e){return null},serviceLink:function(t){return t===e.gogsServiceName?"http://gogs.vagrant.local":null}}}]),e._module.factory("ForgeModel",["jolokiaUrl","jolokia","$q","$rootScope",function(e,t,n,i){return{rootProject:{},projects:[]}}]),e._module.run(["viewRegistry","workspace","HawtioNav",function(t,n,i){e.log.debug("Running"),t.forge=e.templatePath+"layoutForge.html";var r=i.builder(),a=r.id("forge-repos").href(function(){return UrlHelpers.join(e.context,"repos")}).title(function(){return"Repositories"}).build(),o=r.id("forge").rank(110).href(function(){return e.context}).title(function(){return"Forge"}).isValid(function(){return e.isForge(n)}).tabs(a).build();i.add(o);var s=i.items||[],l=s.find(function(e){return"docker-registry"===e.id});l&&(l.isValid=function(){return!1})}]),hawtioPluginLoader.addModule(e.pluginName)}(Forge||(Forge={}));var Forge;!function(e){e.CommandController=e.controller("CommandController",["$scope","$templateCache","$location","$routeParams","$http","$timeout","ForgeApiURL","ForgeModel",function(t,n,i,r,a,o,s,l){function c(){console.log("route updated; lets clear the entity"),t.entity={},t.inputList=[t.entity],t.previousSchemaJson="",t.schema=null,Core.$apply(t),h()}function u(e){if(e){var n=angular.copy(e);angular.forEach(n.properties,function(e){delete e.value,delete e.enabled});var i=angular.toJson(n);if(i!==t.previousSchemaJson&&(console.log("updated schema: "+i),t.previousSchemaJson=i,t.schema=e,"project-new"===t.id)){var r=t.entity,a=e.properties||{},o=a.overwrite,s=a.catalog,l=a.targetLocation;l&&(l.hidden=!0,o&&(o.hidden=!0),console.log("hiding targetLocation!"),r.type||(r.type="From Archetype Catalog")),s&&(r.catalog||(r.catalog="fabric8"))}}}function d(){if(!t.executing&&!t.validating){var n=angular.toJson(t.entity);if(n!==t.validatedEntityJson){t.validatedEntityJson=n;var i=t.id,r=t.resourcePath,l=e.validateCommandApiUrl(s,i),c=[].concat(t.inputList);c[c.length-1]=t.entity;var p={resource:r,inputList:t.inputList};l=e.createHttpUrl(l),t.validating=!0,a.post(l,p,e.createHttpConfig()).success(function(e,n,i,r){this.validation=e;var a=e.wizardResults;if(a){var s=a.stepInputs;if(s){var l=_.last(s);u(l)}}Core.$apply(t),o(function(){t.validating=!1,d()},200)}).error(function(n,i,r,a){t.executing=!1,e.log.warn("Failed to load "+l+" "+n+" "+i)})}}}function p(e){return e||(e=""),e.startsWith("suc")?"bg-success":"bg-warning"}function h(){t.item=null;var n=t.id;if(n){var i=t.resourcePath,r=e.commandInputApiUrl(s,n,i);r=e.createHttpUrl(r),a.get(r,e.createHttpConfig()).success(function(n,i,r,a){n&&(t.fetched=!0,console.log("updateData loaded schema"),u(n),e.setModelCommandInputs(l,t.resourcePath,t.id,t.schema),f()),Core.$apply(t)}).error(function(t,n,i,a){e.log.warn("Failed to load "+r+" "+t+" "+n)})}else Core.$apply(t)}function f(){var e=t.schema;t.fetched=e;var n=t.entity;e&&angular.forEach(e.properties,function(e,t){var i=e.value;i&&!n[t]&&(n[t]=i)})}t.model=l,t.resourcePath=r.path||i.search().path||"",t.id=r.id,t.path=r.path,t.avatar_url=localStorage.gogsAvatarUrl,t.user=localStorage.gogsUser,t.repoName="";var g=t.resourcePath.split("/");g&&g.length&&(t.repoName=g[g.length-1]),t.commandsLink=t.path||"project-new"===t.id?"/forge/repos":e.commandsLink(t.resourcePath),console.log("command page created"),e.redirectToGogsLoginIfRequired(i),t.entity={},t.inputList=[t.entity],t.schema=e.getModelCommandInputs(l,t.resourcePath,t.id),f(),t.$on("$routeChangeSuccess",c),t.execute=function(){t.response=null,t.executing=!0;var n=t.id,i=t.resourcePath,r=e.executeCommandApiUrl(s,n),o={resource:i,inputList:t.inputList};r=e.createHttpUrl(r),e.log.info("About to post to "+r+" payload: "+angular.toJson(o)),a.post(r,o,e.createHttpConfig()).success(function(e,n,i,r){if(t.executing=!1,e){e.message=e.message||e.output;var a=e.wizardResults;if(a){var o=a.stepInputs;if(o){var s=_.last(o);s&&(t.entity={},u(s),t.inputList.push(t.entity),e.canMoveToNextStep?e=null:t.wizardCompleted=!0)}}}t.response=e;var n=((e||{}).status||"").toString().toLowerCase();t.responseClass=p(n),Core.$apply(t)}).error(function(n,i,a,o){t.executing=!1,e.log.warn("Failed to load "+r+" "+n+" "+i)})},t.$watchCollection("entity",function(){d()}),h()}])}(Forge||(Forge={}));var Forge;!function(e){e.CommandsController=e.controller("CommandsController",["$scope","$dialog","$window","$templateCache","$routeParams","$location","localStorage","$http","$timeout","ForgeApiURL","ForgeModel",function(t,n,i,r,a,o,s,l,c,u,d){function p(n){var i=t.tableConfig.filterOptions.filterText;return e.commandMatchesText(n,i)}t.model=d,t.resourcePath=a.path||o.search().path||"",t.repoName="",t.projectDescription=t.resourcePath||"";var h=t.projectDescription.split("/");h&&h.length&&(t.repoName=h[h.length-1]),!t.projectDescription.startsWith("/")&&t.projectDescription.length>0&&(t.projectDescription="/"+t.projectDescription),e.redirectToGogsLoginIfRequired(o),t.avatar_url=s.gogsAvatarUrl,t.user=s.gogsUser,t.commands=e.getModelCommands(d,t.resourcePath),t.fetched=0!==t.commands.length,t.tableConfig={data:"commands",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:o.search().q||""},columnDefs:[{field:"name",displayName:"Name",cellTemplate:r.get("idTemplate.html")},{field:"description",displayName:"Description"},{field:"category",displayName:"Category"}]},t.commandSelector={filterText:"",folders:[],selectedCommands:[],expandedFolders:{},isOpen:function(e){var n=t.tableConfig.filterOptions.filterText;return""!==n||t.commandSelector.expandedFolders[e.id]?"opened":"closed"},clearSelected:function(){t.commandSelector.expandedFolders={},Core.$apply(t)},updateSelected:function(){var e=[];angular.forEach(t.model.appFolders,function(t){var n=t.apps.filter(function(e){return e.selected});n&&(e=e.concat(n))}),t.commandSelector.selectedCommands=e.sortBy("name")},select:function(e,n){e.name;t.commandSelector.updateSelected()},getSelectedClass:function(e){return e["abstract"]?"abstract":e.selected?"selected":""},showCommand:function(e){return p(e)},showFolder:function(e){var n=t.tableConfig.filterOptions.filterText;return!n||e.commands.some(function(e){return p(e)})}};var f=UrlHelpers.join(u,"commands",t.resourcePath);f=e.createHttpUrl(f),e.log.info("Fetching commands from: "+f),l.get(f,e.createHttpConfig()).success(function(n,i,r,a){if(angular.isArray(n)&&200===i){var o=t.resourcePath,s={},l=[];t.commands=_.sortBy(n,"name"),angular.forEach(t.commands,function(t){var n=t.id||t.name;t.$link=e.commandLink(n,o);var i=t.name||t.id,r=t.category,a=i,c=i.split(":",2);null!=c&&c.length>1&&(r=c[0],a=c[1].trim()),"Project/Build"===r&&(r="Project"),t.$shortName=a,t.$folderName=r;var u=s[r];u||(u={name:r,commands:[]},s[r]=u,l.push(u)),u.commands.push(t)}),l=_.sortBy(l,"name"),angular.forEach(l,function(e){e.commands=_.sortBy(e.commands,"$shortName")}),t.commandSelector.folders=l,e.setModelCommands(t.model,t.resourcePath,t.commands),t.fetched=!0}}).error(function(t,n,i,r){e.log.warn("failed to load "+f+". status: "+n+" data: "+t)})}])}(Forge||(Forge={}));var Forge;!function(e){e.RepoController=e.controller("RepoController",["$scope","$templateCache","$location","$routeParams","$http","$timeout","ForgeApiURL",function(t,n,i,r,a,o,s){function l(){if(t.name){var n=e.repoApiUrl(s,t.name);n=e.createHttpUrl(n);var i=e.createHttpConfig();a.get(n,i).success(function(n,i,r,a){n&&e.enrichRepo(n),t.entity=n,t.fetched=!0}).error(function(t,i,r,a){e.log.warn("failed to load "+n+". status: "+i+" data: "+t)})}else t.fetched=!0}t.name=r.path,e.redirectToGogsLoginIfRequired(i),t.$on("$routeUpdate",function(e){l()}),
l()}])}(Forge||(Forge={}));var Forge;!function(e){e.ReposController=e.controller("ReposController",["$scope","$dialog","$window","$templateCache","$routeParams","$location","localStorage","$http","$timeout","ForgeApiURL","ServiceRegistry",function(t,n,i,r,a,o,s,l,c,u,d){function p(n){angular.forEach(n,function(n){e.log.info("Deleting "+angular.toJson(t.projects));var i=n.path;if(i){var r=e.repoApiUrl(u,i);l["delete"](r).success(function(e,t,n,i){h()}).error(function(t,n,i,a){e.log.warn("failed to load "+r+". status: "+n+" data: "+t);var o="Failed to POST to "+r+" got status: "+n;Core.notification("error",o)})}})}function h(){var n=t.login.authHeader,i=t.login.email||"";if(n){var r=e.reposApiUrl(u);r=e.createHttpUrl(r,n,i);var a={};l.get(r,a).success(function(r,a,o,l){t.login.failed=!1,t.login.loggedIn=!0,e.loggedInToGogs=!0;var c=null;200===a&&(r&&angular.isArray(r)||(r=[]),s.gogsAuthorization=n,s.gogsEmail=i,s.gogsUser=t.login.user||"",t.projects=_.sortBy(r,"name"),angular.forEach(t.projects,function(n){e.enrichRepo(n),c||(c=Core.pathGet(n,["owner","avatar_url"]),c&&(t.login.avatar_url=c,s.gogsAvatarUrl=c))}),t.fetched=!0)}).error(function(n,i,a,o){t.logout(),t.login.failed=!0,403!==i&&e.log.warn("failed to load "+r+". status: "+i+" data: "+n)})}}t.resourcePath=a.path,t.commandsLink=e.commandsLink;var f=d.serviceLink(e.gogsServiceName);f&&(t.signUpUrl=UrlHelpers.join(f,"user/sign_up"),t.forgotPasswordUrl=UrlHelpers.join(f,"user/forget_password")),t.login={authHeader:s.gogsAuthorization||"",relogin:!1,avatar_url:s.gogsAvatarUrl||"",user:s.gogsUser||"",password:"",email:s.gogsEmail||""},t.doLogin=function(){var e=t.login,n=e.user,i=e.password;if(n&&i){var r=n+":"+i;e.authHeader="Basic "+r.encodeBase64(),h()}},t.logout=function(){delete s.gogsAuthorization,t.login.authHeader=null,t.login.loggedIn=!1,t.login.failed=!1,e.loggedInToGogs=!1},t.tableConfig={data:"projects",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:o.search().q||""},columnDefs:[{field:"name",displayName:"Repository Name",cellTemplate:r.get("repoTemplate.html")},{field:"actions",displayName:"Actions",cellTemplate:r.get("repoActionsTemplate.html")}]},t.openCommands=function(){var n=null,i=t.tableConfig.selectedItems;_.isArray(i)&&i.length&&(n=i[0].path);var r=e.commandsLink(n);e.log.info("moving to commands link: "+r),o.path(r)},t["delete"]=function(e){UI.multiItemConfirmActionDialog({collection:e,index:"path",onClose:function(t){t&&p(e)},title:"Delete projects?",action:"The following projects will be removed (though the files will remain on your file system):",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()},h()}])}(Forge||(Forge={})),angular.module("hawtio-forge-templates",[]).run(["$templateCache",function(e){e.put("plugins/forge/html/command.html",'<div ng-controller="Forge.CommandController">\n  <div class="row">\n    <div class="col-md-12">\n      <span class="pull-right">&nbsp;</span>\n\n      <div class="user-icon-name pull-right" ng-show="user">\n        <a href="/forge/repos" title="Browse the repositories for {{user}}">\n          <img src="{{avatar_url}}" class="avatar-small-img" ng-show="avatar_url">\n        </a>\n        &nbsp;\n        <a href="/forge/repos" title="Browse the repositories for {{user}}">\n          {{user}}\n        </a>\n        <span ng-show="repoName">/\n          <a href="/forge/repos/{{repoName}}" title="Browse the {{repoName}}repository">\n            {{repoName}}\n          </a>\n        </span>\n      </div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <h3>{{schema.info.description}}</h3>\n    </div>\n  </div>\n  <div class="row" ng-show="executing">\n    <div class="col-md-12">\n      <p class="bg-info">executing...\n        <i class="fa fa-spinner fa-spin"></i>\n      </p>\n    </div>\n  </div>\n  <div class="row" ng-show="response">\n    <div class="col-md-12">\n      <p ng-show="response.message" ng-class="responseClass"><span class="response-message">{{response.message}}</span></p>\n      <p ng-show="response.output" ng-class="responseClass"><span class="response-output">{{response.output}}</span></p>\n      <p ng-show="response.err" ng-class="bg-warning"><span class="response-err">{{response.err}}</span></p>\n    </div>\n  </div>\n  <div class="row" ng-show="response.outputProperties.htmlUrl && id == \'project-new\'">\n    <div class="col-md-12">\n      <p class="text-primary">\n        Created project in a new\n        <a target="gitrepo" href="{{response.outputProperties.htmlUrl}}" title="view the newly created git repository for the project">\n          repository <b>{{response.outputProperties.fullName}}</b>\n        </a>\n      </p>\n    </div>\n  </div>\n  <div class="row" ng-show="response">\n    <div class="col-md-12">\n      <a class="btn btn-primary" href="{{commandsLink}}">Done</a>\n      <a class="btn btn-default" ng-click="response = null" ng-hide="wizardCompleted">Hide</a>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched && !wizardCompleted">\n        <div hawtio-form-2="schema" entity=\'entity\'></div>\n      </div>\n    </div>\n  </div>\n  <div class="row" ng-hide="wizardCompleted">\n    <div class="col-md-2">\n    </div>\n    <div class="col-md-2">\n      <button class="btn btn-primary"\n              title="Perform this command"\n              ng-show="fetched"\n              ng-disabled="executing"\n              ng-click="execute()">\n        Execute\n      </button>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/forge/html/commands.html",'<div class="row" ng-controller="Forge.CommandsController">\n  <div class="row">\n    <div class="col-md-12" ng-show="commands.length">\n      <span ng-show="!id">\n        Command: <hawtio-filter ng-model="tableConfig.filterOptions.filterText"\n                                css-class="input-xxlarge"\n                                placeholder="Filter commands..."\n                                save-as="fabric8-forge-command-filter"></hawtio-filter>\n      </span>\n      <span class="pull-right">&nbsp;</span>\n\n      <div class="user-icon-name pull-right" ng-show="user">\n        <a href="/forge/repos" title="Browse the repositories for {{user}}">\n          <img src="{{avatar_url}}" class="avatar-small-img" ng-show="avatar_url">\n        </a>\n        &nbsp;\n        <a href="/forge/repos" title="Browse the repositories for {{user}}">\n          {{user}}\n        </a>\n        <span ng-show="repoName">/\n          <a href="/forge/repos/{{repoName}}" title="Browse the {{repoName}}repository">\n            {{repoName}}\n          </a>\n        </span>\n      </div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div ng-hide="commands.length" class="align-center">\n          <p class="alert alert-info">There are no commands available!</p>\n        </div>\n        <div ng-show="commands.length">\n        </div>\n        <div ng-show="mode == \'table\'">\n          <table class="table table-condensed table-striped" hawtio-simple-table="tableConfig"></table>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div ng-show="fetched && commands.length && mode != \'table\'">\n    <div class="row">\n      <ul>\n        <li class="no-list command-selector-folder" ng-repeat="folder in commandSelector.folders"\n            ng-show="commandSelector.showFolder(folder)">\n          <div class="expandable" ng-class="commandSelector.isOpen(folder)">\n            <div title="{{folder.name}}" class="title">\n              <i class="expandable-indicator folder"></i> <span class="folder-title"\n                                                                ng-show="folder.name">{{folder.name}}</span><span\n                    class="folder-title" ng-hide="folder.name">Uncategorized</span>\n            </div>\n            <div class="expandable-body">\n              <ul>\n                <li class="no-list command" ng-repeat="command in folder.commands"\n                    ng-show="commandSelector.showCommand(command)">\n                  <div class="inline-block command-selector-name"\n                       ng-class="commandSelector.getSelectedClass(command)">\n                    <span class="contained c-max">\n                      <a href="{{command.$link}}"\n                         title="{{command.description}}">\n                        <span class="command-name">{{command.$shortName}}</span>\n                      </a>\n                    </span>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/forge/html/layoutForge.html",'<script type="text/ng-template" id="idTemplate.html">\n  <div class="ngCellText">\n    <a href=""\n       title="Execute command {{row.entity.name}}"\n       ng-href="{{row.entity.$link}}">\n      {{row.entity.name}}</a>\n  </div>\n</script>\n<script type="text/ng-template" id="repoTemplate.html">\n  <div class="ngCellText">\n    <a title="View repository {{row.entity.name}}"\n       ng-href="/forge/repos/{{row.entity.name}}">\n      {{row.entity.name}}\n    </a>\n  </div>\n</script>\n<script type="text/ng-template" id="repoActionsTemplate.html">\n  <div class="ngCellText">\n    <a ng-show="row.entity.$openProjectLink"\n       class="btn btn-primary" target="editor"\n       title="Open project {{row.entity.name}} in an editor"\n       ng-href="{{row.entity.$openProjectLink}}">\n      <i class="fa fa-pencil-square"></i>\n      Open\n    </a>\n    <a ng-show="row.entity.html_url"\n       class="btn btn-default" target="browse"\n       title="Browse project {{row.entity.name}}"\n       ng-href="{{row.entity.html_url}}">\n      <i class="fa fa-external-link"></i>\n      Repository\n    </a>\n    <a ng-show="row.entity.$buildsLink"\n       class="btn btn-default" target="builds"\n       title="View builds for this repository {{row.entity.owner.username}}/{{row.entity.name}}"\n       ng-href="{{row.entity.$buildsLink}}">\n      <i class="fa fa-cog"></i>\n      Builds\n    </a>\n    <a ng-show="row.entity.$commandsLink"\n       class="btn btn-default"\n       title="Commands for project {{row.entity.name}}"\n       ng-href="{{row.entity.$commandsLink}}">\n      <i class="fa fa-play-circle"></i>\n      Run...\n    </a>\n  </div>\n</script>\n<script type="text/ng-template" id="categoryTemplate.html">\n  <div class="ngCellText">\n    <span class="pod-label badge"\n          class="background-light-grey mouse-pointer">{{row.entity.category}}</span>\n  </div>\n</script>\n\n<div class="row">\n  <div class="wiki-icon-view">\n    <div class="row forge-view" ng-view></div>\n  </div>\n</div>\n'),e.put("plugins/forge/html/repo.html",'<div class="row" ng-controller="Forge.RepoController">\n  <div class="row">\n    <div class="col-md-12">\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n              href="/forge/repos"><i class="fa fa-list"></i></a>\n      <span class="pull-right">&nbsp;</span>\n      <a ng-show="entity.$commandsLink"\n         class="btn btn-default pull-right"\n         title="Commands for project {{entity.name}}"\n         ng-href="{{entity.$commandsLink}}">\n        <i class="fa fa-play-circle"></i>\n        Run...\n      </a>\n      <span class="pull-right" ng-show="entity.$buildsLink">&nbsp;</span>\n      <a ng-show="entity.$buildsLink"\n         class="btn btn-primary pull-right" target="builds"\n         title="View builds for this repository {{entity.owner.username}}/{{entity.name}}"\n         ng-href="{{entity.$buildsLink}}">\n        <i class="fa fa-cog"></i>\n        Builds\n      </a>\n      <span class="pull-right">&nbsp;</span>\n      <a ng-show="entity.html_url"\n         class="btn btn-default pull-right" target="browse"\n         title="Browse project {{entity.name}}"\n         ng-href="{{entity.html_url}}">\n        <i class="fa fa-external-link"></i>\n        Browse\n      </a>\n    </div>\n  </div>\n\n  <div ng-hide="fetched">\n    <div class="row">\n      <div class="col-md-12">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div ng-show="fetched">\n    <div class="row">\n      <div class="col-md-12">\n        <h3 title="repository for {{entity.owner.username}}">\n          <span ng-show="entity.owner.username">\n            <a href="/forge/repos" title="Browse the repositories for {{entity.owner.username}}">\n              <img src="{{entity.owner.avatar_url}}" class="avatar-small-img" ng-show="entity.owner.avatar_url">\n            </a>\n            &nbsp;\n            <a href="/forge/repos" title="Browse the repositories for {{entity.owner.username}}">\n              {{entity.owner.username}}\n            </a>\n             &nbsp;/&nbsp;\n          </span>\n          {{entity.name}}\n        </h3>\n      </div>\n    </div>\n\n    <div class="git-clone-tabs">\n      <div class="row">\n        <div class="col-md-12">\n          <div class="tabbable">\n            <div value="ssh" class="tab-pane" title="SSH" ng-show="entity.ssh_url">\n              <div class="git-clone-panel">\n                <p>to clone this git repository via <b>ssh</b> from the command line:</p>\n              </div>\n\n              <div class="highlight">\n                <pre>\n                  <code>git clone {{entity.ssh_url}}</code>\n                </pre>\n              </div>\n            </div>\n\n            <div value="http" class="tab-pane" title="HTTP" ng-show="entity.clone_url">\n              <div class="git-clone-panel">\n                <p>to clone this git repository via <b>http</b> from the command line:</p>\n              </div>\n\n              <div class="highlight">\n                <pre>\n                  <code>git clone {{entity.clone_url}}</code>\n                </pre>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/forge/html/repos.html",'<div class="row" ng-controller="Forge.ReposController">\n  <div class="row">\n    <div class="col-md-12">\n      <hawtio-filter ng-model="tableConfig.filterOptions.filterText"\n                     ng-show="projects.length"\n                     css-class="input-xxlarge"\n                     placeholder="Filter repositories..."></hawtio-filter>\n      <!--\n            <span class="pull-right">&nbsp;</span>\n            <button ng-show="fetched"\n                    class="btn btn-danger pull-right"\n                    ng-disabled="tableConfig.selectedItems.length == 0"\n                    ng-click="delete(tableConfig.selectedItems)">\n              <i class="fa fa-remove"></i> Delete\n            </button>\n      -->\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-primary pull-right" href="/forge/command/project-new"\n         ng-show="login.loggedIn"\n         title="Create a new project and repository">\n        <i class="fa fa-plus"></i> Create Project</a>\n      </a>\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right" ng-click="logout()" ng-show="login.loggedIn"\n         title="Log out from the git repository">\n        <i class="fa fa-sign-out"></i> Log out</a>\n      </a>\n      <span class="pull-right" ng-show="login.loggedIn">&nbsp;</span>\n      <div class="user-icon-name pull-right" ng-show="login.loggedIn">\n        <img src="{{login.avatar_url}}" class="avatar-small-img" ng-show="login.avatar_url">&nbsp;\n        {{login.user}}\n      </div>\n    </div>\n  </div>\n\n\n  <div ng-show="!login.authHeader || login.relogin">\n    <div ng-show="login.failed">\n      <div class="bg-danger">\n        <div class="invalid-login align-center">\n          <h3>Invalid login/password. Please try again!</h3>\n        </div>\n      </div>\n    </div>\n    <h2 ng-hide="login.failed">Please login to the git repository</h2>\n\n    <form>\n      <div class="form-group">\n        <label for="gitUsername">User name</label>\n        <input type="text" class="form-control" id="gitUsername" placeholder="Enter user name" required="true"\n               ng-model="login.user">\n      </div>\n      <div class="form-group">\n        <label for="gitPassword">Password</label>\n        <input type="password" class="form-control" id="gitPassword" placeholder="Password" required="true"\n               ng-model="login.password">\n      </div>\n      <div class="form-group">\n        <label for="gitEmail">Email address</label>\n        <input type="email" class="form-control" id="gitEmail" placeholder="Enter email" required="true"\n               ng-model="login.email">\n      </div>\n      <div class="form-group">\n        <button type="submit" class="btn btn-primary" ng-click="doLogin()"\n                ng-disabled="!login.user || !login.password || !login.email">\n          <i class="fa fa-sign-in"></i> Sign In\n        </button>\n      </div>\n\n      <div class="form-group" ng-show="forgotPasswordUrl">\n          <a href="{{forgotPasswordUrl}}">Forgot password?</a>\n      </div>\n\n      <div class="form-group" ng-show="signUpUrl">\n        <a href="{{signUpUrl}}">Need an account? Sign up now.</a>\n      </div>\n    </form>\n  </div>\n\n  <div ng-hide="fetched || !login.authHeader || login.relogin">\n    <div class="row">\n      <div class="col-md-12">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div ng-show="fetched && login.authHeader">\n    <div ng-hide="projects.length" class="align-center">\n      <div class="padded-div">\n        <div class="row">\n          <div class="col-md-12">\n            <p class="alert alert-info">There are no git repositories yet. Please create one!</p>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div ng-show="projects.length">\n      <div class="row">\n        <div class="col-md-12">\n          <table class="table table-condensed table-striped" hawtio-simple-table="tableConfig"></table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),hawtioPluginLoader.addModule("hawtio-forge-templates"),function(e,t){var n=function(t){function i(){return y.authServerUrl+"/realms/"+encodeURIComponent(y.realm)}function r(){return e.location.origin?e.location.origin:e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")}function a(e,t){var n=e.code,r=e.error,a=e.prompt;if(n){var o="code="+n,s=i()+"/tokens/access/codes",c=new XMLHttpRequest;c.open("POST",s,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),y.clientId&&y.clientSecret?c.setRequestHeader("Authorization","Basic "+btoa(y.clientId+":"+y.clientSecret)):o+="&client_id="+encodeURIComponent(y.clientId),o+="&redirect_uri="+e.redirectUri,c.withCredentials=!0,c.onreadystatechange=function(){if(4==c.readyState)if(200==c.status){var e=JSON.parse(c.responseText);l(e.access_token,e.refresh_token,e.id_token),y.onAuthSuccess&&y.onAuthSuccess(),t&&t.setSuccess()}else y.onAuthError&&y.onAuthError(),t&&t.setError()},c.send(o)}else r&&("none"!=a?(y.onAuthError&&y.onAuthError(),t&&t.setError()):t&&t.setSuccess())}function o(e){var n,i=h();if(t?"string"==typeof t&&(n=t):n="keycloak.json",n){var r=new XMLHttpRequest;r.open("GET",n,!0),r.setRequestHeader("Accept","application/json"),r.onreadystatechange=function(){if(4==r.readyState)if(200==r.status){var e=JSON.parse(r.responseText);y.authServerUrl=e["auth-server-url"],y.realm=e.realm,y.clientId=e.resource,y.clientSecret=(e.credentials||{}).secret,i.setSuccess()}else i.setError()},r.send()}else{if(!t.url)for(var a=document.getElementsByTagName("script"),o=0;o<a.length;o++)if(a[o].src.match(/.*keycloak\.js/)){t.url=a[o].src.substr(0,a[o].src.indexOf("/js/keycloak.js"));break}if(!t.realm)throw"realm missing";if(!t.clientId)throw"clientId missing";y.authServerUrl=t.url,y.realm=t.realm,y.clientId=t.clientId,y.clientSecret=(t.credentials||{}).secret,i.setSuccess()}return i.promise}function s(){y.token&&(l(null,null,null),y.onAuthLogout&&y.onAuthLogout(),y.loginRequired&&y.login())}function l(e,t,n){if((e||t)&&f(),e){y.token=e,y.tokenParsed=c(e);var i=y.realm+"/"+y.tokenParsed.sub;y.tokenParsed.session_state&&(i=i+"/"+y.tokenParsed.session_state),y.sessionId=i,y.authenticated=!0,y.subject=y.tokenParsed.sub,y.realmAccess=y.tokenParsed.realm_access,y.resourceAccess=y.tokenParsed.resource_access}else delete y.token,delete y.tokenParsed,delete y.subject,delete y.realmAccess,delete y.resourceAccess,y.authenticated=!1;t?(y.refreshToken=t,y.refreshTokenParsed=c(t)):(delete y.refreshToken,delete y.refreshTokenParsed),n?(y.idToken=n,y.idTokenParsed=c(n)):(delete y.idToken,delete y.idTokenParsed)}function c(e){switch(e=e.split(".")[1],e=e.replace("/-/g","+"),e=e.replace("/_/g","/"),e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Invalid token"}return e=(e+"===").slice(0,e.length+e.length%4),e=e.replace(/-/g,"+").replace(/_/g,"/"),e=decodeURIComponent(escape(atob(e))),e=JSON.parse(e)}function u(){for(var e=[],t="0123456789abcdef",n=0;36>n;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var i=e.join("");return i}function d(){var e="<id: "+y.callback_id++ +Math.random()+">";return e}function p(e){if(-1!=e.indexOf("?")){var t={};t.newUrl=e.split("?")[0];for(var n=e.split("?")[1].split("&"),i=0;i<n.length;i++){var r=n[i].split("=");switch(decodeURIComponent(r[0])){case"code":t.code=r[1];break;case"error":t.error=r[1];break;case"state":t.state=decodeURIComponent(r[1]);break;case"redirect_fragment":t.fragment=decodeURIComponent(r[1]);break;case"prompt":t.prompt=r[1];break;default:t.newUrl+=(-1==t.newUrl.indexOf("?")?"?":"&")+r[0]+"="+r[1]}}var a=sessionStorage.oauthState&&JSON.parse(sessionStorage.oauthState);if(a&&(t.code||t.error)&&t.state&&t.state==a.state)return delete sessionStorage.oauthState,t.redirectUri=a.redirectUri,t.fragment&&(t.newUrl+="#"+t.fragment),t}}function h(){var e={setSuccess:function(t){e.success=!0,e.result=t,e.successCallback&&e.successCallback(t)},setError:function(t){e.error=!0,e.result=t,e.errorCallback&&e.errorCallback(t)},promise:{success:function(t){return e.success?t(e.result):e.error||(e.successCallback=t),e.promise},error:function(t){return e.error?t(e.result):e.success||(e.errorCallback=t),e.promise}}};return e}function f(){var t=h();if(w.enable){if(w.iframe)return void t.setSuccess();var n=document.createElement("iframe");n.onload=function(){var e=i();w.iframeOrigin="/"===e.charAt(0)?r():e.substring(0,e.indexOf("/",8)),w.iframe=n,t.setSuccess()};var a=i()+"/protocol/openid-connect/login-status-iframe.html?client_id="+encodeURIComponent(y.clientId)+"&origin="+r();n.setAttribute("src",a),n.style.display="none",document.body.appendChild(n);var o=function(e){if(e.origin===w.iframeOrigin){var t=JSON.parse(e.data),n=w.callbackMap[t.callbackId];delete w.callbackMap[t.callbackId],y.sessionId&&y.sessionId!=t.session||!t.loggedIn?(s(),n.setError()):n.setSuccess()}};e.addEventListener("message",o,!1);var l=function(){g(),y.token&&setTimeout(l,1e3*w.interval)};return setTimeout(l,1e3*w.interval),t.promise}}function g(){var e=h();if(w.iframe&&w.iframeOrigin){var t={};t.callbackId=d(),w.callbackMap[t.callbackId]=e;var n=w.iframeOrigin;w.iframe.contentWindow.postMessage(JSON.stringify(t),n)}else e.setSuccess();return e.promise}function m(t){if(!t||"default"==t)return{login:function(t){return e.location.href=y.createLoginUrl(t),h().promise},logout:function(t){return e.location.href=y.createLogoutUrl(t),h().promise},accountManagement:function(){return e.location.href=y.createAccountUrl(),h().promise},redirectUri:function(e){if(e&&e.redirectUri)return e.redirectUri;if(y.redirectUri)return y.redirectUri;var t=location.href;return location.hash&&(t=t.substring(0,location.href.indexOf("#")),t+=(-1==t.indexOf("?")?"?":"&")+"redirect_fragment="+encodeURIComponent(location.hash.substring(1))),t}};if("cordova"==t)return w.enable=!1,{login:function(t){var n=h(),i="location=no";t&&"none"==t.prompt&&(i+=",hidden=yes");var r,o,s=y.createLoginUrl(t),l=e.open(s,"_blank",i);return l.addEventListener("loadstart",function(e){0==e.url.indexOf("http://localhost")&&(r=p(e.url),l.close())}),l.addEventListener("loaderror",function(e){0!=e.url.indexOf("http://localhost")&&(o=!0,l.close())}),l.addEventListener("exit",function(e){o||!r?n.setError():a(r,n)}),n.promise},logout:function(t){var n,i=h(),r=y.createLogoutUrl(t),a=e.open(r,"_blank","location=no,hidden=yes");return a.addEventListener("loadstart",function(e){0==e.url.indexOf("http://localhost")&&a.close()}),a.addEventListener("loaderror",function(e){0!=e.url.indexOf("http://localhost")&&(n=!0,a.close())}),a.addEventListener("exit",function(e){n?i.setError():(s(),i.setSuccess())}),i.promise},accountManagement:function(){var t=y.createAccountUrl(),n=e.open(t,"_blank","location=no");n.addEventListener("loadstart",function(e){0==e.url.indexOf("http://localhost")&&n.close()})},redirectUri:function(e){return"http://localhost"}};throw"invalid adapter type: "+t}if(!(this instanceof n))return new n(t);var v,y=this,b=[],w={enable:!0,callbackMap:[],interval:5};y.init=function(n){function i(){var t=p(e.location.href);if(t)return e.history.replaceState({},null,t.newUrl),void a(t,s);if(n){var i=function(e){e||(r.prompt="none"),y.login(r).success(function(){s.setSuccess()}).error(function(){s.setError()})};if(n.token||n.refreshToken)l(n.token,n.refreshToken,n.idToken),s.setSuccess();else if(n.onLoad){var r={};switch(n.onLoad){case"check-sso":w.enable?f().success(function(){g().success(function(){i(!1)}).error(function(){s.setSuccess()})}):i(!1);break;case"login-required":i(!0);break;default:throw"Invalid value for onLoad"}}}else s.setSuccess()}y.authenticated=!1,v=e.Cordova?m("cordova"):m(),n&&("undefined"!=typeof n.checkLoginIframe&&(w.enable=n.checkLoginIframe),n.checkLoginIframeInterval&&(w.interval=n.checkLoginIframeInterval),"login-required"===n.onLoad&&(y.loginRequired=!0));var r=h(),s=h();s.promise.success(function(){y.onReady&&y.onReady(y.authenticated),r.setSuccess(y.authenticated)}).error(function(){r.setError()});var c=o(t);return c.success(i),c.error(function(){r.setError()}),r.promise},y.login=function(e){return v.login(e)},y.createLoginUrl=function(e){var t=u(),n=v.redirectUri(e);e&&e.prompt&&(n+=(-1==n.indexOf("?")?"?":"&")+"prompt="+e.prompt),sessionStorage.oauthState=JSON.stringify({state:t,redirectUri:encodeURIComponent(n)});var r=i()+"/tokens/login?client_id="+encodeURIComponent(y.clientId)+"&redirect_uri="+encodeURIComponent(n)+"&state="+encodeURIComponent(t)+"&response_type=code";return e&&e.prompt&&(r+="&prompt="+e.prompt),e&&e.loginHint&&(r+="&login_hint="+e.loginHint),r},y.logout=function(e){return v.logout(e)},y.createLogoutUrl=function(e){var t=i()+"/tokens/logout?redirect_uri="+encodeURIComponent(v.redirectUri(e));return t},y.createAccountUrl=function(e){var t=i()+"/account?referrer="+encodeURIComponent(y.clientId)+"&referrer_uri="+encodeURIComponent(v.redirectUri(e));return t},y.accountManagement=function(){return v.accountManagement()},y.hasRealmRole=function(e){var t=y.realmAccess;return!!t&&t.roles.indexOf(e)>=0},y.hasResourceRole=function(e,t){if(!y.resourceAccess)return!1;var n=y.resourceAccess[t||y.clientId];return!!n&&n.roles.indexOf(e)>=0},y.loadUserProfile=function(){var e=i()+"/account",t=new XMLHttpRequest;t.open("GET",e,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+y.token);var n=h();return t.onreadystatechange=function(){4==t.readyState&&(200==t.status?(y.profile=JSON.parse(t.responseText),n.setSuccess(y.profile)):n.setError())},t.send(),n.promise},y.isTokenExpired=function(e){if(!y.tokenParsed||!y.refreshToken)throw"Not authenticated";var t=y.tokenParsed.exp-(new Date).getTime()/1e3;return e&&(t-=e),0>t},y.updateToken=function(e){var t=h();if(!y.tokenParsed||!y.refreshToken)return t.setError(),t.promise;e=e||5;var n=function(){if(y.isTokenExpired(e)){var n="grant_type=refresh_token&refresh_token="+y.refreshToken,r=i()+"/tokens/refresh";if(b.push(t),1==b.length){var a=new XMLHttpRequest;a.open("POST",r,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),y.clientId&&y.clientSecret?a.setRequestHeader("Authorization","Basic "+btoa(y.clientId+":"+y.clientSecret)):n+="&client_id="+encodeURIComponent(y.clientId),a.onreadystatechange=function(){if(4==a.readyState)if(200==a.status){var e=JSON.parse(a.responseText);l(e.access_token,e.refresh_token,e.id_token),y.onAuthRefreshSuccess&&y.onAuthRefreshSuccess();for(var t=b.pop();null!=t;t=b.pop())t.setSuccess(!0)}else{y.onAuthRefreshError&&y.onAuthRefreshError();for(var t=b.pop();null!=t;t=b.pop())t.setError(!0)}},a.send(n)}}else t.setSuccess(!1)};if(w.enable){var r=g();r.success(function(){n()}).error(function(){t.setError()})}else n();return t.promise},y.callback_id=0};"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=n:(e.Keycloak=n,"function"==typeof define&&define.amd&&define("keycloak",[],function(){return n}))}(window),function(e,t,n){"use strict";t.module("ngIdle",["ngIdle.keepalive","ngIdle.idle","ngIdle.countdown","ngIdle.title","ngIdle.localStorage"]),t.module("ngIdle.keepalive",[]).provider("Keepalive",function(){var e={http:null,interval:600};this.http=function(n){if(!n)throw new Error("Argument must be a string containing a URL, or an object containing the HTTP request configuration.");t.isString(n)&&(n={url:n,method:"GET"}),n.cache=!1,e.http=n};var n=this.interval=function(t){if(t=parseInt(t),isNaN(t)||0>=t)throw new Error("Interval must be expressed in seconds and be greater than 0.");e.interval=t};this.$get=["$rootScope","$log","$interval","$http",function(i,r,a,o){function s(e,t){i.$broadcast("KeepaliveResponse",e,t)}function l(){i.$broadcast("Keepalive"),t.isObject(e.http)&&o(e.http).success(s).error(s)}var c={ping:null};return{_options:function(){return e},setInterval:n,start:function(){return a.cancel(c.ping),c.ping=a(l,1e3*e.interval),c.ping},stop:function(){a.cancel(c.ping)},ping:function(){l()}}}]}),t.module("ngIdle.idle",["ngIdle.keepalive","ngIdle.localStorage"]).provider("Idle",function(){var e={idle:1200,timeout:30,autoResume:"idle",interrupt:"mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove scroll",keepalive:!0},n=this.timeout=function(n){if(n===!1)e.timeout=0;else{if(!(t.isNumber(n)&&n>=0))throw new Error("Timeout must be zero or false to disable the feature, or a positive integer (in seconds) to enable it.");e.timeout=n}};this.interrupt=function(t){e.interrupt=t};var i=this.idle=function(t){if(0>=t)throw new Error("Idle must be a value in seconds, greater than 0.");e.idle=t};this.autoResume=function(t){e.autoResume=t===!0?"idle":t===!1?"off":t},this.keepalive=function(t){e.keepalive=t===!0},this.$get=["$interval","$log","$rootScope","$document","Keepalive","IdleLocalStorage","$window",function(r,a,o,s,l,c,u){function d(){e.keepalive&&(b.running&&l.ping(),l.start())}function p(){e.keepalive&&l.stop()}function h(){b.idling=!b.idling;var t=b.idling?"Start":"End";o.$broadcast("Idle"+t),b.idling?(p(),e.timeout&&(b.countdown=e.timeout,f(),b.timeout=r(f,1e3,e.timeout,!1))):d(),r.cancel(b.idle)}function f(){return b.countdown<=0?void g():(o.$broadcast("IdleWarn",b.countdown),void b.countdown--)}function g(){p(),r.cancel(b.idle),
r.cancel(b.timeout),b.idling=!0,b.running=!1,b.countdown=0,o.$broadcast("IdleTimeout")}function m(e,t,n){var i=e.running();e.unwatch(),t(n),i&&e.watch()}function v(){var e=c.get("expiry");return new Date(e.time)}function y(e){e?c.set("expiry",{id:w,time:e}):c.remove("expiry")}var b={idle:null,timeout:null,idling:!1,running:!1,countdown:null},w=(new Date).getTime(),x={_options:function(){return e},_getNow:function(){return new Date},setIdle:function(e){m(this,i,e)},setTimeout:function(e){m(this,n,e)},isExpired:function(){var e=v();return e&&e<=this._getNow()},running:function(){return b.running},idling:function(){return b.idling},watch:function(t){r.cancel(b.idle),r.cancel(b.timeout);var n=e.timeout?e.timeout:0;t||y(new Date((new Date).getTime()+1e3*(e.idle+n))),b.idling?h():b.running||d(),b.running=!0,b.idle=r(h,1e3*e.idle,0,!1)},unwatch:function(){r.cancel(b.idle),r.cancel(b.timeout),b.idling=!1,b.running=!1,y(null),p()},interrupt:function(t){return b.running?e.timeout&&this.isExpired()?void g():void(("idle"===e.autoResume||"notIdle"===e.autoResume&&!b.idling)&&this.watch(t)):void 0}};s.find("body").on(e.interrupt,function(){x.interrupt()});var k=function(e){if("ngIdle.expiry"===e.key&&e.newValue!==e.oldValue){var n=t.fromJson(e.newValue);if(n.id===w)return;x.interrupt(!0)}};return u.addEventListener?u.addEventListener("storage",k,!1):u.attachEvent("onstorage",k),x}]}),t.module("ngIdle.countdown",[]).directive("idleCountdown",function(){return{restrict:"A",scope:{value:"=idleCountdown"},link:function(e){e.$on("IdleWarn",function(t,n){e.$apply(function(){e.value=n})}),e.$on("IdleTimeout",function(){e.$apply(function(){e.value=0})})}}}),t.module("ngIdle.title",[]).factory("Title",["$document","$interpolate",function(e,n){function i(e,t,n){return Array(t-String(e).length+1).join(n||"0")+e}var r={original:null,idle:"{{minutes}}:{{seconds}} until your session times out!",timedout:"Your session has expired."};return{original:function(e){return t.isUndefined(e)?r.original:void(r.original=e)},store:function(e){(e||!r.original)&&(r.original=this.value())},value:function(n){return t.isUndefined(n)?e[0].title:void(e[0].title=n)},idleMessage:function(e){return t.isUndefined(e)?r.idle:void(r.idle=e)},timedOutMessage:function(e){return t.isUndefined(e)?r.timedout:void(r.timedout=e)},setAsIdle:function(e){this.store();var t={totalSeconds:e};t.minutes=Math.floor(e/60),t.seconds=i(e-60*t.minutes,2),this.value(n(this.idleMessage())(t))},setAsTimedOut:function(){this.store(),this.value(this.timedOutMessage())},restore:function(){this.original()&&this.value(this.original())}}}]).directive("title",["Title",function(e){return{restrict:"E",link:function(t,n,i){i.idleDisabled||(e.store(!0),t.$on("IdleWarn",function(t,n){e.setAsIdle(n)}),t.$on("IdleEnd",function(){e.restore()}),t.$on("IdleTimeout",function(){e.setAsTimedOut()}))}}}]),t.module("ngIdle.localStorage",[]).service("IdleLocalStorage",["$window",function(e){var n=e.localStorage;return{set:function(e,i){n.setItem("ngIdle."+e,t.toJson(i))},get:function(e){return t.fromJson(n.getItem("ngIdle."+e))},remove:function(e){n.removeItem("ngIdle."+e)}}}])}(window,window.angular),hawtioPluginLoader.registerPreBootstrapTask({name:"hawtio-oauth",depends:["KeycloakOAuth","GoogleOAuth","OpenShiftOAuth"],task:function(e){Logger.get("hawtio-oauth").info("All oauth plugins have executed"),e()}});var GoogleOAuth;!function(e){e.pluginName="hawtio-google-oauth",e.log=Logger.get(e.pluginName)}(GoogleOAuth||(GoogleOAuth={}));var GoogleOAuth;!function(e){function t(e,t){return $.ajax(_.extend(e,{beforeSend:function(e){t.token&&e.setRequestHeader("Authorization","Bearer "+t.token)}}))}function n(e){$.ajaxSetup({beforeSend:function(t){var n=e.token;n&&t.setRequestHeader("Authorization","Bearer "+n)}})}function i(t,n){console.debug("Logging out!");var i=(l()||n.token,new URI(window.location.href).removeQuery("code")),a=i.toString();e.log.debug("Now logging in with URI: "+a),s(),r(GoogleOAuthConfig,{uri:a})}function r(t,n){var i=t.clientId,r=t.redirectURI,a=t.scope,o=t.authenticationURI,s=new URI(o);s.query({response_type:"code",client_id:i,redirect_uri:r,scope:a,approval_prompt:"force"});var l=s.toString();e.log.debug("Redirecting to URI: ",l),window.location.href=l}function a(t,n,i){var r=t.clientId,a=t.clientSecret,o=t.redirectURI,s=new URI(t.tokenURI||"https://www.googleapis.com/oauth2/v3/token");s.query({code:n,client_id:r,client_secret:a,redirect_uri:o,grant_type:"authorization_code"});var l=s.toString();return e.log.debug("Redirecting to URI: ",l),$.ajax({type:"POST",url:l})}function o(t){if(e.log.debug("query: ",t),t.access_token&&"Bearer"===t.token_type){e.log.debug("Got token");var n=Core.getLocalStorage(),i={type:t.token_type.toLowerCase(),token:t.access_token,expiry:t.expires_in};return n[p]=angular.toJson(i),delete t.token_type,delete t.access_token,delete t.expires_in,i}return void e.log.info("No token in URI")}function s(){var e=Core.getLocalStorage();delete e[p]}function l(){var t=Core.getLocalStorage(),n=t[p];if(n)try{return angular.fromJson(n)}catch(i){e.log.warn("Failed to parse token json: "+n+". "+i)}return null}function c(e){var t=Core.getLocalStorage();t[p]=angular.toJson(e)}function u(t){var n=Core.getLocalStorage(),i=void 0;if(p in n)try{i=angular.fromJson(n[p])}catch(r){s(),e.log.error("Error extracting googleAuthCreds value: ",r)}return i||(i=o(t)),e.log.debug("Using creds: ",i),i}function d(e){return e.query(!0).code}var p="googleAuthCreds";e.authenticatedHttpRequest=t,e.setupJQueryAjax=n,e.doLogout=i,e.doLogin=r,e.exchangeCodeForToken=a,e.extractToken=o,e.clearTokenStorage=s,e.getTokenStorage=l,e.setTokenStorage=c,e.checkToken=u,e.checkAuthorizationCode=d}(GoogleOAuth||(GoogleOAuth={}));var GoogleOAuth;!function(e){e._module=angular.module(e.pluginName,[]);var t=null;hawtioPluginLoader.addModule(e.pluginName),e._module.config(["$provide",function(n){n.decorator("userDetails",["$delegate",function(n){return t?_.merge(n,t,{username:t.fullName,logout:function(){e.doLogout(GoogleOAuthConfig,t)}}):n}])}]),e._module.config(["$httpProvider",function(e){t&&t.token&&(e.defaults.headers.common={Authorization:"Bearer "+t.token})}]),e._module.run(["userDetails",function(t){e.log.debug("loaded, userDetails: ",t)}]),hawtioPluginLoader.registerPreBootstrapTask({name:"GoogleOAuth",task:function(n){if(!window.GoogleOAuthConfig)return e.log.debug("oauth disabled"),void n();if(!(GoogleOAuthConfig.clientId&&GoogleOAuthConfig.redirectURI&&GoogleOAuthConfig.scope&&GoogleOAuthConfig.authenticationURI))return e.log.warn("Invalid oauth config, disabled oauth",GoogleOAuthConfig),void n();e.log.debug("config: ",GoogleOAuthConfig);var i=new URI(window.location.href);try{var r=e.getTokenStorage();if(r&&r.token)return t=r,e.setupJQueryAjax(r),void n();e.clearTokenStorage()}catch(a){e.clearTokenStorage()}var o=e.checkAuthorizationCode(i);o?(e.log.info("found an authorization code so need to go back to google and get a token"),e.exchangeCodeForToken(GoogleOAuthConfig,o,{uri:i.toString()}).done(function(n){if(n&&n.access_token){var r={token:n.access_token,expiry:n.expires_in,type:n.token_type};t=_.merge(r,n,{provider:e.pluginName}),e.setTokenStorage(t),e.setupJQueryAjax(t),e.log.info("Logged in with URL: "+window.location.href);var a=new URI(window.location.href).removeQuery("code"),o=a.toString();e.log.info("Now redirecting to: "+o),window.location.href=o}else e.log.debug("No access token received!"),e.clearTokenStorage(),e.doLogin(GoogleOAuthConfig,{uri:i.toString()})}).fail(function(t,n,i){e.log.error("Failed to fetch auth code, status: ",n," error: ",i)}).always(function(){e.log.debug("Next"),n()})):(e.clearTokenStorage(),e.doLogin(GoogleOAuthConfig,{uri:i.toString()}))}})}(GoogleOAuth||(GoogleOAuth={}));var HawtioKeycloak;!function(e){e.pluginName="hawtio-keycloak",e.log=Logger.get(e.pluginName),e.keycloak=void 0}(HawtioKeycloak||(HawtioKeycloak={}));var HawtioKeycloak;!function(e){e._module=angular.module(e.pluginName,[]);var t=void 0;hawtioPluginLoader.addModule(e.pluginName),e._module.config(["$provide","$httpProvider",function(i,r){i.decorator("userDetails",["$delegate",function(n){return t?_.merge(n,t,{logout:function(){t&&e.keycloak&&e.keycloak.logout()}}):n}]),e.keycloak&&r.interceptors.push(n.Factory)}]),e._module.run(["userDetails","Idle","$rootScope",function(t,n,i){e.keycloak?(e.log.debug("Enabling idle timeout"),n.watch(),i.$on("IdleTimeout",function(){e.log.debug("Idle timeout triggered")}),i.$on("Keepalive",function(){var t=e.keycloak;t&&t.updateToken(30)})):e.log.debug("Not enabling idle timeout")}]),hawtioPluginLoader.registerPreBootstrapTask({name:"KeycloakOAuth",task:function(n){if(!window.KeycloakConfig)return e.log.debug("Keycloak disabled"),void n();var i=e.keycloak=Keycloak(KeycloakConfig);i.init().success(function(r){e.log.debug("Authenticated: ",r),r?i.loadUserProfile().success(function(e){t=e,t.token=i.token,n()}).error(function(){e.log.debug("Failed to load user profile"),n()}):i.login({redirectUri:window.location.href})}).error(function(){e.log.debug("Failed to initialize Keycloak, token unavailable"),n()})}});var n=function(){function t(t){var n=this;this.$q=t,this.request=function(t){var i,r;return i=function(){var n=e.keycloak;return n.updateToken(5).success(function(){var n=e.keycloak.token;return t.headers.Authorization="Bearer "+n,r.notify(),r.resolve(t)}).error(function(){console.log("Couldn't update token")})},r=n.$q.defer(),i(),n.$q.when(r.promise)},this.responseError=function(t){return 401===t.status&&e.keycloak.logout(),n.$q.reject(t)}}return t.Factory=function(e){return new t(e)},t.$inject=["$q"],t}();e._module.requires.push("ngIdle")}(HawtioKeycloak||(HawtioKeycloak={}));var OSOAuth;!function(e){e.pluginName="hawtio-os-oauth",e.log=Logger.get(e.pluginName)}(OSOAuth||(OSOAuth={}));var OSOAuth;!function(e){function t(e,t){return $.ajax(_.extend(e,{beforeSend:function(e){t.token&&e.setRequestHeader("Authorization","Bearer "+t.token)}}))}function n(e,n){var r=new URI(window.location.href),o=new URI(e.oauth_authorize_uri);o.path("/oapi/v1/oAuthAccessTokens"+n.token),t({type:"DELETE",url:o.toString()},n).always(function(){a(),i(OSOAuthConfig,{uri:r.toString()})})}function i(t,n){var i=t.oauth_client_id,r=t.oauth_authorize_uri,a=new URI(r);a.query({client_id:i,response_type:"token",state:n.uri,redirect_uri:n.uri});var o=a.toString();e.log.debug("Redirecting to URI: ",o),window.location.href=o}function r(t){var n=t.query(!0);e.log.debug("Query: ",n);var i=new URI("?"+t.fragment()).query(!0);if(e.log.debug("FragmentParams: ",i),i.access_token&&"bearer"===i.token_type){e.log.debug("Got token");var r=Core.getLocalStorage(),a={token_type:i.token_type,access_token:i.access_token,expires_in:i.expires_in};r.osAuthCreds=angular.toJson(a),delete i.token_type,delete i.access_token,delete i.expires_in,t.fragment("").query(i);var o=t.toString();return e.log.debug("redirecting to: ",o),window.location.href=o,a}return void e.log.debug("No token in URI")}function a(){var e=Core.getLocalStorage();delete e[s]}function o(t){var n=Core.getLocalStorage(),i=void 0;if(s in n)try{i=angular.fromJson(n[s])}catch(o){a(),e.log.debug("Error extracting osAuthCreds value: ",o)}return i||(i=r(t)),e.log.debug("Using creds: ",i),i}var s="osAuthCreds";e.authenticatedHttpRequest=t,e.doLogout=n,e.doLogin=i,e.extractToken=r,e.clearTokenStorage=a,e.checkToken=o}(OSOAuth||(OSOAuth={}));var OSOAuth;!function(e){e._module=angular.module(e.pluginName,[]);var t=null;e._module.config(["$provide",function(n){n.decorator("userDetails",["$delegate",function(n){return t?_.merge(n,t,{username:t.fullName,logout:function(){e.doLogout(OSOAuthConfig,t)}}):n}])}]),e._module.config(["$httpProvider",function(e){t&&t.token&&(e.defaults.headers.common={Authorization:"Bearer "+t.token})}]),e._module.run(["userDetails",function(t){e.log.debug("loaded, userDetails: ",t)}]),hawtioPluginLoader.registerPreBootstrapTask({name:"OpenShiftOAuth",task:function(n){if(!window.OSOAuthConfig)return e.log.debug("oauth disabled"),void n();if(!OSOAuthConfig.oauth_client_id||!OSOAuthConfig.oauth_authorize_uri)return e.log.debug("Invalid oauth config, disabled oauth"),void n();e.log.debug("config: ",OSOAuthConfig);var i=new URI(window.location.href),r=e.checkToken(i);if(r){var a={token:r.access_token,expiry:r.expires_in,type:r.token_type},o=new URI(OSOAuthConfig.oauth_authorize_uri);o.path("/oapi/v1/users/~"),e.authenticatedHttpRequest({type:"GET",url:o.toString()},a).done(function(n){t=_.merge(a,n,{provider:e.pluginName}),$.ajaxSetup({beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+a.token)}})}).fail(function(t,n,r){e.log.error("Failed to fetch user info, status: ",n," error: ",r),e.clearTokenStorage(),e.doLogin(OSOAuthConfig,{uri:i.toString()})}).always(function(){n()})}else e.clearTokenStorage(),e.doLogin(OSOAuthConfig,{uri:i.toString()})}}),hawtioPluginLoader.addModule(e.pluginName)}(OSOAuth||(OSOAuth={})),angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",uiCodemirrorDirective),uiCodemirrorDirective.$inject=["$timeout","uiCodemirrorConfig"];var Kubernetes;!function(e){var t=function(){function e(){}return Object.defineProperty(e.prototype,"NAMESPACE_STORAGE_KEY",{get:function(){return"k8sSelectedNamespace"},enumerable:!0,configurable:!0}),e}();e.consts=t,e.Constants=new t;var n=function(){function e(){}return Object.defineProperty(e,"NAMESPACES",{get:function(){return"namespaces"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ENDPOINTS",{get:function(){return"endpoints"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PODS",{get:function(){return"pods"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"REPLICATION_CONTROLLERS",{get:function(){return"replicationcontrollers"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SERVICES",{get:function(){return"services"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TEMPLATES",{get:function(){return"templates"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ROUTES",{get:function(){return"routes"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BUILD_CONFIGS",{get:function(){return"buildconfigs"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BUILDS",{get:function(){return"builds"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DEPLOYMENT_CONFIGS",{get:function(){return"deploymentconfigs"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IMAGE_STREAMS",{get:function(){return"imagestreams"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"POLICIES",{get:function(){return"policies"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"POLICY_BINDINGS",{get:function(){return"policybindings"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ROLE_BINDINGS",{get:function(){return"rolebindings"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ROLES",{get:function(){return"roles"},enumerable:!0,configurable:!0}),e}();e.WatchTypes=n;var i=function(){function e(){}return Object.defineProperty(e,"k8sTypes",{get:function(){return[n.ENDPOINTS,n.PODS,n.REPLICATION_CONTROLLERS,n.SERVICES]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"osTypes",{get:function(){return[n.TEMPLATES,n.BUILD_CONFIGS,n.ROUTES,n.BUILDS,n.BUILD_CONFIGS,n.DEPLOYMENT_CONFIGS,n.IMAGE_STREAMS,n.POLICIES,n.POLICY_BINDINGS]},enumerable:!0,configurable:!0}),e}();e.NamespacedTypes=i;var r=function(){function e(){}return Object.defineProperty(e,"ANY",{get:function(){return"*"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ADDED",{get:function(){return"ADDED"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MODIFIED",{get:function(){return"MODIFIED"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DELETED",{get:function(){return"DELETED"},enumerable:!0,configurable:!0}),e}();e.WatchActions=r}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){function t(){var e=we();return e?"/namespaces/"+e:""}function n(){var t=Core.pathGet(e.osConfig,["api","k8s","prefix"]);return t||(t="api"),Core.trimLeading(t,"/")}function i(){var t=Core.pathGet(e.osConfig,["api","openshift","prefix"]);return t||(t="oapi"),Core.trimLeading(t,"/")}function r(){return e.masterUrl||""}function a(){return UrlHelpers.join(n(),e.defaultApiVersion)}function o(){return UrlHelpers.join(i(),e.defaultOSApiVersion)}function s(t){return t===e.WatchTypes.NAMESPACES?a():_.any(e.NamespacedTypes.k8sTypes,function(e){return e===t})?a():_.any(e.NamespacedTypes.osTypes,function(e){return e===t})?o():null}function l(){return UrlHelpers.join(r(),a())}function c(){return UrlHelpers.join(r(),o())}function u(t,n,i,r){var a=C(t);if("List"===a)return e.log.debug("Object is a list, deploying all objects"),void _.forEach(t.items,function(t){e.log.debug("Deploying: ",t),u(t,n,i,r)});if(!a)return void e.log.debug("Object: ",t," has no object type");a=a.toLowerCase().pluralize();var o=n[a+"Resource"];if(!o)return void e.log.debug("Unable to find resource for kind: ",a);var s=k(t);if(!s)return void e.log.debug("Object has no name: ",t);var l=_.any(n[a],function(e){return e===s}),c=l?"Modified":"Added",d=function(t){e.log.debug(c,t),l||n[a].push(t),i&&i(t)},p=function(n){e.log.debug("Failed to add/modify object: ",t," error: ",n),r&&r(n)};l?(e.log.debug("Object already exists, updating..."),o.save({id:s},t,d,p)):(e.log.debug("Object doesn't exist, creating..."),o.create({},t,d,p))}function d(t,n,i,a){var o=s(t);if(!o)return e.log.debug("Invalid type given: ",t),null;var l={namespace:we};"namespaces"===t&&(l={});var c=UrlHelpers.join(r(),o,n);e.log.debug("Url for ",t,": ",c);var u=i(c,null,{query:{method:"GET",isArray:!1,params:l},create:{method:"POST",params:l},save:{method:"PUT",params:l},"delete":{method:"DELETE",params:_.extend({id:"@id"},l)}});return u}function p(){return UrlHelpers.join(c(),t(),"/imagestreams")}function h(){return UrlHelpers.join(c(),t(),"/deploymentconfigs")}function f(){return UrlHelpers.join(c(),t(),"/proxy/buildlogs")}function g(){return UrlHelpers.join(c(),t(),"/builds")}function m(){return UrlHelpers.join(c(),t(),"/buildconfighooks")}function v(){return UrlHelpers.join(c(),t(),"/buildconfigs")}function y(){return UrlHelpers.join(c(),t(),"/routes")}function b(){return UrlHelpers.join(c(),t(),"/templates")}function w(t){var n=Core.pathGet(t,["metadata","namespace"]);return n?n:e.defaultNamespace}function x(e){var t=Core.pathGet(e,["metadata","labels"]);return t?t:{}}function k(e){return Core.pathGet(e,["metadata","name"])||Core.pathGet(e,"name")||Core.pathGet(e,"id")}function C(e){return Core.pathGet(e,["metadata","kind"])||Core.pathGet(e,"kind")}function S(e){return Core.pathGet(e,["spec","selector"])}function T(e){return Core.pathGet(e,["spec","host"])||Core.pathGet(e,["spec","nodeName"])||Core.pathGet(e,["status","hostIP"])}function A(e){return Core.pathGet(e,["status","phase"])}function E(e){return Core.pathGet(e,["spec","ports"])}function P(e){return Core.pathGet(e,["metadata","creationTimestamp"])}function I(e){return!0}function D(e){return!0}function M(e){return!0}function N(e,t,n){if(e.id=t,e.fetched){if(!t)return void(e.json="");if(n){var i=n.find(function(e){return k(e)===t});i?(e.json=angular.toJson(i,!0),e.item=i):(e.id=void 0,e.json="",e.item=void 0)}}}function j(t,n){void 0===n&&(n=e.labelFilterTextSeparator);var i="";return angular.forEach(t,function(e,t){var r=i?n:"";i+=r+t+"="+e}),i}function O(t,n,i,r,a,o,s,l){function c(e){if(u){var t=u.get("ServiceRegistry");if(t)return t.hasService(e)}return!1}t.baseUri=Core.trimTrailing(Core.url("/")||"","/")||"";var u=HawtioCore.injector;t.hasServiceKibana=function(){return c(e.kibanaServiceName)},t.hasServiceGogs=function(){return c(e.gogsServiceName)},t.hasServiceForge=function(){return c(e.fabric8ForgeServiceName)},t.viewTemplates=function(){var e=n.url();n.path(Core.url("/kubernetes/templates")).search({returnTo:e})},t.namespace=s.selectedNamespace||e.defaultNamespace,t.forgeEnabled=be(),t.codeMirrorOptions={lineWrapping:!0,lineNumbers:!0,readOnly:"nocursor",mode:{name:"javascript",json:!0}},t.resizeDialog={controller:null,newReplicas:0,dialog:new UI.Dialog,onOk:function(){var n=t.resizeDialog;n.dialog.close(),re(i,l,n.controller,n.newReplicas,function(){e.log.debug("updated number of replicas")})},open:function(e){var n=t.resizeDialog;n.controller=e,n.newReplicas=Core.pathGet(e,["status","replicas"]),n.dialog.open(),r(function(){$("#replicas").focus()},50)},close:function(){t.resizeDialog.dialog.close()}},t.triggerBuild=function(t){var n=t.$triggerUrl;if(console.log("triggering build at url: "+n),n){var r=null,a={headers:{"Content-Type":"application/json"}},o=Core.pathGet(t,["metadata","name"]);Core.notification("info","Triggering build "+o),i.post(n,r,a).success(function(e,t,n,i){console.log("trigger worked! got data "+angular.toJson(e,!0)),Core.notification("info","Building "+o)}).error(function(t,i,r,a){e.log.warn("Failed to load "+n+" "+t+" "+i),Core.notification("error","Failed to trigger build for "+o+". Returned code: "+i+" "+t)})}},t.$watch("tableConfig.filterOptions.filterText",function(e){n.search("q",e)}),t.$on("labelFilterUpdate",function(e,n){var i=(t.tableConfig||{}).filterOptions||{},r=i.filterText;if(Core.isBlank(r))i.filterText=n;else{var a=r.split(/\s+/);a.any(n)?(a=a.remove(n),i.filterText=a.join(" ")):i.filterText=r+" "+n}t.id=void 0})}function L(e){if(angular.isObject(e)){var t=e.$host,n=null,i="http://",r=e.spec;if(r){t||(t=r.portalIP);var a=!1,o=!1;angular.forEach(r.ports,function(e){var t=e.port;t&&(443===t?a=!0:80===t&&(o=!0),n||(n=t))})}if(t)return a?"https://"+t:o?"http://"+t:n?i+t+":"+n+"/":i+t}else if(e){var s=e.toString();if(s){var l=te();if(l)return l.serviceLink(s)||""}}return""}function R(t,n,i,r){void 0===i&&(i=[]),void 0===r&&(r=null);var a;a=angular.isFunction(t)?t:function(e){return ee(t,x(e))};var o={podsLink:"",valid:0,waiting:0,error:0};return t&&(r||(r=e.labelsToString(t," ")),o.podsLink=Core.url("/kubernetes/pods?q="+encodeURIComponent(r)),angular.forEach(n,function(e){if(a(e)){i.push(e);var t=A(e);if(t){var n=t.toLowerCase();n.startsWith("run")?o.valid+=1:n.startsWith("wait")||n.startsWith("pend")?o.waiting+=1:(n.startsWith("term")||n.startsWith("error")||n.startsWith("fail"))&&(o.error+=1)}else o.error+=1}})),o}function F(e){var t=e.items;if(angular.isArray(t)){var n=[];return t.forEach(function(e){"Service"===e.kind&&n.push(e)}),t.forEach(function(e){"Service"!==e.kind&&n.push(e)}),n}return[e]}function U(){return"v1beta1"===e.defaultApiVersion||"v1beta2"===e.defaultApiVersion}function z(e){if(e){var t=k(e),n=C(e);if(n&&t){var i=n.substring(0,1).toLowerCase()+n.substring(1)+"s",r=w(e);return Core.url(r&&!B(n)?UrlHelpers.join("/kubernetes/namespace",r,i,t):UrlHelpers.join("/kubernetes",i,t))}}return null}function q(e){var t=e.toLowerCase()+"s";return"replicationControllers"!==t||U()||(t="replicationcontrollers"),t}function B(e){return"Host"===e||"Minion"===e}function H(e,t,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var r="";i&&(r="/"+Core.trimLeading(i,"/"));var a=q(t),o=B(t);if(U()||o){var s="";return n&&!o&&(s="?namespace="+n),UrlHelpers.join(e,a,r,s)}return UrlHelpers.join(e,"/namespaces/",n,a,r)}function V(t,n){var i=n.kind;return i?H(t,i,n.namespace):(e.log.warn("Ignoring missing kind "+i+" for kubernetes json: "+angular.toJson(n)),null)}function W(n,i,r){void 0===r&&(r=null);var a="";a=r?"/"+Core.trimLeading(r,"/"):"/";var o=w(i);if(U()){var s="?namespace="+o;return UrlHelpers.join(n,"/api/"+e.defaultApiVersion+"/proxy"+t()+"/services/"+k(i)+a+s)}return UrlHelpers.join(n,"/api/"+e.defaultApiVersion+"/proxy/namespaces/"+o+"/services/"+k(i)+a)}function G(e){return UrlHelpers.join(v(),e)}function K(e){return UrlHelpers.join(h(),e)}function X(e){return UrlHelpers.join(p(),e)}function Y(e){return UrlHelpers.join(g(),e)}function J(e){return UrlHelpers.join(f(),e)}function Q(t,n,i,r,a,o,s,l,c){if(void 0===o&&(o="App"),void 0===s&&(s=null),void 0===l&&(l=null),void 0===c&&(c=null),a){angular.isString(a)&&(a=angular.fromJson(a)),o=o||"App";var u=l?" in namespace "+l:"";Core.notification("info","Running "+o+u);var d=F(a);angular.forEach(d,function(t){var a=V(r,t);a&&i.post(a,t).success(function(i,r,o,s){e.log.debug("Got status: "+r+" on url: "+a+" data: "+i+" after posting: "+angular.toJson(t)),angular.isFunction(c)&&c(),Core.$apply(n)}).error(function(t,n,i,r){var o=null;if(angular.isObject(t)){o=t.message;var s=t.reason;if("AlreadyExists"===s)return void e.log.debug("entity already exists at "+a)}o||(o="Failed to POST to "+a+" got status: "+n),e.log.warn("Failed to save "+a+" status: "+n+" response: "+angular.toJson(t,!0)),Core.notification("error",o)})})}}function Z(e){var t=(e||{}).phase;if(t){var n=t.toLowerCase();return n.startsWith("run")}return!1}function ee(e,t){if(angular.isObject(t)){var n=!0,i=0;return angular.forEach(e,function(e,r){i++,n&&t[r]!==e&&(n=!1)}),n&&i>0}return!1}function te(){var e=HawtioCore.injector;return e?e.get("ServiceRegistry"):null}function ne(t){var n=t.serviceLink(e.kibanaServiceName);return n?(n.endsWith("/")||(n+="/"),n+"#/dashboard/Fabric8"):null}function ie(e,t,n,i){var r=ne(e);if(r){var a="",o=0;if(angular.forEach(i,function(e){var t=k(e);if(t){var n=a?" OR ":"";o++,a+=n+'"'+t+'"'}}),a){o>1&&(a="("+a+")"),a='pod_namespace:"'+n+'" AND pod:'+a,r+="?_a=(query:(query_string:(query:'"+a+"')))";{t.open(r,"viewLogs")}}}}function re(t,n,i,r,a){void 0===a&&(a=null);var o=k(i),s=w(i)||"",l=H(n,"ReplicationController",s,o);t.get(l).success(function(n,i,o,s){if(n){var c=n.spec;c||(c={},n.spec=c),c.replicas=r,t.put(l,n).success(function(t,n,i,r){e.log.debug("updated controller "+l),angular.isFunction(a)&&a()}).error(function(t,n,i,r){e.log.warn("Failed to save "+l+" "+t+" "+n)})}}).error(function(t,n,i,r){e.log.warn("Failed to load "+l+" "+t+" "+n)})}function ae(e){if(e){var t=e.toLowerCase();if(t.startsWith("run")||t.startsWith("ok"))return"fa fa-play-circle green";if(t.startsWith("wait")||t.startsWith("pend"))return"fa fa-download";if(t.startsWith("term")||t.startsWith("error")||t.startsWith("fail"))return"fa fa-off orange";if(t.startsWith("succeeded"))return"fa fa-check-circle-o green"}return"fa fa-question red"}function oe(e){return A(e)}function se(t){var n=[],i={},r=t.pods,a=null;return angular.forEach(r,function(t){var r=x(t),o=e.labelsToString(r," "),s=i[r];s||(s={labelText:o,podsLink:Core.url("/kubernetes/pods?q="+encodeURIComponent(o)),valid:0,waiting:0,error:0},i[r]=s,n.push(s));var l=(oe(t)||"Error").toLowerCase();l.startsWith("run")||l.startsWith("ok")?s.valid+=1:l.startsWith("wait")||l.startsWith("pwnd")?s.waiting+=1:s.error+=1;var c=P(t);if(c){var u=new Date(c);(!a||a>u)&&(a=u)}}),t.$creationDate=a,n}function le(e){var t=[],n=e.pods;angular.forEach(n,function(e){var t=k(e);if(t){var n=t,i=t.indexOf("-");i>1&&(n=t.substring(0,i)),e.idAbbrev=n}e.statusClass=ae(oe(e))});for(var i=e.services||[],r=e.replicationControllers||[],a=Math.max(i.length,r.length,1),o=e.$info.name,s=0;a>s;s++){var l=i[s],c=r[s],u=k(c),d=k(l)||u,p=Core.pathGet(l,["spec","portalIP"]);!d&&n.length&&(d=n[0].idAbbrev),e.$info.name||(e.$info.name=d),!e.id&&n.length&&(e.id=k(n[0])),s>0&&(o=d);var h=n.length,f=h+" pod"+(h>1?"s":""),g={appName:o||d,name:d,createdDate:e.$creationDate,podCount:h,podCountText:f,address:p,controllerId:u,service:l,replicationController:c,pods:n};t.push(g)}return t}function ce(e,t){return void 0===t&&(t="master"),(HawtioCore.injector.get("AppLibraryURL")||"")+"/git/"+t+e}function ue(t,n){function i(e,t,n){void 0===n&&(n=!1);var i=s[e];n&&!i&&(i={},s[e]=i),i&&angular.forEach(t,function(e,t){var n=i[t];n||(i[t]=e)})}if(t){var r=null,a=t.metadata||{},o=a.name;t.$name=o,o&&(angular.forEach([!1,!0],function(e){angular.forEach(t.triggers,function(n){if(!r){var i=n.type;if("generic"===i||e){var a=n[i];if(i&&a){var s=a.secret;s&&(r=UrlHelpers.join(m(),o,s,i),t.$triggerUrl=r)}}}})}),n&&(t.$lastBuild=_.find(n,{metadata:{labels:{buildconfig:o}}})));var s={},l=a.labels||{},c=a.annotations||{};if(t.$user=c["fabric8.jenkins/user"]||l.user,t.$repo=c["fabric8.jenkins/repo"]||l.repo,angular.forEach(c,function(e,t){var n=t.split("/",2);if(n.length>1){var i=n[0],r=n[1];if(i&&r&&i.startsWith("fabric8.link")){var a=s[i];a||(a={"class":i},s[i]=a),a[r]=e}}}),t.$user&&t.$repo){var u=L(e.gogsServiceName);u&&i("fabric8.link.browseGogs.view",{label:"Browse...",url:UrlHelpers.join(u,t.$user,t.$repo),description:"Browse the source code of this repository",iconClass:"fa fa-external-link"},!0),i("fabric8.link.forgeCommand.view",{label:"Command...",url:UrlHelpers.join("/forge/commands/user",t.$user,t.$repo),description:"Perform an action on this project",iconClass:"fa fa-play-circle"},!0),i("fabric8.link.forgeCommand.devops.settings",{label:"Settings",url:UrlHelpers.join("/forge/command/devops-edit/user",t.$user,t.$repo),description:"Configure the DevOps settings for this project",iconClass:"fa fa-pencil-square-o"},!0)}i("fabric8.link.jenkins.job",{iconClass:"fa fa-tasks",description:"View the Jenkins Job for this build"}),i("fabric8.link.jenkins.monitor",{iconClass:"fa fa-tachometer",description:"View the Jenkins Monitor dashboard for this project"}),i("fabric8.link.jenkins.pipeline",{iconClass:"fa fa-arrow-circle-o-right",description:"View the Jenkins Pipeline for this project"}),i("fabric8.link.letschat.room",{iconClass:"fa fa-comment",description:"Chat room for this project"}),i("fabric8.link.letschat.room",{iconClass:"fa fa-comment",description:"Chat room for this project"}),i("fabric8.link.taiga",{iconClass:"fa fa-check-square-o",description:"Issue tracker for this project"}),i("fabric8.link.taiga.team",{iconClass:"fa fa-users",description:"Team members for this project"});var d={},p={},h={};angular.forEach(s,function(e,t){var n;n=t.indexOf("taiga")>0||t.indexOf("letschat")>0?h:t.indexOf("jenkins")>0?p:d,n[t]=e}),t.$fabric8Views=s,t.$fabric8CodeViews=d,t.$fabric8BuildViews=p,t.$fabric8TeamViews=h}}function de(e,t){return angular.forEach(e,function(e){ue(e,t)}),e}function pe(e){return angular.forEach(e,function(e){he(e)}),_.sortBy(e,"$creationDate").reverse()}function he(t){if(t){var n=(t.metadata||{},k(t)),i=w(t);t.$name=n,t.$namespace=i;var r=n.split("-"),a=r.length;t.$shortName=a>4?r.slice(0,a-4).join("-"):n.substring(0,30);var o=x(e.route),s=o.buildconfig;t.$configId=s,s&&(t.$configLink=UrlHelpers.join("kubernetes/buildConfigs",s));var l=P(t);if(l){var c=new Date(l);t.$creationDate=c}n&&(t.$viewLink=UrlHelpers.join("kubernetes/builds",n),t.$logsLink=UrlHelpers.join("kubernetes/buildLogs",n));var u=t.podName;if(u&&i){var d=u.split("-"),p=d.length;t.$podShortName=p>5?d[p-5]:u.substring(0,30),t.$podLink=UrlHelpers.join("kubernetes/namespace",i,"pods",u)}}return t}function fe(e){if(e){var t=Core.pathGet(e,["metadata","name"]);e.$name=t;angular.forEach(e.triggers,function(t){var n=t.type;if(!e.$imageChangeParams&&"ImageChange"===n){var i=t.imageChangeParams;if(i){var r=i.containerNames||[];i.$containerNames=r.join(" "),e.$imageChangeParams=i}}})}}function ge(e){return angular.forEach(e,function(e){fe(e)}),e}function me(e){if(e){var t=Core.pathGet(e,["metadata","name"]);e.$name=t}}function ve(e){return angular.forEach(e,function(e){me(e)}),e}function ye(e){return e in Se?Se[e]+" mouse-pointer":"mouse-pointer"}function be(){return!0}function we(){var t=HawtioCore.injector;if(t){var n=t.get("KubernetesState")||{};return n.selectedNamespace||e.defaultNamespace}return e.defaultNamespace}function xe(){angular.forEach(e.schema.definitions,function(t,n){var i=t.properties;if(i){var r=["creationTimestamp","kind","apiVersion","annotations","additionalProperties","namespace","resourceVersion","selfLink","uid"];angular.forEach(r,function(e){var t=i[e];t&&(t.hidden=!0)}),angular.forEach(i,function(e,t){var n=e.$ref,i=e.type;if(!n||i&&"object"!==i||(e.type=n),"array"===i){var r=e.items;if(r){var n=r.$ref,i=r.type;!n||i&&"object"!==i||(r.type=n)}}})}e.schema.definitions.os_build_WebHookTrigger.properties.secret.type="password"})}function ke(e){
var t=angular.copy(e);return angular.forEach(t,function(e,n){(n.startsWith("$")||n.startsWith("_"))&&delete t[n]}),JSON.stringify(t,null,2)}e.context="/kubernetes",e.hash="#"+e.context,e.defaultRoute=e.hash+"/apps",e.pluginName="Kubernetes",e.pluginPath="plugins/kubernetes/",e.templatePath=e.pluginPath+"html/",e.log=Logger.get(e.pluginName),e.keepPollingModel=!0,e.defaultIconUrl=Core.url("/img/kubernetes.svg"),e.hostIconUrl=Core.url("/img/host.svg"),e.osConfig=void 0,e.masterUrl="",e.defaultApiVersion="v1",e.defaultOSApiVersion="v1",e.labelFilterTextSeparator=",",e.defaultNamespace="default",e.appSuffix=".app",e.kibanaServiceName="kibana",e.fabric8ForgeServiceName="fabric8-forge",e.gogsServiceName="gogs",e.kubernetesNamespacePath=t,e.apiPrefix=n,e.osApiPrefix=i,e.masterApiUrl=r,e.kubernetesApiPrefix=a,e.openshiftApiPrefix=o,e.prefixForType=s,e.kubernetesApiUrl=l,e.openshiftApiUrl=c,e.updateOrCreateObject=u,e.createResource=d,e.imageRepositoriesRestURL=p,e.deploymentConfigsRestURL=h,e.buildsLogsRestURL=f,e.buildsRestURL=g,e.buildConfigHooksRestURL=m,e.buildConfigsRestURL=v,e.routesRestURL=y,e.templatesRestURL=b,e.getNamespace=w,e.getLabels=x,e.getName=k,e.getKind=C,e.getSelector=S,e.getHost=T,e.getStatus=A,e.getPorts=E,e.getCreationTimestamp=P;var Ce="io.fabric8";e.mbean=Ce+":type=Kubernetes",e.managerMBean=Ce+":type=KubernetesManager",e.appViewMBean=Ce+":type=AppView",e.isKubernetes=I,e.isKubernetesTemplateManager=D,e.isAppView=M,e.setJson=N,e.labelsToString=j,e.initShared=O,e.serviceLinkUrl=L,e.createPodCounters=R,e.convertKubernetesJsonToItems=F,e.isV1beta1Or2=U,e.entityPageLink=z,e.resourceKindToUriPath=q,e.kubernetesUrlForKind=H,e.kubernetesUrlForItemKind=V,e.kubernetesProxyUrlForService=W,e.buildConfigRestUrl=G,e.deploymentConfigRestUrl=K,e.imageRepositoryRestUrl=X,e.buildRestUrl=Y,e.buildLogsRestUrl=J,e.runApp=Q,e.isRunning=Z,e.selectorMatches=ee,e.getServiceRegistry=te,e.kibanaLogsLink=ne,e.openLogsForPods=ie,e.resizeController=re,e.statusTextToCssClass=ae,e.podStatus=oe,e.createAppViewPodCounters=se,e.createAppViewServiceViews=le,e.gitPathToUrl=ce,e.enrichBuildConfig=ue,e.enrichBuildConfigs=de,e.enrichBuilds=pe,e.enrichBuild=he,e.enrichDeploymentConfig=fe,e.enrichDeploymentConfigs=ge,e.enrichImageRepository=me,e.enrichImageRepositories=ve;var Se={version:"background-blue",name:"background-light-green",container:"background-light-grey"};e.containerLabelClass=ye,e.isForgeEnabled=be,e.currentKubernetesNamespace=we,e.configureSchema=xe,e.toRawJson=ke}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e._module=angular.module(e.pluginName,["hawtio-core","hawtio-ui","wiki","restmod","ui.codemirror"]),e.controller=PluginHelpers.createControllerFunction(e._module,e.pluginName),e.route=PluginHelpers.createRoutingFunction(e.templatePath),e._module.config(["$routeProvider",function(t){t.when(UrlHelpers.join(e.context,"/pods"),e.route("pods.html",!1)).when(UrlHelpers.join(e.context,"/namespace/:namespace/podCreate"),e.route("podCreate.html",!1)).when(UrlHelpers.join(e.context,"/namespace/:namespace/podEdit/:id"),e.route("podEdit.html",!1)).when(UrlHelpers.join(e.context,"/namespace/:namespace/pods"),e.route("pods.html",!1)).when(UrlHelpers.join(e.context,"/namespace/:namespace/pods/:id"),e.route("pod.html",!1)).when(UrlHelpers.join(e.context,"replicationControllers"),e.route("replicationControllers.html",!1)).when(UrlHelpers.join(e.context,"/namespace/:namespace/replicationControllers"),e.route("replicationControllers.html",!1)).when(UrlHelpers.join(e.context,"/namespace/:namespace/replicationControllers/:id"),e.route("replicationController.html",!1)).when(UrlHelpers.join(e.context,"/namespace/:namespace/replicationControllerCreate"),e.route("replicationControllerCreate.html",!1)).when(UrlHelpers.join(e.context,"/namespace/:namespace/replicationControllerEdit/:id"),e.route("replicationControllerEdit.html",!1)).when(UrlHelpers.join(e.context,"services"),e.route("services.html",!1)).when(UrlHelpers.join(e.context,"/namespace/:namespace/services"),e.route("services.html",!1)).when(UrlHelpers.join(e.context,"/namespace/:namespace/services/:id"),e.route("service.html",!1)).when(UrlHelpers.join(e.context,"/namespace/:namespace/serviceCreate"),e.route("serviceCreate.html",!1)).when(UrlHelpers.join(e.context,"/namespace/:namespace/serviceEdit/:id"),e.route("serviceEdit.html",!1)).when(UrlHelpers.join(e.context,"apps"),e.route("apps.html",!1)).when(UrlHelpers.join(e.context,"apps/:namespace"),e.route("apps.html",!1)).when(UrlHelpers.join(e.context,"templates"),e.route("templates.html",!1)).when(UrlHelpers.join(e.context,"hosts"),e.route("hosts.html",!1)).when(UrlHelpers.join(e.context,"hosts/:id"),e.route("host.html",!0)).when(UrlHelpers.join(e.context,"builds"),e.route("builds.html",!1)).when(UrlHelpers.join(e.context,"builds/:id"),e.route("build.html",!0)).when(UrlHelpers.join(e.context,"buildLogs/:id"),e.route("buildLogs.html",!0)).when(UrlHelpers.join(e.context,"buildConfigs"),e.route("buildConfigs.html",!1)).when(UrlHelpers.join(e.context,"buildConfigs/:id"),e.route("buildConfig.html",!0)).when(UrlHelpers.join(e.context,"buildConfigEdit/:id"),e.route("buildConfigEdit.html",!0)).when(UrlHelpers.join(e.context,"buildConfigCreate"),e.route("buildConfigCreate.html",!0)).when(UrlHelpers.join(e.context,"deploymentConfigs"),e.route("deploymentConfigs.html",!1)).when(UrlHelpers.join(e.context,"deploymentConfigs/:id"),e.route("deploymentConfig.html",!0)).when(UrlHelpers.join(e.context,"imageRepositories"),e.route("imageRepositories.html",!1)).when(UrlHelpers.join(e.context,"pipelines"),e.route("pipelines.html",!1)).when(UrlHelpers.join(e.context,"overview"),e.route("overview.html",!0)).when(e.context,{redirectTo:UrlHelpers.join(e.context,"apps")})}]),e._module.factory("AppLibraryURL",["$rootScope",function(t){return UrlHelpers.join(e.kubernetesApiUrl(),"/proxy",e.kubernetesNamespacePath(),"/services/app-library")}]),e._module.factory("WikiGitUrlPrefix",function(){return UrlHelpers.join(e.kubernetesApiUrl(),"/proxy",e.kubernetesNamespacePath(),"services/app-library")}),e._module.factory("wikiRepository",["$location","localStorage",function(e,t){return!1}]),e._module.factory("ConnectDialogService",["$rootScope",function(e){return{dialog:new UI.Dialog,saveCredentials:!1,userName:null,password:null,jolokiaUrl:null,containerName:null,view:null}}]),e._module.filter("kubernetesPageLink",function(){return e.entityPageLink}),e._module.run(["viewRegistry","workspace","ServiceRegistry","HawtioNav","KubernetesModel","$templateCache",function(t,n,i,r,a,o){e.log.debug("Running"),t.kubernetes=e.templatePath+"layoutKubernetes.html";var s=r.builder(),l=s.id("kube-apps").href(function(){return UrlHelpers.join(e.context,"apps")}).title(function(){return"Apps"}).build(),c=s.id("kube-services").href(function(){return UrlHelpers.join(e.context,"services")}).title(function(){return"Services"}).build(),u=s.id("kube-controllers").href(function(){return UrlHelpers.join(e.context,"replicationControllers")}).title(function(){return"Controllers"}).build(),d=s.id("kube-pods").href(function(){return UrlHelpers.join(e.context,"pods")}).title(function(){return"Pods"}).build(),p=s.id("kube-hosts").href(function(){return UrlHelpers.join(e.context,"hosts")}).title(function(){return"Hosts"}).build(),h=s.id("kube-overview").href(function(){return UrlHelpers.join(e.context,"overview")}).title(function(){return"Diagram"}).build(),f=s.id("kube-builds").href(function(){return UrlHelpers.join(e.context,"builds")}).title(function(){return"Builds"}).build(),g=s.id("kube-buildConfigs").href(function(){return UrlHelpers.join(e.context,"buildConfigs")}).title(function(){return"Build Configs"}).build(),m=s.id("kube-deploys").href(function(){return UrlHelpers.join(e.context,"deploymentConfigs")}).title(function(){return"Deploys"}).build(),v=s.id("kube-imageRepositories").href(function(){return UrlHelpers.join(e.context,"imageRepositories")}).title(function(){return"Registries"}).build(),y=(s.id("kube-pipelines").href(function(){return UrlHelpers.join(e.context,"pipelines")}).title(function(){return"Pipelines"}).build(),s.id("kube-repos").href(function(){return"/forge/repos"}).isValid(function(){return i.hasService(e.fabric8ForgeServiceName)&&i.hasService(e.gogsServiceName)&&!Core.isRemoteConnection()}).title(function(){return"Repositories"}).build()),b=s.id("kubernetes").rank(200).defaultPage({rank:20,isValid:function(e,t){Core.isRemoteConnection()?t():e()}}).href(function(){return e.context}).title(function(){return"Kubernetes"}).isValid(function(){return!Core.isRemoteConnection()}).tabs(l,c,u,d,p,h).build();r.add(b),r.add({id:"k8sAppSwitcher",title:function(){return""},isValid:function(){return a.serviceApps.length>0},context:!0,template:function(){return o.get(UrlHelpers.join(e.templatePath,"serviceApps.html"))}});var w=s.id("openshift").rank(100).href(function(){return UrlHelpers.join(e.context,"buildConfigs")+"?sub-tab=kube-buildConfigs"}).title(function(){return"Projects"}).isValid(function(){return!Core.isRemoteConnection()}).tabs(y,g,f,m,v).build();r.add(w)}]),hawtioPluginLoader.registerPreBootstrapTask({name:"KubernetesInit",task:function(t){$.getScript("osconsole/config.js").done(function(n,i){var r=e.osConfig=window.OPENSHIFT_CONFIG;e.log.debug("Fetched OAuth config: ",r);var a=r.master_uri;if(!a&&r.api&&r.api.k8s){var o=(new URI).host(r.api.k8s.hostPort).path(r.api.k8s.prefix);r.api.k8s.proto&&o.protocol(r.api.k8s.proto),a=o.toString()}if(OSOAuthConfig=r.openshift,GoogleOAuthConfig=r.google,KeycloakConfig=r.keycloak,OSOAuthConfig&&!a&&!a){var s=OSOAuthConfig.oauth_authorize_uri;if(s){var l=s,c=l.indexOf("://");c>0&&(c+=3,c=l.indexOf("/",c),c>0&&(a=l.substring(0,++c)))}}if(!(e.masterUrl&&"/"!==e.masterUrl||a&&"/"!==a)){var u=location.href;u&&(a=new URI(u).query("").path("").toString())}return a?(e.masterUrl=a,void t()):void 0}).fail(function(t){e.log.debug("Error fetching OAUTH config: ",t)}).always(function(){t()})}},!0),hawtioPluginLoader.addModule(e.pluginName)}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.Apps=e.controller("Apps",["$scope","KubernetesModel","KubernetesServices","KubernetesReplicationControllers","KubernetesPods","KubernetesState","KubernetesApiURL","$templateCache","$location","$routeParams","$http","$dialog","$timeout","workspace","jolokia",function(t,n,i,r,a,o,s,l,c,u,d,p,h,f,g){function m(e){var n=t.appSelector.filterText;return n?Core.matchFilterIgnoreCase(e.groupId,n)||Core.matchFilterIgnoreCase(e.artifactId,n)||Core.matchFilterIgnoreCase(e.name,n)||Core.matchFilterIgnoreCase(e.description,n):!0}function v(e){return t.model.apps.any(function(t){return t.appPath===e.appPath})}function y(t,n){function o(t,n,r){if(!n||!t)return r();var a=e.getName(n);a?i["delete"]({id:a},void 0,function(){e.log.debug("Deleted service: ",a),o(t,t.shift(),r)},function(n){e.log.debug("Error deleting service: ",n),o(t,t.shift(),r)}):e.log.warn("No ID for service "+angular.toJson(n))}function s(t,n,i){if(!n||!t)return i();var a=e.getName(n);a?r["delete"]({id:a},void 0,function(){e.log.debug("Deleted replicationController: ",a),s(t,t.shift(),i)},function(n){e.log.debug("Error deleting replicationController: ",n),s(t,t.shift(),i)}):e.log.warn("No ID for replicationController "+angular.toJson(n))}function l(t,n,i){if(!n||!t)return i();var r=e.getName(n);r?a["delete"]({id:r},void 0,function(){e.log.debug("Deleted pod: ",r),l(t,t.shift(),i)},function(n){e.log.debug("Error deleting pod: ",n),l(t,t.shift(),i)}):e.log.warn("No ID for pod "+angular.toJson(n))}var c=[].concat(t.services);o(c,c.shift(),function(){var e=[].concat(t.replicationControllers);s(e,e.shift(),function(){var e=[].concat(t.pods);l(e,e.shift(),n)})})}t.model=n,t.apps=[],t.allApps=[],t.kubernetes=o,t.fetched=!1,t.json="",ControllerHelpers.bindModelToSearchParam(t,c,"id","_id",void 0),ControllerHelpers.bindModelToSearchParam(t,c,"appSelectorShow","openApp",void 0),ControllerHelpers.bindModelToSearchParam(t,c,"mode","mode","detail");var b=t.branch||"master",w=null;t.tableConfig={data:"model.apps",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:c.search().q||""},columnDefs:[{field:"$name",displayName:"App",cellTemplate:l.get("appIconTemplate.html")},{field:"$servicesText",displayName:"Services",cellTemplate:l.get("appServicesTemplate.html")},{field:"$replicationControllersText",displayName:"Controllers",cellTemplate:l.get("appReplicationControllerTemplate.html")},{field:"$podCount",displayName:"Pods",cellTemplate:l.get("appPodCountsAndLinkTemplate.html")},{field:"$creationDate",displayName:"Deployed",cellTemplate:l.get("appDeployedTemplate.html")}]},e.initShared(t,c,d,h,u,n,o,s),t.expandedPods=[],t.$on("do-resize",function(e,n){t.resizeDialog.open(n)}),t.podExpanded=function(n){var i=e.getName(n);return i&&(t.expandedPods||[]).indexOf(i)>=0},t.expandPod=function(n){var i=e.getName(n);i&&t.expandedPods.push(i)},t.collapsePod=function(n){var i=e.getName(n);i&&(t.expandedPods=t.expandedPods.remove(function(e){return i===e}))},t.$on("$routeUpdate",function(n){e.setJson(t,c.search()._id,t.model.apps)}),t.deleteSingleApp=function(e){t.deletePrompt([e])},t.deletePrompt=function(t){angular.isString(t)&&(t=[{id:t}]),UI.multiItemConfirmActionDialog({collection:t,index:"$name",onClose:function(n){function i(t,n){if(n){var r=n.name;e.log.debug("deleting: ",r),y(n,function(){e.log.debug("deleted: ",r),i(t,t.shift())})}}n&&i(t,t.shift())},title:"Delete Apps?",action:"The following Apps will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()},t.appSelector={filterText:"",folders:[],selectedApps:[],isOpen:function(e){return""!==t.appSelector.filterText||e.expanded?"opened":"closed"},getSelectedClass:function(e){return e["abstract"]?"abstract":e.selected?"selected":""},showApp:function(e){return m(e)&&!v(e)},showFolder:function(e){return!t.appSelector.filterText||e.apps.some(function(e){return m(e)&&!v(e)})},clearSelected:function(){angular.forEach(t.model.appFolders,function(e){angular.forEach(e.apps,function(e){e.selected=!1})}),t.appSelector.selectedApps=[],Core.$apply(t)},updateSelected:function(){var e=[];angular.forEach(t.model.appFolders,function(t){var n=t.apps.filter(function(e){return e.selected});n&&(e=e.concat(n))}),t.appSelector.selectedApps=e.sortBy("name")},select:function(e,n){e.selected=n,t.appSelector.updateSelected()},hasSelection:function(){return t.model.appFolders.any(function(e){return e.apps.any(function(e){return e.selected})})},runSelectedApps:function(){angular.forEach(t.appSelector.selectedApps,function(n){var i=n.name,r=n.metadataPath;if(r){var a=e.gitPathToUrl(r,b);a&&d.get(a).success(function(n,r,a,o){if(n){var l=angular.toJson(n),u=function(){};e.runApp(c,t,d,s,l,i,u,w)}}).error(function(n,i,r,o){t.summaryHtml=null,e.log.warn("Failed to load "+a+" "+n+" "+i)})}}),t.appSelector.clearSelected(),t.appSelectorShow=!1}}}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.BuildController=e.controller("BuildController",["$scope","KubernetesModel","KubernetesState","KubernetesSchema","$templateCache","$location","$routeParams","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u){function d(){if(t.item=null,t.id){var n=e.buildRestUrl(t.id);l.get(n).success(function(n,i,r,a){n&&(t.entity=e.enrichBuild(n)),t.fetched=!0,Core.$apply(t)}).error(function(t,i,r,a){e.log.warn("Failed to load "+n+" "+t+" "+i)})}else t.fetched=!0,Core.$apply(t)}t.kubernetes=i,t.model=n,t.id=s.id,t.schema=r,t.config=r.definitions.os_build_Build,e.initShared(t,o,l,c,s,n,i,u),t.$on("kubernetesModelUpdated",function(){d()}),t.$on("$routeUpdate",function(e){d()}),d()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.BuildConfigController=e.controller("BuildConfigController",["$scope","KubernetesModel","KubernetesState","KubernetesSchema","$templateCache","$location","$routeParams","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u){function d(){if(t.item=null,t.id){var n=e.buildConfigRestUrl(t.id);l.get(n).success(function(n,i,r,a){if(n){t.entity=n;var o=null;e.enrichBuildConfig(n,o)}t.fetched=!0,Core.$apply(t)}).error(function(t,i,r,a){e.log.warn("Failed to load "+n+" "+t+" "+i)})}else t.fetched=!0,Core.$apply(t)}t.kubernetes=i,t.model=n,t.id=s.id,t.schema=r,t.config=r.definitions.os_build_BuildConfig,e.initShared(t,o,l,c,s,n,i,u),t.$on("kubernetesModelUpdated",function(){d()}),t.$on("$routeUpdate",function(e){d()}),d()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.BuildConfigEditController=e.controller("BuildConfigEditController",["$scope","KubernetesModel","KubernetesState","KubernetesSchema","$templateCache","$location","$routeParams","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u){function d(){if(t.item=null,t.id){var n=e.buildConfigRestUrl;l.get(n).success(function(e,n,i,r){e&&(t.entity=e),t.fetched=!0,Core.$apply(t)}).error(function(t,i,r,a){e.log.warn("Failed to load "+n+" "+t+" "+i)})}else{t.fetched=!0;var i="172.30.17.189:5000";t.entity={apiVersion:"v1",kind:"BuildConfig",metadata:{name:"",labels:{name:""}},parameters:{output:{imageTag:"",registry:i},source:{git:{uri:""},type:"Git"},strategy:{stiStrategy:{builderImage:"fabric8/base-sti"},type:"STI"}},triggers:[]},Core.$apply(t)}}t.kubernetes=i,t.model=n,t.id=s.id,t.schema=r,t.config=r.definitions.os_build_BuildConfig,e.initShared(t,o,l,c,s,n,i,u),t.$on("kubernetesModelUpdated",function(){d()}),t.$on("$routeUpdate",function(e){d()}),d()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.BuildConfigsController=e.controller("BuildConfigsController",["$scope","KubernetesModel","KubernetesBuilds","KubernetesState","$dialog","$window","$templateCache","$routeParams","$location","localStorage","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u,d,p,h){function f(t,n){var i=(t||{}).$name;if(i){console.log("About to delete build config: "+i);var r=e.buildConfigRestUrl(i);d["delete"](r).success(function(e,t,i,r){n()}).error(function(t,n,i,a){e.log.warn("Failed to delete build config on "+r+" "+t+" "+n)})}else console.log("warning: no name for selection: "+angular.toJson(t))}function g(){var n=e.buildConfigsRestURL();d.get(n).success(function(n,i,r,a){if(n){var o=null;t.buildConfigs=e.enrichBuildConfigs(n.items,o),t.fetched=!0,Core.$apply(t)}}).error(function(t,i,r,a){e.log.warn("Failed to load "+n+" "+t+" "+i)})}t.kubernetes=r,t.model=n,t.KubernetesBuilds=i,t.$on("kubernetesModelUpdated",function(){Core.$apply(t)}),t.tableConfig={data:"buildConfigs",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:c.search().q||""},columnDefs:[{field:"metadata.name",displayName:"Name",cellTemplate:s.get("buildConfigLinkTemplate.html")},{field:"spec.source.git.uri",displayName:"Repository"},{field:"$fabric8CodeViews",displayName:"Code",width:"***",minWidth:500,cellTemplate:s.get("buildConfigCodeViewsTemplate.html")},{field:"$fabric8BuildViews",displayName:"Builds",width:"***",minWidth:500,cellTemplate:s.get("buildConfigBuildViewsTemplate.html")},{field:"$fabric8TeamViews",displayName:"People",width:"***",minWidth:500,cellTemplate:s.get("buildConfigTeamViewsTemplate.html")}]},e.initShared(t,c,d,p,l,n,r,h),t.isLoggedIntoGogs=Forge.isLoggedIntoGogs,t.deletePrompt=function(e){UI.multiItemConfirmActionDialog({collection:e,index:"$name",onClose:function(t){function n(e,t){t?f(t,function(){n(e,e.shift())}):g()}t&&n(e,e.shift())},title:"Delete Build Configs?",action:"The following Build Configs will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()},g()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.BuildLogsController=e.controller("BuildLogsController",["$scope","KubernetesModel","KubernetesState","KubernetesSchema","$templateCache","$location","$routeParams","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u){function d(){if(t.item=null,t.id){var n=e.buildRestUrl(t.id);l.get(n).success(function(n,i,r,a){n&&(t.entity=e.enrichBuild(n)),t.fetched=!0,Core.$apply(t)}).error(function(t,i,r,a){e.log.warn("Failed to load "+n+" "+t+" "+i)}),n=e.buildLogsRestUrl(t.id),l.get(n).success(function(e,n){t.logsText=e,Core.$apply(t)}).error(function(e,i){t.logsText="Failed to load logs from: "+n+" "+e+" status: "+i,Core.$apply(t)})["catch"](function(e){t.logsText="Failed to load logs: "+angular.toJson(e,!0),Core.$apply(t)})}else t.fetched=!0,Core.$apply(t)}t.kubernetes=i,t.model=n,t.id=s.id,t.schema=r,t.config=r.definitions.os_build_Build,e.initShared(t,o,l,c,s,n,i,u),t.$on("kubernetesModelUpdated",function(){d()}),t.$on("$routeUpdate",function(e){d()}),t.logsText="Loading logs...",d()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.BuildsController=e.controller("BuildsController",["$scope","KubernetesModel","KubernetesBuilds","KubernetesState","$dialog","$window","$templateCache","$routeParams","$location","localStorage","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u,d,p,h){t.kubernetes=r,t.model=n,t.KubernetesBuilds=i,t.$on("kubernetesModelUpdated",function(){Core.$apply(t)}),t.tableConfig={data:"builds",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:c.search().q||""},columnDefs:[{field:"metadata.name",displayName:"Name",cellTemplate:s.get("buildLinkTemplate.html")},{field:"$creationDate",displayName:"Time",defaultSort:!0,cellTemplate:s.get("buildTimeTemplate.html")},{field:"status",displayName:"Status",cellTemplate:s.get("buildStatusTemplate.html")},{field:"$logsLink",displayName:"Logs",cellTemplate:s.get("buildLogsTemplate.html")},{field:"$podLink",displayName:"Build Pod",cellTemplate:s.get("buildPodTemplate.html")},{field:"parameters.source.git.uri",displayName:"Repository",cellTemplate:s.get("buildRepositoryTemplate.html")},{field:"parameters.strategy.type",displayName:"Strategy"},{field:"parameters.strategy.stiStrategy.image",displayName:"Source Image"},{field:"parameters.output.imageTag",displayName:"Output Image"}]},e.initShared(t,c,d,p,l,n,r,h),t.$keepPolling=function(){return e.keepPollingModel},t.fetch=PollHelpers.setupPolling(t,function(n){var i=e.buildsRestURL();d.get(i).success(function(i,r,a,o){i&&(t.builds=e.enrichBuilds(i.items),t.fetched=!0),Core.$apply(t),n()}).error(function(r,a,o,s){e.log.warn("Failed to load "+i+" "+r+" "+a),Core.$apply(t),n()})}),t.fetch()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.ConnectController=e.controller("ConnectController",["$scope","localStorage","userDetails","ConnectDialogService","$browser",function(t,n,i,r,a){var o=document.querySelector("base"),s=o&&o.href||"";t.doConnect=function(t){var n=new URI(s),r=(new URI).toString(),a=t.metadata.name||"Untitled Container",o=i.token||"";n.hash(o).query({jolokiaUrl:t.$jolokiaUrl,title:a,returnTo:r}),e.log.debug("Connect URI: ",n.toString()),window.open(n.toString())}}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.DeploymentConfigController=e.controller("DeploymentConfigController",["$scope","KubernetesModel","KubernetesState","KubernetesSchema","$templateCache","$location","$routeParams","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u){function d(){if(t.item=null,t.id){var n=e.deploymentConfigRestUrl(t.id);l.get(n).success(function(n,i,r,a){n&&(t.entity=n,e.enrichDeploymentConfig(n)),t.fetched=!0,Core.$apply(t)}).error(function(t,i,r,a){e.log.warn("Failed to load "+n+" "+t+" "+i)})}else t.fetched=!0,Core.$apply(t)}t.kubernetes=i,t.model=n,t.id=s.id,t.schema=r,t.config=r.definitions.os_deploy_DeploymentConfig,e.initShared(t,o,l,c,s,n,i,u),t.$on("kubernetesModelUpdated",function(){d()}),t.$on("$routeUpdate",function(e){d()}),d()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.DeploymentConfigsController=e.controller("DeploymentConfigsController",["$scope","KubernetesModel","KubernetesBuilds","KubernetesState","$dialog","$window","$templateCache","$routeParams","$location","localStorage","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u,d,p,h){function f(t,n){var i=(t||{}).$name;if(i){console.log("About to delete deployment config: "+i);var r=e.deploymentConfigRestUrl(i);d["delete"](r).success(function(e,t,i,r){n()}).error(function(t,n,i,a){e.log.warn("Failed to delete deployment config on "+r+" "+t+" "+n)})}else console.log("warning: no name for selection: "+angular.toJson(t))}function g(){var n=e.deploymentConfigsRestURL();d.get(n).success(function(n,i,r,a){n&&(t.deploymentConfigs=e.enrichDeploymentConfigs(n.items),t.fetched=!0,Core.$apply(t))}).error(function(t,i,r,a){e.log.warn("Failed to load "+n+" "+t+" "+i)})}t.kubernetes=r,t.model=n,t.KubernetesBuilds=i,t.$on("kubernetesModelUpdated",function(){Core.$apply(t)}),t.labelClass=e.containerLabelClass,t.tableConfig={data:"deploymentConfigs",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:c.search().q||""},columnDefs:[{field:"metadata.name",displayName:"Name",cellTemplate:s.get("deploymentConfigLinkTemplate.html")},{field:"metadata.namespace",displayName:"Namespace"},{field:"$imageChangeParams.automatic",displayName:"Automatic"},{field:"$imageChangeParams.$containerNames",displayName:"Container Names"},{field:"$imageChangeParams.from.name",displayName:"From image"},{field:"$imageChangeParams.tag",displayName:"Tag"},{field:"template.controllerTemplate.podTemplate.tags",displayName:"Labels",cellTemplate:s.get("deploymentConfigLabelTemplate.html")}]},e.initShared(t,c,d,p,l,n,r,h),t.deletePrompt=function(e){UI.multiItemConfirmActionDialog({collection:e,index:"$name",onClose:function(t){function n(e,t){t?f(t,function(){n(e,e.shift())}):g()}t&&n(e,e.shift())},title:"Delete Deployment?",action:"The following Deployments will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()},g()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){function t(e,t,n){return(e||"")+"-"+(n||"undefined").toLowerCase()+"-"+(t||"undefined").replace(/\./g,"-")}function n(n){var i=n;return i._key=t(e.getNamespace(n),e.getName(n),e.getKind(n)),i}function i(e){var t=[];return angular.forEach(e,function(e){t.push(n(e))}),t}var r=function(){function n(){this.kubernetes=null,this.apps=[],this.services=[],this.replicationcontrollers=[],this.pods=[],this.hosts=[],this.routes=[],this.templates=[],this.redraw=!1,this.resourceVersions={},this.podsByHost={},this.servicesByKey={},this.replicationControllersByKey={},this.podsByKey={},this.appInfos=[],this.appViews=[],this.appFolders=[],this.fetched=!1,this.isOpenShift=!1}return Object.defineProperty(n.prototype,"replicationControllers",{get:function(){return this.replicationcontrollers},set:function(e){this.replicationcontrollers=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"namespaces",{get:function(){return this.kubernetes.namespaces},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"serviceApps",{get:function(){return _.filter(this.services,function(e){return e.$host&&e.$serviceUrl&&e.$podCount})},enumerable:!0,configurable:!0}),n.prototype.$keepPolling=function(){return e.keepPollingModel},n.prototype.orRedraw=function(e){this.redraw=this.redraw||e},n.prototype.getService=function(e,n){return this.servicesByKey[t(e,n,"service")]},n.prototype.getReplicationController=function(e,n){return this.replicationControllersByKey[t(e,n,"replicationController")]},n.prototype.getPod=function(e,n){return this.podsByKey[t(e,n,"pod")]},n.prototype.podsForNamespace=function(e){return void 0===e&&(e=this.currentNamespace()),_.filter(this.pods,{namespace:e})},n.prototype.currentNamespace=function(){var t=null;return this.kubernetes&&(t=this.kubernetes.selectedNamespace),t||e.defaultNamespace},n.prototype.updateIconUrlAndAppInfo=function(t,n){var i=null,r=e.getName(t);t.$iconUrl=Core.pathGet(t,["metadata","annotations","fabric8."+r+"/iconUrl"]),t.$info=Core.pathGet(t,["metadata","annotations","fabric8."+r+"/summary"]),t.$iconUrl||(r&&n&&((this.templates||[]).forEach(function(n){var i=n.metadata;if(i){var a=i.annotations||{},o=a["fabric8."+r+"/iconUrl"]||a["fabric8/iconUrl"];o&&(n.objects||[]).forEach(function(n){var i=e.getName(n);r===i&&(t.$iconUrl=o)})}}),(this.appInfos||[]).forEach(function(a){var o=a.iconPath;if(o&&!i&&"null"!==o){var s=e.gitPathToUrl(o),l=Core.pathGet(a,["names",n]);angular.forEach(l,function(e){e===r&&(t.$iconUrl=s,t.appPath=a.appPath,t.$info=a)})}})),t.$iconUrl||(t.$iconUrl=e.defaultIconUrl))},n.prototype.maybeInit=function(){var t=this;this.fetched=!0,this.servicesByKey={},this.podsByKey={},this.replicationControllersByKey={},this.pods.forEach(function(n){n.kind||(n.kind="Pod"),t.podsByKey[n._key]=n;var i=e.getHost(n);n.$labelsText=e.labelsToString(e.getLabels(n)),i&&(n.$labelsText+=e.labelFilterTextSeparator+"host="+i),n.$iconUrl=e.defaultIconUrl,t.discoverPodConnections(n),n.$containerPorts=[];var r=(n.status||{}).startTime;n.$startTime=null,r&&(n.$startTime=new Date(r));var a=e.getCreationTimestamp(n);n.$createdTime=null,n.$age=null,a&&(n.$createdTime=new Date(a),n.$age=n.$createdTime.relative()),n.$statusCss=e.statusTextToCssClass((n.status||{}).phase);var o=0;angular.forEach(Core.pathGet(n,["status","containerStatuses"]),function(e){var t=e.restartCount;t&&t>o&&(o=t)}),o&&(n.$restartCount=o);var s="";angular.forEach(Core.pathGet(n,["spec","containers"]),function(e){var t=e.image;if(t){s=s?s+" "+t:t;var i=t.lastIndexOf(":");i>0&&(t=t.substring(0,i));var r=t.split("/",3);if(r.length){var a=null;a=3==r.length?r[1]+"/"+r[2]:2==r.length?r[0]+"/"+r[1]:r[0]+"/"+r[1],e.$imageLink=UrlHelpers.join("https://registry.hub.docker.com/u/",a)}}angular.forEach(e.ports,function(e){var t=e.containerPort;t&&n.$containerPorts.push(t)})}),n.$imageNames=s;var l=n.status||{},c=n.spec||{};n.$podIP=l.podIP,n.$host=c.host||c.nodeName||l.hostIP}),this.services.forEach(function(n){n.kind||(n.kind="Service"),t.servicesByKey[n._key]=n;var i=e.getSelector(n);n.$pods=[],n.$podCounters||(n.$podCounters={}),_.assign(n.$podCounters,i?e.createPodCounters(i,t.pods,n.$pods):{}),n.$podCount=n.$pods.length;var r=n.$pods;n.connectTo=r.map(function(e){return e._key}).join(","),n.$labelsText=e.labelsToString(e.getLabels(n)),t.updateIconUrlAndAppInfo(n,"serviceNames");var a=n.spec||{};n.$portalIP=a.portalIP,n.$selectorText=e.labelsToString(a.selector);var o=_.map(a.ports||[],"port");n.$ports=o,n.$portsText=o.join(", ");var s=n.$iconUrl;s&&r&&r.forEach(function(e){e.$iconUrl=s}),n.$serviceUrl=e.serviceLinkUrl(n)}),this.replicationControllers.forEach(function(n){n.kind||(n.kind="ReplicationController"),t.replicationControllersByKey[n._key]=n;var i=e.getSelector(n);n.$pods=[],n.$podCounters=i?e.createPodCounters(i,t.pods,n.$pods):null,n.$podCount=n.$pods.length,n.$replicas=(n.spec||{}).replicas;var r=n.$pods;n.connectTo=r.map(function(e){return e._key}).join(","),n.$labelsText=e.labelsToString(e.getLabels(n)),t.updateIconUrlAndAppInfo(n,"replicationControllerNames");var a=n.$iconUrl;a&&r&&r.forEach(function(e){e.$iconUrl=a})}),this.services.forEach(function(t){var n=t.$iconUrl,i=t.$pods;i&&(n&&n!==e.defaultIconUrl||(n=null,i.forEach(function(e){n||(n=e.$iconUrl,n&&(t.$iconUrl=n))})))}),this.updateApps();var n={};this.pods.forEach(function(t){var i=e.getHost(t),r=n[i];r||(r=[],n[i]=r),r.push(t)}),this.podsByHost=n;var i=[];for(var r in n){var a=[],o=e.createPodCounters(function(t){return e.getHost(t)===r},this.pods,a,"host="+r),s=null;if(a.length){var l=a[0],c=l.status;c&&(s=c.hostIP)}var u={name:r,id:r,elementId:r.replace(/\./g,"_"),hostIP:s,pods:a,kind:"Host",$podCounters:o,$iconUrl:e.hostIconUrl};i.push(u)}this.hosts=i},n.prototype.updateApps=function(){var t=this;try{var n=[];if(this.replicationControllers.forEach(function(t){
var i=e.getName(t),r=t.$iconUrl;n.push({appPath:"/dummyPath/"+i,$name:i,$info:{$iconUrl:r},$iconUrl:r,replicationControllers:[t],pods:t.$pods||[],services:[]})}),this.services.forEach(function(t){var i=null;if(n.forEach(function(n){n.replicationControllers.forEach(function(r){var a=e.getSelector(r);a&&e.selectorMatches(a,e.getSelector(t))&&e.getNamespace(t)==e.getNamespace(r)&&(i=n)})}),i)i.services.push(t);else{var r=e.getName(t),a=t.$iconUrl;n.push({appPath:"/dummyPath/"+r,$name:r,$info:{$iconUrl:a},$iconUrl:a,replicationControllers:[],pods:t.$pods||[],services:[t]})}}),angular.forEach(this.routes,function(n){var i=n.metadata||{},r=n.spec||{},a=Core.pathGet(r,["to","name"]),o=r.host,s=e.getNamespace(n);if(a&&o){var l=t.getService(s,a);if(l){if(l.$host=o,o){var c=o;c.indexOf("://")<0&&(c="http://"+o),l.$connectUrl=UrlHelpers.join(c,"/")}}else e.log.debug("Could not find service "+a+" namespace "+s+" for route: "+i.name)}}),n=i(n).sortBy(function(e){return e._key}),ArrayHelpers.sync(this.appViews,n,"$name"),this.appInfos&&this.appViews){var r={},a=[],o={};angular.forEach(this.appInfos,function(t){!t.$iconUrl&&t.iconPath&&"null"!==t.iconPath&&(t.$iconUrl=e.gitPathToUrl(t.iconPath));var n=t.appPath;if(n){o[n]=t;var i=n.lastIndexOf("/"),s="";i>=0&&(s=n.substring(0,i)),s=Core.trimLeading(s,"/");var l=r[s];l||(l={path:s,expanded:!0,apps:[]},a.push(l),r[s]=l),l.apps.push(t)}}),this.appFolders=a.sortBy("path");var s=[],l={$iconUrl:e.defaultIconUrl};angular.forEach(this.appViews,function(t){try{var n=t.appPath,i=angular.copy(l);n&&(i=o[n]||i),t.$info||(t.$info=l,t.$info=i),t.id=n,t.$name||(t.$name=i.name||t.$name),t.$iconUrl||(t.$iconUrl=i.$iconUrl),s.push(t),t.$podCounters=e.createAppViewPodCounters(t),t.$podCount=(t.pods||[]).length,t.$replicationControllersText=(t.replicationControllers||[]).map("_key").join(" "),t.$servicesText=(t.services||[]).map("_key").join(" "),t.$serviceViews=e.createAppViewServiceViews(t)}catch(r){e.log.warn("Failed to update appViews: "+r)}}),this.apps=this.appViews}}catch(c){e.log.warn("Caught error: "+c)}},n.prototype.discoverPodConnections=function(t){var n=(Core.pathGet(t,["status","info"]),null),i=t.status||{},r=t.spec||{},a=e.getName(t),o=(i.hostIP,i.podIP),s=null;if(r){var l=r.containers;angular.forEach(l,function(e){if(!n){var t=e.ports;angular.forEach(t,function(e){if(!n){var t=e.containerPort,i=e.name,r=e.hostPort;(8778===t||"jolokia"===i)&&t&&(o&&(s=t),r&&(n=r))}})}})}s&&a&&e.isRunning(i)&&(t.$jolokiaUrl=UrlHelpers.join(e.masterApiUrl(),"/api/",e.defaultApiVersion,"namespaces",t.metadata.namespace,"/pods/",a+":"+s,"/proxy/jolokia/"))},n}();e.KubernetesModelService=r,e._module.factory("KubernetesModel",["$rootScope","$http","KubernetesApiURL","KubernetesState","WatcherService","$location","$resource",function(t,n,a,o,s,l,c){var u=new r;u.kubernetes=o;var d=s.getTypes();_.forEach(d,function(t){var n="";switch(t){case e.WatchTypes.NAMESPACES:n=UrlHelpers.join("namespaces");break;default:n=UrlHelpers.join("namespaces/:namespace",t,":id")}u[t+"Resource"]=e.createResource(t,n,c,u)}),s.registerListener(function(n){var r=s.getTypes();_.forEach(r,function(t){switch(t){case e.WatchTypes.SERVICES:var r=i(n[t]);angular.forEach(r,function(t){t.proxyUrl=e.kubernetesProxyUrlForService(e.kubernetesApiUrl(),t)}),u[t]=r;break;case e.WatchTypes.TEMPLATES:case e.WatchTypes.ROUTES:case e.WatchTypes.BUILDS:case e.WatchTypes.BUILD_CONFIGS:case e.WatchTypes.IMAGE_STREAMS:u.isOpenShift=!0;default:u[t]=i(n[t])}e.log.debug("Type: ",t," object: ",u[t])}),u.maybeInit(),t.$broadcast("kubernetesModelUpdated"),Core.$apply(t)});var p=l.search();return"namespace"in p&&s.setNamespace(p.namespace),u}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.HostController=e.controller("HostController",["$scope","KubernetesModel","KubernetesState","$templateCache","$location","$routeParams","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c){function u(){if(t.id=o.id,t.item=null,t.id){var n=UrlHelpers.join(c,"nodes",t.id);s.get(n).success(function(e,n,i,r){e&&(t.item=e),t.item&&(t.rawModel=JSON.stringify(t.item,null,2)),Core.$apply(t)}).error(function(t,i,r,a){e.log.warn("Failed to load "+n+" "+t+" "+i)})}else t.rawModel=null,Core.$apply(t)}t.kubernetes=i,t.model=n,t.rawMode=!1,t.rawModel=null,t.itemConfig={properties:{}},e.initShared(t,a,s,l,o,n,i,c),t.$on("kubernetesModelUpdated",function(){u()}),t.$on("$routeUpdate",function(e){u()}),t.flipRaw=function(){t.rawMode=!t.rawMode,Core.$apply(t)},u()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.HostsController=e.controller("HostsController",["$scope","KubernetesModel","KubernetesPods","KubernetesState","ServiceRegistry","$dialog","$window","$templateCache","$routeParams","$location","localStorage","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u,d,p,h,f){t.kubernetes=r,t.model=n,t.tableConfig={data:"model.hosts",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:u.search().q||""},columnDefs:[{field:"id",displayName:"Name",defaultSort:!0,cellTemplate:l.get("idTemplate.html")},{field:"hostIP",displayName:"IP"},{field:"$podsLink",displayName:"Pods",cellTemplate:l.get("podCountsAndLinkTemplate.html")}]},e.initShared(t,u,p,h,c,n,r,f)}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.ImageRepositoriesController=e.controller("ImageRepositoriesController",["$scope","KubernetesModel","KubernetesBuilds","KubernetesState","$dialog","$window","$templateCache","$routeParams","$location","localStorage","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u,d,p,h){function f(t,n){var i=(t||{}).$name;if(i){console.log("About to delete image repository: "+i);var r=e.imageRepositoryRestUrl(i);d["delete"](r).success(function(e,t,i,r){n()}).error(function(t,n,i,a){e.log.warn("Failed to delete image repository on "+r+" "+t+" "+n)})}else console.log("warning: no name for selection: "+angular.toJson(t))}function g(){var n=e.imageRepositoriesRestURL();d.get(n).success(function(n,i,r,a){n&&(t.imageRepositories=e.enrichImageRepositories(n.items),t.fetched=!0,Core.$apply(t))}).error(function(t,i,r,a){e.log.warn("Failed to load "+n+" "+t+" "+i)})}t.kubernetes=r,t.model=n,t.KubernetesBuilds=i,t.$on("kubernetesModelUpdated",function(){Core.$apply(t)}),t.tableConfig={data:"imageRepositories",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:c.search().q||""},columnDefs:[{field:"metadata.name",displayName:"Name"},{field:"metadata.namespace",displayName:"Namespace"},{field:"status.dockerImageRepository",displayName:"Docker Registry"},{field:"tags",displayName:"Tags",cellTemplate:s.get("imageRegistryLabelTemplate.html")}]};var m={prod:"background-blue",valid:"background-light-green",test:"background-light-grey"};t.labelClass=function(e){return e in m?m[e]+" mouse-pointer":"mouse-pointer"},e.initShared(t,c,d,p,l,n,r,h),t.deletePrompt=function(e){UI.multiItemConfirmActionDialog({collection:e,index:"$name",onClose:function(t){function n(e,t){t?f(t,function(){n(e,e.shift())}):g()}t&&n(e,e.shift())},title:"Delete Image Repository?",action:"The following Image Repositories will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()},g()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.KubernetesJsonDirective=e._module.directive("kubernetesJson",[function(){return{restrict:"A",replace:!0,templateUrl:e.templatePath+"kubernetesJsonDirective.html",scope:{config:"=kubernetesJson"},controller:["$scope","$location","$http","KubernetesApiURL","marked",function(t,n,i,r,a){t.$watch("config",function(t){t?t.error?e.log.debug("Error parsing kubernetes config: ",t.error):e.log.debug("Got kubernetes configuration: ",t):e.log.debug("Kubernetes config unset")}),t.$on("Wiki.ViewPage.Children",function(n,r,o){if(t.appTitle=r,o){var s=o.find(function(e){return"summary.md"===e.name.toLowerCase()}),l=null;s&&(l=Wiki.gitRestURL(s.branch,s.path),i.get(l).success(function(e,n,i,r){var o=e;t.summaryHtml=o?a(o):null}).error(function(n,i,r,a){t.summaryHtml=null,e.log.warn("Failed to load "+l+" "+n+" "+i)}));var c=o.find(function(e){return e.name.toLowerCase().startsWith("icon")});c&&(t.iconURL=Wiki.gitRestURL(c.branch,c.path));var u=o.find(function(e){return"fabric8.properties"===e.name.toLowerCase()}),d=null;u&&(d=Wiki.gitRestURL(u.branch,u.path),i.get(d).success(function(e,n,i,r){var a=e;if(a){var o=/(?:name)\s*=\s*(.+)[\n|$]/,s=a.match(o);s[1]&&(t.displayName=s[1].replace(/\\/g,""))}}).error(function(t,n,i,r){e.log.warn("Failed to load "+d+" "+t+" "+n)}))}}),t.apply=function(){var a=angular.toJson(t.config),o=t.appTitle||"App";e.runApp(n,t,i,r,a,o,function(){n.url(Core.url("/kubernetes/apps"))})}}]}}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.schema={id:"http://fabric8.io/fabric8/v2/Schema#",$schema:"http://json-schema.org/schema#",definitions:{kubernetes_AWSElasticBlockStoreVolumeSource:{type:"object",description:"",properties:{fsType:{type:"string",description:"file system type to mount"},partition:{type:"integer",description:"partition on the disk to mount (e.g."},readOnly:{type:"boolean",description:"read-only if true"},volumeID:{type:"string",description:"unique id of the PD resource in AWS"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.AWSElasticBlockStoreVolumeSource"},kubernetes_Capabilities:{type:"object",description:"",properties:{add:{type:"array",description:"added capabilities",items:{type:"string",description:"added capabilities"}},drop:{type:"array",description:"droped capabilities",items:{type:"string",description:"droped capabilities"}}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.Capabilities"},kubernetes_Container:{type:"object",description:"",properties:{args:{type:"array",description:"command array; the docker image's cmd is used if this is not provided; arguments to the entrypoint; cannot be updated",items:{type:"string",description:"command array; the docker image's cmd is used if this is not provided; arguments to the entrypoint; cannot be updated"}},command:{type:"array",description:"entrypoint array; not executed within a shell; the docker image's entrypoint is used if this is not provided; cannot be updated",items:{type:"string",description:"entrypoint array; not executed within a shell; the docker image's entrypoint is used if this is not provided; cannot be updated"}},env:{type:"array",description:"list of environment variables to set in the container; cannot be updated",items:{$ref:"#/definitions/kubernetes_EnvVar",javaType:"io.fabric8.kubernetes.api.model.EnvVar"}},image:{type:"string",description:"Docker image name"},imagePullPolicy:{type:"string",description:"image pull policy; one of Always"},lifecycle:{$ref:"#/definitions/kubernetes_Lifecycle",javaType:"io.fabric8.kubernetes.api.model.Lifecycle"},livenessProbe:{$ref:"#/definitions/kubernetes_Probe",javaType:"io.fabric8.kubernetes.api.model.Probe"},name:{type:"string",description:"name of the container; must be a DNS_LABEL and unique within the pod; cannot be updated",maxLength:63,pattern:"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},ports:{type:"array",description:"list of ports to expose from the container; cannot be updated",items:{$ref:"#/definitions/kubernetes_ContainerPort",javaType:"io.fabric8.kubernetes.api.model.ContainerPort"}},readinessProbe:{$ref:"#/definitions/kubernetes_Probe",javaType:"io.fabric8.kubernetes.api.model.Probe"},resources:{$ref:"#/definitions/kubernetes_ResourceRequirements",javaType:"io.fabric8.kubernetes.api.model.ResourceRequirements"},securityContext:{$ref:"#/definitions/kubernetes_SecurityContext",javaType:"io.fabric8.kubernetes.api.model.SecurityContext"},terminationMessagePath:{type:"string",description:"path at which the file to which the container's termination message will be written is mounted into the container's filesystem; message written is intended to be brief final status"},volumeMounts:{type:"array",description:"pod volumes to mount into the container's filesyste; cannot be updated",items:{$ref:"#/definitions/kubernetes_VolumeMount",javaType:"io.fabric8.kubernetes.api.model.VolumeMount"}},workingDir:{type:"string",description:"container's working directory; defaults to image's default; cannot be updated"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.Container"},kubernetes_ContainerPort:{type:"object",description:"",properties:{containerPort:{type:"integer",description:"number of port to expose on the pod's IP address"},hostIP:{type:"string",description:"host IP to bind the port to"},hostPort:{type:"integer",description:"number of port to expose on the host; most containers do not need this"},name:{type:"string",description:"name for the port that can be referred to by services; must be a DNS_LABEL and unique without the pod"},protocol:{type:"string",description:"protocol for port; must be UDP or TCP; TCP if unspecified"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ContainerPort"},kubernetes_ContainerState:{type:"object",description:"",properties:{running:{$ref:"#/definitions/kubernetes_ContainerStateRunning",javaType:"io.fabric8.kubernetes.api.model.ContainerStateRunning"},termination:{$ref:"#/definitions/kubernetes_ContainerStateTerminated",javaType:"io.fabric8.kubernetes.api.model.ContainerStateTerminated"},waiting:{$ref:"#/definitions/kubernetes_ContainerStateWaiting",javaType:"io.fabric8.kubernetes.api.model.ContainerStateWaiting"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ContainerState"},kubernetes_ContainerStateRunning:{type:"object",description:"",properties:{startedAt:{type:"string",description:"time at which the container was last (re-)started"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ContainerStateRunning"},kubernetes_ContainerStateTerminated:{type:"object",description:"",properties:{containerID:{type:"string",description:"container's ID in the format 'docker://<container_id>'"},exitCode:{type:"integer",description:"exit status from the last termination of the container"},finishedAt:{type:"string",description:"time at which the container last terminated"},message:{type:"string",description:"message regarding the last termination of the container"},reason:{type:"string",description:"(brief) reason from the last termination of the container"},signal:{type:"integer",description:"signal from the last termination of the container"},startedAt:{type:"string",description:"time at which previous execution of the container started"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ContainerStateTerminated"},kubernetes_ContainerStateWaiting:{type:"object",description:"",properties:{reason:{type:"string",description:"(brief) reason the container is not yet running"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ContainerStateWaiting"},kubernetes_ContainerStatus:{type:"object",description:"",properties:{containerID:{type:"string",description:"container's ID in the format 'docker://<container_id>'"},image:{type:"string",description:"image of the container"},imageID:{type:"string",description:"ID of the container's image"},lastState:{$ref:"#/definitions/kubernetes_ContainerState",javaType:"io.fabric8.kubernetes.api.model.ContainerState"},name:{type:"string",description:"name of the container; must be a DNS_LABEL and unique within the pod; cannot be updated",maxLength:63,pattern:"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},ready:{type:"boolean",description:"specifies whether the container has passed its readiness probe"},restartCount:{type:"integer",description:"the number of times the container has been restarted"},state:{$ref:"#/definitions/kubernetes_ContainerState",javaType:"io.fabric8.kubernetes.api.model.ContainerState"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ContainerStatus"},kubernetes_EmptyDirVolumeSource:{type:"object",description:"",properties:{medium:{type:"string",description:"type of storage used to back the volume; must be an empty string (default) or Memory"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.EmptyDirVolumeSource"},kubernetes_EndpointAddress:{type:"object",description:"",properties:{ip:{type:"string",description:"IP address of the endpoint"},targetRef:{$ref:"#/definitions/kubernetes_ObjectReference",javaType:"io.fabric8.kubernetes.api.model.ObjectReference"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.EndpointAddress"},kubernetes_EndpointPort:{type:"object",description:"",properties:{name:{type:"string",description:"name of this port",maxLength:63,pattern:"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},port:{type:"integer",description:"port number of the endpoint"},protocol:{type:"string",description:"protocol for this port; must be UDP or TCP; TCP if unspecified"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.EndpointPort"},kubernetes_EndpointSubset:{type:"object",description:"",properties:{addresses:{type:"array",description:"IP addresses which offer the related ports",items:{$ref:"#/definitions/kubernetes_EndpointAddress",javaType:"io.fabric8.kubernetes.api.model.EndpointAddress"}},ports:{type:"array",description:"port numbers available on the related IP addresses",items:{$ref:"#/definitions/kubernetes_EndpointPort",javaType:"io.fabric8.kubernetes.api.model.EndpointPort"}}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.EndpointSubset"},kubernetes_Endpoints:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"Endpoints",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},subsets:{type:"array",description:"sets of addresses and ports that comprise a service",items:{$ref:"#/definitions/kubernetes_EndpointSubset",javaType:"io.fabric8.kubernetes.api.model.EndpointSubset"}}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.Endpoints",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},kubernetes_EndpointsList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of endpoints",items:{$ref:"#/definitions/kubernetes_Endpoints",javaType:"io.fabric8.kubernetes.api.model.Endpoints"}},kind:{type:"string",description:"","default":"EndpointsList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.EndpointsList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},kubernetes_EnvVar:{type:"object",description:"",properties:{name:{type:"string",description:"name of the environment variable; must be a C_IDENTIFIER",pattern:"^[A-Za-z_][A-Za-z0-9_]*$"},value:{type:"string",description:"value of the environment variable; defaults to empty string"},valueFrom:{$ref:"#/definitions/kubernetes_EnvVarSource",javaType:"io.fabric8.kubernetes.api.model.EnvVarSource"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.EnvVar"},kubernetes_EnvVarSource:{type:"object",description:"",properties:{fieldRef:{$ref:"#/definitions/kubernetes_ObjectFieldSelector",javaType:"io.fabric8.kubernetes.api.model.ObjectFieldSelector"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.EnvVarSource"},kubernetes_ExecAction:{type:"object",description:"",properties:{command:{type:"array",description:"command line to execute inside the container; working directory for the command is root ('/') in the container's file system; the command is exec'd",items:{type:"string",description:"command line to execute inside the container; working directory for the command is root ('/') in the container's file system; the command is exec'd"}}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ExecAction"},kubernetes_GCEPersistentDiskVolumeSource:{type:"object",description:"",properties:{fsType:{type:"string",description:"file system type to mount"},partition:{type:"integer",description:"partition on the disk to mount (e.g."},pdName:{type:"string",description:"unique name of the PD resource in GCE"},readOnly:{type:"boolean",description:"read-only if true"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.GCEPersistentDiskVolumeSource"},kubernetes_GitRepoVolumeSource:{type:"object",description:"",properties:{repository:{type:"string",description:"repository URL"},revision:{type:"string",description:"commit hash for the specified revision"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.GitRepoVolumeSource"},kubernetes_GlusterfsVolumeSource:{type:"object",description:"",properties:{endpoints:{type:"string",description:"gluster hosts endpoints name"},path:{type:"string",description:"path to gluster volume"},readOnly:{type:"boolean",description:"glusterfs volume to be mounted with read-only permissions"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.GlusterfsVolumeSource"},kubernetes_HTTPGetAction:{type:"object",description:"",properties:{host:{type:"string",description:"hostname to connect to; defaults to pod IP"},path:{type:"string",description:"path to access on the HTTP server"},port:{$ref:"#/definitions/kubernetes_util_IntOrString",javaType:"io.fabric8.kubernetes.api.model.util.IntOrString"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.HTTPGetAction"},kubernetes_Handler:{type:"object",description:"",properties:{exec:{$ref:"#/definitions/kubernetes_ExecAction",javaType:"io.fabric8.kubernetes.api.model.ExecAction"},httpGet:{$ref:"#/definitions/kubernetes_HTTPGetAction",javaType:"io.fabric8.kubernetes.api.model.HTTPGetAction"},tcpSocket:{$ref:"#/definitions/kubernetes_TCPSocketAction",javaType:"io.fabric8.kubernetes.api.model.TCPSocketAction"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.Handler"},kubernetes_HostPathVolumeSource:{type:"object",description:"",properties:{path:{type:"string",description:"path of the directory on the host"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.HostPathVolumeSource"},kubernetes_ISCSIVolumeSource:{type:"object",description:"",properties:{fsType:{type:"string",description:"file system type to mount"},iqn:{type:"string",description:"iSCSI Qualified Name"},lun:{type:"integer",description:"iscsi target lun number"},readOnly:{type:"boolean",description:"read-only if true"},targetPortal:{type:"string",description:"iSCSI target portal"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ISCSIVolumeSource"},kubernetes_Lifecycle:{type:"object",description:"",properties:{postStart:{$ref:"#/definitions/kubernetes_Handler",javaType:"io.fabric8.kubernetes.api.model.Handler"},preStop:{$ref:"#/definitions/kubernetes_Handler",javaType:"io.fabric8.kubernetes.api.model.Handler"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.Lifecycle"},kubernetes_List:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of objects",items:{$ref:"#/definitions/kubernetes_runtime_RawExtension",javaType:"io.fabric8.kubernetes.api.model.HasMetadata"}},kind:{type:"string",description:"","default":"List",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.BaseKubernetesList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},kubernetes_ListMeta:{type:"object",description:"",properties:{resourceVersion:{type:"string",description:"string that identifies the internal version of this object that can be used by clients to determine when objects have changed; populated by the system"},selfLink:{type:"string",description:"URL for the object; populated by the system"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ListMeta"},kubernetes_LoadBalancerIngress:{type:"object",description:"",properties:{hostname:{type:"string",description:"hostname of ingress point"},ip:{type:"string",description:"IP address of ingress point"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.LoadBalancerIngress"},kubernetes_LoadBalancerStatus:{type:"object",description:"",properties:{ingress:{type:"array",description:"load-balancer ingress points",items:{$ref:"#/definitions/kubernetes_LoadBalancerIngress",javaType:"io.fabric8.kubernetes.api.model.LoadBalancerIngress"}}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.LoadBalancerStatus"},kubernetes_LocalObjectReference:{type:"object",description:"",properties:{name:{type:"string",description:"name of the referent"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.LocalObjectReference"},kubernetes_NFSVolumeSource:{type:"object",description:"",properties:{path:{type:"string",description:"the path that is exported by the NFS server"},readOnly:{type:"boolean",description:"forces the NFS export to be mounted with read-only permissions"},server:{type:"string",description:"the hostname or IP address of the NFS server"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.NFSVolumeSource"},kubernetes_Namespace:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"Namespace",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},spec:{$ref:"#/definitions/kubernetes_NamespaceSpec",javaType:"io.fabric8.kubernetes.api.model.NamespaceSpec"},status:{$ref:"#/definitions/kubernetes_NamespaceStatus",javaType:"io.fabric8.kubernetes.api.model.NamespaceStatus"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.Namespace",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},kubernetes_NamespaceList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"items is the list of Namespace objects in the list",items:{$ref:"#/definitions/kubernetes_Namespace",javaType:"io.fabric8.kubernetes.api.model.Namespace"}},kind:{type:"string",description:"","default":"NamespaceList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.NamespaceList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},kubernetes_NamespaceSpec:{type:"object",description:"",properties:{finalizers:{type:"array",description:"an opaque list of values that must be empty to permanently remove object from storage",items:{type:"string",description:"an opaque list of values that must be empty to permanently remove object from storage"}}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.NamespaceSpec"},kubernetes_NamespaceStatus:{type:"object",description:"",properties:{phase:{type:"string",description:"phase is the current lifecycle phase of the namespace"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.NamespaceStatus"},kubernetes_Node:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"Node",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},spec:{$ref:"#/definitions/kubernetes_NodeSpec",javaType:"io.fabric8.kubernetes.api.model.NodeSpec"},status:{$ref:"#/definitions/kubernetes_NodeStatus",javaType:"io.fabric8.kubernetes.api.model.NodeStatus"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.Node",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},kubernetes_NodeAddress:{type:"object",description:"",properties:{address:{type:"string",description:"the node address"},type:{type:"string",description:"node address type"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.NodeAddress"},kubernetes_NodeCondition:{type:"object",description:"",properties:{lastHeartbeatTime:{type:"string",description:"last time we got an update on a given condition"},lastTransitionTime:{type:"string",description:"last time the condition transit from one status to another"},message:{type:"string",description:"human readable message indicating details about last transition"},reason:{type:"string",description:"(brief) reason for the condition's last transition"},status:{type:"string",description:"status of the condition"},type:{type:"string",description:"type of node condition"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.NodeCondition"},kubernetes_NodeList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of nodes",items:{$ref:"#/definitions/kubernetes_Node",javaType:"io.fabric8.kubernetes.api.model.Node"}},kind:{type:"string",description:"","default":"NodeList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.NodeList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},kubernetes_NodeSpec:{type:"object",description:"",properties:{externalID:{type:"string",description:"external ID assigned to the node by some machine database (e.g. a cloud provider). Defaults to node name when empty."},podCIDR:{type:"string",description:"pod IP range assigned to the node"},unschedulable:{type:"boolean",description:"disable pod scheduling on the node"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.NodeSpec"},kubernetes_NodeStatus:{type:"object",description:"",properties:{addresses:{type:"array",description:"list of addresses reachable to the node",items:{$ref:"#/definitions/kubernetes_NodeAddress",javaType:"io.fabric8.kubernetes.api.model.NodeAddress"}},capacity:{type:"object",description:"compute resource capacity of the node; http://docs.k8s.io/resources.md",additionalProperties:{$ref:"#/definitions/kubernetes_resource_Quantity",javaType:"io.fabric8.kubernetes.api.model.resource.Quantity"},javaType:"java.util.Map<String,io.fabric8.kubernetes.api.model.resource.Quantity>"},conditions:{type:"array",description:"list of node conditions observed",items:{$ref:"#/definitions/kubernetes_NodeCondition",javaType:"io.fabric8.kubernetes.api.model.NodeCondition"}},nodeInfo:{$ref:"#/definitions/kubernetes_NodeSystemInfo",javaType:"io.fabric8.kubernetes.api.model.NodeSystemInfo"},phase:{type:"string",description:"most recently observed lifecycle phase of the node"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.NodeStatus"},kubernetes_NodeSystemInfo:{type:"object",description:"",properties:{bootID:{type:"string",description:"boot id is the boot-id reported by the node"},containerRuntimeVersion:{type:"string",description:"Container runtime version reported by the node through runtime remote API (e.g. docker://1.5.0)"},kernelVersion:{type:"string",description:"Kernel version reported by the node from 'uname -r' (e.g. 3.16.0-0.bpo.4-amd64)"},kubeProxyVersion:{type:"string",description:"Kube-proxy version reported by the node"},kubeletVersion:{type:"string",description:"Kubelet version reported by the node"},machineID:{type:"string",description:"machine-id reported by the node"},osImage:{type:"string",description:"OS image used reported by the node from /etc/os-release (e.g. Debian GNU/Linux 7 (wheezy))"
},systemUUID:{type:"string",description:"system-uuid reported by the node"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.NodeSystemInfo"},kubernetes_ObjectFieldSelector:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"version of the schema that fieldPath is written in terms of; defaults to v1"},fieldPath:{type:"string",description:"path of the field to select in the specified API version"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ObjectFieldSelector"},kubernetes_ObjectMeta:{type:"object",description:"",properties:{annotations:{type:"object",description:"map of string keys and values that can be used by external tooling to store and retrieve arbitrary metadata about objects",additionalProperties:{type:"string",description:"map of string keys and values that can be used by external tooling to store and retrieve arbitrary metadata about objects"},javaType:"java.util.Map<String,String>"},creationTimestamp:{type:"string",description:"RFC 3339 date and time at which the object was created; populated by the system"},deletionTimestamp:{type:"string",description:"RFC 3339 date and time at which the object will be deleted; populated by the system when a graceful deletion is requested"},generateName:{type:"string",description:"an optional prefix to use to generate a unique name; has the same validation rules as name; optional"},labels:{type:"object",description:"map of string keys and values that can be used to organize and categorize objects; may match selectors of replication controllers and services",additionalProperties:{type:"string",description:"map of string keys and values that can be used to organize and categorize objects; may match selectors of replication controllers and services"},javaType:"java.util.Map<String,String>"},name:{type:"string",description:"string that identifies an object. Must be unique within a namespace; cannot be updated",maxLength:63,pattern:"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},namespace:{type:"string",description:"namespace of the object; must be a DNS_LABEL; cannot be updated",maxLength:253,pattern:"^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$"},resourceVersion:{type:"string",description:"string that identifies the internal version of this object that can be used by clients to determine when objects have changed; populated by the system"},selfLink:{type:"string",description:"URL for the object; populated by the system"},uid:{type:"string",description:"unique UUID across space and time; populated by the system; read-only"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},kubernetes_ObjectReference:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"API version of the referent"},fieldPath:{type:"string",description:"if referring to a piece of an object instead of an entire object"},kind:{type:"string",description:"kind of the referent"},name:{type:"string",description:"name of the referent"},namespace:{type:"string",description:"namespace of the referent"},resourceVersion:{type:"string",description:"specific resourceVersion to which this reference is made"},uid:{type:"string",description:"uid of the referent"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ObjectReference"},kubernetes_PersistentVolumeClaimVolumeSource:{type:"object",description:"",properties:{claimName:{type:"string",description:"the name of the claim in the same namespace to be mounted as a volume"},readOnly:{type:"boolean",description:"mount volume as read-only when true; default false"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.PersistentVolumeClaimVolumeSource"},kubernetes_Pod:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"Pod",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},spec:{$ref:"#/definitions/kubernetes_PodSpec",javaType:"io.fabric8.kubernetes.api.model.PodSpec"},status:{$ref:"#/definitions/kubernetes_PodStatus",javaType:"io.fabric8.kubernetes.api.model.PodStatus"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.Pod",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},kubernetes_PodCondition:{type:"object",description:"",properties:{status:{type:"string",description:"status of the condition"},type:{type:"string",description:"kind of the condition"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.PodCondition"},kubernetes_PodList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of pods",items:{$ref:"#/definitions/kubernetes_Pod",javaType:"io.fabric8.kubernetes.api.model.Pod"}},kind:{type:"string",description:"","default":"PodList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.PodList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},kubernetes_PodSpec:{type:"object",description:"",properties:{activeDeadlineSeconds:{type:"integer",description:"",javaType:"Long"},containers:{type:"array",description:"list of containers belonging to the pod; cannot be updated; containers cannot currently be added or removed; there must be at least one container in a Pod",items:{$ref:"#/definitions/kubernetes_Container",javaType:"io.fabric8.kubernetes.api.model.Container"}},dnsPolicy:{type:"string",description:"DNS policy for containers within the pod; one of 'ClusterFirst' or 'Default'"},host:{type:"string",description:"host requested for this pod"},hostNetwork:{type:"boolean",description:"host networking requested for this pod"},imagePullSecrets:{type:"array",description:"list of references to secrets in the same namespace available for pulling the container images",items:{$ref:"#/definitions/kubernetes_LocalObjectReference",javaType:"io.fabric8.kubernetes.api.model.LocalObjectReference"}},nodeSelector:{type:"object",description:"selector which must match a node's labels for the pod to be scheduled on that node",additionalProperties:{type:"string",description:"selector which must match a node's labels for the pod to be scheduled on that node"},javaType:"java.util.Map<String,String>"},restartPolicy:{type:"string",description:"restart policy for all containers within the pod; one of RestartPolicyAlways"},serviceAccount:{type:"string",description:"name of the ServiceAccount to use to run this pod"},terminationGracePeriodSeconds:{type:"integer",description:"optional duration in seconds the pod needs to terminate gracefully; may be decreased in delete request; value must be non-negative integer; the value zero indicates delete immediately; if this value is not set",javaType:"Long"},volumes:{type:"array",description:"list of volumes that can be mounted by containers belonging to the pod",items:{$ref:"#/definitions/kubernetes_Volume",javaType:"io.fabric8.kubernetes.api.model.Volume"}}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.PodSpec"},kubernetes_PodStatus:{type:"object",description:"",properties:{conditions:{type:"array",description:"current service state of pod",items:{$ref:"#/definitions/kubernetes_PodCondition",javaType:"io.fabric8.kubernetes.api.model.PodCondition"}},containerStatuses:{type:"array",description:"list of container statuses",items:{$ref:"#/definitions/kubernetes_ContainerStatus",javaType:"io.fabric8.kubernetes.api.model.ContainerStatus"}},hostIP:{type:"string",description:"IP address of the host to which the pod is assigned; empty if not yet scheduled"},message:{type:"string",description:"human readable message indicating details about why the pod is in this condition"},phase:{type:"string",description:"current condition of the pod."},podIP:{type:"string",description:"IP address allocated to the pod; routable at least within the cluster; empty if not yet allocated"},startTime:{type:"string",description:"RFC 3339 date and time at which the object was acknowledged by the Kubelet.  This is before the Kubelet pulled the container image(s) for the pod."}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.PodStatus"},kubernetes_PodTemplateSpec:{type:"object",description:"",properties:{metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},spec:{$ref:"#/definitions/kubernetes_PodSpec",javaType:"io.fabric8.kubernetes.api.model.PodSpec"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.PodTemplateSpec"},kubernetes_Probe:{type:"object",description:"",properties:{exec:{$ref:"#/definitions/kubernetes_ExecAction",javaType:"io.fabric8.kubernetes.api.model.ExecAction"},httpGet:{$ref:"#/definitions/kubernetes_HTTPGetAction",javaType:"io.fabric8.kubernetes.api.model.HTTPGetAction"},initialDelaySeconds:{type:"integer",description:"number of seconds after the container has started before liveness probes are initiated",javaType:"Long"},tcpSocket:{$ref:"#/definitions/kubernetes_TCPSocketAction",javaType:"io.fabric8.kubernetes.api.model.TCPSocketAction"},timeoutSeconds:{type:"integer",description:"number of seconds after which liveness probes timeout; defaults to 1 second",javaType:"Long"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.Probe"},kubernetes_RBDVolumeSource:{type:"object",description:"",properties:{fsType:{type:"string",description:"file system type to mount"},image:{type:"string",description:"rados image name"},keyring:{type:"string",description:"keyring is the path to key ring for rados user; default is /etc/ceph/keyring; optional"},monitors:{type:"array",description:"a collection of Ceph monitors",items:{type:"string",description:"a collection of Ceph monitors"}},pool:{type:"string",description:"rados pool name; default is rbd; optional"},readOnly:{type:"boolean",description:"rbd volume to be mounted with read-only permissions"},secretRef:{$ref:"#/definitions/kubernetes_LocalObjectReference",javaType:"io.fabric8.kubernetes.api.model.LocalObjectReference"},user:{type:"string",description:"rados user name; default is admin; optional"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.RBDVolumeSource"},kubernetes_ReplicationController:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"ReplicationController",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},spec:{$ref:"#/definitions/kubernetes_ReplicationControllerSpec",javaType:"io.fabric8.kubernetes.api.model.ReplicationControllerSpec"},status:{$ref:"#/definitions/kubernetes_ReplicationControllerStatus",javaType:"io.fabric8.kubernetes.api.model.ReplicationControllerStatus"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ReplicationController",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},kubernetes_ReplicationControllerList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of replication controllers",items:{$ref:"#/definitions/kubernetes_ReplicationController",javaType:"io.fabric8.kubernetes.api.model.ReplicationController"}},kind:{type:"string",description:"","default":"ReplicationControllerList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ReplicationControllerList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},kubernetes_ReplicationControllerSpec:{type:"object",description:"",properties:{replicas:{type:"integer",description:"number of replicas desired; defaults to 1"},selector:{type:"object",description:"label keys and values that must match in order to be controlled by this replication controller",additionalProperties:{type:"string",description:"label keys and values that must match in order to be controlled by this replication controller"},javaType:"java.util.Map<String,String>"},template:{$ref:"#/definitions/kubernetes_PodTemplateSpec",javaType:"io.fabric8.kubernetes.api.model.PodTemplateSpec"},templateRef:{$ref:"#/definitions/kubernetes_ObjectReference",javaType:"io.fabric8.kubernetes.api.model.ObjectReference"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ReplicationControllerSpec"},kubernetes_ReplicationControllerStatus:{type:"object",description:"",properties:{replicas:{type:"integer",description:"most recently oberved number of replicas"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ReplicationControllerStatus"},kubernetes_ResourceRequirements:{type:"object",description:"",properties:{limits:{type:"object",description:"Maximum amount of compute resources allowed",additionalProperties:{$ref:"#/definitions/kubernetes_resource_Quantity",javaType:"io.fabric8.kubernetes.api.model.resource.Quantity"},javaType:"java.util.Map<String,io.fabric8.kubernetes.api.model.resource.Quantity>"},requests:{type:"object",description:"Minimum amount of resources requested; requests are honored only for persistent volumes as of now",additionalProperties:{$ref:"#/definitions/kubernetes_resource_Quantity",javaType:"io.fabric8.kubernetes.api.model.resource.Quantity"},javaType:"java.util.Map<String,io.fabric8.kubernetes.api.model.resource.Quantity>"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ResourceRequirements"},kubernetes_SELinuxOptions:{type:"object",description:"",properties:{level:{type:"string",description:"the level label to apply to the container"},role:{type:"string",description:"the role label to apply to the container"},type:{type:"string",description:"the type label to apply to the container"},user:{type:"string",description:"the user label to apply to the container"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.SELinuxOptions"},kubernetes_Secret:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},data:{type:"object",description:"data contains the secret data.  Each key must be a valid DNS_SUBDOMAIN or leading dot followed by valid DNS_SUBDOMAIN.  Each value must be a base64 encoded string as described in https://tools.ietf.org/html/rfc4648#section-4",additionalProperties:{type:"string",description:"data contains the secret data.  Each key must be a valid DNS_SUBDOMAIN or leading dot followed by valid DNS_SUBDOMAIN.  Each value must be a base64 encoded string as described in https://tools.ietf.org/html/rfc4648#section-4"},javaType:"java.util.Map<String,String>"},kind:{type:"string",description:"","default":"Secret",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},type:{type:"string",description:"type facilitates programmatic handling of secret data"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.Secret",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},kubernetes_SecretList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"items is a list of secret objects",items:{$ref:"#/definitions/kubernetes_Secret",javaType:"io.fabric8.kubernetes.api.model.Secret"}},kind:{type:"string",description:"","default":"SecretList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.SecretList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},kubernetes_SecretVolumeSource:{type:"object",description:"",properties:{secretName:{type:"string",description:"secretName is the name of a secret in the pod's namespace"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.SecretVolumeSource"},kubernetes_SecurityContext:{type:"object",description:"",properties:{capabilities:{$ref:"#/definitions/kubernetes_Capabilities",javaType:"io.fabric8.kubernetes.api.model.Capabilities"},privileged:{type:"boolean",description:"run the container in privileged mode"},runAsUser:{type:"integer",description:"the user id that runs the first process in the container",javaType:"Long"},seLinuxOptions:{$ref:"#/definitions/kubernetes_SELinuxOptions",javaType:"io.fabric8.kubernetes.api.model.SELinuxOptions"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.SecurityContext"},kubernetes_Service:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"Service",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},spec:{$ref:"#/definitions/kubernetes_ServiceSpec",javaType:"io.fabric8.kubernetes.api.model.ServiceSpec"},status:{$ref:"#/definitions/kubernetes_ServiceStatus",javaType:"io.fabric8.kubernetes.api.model.ServiceStatus"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.Service",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},kubernetes_ServiceAccount:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"ServiceAccount",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},secrets:{type:"array",description:"list of secrets that can be used by pods running as this service account",items:{$ref:"#/definitions/kubernetes_ObjectReference",javaType:"io.fabric8.kubernetes.api.model.ObjectReference"}}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ServiceAccount",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},kubernetes_ServiceAccountList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of ServiceAccounts",items:{$ref:"#/definitions/kubernetes_ServiceAccount",javaType:"io.fabric8.kubernetes.api.model.ServiceAccount"}},kind:{type:"string",description:"","default":"ServiceAccountList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ServiceAccountList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},kubernetes_ServiceList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of services",items:{$ref:"#/definitions/kubernetes_Service",javaType:"io.fabric8.kubernetes.api.model.Service"}},kind:{type:"string",description:"","default":"ServiceList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ServiceList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},kubernetes_ServicePort:{type:"object",description:"",properties:{name:{type:"string",description:"the name of this port; optional if only one port is defined",maxLength:63,pattern:"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},nodePort:{type:"integer",description:"the port on each node on which this service is exposed"},port:{type:"integer",description:"the port number that is exposed"},protocol:{type:"string",description:"the protocol used by this port; must be UDP or TCP; TCP if unspecified"},targetPort:{$ref:"#/definitions/kubernetes_util_IntOrString",javaType:"io.fabric8.kubernetes.api.model.util.IntOrString"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ServicePort"},kubernetes_ServiceSpec:{type:"object",description:"",properties:{deprecatedPublicIPs:{type:"array",description:"deprecated. externally visible IPs (e.g. load balancers) that should be proxied to this service",items:{type:"string",description:"deprecated. externally visible IPs (e.g. load balancers) that should be proxied to this service"}},portalIP:{type:"string",description:""},ports:{type:"array",description:"ports exposed by the service",items:{$ref:"#/definitions/kubernetes_ServicePort",javaType:"io.fabric8.kubernetes.api.model.ServicePort"}},selector:{type:"object",description:"label keys and values that must match in order to receive traffic for this service; if empty",additionalProperties:{type:"string",description:"label keys and values that must match in order to receive traffic for this service; if empty"},javaType:"java.util.Map<String,String>"},sessionAffinity:{type:"string",description:"enable client IP based session affinity; must be ClientIP or None; defaults to None"},type:{type:"string",description:"type of this service; must be ClusterIP"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ServiceSpec"},kubernetes_ServiceStatus:{type:"object",description:"",properties:{loadBalancer:{$ref:"#/definitions/kubernetes_LoadBalancerStatus",javaType:"io.fabric8.kubernetes.api.model.LoadBalancerStatus"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.ServiceStatus"},kubernetes_TCPSocketAction:{type:"object",description:"",properties:{port:{$ref:"#/definitions/kubernetes_util_IntOrString",javaType:"io.fabric8.kubernetes.api.model.util.IntOrString"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.TCPSocketAction"},kubernetes_TypeMeta:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"version of the schema the object should have"},kind:{type:"string",description:"kind of object"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.TypeMeta"},kubernetes_Volume:{type:"object",description:"",properties:{awsElasticBlockStore:{$ref:"#/definitions/kubernetes_AWSElasticBlockStoreVolumeSource",javaType:"io.fabric8.kubernetes.api.model.AWSElasticBlockStoreVolumeSource"},emptyDir:{$ref:"#/definitions/kubernetes_EmptyDirVolumeSource",javaType:"io.fabric8.kubernetes.api.model.EmptyDirVolumeSource"},gcePersistentDisk:{$ref:"#/definitions/kubernetes_GCEPersistentDiskVolumeSource",javaType:"io.fabric8.kubernetes.api.model.GCEPersistentDiskVolumeSource"},gitRepo:{$ref:"#/definitions/kubernetes_GitRepoVolumeSource",javaType:"io.fabric8.kubernetes.api.model.GitRepoVolumeSource"},glusterfs:{$ref:"#/definitions/kubernetes_GlusterfsVolumeSource",javaType:"io.fabric8.kubernetes.api.model.GlusterfsVolumeSource"},hostPath:{$ref:"#/definitions/kubernetes_HostPathVolumeSource",javaType:"io.fabric8.kubernetes.api.model.HostPathVolumeSource"},iscsi:{$ref:"#/definitions/kubernetes_ISCSIVolumeSource",javaType:"io.fabric8.kubernetes.api.model.ISCSIVolumeSource"},name:{type:"string",description:"volume name; must be a DNS_LABEL and unique within the pod",maxLength:63,pattern:"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},nfs:{$ref:"#/definitions/kubernetes_NFSVolumeSource",javaType:"io.fabric8.kubernetes.api.model.NFSVolumeSource"},persistentVolumeClaim:{$ref:"#/definitions/kubernetes_PersistentVolumeClaimVolumeSource",javaType:"io.fabric8.kubernetes.api.model.PersistentVolumeClaimVolumeSource"},rbd:{$ref:"#/definitions/kubernetes_RBDVolumeSource",javaType:"io.fabric8.kubernetes.api.model.RBDVolumeSource"},secret:{$ref:"#/definitions/kubernetes_SecretVolumeSource",javaType:"io.fabric8.kubernetes.api.model.SecretVolumeSource"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.Volume"},kubernetes_VolumeMount:{type:"object",description:"",properties:{mountPath:{type:"string",description:"path within the container at which the volume should be mounted"},name:{type:"string",description:"name of the volume to mount"},readOnly:{type:"boolean",description:"mounted read-only if true"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.VolumeMount"},kubernetes_VolumeSource:{type:"object",description:"",properties:{awsElasticBlockStore:{$ref:"#/definitions/kubernetes_AWSElasticBlockStoreVolumeSource",javaType:"io.fabric8.kubernetes.api.model.AWSElasticBlockStoreVolumeSource"},emptyDir:{$ref:"#/definitions/kubernetes_EmptyDirVolumeSource",javaType:"io.fabric8.kubernetes.api.model.EmptyDirVolumeSource"},gcePersistentDisk:{$ref:"#/definitions/kubernetes_GCEPersistentDiskVolumeSource",javaType:"io.fabric8.kubernetes.api.model.GCEPersistentDiskVolumeSource"},gitRepo:{$ref:"#/definitions/kubernetes_GitRepoVolumeSource",javaType:"io.fabric8.kubernetes.api.model.GitRepoVolumeSource"},glusterfs:{$ref:"#/definitions/kubernetes_GlusterfsVolumeSource",javaType:"io.fabric8.kubernetes.api.model.GlusterfsVolumeSource"},hostPath:{$ref:"#/definitions/kubernetes_HostPathVolumeSource",javaType:"io.fabric8.kubernetes.api.model.HostPathVolumeSource"},iscsi:{$ref:"#/definitions/kubernetes_ISCSIVolumeSource",javaType:"io.fabric8.kubernetes.api.model.ISCSIVolumeSource"},nfs:{$ref:"#/definitions/kubernetes_NFSVolumeSource",javaType:"io.fabric8.kubernetes.api.model.NFSVolumeSource"},persistentVolumeClaim:{$ref:"#/definitions/kubernetes_PersistentVolumeClaimVolumeSource",javaType:"io.fabric8.kubernetes.api.model.PersistentVolumeClaimVolumeSource"},rbd:{$ref:"#/definitions/kubernetes_RBDVolumeSource",javaType:"io.fabric8.kubernetes.api.model.RBDVolumeSource"},secret:{$ref:"#/definitions/kubernetes_SecretVolumeSource",javaType:"io.fabric8.kubernetes.api.model.SecretVolumeSource"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.VolumeSource"},kubernetes_base_ListMeta:{type:"object",description:"",properties:{resourceVersion:{type:"string",description:""},selfLink:{type:"string",description:""}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.base.ListMeta"},kubernetes_base_Status:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},code:{type:"integer",description:""},details:{$ref:"#/definitions/kubernetes_base_StatusDetails",javaType:"io.fabric8.kubernetes.api.model.base.StatusDetails"},kind:{type:"string",description:"","default":"Status",required:!0},message:{type:"string",description:""},metadata:{$ref:"#/definitions/kubernetes_base_ListMeta",javaType:"io.fabric8.kubernetes.api.model.base.ListMeta"},reason:{type:"string",description:""},status:{type:"string",description:""}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.base.Status"},kubernetes_base_StatusCause:{type:"object",description:"",properties:{field:{type:"string",description:""},message:{type:"string",description:""},reason:{type:"string",description:""}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.base.StatusCause"},kubernetes_base_StatusDetails:{type:"object",description:"",properties:{causes:{type:"array",description:"",items:{$ref:"#/definitions/kubernetes_base_StatusCause",javaType:"io.fabric8.kubernetes.api.model.base.StatusCause"}},id:{type:"string",description:""},kind:{type:"string",description:""},retryAfterSeconds:{type:"integer",description:""}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.base.StatusDetails"},kubernetes_base_TypeMeta:{type:"object",description:"",properties:{apiVersion:{type:"string",description:""},kind:{type:"string",description:""}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.base.TypeMeta"},kubernetes_config_AuthInfo:{type:"object",description:"",properties:{"client-certificate":{type:"string",description:""},"client-certificate-data":{type:"string",description:""},"client-key":{type:"string",description:""},"client-key-data":{type:"string",description:""},extensions:{type:"array",description:"",items:{$ref:"#/definitions/kubernetes_config_NamedExtension",javaType:"io.fabric8.kubernetes.api.model.config.NamedExtension"}},password:{type:"string",description:""},token:{type:"string",description:""},username:{type:"string",description:""}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.config.AuthInfo"},kubernetes_config_Cluster:{type:"object",description:"",properties:{"api-version":{type:"string",description:""},"certificate-authority":{type:"string",description:""},"certificate-authority-data":{type:"string",description:""},extensions:{type:"array",description:"",items:{$ref:"#/definitions/kubernetes_config_NamedExtension",javaType:"io.fabric8.kubernetes.api.model.config.NamedExtension"}},"insecure-skip-tls-verify":{type:"boolean",description:""},server:{type:"string",description:""}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.config.Cluster"},kubernetes_config_Config:{type:"object",description:"",properties:{apiVersion:{type:"string",description:""},clusters:{type:"array",description:"",items:{$ref:"#/definitions/kubernetes_config_NamedCluster",javaType:"io.fabric8.kubernetes.api.model.config.NamedCluster"}},contexts:{type:"array",description:"",items:{$ref:"#/definitions/kubernetes_config_NamedContext",javaType:"io.fabric8.kubernetes.api.model.config.NamedContext"}},"current-context":{type:"string",description:""},extensions:{type:"array",description:"",items:{$ref:"#/definitions/kubernetes_config_NamedExtension",javaType:"io.fabric8.kubernetes.api.model.config.NamedExtension"}},kind:{type:"string",description:""},preferences:{$ref:"#/definitions/kubernetes_config_Preferences",javaType:"io.fabric8.kubernetes.api.model.config.Preferences"},users:{type:"array",description:"",items:{$ref:"#/definitions/kubernetes_config_NamedAuthInfo",javaType:"io.fabric8.kubernetes.api.model.config.NamedAuthInfo"}}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.config.Config"},kubernetes_config_Context:{type:"object",description:"",properties:{cluster:{type:"string",description:""},extensions:{type:"array",description:"",items:{$ref:"#/definitions/kubernetes_config_NamedExtension",javaType:"io.fabric8.kubernetes.api.model.config.NamedExtension"}},namespace:{type:"string",description:""},user:{type:"string",description:""}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.config.Context"},kubernetes_config_NamedAuthInfo:{type:"object",description:"",properties:{name:{type:"string",description:""},user:{$ref:"#/definitions/kubernetes_config_AuthInfo",javaType:"io.fabric8.kubernetes.api.model.config.AuthInfo"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.config.NamedAuthInfo"},kubernetes_config_NamedCluster:{type:"object",description:"",properties:{cluster:{$ref:"#/definitions/kubernetes_config_Cluster",javaType:"io.fabric8.kubernetes.api.model.config.Cluster"},name:{type:"string",description:""}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.config.NamedCluster"},kubernetes_config_NamedContext:{type:"object",description:"",properties:{context:{$ref:"#/definitions/kubernetes_config_Context",javaType:"io.fabric8.kubernetes.api.model.config.Context"},name:{type:"string",description:""}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.config.NamedContext"},kubernetes_config_NamedExtension:{type:"object",description:"",properties:{extension:{$ref:"#/definitions/kubernetes_runtime_RawExtension",javaType:"io.fabric8.kubernetes.api.model.HasMetadata"},name:{type:"string",description:""}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.config.NamedExtension"},kubernetes_config_Preferences:{type:"object",description:"",properties:{colors:{type:"boolean",description:""},extensions:{type:"array",description:"",items:{$ref:"#/definitions/kubernetes_config_NamedExtension",
javaType:"io.fabric8.kubernetes.api.model.config.NamedExtension"}}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.config.Preferences"},kubernetes_errors_StatusError:{type:"object",description:"",properties:{ErrStatus:{$ref:"#/definitions/kubernetes_base_Status",javaType:"io.fabric8.kubernetes.api.model.base.Status"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.errors.StatusError"},kubernetes_resource_Quantity:{type:"object",description:"",properties:{Amount:{$ref:"#/definitions/speter_inf_Dec",javaType:"io.fabric8.openshift.client.util.Dec"},Format:{type:"string",description:""}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.resource.Quantity"},kubernetes_runtime_RawExtension:{type:"object",description:"",properties:{RawJSON:{type:"string",description:""}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.HasMetadata"},kubernetes_util_IntOrString:{type:"object",description:"",properties:{IntVal:{type:"integer",description:""},Kind:{type:"integer",description:""},StrVal:{type:"string",description:""}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.model.util.IntOrString"},kubernetes_watch_WatchEvent:{type:"object",description:"",properties:{object:{$ref:"#/definitions/kubernetes_runtime_RawExtension",javaType:"io.fabric8.kubernetes.api.model.HasMetadata"},type:{type:"string",description:"the type of watch event; may be ADDED"}},additionalProperties:!0,javaType:"io.fabric8.kubernetes.api.watch.WatchEvent"},os_build_Build:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"Build",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},spec:{$ref:"#/definitions/os_build_BuildSpec",javaType:"io.fabric8.openshift.api.model.BuildSpec"},status:{$ref:"#/definitions/os_build_BuildStatus",javaType:"io.fabric8.openshift.api.model.BuildStatus"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.Build",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},os_build_BuildConfig:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"BuildConfig",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},spec:{$ref:"#/definitions/os_build_BuildConfigSpec",javaType:"io.fabric8.openshift.api.model.BuildConfigSpec"},status:{$ref:"#/definitions/os_build_BuildConfigStatus",javaType:"io.fabric8.openshift.api.model.BuildConfigStatus"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.BuildConfig",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},os_build_BuildConfigList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of build configs",items:{$ref:"#/definitions/os_build_BuildConfig",javaType:"io.fabric8.openshift.api.model.BuildConfig"}},kind:{type:"string",description:"","default":"BuildConfigList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.BuildConfigList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},os_build_BuildConfigSpec:{type:"object",description:"",properties:{output:{$ref:"#/definitions/os_build_BuildOutput",javaType:"io.fabric8.openshift.api.model.BuildOutput"},resources:{$ref:"#/definitions/kubernetes_ResourceRequirements",javaType:"io.fabric8.kubernetes.api.model.ResourceRequirements"},revision:{$ref:"#/definitions/os_build_SourceRevision",javaType:"io.fabric8.openshift.api.model.SourceRevision"},serviceAccount:{type:"string",description:"the name of the service account to use to run pods created by the build"},source:{$ref:"#/definitions/os_build_BuildSource",javaType:"io.fabric8.openshift.api.model.BuildSource"},strategy:{$ref:"#/definitions/os_build_BuildStrategy",javaType:"io.fabric8.openshift.api.model.BuildStrategy"},triggers:{type:"array",description:"determines how new builds can be launched from a build config.  if no triggers are defined",items:{$ref:"#/definitions/os_build_BuildTriggerPolicy",javaType:"io.fabric8.openshift.api.model.BuildTriggerPolicy"}}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.BuildConfigSpec"},os_build_BuildConfigStatus:{type:"object",description:"",properties:{lastVersion:{type:"integer",description:"used to inform about number of last triggered build"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.BuildConfigStatus"},os_build_BuildList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of builds",items:{$ref:"#/definitions/os_build_Build",javaType:"io.fabric8.openshift.api.model.Build"}},kind:{type:"string",description:"","default":"BuildList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.BuildList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},os_build_BuildOutput:{type:"object",description:"",properties:{pushSecret:{$ref:"#/definitions/kubernetes_LocalObjectReference",javaType:"io.fabric8.kubernetes.api.model.LocalObjectReference"},to:{$ref:"#/definitions/kubernetes_ObjectReference",javaType:"io.fabric8.kubernetes.api.model.ObjectReference"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.BuildOutput"},os_build_BuildRequest:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"BuildRequest",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},revision:{$ref:"#/definitions/os_build_SourceRevision",javaType:"io.fabric8.openshift.api.model.SourceRevision"},triggeredByImage:{$ref:"#/definitions/kubernetes_ObjectReference",javaType:"io.fabric8.kubernetes.api.model.ObjectReference"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.BuildRequest",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},os_build_BuildSource:{type:"object",description:"",properties:{contextDir:{type:"string",description:"specifies sub-directory where the source code for the application exists"},git:{$ref:"#/definitions/os_build_GitBuildSource",javaType:"io.fabric8.openshift.api.model.GitBuildSource"},sourceSecret:{$ref:"#/definitions/kubernetes_LocalObjectReference",javaType:"io.fabric8.kubernetes.api.model.LocalObjectReference"},type:{type:"string",description:"type of source control management system"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.BuildSource"},os_build_BuildSpec:{type:"object",description:"",properties:{output:{$ref:"#/definitions/os_build_BuildOutput",javaType:"io.fabric8.openshift.api.model.BuildOutput"},resources:{$ref:"#/definitions/kubernetes_ResourceRequirements",javaType:"io.fabric8.kubernetes.api.model.ResourceRequirements"},revision:{$ref:"#/definitions/os_build_SourceRevision",javaType:"io.fabric8.openshift.api.model.SourceRevision"},serviceAccount:{type:"string",description:"the name of the service account to use to run pods created by the build"},source:{$ref:"#/definitions/os_build_BuildSource",javaType:"io.fabric8.openshift.api.model.BuildSource"},strategy:{$ref:"#/definitions/os_build_BuildStrategy",javaType:"io.fabric8.openshift.api.model.BuildStrategy"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.BuildSpec"},os_build_BuildStatus:{type:"object",description:"",properties:{cancelled:{type:"boolean",description:"describes if a canceling event was triggered for the build"},completionTimestamp:{type:"string",description:"server time when the pod running this build stopped running"},config:{$ref:"#/definitions/kubernetes_ObjectReference",javaType:"io.fabric8.kubernetes.api.model.ObjectReference"},duration:{type:"integer",description:"amount of time the build has been running",javaType:"Long"},message:{type:"string",description:"human-readable message indicating details about why the build has this status"},phase:{type:"string",description:"observed point in the build lifecycle"},startTimestamp:{type:"string",description:"server time when this build started running in a pod"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.BuildStatus"},os_build_BuildStrategy:{type:"object",description:"",properties:{customStrategy:{$ref:"#/definitions/os_build_CustomBuildStrategy",javaType:"io.fabric8.openshift.api.model.CustomBuildStrategy"},dockerStrategy:{$ref:"#/definitions/os_build_DockerBuildStrategy",javaType:"io.fabric8.openshift.api.model.DockerBuildStrategy"},sourceStrategy:{$ref:"#/definitions/os_build_SourceBuildStrategy",javaType:"io.fabric8.openshift.api.model.SourceBuildStrategy"},type:{type:"string",description:"identifies the type of build strategy"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.BuildStrategy"},os_build_BuildTriggerPolicy:{type:"object",description:"",properties:{generic:{$ref:"#/definitions/os_build_WebHookTrigger",javaType:"io.fabric8.openshift.api.model.WebHookTrigger"},github:{$ref:"#/definitions/os_build_WebHookTrigger",javaType:"io.fabric8.openshift.api.model.WebHookTrigger"},imageChange:{$ref:"#/definitions/os_build_ImageChangeTrigger",javaType:"io.fabric8.openshift.api.model.ImageChangeTrigger"},type:{type:"string",description:"type of build trigger"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.BuildTriggerPolicy"},os_build_CustomBuildStrategy:{type:"object",description:"",properties:{env:{type:"array",description:"additional environment variables you want to pass into a builder container",items:{$ref:"#/definitions/kubernetes_EnvVar",javaType:"io.fabric8.kubernetes.api.model.EnvVar"}},exposeDockerSocket:{type:"boolean",description:"allow running Docker commands (and build Docker images) from inside the container"},from:{$ref:"#/definitions/kubernetes_ObjectReference",javaType:"io.fabric8.kubernetes.api.model.ObjectReference"},pullSecret:{$ref:"#/definitions/kubernetes_LocalObjectReference",javaType:"io.fabric8.kubernetes.api.model.LocalObjectReference"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.CustomBuildStrategy"},os_build_DockerBuildStrategy:{type:"object",description:"",properties:{from:{$ref:"#/definitions/kubernetes_ObjectReference",javaType:"io.fabric8.kubernetes.api.model.ObjectReference"},noCache:{type:"boolean",description:"if true"},pullSecret:{$ref:"#/definitions/kubernetes_LocalObjectReference",javaType:"io.fabric8.kubernetes.api.model.LocalObjectReference"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.DockerBuildStrategy"},os_build_GitBuildSource:{type:"object",description:"",properties:{ref:{type:"string",description:"identifies the branch/tag/ref to build"},uri:{type:"string",description:"points to the source that will be built"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.GitBuildSource"},os_build_GitSourceRevision:{type:"object",description:"",properties:{author:{$ref:"#/definitions/os_build_SourceControlUser",javaType:"io.fabric8.openshift.api.model.SourceControlUser"},commit:{type:"string",description:"hash identifying a specific commit"},committer:{$ref:"#/definitions/os_build_SourceControlUser",javaType:"io.fabric8.openshift.api.model.SourceControlUser"},message:{type:"string",description:"description of a specific commit"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.GitSourceRevision"},os_build_ImageChangeTrigger:{type:"object",description:"",properties:{lastTriggeredImageID:{type:"string",description:"used internally to save last used image ID for build"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.ImageChangeTrigger"},os_build_SourceBuildStrategy:{type:"object",description:"",properties:{env:{type:"array",description:"additional environment variables you want to pass into a builder container",items:{$ref:"#/definitions/kubernetes_EnvVar",javaType:"io.fabric8.kubernetes.api.model.EnvVar"}},from:{$ref:"#/definitions/kubernetes_ObjectReference",javaType:"io.fabric8.kubernetes.api.model.ObjectReference"},incremental:{type:"boolean",description:"forces the source build to do incremental builds if true"},pullSecret:{$ref:"#/definitions/kubernetes_LocalObjectReference",javaType:"io.fabric8.kubernetes.api.model.LocalObjectReference"},scripts:{type:"string",description:"location of the source scripts"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.SourceBuildStrategy"},os_build_SourceControlUser:{type:"object",description:"",properties:{email:{type:"string",description:"e-mail of the source control user"},name:{type:"string",description:"name of the source control user"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.SourceControlUser"},os_build_SourceRevision:{type:"object",description:"",properties:{git:{$ref:"#/definitions/os_build_GitSourceRevision",javaType:"io.fabric8.openshift.api.model.GitSourceRevision"},type:{type:"string",description:"type of the build source"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.SourceRevision"},os_build_WebHookTrigger:{type:"object",description:"",properties:{secret:{type:"string",description:"secret used to validate requests"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.WebHookTrigger"},os_deploy_CustomDeploymentStrategyParams:{type:"object",description:"",properties:{command:{type:"array",description:"optionally overrides the container command (default is specified by the image)",items:{type:"string",description:"optionally overrides the container command (default is specified by the image)"}},environment:{type:"array",description:"environment variables provided to the deployment process container",items:{$ref:"#/definitions/kubernetes_EnvVar",javaType:"io.fabric8.kubernetes.api.model.EnvVar"}},image:{type:"string",description:"a Docker image which can carry out a deployment"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.CustomDeploymentStrategyParams"},os_deploy_DeploymentCause:{type:"object",description:"",properties:{imageTrigger:{$ref:"#/definitions/os_deploy_DeploymentCauseImageTrigger",javaType:"io.fabric8.openshift.api.model.DeploymentCauseImageTrigger"},type:{type:"string",description:"the type of trigger that resulted in a new deployment"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.DeploymentCause"},os_deploy_DeploymentCauseImageTrigger:{type:"object",description:"",properties:{from:{$ref:"#/definitions/kubernetes_ObjectReference",javaType:"io.fabric8.kubernetes.api.model.ObjectReference"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.DeploymentCauseImageTrigger"},os_deploy_DeploymentConfig:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"DeploymentConfig",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},spec:{$ref:"#/definitions/os_deploy_DeploymentConfigSpec",javaType:"io.fabric8.openshift.api.model.DeploymentConfigSpec"},status:{$ref:"#/definitions/os_deploy_DeploymentConfigStatus",javaType:"io.fabric8.openshift.api.model.DeploymentConfigStatus"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.DeploymentConfig",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},os_deploy_DeploymentConfigList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"a list of deployment configs",items:{$ref:"#/definitions/os_deploy_DeploymentConfig",javaType:"io.fabric8.openshift.api.model.DeploymentConfig"}},kind:{type:"string",description:"","default":"DeploymentConfigList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.DeploymentConfigList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},os_deploy_DeploymentConfigSpec:{type:"object",description:"",properties:{replicas:{type:"integer",description:"the desired number of replicas"},selector:{type:"object",description:"a label query over pods that should match the replicas count",additionalProperties:{type:"string",description:"a label query over pods that should match the replicas count"},javaType:"java.util.Map<String,String>"},strategy:{$ref:"#/definitions/os_deploy_DeploymentStrategy",javaType:"io.fabric8.openshift.api.model.DeploymentStrategy"},template:{$ref:"#/definitions/kubernetes_PodTemplateSpec",javaType:"io.fabric8.kubernetes.api.model.PodTemplateSpec"},templateRef:{$ref:"#/definitions/kubernetes_ObjectReference",javaType:"io.fabric8.kubernetes.api.model.ObjectReference"},triggers:{type:"array",description:"how new deployments are triggered",items:{$ref:"#/definitions/os_deploy_DeploymentTriggerPolicy",javaType:"io.fabric8.openshift.api.model.DeploymentTriggerPolicy"}}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.DeploymentConfigSpec"},os_deploy_DeploymentConfigStatus:{type:"object",description:"",properties:{details:{$ref:"#/definitions/os_deploy_DeploymentDetails",javaType:"io.fabric8.openshift.api.model.DeploymentDetails"},latestVersion:{type:"integer",description:"used to determine whether the current deployment is out of sync"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.DeploymentConfigStatus"},os_deploy_DeploymentDetails:{type:"object",description:"",properties:{causes:{type:"array",description:"extended data associated with all the causes for creating a new deployment",items:{$ref:"#/definitions/os_deploy_DeploymentCause",javaType:"io.fabric8.openshift.api.model.DeploymentCause"}},message:{type:"string",description:"a user specified change message"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.DeploymentDetails"},os_deploy_DeploymentStrategy:{type:"object",description:"",properties:{customParams:{$ref:"#/definitions/os_deploy_CustomDeploymentStrategyParams",javaType:"io.fabric8.openshift.api.model.CustomDeploymentStrategyParams"},recreateParams:{$ref:"#/definitions/os_deploy_RecreateDeploymentStrategyParams",javaType:"io.fabric8.openshift.api.model.RecreateDeploymentStrategyParams"},resources:{$ref:"#/definitions/kubernetes_ResourceRequirements",javaType:"io.fabric8.kubernetes.api.model.ResourceRequirements"},rollingParams:{$ref:"#/definitions/os_deploy_RollingDeploymentStrategyParams",javaType:"io.fabric8.openshift.api.model.RollingDeploymentStrategyParams"},type:{type:"string",description:"the name of a deployment strategy"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.DeploymentStrategy"},os_deploy_DeploymentTriggerImageChangeParams:{type:"object",description:"",properties:{automatic:{type:"boolean",description:"whether detection of a new tag value should trigger a deployment"},containerNames:{type:"array",description:"restricts tag updates to a set of container names in the pod",items:{type:"string",description:"restricts tag updates to a set of container names in the pod"}},from:{$ref:"#/definitions/kubernetes_ObjectReference",javaType:"io.fabric8.kubernetes.api.model.ObjectReference"},lastTriggeredImage:{type:"string",description:"the last image to be triggered"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.DeploymentTriggerImageChangeParams"},os_deploy_DeploymentTriggerPolicy:{type:"object",description:"",properties:{imageChangeParams:{$ref:"#/definitions/os_deploy_DeploymentTriggerImageChangeParams",javaType:"io.fabric8.openshift.api.model.DeploymentTriggerImageChangeParams"},type:{type:"string",description:"the type of the trigger"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.DeploymentTriggerPolicy"},os_deploy_ExecNewPodHook:{type:"object",description:"",properties:{command:{type:"array",description:"the hook command and its arguments",items:{type:"string",description:"the hook command and its arguments"}},containerName:{type:"string",description:"the name of a container from the pod template whose image will be used for the hook container"},env:{type:"array",description:"environment variables provided to the hook container",items:{$ref:"#/definitions/kubernetes_EnvVar",javaType:"io.fabric8.kubernetes.api.model.EnvVar"}}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.ExecNewPodHook"},os_deploy_LifecycleHook:{type:"object",description:"",properties:{execNewPod:{$ref:"#/definitions/os_deploy_ExecNewPodHook",javaType:"io.fabric8.openshift.api.model.ExecNewPodHook"},failurePolicy:{type:"string",description:"what action to take if the hook fails"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.LifecycleHook"},os_deploy_RecreateDeploymentStrategyParams:{type:"object",description:"",properties:{post:{$ref:"#/definitions/os_deploy_LifecycleHook",javaType:"io.fabric8.openshift.api.model.LifecycleHook"},pre:{$ref:"#/definitions/os_deploy_LifecycleHook",javaType:"io.fabric8.openshift.api.model.LifecycleHook"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.RecreateDeploymentStrategyParams"},os_deploy_RollingDeploymentStrategyParams:{type:"object",description:"",properties:{intervalSeconds:{type:"integer",description:"the time to wait between polling deployment status after update",javaType:"Long"},post:{$ref:"#/definitions/os_deploy_LifecycleHook",javaType:"io.fabric8.openshift.api.model.LifecycleHook"},pre:{$ref:"#/definitions/os_deploy_LifecycleHook",javaType:"io.fabric8.openshift.api.model.LifecycleHook"},timeoutSeconds:{type:"integer",description:"the time to wait for updates before giving up",javaType:"Long"},updatePeriodSeconds:{type:"integer",description:"the time to wait between individual pod updates",javaType:"Long"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.RollingDeploymentStrategyParams"},os_image_Image:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},dockerImageManifest:{type:"string",description:"raw JSON of the manifest"},dockerImageMetadata:{$ref:"#/definitions/kubernetes_runtime_RawExtension",javaType:"io.fabric8.kubernetes.api.model.HasMetadata"},dockerImageMetadataVersion:{type:"string",description:"conveys version of the object"},dockerImageReference:{type:"string",description:"string that can be used to pull this image"},kind:{type:"string",description:"","default":"Image",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.Image",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},os_image_ImageList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of image objects",items:{$ref:"#/definitions/os_image_Image",javaType:"io.fabric8.openshift.api.model.Image"}},kind:{type:"string",description:"","default":"ImageList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.ImageList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},os_image_ImageStream:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"ImageStream",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},spec:{$ref:"#/definitions/os_image_ImageStreamSpec",javaType:"io.fabric8.openshift.api.model.ImageStreamSpec"},status:{$ref:"#/definitions/os_image_ImageStreamStatus",javaType:"io.fabric8.openshift.api.model.ImageStreamStatus"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.ImageStream",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},os_image_ImageStreamList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of image stream objects",items:{$ref:"#/definitions/os_image_ImageStream",javaType:"io.fabric8.openshift.api.model.ImageStream"}},kind:{type:"string",description:"","default":"ImageStreamList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.ImageStreamList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},os_image_ImageStreamSpec:{type:"object",description:"",properties:{dockerImageRepository:{type:"string",description:"optional field if specified this stream is backed by a Docker repository on this server"},tags:{type:"array",description:"map arbitrary string values to specific image locators",items:{$ref:"#/definitions/os_image_NamedTagReference",javaType:"io.fabric8.openshift.api.model.NamedTagReference"}}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.ImageStreamSpec"},os_image_ImageStreamStatus:{type:"object",description:"",properties:{dockerImageRepository:{type:"string",description:"represents the effective location this stream may be accessed at"},tags:{type:"array",description:"historical record of images associated with each tag",items:{$ref:"#/definitions/os_image_NamedTagEventList",javaType:"io.fabric8.openshift.api.model.NamedTagEventList"}}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.ImageStreamStatus"},os_image_NamedTagEventList:{type:"object",description:"",properties:{items:{type:"array",description:"list of tag events related to the tag",items:{$ref:"#/definitions/os_image_TagEvent",javaType:"io.fabric8.openshift.api.model.TagEvent"}},tag:{type:"string",description:"the tag"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.NamedTagEventList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},os_image_NamedTagReference:{type:"object",description:"",properties:{annotations:{type:"object",description:"annotations associated with images using this tag",additionalProperties:{type:"string",description:"annotations associated with images using this tag"},javaType:"java.util.Map<String,String>"},from:{$ref:"#/definitions/kubernetes_ObjectReference",javaType:"io.fabric8.kubernetes.api.model.ObjectReference"},name:{type:"string",description:"name of tag"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.NamedTagReference"},os_image_TagEvent:{type:"object",description:"",properties:{created:{type:"string",description:"when the event was created"},dockerImageReference:{type:"string",description:"the string that can be used to pull this image"},image:{type:"string",description:"the image"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.TagEvent"},os_oauth_OAuthAccessToken:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},authorizeToken:{type:"string",description:"contains the token that authorized this token"},clientName:{type:"string",description:"references the client that created this token"},expiresIn:{type:"integer",description:"is the seconds from creation time before this token expires",javaType:"Long"},kind:{type:"string",description:"","default":"OAuthAccessToken",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},redirectURI:{type:"string",description:"redirection URI associated with the token"},refreshToken:{type:"string",description:"optional value by which this token can be renewed"},scopes:{type:"array",description:"list of requested scopes",items:{type:"string",description:"list of requested scopes"}},userName:{type:"string",description:"user name associated with this token"},userUID:{type:"string",description:"unique UID associated with this token"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.OAuthAccessToken",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},os_oauth_OAuthAccessTokenList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of oauth access tokens",items:{$ref:"#/definitions/os_oauth_OAuthAccessToken",javaType:"io.fabric8.openshift.api.model.OAuthAccessToken"}},kind:{type:"string",description:"","default":"OAuthAccessTokenList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.OAuthAccessTokenList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},os_oauth_OAuthAuthorizeToken:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},clientName:{type:"string",description:"references the client that created this token"},expiresIn:{type:"integer",description:"seconds from creation time before this token expires",javaType:"Long"},kind:{type:"string",description:"","default":"OAuthAuthorizeToken",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},redirectURI:{type:"string",description:"redirection URI associated with the token"},scopes:{type:"array",description:"list of requested scopes",items:{type:"string",description:"list of requested scopes"}},state:{type:"string",description:"state data from request"},userName:{type:"string",description:"user name associated with this token"},userUID:{type:"string",description:"unique UID associated with this token.  userUID and userName must both match for this token to be valid"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.OAuthAuthorizeToken",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},os_oauth_OAuthAuthorizeTokenList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of oauth authorization tokens",items:{$ref:"#/definitions/os_oauth_OAuthAuthorizeToken",javaType:"io.fabric8.openshift.api.model.OAuthAuthorizeToken"}},kind:{type:"string",description:"","default":"OAuthAuthorizeTokenList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.OAuthAuthorizeTokenList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},os_oauth_OAuthClient:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"OAuthClient",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},redirectURIs:{type:"array",description:"valid redirection URIs associated with a client",items:{type:"string",description:"valid redirection URIs associated with a client"}},respondWithChallenges:{type:"boolean",description:"indicates whether the client wants authentication needed responses made in the form of challenges instead of redirects"
},secret:{type:"string",description:"unique secret associated with a client"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.OAuthClient",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},os_oauth_OAuthClientAuthorization:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},clientName:{type:"string",description:"references the client that created this authorization"},kind:{type:"string",description:"","default":"OAuthClientAuthorization",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},scopes:{type:"array",description:"list of granted scopes",items:{type:"string",description:"list of granted scopes"}},userName:{type:"string",description:"user name that authorized this client"},userUID:{type:"string",description:"unique UID associated with this authorization. userUID and userName must both match for this authorization to be valid"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.OAuthClientAuthorization",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},os_oauth_OAuthClientAuthorizationList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of oauth client authorizations",items:{$ref:"#/definitions/os_oauth_OAuthClientAuthorization",javaType:"io.fabric8.openshift.api.model.OAuthClientAuthorization"}},kind:{type:"string",description:"","default":"OAuthClientAuthorizationList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.OAuthClientAuthorizationList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},os_oauth_OAuthClientList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of oauth clients",items:{$ref:"#/definitions/os_oauth_OAuthClient",javaType:"io.fabric8.openshift.api.model.OAuthClient"}},kind:{type:"string",description:"","default":"OAuthClientList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.OAuthClientList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},os_route_Route:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"Route",required:!0},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},spec:{$ref:"#/definitions/os_route_RouteSpec",javaType:"io.fabric8.openshift.api.model.RouteSpec"},status:{$ref:"#/definitions/os_route_RouteStatus",javaType:"io.fabric8.openshift.api.model.RouteStatus"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.Route",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},os_route_RouteList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of routes",items:{$ref:"#/definitions/os_route_Route",javaType:"io.fabric8.openshift.api.model.Route"}},kind:{type:"string",description:"","default":"RouteList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.RouteList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},os_route_RouteSpec:{type:"object",description:"",properties:{host:{type:"string",description:"optional: alias/dns that points to the service"},path:{type:"string",description:"optional: path that the router watches to route traffic to the service"},tls:{$ref:"#/definitions/os_route_TLSConfig",javaType:"io.fabric8.openshift.api.model.TLSConfig"},to:{$ref:"#/definitions/kubernetes_ObjectReference",javaType:"io.fabric8.kubernetes.api.model.ObjectReference"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.RouteSpec"},os_route_RouteStatus:{type:"object",description:"",additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.RouteStatus"},os_route_TLSConfig:{type:"object",description:"",properties:{caCertificate:{type:"string",description:"provides the cert authority certificate contents"},certificate:{type:"string",description:"provides certificate contents"},destinationCACertificate:{type:"string",description:"provides the contents of the ca certificate of the final destination.  When using re-encrypt termination this file should be provided in order to have routers use it for health checks on the secure connection"},key:{type:"string",description:"provides key file contents"},termination:{type:"string",description:"indicates termination type.  if not set"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.TLSConfig"},os_template_Parameter:{type:"object",description:"",properties:{description:{type:"string",description:"optional: describes the parameter"},from:{type:"string",description:"input value for the generator"},generate:{type:"string",description:"optional: generate specifies the generator to be used to generate random string from an input value specified by the from field.  the result string is stored in the value field. if not specified"},name:{type:"string",description:"name of the parameter"},value:{type:"string",description:"optional: holds the parameter data.  if specified"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.template.Parameter"},os_template_Template:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},kind:{type:"string",description:"","default":"Template",required:!0},labels:{type:"object",description:"optional: list of lables that are applied to every object during the template to config transformation",additionalProperties:{type:"string",description:"optional: list of lables that are applied to every object during the template to config transformation"},javaType:"java.util.Map<String,String>"},metadata:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},objects:{type:"array",description:"list of objects to include in the template",items:{$ref:"#/definitions/kubernetes_runtime_RawExtension",javaType:"io.fabric8.kubernetes.api.model.HasMetadata"}},parameters:{type:"array",description:"optional: list of parameters used during template to config transformation",items:{$ref:"#/definitions/os_template_Parameter",javaType:"io.fabric8.openshift.api.model.template.Parameter"}}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.template.Template",javaInterfaces:["io.fabric8.kubernetes.api.model.HasMetadata"]},os_template_TemplateList:{type:"object",description:"",properties:{apiVersion:{type:"string",description:"","default":"v1",required:!0,"enum":["v1"]},items:{type:"array",description:"list of templates",items:{$ref:"#/definitions/os_template_Template",javaType:"io.fabric8.openshift.api.model.template.Template"}},kind:{type:"string",description:"","default":"TemplateList",required:!0},metadata:{$ref:"#/definitions/kubernetes_ListMeta",javaType:"io.fabric8.kubernetes.api.model.ListMeta"}},additionalProperties:!0,javaType:"io.fabric8.openshift.api.model.template.TemplateList",javaInterfaces:["io.fabric8.kubernetes.api.model.KubernetesResource"]},speter_inf_Dec:{type:"object",description:"",additionalProperties:!0,javaType:"io.fabric8.openshift.client.util.Dec"}},type:"object",properties:{BaseKubernetesList:{$ref:"#/definitions/kubernetes_List",javaType:"io.fabric8.kubernetes.api.model.BaseKubernetesList"},BuildConfigList:{$ref:"#/definitions/os_build_BuildConfigList",javaType:"io.fabric8.openshift.api.model.BuildConfigList"},BuildList:{$ref:"#/definitions/os_build_BuildList",javaType:"io.fabric8.openshift.api.model.BuildList"},BuildRequest:{$ref:"#/definitions/os_build_BuildRequest",javaType:"io.fabric8.openshift.api.model.BuildRequest"},Config:{$ref:"#/definitions/kubernetes_config_Config",javaType:"io.fabric8.kubernetes.api.model.config.Config"},ContainerStatus:{$ref:"#/definitions/kubernetes_ContainerStatus",javaType:"io.fabric8.kubernetes.api.model.ContainerStatus"},DeploymentConfigList:{$ref:"#/definitions/os_deploy_DeploymentConfigList",javaType:"io.fabric8.openshift.api.model.DeploymentConfigList"},Endpoints:{$ref:"#/definitions/kubernetes_Endpoints",javaType:"io.fabric8.kubernetes.api.model.Endpoints"},EndpointsList:{$ref:"#/definitions/kubernetes_EndpointsList",javaType:"io.fabric8.kubernetes.api.model.EndpointsList"},EnvVar:{$ref:"#/definitions/kubernetes_EnvVar",javaType:"io.fabric8.kubernetes.api.model.EnvVar"},ImageList:{$ref:"#/definitions/os_image_ImageList",javaType:"io.fabric8.openshift.api.model.ImageList"},ImageStreamList:{$ref:"#/definitions/os_image_ImageStreamList",javaType:"io.fabric8.openshift.api.model.ImageStreamList"},Namespace:{$ref:"#/definitions/kubernetes_Namespace",javaType:"io.fabric8.kubernetes.api.model.Namespace"},NamespaceList:{$ref:"#/definitions/kubernetes_NamespaceList",javaType:"io.fabric8.kubernetes.api.model.NamespaceList"},Node:{$ref:"#/definitions/kubernetes_Node",javaType:"io.fabric8.kubernetes.api.model.Node"},NodeList:{$ref:"#/definitions/kubernetes_NodeList",javaType:"io.fabric8.kubernetes.api.model.NodeList"},OAuthAccessToken:{$ref:"#/definitions/os_oauth_OAuthAccessToken",javaType:"io.fabric8.openshift.api.model.OAuthAccessToken"},OAuthAccessTokenList:{$ref:"#/definitions/os_oauth_OAuthAccessTokenList",javaType:"io.fabric8.openshift.api.model.OAuthAccessTokenList"},OAuthAuthorizeToken:{$ref:"#/definitions/os_oauth_OAuthAuthorizeToken",javaType:"io.fabric8.openshift.api.model.OAuthAuthorizeToken"},OAuthAuthorizeTokenList:{$ref:"#/definitions/os_oauth_OAuthAuthorizeTokenList",javaType:"io.fabric8.openshift.api.model.OAuthAuthorizeTokenList"},OAuthClient:{$ref:"#/definitions/os_oauth_OAuthClient",javaType:"io.fabric8.openshift.api.model.OAuthClient"},OAuthClientAuthorization:{$ref:"#/definitions/os_oauth_OAuthClientAuthorization",javaType:"io.fabric8.openshift.api.model.OAuthClientAuthorization"},OAuthClientAuthorizationList:{$ref:"#/definitions/os_oauth_OAuthClientAuthorizationList",javaType:"io.fabric8.openshift.api.model.OAuthClientAuthorizationList"},OAuthClientList:{$ref:"#/definitions/os_oauth_OAuthClientList",javaType:"io.fabric8.openshift.api.model.OAuthClientList"},ObjectMeta:{$ref:"#/definitions/kubernetes_ObjectMeta",javaType:"io.fabric8.kubernetes.api.model.ObjectMeta"},PodList:{$ref:"#/definitions/kubernetes_PodList",javaType:"io.fabric8.kubernetes.api.model.PodList"},Quantity:{$ref:"#/definitions/kubernetes_resource_Quantity",javaType:"io.fabric8.kubernetes.api.model.resource.Quantity"},ReplicationControllerList:{$ref:"#/definitions/kubernetes_ReplicationControllerList",javaType:"io.fabric8.kubernetes.api.model.ReplicationControllerList"},RouteList:{$ref:"#/definitions/os_route_RouteList",javaType:"io.fabric8.openshift.api.model.RouteList"},Secret:{$ref:"#/definitions/kubernetes_Secret",javaType:"io.fabric8.kubernetes.api.model.Secret"},SecretList:{$ref:"#/definitions/kubernetes_SecretList",javaType:"io.fabric8.kubernetes.api.model.SecretList"},ServiceAccount:{$ref:"#/definitions/kubernetes_ServiceAccount",javaType:"io.fabric8.kubernetes.api.model.ServiceAccount"},ServiceAccountList:{$ref:"#/definitions/kubernetes_ServiceAccountList",javaType:"io.fabric8.kubernetes.api.model.ServiceAccountList"},ServiceList:{$ref:"#/definitions/kubernetes_ServiceList",javaType:"io.fabric8.kubernetes.api.model.ServiceList"},StatusError:{$ref:"#/definitions/kubernetes_errors_StatusError",javaType:"io.fabric8.kubernetes.api.model.errors.StatusError"},TagEvent:{$ref:"#/definitions/os_image_TagEvent",javaType:"io.fabric8.openshift.api.model.TagEvent"},Template:{$ref:"#/definitions/os_template_Template",javaType:"io.fabric8.openshift.api.model.template.Template"},TemplateList:{$ref:"#/definitions/os_template_TemplateList",javaType:"io.fabric8.openshift.api.model.template.TemplateList"},WatchEvent:{$ref:"#/definitions/kubernetes_watch_WatchEvent",javaType:"io.fabric8.kubernetes.api.watch.WatchEvent"}},additionalProperties:!0}}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){function t(e,t,n){e.properties[t]&&n(e.properties[t])}function n(e){_.forEach(i,function(n){t(e,n,function(e){e.hidden=!0})})}var i=["status","deletionTimestamp"];e._module.factory("KubernetesSchema",["SchemaRegistry",function(i){return e.configureSchema(),i.addListener("k8s schema customizer",function(i,r){r.properties&&(r.properties.name&&(r.controls=["name","*"]),t(r,"portalIP",function(e){e.label="Portal IP"}),t(r,"publicIPs",function(e){e.label="Public IPs"}),t(r,"Spec",function(e){e.label="false"}),t(r,"Metadata",function(e){e.label="false"}),n(r)),_.endsWith(i,"ServiceSpec")&&(r.controls=["portalIP","createExternalLoadBalancer","sessionAffinity","publicIPs","ports","selector","*"],t(r,"sessionAffinity",function(t){e.log.debug("Schema: ",r),t["enum"]=["None","ClientIP"],t["default"]="None"})),_.endsWith(i,"Service")&&(r.controls=void 0,r.tabs={"Basic Information":["metadata"],Details:["*"]},e.log.debug("Name: ",i," Schema: ",r))}),i.addSchema("kubernetes",e.schema),angular.forEach(e.schema.definitions,function(e,t){i.addSchema("#/definitions/"+t,e)}),e.schema}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){var t=function(){function t(e){this.watcher=e}return Object.defineProperty(t.prototype,"namespaces",{get:function(){return _.map(this.watcher.getObjects(e.WatchTypes.NAMESPACES),function(e){return e.metadata.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedNamespace",{get:function(){return this.watcher.getNamespace()},set:function(e){this.watcher.setNamespace(e)},enumerable:!0,configurable:!0}),t}();e._module.factory("KubernetesState",["WatcherService",function(e){return new t(e)}]),e._module.factory("KubernetesApiURL",function(){return e.kubernetesApiUrl()}),e._module.factory("KubernetesVersion",[function(){return{query:function(){return null}}}]),e._module.factory("KubernetesPods",["KubernetesModel",function(e){return e.podsResource}]),e._module.factory("KubernetesReplicationControllers",["KubernetesModel",function(e){return e.replicationcontrollersResource}]),e._module.factory("KubernetesServices",["KubernetesModel",function(e){return e.servicesResource}]),e._module.factory("KubernetesBuilds",["restmod",function(t){return t.model(e.buildConfigsRestURL())}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.FileDropController=e.controller("FileDropController",["$scope","KubernetesModel","FileUploader","$http",function(t,n,i,r){t.uploader=new i({autoUpload:!1,removeAfterUpload:!0,url:e.kubernetesApiUrl()});t.uploader.onAfterAddingFile=function(t){var i=new FileReader;i.onload=function(){if(2===i.readyState){e.log.debug("File added: ",t);var r=i.result,a=null;try{a=angular.fromJson(r)}catch(o){return void e.log.debug("Failed to read dropped file ",t._file.name,": ",o)}e.log.debug("Dropped object: ",a),e.updateOrCreateObject(a,n)}},i.readAsText(t._file)},t.uploader.onBeforeUploadItem=function(t){e.log.debug("Uploading: ",t)},t.uploader.onSuccessItem=function(t){e.log.debug("onSuccessItem: ",t)},t.uploader.onErrorItem=function(t,n,i){e.log.debug("Failed to apply, response: ",n," status: ",i)}}]),e.NamespaceController=e.controller("NamespaceController",["$scope","WatcherService",function(e,t){e.namespaces=t.getObjects("namespaces"),e.$watchCollection("namespaces",function(n,i){n!==i&&(e.namespace=t.getNamespace())}),e.$watch("namespace",function(e,n){e!==n&&e!==n&&t.setNamespace(e)})}]),e.TopLevel=e.controller("TopLevel",["$scope","workspace","KubernetesVersion","KubernetesState",function(t,n,i,r){t.version=void 0,t.showAppView=e.isAppView(n),t.isActive=function(e){return n.isLinkActive(e)},t.kubernetes=r,i.query(function(e){t.version=e})}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.NamespaceController=e.controller("NamespaceController",["$scope","WatcherService",function(e,t){e.watcher=t,e.namespaceObjects=t.getObjects("namespaces"),e.namespace=t.getNamespace(),e.namespaces=[],e.$watch("namespace",function(e,n){e!==n&&t.setNamespace(e)}),e.$watch("watcher.getNamespace()",function(t,n){t!==n&&(e.namespace=t)}),e.$watchCollection("namespaceObjects",function(t){e.namespaces=_.map(t,function(e){return e.metadata.name})})}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){{var t=(e._module.directive("kubernetesOverview",["$templateCache","$compile","$interpolate","$timeout","$window","KubernetesState","KubernetesModel",function(t,n,i,r,a,o,s){var l=Logger.get("kubernetes-overview"),c=s,u=o;return{restrict:"E",replace:!0,link:function(a,o,s){function d(e,t){return i(e)(t)}function p(e,t,n){var i={};return i[t]=n,d(e,i)}function h(e,t,n){return n.map(function(n){return p(e,t,n)})}function f(e,t,i,r){r.forEach(function(r){var o=r._key||r.elementId||r.id,s=e.find("#"+o);s.length||(l.debug("existing: ",s," key: ",o),e.append(n(p(t,i,r))(a)))})}function g(t){return e.getNamespace(t)===a.kubernetes.selectedNamespace}function m(){l.debug("First draw"),o.empty();var e=c.services,i=c.replicationControllers,s=(c.pods,c.hosts),u=angular.element(t.get("overviewTemplate.html")),d=u.find(".services"),f=u.find(".hosts"),m=u.find(".replicationControllers");d.append(h(t.get("serviceTemplate.html"),"service",e.filter(g))),m.append(h(t.get("replicationControllerTemplate.html"),"replicationController",i.filter(g))),s.forEach(function(e){var n=angular.element(p(t.get("overviewHostTemplate.html"),"host",e)),i=angular.element(n.find(".pod-container"));i.append(h(t.get("podTemplate.html"),"pod",e.pods)),f.append(n)}),o.append(n(u)(a)),r(function(){o.css({visibility:"visible"})},250)}function v(){a.$emit("jsplumbDoWhileSuspended",function(){l.debug("Update");var n=c.services,i=c.replicationControllers,r=(c.pods,c.hosts),s=o.find("[hawtio-jsplumb]"),u=s.find(".jsplumb-node");u.each(function(t,n){var i=angular.element(n),r=i.attr("id");if(l.debug("key: ",r),!Core.isBlank(r)){var o=i.attr("data-type");switch(o){case"host":if(r in c.podsByHost)return;break;case"service":if(r in c.servicesByKey&&e.getNamespace(c.servicesByKey[r])==a.kubernetes.selectedNamespace){var s=c.servicesByKey[r];return void i.attr("connect-to",s.connectTo)}break;case"pod":if(r in c.podsByKey)return;break;case"replicationController":if(r in c.replicationControllersByKey){var u=c.replicationControllersByKey[r];return void i.attr("connect-to",u.connectTo)}break;default:return void l.debug("Ignoring element with unknown type")}l.debug("Removing: ",r),i.remove()}});var d=o.find(".services"),p=o.find(".replicationControllers"),h=o.find(".hosts");f(d,t.get("serviceTemplate.html"),"service",n),f(p,t.get("replicationControllerTemplate.html"),"replicationController",i),f(h,t.get("overviewHostTemplate.html"),"host",r),r.forEach(function(e){var n=angular.element(h.find("#"+e.elementId)),i=angular.element(n.find(".pod-container"));f(i,t.get("podTemplate.html"),"pod",e.pods)})})}function y(){l.debug("Refreshing drawing"),0===o.children().length?m():v(),Core.$apply(a)}a.model=c,o.css({visibility:"hidden"}),a.getEntity=function(e,t){switch(e){case"host":return c.podsByHost[t];case"pod":return c.podsByKey[t];case"replicationController":return c.replicationControllersByKey[t];case"service":return c.servicesByKey[t];default:return void 0}},a.kubernetes=u,a.customizeDefaultOptions=function(e){e.Endpoint=["Blank",{}]},a.mouseEnter=function(e){a.jsPlumb&&(angular.element(e.currentTarget).addClass("hovered"),a.jsPlumb.getEndpoints(e.currentTarget).forEach(function(e){e.connections.forEach(function(e){e.isHover()||(e.setHover(!0),e.endpoints.forEach(function(e){a.mouseEnter({currentTarget:e.element})}))})}))},a.mouseLeave=function(e){a.jsPlumb&&(angular.element(e.currentTarget).removeClass("hovered"),a.jsPlumb.getEndpoints(e.currentTarget).forEach(function(e){e.connections.forEach(function(e){e.isHover()&&(e.setHover(!1),e.endpoints.forEach(function(e){a.mouseLeave({currentTarget:e.element})}))})}))},a.customizeConnectionOptions=function(e,t,n,i){var r=t.source.el.attr("data-type");switch(i.connector=["Bezier",{curviness:50,stub:25,alwaysRespectStubs:!0}],n.paintStyle={lineWidth:2,strokeStyle:"#5555cc"},r){case"pod":break;case"service":n.anchors=[["Continuous",{faces:["right"]}],["Continuous",{faces:["left"]}]];break;case"replicationController":n.anchors=[["Perimeter",{shape:"Circle"}],["Continuous",{faces:["right"]}]]}return i},a.$on("kubernetesModelUpdated",_.debounce(y,500,{trailing:!0})),setTimeout(y,100)}}}]),e.controller("OverviewBoxController",["$scope","$location",function(t,n){t.viewDetails=function(t,i){if(t){var r=e.getNamespace(t),a=e.getName(t);n.path(UrlHelpers.join(Core.url("/kubernetes/namespace"),r,i,a))}else e.log.warn("No entity for viewDetails!")}}]),"OverviewController");e.controller(t,["$scope","$location","$http","$timeout","$routeParams","KubernetesModel","KubernetesState","KubernetesApiURL",function(n,i,r,a,o,s,l,c){n.name=t,n.kubernetes=l,n.model=s,e.initShared(n,i,r,a,o,s,l,c)}])}}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.PipelinesController=e.controller("PipelinesController",["$scope","KubernetesModel","KubernetesBuilds","KubernetesState","$dialog","$window","$templateCache","$routeParams","$location","localStorage","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u,d,p,h){function f(){var i={};if(t.buildConfigs&&t.builds&&t.deploymentConfigs){e.enrichBuildConfigs(t.buildConfigs,t.builds),t.fetched=!0,angular.forEach(t.buildConfigs,function(e){var t=g(e);t&&(i[t]={buildConfig:e,builds:[],triggeredBy:null,triggersSteps:[],$class:"pipeline-build"})}),angular.forEach(t.builds,function(e){var t=g(e);if(t){var n=i[t];n?n.builds.push(e):console.log("warning no pipeline generated for buildConfig for key "+t+" for build "+e.$name)}});var r=[];angular.forEach(i,function(e,t){e.triggeredBy||(r.push(e),e.triggersSteps.push(e),angular.forEach(i,function(n){n.triggeredBy===t&&e.triggersSteps.push(n)}))}),angular.forEach(t.deploymentConfigs,function(t){t.kind||(t.kind="DeploymentConfig"),angular.forEach(t.triggers,function(r){var a=r.type,o=r.imageChangeParams;if(o&&"ImageChange"===a){var s=o.from;if(s){var l=s.name;if("ImageRepository"===s.kind){{o.tag||"latest"}l&&angular.forEach(i,function(i,r){var a=Core.pathGet(i,["buildConfig","parameters","output","to"]);if(a&&("ImageRepository"===a.kind||"ImageStream"===a.kind)){var o=a.name;if(o===l){var s=Core.pathGet(t,["template","controllerTemplate","selector"]),c=[],u=s?e.createPodCounters(s,n.podsForNamespace(),c):null,d={buildConfig:t,$class:"pipeline-deploy",$podCounters:u,$pods:c};i.triggersSteps.push(d)}}})}}}})}),t.pipelines=r}}function g(e){return Core.pathGet(e,["parameters","source","git","uri"])}t.kubernetes=r,t.model=n,t.KubernetesBuilds=i,e.initShared(t,c,d,p,l,n,r,h),t.$keepPolling=function(){return e.keepPollingModel},t.fetch=PollHelpers.setupPolling(t,function(n){function i(){++r>=a&&n()}var r=0,a=3,o=e.buildsRestURL();d.get(o).success(function(n,r,a,o){n&&(t.builds=e.enrichBuilds(n.items),f()),i()}).error(function(t,n,r,a){e.log.warn("Failed to load "+o+" "+t+" "+n),i()}),o=e.buildConfigsRestURL(),d.get(o).success(function(e,n,r,a){e&&(t.buildConfigs=e.items,f()),i()}).error(function(t,n,r,a){e.log.warn("Failed to load "+o+" "+t+" "+n),i()}),o=e.deploymentConfigsRestURL(),d.get(o).success(function(e,n,r,a){e&&(t.deploymentConfigs=e.items,f()),i()}).error(function(t,n,r,a){e.log.warn("Failed to load "+o+" "+t+" "+n),i()})}),t.fetch()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.PodController=e.controller("PodController",["$scope","KubernetesModel","KubernetesState","ServiceRegistry","$templateCache","$location","$routeParams","$http","$timeout","$window","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u,d){function p(){t.id=s.id,t.item=t.model.getPod(i.selectedNamespace,t.id),t.item&&(t.rawModel=e.toRawJson(t.item)),Core.$apply(t)}t.kubernetes=i,t.model=n,t.rawMode=!1,t.rawModel=null,t.itemConfig={properties:{"containers/image$":{template:a.get("imageTemplate.html")},"status/phase":{template:a.get("statusTemplate.html")},"\\/Env\\/":{template:a.get("envItemTemplate.html")},"^\\/labels$":{template:a.get("labelTemplate.html")},"\\/env\\/key$":{hidden:!0}}},e.initShared(t,o,l,c,s,n,i,d),t.$on("kubernetesModelUpdated",function(){p()}),t.$on("$routeUpdate",function(e){p()}),t.$watch("model.pods",function(e,t){p()},!0),t.flipRaw=function(){t.rawMode=!t.rawMode,Core.$apply(t)},t.openLogs=function(){var i=[t.item];e.openLogsForPods(r,u,n.currentNamespace(),i)},p()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.PodEditController=e.controller("PodEditController",["$scope","KubernetesModel","KubernetesState","KubernetesSchema","$templateCache","$location","$routeParams","$http","$timeout","KubernetesApiURL","SchemaRegistry",function(t,n,i,r,a,o,s,l,c,u,d){function p(){t.id?(t.entity=t.model.getPod(i.selectedNamespace,t.id),Core.$apply(t),t.fetched=!0):t.fetched=!0}t.kubernetes=i,t.model=n,t.id=s.id,t.schema=r,t.config=d.cloneSchema("io.fabric8.kubernetes.api.model.Pod"),e.initShared(t,o,l,c,s,n,i,u),t.$on("$routeUpdate",function(e){p()}),p()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.EnvItem=e.controller("EnvItem",["$scope",function(e){var t=e.data.split("=");e.key=t.shift(),e.value=t.join("=")}]),e.Pods=e.controller("Pods",["$scope","KubernetesModel","KubernetesPods","KubernetesState","ServiceRegistry","$dialog","$window","$templateCache","$routeParams","$location","localStorage","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u,d,p,h,f){t.kubernetes=r,t.model=n,t.$on("kubernetesModelUpdated",function(){Core.$apply(t)}),t.itemSchema=Forms.createFormConfiguration(),t.tableConfig={data:"model.pods",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:u.search().q||""},columnDefs:[{field:"_key",displayName:"ID",defaultSort:!0,cellTemplate:l.get("idTemplate.html")},{field:"$statusCss",displayName:"Status",cellTemplate:l.get("statusTemplate.html")},{field:"$restartCount",displayName:"Restarts"},{field:"$createdTime",displayName:"Age",cellTemplate:l.get("ageTemplate.html")},{field:"$imageNames",displayName:"Images",cellTemplate:l.get("imageTemplate.html")},{field:"$host",displayName:"Host",cellTemplate:l.get("hostTemplate.html")},{field:"$labelsText",displayName:"Labels",cellTemplate:l.get("labelTemplate.html")},{field:"$podIP",displayName:"Pod IP"}]},t.openLogs=function(){var i=t.tableConfig.selectedItems;if((!i||!i.length)&&t.id){var r=t.item;r&&(i=[r])}e.openLogsForPods(a,s,n.currentNamespace(),i)},e.initShared(t,u,p,h,c,n,r,f),t.deletePrompt=function(t){angular.isString(t)&&(t=[{id:t}]),UI.multiItemConfirmActionDialog({collection:t,index:"metadata.name",onClose:function(n){function r(t,n){n&&(e.log.debug("deleting: ",e.getName(n)),i["delete"]({id:e.getName(n)},void 0,function(){e.log.debug("deleted: ",e.getName(n)),r(t,t.shift())},function(n){e.log.debug("Error deleting: ",n),r(t,t.shift())}))}n&&r(t,t.shift())},title:"Delete pods?",action:"The following pods will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()}}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.ReplicationControllerController=e.controller("ReplicationControllerController",["$scope","KubernetesModel","KubernetesState","$templateCache","$location","$routeParams","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c){function u(){t.id=o.id,t.item=t.model.getReplicationController(i.selectedNamespace,t.id),t.item&&(t.rawModel=e.toRawJson(t.item)),Core.$apply(t)}t.kubernetes=i,t.model=n,t.rawMode=!1,t.rawModel=null,e.initShared(t,a,s,l,o,n,i,c),t.itemConfig={properties:{"^\\/labels$":{template:r.get("labelTemplate.html")}}},t.$on("kubernetesModelUpdated",function(){u()}),t.$on("$routeUpdate",function(e){u()}),t.$watch("model.pods",function(e,t){u()},!0),t.flipRaw=function(){t.rawMode=!t.rawMode,Core.$apply(t)},u()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.ReplicationControllerEditController=e.controller("ReplicationControllerEditController",["$scope","KubernetesModel","KubernetesState","KubernetesSchema","$templateCache","$location","$routeParams","$http","$timeout","KubernetesApiURL","SchemaRegistry",function(t,n,i,r,a,o,s,l,c,u,d){function p(){t.id?(t.entity=t.model.getReplicationController(i.selectedNamespace,t.id),Core.$apply(t),t.fetched=!0):t.fetched=!0}t.kubernetes=i,t.model=n,t.id=s.id,t.schema=r,e.log.debug("Schema: ",t.schema),t.config=d.cloneSchema("io.fabric8.kubernetes.api.model.ReplicationController"),e.initShared(t,o,l,c,s,n,i,u),t.$on("$routeUpdate",function(e){p()}),p()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.ReplicationControllers=e.controller("ReplicationControllers",["$scope","KubernetesModel","KubernetesReplicationControllers","KubernetesPods","KubernetesState","$templateCache","$location","$routeParams","jolokia","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u,d,p){t.kubernetes=a,t.model=n,t.tableConfig={data:"model.replicationControllers",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:s.search().q||""},columnDefs:[{field:"_key",displayName:"ID",cellTemplate:o.get("idTemplate.html")},{field:"$podCount",displayName:"Pods",cellTemplate:o.get("podCountsAndLinkTemplate.html")},{field:"$replicas",displayName:"Replicas",cellTemplate:o.get("desiredReplicas.html")},{field:"$labelsText",displayName:"Labels",cellTemplate:o.get("labelTemplate.html")}]},e.initShared(t,s,u,d,l,n,a,p),t.deletePrompt=function(t){angular.isString(t)&&(t=[{id:t}]),UI.multiItemConfirmActionDialog({collection:t,index:"metadata.name",onClose:function(n){function r(t,n){n&&(e.log.debug("deleting: ",e.getName(n)),i["delete"]({id:e.getName(n)},void 0,function(){e.log.debug("deleted: ",e.getName(n)),r(t,t.shift())},function(n){e.log.debug("Error deleting: ",n),r(t,t.shift())}))}n&&r(t,t.shift())},title:"Delete replication controllers?",action:"The following replication controllers will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()}}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.ServiceController=e.controller("ServiceController",["$scope","KubernetesModel","KubernetesState","$templateCache","$location","$routeParams","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c){function u(){t.id=o.id,t.namespace=o.namespace||i.selectedNamespace,t.item=t.model.getService(t.namespace,t.id),t.item&&(t.rawModel=e.toRawJson(t.item)),Core.$apply(t)}t.kubernetes=i,t.model=n,t.rawMode=!1,t.rawModel=null,e.initShared(t,a,s,l,o,n,i,c),t.itemConfig={properties:{"^\\/labels$":{template:r.get("labelTemplate.html")}}},t.$on("kubernetesModelUpdated",function(){u()}),t.$watch("model.services",function(e,t){u()},!0),t.$on("$routeUpdate",function(e){u()}),t.flipRaw=function(){t.rawMode=!t.rawMode,Core.$apply(t)},u()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.ServiceEditController=e.controller("ServiceEditController",["$scope","KubernetesModel","KubernetesState","KubernetesSchema","$templateCache","$location","$routeParams","$http","$timeout","KubernetesApiURL","SchemaRegistry",function(t,n,i,r,a,o,s,l,c,u,d){function p(){t.id?(t.entity=t.model.getService(i.selectedNamespace,t.id),Core.$apply(t),
t.fetched=!0):t.fetched=!0}t.kubernetes=i,t.model=n,t.id=s.id,t.schema=r,t.config=d.cloneSchema("io.fabric8.kubernetes.api.model.Service"),e.initShared(t,o,l,c,s,n,i,u),t.$on("$routeUpdate",function(e){p()}),p()}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e._module.factory("ServiceRegistry",[function(){return new t}]);var t=function(){function t(){this.model=null}return t.prototype.hasService=function(e){return this.findService(e)?!0:!1},t.prototype.findService=function(e){var t=null;if(e){var n=this.getModel();if(n){var i=n.currentNamespace();return n.getService(i,e)}}return t},t.prototype.serviceLink=function(t){var n=this.findService(t);return e.serviceLinkUrl(n)},t.prototype.getModel=function(){var e=this.model;if(!e){var t=HawtioCore.injector;t&&(this.model=t.get("KubernetesModel"))}return e=this.model},t}();e.ServiceRegistryService=t}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.Services=e.controller("Services",["$scope","KubernetesModel","KubernetesServices","KubernetesPods","KubernetesState","$templateCache","$location","$routeParams","jolokia","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l,c,u,d,p){t.kubernetes=a,t.model=n,ControllerHelpers.bindModelToSearchParam(t,s,"mode","mode","list"),t.tableConfig={data:"model.services",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:s.search().q||""},columnDefs:[{field:"_key",displayName:"ID",cellTemplate:o.get("idTemplate.html")},{field:"$serviceUrl",displayName:"Address",cellTemplate:o.get("portalAddress.html")},{field:"$podCount",displayName:"Pods",cellTemplate:o.get("podCountsAndLinkTemplate.html")},{field:"$selectorText",displayName:"Selector",cellTemplate:o.get("selectorTemplate.html")},{field:"$labelsText",displayName:"Labels",cellTemplate:o.get("labelTemplate.html")}]},e.initShared(t,s,u,d,l,n,a,p),t.deletePrompt=function(t){angular.isString(t)&&(t=[{id:t}]),UI.multiItemConfirmActionDialog({collection:t,index:"metadata.name",onClose:function(n){function r(t,n){n&&(e.log.debug("deleting: ",e.getName(n)),i["delete"]({id:e.getName(n)},void 0,function(){e.log.debug("deleted: ",e.getName(n)),r(t,t.shift())},function(n){e.log.debug("Error deleting: ",n),r(t,t.shift())}))}n&&r(t,t.shift())},title:"Delete services?",action:"The following services will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()}}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.PodStatus=e.controller("PodStatus",["$scope",function(t){t.statusMapping=function(t){return e.statusTextToCssClass(t)}}]),e.Labels=e.controller("Labels",["$scope","workspace","jolokia","$location",function(t,n,i,r){t.labels=[];var a={name:1,replicationController:2,group:3};t.$watch("entity",function(e,n){e&&(t.labels=[],angular.forEach(Core.pathGet(t.entity,["metadata","labels"]),function(e,n){"fabric8"!==n&&t.labels.push({key:n,title:e})}),t.labels=t.labels.sort(function(e,t){function n(e){return a[e]||1e3}var i=e.key,r=t.key,o=n(i),s=n(r),l=o-s;return 0>l?-1:l>0?1:i&&r?i>r?1:r>i?-1:0:i===r?0:i?1:-1}))}),t.handleClick=function(e,n,i){var r=n+"="+i.title;t.$emit("labelFilterUpdate",r)},t.labelClass=e.containerLabelClass}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){e.TemplateController=e.controller("TemplateController",["$scope","KubernetesModel","$location","marked","$templateCache","$modal",function(t,n,i,r,a,o){function s(){i.path(h.path()).search(h.query(!0))}function l(e){return Core.pathGet(e,["metadata","annotations"])}function c(t,n){var i=l(t);if(!i)return"";var r=e.getName(t);if(r){var a="fabric8."+r+"/"+n,o=i[a];if(o)return o}var n=_.find(_.keys(i),function(e){return _.endsWith(e,n)});return n?i[n]:""}function u(e,t){return e.replace(/\${\w*}/g,function(e){var n=e.replace(/\${/,"").replace(/}/,"").trim();return t[n]||e})}function d(t){_.forEach(t,function(t){e.log.debug("Object: ",t),e.updateOrCreateObject(t,n)}),s()}var p=t.model=n;t.filterText="",t.$watchCollection("model.namespaces",function(){t.targetNamespace||(t.targetNamespace=p.currentNamespace())});var h=new URI(i.search().returnTo||Core.url("/kubernetes/apps"));t.cancel=function(){return t.formConfig?(delete t.formConfig,delete t.entity,void(t.objects=void 0)):void s()},t.filterTemplates=function(e){return Core.isBlank(t.filterText)?!0:_.contains(angular.toJson(e),t.filterText.toLowerCase())},t.openFullDescription=function(t){var n=r(c(t,"description")||"No description"),i=o.open({templateUrl:UrlHelpers.join(e.templatePath,"templateDescription.html"),controller:["$scope","$modalInstance",function(e,t){e.text=n,e.ok=function(){i.close()}}]})},t.getDescription=function(e){var t=$(r(c(e,"description")||"No description")),n=t.html(),i=200;if(n.length>i){var o=$.trim(n).substring(0,i).split(" ").slice(0,-1).join(" ");t.html(o+"..."),t.append(a.get("truncatedDescriptionTag.html"))}return t.html()},t.getIconUrl=function(t){return c(t,"iconUrl")||e.defaultIconUrl},t.deployTemplate=function(n){e.log.debug("Template parameters: ",n.parameters),e.log.debug("Template objects: ",n.objects),e.log.debug("Template annotations: ",n.metadata.annotations);var i=n.metadata.annotations;i&&_.forEach(n.objects,function(t){var n=t.metadata.annotations||{},r=e.getName(t),a=_.filter(_.keys(i),function(e){return e.match("."+r+"/")});a.forEach(function(e){e in n||(n[e]=i[e])}),t.metadata.annotations=n});var r=void 0,a=_.find(n.objects,function(t){if("Service"!==e.getKind(t))return!1;var n=e.getPorts(t);return n&&1===n.length?!0:void 0});if(a&&(r=e.getName(a)),e.log.debug("Service: ",a),!(r||n.parameters&&0!==n.parameters.length))return e.log.debug("No parameters required, deploying objects"),void d(n.objects);var o={style:0,hideLegend:!0,properties:{}},s=n.parameters;if(_.forEach(s,function(e){var t={};t.label=e.name.titleize(),t.description=e.description,t["default"]=e.value,t.type="string",o.properties[e.name]=t}),r){o.properties.createRoute={type:"boolean","default":!0,label:"Create Route"},o.properties.routeServiceName={type:"hidden","default":r};var l=e.currentKubernetesNamespace(),c="vagrant.f8",u="."+("default"===l?"":l+".")+c;o.properties.routeHostname={type:"string","default":u,label:"Route host name suffix","control-group-attributes":{"ng-show":"entity.createRoute"}}}t.entity={},t.formConfig=o,t.objects=n.objects,e.log.debug("Form config: ",o)},t.substituteAndDeployTemplate=function(){{var n=t.objects,i=angular.toJson(n,!0),r=t.entity.createRoute,a=t.entity.routeHostname||"";t.entity.routeName,t.entity.routeServiceName}if(delete t.entity.createRoute,delete t.entity.routeHostname,delete t.entity.routeName,delete t.entity.routeServiceName,i=u(i,t.entity),n=angular.fromJson(i),r){var o=[];angular.forEach(n,function(t){var n=t.kind,i=e.getName(t);if(i&&"Service"===n){var r=i+a,s={kind:"Route",apiVersion:e.defaultOSApiVersion,metadata:{name:i},spec:{host:r,to:{kind:"Service",name:i}}};o.push(s)}}),n=n.concat(o)}t.targetNamespace!==p.currentNamespace()?(t.$on("WatcherNamespaceChanged",function(){e.log.debug("Namespace changed"),setTimeout(function(){d(n),Core.$apply(t)},500)}),Core.notification("info","Switching to namespace "+t.targetNamespace+" and deploying template"),p.kubernetes.selectedNamespace=t.targetNamespace):d(n)},t.deleteTemplate=function(t){UI.multiItemConfirmActionDialog({collection:[t],index:"metadata.name",onClose:function(i){i&&n.templatesResource["delete"]({id:t.metadata.name},void 0,function(){n.templatesResource.query(function(e){n.templates=e.items})},function(t){e.log.debug("Error deleting template: ",t)})},title:"Delete Template?",action:"The following template will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()}}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(e){function t(t,i,r,a,o,s,l){void 0===o&&(o=function(e){}),void 0===s&&(s=function(e){}),void 0===l&&(l=function(e){});var c,u=e.masterApiUrl(),d=i.url;u&&"/"!==u?(c=new URI(u),c.path(d)):c=new URI(UrlHelpers.join(u,d)),c.protocol("https"===c.protocol()?"wss":"ws"),c.query({watch:!0,access_token:r.token}),i.retries=0;var p=function(e){i.retries=0,i.connectTime=(new Date).getTime(),i.connected=!0,l(e)},h=function(t){var r=angular.fromJson(t.data);switch(r.type){case e.WatchActions.ADDED:case e.WatchActions.MODIFIED:var s=r.object;i.customizers.length>0&&_.forEach(i.customizers,function(e){e(s)}),r.object.metadata.uid||(r.object.metadata.uid=r.object.metadata.namespace+"/"+r.object.metadata.name),i.objects[r.object.metadata.uid]=r.object;break;case e.WatchActions.DELETED:delete i.objects[r.object.metadata.uid];break;default:return void n.info("Unknown event type: ",r.type)}switch(i.objectArray.length=0,_.forIn(i.objects,function(e,t){i.objectArray.push(e)}),o(r),r.type){case e.WatchActions.ADDED:_.forEach(i.onAddActions,function(e){return e(r.object)});break;case e.WatchActions.MODIFIED:_.forEach(i.onModifiedActions,function(e){return e(r.object)});break;case e.WatchActions.DELETED:_.forEach(i.onDeletedActions,function(e){return e(r.object)})}Core.$apply(a)},f=function(e){i.connected=!1,i.retries<3&&i.connectTime&&(new Date).getTime()-i.connectTime>5e3?setTimeout(function(){i.retries=i.retries+1,n.debug("watch ",t," disconnected, retry #",i.retries);var e=i.socket=new WebSocket(c.toString());e.onopen=p,e.onmessage=h,e.onclose=f},5e3):s(e)},g=i.socket=new WebSocket(c.toString());g.onopen=p,g.onmessage=h,g.onclose=f}var n=Logger.get("kubernetes-watcher"),i=UrlHelpers.join("api","v1"),r=(e.WatchTypes.NAMESPACES,e.NamespacedTypes.k8sTypes),a=e.NamespacedTypes.osTypes,o={url:void 0,connectTime:void 0,objects:{},objectArray:[],customizers:[],onAddActions:[],onModifiedActions:[],onDeletedActions:[],socket:void 0,connected:!1},s=_.assign(_.cloneDeep(o),{selected:void 0,connectTime:void 0,url:UrlHelpers.join(i,e.WatchTypes.NAMESPACES)}),l={};_.forEach(r,function(t){l[t]=_.assign(_.cloneDeep(o),{prefix:e.kubernetesApiPrefix()})}),_.forEach(a,function(t){l[t]=_.assign(_.cloneDeep(o),{prefix:UrlHelpers.join(e.openshiftApiPrefix())})}),hawtioPluginLoader.registerPreBootstrapTask({name:"KubernetesWatcherInit",depends:["hawtio-oauth"],task:function(t){var n=new URI(e.masterApiUrl());n.path(s.url);n.toString();$.get(n.toString()).done(function(e){_.forEach(e.items,function(e){e.metadata.uid||(e.metadata.uid=e.metadata.namespace+"/"+e.metadata.name),s.objects[e.metadata.uid]=e}),s.objectArray.length=0,_.forIn(s.objects,function(e,t){s.objectArray.push(e)})}).always(t)}}),e._module.service("WatcherService",["userDetails","$rootScope","$timeout",function(i,o,c){var u={hasWebSocket:!1};try{if(!WebSocket)return u}catch(d){return u}u.setNamespace=function(r){r!==s.selected&&(n.debug("Namespace changed, shutting down existing watches"),_.forIn(l,function(e,t){e.socket&&e.socket.close()}),n.debug("Setting namespace watch to: ",r),s.selected=r,r?localStorage[e.Constants.NAMESPACE_STORAGE_KEY]=r:delete localStorage[e.Constants.NAMESPACE_STORAGE_KEY],r&&(_.forIn(l,function(t,n){t.url=UrlHelpers.join(t.prefix,e.WatchTypes.NAMESPACES,r,n),t.connectTime=void 0,_.forEach(_.keys(t.objects),function(e){_.forEach(t.onDeletedActions,function(n){return n(t.objects[e])}),delete t.objects[e]}),t.objectArray.length=0,t.socket=void 0}),_.forIn(l,function(e,n){t(n,e,i,o)})),o.$broadcast("WatcherNamespaceChanged",r))},t(e.WatchTypes.NAMESPACES,s,i,o,function(t){switch(t.type){case e.WatchActions.ADDED:case e.WatchActions.MODIFIED:s.selected||u.setNamespace(t.object.metadata.name);break;case e.WatchActions.DELETED:var i=_.first(s.objectArray);u.setNamespace(i?i.metadata.name:void 0);break;default:return void n.debug("Unknown namespace event type: ",t.type)}},function(e){n.debug("Namespace watch closed"),u.setNamespace(void 0)}),u.setNamespace(localStorage[e.Constants.NAMESPACE_STORAGE_KEY]||e.defaultNamespace),u.hasWebSocket=!0,u.getNamespace=function(){return s.selected},u.addCustomizer=function(e,t){e in l&&(l[e].customizers.push(t),_.forEach(l[e].objectArray,function(e){return t(e)}))},u.getTypes=function(){return r.concat([e.WatchTypes.NAMESPACES]).concat(a)},u.getObjectMap=function(t){return t===e.WatchTypes.NAMESPACES?s.objects:t in l?l[t].objects:void 0},u.getObjects=function(t){return t===e.WatchTypes.NAMESPACES?s.objectArray:t in l?l[t].objectArray:void 0},u.listeners=[];var p=function(){n.debug("Objects changed, firing listeners");var e={};_.forEach(u.getTypes(),function(t){e[t]=u.getObjects(t)}),_.forEach(u.listeners,function(t){t(e)})},h=_.debounce(p,500,{trailing:!0});return u.registerListener=function(t){u.listeners.push(t),_.forEach(u.getTypes(),function(t){u.addAction(t,e.WatchActions.ANY,h)})},u.addAction=function(t,i,r){var a=void 0;if(a=t===e.WatchTypes.NAMESPACES?s:l[t])switch(i){case e.WatchActions.ANY:_.forEach(a.objectArray,function(e){return r(e)}),a.onAddActions.push(r),a.onDeletedActions.push(r),a.onModifiedActions.push(r);break;case e.WatchActions.ADDED:_.forEach(a.objectArray,function(e){return r(e)}),a.onAddActions.push(r);break;case e.WatchActions.MODIFIED:a.onModifiedActions.push(r);break;case e.WatchActions.DELETED:a.onDeletedActions.push(r);break;default:n.debug("Attempting to add unknown action: ",i)}},u}])}(Kubernetes||(Kubernetes={}));var Project;!function(e){e.context="/project",e.hash="#"+e.context,e.pluginName="Project",e.log=Logger.get(e.pluginName),e.pluginPath="plugins/project/",e.templatePath=e.pluginPath+"html/",e.gogsRestURL="/kubernetes/api/"+Kubernetes.defaultApiVersion+"/proxy/services/gogs-http-service/api/v1",e.gogsUserRepoRestURL=e.gogsRestURL+"/user/repos"}(Project||(Project={}));var Project;!function(e){e._module=angular.module(e.pluginName,[Kubernetes.pluginName]),e.controller=PluginHelpers.createControllerFunction(e._module,e.pluginName),e.route=PluginHelpers.createRoutingFunction(e.templatePath),e._module.config(["$routeProvider",function(t){t.when(UrlHelpers.join(e.context,"/create"),e.route("projectCreate.html",!1))}]),e._module.factory("ForgeApiURL",["jolokiaUrl","jolokia","$q","$rootScope",function(e,t,n,i){return Kubernetes.kubernetesApiUrl()+"/proxy"+Kubernetes.kubernetesNamespacePath()+"/services/fabric8-forge/api/forge"}]),hawtioPluginLoader.addModule(e.pluginName)}(Project||(Project={}));var Project;!function(e){e.ProjectController=e.controller("ProjectController",["$scope","KubernetesModel","$templateCache","$location","$routeParams","$http","$timeout","KubernetesApiURL",function(t,n,i,r,a,o,s,l){function c(t){var n=t.full_name;if(n){var i=Core.url(e.gogsRestURL+"/"+n+".git");console.log("Creating a git repo for "+n+" at : "+i)}}function u(){t.builds=[];var n=e.gogsUserRepoRestURL,i={headers:{withCredentials:!0,Authorization:d}};delete o.defaults.headers.common.Accept,o.get(n,i).success(function(e,n,i,r){e&&(console.log("got repos: "+angular.toJson(e,!0)),t.builds=e),t.fetched=!0,Core.$apply(t)}).error(function(i,r,a,o){t.fetched=!0,e.log.warn("Failed to load "+n+" "+i+" "+r)})}t.model=n,t.entity={name:""},t.$on("$routeUpdate",function(e){u()});var d="Basic TODO";t.create=function(){var n=e.gogsUserRepoRestURL;console.log("Creating project "+angular.toJson(t.entity,!0)),console.log("Posting to url: "+n);var i=t.entity,r={headers:{withCredentials:!0,Authorization:d,"Content-Type":"application/json"}};o.post(n,i,r).success(function(e,t,n,i){console.log("project created! got data "+angular.toJson(e,!0)),c(e)}).error(function(t,i,r,a){e.log.warn("Failed to load "+n+" "+t+" "+i),Core.notification("error","Failed to create git repository "+name+". Returned code: "+i+" "+t)})},u()}])}(Project||(Project={})),angular.module("hawtio-kubernetes-templates",[]).run(["$templateCache",function(e){e.put("plugins/kubernetes/html/apps.html",'<div ng-controller="Kubernetes.Apps">\n  <script type="text/ng-template" id="appIconTemplate.html">\n    <div class="ngCellText" title="{{row.entity.$info.description}}">\n      <a ng-href="row.entity.$appUrl">\n        <img ng-show="row.entity.$iconUrl" class="app-icon-small" ng-src="{{row.entity.$iconUrl}}">\n      </a>\n      <span class="app-name">\n        <a ng-click="row.entity.$select()">\n          {{row.entity.$info.name}}\n        </a>\n      </span>\n    </div>\n  </script>\n  <script type="text/ng-template" id="appServicesTemplate.html">\n    <div class="ngCellText">\n      <span ng-repeat="service in row.entity.services">\n          <a ng-href="{{service | kubernetesPageLink}}"\n             title="View service details">\n            <span>{{service.metadata.name ||service.name || service.id}}</span>\n          </a>\n      </span>\n    </div>\n  </script>\n  <script type="text/ng-template" id="appDeployedTemplate.html">\n    <div class="ngCellText" title="deployed at: {{row.entity.$creationDate | date:\'yyyy-MMM-dd HH:mm:ss Z\'}}">\n      {{row.entity.$creationDate.relative()}}\n    </div>\n  </script>\n  <script type="text/ng-template" id="appReplicationControllerTemplate.html">\n    <div class="ngCellText">\n      <span ng-repeat="controller in row.entity.replicationControllers">\n        <a ng-href="{{controller | kubernetesPageLink}}"\n           title="View controller details">\n          <span>{{controller.metadata.name || controller.id}}</span>\n        </a>\n        &nbsp;\n        <span class="pull-right">\n          <a class="badge badge-info" href="" ng-click="$emit(\'do-resize\', controller)"\n            title="Resize the number of replicas of this controller">\n             {{controller.spec.replicas || 0}}</a>\n        </span>\n      </span>\n    </div>\n  </script>\n  <script type="text/ng-template" id="appPodCountsAndLinkTemplate.html">\n    <div class="ngCellText" title="Number of running pods for this controller">\n      <div ng-repeat="podCounters in row.entity.$podCounters track by $index">\n        <a ng-show="podCounters.podsLink" href="{{podCounters.podsLink}}" title="{{podCounters.labelText}}">\n          <span ng-show="podCounters.valid" class="badge badge-success">{{podCounters.valid}}</span>\n          <span ng-show="podCounters.waiting" class="badge">{{podCounters.waiting}}</span>\n          <span ng-show="podCounters.error" class="badge badge-warning">{{podCounters.error}}</span>\n        </a>\n      </div>\n    </div>\n  </script>\n  <script type="text/ng-template" id="appDetailTemplate.html">\n    <div class="service-view-rectangle" ng-repeat="view in item.$serviceViews">\n      <div class="service-view-header">\n        <span class="service-view-icon">\n          <a ng-href="{{view.service | kubernetesPageLink}}" title="View the service detail page">\n            <img ng-show="item.$iconUrl" ng-src="{{item.$iconUrl}}">\n          </a>\n        </span>\n        <span class="service-view-name" title="{{view.name}}">\n          <a ng-href="{{view.service | kubernetesPageLink}}" title="View the service detail page">\n            {{view.appName}}\n          </a>\n        </span>\n        <span class="service-view-address" title="The service address">\n          <a ng-show="view.service.$connectUrl" target="_blank" ng-href="{{view.service.$connectUrl}}" title="Connect to the service">\n            {{view.service.$host}}\n          </a>\n          <span ng-hide="view.service.$connectUrl">{{view.service.$host}}</span>\n        </span>\n        <span class="pull-right">\n          <a class="service-view-header-delete" href="" ng-click="deleteSingleApp(item)" title="Delete this app"><i\n                  class="fa fa-remove red"></i></a>\n        </span>\n      </div>\n\n      <div class="service-view-detail-rectangle">\n        <div class="service-view-detail-header">\n          <div class="col-md-4">\n            <div class="service-view-detail-deployed" ng-show="view.createdDate"\n                 title="deployed at: {{view.createdDate | date:\'yyyy-MMM-dd HH:mm:ss Z\'}}">\n              deployed:\n              <span class="value">{{view.createdDate.relative()}}</span>\n            </div>\n            <div class="service-view-detail-deployed" ng-hide="view.createdDate">\n              not deployed\n            </div>\n          </div>\n          <div class="col-md-4">\n            <div class="service-view-detail-pod-template" ng-show="view.controllerId">\n              pod template:\n              <span class="value" title="Go to the replication controller detail page"><a\n                      ng-href="{{view.replicationController | kubernetesPageLink}}">{{view.controllerId}}</a></span>\n            </div>\n            <div class="service-view-detail-pod-template" ng-hide="view.controllerId">\n              no pod template\n            </div>\n          </div>\n          <div class="col-md-4 service-view-detail-pod-counts">\n            <span class="pull-right">\n              pods:\n              <a href="" ng-show="view.replicationController" class="badge badge-info"\n                ng-click="resizeDialog.open(view.replicationController)"\n                title="Resize the number of pods">\n                {{view.podCount}}\n              </a>\n              <span ng-hide="view.replicationController" class="badge badge-success">\n                {{view.podCount}}\n              </span>\n            </span>\n          </div>\n        </div>\n\n        <div class="service-view-detail-pod-box" ng-repeat="pod in item.pods track by $index">\n          <div ng-show="podExpanded(pod)" class="service-view-detail-pod-summary-expand">\n            <table>\n              <tr>\n                <td class="service-view-detail-pod-status">\n                  <i ng-class="pod.statusClass"></i>\n                </td>\n                <td class="service-view-detail-pod-connect" ng-show="pod.$jolokiaUrl"\n                    ng-controller="Kubernetes.ConnectController">\n                  <a class="clickable"\n                     ng-click="doConnect(pod)"\n                     title="Open a new window and connect to this container">\n                    <i class="fa fa-sign-in"></i>\n                  </a>\n                </td>\n                <td>\n                  <div class="service-view-detail-pod-id" title="{{pod.id}}">\n                    <span class="value">Pod <a title="Go to the pod detail page" ng-href="{{pod | kubernetesPageLink}}">{{pod.idAbbrev}}</a></span>\n                  </div>\n                  <div class="service-view-detail-pod-ip">\n                    IP:\n                    <span class="value">{{pod.status.podIP}}</span>\n                  </div>\n                </td>\n                <td>\n                  <div class="service-view-detail-pod-ports">\n                    ports: <span class="value">{{pod.$containerPorts.join(", ")}}</span>\n                  </div>\n                  <div class="service-view-detail-pod-minion">\n                    minion:\n                    <span class="value">\n                      <a ng-show="pod.$host" ng-href="{{baseUri}}/kubernetes/hosts/{{pod.$host}}">{{pod.$host}}</a>\n                    </span>\n                  </div>\n                </td>\n                <td class="service-view-detail-pod-expand" ng-click="collapsePod(pod)">\n                  <i class="fa fa-chevron-left"></i>\n                </td>\n              </tr>\n            </table>\n            <!--\n                                      <div class="service-view-detail-pod-status">\n                                        status:\n                                        <span class="value">{{pod.status}}</span>\n                                      </div>\n            -->\n          </div>\n\n          <div ng-hide="podExpanded(pod)" class="service-view-detail-pod-summary">\n            <table>\n              <tr>\n                <td class="service-view-detail-pod-status">\n                  <i ng-class="pod.statusClass"></i>\n                </td>\n                <td class="service-view-detail-pod-connect" ng-show="pod.$jolokiaUrl"\n                    ng-controller="Kubernetes.ConnectController">\n                  <a class="clickable"\n                     ng-click="doConnect(pod)"\n                     title="Open a new window and connect to this container">\n                    <i class="fa fa-sign-in"></i>\n                  </a>\n                </td>\n                <td>\n                  <div class="service-view-detail-pod-id" title="{{pod.id}}">\n                    <span class="value">Pod <a title="Go to the pod detail page" ng-href="{{pod | kubernetesPageLink}}">{{pod.idAbbrev}}</a></span>\n                  </div>\n                  <div class="service-view-detail-pod-ip">\n                    IP:\n                    <span class="value">{{pod.status.podIP}}</span>\n                  </div>\n                </td>\n                <td class="service-view-detail-pod-expand" ng-click="expandPod(pod)">\n                  <i class="fa fa-chevron-right"></i>\n                </td>\n              </tr>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </script>\n\n\n  <div ng-hide="appSelectorShow">\n    <div class="row filter-header">\n      <div class="col-md-12">\n        <span ng-include="\'namespaceSelector.html\'"></span>\n        <span ng-show="model.apps.length && !id">\n          <hawtio-filter ng-model="tableConfig.filterOptions.filterText"\n                         css-class="input-xxlarge"\n                         placeholder="Filter apps..."></hawtio-filter>\n        </span>\n        <span ng-hide="id" class="pull-right">\n          <div class="btn-group">\n            <a class="btn" ng-disabled="mode == \'list\'" href="" ng-click="mode = \'list\'">\n              <i class="fa fa-list"></i></a>\n            <a class="btn" ng-disabled="mode == \'detail\'" href="" ng-click="mode = \'detail\'">\n              <i class="fa fa-table"></i></a>\n          </div>\n        </span>\n        <span class="pull-right">&nbsp;</span>\n        <button ng-show="model.apps.length && mode == \'list\'"\n                class="btn btn-danger pull-right"\n                ng-disabled="!id && tableConfig.selectedItems.length == 0"\n                ng-click="deletePrompt(id || tableConfig.selectedItems)">\n          <i class="fa fa-remove"></i> Delete\n        </button>\n        <span class="pull-right">&nbsp;</span>\n        <button ng-show="model.appFolders.length"\n                class="btn btn-success pull-right"\n                ng-click="appSelectorShow = true"\n                title="Run an application">\n          <i class="fa fa-play-circle"></i> Run ...\n        </button>\n        <span class="pull-right">&nbsp;</span>\n        <span ng-include="\'runButton.html\'"></span>\n        <span class="pull-right">&nbsp;</span>\n        <button ng-show="id"\n                class="btn btn-primary pull-right"\n                ng-click="id = undefined"><i class="fa fa-list"></i></button>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-md-12">\n        <div ng-hide="model.fetched">\n          <div class="align-center">\n            <i class="fa fa-spinner fa-spin"></i>\n          </div>\n        </div>\n        <div ng-show="model.fetched && !id">\n          <div ng-hide="model.apps.length" class="align-center">\n            <p class="alert alert-info">There are no apps currently available.</p>\n          </div>\n          <div ng-show="model.apps.length">\n            <div ng-show="mode == \'list\'">\n              <table class="table table-condensed table-striped" hawtio-simple-table="tableConfig"></table>\n            </div>\n            <div ng-show="mode == \'detail\'">\n              <div class="app-detail" ng-repeat="item in model.apps | filter:tableConfig.filterOptions.filterText | orderBy:\'$name\' track by $index">\n                <ng-include src="\'appDetailTemplate.html\'"/>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div ng-show="model.fetched && id">\n          <div class="app-detail">\n            <ng-include src="\'appDetailTemplate.html\'"/>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n  <div ng-show="appSelectorShow">\n    <div class="col-md-7">\n      <div class="row">\n        <hawtio-filter ng-model="appSelector.filterText"\n                       css-class="input-xxlarge"\n                       placeholder="Filter apps..."></hawtio-filter>\n      </div>\n      <div class="row">\n        <ul>\n          <li class="no-list profile-selector-folder" ng-repeat="folder in model.appFolders"\n              ng-show="appSelector.showFolder(folder)">\n            <div class="expandable" ng-class="appSelector.isOpen(folder)">\n              <div title="{{folder.path}}" class="title">\n                <i class="expandable-indicator folder"></i> <span class="folder-title" ng-show="folder.path">{{folder.path.capitalize(true)}}</span><span\n                      class="folder-title" ng-hide="folder.path">Uncategorized</span>\n              </div>\n              <div class="expandable-body">\n                <ul>\n                  <li class="no-list profile" ng-repeat="profile in folder.apps" ng-show="appSelector.showApp(profile)">\n                    <div class="profile-selector-item">\n                      <div class="inline-block profile-selector-checkbox">\n                        <input type="checkbox" ng-model="profile.selected"\n                               ng-change="appSelector.updateSelected()">\n                      </div>\n                      <div class="inline-block profile-selector-name" ng-class="appSelector.getSelectedClass(profile)">\n                        <span class="contained c-max">\n                          <a href="" ng-click="appSelector.select(profile, !profile.selected)"\n                             title="Details for {{profile.id}}">\n                            <img ng-show="profile.$iconUrl" class="icon-small-app" ng-src="{{profile.$iconUrl}}">\n                            <span class="app-name">{{profile.name}}</span>\n                          </a>\n                        </span>\n                      </div>\n                    </div>\n\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <div class="col-md-5">\n      <div class="row">\n        <button class="btn btn-primary pull-right"\n                ng-click="appSelectorShow = undefined"><i class="fa fa-circle-arrow-left"></i> Back\n        </button>\n        <span class="pull-right">&nbsp;</span>\n        <button class="btn pull-right"\n                ng-disabled="!appSelector.selectedApps.length"\n                title="Clears the selected Apps"\n                ng-click="appSelector.clearSelected()"><i class="fa fa-check-empty"></i> Clear\n        </button>\n        <span class="pull-right">&nbsp;</span>\n        <button class="btn btn-success pull-right"\n                ng-disabled="!appSelector.selectedApps.length"\n                ng-click="appSelector.runSelectedApps()"\n                title="Run the selected apps">\n          <i class="fa fa-play-circle"></i>\n          <ng-pluralize count="appSelector.selectedApps.length"\n                        when="{\'0\': \'No App Selected\',\n                                       \'1\': \'Run App\',\n                                       \'other\': \'Run {} Apps\'}"></ng-pluralize>\n\n        </button>\n      </div>\n      <div class="row">\n        <!--\n                <div ng-hide="appSelector.selectedApps.length">\n                  <p class="alert pull-right">\n                    Please select an App\n                  </p>\n                </div>\n        -->\n\n        <div ng-show="appSelector.selectedApps.length">\n\n          <ul class="zebra-list pull-right">\n            <li ng-repeat="app in appSelector.selectedApps">\n              <img ng-show="app.$iconUrl" class="icon-selected-app" ng-src="{{app.$iconUrl}}">\n              <strong class="green selected-app-name">{{app.name}}</strong>\n              &nbsp;\n              <i class="red clickable fa fa-remove"\n                 title="Remove appp"\n                 ng-click="appSelector.select(app, false)"></i>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n  <ng-include src="\'resizeDialog.html\'"/>\n</div>\n'),
e.put("plugins/kubernetes/html/build.html",'<div ng-controller="Kubernetes.BuildController">\n  <div class="row">\n    <div class="col-md-12">\n      <a class="btn btn-default pull-right"\n              href="{{baseUri}}/kubernetes/builds"><i class="fa fa-list"></i></a>\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right" ng-show="entity.$configLink"\n              title="View the build configuration"\n              href="{{entity.$configLink}}">\n        Configuration\n      </a>\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right" ng-show="entity.$podLink"\n              title="View the build pod"\n              href="{{entity.$podLink}}">\n        Pod\n      </a>\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-primary pull-right" ng-show="entity.$logsLink"\n              title="View the build logs"\n              href="{{entity.$logsLink}}">\n        View Log\n      </a>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div hawtio-object="entity" config="config"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/buildConfig.html",'<div ng-controller="Kubernetes.BuildConfigController">\n  <div class="row">\n    <div class="col-md-12">\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n              href="{{baseUri}}/kubernetes/buildConfigs"><i class="fa fa-list"></i></a>\n      <div class="pull-right" ng-repeat="view in entity.$fabric8Views | orderBy:\'label\'">\n        <a title="{{view.description}}" ng-show="view.url" ng-href="{{view.url}}" class="btn btn-default">\n          <i class="{{view.iconClass}}" ng-show="view.iconClass"></i>\n          {{view.label}}\n        </a>\n        <span class="pull-right" ng-show="view.url" >&nbsp;</span>\n      </div>\n      <span class="pull-right">&nbsp;</span>\n      <button class="btn btn-primary pull-right"\n         title="Trigger this build"\n         ng-disabled="!entity.$triggerUrl"\n         ng-click="triggerBuild(entity)"><i class="fa fa-play-circle-o"></i> Trigger</button>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div hawtio-object="entity" config="config"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/buildConfigCreate.html",'<div ng-controller="Kubernetes.BuildConfigController">\n  <div class="row">\n    <div class="col-md-12">\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n              href="{{baseUri}}/kubernetes/buildConfigs"><i class="fa fa-list"></i></a>\n      <button class="btn btn-primary pull-right"\n              title="Saves changes to this build configuration"\n              ng-click="save()">\n        Create Build Configuration\n      </button>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div hawtio-form-2="config" entity="entity"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/buildConfigEdit.html",'<div ng-controller="Kubernetes.BuildConfigController">\n  <div class="row">\n    <div class="col-md-12">\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n              href="{{baseUri}}/kubernetes/buildConfigs"><i class="fa fa-list"></i></a>\n      <button class="btn btn-primary pull-right"\n              title="Saves changes to this build configuration"\n              ng-click="save()">\n        Save\n      </button>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div hawtio-form-2="config" entity="entity"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/buildConfigs.html",'<div class="row" ng-controller="Kubernetes.BuildConfigsController">\n  <script type="text/ng-template" id="buildConfigLinkTemplate.html">\n    <div class="ngCellText">\n      <a title="View details for this build configuration"\n         href="{{baseUri}}/kubernetes/buildConfigs/{{row.entity.metadata.name}}">\n<!--\n        <img class="app-icon-small" ng-src="{{row.entity.$iconUrl}}">\n-->\n        {{row.entity.metadata.name}}</a>\n    </div>\n  </script>\n  <script type="text/ng-template" id="buildConfigViewsTemplate.html">\n    <div class="ngCellText">\n      <span ng-repeat="view in row.entity.$fabric8Views track by $index">\n        <a title="{{view.description}}" ng-show="view.url" ng-href="{{view.url}}" class="btn btn-default">\n          <i class="{{view.iconClass}}" ng-show="view.iconClass"></i>\n          {{view.label}}\n        </a>\n      </span>\n    </div>\n  </script>\n  <script type="text/ng-template" id="buildConfigCodeViewsTemplate.html">\n    <div class="ngCellText">\n      <span ng-repeat="view in row.entity.$fabric8CodeViews track by $index">\n        <a title="{{view.description}}" ng-show="view.url" ng-href="{{view.url}}" class="btn btn-default">\n          <i class="{{view.iconClass}}" ng-show="view.iconClass"></i>\n          {{view.label}}\n        </a>\n      </span>\n    </div>\n  </script>\n  <script type="text/ng-template" id="buildConfigBuildViewsTemplate.html">\n    <div class="ngCellText">\n      <span ng-repeat="view in row.entity.$fabric8BuildViews track by $index">\n        <a title="{{view.description}}" ng-show="view.url" ng-href="{{view.url}}" class="btn btn-default">\n          <i class="{{view.iconClass}}" ng-show="view.iconClass"></i>\n          {{view.label}}\n        </a>\n      </span>\n    </div>\n  </script>\n  <script type="text/ng-template" id="buildConfigTeamViewsTemplate.html">\n    <div class="ngCellText">\n      <span ng-repeat="view in row.entity.$fabric8TeamViews track by $index">\n        <a title="{{view.description}}" ng-show="view.url" ng-href="{{view.url}}" class="btn btn-default">\n          <i class="{{view.iconClass}}" ng-show="view.iconClass"></i>\n          {{view.label}}\n        </a>\n      </span>\n    </div>\n  </script>\n  <div class="row filter-header">\n    <div class="col-md-12">\n      <span>\n        <span ng-include="\'namespaceSelector.html\'"></span>\n        <hawtio-filter ng-show="buildConfigs.length"\n                       ng-model="tableConfig.filterOptions.filterText"\n                       css-class="input-xxlarge"\n                       placeholder="Filter build configurations..."></hawtio-filter>\n      </span>\n      <button ng-show="fetched"\n              title="Delete the selected build configuration"\n              class="btn btn-danger pull-right"\n              ng-disabled="tableConfig.selectedItems.length == 0"\n              ng-click="deletePrompt(tableConfig.selectedItems)">\n        <i class="fa fa-remove"></i> Delete\n      </button>\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n         title="Add a build configuration for an existing project"\n         href="{{baseUri}}/kubernetes/buildConfigCreate"><i class="fa fa-wrench"></i> Add Build</a>\n      <span class="pull-right">&nbsp;</span>\n\n      <a class="btn btn-primary pull-right" href="/forge/command/project-new"\n         ng-show="isLoggedIntoGogs()"\n         title="Create a new project and repository">\n        <i class="fa fa-plus"></i> Create Project</a>\n      </a>\n      <span class="pull-right" ng-show="isLoggedIntoGogs()">&nbsp;</span>\n\n      <a class="btn btn-primary pull-right" href="/forge/repos"\n         ng-hide="isLoggedIntoGogs()"\n         title="Sign in to gogs so that you can create a new project">\n        <i class="fa fa-sign-in"></i> Sign In</a>\n      </a>\n      <span class="pull-right" ng-hide="isLoggedIntoGogs()">&nbsp;</span>\n\n      <button class="btn btn-default pull-right"\n         title="Trigger the given build"\n         ng-disabled="tableConfig.selectedItems.length != 1 || !tableConfig.selectedItems[0].$triggerUrl"\n         ng-click="triggerBuild(tableConfig.selectedItems[0])"><i class="fa fa-play-circle-o"></i> Trigger</button>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div ng-hide="buildConfigs.length" class="align-center">\n          <p class="alert alert-info">There are no build configurations available.</p>\n          <a class="btn btn-primary" href="{{baseUri}}/kubernetes/buildConfigCreate"><i class="fa fa-wrench"></i> Add Build Configuration</a>\n        </div>\n        <div ng-show="buildConfigs.length">\n          <table class="table table-condensed table-striped" ui-if="kubernetes.selectedNamespace"\n                 hawtio-simple-table="tableConfig"></table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/buildLogs.html",'<div ng-controller="Kubernetes.BuildLogsController">\n  <div class="row">\n    <div class="col-md-12">\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right" ng-show="entity.$viewLink"\n         title="View the build detail"\n         href="{{entity.$viewLink}}">\n        Build\n      </a>\n      <a class="btn btn-primary pull-right" ng-show="entity.$configLink"\n         title="View the build configuration"\n         href="{{entity.$configLink}}">\n        Configuration\n      </a>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <h3>logs for {{entity.$configId}}</h3>\n\n        <p>\n          <pre>\n            <code>\n              {{logsText}}\n            </code>\n          </pre>\n        </p>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/builds.html",'<div class="row" ng-controller="Kubernetes.BuildsController">\n  <script type="text/ng-template" id="buildLinkTemplate.html">\n    <div class="ngCellText">\n      <a title="View details for this build: {{row.entity.$name}}"\n         href="{{baseUri}}/kubernetes/builds/{{row.entity.metadata.name}}">\n        <!--\n                <img class="app-icon-small" ng-src="{{row.entity.$iconUrl}}">\n        -->\n        {{row.entity.$shortName}}\n      </a>\n    </div>\n  </script>\n  <script type="text/ng-template" id="buildPodTemplate.html">\n    <div class="ngCellText">\n      <a title="View the pod for this build: {{row.entity.podName}}" ng-show="row.entity.$podLink"\n         href="{{row.entity.$podLink}}">\n        {{row.entity.$podShortName}}</a>\n    </div>\n  </script>\n  <script type="text/ng-template" id="buildLogsTemplate.html">\n    <div class="ngCellText">\n      <a title="View the log for this build" ng-show="row.entity.$logsLink"\n         href="{{row.entity.$logsLink}}">\n        <i class="fa fa-file-text-o"></i>  Logs\n      </a>\n    </div>\n  </script>\n  <script type="text/ng-template" id="buildRepositoryTemplate.html">\n    <div class="ngCellText">\n      <a ng-show="row.entity.parameters.source.git.uri" target="gitRepository"\n         title="View the git based source repository"\n         href="{{row.entity.parameters.source.git.uri}}">\n        {{row.entity.parameters.source.git.uri}}\n      </a>\n      <span ng-hide="row.entity.parameters.source.git.uri">\n        {{row.entity.parameters.source.git.uri}}\n      </span>\n    </div>\n  </script>\n  <script type="text/ng-template" id="buildStatusTemplate.html">\n    <div class="ngCellText" ng-switch="row.entity.status">\n      <span ng-switch-when="New" class="text-primary">\n        <i class="fa fa-spin fa-spinner"></i> New\n      </span>\n      <span ng-switch-when="Pending" class="text-primary">\n        <i class="fa fa-spin fa-spinner"></i> Pending\n      </span>\n      <span ng-switch-when="Running" class="text-primary">\n        <i class="fa fa-spin fa-spinner"></i> Running\n      </span>\n      <span ng-switch-when="Complete" class="text-success">\n        <i class="fa fa-check-circle"></i> Complete\n      </span>\n      <span ng-switch-when="Failed" class="text-danger">\n        <i class="fa fa-exclamation-circle"></i> Failed\n      </span>\n      <span ng-switch-default class="text-warning">\n        <i class="fa fa-exclamation-triangle"></i> {{row.entity.status}}\n      </span>\n    </div>\n  </script>\n  <script type="text/ng-template" id="buildTimeTemplate.html">\n    <div class="ngCellText" title="built at: {{row.entity.$creationDate | date : \'h:mm:ss a, EEE MMM yyyy\'}}">\n      {{row.entity.$creationDate.relative()}}\n    </div>\n  </script>\n  <div class="row filter-header">\n    <div class="col-md-12" >\n      <span ng-show="!id">\n        <span ng-include="\'namespaceSelector.html\'"></span>\n        <hawtio-filter ng-show="builds.length" \n                       ng-model="tableConfig.filterOptions.filterText"\n                       css-class="input-xxlarge"\n                       placeholder="Filter builds..."></hawtio-filter>\n      </span>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div ng-hide="builds.length" class="align-center">\n          <p class="alert alert-info">There are no builds currently running.</p>\n        </div>\n        <div ng-show="builds.length">\n          <table class="table table-condensed table-striped" ui-if="kubernetes.selectedNamespace"\n                 hawtio-simple-table="tableConfig"></table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/deploymentConfig.html",'<div ng-controller="Kubernetes.DeploymentConfigController">\n  <div class="row">\n    <div class="col-md-12">\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n              href="{{baseUri}}/kubernetes/deploymentConfigs"><i class="fa fa-list"></i></a>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div hawtio-object="entity" config="config"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/deploymentConfigs.html",'<div class="row" ng-controller="Kubernetes.DeploymentConfigsController">\n  <script type="text/ng-template" id="deploymentConfigLinkTemplate.html">\n    <div class="ngCellText">\n      <a title="View details for this build configuration"\n         href="{{baseUri}}/kubernetes/deploymentConfigs/{{row.entity.metadata.name}}">\n<!--\n        <img class="app-icon-small" ng-src="{{row.entity.$iconUrl}}">\n-->\n        {{row.entity.metadata.name}}</a>\n    </div>\n  </script>\n  <script type="text/ng-template" id="deploymentConfigLabelTemplate.html">\n    <div class="ngCellText">\n      <span ng-repeat="(key, label) in row.entity.template.controllerTemplate.template.metadata.labels track by $index"\n            class="pod-label badge"\n            ng-class="labelClass(key)"\n            ng-click="clickTag(entity, key, label)"\n            title="{{key}}">{{label}}</span>\n    </div>\n  </script>\n  <div class="row filter-header">\n    <div class="col-md-12">\n      <span>\n        <span ng-include="\'namespaceSelector.html\'"></span>\n        <hawtio-filter ng-show="deploymentConfigs.length"\n                       ng-model="tableConfig.filterOptions.filterText"\n                       css-class="input-xxlarge"\n                       placeholder="Filter deployment configurations..."></hawtio-filter>\n      </span>\n      <button ng-show="fetched && deploymentConfigs.length"\n              title="Delete the selected build configuration"\n              class="btn btn-danger pull-right"\n              ng-disabled="tableConfig.selectedItems.length == 0"\n              ng-click="deletePrompt(tableConfig.selectedItems)">\n        <i class="fa fa-remove"></i> Delete\n      </button>\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n         title="Create a new build configuration"\n         href="{{baseUri}}/kubernetes/buildConfigCreate"><i class="fa fa-plus"></i> Create</a>\n      <span class="pull-right">&nbsp;</span>\n      <button class="btn btn-primary pull-right"\n         ng-show="fetched && deploymentConfigs.length"\n         title="Trigger the given build"\n         ng-disabled="tableConfig.selectedItems.length != 1 || !tableConfig.selectedItems[0].$triggerUrl"\n         ng-click="triggerBuild(tableConfig.selectedItems[0])"><i class="fa fa-play-circle-o"></i> Trigger</button>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div ng-hide="deploymentConfigs.length" class="align-center">\n          <p class="alert alert-info">There are no deployment configurations available.</p>\n          <a class="btn btn-primary" href="{{baseUri}}/kubernetes/deploymentConfigCreate"><i class="fa fa-plus"></i> Create Deployment Configuration</a>\n        </div>\n        <div ng-show="deploymentConfigs.length">\n          <table class="table table-condensed table-striped" ui-if="kubernetes.selectedNamespace"\n                 hawtio-simple-table="tableConfig"></table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/host.html",'<div ng-controller="Kubernetes.HostController">\n  <div class="row">\n    <div class="col-md-12">\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n              href="{{baseUri}}/kubernetes/hosts"><i class="fa fa-list"></i></a>\n      <a class="btn pull-right"\n         ng-click="flipRaw()"\n         title="{{rawMode ? \'Raw mode\' : \'Form mode\'}}">{{rawMode ? \'From\' : \'Raw\'}}</a>\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-primary pull-right"\n              title="View all the pods on this host"\n              href="{{baseUri}}/kubernetes/pods/?q=host={{item.id}}">\n        Pods\n      </a>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="model.fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="model.fetched && !rawMode">\n        <div hawtio-object="item" config="itemConfig"></div>\n      </div>\n    </div>\n  </div>\n\n  <div class="span12">\n    <div ng-hide="model.fetched">\n      <div class="align-center">\n        <i class="fa fa-spinner fa-spin"></i>\n      </div>\n    </div>\n    <div ng-show="model.fetched && rawMode">\n      <div class="row-fluid wiki-fixed form-horizontal">\n        <div class="control-group editor-autoresize">\n          <textarea id="source" ui-codemirror="codeMirrorOptions" readonly="true" ng-model="rawModel" style="width: 90%; height: 700px"></textarea>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n'),e.put("plugins/kubernetes/html/hosts.html",'<div class="row" ng-controller="Kubernetes.HostsController">\n  <script type="text/ng-template" id="hostLinkTemplate.html">\n    <div class="ngCellText">\n      </div>\n  </script>\n  <div class="row filter-header">\n    <div class="col-md-12">\n      <span ng-show="!id">\n        <span ng-include="\'namespaceSelector.html\'"></span>\n        <hawtio-filter ng-show="model.hosts.length"\n                       ng-model="tableConfig.filterOptions.filterText"\n                       css-class="input-xxlarge"\n                       placeholder="Filter hosts..."></hawtio-filter>\n      </span>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="model.fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="model.fetched">\n        <div ng-hide="model.hosts.length" class="align-center">\n          <p class="alert alert-info">There are no hosts currently running.</p>\n        </div>\n        <div ng-show="model.hosts.length">\n          <table class="table table-condensed table-striped" ui-if="kubernetes.selectedNamespace"\n                 hawtio-simple-table="tableConfig"></table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/imageRepositories.html",'<div class="row" ng-controller="Kubernetes.ImageRepositoriesController">\n  <script type="text/ng-template" id="imageRegistryLabelTemplate.html">\n    <div class="ngCellText">\n      <span ng-repeat="(key, label) in row.entity.tags track by $index"\n            class="pod-label badge"\n            ng-class="labelClass(key)"\n            ng-click="clickTag(entity, key, label)"\n            title="{{key}}">{{label}}</span>\n    </div>\n  </script>\n  <div class="row filter-header">\n    <div class="col-md-12">\n      <span>\n        <span ng-include="\'namespaceSelector.html\'"></span>\n        <hawtio-filter ng-show="imageRepositories.length"\n                       ng-model="tableConfig.filterOptions.filterText"\n                       css-class="input-xxlarge"\n                       placeholder="Filter image repositories..."></hawtio-filter>\n      </span>\n      <button ng-show="fetched && imageRepositories.length"\n              title="Delete the selected build configuration"\n              class="btn btn-danger pull-right"\n              ng-disabled="tableConfig.selectedItems.length == 0"\n              ng-click="deletePrompt(tableConfig.selectedItems)">\n        <i class="fa fa-remove"></i> Delete\n      </button>\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n         title="Create a new image repository"\n         href="{{baseUri}}/kubernetes/imageRepositoryCreate"><i class="fa fa-plus"></i> Create</a>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div ng-hide="imageRepositories.length" class="align-center">\n          <p class="alert alert-info">There are no image repositories available.</p>\n          <a class="btn btn-primary" href="{{baseUri}}/kubernetes/imageRepositoryCreate"><i class="fa fa-plus"></i> Create Image Repository</a>\n        </div>\n        <div ng-show="imageRepositories.length">\n          <table class="table table-condensed table-striped" ui-if="kubernetes.selectedNamespace"\n                 hawtio-simple-table="tableConfig"></table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/kubernetesJsonDirective.html",'<div>\n  <div class="row">\n    <div class="col-md-12">\n      <div class="fabric-page-header row">\n\n        <div class="pull-left" ng-show="iconURL">\n          <div class="app-logo">\n            <img ng-src="{{iconURL}}">&nbsp;\n          </div>\n        </div>\n        <div class="pull-left">\n            <h2 class="list-inline"><span class="contained c-wide3">&nbsp;{{displayName || appTitle}}</span></h2>\n        </div>\n        <div class="pull-right">\n          <button class="btn btn-success pull-right"\n                  title="Run this application"\n                  ng-disabled="!config || config.error"\n                  ng-click="apply()">\n            <i class="fa fa-play-circle"></i> Run\n          </button>\n        </div>\n        <div class="pull-left col-md-10 profile-summary-wide">\n          <div\n               ng-show="summaryHtml"\n               ng-bind-html-unsafe="summaryHtml"></div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n</div>\n'),e.put("plugins/kubernetes/html/layoutKubernetes.html",'<script type="text/ng-template" id="runButton.html">\n  <button ng-show="model.templates.length"\n    class="btn btn-success pull-right"\n    ng-click="viewTemplates()"\n    title="Run an application from a template">\n    <i class="fa fa-play-circle"></i> Run ...\n  </button>\n</script>\n<script type="text/ng-template" id="idTemplate.html">\n  <div class="ngCellText">\n    <a href="" \n       title="View details for {{row.entity.metadata.name || row.entity.name}}"\n       ng-href="{{row.entity | kubernetesPageLink}}">\n      <img class="app-icon-small" ng-src="{{row.entity.$iconUrl}}">\n      {{row.entity.metadata.name || row.entity.name}}</a>\n  </div>\n</script>\n<script type="text/ng-template" id="selectorTemplate.html">\n  <div class="ngCellText">\n    <span ng-repeat="(name, value) in row.entity.spec.selector track by $index">\n      <strong>{{name}}</strong>: {{value}}\n    </span>\n  </div>\n</script>\n<script type="text/ng-template" id="podCountsAndLinkTemplate.html">\n  <div class="ngCellText" title="Number of running pods for this controller">\n    <a ng-show="row.entity.$podCounters.podsLink" href="{{row.entity.$podCounters.podsLink}}" title="View pods">\n      <span ng-show="row.entity.$podCounters.valid" class="badge badge-success">{{row.entity.$podCounters.valid}}</span>\n      <span ng-show="row.entity.$podCounters.waiting" class="badge">{{row.entity.$podCounters.waiting}}</span>\n      <span ng-show="row.entity.$podCounters.error" class="badge badge-warning">{{row.entity.$podCounters.error}}</span>\n    </a>\n  </div>\n</script>\n<script type="text/ng-template" id="labelTemplate.html">\n  <div class="ngCellText" ng-init="entity=row.entity" ng-controller="Kubernetes.Labels">\n    <p ng-show="data"><strong>Labels</strong></p>\n    <span ng-repeat="label in labels track by $index"\n          class="pod-label badge"\n          ng-class="labelClass(label.key)"\n          ng-click="handleClick(entity, label.key, label)"\n          title="{{label.key}}">{{label.title}}</span>\n  </div>\n</script>\n<script type="text/ng-template" id="hostTemplate.html">\n  <div class="ngCellText" ng-init="host=row.entity.$host">\n    <span class="pod-label badge"\n          class="background-light-grey mouse-pointer"\n          ng-click="$emit(\'labelFilterUpdate\', \'host=\' + host)">{{host}}</span>\n  </div>\n</script>\n<script type="text/ng-template" id="portalAddress.html">\n  <div class="ngCellText">\n    <div ng-repeat="port in row.entity.$ports">\n      <a target="_blank" href="{{row.entity.$connectUrl}}"\n         ng-show="row.entity.$connectUrl && row.entity.$podCounters.valid" title="Protocol {{row.entity.spec.protocol}}">\n        {{row.entity.$host}}\n      </a>\n      <span ng-hide="row.entity.$connectUrl && row.entity.$podCounters.valid">{{row.entity.spec.portalIP || row.entity.spec.clusterIP}}:{{port}}</span>\n    </div>\n  </div>\n</script>\n<script type="text/ng-template" id="iconCellTemplate.html">\n  <div class="ngCellText">\n    <img class="app-icon-small" ng-src="{{row.entity.$iconUrl}}">\n  </div>\n</script>\n<script type="text/ng-template" id="ageTemplate.html">\n  <div class="ngCellText">\n    {{row.entity.$age}}\n  </div>\n</script>\n<script type="text/ng-template" id="statusTemplate.html">\n  <div class="ngCellText" ng-init="entity=row.entity" ng-controller="Kubernetes.PodStatus" title="Pod {{entity.metadata.name}} is {{entity.status.phase}}">\n    <!-- in detail view -->\n    <p ng-show="data"><strong>Status: </strong></p>\n    <i class="fa {{entity.$statusCss}}"></i>\n    <span ng-show="data">{{data}}</span>\n    <!-- in table -->\n    <span ng-show="entity.$jolokiaUrl" ng-controller="Kubernetes.ConnectController">\n      <a class="clickable"\n         ng-click="doConnect(row.entity)"\n         title="Open a new window and connect to this container">\n        <i class="fa fa-sign-in"></i>\n      </a>\n    </span>\n  </div>\n</script>\n<script type="text/ng-template" id="resizeDialog.html">\n  <div modal="resizeDialog.dialog.show">\n      <form class="form-horizontal" ng-submit="resizeDialog.onOk()">\n          <div class="modal-header"><h4>Resize {{resizeDialog.controller.id}}</h4></div>\n          <div class="modal-body">\n            <div class="control-group">\n              <label class="control-label" for="replicas">Replica count</label>\n\n              <div class="controls">\n                <input type="number" min="0" id="replicas" ng-model="resizeDialog.newReplicas">\n              </div>\n            </div>\n\n          </div>\n          <div class="modal-footer">\n            <input class="btn btn-primary" type="submit"\n                   ng-disabled="resizeDialog.newReplicas === resizeDialog.controller.status.replicas"\n                   value="Resize">\n            <button class="btn btn-warning cancel" type="button" ng-click="resizeDialog.close()">Cancel</button>\n          </div>\n        </form>\n    </div>\n  </script>\n  <script type="text/ng-template" id="namespaceSelector.html">\n		<span ng-controller="Kubernetes.NamespaceController">\n    namespace: <select ng-model="namespace" ng-options="namespace for namespace in namespaces" title="choose the namespace - which is a selection of resources in kubernetes">\n    </select>\n		</span>\n  </script>\n<div class="row" ng-controller="Kubernetes.TopLevel">\n  <div class="wiki-icon-view" ng-controller="Kubernetes.FileDropController" nv-file-drop nv-file-over uploader="uploader" over-class="ready-drop">\n    <div class="row kubernetes-view" ng-view></div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/overview.html",'<div ng-controller="Kubernetes.OverviewController">\n  <script type="text/ng-template" id="serviceBoxTemplate.html">\n    <div>\n      <div class="align-left node-body">{{entity.$portsText}}</div>\n      <div class="align-right node-header" title="{{entity.metadata.name}}" ng-bind="entity.metadata.name"></div>\n    </div>\n  </script>\n  <script type="text/ng-template" id="serviceTemplate.html">\n    <div class="kubernetes-overview-row">\n      <div class="kubernetes-overview-cell">\n        <div id="{{service._key}}"\n             namespace="{{service.metadata.namespace}}"\n             connect-to="{{service.connectTo}}"\n             data-type="service"\n             class="jsplumb-node kubernetes-node kubernetes-service-node"\n             ng-controller="Kubernetes.OverviewBoxController"\n             ng-init="entity=getEntity(\'service\', \'{{service._key}}\')"\n             ng-mouseenter="mouseEnter($event)"\n             ng-mouseleave="mouseLeave($event)"\n             ng-click="viewDetails(entity, \'services\')">\n          <div ng-init="entity=entity" ng-include="\'serviceBoxTemplate.html\'"></div>\n        </div>\n      </div>\n    </div>\n  </script>\n  <script type="text/ng-template" id="overviewHostTemplate.html">\n    <div class="kubernetes-overview-row">\n      <div class="kubernetes-overview-cell">\n        <div id="{{host.elementId}}"\n             data-type="host"\n             class="kubernetes-host-container host">\n             <h5><img ng-src="{{host.$iconUrl}}" style="width: 32px; height: 32px;">\n               <a ng-href="{{baseUri}}/kubernetes/hosts/{{host.id}}">{{host.id}}</a>\n             </h5>\n          <div class="pod-container"></div>\n        </div>\n      </div>\n    </div>\n  </script>\n  <script type="text/ng-template" id="podTemplate.html">\n    <div id="{{pod._key}}"\n         data-type="pod"\n         title="Pod ID: {{pod.metadata.name}}"\n         class="jsplumb-node kubernetes-node kubernetes-pod-node"\n         ng-mouseenter="mouseEnter($event)"\n         ng-mouseleave="mouseLeave($event)"\n         ng-controller="Kubernetes.OverviewBoxController"\n         ng-init="entity=getEntity(\'pod\', \'{{pod._key}}\')"\n         ng-click="viewDetails(entity, \'pods\')">\n      <div class="css-table">\n        <div class="css-table-row">\n          <div class="pod-status-cell css-table-cell">\n            <span ng-init="row={ entity: entity }" ng-include="\'statusTemplate.html\'"></span>\n          </div>\n          <div class="pod-label-cell css-table-cell">\n            <span ng-init="row={ entity: entity }" ng-include="\'labelTemplate.html\'"></span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </script>\n  <script type="text/ng-template" id="replicationControllerTemplate.html">\n    <div class="kubernetes-overview-row">\n      <div class="kubernetes-overview-cell">\n        <div\n            id="{{replicationController._key}}"\n            title="{{replicationController.id}}"\n            data-type="replicationController"\n            data-placement="top"\n            connect-to="{{replicationController.connectTo}}"\n            ng-mouseenter="mouseEnter($event)"\n            ng-mouseleave="mouseLeave($event)"\n            class="jsplumb-node kubernetes-replicationController-node kubernetes-node"\n            ng-controller="Kubernetes.OverviewBoxController"\n            ng-init="entity=getEntity(\'replicationController\', \'{{replicationController._key}}\')"\n            ng-click="viewDetails(entity, \'replicationControllers\')">\n            <img class="app-icon-medium" ng-src="{{replicationController.$iconUrl}}">\n        </div>\n      </div>\n    </div>\n  </script>\n  <script type="text/ng-template" id="overviewTemplate.html">\n    <div class="kubernetes-overview"\n         hawtio-jsplumb\n         draggable="false"\n         layout="false"\n         node-sep="50"\n         rank-sep="300">\n      <div class="kubernetes-overview-row">\n        <div class="kubernetes-overview-cell">\n          <div class="kubernetes-overview services">\n            <h6>Services</h6>\n          </div>\n        </div>\n        <div class="kubernetes-overview-cell">\n          <div class="kubernetes-overview hosts">\n            <h6>Hosts and Pods</h6>\n          </div>\n        </div>\n        <div class="kubernetes-overview-cell">\n          <div class="kubernetes-overview replicationControllers">\n            <h6>Replication controllers</h6>\n          </div>\n        </div>\n      </div>\n   </div>\n  </script>\n  <div class="align-center" ng-include="\'namespaceSelector.html\'"></div>\n  <kubernetes-overview ui-if="kubernetes.selectedNamespace"><{{baseUri}}/kubernetes-overview>\n</div>\n'),
e.put("plugins/kubernetes/html/pipelines.html",'<div class="row" ng-controller="Kubernetes.PipelinesController">\n  <script type="text/ng-template" id="hostLinkTemplate.html">\n    <div class="ngCellText">\n    </div>\n  </script>\n  <div class="row filter-header">\n    <div class="col-md-12">\n      <span>\n        <span ng-include="\'namespaceSelector.html\'"></span>\n        <hawtio-filter ng-show="pipelines.length" \n                       ng-model="filterText"\n                       css-class="input-xxlarge"\n                       placeholder="Filter builds..."></hawtio-filter>\n      </span>\n      <a class="btn btn-default pull-right"\n         title="Create a new project"\n         ng-show="forgeEnabled"\n         href="/forge/command/project-new"><i class="fa fa-plus"></i> Create Project</a>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div ng-hide="pipelines.length" class="align-center">\n          <p class="alert alert-info">There are no build pipelines available.</p>\n          <a class="btn btn-primary" href="{{baseUri}}/kubernetes/buildConfig">Create Build Configuration</a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div ng-show="fetched && pipelines.length">\n    <div ng-repeat="pipeline in pipelines | filter:filterText">\n      <div class="row">\n\n        <div class="pipeline-row">\n          <div ng-repeat="step in pipeline.triggersSteps">\n            <div ng-switch="step.buildConfig.kind">\n              <div ng-switch-default="">\n                <div class="col-md-1" ng-hide="$first">\n                  <div class="pipeline-arrow">\n                    <i class="fa fa-long-arrow-right"></i>\n                  </div>\n                </div>\n\n                <div class="col-md-2 pipeline-build" title="Build configuration">\n                  <span class="pipeline-build-details">\n                    <a title="View details for this build configuration"\n                       href="{{baseUri}}/kubernetes/buildConfigs/{{step.buildConfig.metadata.name}}">\n                      <i class="fa fa-cog"></i>\n                      {{step.buildConfig.metadata.name}}\n                    </a>\n                  </span>\n                  &nbsp;&nbsp;&nbsp;\n                  <span class="pipeline-last-build" ng-show="step.buildConfig.$lastBuild">\n                    <a href="{{step.buildConfig.$lastBuild.$viewLink}}" title="view this build">\n                      <i class="fa fa-info"></i>\n                      build\n                    </a>\n                  </span>\n\n                  <div class="ngCellText" class="pipeline-last-build-time"\n                       title="last build was at: {{step.buildConfig.$lastBuild.$creationDate | date : \'h:mm:ss a, EEE MMM yyyy\'}}">\n                    <div ng-switch="step.buildConfig.$lastBuild.status">\n                        <span ng-switch-when="New" class="text-primary">\n                          <i class="fa fa-spin fa-spinner"></i> new: {{step.buildConfig.$lastBuild.$creationDate.relative()}}\n                        </span>\n                        <span ng-switch-when="Pending" class="text-primary">\n                          <i class="fa fa-spin fa-spinner"></i> pending: {{step.buildConfig.$lastBuild.$creationDate.relative()}}\n                        </span>\n                        <span ng-switch-when="Running" class="text-primary">\n                          <i class="fa fa-spin fa-spinner"></i> running {{step.buildConfig.$lastBuild.$creationDate.relative()}}\n                        </span>\n                        <span ng-switch-when="Complete" class="text-success">\n                          <i class="fa fa-check-circle"></i> completed {{step.buildConfig.$lastBuild.$creationDate.relative()}}\n                        </span>\n                        <span ng-switch-when="Failed" class="text-danger">\n                          <i class="fa fa-exclamation-circle"></i> failed {{step.buildConfig.$lastBuild.$creationDate.relative()}}\n                        </span>\n                        <span ng-switch-default class="text-warning">\n                          <i class="fa fa-exclamation-triangle"></i> {{step.buildConfig.$lastBuild.status}}: {{step.buildConfig.$lastBuild.$creationDate.relative()}}\n                        </span>\n                    </div>\n                  </div>\n                  <div class="pipeline-last-build-logs">\n                    <a href="{{step.buildConfig.$lastBuild.$logsLink}}" title="view the logs of this build">\n                      <i class="fa fa-file-text-o"></i>\n                      logs\n                    </a>\n                  </div>\n                </div>\n              </div>\n              <div ng-switch-when="DeploymentConfig">\n                <div class="col-md-1">\n                  <div class="pipeline-arrow">\n                    <i class="fa fa-long-arrow-right"></i>\n                  </div>\n                </div>\n\n                <div class="col-md-2 pipeline-deploy" title="Deployment Configuration">\n                  <div class="pipeline-build-details">\n                    <a title="View details for this deployment configuration"\n                       href="{{baseUri}}/kubernetes/deploymentConfigs/{{step.buildConfig.metadata.name}}">\n                      <i class="fa fa-cogs"></i>\n                      {{step.buildConfig.metadata.name}}\n                    </a>\n                  </div>\n                  <div class="pipeline-deploy-pods">\n                    <div class="pipeline-pod-counts" ng-show="step.$podCounters">pods:\n                      <a ng-show="step.$podCounters.podsLink" target="pods" href="{{step.$podCounters.podsLink}}"\n                         title="View pods for this deployment">\n                        <span class="badge badge-success">{{step.$podCounters.valid}}</span>\n                        <span ng-show="step.$podCounters.waiting" class="badge">{{step.$podCounters.waiting}}</span>\n                        <span ng-show="step.$podCounters.error"\n                              class="badge badge-warning">{{step.$podCounters.error}}</span>\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/pod.html",'<div ng-controller="Kubernetes.PodController">\n  <div class="row row-header">\n    <div class="col-md-12">\n      <span ng-show="model.fetched && !rawMode" class="icon-heading">\n          <img ng-show="item.$iconUrl" class="icon-selected-app" ng-src="{{item.$iconUrl}}">&nbsp;{{item.metadata.name}}\n      </span>\n\n      <button class="btn btn-danger pull-right"\n              title="Delete this Pod"\n              ng-click="deleteEntity()">\n        <i class="fa fa-remove"></i> Delete\n      </button>\n      <span class="pull-right">&nbsp;</span>\n\n      <a class="btn btn-default pull-right"\n              href="{{baseUri}}/kubernetes/pods?namespace={{item.metadata.namespace}}"><i class="fa fa-list"></i></a>\n      <span ng-show="hasServiceKibana()" class="pull-right">&nbsp;</span>\n      <button ng-show="hasServiceKibana()"\n              class="btn btn-default pull-right"\n              title="View the logs for this pod"\n              ng-click="openLogs()">\n        <i class="fa fa-file-text-o"></i> Logs\n      </button>\n\n      <a class="btn pull-right"\n         ng-click="flipRaw()"\n         title="{{rawMode ? \'Raw mode\' : \'Form mode\'}}">{{rawMode ? \'From\' : \'Raw\'}}</a>\n      <span class="pull-right">&nbsp;</span>\n\n      <div ng-show="item.$jolokiaUrl" ng-controller="Kubernetes.ConnectController" class="pull-right">\n        <span>&nbsp;</span>\n        <a class="btn btn-primary pull-right"\n           ng-click="doConnect(item)"\n           title="Open a new window and connect to this container">\n          <i class="fa fa-sign-in"></i> Connect\n        </a>\n      </div>\n    </div>\n  </div>\n\n  <div ng-hide="model.fetched">\n    <div class="row">\n      <div class="col-md-12">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div ng-show="model.fetched && !rawMode">\n    <div class="row">\n      <div class="col-md-12">\n        <div hawtio-object="item" config="itemConfig"></div>\n      </div>\n    </div>\n  </div>\n\n  <div ng-show="model.fetched && rawMode">\n    <div class="raw-json-view">\n      <textarea ui-codemirror="codeMirrorOptions" readonly="true" ng-model="rawModel" class="raw-json-view"></textarea>\n    </div>\n  </div>\n\n</div>\n'),e.put("plugins/kubernetes/html/podCreate.html",'<div ng-controller="Kubernetes.PodEditController">\n  <div class="row">\n    <div class="col-md-12">\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n         title="Go back to viewing all the pods"\n              href="{{baseUri}}/kubernetes/pods"><i class="fa fa-list"></i></a>\n      <button class="btn btn-primary pull-right"\n              title="Create a new pod"\n              ng-click="save()">\n        Create Pod\n      </button>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div hawtio-form-2="config" entity="entity"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/podEdit.html",'<div ng-controller="Kubernetes.PodEditController">\n  <div class="row">\n    <div class="col-md-12">\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n         title="Go back to viewing all the pods"\n              href="{{baseUri}}/kubernetes/pods"><i class="fa fa-list"></i></a>\n      <button class="btn btn-primary pull-right"\n              title="Saves changes to this pod"\n              ng-click="save()">\n        Save\n      </button>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div hawtio-form-2="config" entity="entity"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/pods.html",'<div class="row" ng-controller="Kubernetes.Pods">\n  <script type="text/ng-template" id="imageTemplate.html">\n    <div class="ngCellText">\n      <!-- in table -->\n      <span ng-hide="data">\n        <span ng-repeat="container in row.entity.spec.containers">\n          <span ng-hide="container.$imageLink">{{container.image}}</span>\n          <a ng-show="container.$imageLink" target="dockerRegistry" href="{{container.$imageLink}}" title="{{container.name}}">{{container.image}}</a>\n        </span>\n      </span>\n      <!-- in detail view -->\n      <span ng-show="data">\n        <a target="dockerRegistry" ng-href="https://registry.hub.docker.com/u/{{data}}" title="{{data}}">{{data}}</a>\n      </span>\n    </div>\n  </script>\n  <script type="text/ng-template" id="configDetail.html">\n    <pre>{{data}}</pre>\n  </script>\n  <script type="text/ng-template" id="envItemTemplate.html">\n    <span ng-controller="Kubernetes.EnvItem">\n      <span class="blue">{{key}}</span>=<span class="green">{{value}}</span>\n    </span>\n  </script>\n  <div class="row filter-header">\n    <div class="col-md-12" ng-hide="model.pods.length">\n      <span ng-include="\'namespaceSelector.html\'"></span>\n      <p></p>\n    </div>\n    <div class="col-md-12" ng-show="model.pods.length">\n      <span ng-include="\'namespaceSelector.html\'"></span>\n      <span ng-show="!id">\n        <hawtio-filter ng-model="tableConfig.filterOptions.filterText"\n                       css-class="input-xxlarge"\n                       placeholder="Filter pods..."></hawtio-filter>\n      </span>\n      <button ng-show="model.fetched"\n              class="btn btn-danger pull-right"\n              ng-disabled="!id && tableConfig.selectedItems.length == 0"\n              ng-click="deletePrompt(id || tableConfig.selectedItems)">\n        <i class="fa fa-remove"></i> Delete\n      </button>\n      <span class="pull-right">&nbsp;</span>\n      <button ng-show="id"\n              class="btn btn-primary pull-right"\n              ng-click="id = undefined"><i class="fa fa-list"></i></button>\n      <span class="pull-right">&nbsp;</span>\n      <button ng-show="hasServiceKibana()"\n              class="btn btn-primary pull-right"\n              title="View the logs for the selected pods"\n              ng-disabled="!id && tableConfig.selectedItems.length == 0"\n              ng-click="openLogs()">\n        <i class="fa fa-file-text-o"></i> Logs\n      </button>\n      <span ng-show="hasServiceKibana()" class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n         title="Create a new pod"\n              href="{{baseUri}}/kubernetes/namespace/{{namespace}}/podCreate"><i class="fa fa-plus"></i> Create</a>\n      <span class="pull-right">&nbsp;</span>\n      <span ng-include="\'runButton.html\'"></span>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="model.fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="model.fetched">\n        <div ng-hide="model.pods.length" class="align-center">\n          <p class="alert alert-info">There are no pods currently running.</p>\n        </div>\n        <div ng-show="model.pods.length">\n          <table class="table table-condensed table-striped" ui-if="kubernetes.selectedNamespace"\n                 hawtio-simple-table="tableConfig"></table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/replicationController.html",'<div ng-controller="Kubernetes.ReplicationControllerController">\n  <div class="row row-header">\n    <div class="col-md-12">\n      <span ng-show="model.fetched && !rawMode" class="icon-heading">\n          <img ng-show="item.$iconUrl" class="icon-selected-app" ng-src="{{item.$iconUrl}}">&nbsp;{{item.metadata.name}}\n      </span>\n\n      <button class="btn btn-danger pull-right"\n              title="Delete this ReplicationController"\n              ng-click="deleteEntity()">\n        <i class="fa fa-remove"></i> Delete\n      </button>\n      <span class="pull-right">&nbsp;</span>\n\n      <a class="btn btn-default pull-right"\n         title="Return to table of controllers"\n              href="{{baseUri}}/kubernetes/replicationControllers?namespace={{item.metadata.namespace}}"><i class="fa fa-list"></i></a>\n      <span class="pull-right">&nbsp;</span>\n\n      <a class="btn pull-right"\n         ng-click="flipRaw()"\n         title="{{rawMode ? \'Raw mode\' : \'Form mode\'}}">{{rawMode ? \'From\' : \'Raw\'}}</a>\n      <span class="pull-right">&nbsp;</span>\n\n      <a class="btn btn-primary pull-right"\n              ng-click="resizeDialog.open(item)"\n              title="Resize the number of replicas of this controller">Resize</a>\n      <span class="pull-right">&nbsp;</span>\n\n      <span class="pull-right controller-pod-counts" ng-show="item.$podCounters">Pods:\n        <a ng-show="item.$podCounters.podsLink" href="{{item.$podCounters.podsLink}}" title="View pods">\n          <span ng-show="item.$podCounters.valid" class="badge badge-success">{{item.$podCounters.valid}}</span>\n          <span ng-show="item.$podCounters.waiting" class="badge">{{item.$podCounters.waiting}}</span>\n          <span ng-show="item.$podCounters.error" class="badge badge-warning">{{item.$podCounters.error}}</span>\n        </a>\n      </span>\n    </div>\n  </div>\n\n  <div ng-hide="model.fetched">\n    <div class="row">\n      <div class="col-md-12">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div ng-show="model.fetched && !rawMode">\n    <div class="row">\n      <div class="col-md-12">\n        <div hawtio-object="item" config="itemConfig"></div>\n      </div>\n    </div>\n  </div>\n\n  <div ng-show="model.fetched && rawMode">\n    <div class="raw-json-view">\n      <textarea ui-codemirror="codeMirrorOptions" readonly="true" ng-model="rawModel" class=""></textarea>\n    </div>\n  </div>\n\n  <ng-include src="\'resizeDialog.html\'"/>\n</div>\n'),e.put("plugins/kubernetes/html/replicationControllerCreate.html",'<div ng-controller="Kubernetes.ReplicationControllerEditController">\n  <div class="row">\n    <div class="col-md-12">\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n         title="Go back to viewing all the replication controllers"\n              href="{{baseUri}}/kubernetes/replicationControllers"><i class="fa fa-list"></i></a>\n      <button class="btn btn-primary pull-right"\n              title="Create a new controller"\n              ng-click="save()">\n        Create Controller\n      </button>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div hawtio-form-2="config" entity="entity"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/replicationControllerEdit.html",'<div ng-controller="Kubernetes.ReplicationControllerEditController">\n  <div class="row">\n    <div class="col-md-12">\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n         title="Go back to viewing all the replication controllers"\n              href="{{baseUri}}/kubernetes/replicationControllers"><i class="fa fa-list"></i></a>\n      <button class="btn btn-primary pull-right"\n              title="Saves changes to the controller"\n              ng-click="save()">\n        Save\n      </button>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div hawtio-form-2="config" entity="entity"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/replicationControllers.html",'<div ng-controller="Kubernetes.ReplicationControllers">\n  <script type="text/ng-template" id="currentReplicasTemplate.html">\n    <div class="ngCellText" title="Number of running pods for this controller">\n      <a ng-show="row.entity.podsLink" href="{{row.entity.podsLink}}">\n        <span class="badge {{row.entity.status.replicas > 0 ? \'badge-success\' : \'badge-warning\'}}">{{row.entity.status.replicas}}</span>\n      </a>\n      <span ng-hide="row.entity.podsLink" class="badge">{{row.entity.status.replicas}}</span>\n    </div>\n  </script>\n  <script type="text/ng-template" id="desiredReplicas.html">\n    <div class="ngCellText">\n      <a href="" class="badge badge-info" \n         ng-click="$parent.$parent.resizeDialog.open(row.entity)" \n         title="Edit the number of replicas of this controller">{{row.entity.spec.replicas || 0}}</a>\n    </div>\n  </script>\n  <div class="row filter-header">\n    <div class="col-md-12" ng-hide="model.replicationControllers.length">\n      <span ng-include="\'namespaceSelector.html\'"></span>\n    </div>\n    <div class="col-md-12" ng-show="model.replicationControllers.length">\n      <span ng-include="\'namespaceSelector.html\'"></span>\n      <span ng-show="!id">\n        <hawtio-filter ng-model="tableConfig.filterOptions.filterText"\n                       css-class="input-xxlarge"\n                       placeholder="Filter replication controllers..."\n                       save-as="kubernetes-replication-controllers-text-filter"></hawtio-filter>\n      </span>\n      <button ng-show="model.fetched"\n              class="btn btn-danger pull-right"\n              ng-disabled="!id && tableConfig.selectedItems.length == 0"\n              ng-click="deletePrompt(id || tableConfig.selectedItems)">\n        <i class="fa fa-remove"></i> Delete\n      </button>\n      <span class="pull-right">&nbsp;</span>\n      <button ng-show="id"\n              class="btn btn-primary pull-right"\n              ng-click="id = undefined"><i class="fa fa-list"></i></button>\n      <span ng-show="id" class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n         title="Create a new replication controller"\n              href="{{baseUri}}/kubernetes/namespace/{{namespace}}/replicationControllerCreate"><i class="fa fa-plus"></i> Create</a>\n      <span class="pull-right">&nbsp;</span>\n      <span ng-include="\'runButton.html\'"></span>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="model.fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="model.fetched">\n        <div ng-hide="model.replicationControllers.length" class="align-center">\n          <p class="alert alert-info">There are no replication controllers currently available.</p>\n        </div>\n        <div ng-show="model.replicationControllers.length">\n          <table class="table table-condensed table-striped"\n                 hawtio-simple-table="tableConfig"></table>\n        </div>\n      </div>\n    </div>\n  </div>\n  <ng-include src="\'resizeDialog.html\'"/>\n</div>\n'),e.put("plugins/kubernetes/html/service.html",'<div ng-controller="Kubernetes.ServiceController">\n  <div class="row row-header">\n    <div class="col-md-12">\n      <span ng-show="model.fetched && !rawMode" class="icon-heading">\n          <img ng-show="item.$iconUrl" class="icon-selected-app" ng-src="{{item.$iconUrl}}">&nbsp;{{item.metadata.name}}\n      </span>\n\n      <button class="btn btn-danger pull-right"\n              title="Delete this Service"\n              ng-click="deleteEntity()">\n        <i class="fa fa-remove"></i> Delete\n      </button>\n      <span class="pull-right">&nbsp;</span>\n\n      <a class="btn btn-default pull-right"\n              href="{{baseUri}}/kubernetes/services?namespace={{item.metadata.namespace}}"><i class="fa fa-list"></i></a>\n\n      <a class="btn pull-right"\n         ng-click="flipRaw()"\n         title="{{rawMode ? \'Raw mode\' : \'Form mode\'}}">{{rawMode ? \'From\' : \'Raw\'}}</a>\n      <span class="pull-right">&nbsp;</span>\n\n      <a class="btn btn-primary pull-right"\n         title="Open this service in your browser"\n         ng-show="item.$connectUrl" href="{{item.$connectUrl}}">\n        <i class="fa fa-sign-in"></i> Connect\n      </a>\n    </div>\n  </div>\n\n  <div ng-hide="model.fetched">\n    <div class="row">\n      <div class="col-md-12">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div ng-show="model.fetched && !rawMode">\n    <div class="row">\n      <div class="col-md-12">\n        <div hawtio-object="item" config="itemConfig"></div>\n      </div>\n    </div>\n  </div>\n\n  <div ng-show="model.fetched && rawMode">\n    <div class="raw-json-view">\n      <textarea ui-codemirror="codeMirrorOptions" readonly="true" ng-model="rawModel" class="raw-json-view"></textarea>\n    </div>\n  </div>\n\n</div>\n'),e.put("plugins/kubernetes/html/serviceApps.html",'<li class="dropdown context" ng-controller="Kubernetes.Services">\n  <a href="" class="dropdown-toggle" data-toggle="dropdown">\n    Open <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu k8sServiceApp-menu">\n    <li class="k8sServiceApp" \n        ng-repeat="service in model.serviceApps | filter:filterTemplates | orderBy:\'metadata.name\' track by $index">\n      <a href="{{service.$serviceUrl}}"\n         target="_blank"\n         title="Click to open this app">\n        <img style="width: 32px; height: 32px;" ng-src="{{service.$iconUrl}}">&nbsp;\n        <span ng-bind="service.metadata.name"></span>\n      </a>\n    </li>\n  </ul>\n</li>\n'),e.put("plugins/kubernetes/html/serviceCreate.html",'<div ng-controller="Kubernetes.ServiceEditController">\n  <div class="row">\n    <div class="col-md-12">\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n         title="Go back to viewing all the services"\n              href="{{baseUri}}/kubernetes/services"><i class="fa fa-list"></i></a>\n      <button class="btn btn-primary pull-right"\n              title="Create a new service"\n              ng-click="save()">\n        Create Service\n      </button>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div hawtio-form-2="config" entity="entity"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/serviceEdit.html",'<div ng-controller="Kubernetes.ServiceEditController">\n  <div class="row">\n    <div class="col-md-12">\n      <span class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n         title="Go back to viewing all the services"\n              href="{{baseUri}}/kubernetes/services"><i class="fa fa-list"></i></a>\n      <button class="btn btn-primary pull-right"\n              title="Save changes to this service"\n              ng-click="save()">\n        Save\n      </button>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <div hawtio-form-2="config" entity="entity"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/services.html",'<div ng-controller="Kubernetes.Services">\n  <div class="row filter-header">\n    <div class="col-md-12" ng-hide="model.services.length">\n      <span ng-include="\'namespaceSelector.html\'"></span>\n    </div>\n    <div class="col-md-12" ng-show="model.services.length">\n      <span ng-include="\'namespaceSelector.html\'"></span>\n      <span ng-show="!id">\n        <hawtio-filter ng-model="tableConfig.filterOptions.filterText"\n                       css-class="input-xxlarge"\n                       placeholder="Filter services..."\n                       save-as="kubernetes-services-text-filter"></hawtio-filter>\n      </span>\n      <span ng-hide="id" class="pull-right">\n        <div class="btn-group">\n          <a class="btn" ng-disabled="mode == \'list\'" href="" ng-click="mode = \'list\'">\n            <i class="fa fa-list"></i></a>\n          <a class="btn" ng-disabled="mode == \'icon\'" href="" ng-click="mode = \'icon\'">\n            <i class="fa fa-table"></i></a>\n        </div>\n      </span>\n      <span class="pull-right">&nbsp;</span>\n      <button ng-show="model.fetched"\n              class="btn btn-danger pull-right"\n              ng-disabled="!id && tableConfig.selectedItems.length == 0"\n              ng-click="deletePrompt(id || tableConfig.selectedItems)">\n        <i class="fa fa-remove"></i> Delete\n      </button>\n      <span class="pull-right">&nbsp;</span>\n      <button ng-show="id"\n              class="btn btn-primary pull-right"\n              ng-click="id = undefined"><i class="fa fa-list"></i></button>\n      <span ng-show="id" class="pull-right">&nbsp;</span>\n      <a class="btn btn-default pull-right"\n         title="Create a new service"\n              href="{{baseUri}}/kubernetes/namespace/{{namespace}}/serviceCreate"><i class="fa fa-plus"></i> Create</a>\n      <span class="pull-right">&nbsp;</span>\n      <span ng-include="\'runButton.html\'"></span>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="model.fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="model.fetched">\n        <div ng-hide="model.services.length" class="align-center">\n          <p class="alert alert-info">There are no services currently available.</p>\n        </div>\n        <div ng-show="model.services.length">\n          <div ng-show="mode == \'list\'">\n            <table class="table table-condensed table-striped" ui-if="kubernetes.selectedNamespace"\n                   hawtio-simple-table="tableConfig"></table>\n          </div>\n\n          <div ng-hide="mode == \'list\'">\n            <div class="column-box"\n                 ng-repeat="service in model.serviceApps | filter:filterTemplates | orderBy:\'metadata.name\' track by $index">\n              <div class="row">\n                <div class="col-md-2">\n                  <a href="{{service.$serviceUrl}}"\n                     target="_blank"\n                     title="Click to open this app">\n                    <img style="width: 64px; height: 64px;" ng-src="{{service.$iconUrl}}">\n                  </a>\n                </div>\n                <div class="col-md-9">\n                  <a href="{{service.$serviceUrl}}"\n                     target="_blank"\n                     title="Click to open this app">\n                    <h3 ng-bind="service.metadata.name"></h3>\n                  </a>\n                </div>\n<!--\n                <div class="col-md-1">\n                  <a href="" ng-click="deleteService(service)"><i class="fa fa-remove red"></i></a>\n                </div>\n-->\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/kubernetes/html/templateDescription.html",'<div class="modal-header">\n  <h3 class="modal-title">Description</h3>\n</div>\n<div class="modal-body">\n  <div compile="text"></div>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-primary" ng-click="ok()">Close</button>\n</div>\n'),e.put("plugins/kubernetes/html/templates.html",'<div ng-controller="Kubernetes.TemplateController">\n  <script type="text/ng-template" id="truncatedDescriptionTag.html">\n    <a href="" ng-click="openFullDescription(template)">More...</a>\n  </script>\n  <div class="row filter-header">\n    <div class="col-md-12">\n      <span ng-show="!formConfig" ng-include="\'namespaceSelector.html\'"></span>\n      <span ng-show="model.templates.length && !formConfig">\n        <hawtio-filter ng-model="filterText"\n                       css-class="input-xxlarge"\n                       placeholder="Filter templates..."></hawtio-filter>\n      </span>\n\n      <button ng-show="formConfig" \n        class="btn btn-success pull-right"\n        title="Click to deploy this app" \n        ng-click="substituteAndDeployTemplate()">\n        <i class="fa fa-play-circle"></i> Run\n      </button>\n      <span class="pull-right">&nbsp;</span>\n      <button class="btn btn-info pull-right"\n              ng-click="cancel()"\n              title="Go back to app view">\n              Cancel\n      </button>\n      <span class="pull-right">&nbsp;</span>\n      <span class="pull-right">\n        Target namespace: <select ng-model="targetNamespace" ng-options="namespace for namespace in model.namespaces" title="Select the namespace to deploy these objects in">\n    </select>\n\n      </span>\n    </div>\n  </div>\n  <div class="row" ng-hide="formConfig || model.templates.length != 0">\n    <div class="col-md-12">\n      <div class="alert alert-info centered">\n        There are no templates currently available.  Add templates by dragging and dropping template files into this area.\n      </div>\n    </div>\n  </div>\n  <div class="row" ng-hide="formConfig">\n    <div class="col-md-12">\n      <div class="column-box" \n           ng-repeat="template in model.templates | filter:filterTemplates | orderBy:\'metadata.name\' track by $index">\n          <div class="row">\n            <div class="col-md-2">\n              <img style="width: 64px; height: 64px;" ng-src="{{getIconUrl(template)}}">\n            </div>\n            <div class="col-md-9">\n              <h3 ng-bind="template.metadata.name"></h3>\n            </div>\n            <div class="col-md-1">\n              <a href="" ng-click="deleteTemplate(template)"><i class="fa fa-remove red"></i></a>\n            </div>\n          </div>\n          <div class="row">\n            <div class="col-md-10">\n              <div compile="getDescription(template)"></div>\n            </div>\n            <div class="col-md-2">\n              <a href="" \n                 title="Click to deploy this app" \n                 ng-click="deployTemplate(template)">\n                <i class="fa fa-play-circle green fa-3x"></i>\n              </a>\n            </div>\n          </div>\n      </div>\n    </div>\n  </div>\n  <div class="row" ng-show="formConfig">\n    <div class="col-md-4">\n    </div>\n    <div class="col-md-4">\n      <div hawtio-form-2="formConfig" entity="entity"></div>\n    </div>\n    <div class="col-md-4">\n    </div>\n\n  </div>\n</div>\n'),
e.put("plugins/project/html/projectCreate.html",'<div ng-controller="Project.ProjectController">\n  <div class="row">\n    <div class="col-md-12">\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div ng-hide="fetched">\n        <div class="align-center">\n          <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n      <div ng-show="fetched">\n        <form>\n          <div class="form-group">\n            <label for="projectName">Project name</label>\n            <input type="text" class="form-control" id="projectName" placeholder="Enter project name" ng-model="entity.name">\n          </div>\n          <button type="submit" ng-disabled="!entity.name" ng-click="create()"\n                  class="btn btn-primary">Create Project</button>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),hawtioPluginLoader.addModule("hawtio-kubernetes-templates");var HawtioExtensionService;!function(e){e.pluginName="hawtio-extension-service",e.templatePath="plugins/hawtio-extension-service/html",e._module=angular.module(e.pluginName,[]),e._module.service("HawtioExtension",function(){this._registeredExtensions={},this.add=function(e,t){this._registeredExtensions[e]||(this._registeredExtensions[e]=[]),this._registeredExtensions[e].push(t)},this.render=function(e,t,n){var i=this._registeredExtensions[e];if(i)for(var r=0;r<i.length;r++){var a=i[r](n);if(!a)return;"string"==typeof a&&(a=document.createTextNode(a)),t.append(a)}}}),e._module.directive("hawtioExtension",["HawtioExtension",function(e){return{restrict:"EA",link:function(t,n,i){i.name&&e.render(i.name,n,t)}}}]),hawtioPluginLoader.addModule(e.pluginName)}(HawtioExtensionService||(HawtioExtensionService={}));var HawtioPreferences;!function(e){function t(e,t){var n=null;return angular.isDefined(e)&&(n=Core.parseJsonText(e,"localStorage for "+t)),n}function n(t,n,i){angular.forEach(i,function(i,r){t[r]=i.value;var a=i.converter,o=i.formatter;if(o||(o=function(e){return e}),a||(a=function(e){return e}),r in n){var s=a(n[r]);e.log.debug("from local storage, setting ",r," to ",s),t[r]=s}else{var s=i.value;e.log.debug("from default, setting ",r," to ",s),n[r]=s}var l=i.override;l||(l=function(t,a){if(t!==a){angular.isFunction(i.pre)&&i.pre(t);var s=o(t);e.log.debug("to local storage, setting ",r," to ",s),n[r]=s,angular.isFunction(i.post)&&i.post(t)}}),i.compareAsObject?t.$watch(r,l,!0):t.$watch(r,l)})}function i(e,t,n){return!t||t(e,n)}e.pluginName="hawtio-preferences",e.templatePath="plugins/preferences/html",e.log=Logger.get(e.pluginName),e.parsePreferencesJson=t,e.initPreferenceScope=n,e.isValidFunction=i}(HawtioPreferences||(HawtioPreferences={}));var HawtioPreferences;!function(e){var t=function(){function e(e){this.$rootScope=e,this.tabs={}}return e.prototype.addTab=function(e,t,n){void 0===n&&(n=void 0),n||(n=function(){return!0}),this.tabs[e]={template:t,isValid:n},this.$rootScope.$broadcast("HawtioPreferencesTabAdded"),Core.$apply(this.$rootScope)},e.prototype.getTab=function(e){return this.tabs[e]},e.prototype.getTabs=function(){var e={};return angular.forEach(this.tabs,function(t,n){t.isValid()&&(e[n]=t)}),e},e}();e.PreferencesRegistry=t}(HawtioPreferences||(HawtioPreferences={}));var HawtioPreferences;!function(e){e._module=angular.module(e.pluginName,[]),e._module.config(["$provide","$routeProvider",function(t,n){n.when("/preferences",{templateUrl:UrlHelpers.join(e.templatePath,"preferences.html"),reloadOnSearch:!1}),t.decorator("preferencesRegistry",["$delegate","$rootScope",function(t,n){return new e.PreferencesRegistry(n)}])}]),e._module.run(["$templateCache","HawtioExtension","$compile","preferencesRegistry",function(t,n,i,r){n.add("hawtio-user",function(n){var r=t.get(UrlHelpers.join(e.templatePath,"menuItem.html"));return i(r)(n)}),e.log.debug("loaded"),r.addTab("Console Logging",UrlHelpers.join(e.templatePath,"loggingPreferences.html")),r.addTab("Reset",UrlHelpers.join(e.templatePath,"resetPreferences.html"))}]),hawtioPluginLoader.addModule(e.pluginName)}(HawtioPreferences||(HawtioPreferences={}));var HawtioPreferences;!function(e){e._module.controller("HawtioPreferences.LoggingPreferences",["$scope","SchemaRegistry",function(e,t){function n(){var e=Logger.loggers,t=(_.keys(e),{});return _.forIn(e,function(e,n){t[n]=n}),t}function i(){e.childLoggers&&_.forEach(e.childLoggers,function(e){Logger.get(e.logger).setLevel(Logger[e.level])})}var r={Off:"OFF",Error:"ERROR",Warn:"WARN",Info:"INFO",Debug:"DEBUG"};t.addSchema("ChildLoggers",{properties:{logger:{type:"string","enum":n()},level:{type:"string","enum":r}}});var a={properties:{logBuffer:{type:"number","default":100,description:"The number of log statements to keep available in the logging console"},globalLogLevel:{type:"string","enum":r},childLoggers:{type:"array",items:{type:"ChildLoggers"}}}};e.$watch("globalLogLevel",function(t,n){if(t!==n)localStorage.logLevel=angular.toJson(Logger[t]),Logger.setLevel(Logger[t]),i();else{try{e.globalLogLevel=angular.fromJson(localStorage.logLevel).name}catch(r){e.globalLogLevel="INFO"}i()}}),e.$watchCollection("childLoggers",function(t,n){if(t!==n)localStorage.childLoggers=angular.toJson(t),i();else try{e.childLoggers=angular.fromJson(localStorage.childLoggers)}catch(r){e.childLoggers=[]}}),e.entity=e,e.config=a,Core.initPreferenceScope(e,localStorage,{logBuffer:{value:100,converter:parseInt,formatter:parseInt,post:function(e){window.LogBuffer=e}}})}])}(HawtioPreferences||(HawtioPreferences={}));var HawtioPreferences;!function(e){e._module.service("PreferencesLastPath",function(){return{lastPath:void 0,lastTab:void 0}}),e._module.controller("HawtioPreferences.MenuItemController",["$scope","$location","PreferencesLastPath",function(e,t,n){e.gotoPreferences=function(){n.lastPath=t.path(),n.lastSearch=t.search(),t.path("/preferences").search({}),Core.$apply(e)}}]),e._module.controller("HawtioPreferences.PreferencesController",["$scope","$location","preferencesRegistry","PreferencesLastPath",function(e,t,n,i){function r(e){return e.sort(function(e,t){return"Reset"==e?1:"Reset"==t?-1:e.localeCompare(t)})}var a=n.getTabs();e.names=r(_.keys(a)),e.$watch(function(){a=n.getTabs(),e.names=r(_.keys(a)),Core.$apply(e)}),Core.bindModelToSearchParam(e,t,"pref","pref",e.names[0]),e.setPanel=function(t){e.pref=t},e.active=function(t){return t===e.pref?"active":""},e.done=function(){t.path(i.lastPath).search(i.lastSearch),Core.$apply(e)},e.getPrefs=function(e){var t=a[e];return t?t.template:void 0}}])}(HawtioPreferences||(HawtioPreferences={}));var HawtioPreferences;!function(e){e._module.controller("HawtioPreferences.ResetPreferences",["$scope","localStorage",function(t,n){t.doReset=function(){e.log.info("Resetting");var t=function(){n.clear(),setTimeout(function(){window.location.reload()},10)};t()}}])}(HawtioPreferences||(HawtioPreferences={})),angular.module("hawtio-preferences-templates",[]).run(["$templateCache",function(e){e.put("plugins/preferences/html/loggingPreferences.html",'<div ng-controller="HawtioPreferences.LoggingPreferences">\n  <div hawtio-form-2="config" entity="entity"></div>\n</div>\n'),e.put("plugins/preferences/html/menuItem.html",'<li ng-controller="HawtioPreferences.MenuItemController">\n  <a href="" ng-click="gotoPreferences()">Preferences</a>\n</li>\n'),e.put("plugins/preferences/html/preferences.html",'<div ng-controller="HawtioPreferences.PreferencesController">\n  <div class="row">\n    <div class="col-sm-9 col-md-10 col-sm-push-3 col-md-push-2">\n      <h3>{{pref}}</h3>\n      <div ng-include="getPrefs(pref)"></div>\n    </div>\n    <div class="col-sm-3 col-md-2 col-sm-pull-9 col-md-pull-10 sidebar-pf sidebar-pf-left">\n      <div class="nav-category">\n        <ul class="nav nav-pills nav-stacked">\n          <li ng-repeat="name in names" ng-class="active(name)">\n            <a href="" ng-click="setPanel(name)">{{name}}</a>\n          </li>\n          <li class="align-center">\n            <p></p>\n            <button ng-click="done()">Done</button>\n            <p></p>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/preferences/html/resetPreferences.html",'<div ng-controller="HawtioPreferences.ResetPreferences">\n  <form class="form-horizontal">\n    <fieldset>\n      <div class="control-group">\n        <label class="control-label">\n          <strong>\n            <i class=\'yellow text-shadowed icon-warning-sign\'></i> Reset settings\n          </strong>\n        </label>\n        <div class="controls">\n          <button class="btn btn-danger" ng-click="doReset()">Reset to defaults</button>\n          <span class="help-block">Wipe settings stored by {{branding.appName}} in your browser\'s local storage</span>\n        </div>\n      </div>\n    </fieldset>\n  </form>\n</div>\n')}]),hawtioPluginLoader.addModule("hawtio-preferences-templates"),function(e,t,n){function i(e,t,n,i,r,a,o){this.divId=e,this.className=t,this.metricName=n,this.max=i,this.title=r,this.type=a,this.subTitle=o,this.getMax=function(e){return this.max},this.getMetricNode=function(e,t,n){return n[a][e+"."+t]?n[a][e+"."+t]:null},this.getSubTitle=function(){return null!=this.subTitle?this.subTitle:this.title}}function r(e,t){var n=e/t*100;return n.toFixed(0)}function a(e,t){return isNaN(t)&&(t=1),isNaN(e)?t:e.toFixed(t)}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e,t,n,r,a,o,s,l){var c=new i(e,t,n,r,a,"timers",o);return c.getMeterInfo=function(){var e=this.divId+" div.timerGraph td.meterGraph",t=new i(e,this.className,this.metricName,this.max,"Frequency","timers",null);return t.getMetricNode=function(e,t,n){return n.timers[e+"."+t]?n.timers[e+"."+t]:null},t.eventType=o,t},c.getTimerStatsDivId=function(){return"#"+this.divId+" div.timerGraph td.timerStatsGraph"},c.getTimerHistogramDivId=function(){return"#"+this.divId+" div.timerGraph td.timerHistogram"},c.durationMax=s,c.isNested=l,c}function l(e){var n=t("#"+e.divId),i="<div class='metricsWatcher counter counterGraph'><div class='heading3'>"+e.title+"</div><div class='progress'><div class='progress-bar' style='width: 0%;'></div></div></div>";n.html(i)}function c(e,n){var i=e.getMetricNode(e.className,e.metricName,n),a=r(i.count,e.getMax(n));t("#"+e.divId+" div.progress div.progress-bar").css("width",a+"%"),t("#"+e.divId+" div.progress div.progress-bar").html(i.count+"/"+e.getMax(n))}function u(e){var n=t("#"+e.divId),i=e.isNested?" nested":"",r="<div class='metricsWatcher timer timerGraph"+i+" col-md-12'><fieldset><legend>"+(e.isNested?"<div class='heading1'>":"<div class='heading1 btn-link' data-toggle='collapse' data-target='#"+e.divId+"Collapse'>")+e.title+"</div></legend><div class='timerContainer col-md-12"+(e.isNested?"":"collapse")+"' id='"+e.divId+"Collapse'><table><tr><td class='meterGraph col-md-4'></td><td class='timerStatsGraph col-md-4'></td><td class='timerHistogram col-md-4'></td></tr></table></div></fieldset>";n.html(r),b(e.getMeterInfo()),d(e),p(e)}function d(e){var n="<div class='heading3'>Duration</div><div class='timeUnit'></div><div class='metricGraph'><table class='progressTable'>"+w("Min","min")+w("Mean","mean")+w("Max","max")+w("Std&nbsp;Dev","stddev")+"</table></div>",i=t(e.getTimerStatsDivId());i.html(n)}function p(e){var n="<div class='heading3'> "+(e.isNested?"Histogram":e.getSubTitle())+"</div><p>Percentiles</p><div class='metricGraph'><table class='progressTable'>"+w("99.9%","p999")+w("99%","p99")+w("98%","p98")+w("95%","p95")+w("75%","p75")+w("50%","p50")+"</table></div>",i=t(e.getTimerHistogramDivId());i.html(n)}function h(e,t){x(e.getMeterInfo(),t),f(e,t),m(e,t)}function f(e,n){var i=e.getMetricNode(e.className,e.metricName,n);if(i){var r=t(e.getTimerStatsDivId()+" div.timeUnit");r.html(o(i.duration_units)),g(e.getTimerStatsDivId(),i,"min",e.durationMax),g(e.getTimerStatsDivId(),i,"mean",e.durationMax),g(e.getTimerStatsDivId(),i,"max",e.durationMax),g(e.getTimerStatsDivId(),i,"stddev",e.durationMax)}}function g(e,n,i,o){t(e+" tr."+i+" td.progressValue").html(a(n[i])),t(e+" tr."+i+" td.progressBar div.progress div.progress-bar").css("width",r(n[i],o)+"%")}function m(e,t){var n=e.getMetricNode(e.className,e.metricName,t);n&&(g(e.getTimerHistogramDivId(),n,"p999",e.durationMax),g(e.getTimerHistogramDivId(),n,"p99",e.durationMax),g(e.getTimerHistogramDivId(),n,"p98",e.durationMax),g(e.getTimerHistogramDivId(),n,"p95",e.durationMax),g(e.getTimerHistogramDivId(),n,"p75",e.durationMax),g(e.getTimerHistogramDivId(),n,"p50",e.durationMax))}function v(e){var n=t("#"+e.divId),i="<div class='metricsWatcher histogram histogramContainer'><div class='heading1 btn-link col-md-12' data-toggle='collapse' data-target='#"+e.divId+"Collapse'> "+(e.isNested?"Histogram":e.title)+"</div><div class='collapse' id='"+e.divId+"Collapse'><table><tr><td class='col-md-4'>Count</td><td class='col-md-4'>Min</td><td class='col-md-4'>Max<td class='col-md-4'>Mean</td></tr><tr><td class='countVal'></td><td class='minVal'></td><td class='meanVal'></td><td class='maxVal'></td></tr></table><p>Percentiles</p><table class='progressTable'>"+w("99.9%","p999")+w("99%","p99")+w("98%","p98")+w("95%","p95")+w("75%","p75")+w("50%","p50")+"</table></div></div>";n.html(i)}function y(e,n){var i=e.getMetricNode(e.className,e.metricName,n);t("#"+e.divId+" td.countVal").html(a(i.count,0)),t("#"+e.divId+" td.minVal").html(a(i.min,0)),t("#"+e.divId+" td.maxVal").html(a(i.max,0)),t("#"+e.divId+" td.meanVal").html(a(i.mean,0)),C(e,i,"p999","p999",e.max),C(e,i,"p99","p99",e.max),C(e,i,"p98","p98",e.max),C(e,i,"p95","p95",e.max),C(e,i,"p75","p75",e.max),C(e,i,"p50","p50",e.max)}function b(e){var n=t("#"+e.divId),i="<div class='metricsWatcher metric metricGraph'><div class='heading3'>"+e.title+"</div><div class='counterVal'></div><table class='progressTable'>"+w("1&nbsp;min","onemin")+w("5&nbsp;min","fivemin")+w("15&nbsp;min","fifteenmin")+w("Mean","mean")+"</table></div>";n.html(i)}function w(e,t){return"<tr class='"+t+"'><td class='progressLabel'>"+e+"</td><td class='progressBar'><div class='progress'><div class='progress-bar' style='width: 0%;'></div></div></td><td class='progressValue'>0</td></tr>"}function x(e,t){var n=e.getMetricNode(e.className,e.metricName,t);n&&k(e,n)}function k(e,n){var i=t("#"+e.divId+" div.counterVal");i.html(n.rate_units+" ("+n.count+" total)");var r=Math.max(n.mean_rate,n.m1_rate,n.m5_rate,n.m15_rate);C(e,n,"mean_rate","mean",r),C(e,n,"m1_rate","onemin",r),C(e,n,"m5_rate","fivemin",r),C(e,n,"m15_rate","fifteenmin",r)}function C(e,t,n,i){C(e,t,n,i,e.max)}function C(e,n,i,o,s){t("#"+e.divId+" tr."+o+" td.progressValue").html(a(n[i])),t("#"+e.divId+" tr."+o+" td.progressBar div.progress div.progress-bar").css("width",r(n[i],s)+"%")}function S(e){var n=t("#"+e.divId),i="<div class='metricsWatcher metric metricGraph'><div class='heading3'>"+e.title+"</span><div class='gaugeDataVal'></div></div>";n.html(i)}function _(e,t){var n=e.getMetricNode(e.className,e.metricName,t);n&&T(e,n)}function T(e,n){var i=t("#"+e.divId+" div.gaugeDataVal");i.html(n.value)}function $(e,n,i){var r=t("#"+e),a="<div class='metricsWatcher metric metricGraph nested'><fieldset><legend><div class='heading1'>"+n+"</div></legend><div class='gaugeTableContainer'><table class='gaugeTable'></table></div></fieldset></div>";r.html(a)}function A(e,n,i){for(var r=t("#"+e+" table"),a="",o=n.length,s=0;o>s;s++){var l=n[s];a+="<tr><td><h5>"+l.title+"</h5></td><td><h4>"+l.getMetricNode(l.className,l.metricName,i).value+"</h4></td></tr>"}r.html(a)}function E(e){var n=t("#"+e.divId),i="<div class='metricsWatcher cache cacheGraph col-md-12'><fieldset><legend><div class='heading1'>"+e.title+"</div></legend><div class='cacheContainer col-md-12'>	<div class='row'>		<div class='col-md-3'><div id='"+e.divId+"Statistics'></div></div>		<div class='col-md-9'>			<div id='"+e.divId+"gettimer'></div>			<div id='"+e.divId+"puttimer'></div>		</div>	</div></div></fieldset></div>";n.html(i);for(var r=e.components.gauges.length,a=0;r>a;a++)S(e.components.gauges[a]);u(e.getTimer),u(e.putTimer),$(e.divId+"Statistics","Statistics",e.components.gauges)}function P(e,n){for(var i=e.components.gauges.length,r=0;i>r;r++){var a=e.components.gauges[r],o=a.getMetricNode(e.className,a.metricName,n);if(o){var s=t("#"+a.divId+" div.metricGraph div.gaugeDataVal");s.html(o.value)}}h(e.getTimer,n),h(e.putTimer,n),A(e.divId+"Statistics",e.components.gauges,n)}function I(e){var n=t("#"+e.divId),i="<div class='metricsWatcher jvm metricGraph col-md-12'><fieldset><legend><div  class='heading1 btn-link' data-toggle='collapse' data-target='#"+e.divId+"Collapse'>"+e.title+"</div></legend><div class='jvmContainer col-md-12 collapse' id='"+e.divId+"Collapse'>	<div id='"+e.divId+"Vm'></div></div></fieldset></div>";n.html(i)}function D(e,n){var i=t("#"+e.divId+"Vm"),r=n.gauges,o="<div class='row'><div class='col-md-3'><table class='jvmTable'><caption>Memory</caption><tr><td><h5>Total Init</h5></td><td>"+r["jvm.memory.total.init"].value+"</td></tr><tr><td><h5>Total Used</h5></td><td>"+r["jvm.memory.total.used"].value+"</td></tr><tr><td><h5>Total Max</h5></td><td>"+r["jvm.memory.total.max"].value+"</td></tr><tr><td><h5>Total Committed</h5></td><td>"+r["jvm.memory.total.committed"].value+"</td></tr><tr><td><h5>Heap Init</h5></td><td>"+r["jvm.memory.heap.init"].value+"</td></tr><tr><td><h5>Heap Used</h5></td><td>"+r["jvm.memory.heap.used"].value+"</td></tr><tr><td><h5>Heap Max</h5></td><td>"+r["jvm.memory.heap.max"].value+"</td></tr><tr><td><h5>Heap Committed</h5></td><td>"+r["jvm.memory.heap.committed"].value+"</td></tr><tr><td><h5>Non Heap Init</h5></td><td>"+r["jvm.memory.non-heap.init"].value+"</td></tr><tr><td><h5>Non Heap Used</h5></td><td>"+r["jvm.memory.non-heap.used"].value+"</td></tr><tr><td><h5>Non Heap Max</h5></td><td>"+r["jvm.memory.non-heap.max"].value+"</td></tr><tr><td><h5>Non Heap Committed</h5></td><td>"+r["jvm.memory.non-heap.committed"].value+"</td></tr></table></div><div class='col-md-3'><table class='jvmTable'><caption>Memory Usage</caption><tr><td><h5>Heap Usage</h5></td><td>"+(100*r["jvm.memory.heap.usage"].value).toFixed(2)+"</td></tr><tr><td><h5>Non Heap Usage</h5></td><td>"+(100*r["jvm.memory.non-heap.usage"].value).toFixed(2)+"</td></tr>"+(r["jvm.memory.pools.JIT-code-cache.usage"]?"<tr><td><h5>JIT Code Cache Usage</h5></td><td>"+(100*r["jvm.memory.pools.JIT-code-cache.usage"].value).toFixed(2)+"</td></tr>":"")+(r["jvm.memory.pools.Code-Cache.usage"]?"<tr><td><h5>JIT Code Cache Usage</h5></td><td>"+(100*r["jvm.memory.pools.Code-Cache.usage"].value).toFixed(2)+"</td></tr>":"")+(r["jvm.memory.pools.JIT-data-cache.usage"]?"<tr><td><h5>JIT Data Cache Usage</h5></td><td>"+(100*r["jvm.memory.pools.JIT-data-cache.usage"].value).toFixed(2)+"</td></tr>":"")+(r["jvm.memory.pools.Java-heap.usage"]?"<tr><td><h5>Java Heap Usage</h5></td><td>"+(100*r["jvm.memory.pools.Java-heap.usage"].value).toFixed(2)+"</td></tr>":"")+(r["jvm.memory.pools.class-storage.usage"]?"<tr><td><h5>Class Storage Usage</h5></td><td>"+(100*r["jvm.memory.pools.class-storage.usage"].value).toFixed(2)+"</td></tr>":"")+(r["jvm.memory.pools.Perm-Gen.usage"]?"<tr><td><h5>Perm Gen Usage</h5></td><td>"+(100*r["jvm.memory.pools.Perm-Gen.usage"].value).toFixed(2)+"</td></tr>":"")+(r["jvm.memory.pools.Tenured-Gen.usage"]?"<tr><td><h5>Tenured Gen Usage</h5></td><td>"+(100*r["jvm.memory.pools.Tenured-Gen.usage"].value).toFixed(2)+"</td></tr>":"")+(r["jvm.memory.pools.miscellaneous-non-heap-storage.usage"]?"<tr><td><h5>Misc Non Heap Storage Usage</h5></td><td>"+(100*r["jvm.memory.pools.miscellaneous-non-heap-storage.usage"].value).toFixed(2)+"</td></tr>":"")+(r["jvm.memory.pools.Survivor-Space.usage"]?"<tr><td><h5>Survivor Space Usage</h5></td><td>"+(100*r["jvm.memory.pools.Survivor-Space.usage"].value).toFixed(2)+"</td></tr>":"")+(r["jvm.memory.pools.Eden-Space.usage"]?"<tr><td><h5>Eden Space Usage</h5></td><td>"+(100*r["jvm.memory.pools.Eden-Space.usage"].value).toFixed(2)+"</td></tr>":"")+"</table></div><div class='col-md-3'><table class='jvmTable'><caption>Garbage Collection</caption><tr><td><h5>PS Mark Sweep Runs</h5></td><td>"+r["jvm.gc.MarkSweepCompact.count"].value+"</td></tr><tr><td><h5>PS Mark Sweep Time</h5></td><td>"+r["jvm.gc.MarkSweepCompact.time"].value+"</td></tr><tr><td><h5>GC Copy Runs</h5></td><td>"+r["jvm.gc.Copy.count"].value+"</td></tr><tr><td><h5>GC Copy Time</h5></td><td>"+r["jvm.gc.Copy.time"].value+"</td></tr></table></div><div class='col-md-3'><table class='jvmTable'><caption>Threads</caption><tr><td><h5>FD Usage</h5></td><td>"+a(r["jvm.fd.usage"].value,2)+"</td></tr><tr><td><h5>Daemon Threads</h5></td><td>"+r["jvm.thread-states.daemon.count"].value+"</td></tr><tr><td><h5>Threads</h5></td><td>"+r["jvm.thread-states.count"].value+"</td></tr><tr><td><h5>Deadlocks</h5></td><td>"+r["jvm.thread-states.deadlocks"].value+"</td></tr></table><table class='jvmTable'><caption>Thread States</caption><tr><td><h5>Terminated</h5></td><td>"+r["jvm.thread-states.terminated.count"].value+"</td></tr><tr><td><h5>Timed Waiting</h5></td><td>"+r["jvm.thread-states.timed_waiting.count"].value+"</td></tr><tr><td><h5>Blocked</h5></td><td>"+r["jvm.thread-states.blocked.count"].value+"</td></tr><tr><td><h5>Waiting</h5></td><td>"+r["jvm.thread-states.waiting.count"].value+"</td></tr><tr><td><h5>Runnable</h5></td><td>"+r["jvm.thread-states.runnable.count"].value+"</td></tr><tr><td><h5>New</h5></td><td>"+r["jvm.thread-states.new.count"].value+"</td></tr></table></div></div>";i.html(o)}function M(e){var n=t("#"+e.divId),i="<div class='metricsWatcher web metricGraph col-md-12'><fieldset><legend><div class='heading1 btn-link' data-toggle='collapse' data-target='#"+e.divId+"Collapse'>"+e.title+"</div></legend><div class='webContainer col-md-12' id='"+e.divId+"Collapse'>	<div id='"+e.divId+"Web'></div><table><tr><td colspan='4' class='requestsGraph col-md-12'></td></tr><tr><td class='activeRequestsGraph col-md-3'></td><td class='responseCodesOkGraph col-md-3'></td><td class='responseCodesCreatedGraph col-md-3'></td><td class='responseCodesOtherGraph col-md-3'></td></tr><tr><td class='responseCodesBadRequestGraph col-md-3'></td><td class='responseCodesNoContentGraph col-md-3'></td><td class='responseCodesNotFoundGraph col-md-3'></td><td class='responseCodesServerErrorGraph col-md-3'></td></tr></table></div></fieldset></div>";n.html(i),u(e.components.requestsInfo),l(e.components.activeRequestsInfo);for(var r=e.components.meters.length,a=0;r>a;a++)b(e.components.meters[a])}function N(e,t){h(e.components.requestsInfo,t),c(e.components.activeRequestsInfo,t);for(var n=e.components.meters.length,i=0;n>i;i++)x(e.components.meters[i],t)}function j(e){var n=t("#"+e.divId),i="<div class='metricsWatcher log4j metricGraph col-md-12'><fieldset><legend><div class='heading1 btn-link' data-toggle='collapse' data-target='#"+e.divId+"Collapse'>"+e.title+"</div></legend><div class='log4jContainer col-md-12' id='"+e.divId+"Collapse'>	<div id='"+e.divId+"Log4j'></div><table><tr><td colspan='4' class='col-md-12'></td></tr><tr><td class='all col-md-3'></td><td class='fatal col-md-3'></td><td class='error col-md-3'></td><td class='warn col-md-3'></td></tr><tr><td class='info col-md-3'></td><td class='debug col-md-3'></td><td class='trace col-md-3'></td></tr></table></div></fieldset></div>";n.html(i);for(var r=e.components.meters.length,a=0;r>a;a++)b(e.components.meters[a])}function O(e,t){for(var n=e.components.meters.length,i=0;n>i;i++)x(e.components.meters[i],t)}e.addGauge=function(e,t,n,r){var a=new i(e,t,n,null,r,"gauges",null);L.push(a)},e.addMeter=function(e,t,r,a,o,s){s==n&&(s="Calls");var l=new i(e,t,r,a,o,"meters",s);l.eventType=s,L.push(l)},e.addCounter=function(e,t,n,r,a){var o=new i(e,t,n,r,a,"counters",null);L.push(o)},e.addHistogram=function(e,t,n,r,a){var o=new i(e,t,n,r?r:1,a,"histograms",null);L.push(o)},e.addLinkedCounter=function(e,t,n,r,a,o){var s=new i(e,t,n,null,o,"counters",null);s||(s=new i(e,t,n,null,o,"timers",null)),s.maxClassName=r,s.maxMetricName=a,s.getMax=function(e){var t=this.getMetricNode(this.maxClassName,this.maxMetricName,e);return t.count},s.getMetricNode=function(e,t,n){var i=n.counters[e+"."+t]?n.counters[e+"."+t]:null;return i?i:n.timers[e+"."+t]?n.timers[e+"."+t]:null},L.push(s)},e.addTimer=function(e,t,n,i,r,a,o){var l=s(e,t,n,i,r,a,o,!1);L.push(l)},e.addCache=function(e,t,n){var r=new i(e,t,null,null,n,"caches",null);r.components={gauges:[new i(null,t,"hits",null,"Hits","gauges",null),new i(null,t,"misses",null,"Misses","gauges",null),new i(null,t,"objects",null,"Objects","gauges",null),new i(null,t,"eviction-count",null,"Eviction Count","gauges",null),new i(null,t,"in-memory-hits",null,"In Memory Hits","gauges",null),new i(null,t,"in-memory-misses",null,"In Memory Misses","gauges",null),new i(null,t,"in-memory-objects",null,"In Memory Objects","gauges",null),new i(null,t,"off-heap-hits",null,"Off Heap Hits","gauges",null),new i(null,t,"off-heap-misses",null,"Off Heap Misses","gauges",null),new i(null,t,"off-heap-objects",null,"Off Heap Objects","gauges",null),new i(null,t,"on-disk-hits",null,"On Disk Hits","gauges",null),new i(null,t,"on-disk-misses",null,"On Disk Misses","gauges",null),new i(null,t,"on-disk-objects",null,"On Disk Objects","gauges",null),new i(null,t,"mean-get-time",null,"Mean Get Time","gauges",null),new i(null,t,"mean-search-time",null,"Mean Search Time","gauges",null),new i(null,t,"searches-per-second",null,"Searches Per Sec","gauges",null),new i(null,t,"writer-queue-size",null,"Writer Queue Size","gauges",null),new i(null,t,"accuracy",null,"Accuracy","gauges",null)]},r.getTimer=s(e+"gettimer",t,"gets",5,"Get","get",1,!0),r.putTimer=s(e+"puttimer",t,"puts",5,"Put","put",1,!0),L.push(r)},e.addJvm=function(e,t,n){var r=new i(e,t,null,null,n,"jvms",null);L.push(r)},e.addWeb=function(e,t,n){var r=new i(e,t,null,null,n,"webs",null);r.components={meters:[new i(e+" td.responseCodesOkGraph",t,"responseCodes.ok",10,"OK Responses","meters",null),new i(e+" td.responseCodesBadRequestGraph",t,"responseCodes.badRequest",10,"Bad Requests","meters",null),new i(e+" td.responseCodesCreatedGraph",t,"responseCodes.created",10,"Created Responses","meters",null),new i(e+" td.responseCodesNoContentGraph",t,"responseCodes.noContent",10,"No Content Responses","meters",null),new i(e+" td.responseCodesNotFoundGraph",t,"responseCodes.notFound",10,"Not Found Responses","meters",null),new i(e+" td.responseCodesOtherGraph",t,"responseCodes.other",10,"Other Responses","meters",null),new i(e+" td.responseCodesServerErrorGraph",t,"responseCodes.serverError",10,"Server Error Responses","meters",null)],activeRequestsInfo:new i(e+" td.activeRequestsGraph",t,"activeRequests",10,"Active Requests","counters",null),requestsInfo:s(e+" td.requestsGraph",t,"requests",100,"Requests","requests",100,!0)},L.push(r)},e.addLog4j=function(e,t,n){var r=new i(e,t,null,null,n,"log4js",null);r.components={meters:[new i(e+" td.all",t,"all",100,"all","meters",null),new i(e+" td.fatal",t,"fatal",100,"fatal","meters",null),new i(e+" td.error",t,"error",100,"error","meters",null),new i(e+" td.warn",t,"warn",100,"warn","meters",null),new i(e+" td.info",t,"info",100,"info","meters",null),new i(e+" td.debug",t,"debug",100,"debug","meters",null),new i(e+" td.trace",t,"trace",100,"trace","meters",null)]},L.push(r)},e.initGraphs=function(){for(var e=0;e<L.length;e++)"gauges"==L[e].type?S(L[e]):"meters"==L[e].type?b(L[e]):"counters"==L[e].type||"linkedTimerCounters"==L[e].type?l(L[e]):"histograms"==L[e].type?v(L[e]):"timers"==L[e].type?u(L[e]):"caches"==L[e].type?E(L[e]):"jvms"==L[e].type?I(L[e]):"webs"==L[e].type?M(L[e]):"log4js"==L[e].type?j(L[e]):alert("Unknown meter info type: "+L[e].type)},e.updateGraphs=function(e){for(var t=0;t<L.length;t++)"gauges"==L[t].type?_(L[t],e):"meters"==L[t].type?x(L[t],e):"counters"==L[t].type||"linkedTimerCounters"==L[t].type?c(L[t],e):"histograms"==L[t].type?y(L[t],e):"timers"==L[t].type?h(L[t],e):"caches"==L[t].type?P(L[t],e):"jvms"==L[t].type?D(L[t],e):"webs"==L[t].type?N(L[t],e):"log4js"==L[t].type?O(L[t],e):alert("Unknown meter info type: "+L[t].type)};var L=[]}(window.metricsWatcher=window.metricsWatcher||{},jQuery);var _apacheCamelModelVersion="2.15.2",_apacheCamelModel={definitions:{expression:{type:"object",title:"expression",group:"language",icon:"generic24.png",description:"Expression in the choose language",properties:{expression:{kind:"element",type:"string",title:"Expression",description:"The expression",required:!0},language:{kind:"element",type:"string",title:"Expression",description:"The chosen language",required:!0,"enum":["constant","el","exchangeProperty","groovy","header","javaScript","jsonpath","jxpath","language","method","mvel","ognl","php","python","ref","ruby","simple","spel","sql","terser","tokenize","vtdxml","xpath","xquery","xtokenize"]}}},aggregate:{type:"object",title:"Aggregate",group:"eip,routing",icon:"aggregate24.png",description:"Aggregates many messages into a single message",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{correlationExpression:{kind:"expression",type:"object",description:"The expression used to calculate the correlation key to use for aggregation. The Exchange which has the same correlation key is aggregated together. If the correlation key could not be evaluated an Exception is thrown. You can disable this by using the ignoreBadCorrelationKeys option.",title:"Correlation Expression",required:!0,deprecated:!1},completionPredicate:{kind:"expression",type:"object",description:"Sets the predicate used to determine if the aggregation is completed",title:"Completion Predicate",required:!1,deprecated:!1},completionTimeoutExpression:{kind:"expression",type:"object",description:"Sets the completion timeout which would cause the aggregate to consider the group as complete and send out the aggregated exchange.",title:"Completion Timeout",required:!1,deprecated:!1},completionSizeExpression:{kind:"expression",type:"object",description:"Sets the completion size which is the number of aggregated exchanges which would cause the aggregate to consider the group as complete and send out the aggregated exchange.",title:"Completion Size",required:!1,deprecated:!1},optimisticLockRetryPolicy:{kind:"element",type:"object",description:"Allows to configure retry settings when using optimistic locking.",title:"Optimistic Lock Retry Policy",required:!1,deprecated:!1},parallelProcessing:{kind:"attribute",type:"boolean",defaultValue:"false",description:"When aggregated are completed they are being send out of the aggregator. This option indicates whether or not Camel should use a thread pool with multiple threads for concurrency. If no custom thread pool has been specified then Camel creates a default pool with 10 concurrent threads.",title:"Parallel Processing",required:!1,deprecated:!1},optimisticLocking:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Turns on using optimistic locking which requires the aggregationRepository being used is supporting this by implementing org.apache.camel.spi.OptimisticLockingAggregationRepository.",title:"Optimistic Locking",required:!1,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"If using parallelProcessing you can specify a custom thread pool to be used. In fact also if you are not using parallelProcessing this custom thread pool is used to send out aggregated exchanges as well.",title:"Executor Service Ref",required:!1,deprecated:!1},timeoutCheckerExecutorServiceRef:{kind:"attribute",type:"string",description:"If using either of the completionTimeout completionTimeoutExpression or completionInterval options a background thread is created to check for the completion for every aggregator. Set this option to provide a custom thread pool to be used rather than creating a new thread for every aggregator.",title:"Timeout Checker Executor Service Ref",required:!1,deprecated:!1},aggregationRepositoryRef:{kind:"attribute",type:"string",description:"Sets the custom aggregate repository to use Will by default use org.apache.camel.processor.aggregate.MemoryAggregationRepository",
title:"Aggregation Repository Ref",required:!1,deprecated:!1},strategyRef:{kind:"attribute",type:"string",description:"A reference to lookup the AggregationStrategy in the Registry. Configuring an AggregationStrategy is required and is used to merge the incoming Exchange with the existing already merged exchanges. At first call the oldExchange parameter is null. On subsequent invocations the oldExchange contains the merged exchanges and newExchange is of course the new incoming Exchange.",title:"Strategy Ref",required:!1,deprecated:!1},strategyMethodName:{kind:"attribute",type:"string",description:"This option can be used to explicit declare the method name to use when using POJOs as the AggregationStrategy.",title:"Strategy Method Name",required:!1,deprecated:!1},strategyMethodAllowNull:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used for the very first aggregation. If this option is true then null values is used as the oldExchange (at the very first aggregation) when using POJOs as the AggregationStrategy.",title:"Strategy Method Allow Null",required:!1,deprecated:!1},completionSize:{kind:"attribute",type:"integer",description:"Sets the completion size which is the number of aggregated exchanges which would cause the aggregate to consider the group as complete and send out the aggregated exchange.",title:"Completion Size",required:!1,deprecated:!1},completionInterval:{kind:"attribute",type:"integer",description:"Sets the completion interval which would cause the aggregate to consider the group as complete and send out the aggregated exchange.",title:"Completion Interval",required:!1,deprecated:!1},completionTimeout:{kind:"attribute",type:"integer",description:"Sets the completion timeout which would cause the aggregate to consider the group as complete and send out the aggregated exchange.",title:"Completion Timeout",required:!1,deprecated:!1},completionFromBatchConsumer:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Enables the batch completion mode where we aggregate from a org.apache.camel.BatchConsumer and aggregate the total number of exchanges the org.apache.camel.BatchConsumer has reported as total by checking the exchange property link org.apache.camel.ExchangeBATCH_COMPLETE when its complete.",title:"Completion From Batch Consumer",required:!1,deprecated:!1},groupExchanges:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Enables grouped exchanges so the aggregator will group all aggregated exchanges into a single combined Exchange holding all the aggregated exchanges in a java.util.List.",title:"Group Exchanges",required:!1,deprecated:!0},eagerCheckCompletion:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Use eager completion checking which means that the completionPredicate will use the incoming Exchange. At opposed to without eager completion checking the completionPredicate will use the aggregated Exchange.",title:"Eager Check Completion",required:!1,deprecated:!1},ignoreInvalidCorrelationKeys:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If a correlation key cannot be successfully evaluated it will be ignored by logging a DEBUG and then just ignore the incoming Exchange.",title:"Ignore Invalid Correlation Keys",required:!1,deprecated:!1},closeCorrelationKeyOnCompletion:{kind:"attribute",type:"integer",description:"Closes a correlation key when its complete. Any late received exchanges which has a correlation key that has been closed it will be defined and a org.apache.camel.processor.aggregate.ClosedCorrelationKeyException is thrown.",title:"Close Correlation Key On Completion",required:!1,deprecated:!1},discardOnCompletionTimeout:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Discards the aggregated message on completion timeout. This means on timeout the aggregated message is dropped and not sent out of the aggregator.",title:"Discard On Completion Timeout",required:!1,deprecated:!1},forceCompletionOnStop:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Indicates to complete all current aggregated exchanges when the context is stopped",title:"Force Completion On Stop",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},aop:{type:"object",title:"Aop",group:"configuration",icon:"generic24.png",description:"Does processing before and/or after the route is completed",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{beforeUri:{kind:"attribute",type:"string",description:"Endpoint to call in AOP before.",title:"Before Uri",required:!1,deprecated:!1},afterUri:{kind:"attribute",type:"string",description:"Endpoint to call in AOP after. The difference between after and afterFinally is that afterFinally is invoked from a finally block so it will always be invoked no matter what eg also in case of an exception occur.",title:"After Uri",required:!1,deprecated:!1},afterFinallyUri:{kind:"attribute",type:"string",description:"Endpoint to call in AOP after finally. The difference between after and afterFinally is that afterFinally is invoked from a finally block so it will always be invoked no matter what eg also in case of an exception occur.",title:"After Finally Uri",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},"batch-config":{type:"object",title:"Batch-config",group:"configuration,resequence",icon:"generic24.png",description:"Configures batch-processing resequence eip.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{batchSize:{kind:"attribute",type:"integer",defaultValue:"100",description:"Sets the size of the batch to be re-ordered. The default size is 100.",title:"Batch Size",required:!1,deprecated:!1},batchTimeout:{kind:"attribute",type:"integer",defaultValue:"1000",description:"Sets the timeout for collecting elements to be re-ordered. The default timeout is 1000 msec.",title:"Batch Timeout",required:!1,deprecated:!1},allowDuplicates:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to allow duplicates.",title:"Allow Duplicates",required:!1,deprecated:!1},reverse:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to reverse the ordering.",title:"Reverse",required:!1,deprecated:!1},ignoreInvalidExchanges:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore invalid exchanges",title:"Ignore Invalid Exchanges",required:!1,deprecated:!1}}},bean:{type:"object",title:"Bean",group:"eip,endpoint",icon:"bean24.png",description:"Calls a java bean",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{ref:{kind:"attribute",type:"string",description:"Sets a reference to a bean to use",title:"Ref",required:!1,deprecated:!1},method:{kind:"attribute",type:"string",description:"Sets the method name on the bean to use",title:"Method",required:!1,deprecated:!1},beanType:{kind:"attribute",type:"string",description:"Sets the Class of the bean",title:"Bean Type",required:!1,deprecated:!1},cache:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Caches the bean lookup to avoid lookup up bean on every usage.",title:"Cache",required:!1,deprecated:!1},multiParameterArray:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the message body is an array type.",title:"Multi Parameter Array",required:!1,deprecated:!0},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},choice:{type:"object",title:"Choice",group:"eip,routing",icon:"choice24.png",description:"Routes messages based on a series of predicates",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{whenClauses:{kind:"element",type:"array",description:"Sets the when clauses",title:"When Clauses",required:!1,deprecated:!1},otherwise:{kind:"element",type:"object",description:"Sets the otherwise node",title:"Otherwise",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},circuitBreaker:{type:"object",title:"Circuit Breaker",group:"configuration,loadbalance",icon:"generic24.png",description:"Circuit break load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{exception:{kind:"element",type:"array",description:"A list of class names for specific exceptions to monitor. If no exceptions is configured then all exceptions is monitored",title:"Exception",required:!1,deprecated:!1},halfOpenAfter:{kind:"attribute",type:"integer",description:"The timeout in millis to use as threshold to move state from closed to half-open or open state",title:"Half Open After",required:!1,deprecated:!1},threshold:{kind:"attribute",type:"integer",description:"Number of previous failed messages to use as threshold to move state from closed to half-open or open state",title:"Threshold",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},contextScan:{type:"object",title:"Context Scan",group:"configuration",icon:"generic24.png",description:"Scans for Java org.apache.camel.builder.RouteBuilder instances in the context org.apache.camel.spi.Registry.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{excludes:{kind:"element",type:"array",description:"Exclude finding route builder from these java package names.",title:"Excludes",required:!1,deprecated:!1},includes:{kind:"element",type:"array",description:"Include finding route builder from these java package names.",title:"Includes",required:!1,deprecated:!1}}},convertBodyTo:{type:"object",title:"Convert Body To",group:"eip,transformation",icon:"convertBodyTo24.png",description:"Converts the message body to another type",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{type:{kind:"attribute",type:"string",description:"The java type to convert to",title:"Type",required:!0,deprecated:!1},charset:{kind:"attribute",type:"string",description:"To use a specific charset when converting",title:"Charset",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},customLoadBalancer:{type:"object",title:"Custom Load Balancer",group:"configuration,loadbalance",icon:"generic24.png",description:"Custom load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{ref:{kind:"attribute",type:"string",description:"Refers to the custom load balancer to lookup from the registry",title:"Ref",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},delay:{type:"object",title:"Delay",group:"eip,routing",icon:"generic24.png",description:"Delays processing for a specified length of time",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{executorServiceRef:{kind:"attribute",type:"string",description:"Refers to a custom Thread Pool if asyncDelay has been enabled.",title:"Executor Service Ref",required:!1,deprecated:!1},asyncDelayed:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Enables asynchronous delay which means the thread will noy block while delaying.",title:"Async Delayed",required:!1,deprecated:!1},callerRunsWhenRejected:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the caller should run the task when it was rejected by the thread pool. Is by default true",title:"Caller Runs When Rejected",required:!1,deprecated:!1},expression:{kind:"expression",type:"object",description:"Expression to define how long time to wait (in millis)",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},description:{type:"object",title:"Description",group:"configuration",icon:"generic24.png",description:"To provide comments about the node.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{lang:{kind:"attribute",type:"string",description:"Language such as en for english.",title:"Lang",required:!1,deprecated:!1},layoutX:{kind:"attribute",type:"number",description:"Layout position X",title:"Layout X",required:!1,deprecated:!0},layoutY:{kind:"attribute",type:"number",description:"Layout position Y",title:"Layout Y",required:!1,deprecated:!0},layoutWidth:{kind:"attribute",type:"number",description:"Layout width",title:"Layout Width",required:!1,deprecated:!0},layoutHeight:{kind:"attribute",type:"number",description:"Layout height",title:"Layout Height",required:!1,deprecated:!0},text:{kind:"value",type:"string",description:"The description as human readable text",title:"Text",required:!0,deprecated:!1}}},doCatch:{type:"object",title:"Do Catch",group:"error",icon:"generic24.png",description:"Catches exceptions as part of a try catch finally block",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{exception:{kind:"element",type:"array",description:"The exception(s) to catch.",title:"Exception",required:!1,deprecated:!1},onWhen:{kind:"element",type:"object",description:"Sets an additional predicate that should be true before the onCatch is triggered. To be used for fine grained controlling whether a thrown exception should be intercepted by this exception type or not.",title:"On When",required:!1,deprecated:!1},handled:{kind:"expression",type:"object",description:"Sets whether the exchange should be marked as handled or not.",title:"Handled",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},doFinally:{type:"object",title:"Do Finally",group:"error",icon:"generic24.png",description:"Path traversed when a try catch finally block exits",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},doTry:{type:"object",title:"Do Try",group:"error",icon:"generic24.png",description:"Marks the beginning of a try catch finally block",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},dynamicRouter:{type:"object",title:"Dynamic Router",group:"eip,endpoint,routing",icon:"dynamicRouter25.png",description:"Routes messages based on dynamic rules",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{uriDelimiter:{kind:"attribute",type:"string",defaultValue:",",description:"Sets the uri delimiter to use",title:"Uri Delimiter",required:!1,deprecated:!1},ignoreInvalidEndpoints:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Ignore the invalidate endpoint exception when try to create a producer with that endpoint",title:"Ignore Invalid Endpoints",required:!1,deprecated:!1},cacheSize:{kind:"attribute",type:"integer",description:"Sets the maximum size used by the org.apache.camel.impl.ProducerCache which is used to cache and reuse producers when using this recipient list when uris are reused.",title:"Cache Size",required:!1,deprecated:!1},expression:{kind:"expression",type:"object",description:"Expression to call that returns the endpoint(s) to route to in the dynamic routing. Important: The expression will be called in a while loop fashion until the expression returns null which means the dynamic router is finished.",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},enrich:{type:"object",title:"Enrich",group:"eip,transformation",icon:"enrich24.png",description:"Enriches a message with data from a secondary resource",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{uri:{kind:"attribute",type:"string",description:"The endpoint uri for the external service to enrich from. You must use either uri or ref.",title:"Uri",required:!1,deprecated:!1},ref:{kind:"attribute",type:"string",description:"Refers to the endpoint for the external service to enrich from. You must use either uri or ref.",title:"Ref",required:!1,deprecated:!0},strategyRef:{kind:"attribute",type:"string",description:"Refers to an AggregationStrategy to be used to merge the reply from the external service into a single outgoing message. By default Camel will use the reply from the external service as outgoing message.",title:"Strategy Ref",required:!1,deprecated:!1},strategyMethodName:{kind:"attribute",type:"string",description:"This option can be used to explicit declare the method name to use when using POJOs as the AggregationStrategy.",title:"Strategy Method Name",required:!1,deprecated:!1},strategyMethodAllowNull:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used if there was no data to enrich. If this option is true then null values is used as the oldExchange (when no data to enrich) when using POJOs as the AggregationStrategy.",title:"Strategy Method Allow Null",required:!1,deprecated:!1},aggregateOnException:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used if there was an exception thrown while trying to retrieve the data to enrich from the resource. Setting this option to true allows end users to control what to do if there was an exception in the aggregate method. For example to suppress the exception or set a custom message body etc.",title:"Aggregate On Exception",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},failover:{type:"object",title:"Failover",group:"configuration,loadbalance",icon:"generic24.png",description:"Failover load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{exception:{kind:"element",type:"array",description:"A list of class names for specific exceptions to monitor. If no exceptions is configured then all exceptions is monitored",title:"Exception",required:!1,deprecated:!1},roundRobin:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the failover load balancer should operate in round robin mode or not. If not then it will always start from the first endpoint when a new message is to be processed. In other words it restart from the top for every message. If round robin is enabled then it keeps state and will continue with the next endpoint in a round robin fashion. When using round robin it will not stick to last known good endpoint it will always pick the next endpoint to use.",title:"Round Robin",required:!1,deprecated:!1},maximumFailoverAttempts:{kind:"attribute",type:"integer",defaultValue:"-1",description:"A value to indicate after X failover attempts we should exhaust (give up). Use -1 to indicate never give up and continuously try to failover. Use 0 to never failover. And use e.g. 3 to failover at most 3 times before giving up. his option can be used whether or not roundRobin is enabled or not.",title:"Maximum Failover Attempts",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},filter:{type:"object",title:"Filter",group:"eip,routing",icon:"filter24.png",description:"Filter out messages based using a predicate",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{expression:{kind:"expression",type:"object",description:"Expression to determine if the message should be filtered or not. If the expression returns an empty value or false then the message is filtered (dropped) otherwise the message is continued being routed.",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},from:{type:"object",title:"From",group:"eip,endpoint,routing",icon:"endpoint24.png",description:"Act as a message source as input to a route",acceptInput:"false",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{uri:{kind:"attribute",type:"string",description:"Sets the URI of the endpoint to use",title:"Uri",required:!1,deprecated:!1},ref:{kind:"attribute",type:"string",description:"Sets the name of the endpoint within the registry (such as the Spring ApplicationContext or JNDI) to use",title:"Ref",required:!1,deprecated:!0},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},idempotentConsumer:{type:"object",title:"Idempotent Consumer",group:"eip,routing",icon:"generic24.png",description:"Filters out duplicate messages",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{messageIdRepositoryRef:{kind:"attribute",type:"string",description:"Sets the reference name of the message id repository",title:"Message Id Repository Ref",required:!0,deprecated:!1},eager:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Sets whether to eagerly add the key to the idempotent repository or wait until the exchange is complete. Eager is default enabled.",title:"Eager",required:!1,deprecated:!1},skipDuplicate:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Sets whether to skip duplicates or not. The default behavior is to skip duplicates. A duplicate message would have the Exchange property link org.apache.camel.ExchangeDUPLICATE_MESSAGE set to a link BooleanTRUE value. A none duplicate message will not have this property set.",title:"Skip Duplicate",required:!1,deprecated:!1},removeOnFailure:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Sets whether to remove or keep the key on failure. The default behavior is to remove the key on failure.",title:"Remove On Failure",required:!1,deprecated:!1},expression:{kind:"expression",type:"object",description:"Expression used to calculate the correlation key to use for duplicate check. The Exchange which has the same correlation key is regarded as a duplicate and will be rejected.",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},inOnly:{type:"object",title:"In Only",group:"eip,endpoint,routing",icon:"eventMessage24.png",description:"Marks the exchange pattern for the route to one way",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{uri:{kind:"attribute",type:"string",description:"Sets the uri of the endpoint to send to.",title:"Uri",required:!1,deprecated:!1},ref:{kind:"attribute",type:"string",description:"Sets the reference of the endpoint to send to.",title:"Ref",required:!1,deprecated:!0},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},inOut:{type:"object",title:"In Out",group:"eip,endpoint,routing",icon:"requestReply24.png",description:"Marks the exchange pattern for the route to request/reply",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{uri:{kind:"attribute",type:"string",description:"Sets the uri of the endpoint to send to.",title:"Uri",required:!1,deprecated:!1},ref:{kind:"attribute",type:"string",description:"Sets the reference of the endpoint to send to.",title:"Ref",required:!1,deprecated:!0},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},intercept:{type:"object",title:"Intercept",group:"configuration",icon:"generic24.png",description:"Intercepts a message at each step in the route",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},interceptFrom:{type:"object",title:"Intercept From",group:"configuration",icon:"generic24.png",description:"Intercepts incoming messages",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{uri:{kind:"attribute",type:"string",description:"Intercept incoming messages from the uri or uri pattern. If this option is not configured then all incoming messages is intercepted.",title:"Uri",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},interceptSendToEndpoint:{type:"object",title:"Intercept Send To Endpoint",group:"configuration",icon:"generic24.png",description:"Intercepts messages being sent to an endpoint",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{uri:{kind:"attribute",type:"string",description:"Intercept sending to the uri or uri pattern.",title:"Uri",required:!0,deprecated:!1},skipSendToOriginalEndpoint:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If set to true then the message is not sent to the original endpoint. By default (false) the message is both intercepted and then sent to the original endpoint.",title:"Skip Send To Original Endpoint",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},loadBalance:{type:"object",title:"Load Balance",group:"eip,routing",icon:"loadBalance24.png",description:"Balances message processing among a number of nodes",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{loadBalancerType:{kind:"element",type:"object",description:"The load balancer to be used",title:"Load Balancer Type",required:!0,deprecated:!1},inheritErrorHandler:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Sets whether or not to inherit the configured error handler. The default value is true. You can use this to disable using the inherited error handler for a given DSL such as a load balancer where you want to use a custom error handler strategy.",title:"Inherit Error Handler",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},log:{type:"object",title:"Log",group:"configuration",icon:"log24.png",description:"Logs the defined message to the logger",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{message:{kind:"attribute",type:"string",description:"Sets the log message (uses simple language)",title:"Message",required:!0,deprecated:!1},loggingLevel:{kind:"attribute",type:"string",defaultValue:"INFO","enum":["DEBUG","ERROR","INFO","OFF","TRACE","WARN"],description:"Sets the logging level. The default value is INFO",title:"Logging Level",required:!1,deprecated:!1},logName:{kind:"attribute",type:"string",description:"Sets the name of the logger",title:"Log Name",required:!1,deprecated:!1},marker:{kind:"attribute",type:"string",description:"To use slf4j marker",title:"Marker",required:!1,deprecated:!1},loggerRef:{kind:"attribute",type:"string",description:"To refer to a custom logger instance to lookup from the registry.",title:"Logger Ref",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},loop:{type:"object",title:"Loop",group:"eip,routing",icon:"generic24.png",description:"Processes a message multiple times",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{copy:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If the copy attribute is true a copy of the input Exchange is used for each iteration. That means each iteration will start from a copy of the same message. By default loop will loop the same exchange all over so each iteration may have different message content.",title:"Copy",required:!1,deprecated:!1},expression:{kind:"expression",type:"object",description:"Expression to define how many times we should loop. Notice the expression is only evaluated once and should return a number as how many times to loop. A value of zero or negative means no looping. The loop is like a for-loop fashion if you want a while loop then the dynamic router may be a better choice.",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},marshal:{type:"object",title:"Marshal",group:"eip,transformation",
icon:"marshal24.png",description:"Marshals data into a specified format for transmission over a transport or component",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{dataFormatType:{kind:"element",type:"object",description:"The data format to be used",title:"Data Format Type",required:!0,deprecated:!1},ref:{kind:"attribute",type:"string",description:"To refer to a custom data format to use as marshaller",title:"Ref",required:!1,deprecated:!0},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},multicast:{type:"object",title:"Multicast",group:"eip,routing",icon:"multicast24.png",description:"Routes the same message to multiple paths either sequentially or in parallel.",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{parallelProcessing:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then sending messages to the multicasts occurs concurrently. Note the caller thread will still wait until all messages has been fully processed before it continues. Its only the sending and processing the replies from the multicasts which happens concurrently.",title:"Parallel Processing",required:!1,deprecated:!1},strategyRef:{kind:"attribute",type:"string",description:"Refers to an AggregationStrategy to be used to assemble the replies from the multicasts into a single outgoing message from the Multicast. By default Camel will use the last reply as the outgoing message. You can also use a POJO as the AggregationStrategy",title:"Strategy Ref",required:!1,deprecated:!1},strategyMethodName:{kind:"attribute",type:"string",description:"This option can be used to explicit declare the method name to use when using POJOs as the AggregationStrategy.",title:"Strategy Method Name",required:!1,deprecated:!1},strategyMethodAllowNull:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used if there was no data to enrich. If this option is true then null values is used as the oldExchange (when no data to enrich) when using POJOs as the AggregationStrategy",title:"Strategy Method Allow Null",required:!1,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"Refers to a custom Thread Pool to be used for parallel processing. Notice if you set this option then parallel processing is automatic implied and you do not have to enable that option as well.",title:"Executor Service Ref",required:!1,deprecated:!1},streaming:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then Camel will process replies out-of-order eg in the order they come back. If disabled Camel will process replies in the same order as defined by the multicast.",title:"Streaming",required:!1,deprecated:!1},stopOnException:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will now stop further processing if an exception or failure occurred during processing of an org.apache.camel.Exchange and the caused exception will be thrown. Will also stop if processing the exchange failed (has a fault message) or an exception was thrown and handled by the error handler (such as using onException). In all situations the multicast will stop further processing. This is the same behavior as in pipeline which is used by the routing engine. The default behavior is to not stop but continue processing till the end",title:"Stop On Exception",required:!1,deprecated:!1},timeout:{kind:"attribute",type:"integer",defaultValue:"0",description:"Sets a total timeout specified in millis when using parallel processing. If the Multicast hasn't been able to send and process all replies within the given timeframe then the timeout triggers and the Multicast breaks out and continues. Notice if you provide a TimeoutAwareAggregationStrategy then the timeout method is invoked before breaking out. If the timeout is reached with running tasks still remaining certain tasks for which it is difficult for Camel to shut down in a graceful manner may continue to run. So use this option with a bit of care.",title:"Timeout",required:!1,deprecated:!1},onPrepareRef:{kind:"attribute",type:"string",description:"Uses the Processor when preparing the org.apache.camel.Exchange to be send. This can be used to deep-clone messages that should be send or any custom logic needed before the exchange is send.",title:"On Prepare Ref",required:!1,deprecated:!1},shareUnitOfWork:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Shares the org.apache.camel.spi.UnitOfWork with the parent and each of the sub messages. Multicast will by default not share unit of work between the parent exchange and each multicasted exchange. This means each sub exchange has its own individual unit of work.",title:"Share Unit Of Work",required:!1,deprecated:!1},parallelAggregate:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then the aggregate method on AggregationStrategy can be called concurrently. Notice that this would require the implementation of AggregationStrategy to be implemented as thread-safe. By default this is false meaning that Camel synchronizes the call to the aggregate method. Though in some use-cases this can be used to archive higher performance when the AggregationStrategy is implemented as thread-safe.",title:"Parallel Aggregate",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},onCompletion:{type:"object",title:"On Completion",group:"configuration",icon:"generic24.png",description:"Route to be executed when normal route processing completes",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{mode:{kind:"attribute",type:"string",defaultValue:"AfterConsumer","enum":["AfterConsumer","BeforeConsumer"],description:"Sets the on completion mode. The default value is AfterConsumer",title:"Mode",required:!1,deprecated:!1},onCompleteOnly:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will only synchronize when the org.apache.camel.Exchange completed successfully (no errors).",title:"On Complete Only",required:!1,deprecated:!1},onFailureOnly:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will only synchronize when the org.apache.camel.Exchange ended with failure (exception or FAULT message).",title:"On Failure Only",required:!1,deprecated:!1},onWhen:{kind:"element",type:"object",description:"Sets an additional predicate that should be true before the onCompletion is triggered. To be used for fine grained controlling whether a completion callback should be invoked or not",title:"On When",required:!1,deprecated:!1},parallelProcessing:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then the on completion process will run asynchronously by a separate thread from a thread pool. By default this is false meaning the on completion process will run synchronously using the same caller thread as from the route.",title:"Parallel Processing",required:!1,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"Refers to a custom Thread Pool to be used for parallel processing. Notice if you set this option then parallel processing is automatic implied and you do not have to enable that option as well.",title:"Executor Service Ref",required:!1,deprecated:!1},useOriginalMessage:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will use the original input body when an org.apache.camel.Exchange for this on completion. By default this feature is off.",title:"Use Original Message",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},onException:{type:"object",title:"On Exception",group:"error",icon:"generic24.png",description:"Route to be executed when an exception is thrown",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{exception:{kind:"element",type:"array",description:"A set of exceptions to react upon.",title:"Exception",required:!0,deprecated:!1},onWhen:{kind:"element",type:"object",description:"Sets an additional predicate that should be true before the onException is triggered. To be used for fine grained controlling whether a thrown exception should be intercepted by this exception type or not.",title:"On When",required:!1,deprecated:!1},retryWhile:{kind:"expression",type:"object",description:"Sets the retry while predicate. Will continue retrying until predicate returns false.",title:"Retry While",required:!1,deprecated:!1},redeliveryPolicy:{kind:"element",type:"object",description:"Set the RedeliveryPolicy to be used.",title:"Redelivery Policy",required:!1,deprecated:!1},redeliveryPolicyRef:{kind:"attribute",type:"string",description:"Sets a reference to a RedeliveryPolicy to lookup in the org.apache.camel.spi.Registry to be used.",title:"Redelivery Policy Ref",required:!1,deprecated:!1},handled:{kind:"expression",type:"object",description:"Sets whether the exchange should be marked as handled or not.",title:"Handled",required:!1,deprecated:!1},continued:{kind:"expression",type:"object",description:"Sets whether the exchange should handle and continue routing from the point of failure. If this option is enabled then its considered handled as well.",title:"Continued",required:!1,deprecated:!1},onRedeliveryRef:{kind:"attribute",type:"string",description:"Sets a reference to a processor that should be processed before a redelivery attempt. Can be used to change the org.apache.camel.Exchange before its being redelivered.",title:"On Redelivery Ref",required:!1,deprecated:!1},useOriginalMessage:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will use the original input message when an org.apache.camel.Exchange is moved to the dead letter queue. Notice: this only applies when all redeliveries attempt have failed and the org.apache.camel.Exchange is doomed for failure. Instead of using the current inprogress org.apache.camel.Exchange IN body we use the original IN body instead. This allows you to store the original input in the dead letter queue instead of the inprogress snapshot of the IN body. For instance if you route transform the IN body during routing and then failed. With the original exchange store in the dead letter queue it might be easier to manually re submit the org.apache.camel.Exchange again as the IN body is the same as when Camel received it. So you should be able to send the org.apache.camel.Exchange to the same input. By default this feature is off.",title:"Use Original Message",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},optimisticLockRetryPolicy:{type:"object",title:"Optimistic Lock Retry Policy",group:"configuration",icon:"generic24.png",description:"To configure optimistic locking",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{maximumRetries:{kind:"attribute",type:"integer",description:"Sets the maximum number of retries",title:"Maximum Retries",required:!1,deprecated:!1},retryDelay:{kind:"attribute",type:"integer",defaultValue:"50",description:"Sets the delay in millis between retries",title:"Retry Delay",required:!1,deprecated:!1},maximumRetryDelay:{kind:"attribute",type:"integer",defaultValue:"1000",description:"Sets the upper value of retry in millis between retries when using exponential or random backoff",title:"Maximum Retry Delay",required:!1,deprecated:!1},exponentialBackOff:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Enable exponential backoff",title:"Exponential Back Off",required:!1,deprecated:!1},randomBackOff:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Enables random backoff",title:"Random Back Off",required:!1,deprecated:!1}}},otherwise:{type:"object",title:"Otherwise",group:"eip,routing",icon:"generic24.png",description:"Route to be executed when all other choices evaluate to false",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},packageScan:{type:"object",title:"Package Scan",group:"configuration",icon:"generic24.png",description:"Scans for Java org.apache.camel.builder.RouteBuilder classes in java packages",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{"package":{kind:"element",type:"array",description:"Sets the java package names to use for scanning for route builder classes",title:"Package",required:!0,deprecated:!1},excludes:{kind:"element",type:"array",description:"Exclude finding route builder from these java package names.",title:"Excludes",required:!1,deprecated:!1},includes:{kind:"element",type:"array",description:"Include finding route builder from these java package names.",title:"Includes",required:!1,deprecated:!1}}},pipeline:{type:"object",title:"Pipeline",group:"eip,routing",icon:"pipeline24.png",description:"Routes the message to a sequence of processors.",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},policy:{type:"object",title:"Policy",group:"configuration",icon:"generic24.png",description:"Defines a policy the route will use",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{ref:{kind:"attribute",type:"string",description:"Sets a reference to use for lookup the policy in the registry.",title:"Ref",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},pollEnrich:{type:"object",title:"Poll Enrich",group:"eip,transformation",icon:"pollEnrich24.png",description:"Enriches messages with data polled from a secondary resource",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{uri:{kind:"attribute",type:"string",description:"The endpoint uri for the external service to poll enrich from. You must use either uri or ref.",title:"Uri",required:!1,deprecated:!1},ref:{kind:"attribute",type:"string",description:"Refers to the endpoint for the external service to poll enrich from. You must use either uri or ref.",title:"Ref",required:!1,deprecated:!0},timeout:{kind:"attribute",type:"integer",defaultValue:"-1",description:"Timeout in millis when polling from the external service. The timeout has influence about the poll enrich behavior. It basically operations in three different modes: negative value - Waits until a message is available and then returns it. Warning that this method could block indefinitely if no messages are available. 0 - Attempts to receive a message exchange immediately without waiting and returning null if a message exchange is not available yet. positive value - Attempts to receive a message exchange waiting up to the given timeout to expire if a message is not yet available. Returns null if timed out The default value is -1 and therefore the method could block indefinitely and therefore its recommended to use a timeout value",title:"Timeout",required:!1,deprecated:!1},strategyRef:{kind:"attribute",type:"string",description:"Refers to an AggregationStrategy to be used to merge the reply from the external service into a single outgoing message. By default Camel will use the reply from the external service as outgoing message.",title:"Strategy Ref",required:!1,deprecated:!1},strategyMethodName:{kind:"attribute",type:"string",description:"This option can be used to explicit declare the method name to use when using POJOs as the AggregationStrategy.",title:"Strategy Method Name",required:!1,deprecated:!1},strategyMethodAllowNull:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used if there was no data to enrich. If this option is true then null values is used as the oldExchange (when no data to enrich) when using POJOs as the AggregationStrategy.",title:"Strategy Method Allow Null",required:!1,deprecated:!1},aggregateOnException:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used if there was an exception thrown while trying to retrieve the data to enrich from the resource. Setting this option to true allows end users to control what to do if there was an exception in the aggregate method. For example to suppress the exception or set a custom message body etc.",title:"Aggregate On Exception",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},process:{type:"object",title:"Process",group:"eip,endpoint",icon:"process24.png",description:"Calls a Camel processor.",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{ref:{kind:"attribute",type:"string",description:"Reference to the Processor to lookup in the registry to use.",title:"Ref",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},properties:{type:"object",title:"Properties",group:"configuration",icon:"generic24.png",description:"A series of key value pair",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{property:{kind:"element",type:"array",description:"A series of properties as key value pairs",title:"Property",required:!1,deprecated:!1}}},property:{type:"object",title:"Property",group:"configuration",icon:"generic24.png",description:"A key value pair",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{key:{kind:"attribute",type:"string",description:"Property key",title:"Key",required:!0,deprecated:!1},value:{kind:"attribute",type:"string",description:"Property value",title:"Value",required:!0,deprecated:!1}}},random:{type:"object",title:"Random",group:"configuration,loadbalance",icon:"generic24.png",description:"Random load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},recipientList:{type:"object",title:"Recipient List",group:"eip,endpoint,routing",icon:"recipientList24.png",description:"Routes messages to a number of dynamically specified recipients (dynamic to)",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{delimiter:{kind:"attribute",type:"string",defaultValue:",",description:"Delimiter used if the Expression returned multiple endpoints. Can be turned off using the value false. The default value is",title:"Delimiter",required:!1,deprecated:!1},parallelProcessing:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then sending messages to the recipients occurs concurrently. Note the caller thread will still wait until all messages has been fully processed before it continues. Its only the sending and processing the replies from the recipients which happens concurrently.",title:"Parallel Processing",required:!1,deprecated:!1},strategyRef:{kind:"attribute",type:"string",description:"Sets a reference to the AggregationStrategy to be used to assemble the replies from the recipients into a single outgoing message from the RecipientList. By default Camel will use the last reply as the outgoing message. You can also use a POJO as the AggregationStrategy",title:"Strategy Ref",required:!1,deprecated:!1},strategyMethodName:{kind:"attribute",type:"string",description:"This option can be used to explicit declare the method name to use when using POJOs as the AggregationStrategy.",title:"Strategy Method Name",required:!1,deprecated:!1},strategyMethodAllowNull:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used if there was no data to enrich. If this option is true then null values is used as the oldExchange (when no data to enrich) when using POJOs as the AggregationStrategy",title:"Strategy Method Allow Null",required:!1,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"Refers to a custom Thread Pool to be used for parallel processing. Notice if you set this option then parallel processing is automatic implied and you do not have to enable that option as well.",title:"Executor Service Ref",required:!1,deprecated:!1},stopOnException:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will now stop further processing if an exception or failure occurred during processing of an org.apache.camel.Exchange and the caused exception will be thrown. Will also stop if processing the exchange failed (has a fault message) or an exception was thrown and handled by the error handler (such as using onException). In all situations the recipient list will stop further processing. This is the same behavior as in pipeline which is used by the routing engine. The default behavior is to not stop but continue processing till the end",title:"Stop On Exception",required:!1,deprecated:!1},ignoreInvalidEndpoints:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Ignore the invalidate endpoint exception when try to create a producer with that endpoint",title:"Ignore Invalid Endpoints",required:!1,deprecated:!1},streaming:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then Camel will process replies out-of-order eg in the order they come back. If disabled Camel will process replies in the same order as defined by the recipient list.",title:"Streaming",required:!1,deprecated:!1},timeout:{kind:"attribute",type:"integer",defaultValue:"0",description:"Sets a total timeout specified in millis when using parallel processing. If the Recipient List hasn't been able to send and process all replies within the given timeframe then the timeout triggers and the Recipient List breaks out and continues. Notice if you provide a TimeoutAwareAggregationStrategy then the timeout method is invoked before breaking out. If the timeout is reached with running tasks still remaining certain tasks for which it is difficult for Camel to shut down in a graceful manner may continue to run. So use this option with a bit of care.",title:"Timeout",required:!1,deprecated:!1},onPrepareRef:{kind:"attribute",type:"string",description:"Uses the Processor when preparing the org.apache.camel.Exchange to be send. This can be used to deep-clone messages that should be send or any custom logic needed before the exchange is send.",title:"On Prepare Ref",required:!1,deprecated:!1},shareUnitOfWork:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Shares the org.apache.camel.spi.UnitOfWork with the parent and each of the sub messages. Recipient List will by default not share unit of work between the parent exchange and each recipient exchange. This means each sub exchange has its own individual unit of work.",title:"Share Unit Of Work",required:!1,deprecated:!1},cacheSize:{kind:"attribute",type:"integer",description:"Sets the maximum size used by the org.apache.camel.impl.ProducerCache which is used to cache and reuse producers when using this recipient list when uris are reused.",title:"Cache Size",required:!1,deprecated:!1},parallelAggregate:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then the aggregate method on AggregationStrategy can be called concurrently. Notice that this would require the implementation of AggregationStrategy to be implemented as thread-safe. By default this is false meaning that Camel synchronizes the call to the aggregate method. Though in some use-cases this can be used to archive higher performance when the AggregationStrategy is implemented as thread-safe.",title:"Parallel Aggregate",required:!1,deprecated:!1},expression:{kind:"expression",type:"object",description:"Expression that returns which endpoints (url) to send the message to (the recipients). If the expression return an empty value then the message is not sent to any recipients.",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},redeliveryPolicy:{type:"object",title:"Redelivery Policy",group:"configuration",icon:"generic24.png",description:"To configure re-delivery for error handling",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{maximumRedeliveries:{kind:"attribute",type:"string",description:"Sets the maximum redeliveries x = redeliver at most x times 0 = no redeliveries -1 = redeliver forever",title:"Maximum Redeliveries",required:!1,deprecated:!1},redeliveryDelay:{kind:"attribute",type:"string",description:"Sets the initial redelivery delay",title:"Redelivery Delay",required:!1,deprecated:!1},asyncDelayedRedelivery:{kind:"attribute",type:"string",description:"Allow synchronous delayed redelivery.",title:"Async Delayed Redelivery",required:!1,deprecated:!1},backOffMultiplier:{kind:"attribute",type:"string",description:"Sets the back off multiplier",title:"Back Off Multiplier",required:!1,deprecated:!1},useExponentialBackOff:{kind:"attribute",type:"string",description:"Turn on exponential backk off",title:"Use Exponential Back Off",required:!1,deprecated:!1},collisionAvoidanceFactor:{kind:"attribute",type:"string",description:"Sets the collision avoidance factor",title:"Collision Avoidance Factor",required:!1,deprecated:!1},useCollisionAvoidance:{kind:"attribute",type:"string",description:"Turn on collision avoidance.",title:"Use Collision Avoidance",required:!1,deprecated:!1},maximumRedeliveryDelay:{kind:"attribute",type:"string",description:"Sets the maximum delay between redelivery",title:"Maximum Redelivery Delay",required:!1,deprecated:!1},retriesExhaustedLogLevel:{kind:"attribute",type:"string","enum":["DEBUG","ERROR","INFO","OFF","TRACE","WARN"],description:"Sets the logging level to use when retries has exhausted",title:"Retries Exhausted Log Level",required:!1,deprecated:!1},retryAttemptedLogLevel:{kind:"attribute",type:"string","enum":["DEBUG","ERROR","INFO","OFF","TRACE","WARN"],description:"Sets the logging level to use for logging retry attempts",title:"Retry Attempted Log Level",required:!1,deprecated:!1},logRetryAttempted:{kind:"attribute",type:"string",description:"Sets whether retry attempts should be logged or not. Can be used to include or reduce verbose.",title:"Log Retry Attempted",required:!1,deprecated:!1},logStackTrace:{kind:"attribute",type:"string",description:"Sets whether stack traces should be logged. Can be used to include or reduce verbose.",title:"Log Stack Trace",required:!1,deprecated:!1},logRetryStackTrace:{kind:"attribute",type:"string",description:"Sets whether stack traces should be logged when an retry attempt failed. Can be used to include or reduce verbose.",title:"Log Retry Stack Trace",required:!1,deprecated:!1},logHandled:{kind:"attribute",type:"string",description:"Sets whether handled exceptions should be logged or not. Can be used to include or reduce verbose.",title:"Log Handled",required:!1,deprecated:!1},logNewException:{kind:"attribute",type:"string",description:"Sets whether new exceptions should be logged or not. Can be used to include or reduce verbose. A new exception is an exception that was thrown while handling a previous exception.",title:"Log New Exception",required:!1,deprecated:!1},logContinued:{kind:"attribute",type:"string",description:"Sets whether continued exceptions should be logged or not. Can be used to include or reduce verbose.",title:"Log Continued",required:!1,deprecated:!1},logExhausted:{kind:"attribute",type:"string",description:"Sets whether exhausted exceptions should be logged or not. Can be used to include or reduce verbose.",title:"Log Exhausted",required:!1,deprecated:!1},logExhaustedMessageHistory:{kind:"attribute",type:"string",description:"Sets whether exhausted exceptions should be logged including message history or not (supports property placeholders). Can be used to include or reduce verbose.",title:"Log Exhausted Message History",required:!1,deprecated:!1},disableRedelivery:{kind:"attribute",type:"string",description:"Disables redelivery (same as setting maximum redeliveries to 0)",title:"Disable Redelivery",required:!1,deprecated:!1},delayPattern:{kind:"attribute",type:"string",description:"Sets the delay pattern with delay intervals.",title:"Delay Pattern",required:!1,deprecated:!1},allowRedeliveryWhileStopping:{kind:"attribute",type:"string",description:"Controls whether to allow redelivery while stopping/shutting down a route that uses error handling.",title:"Allow Redelivery While Stopping",required:!1,deprecated:!1},exchangeFormatterRef:{kind:"attribute",type:"string",description:"Sets the reference of the instance of org.apache.camel.spi.ExchangeFormatter to generate the log message from exchange.",title:"Exchange Formatter Ref",required:!1,deprecated:!1}}},removeHeader:{type:"object",title:"Remove Header",group:"eip,transformation",icon:"generic24.png",description:"Removes a named header from the message",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{headerName:{kind:"attribute",type:"string",description:"Name of header to remove",title:"Header Name",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},removeHeaders:{type:"object",title:"Remove Headers",group:"eip,transformation",icon:"generic24.png",description:"Removes message headers whose name matches a specified pattern",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{pattern:{kind:"attribute",type:"string",description:"Name or pattern of headers to remove",title:"Pattern",required:!0,deprecated:!1},excludePattern:{kind:"attribute",type:"string",description:"Name or patter of headers to not remove",title:"Exclude Pattern",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1
},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},removeProperties:{type:"object",title:"Remove Properties",group:"eip,transformation",icon:"generic24.png",description:"Removes message exchange properties whose name matches a specified pattern",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{pattern:{kind:"attribute",type:"string",description:"Name or pattern of properties to remove",title:"Pattern",required:!0,deprecated:!1},excludePattern:{kind:"attribute",type:"string",description:"Name or pattern of properties to not remove",title:"Exclude Pattern",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},removeProperty:{type:"object",title:"Remove Property",group:"eip,transformation",icon:"generic24.png",description:"Removes a named property from the message exchange",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{propertyName:{kind:"attribute",type:"string",description:"Name of property to remove",title:"Property Name",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},resequence:{type:"object",title:"Resequence",group:"eip,routing",icon:"resequence24.png",description:"Resequences (re-order) messages based on an expression",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{resequencerConfig:{kind:"element",type:"object",description:"To configure the resequencer in using either batch or stream configuration. Will by default use batch configuration.",title:"Resequencer Config",required:!1,deprecated:!1},expression:{kind:"expression",type:"object",description:"Expression to use for re-ordering the messages such as a header with a sequence number",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},rollback:{type:"object",title:"Rollback",group:"eip,routing",icon:"generic24.png",description:"Forces a rollback by stopping routing the message",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{markRollbackOnly:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Mark the transaction for rollback only (cannot be overruled to commit)",title:"Mark Rollback Only",required:!1,deprecated:!1},markRollbackOnlyLast:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Mark only last sub transaction for rollback only. When using sub transactions (if the transaction manager support this)",title:"Mark Rollback Only Last",required:!1,deprecated:!1},message:{kind:"attribute",type:"string",description:"Message to use in rollback exception",title:"Message",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},roundRobin:{type:"object",title:"Round Robin",group:"configuration,loadbalance",icon:"generic24.png",description:"Round robin load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},route:{type:"object",title:"Route",group:"configuration",icon:"route24.png",description:"A Camel route",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{group:{kind:"attribute",type:"string",description:"The group that this route belongs to; could be the name of the RouteBuilder class or be explicitly configured in the XML. May be null.",title:"Group",required:!1,deprecated:!1},streamCache:{kind:"attribute",type:"string",description:"Whether stream caching is enabled on this route.",title:"Stream Cache",required:!1,deprecated:!1},trace:{kind:"attribute",type:"string",description:"Whether tracing is enabled on this route.",title:"Trace",required:!1,deprecated:!1},messageHistory:{kind:"attribute",type:"string",defaultValue:"true",description:"Whether message history is enabled on this route.",title:"Message History",required:!1,deprecated:!1},handleFault:{kind:"attribute",type:"string",description:"Whether handle fault is enabled on this route.",title:"Handle Fault",required:!1,deprecated:!1},delayer:{kind:"attribute",type:"string",description:"Whether to slow down processing messages by a given delay in msec.",title:"Delayer",required:!1,deprecated:!1},autoStartup:{kind:"attribute",type:"string",defaultValue:"true",description:"Whether to auto start this route",title:"Auto Startup",required:!1,deprecated:!1},startupOrder:{kind:"attribute",type:"integer",description:"To configure the ordering of the routes being started",title:"Startup Order",required:!1,deprecated:!1},errorHandlerRef:{kind:"attribute",type:"string",description:"Sets the bean ref name of the error handler builder to use on this route",title:"Error Handler Ref",required:!1,deprecated:!1},routePolicyRef:{kind:"attribute",type:"string",description:"Reference to custom org.apache.camel.spi.RoutePolicy to use by the route. Multiple policies can be configured by separating values using comma.",title:"Route Policy Ref",required:!1,deprecated:!1},shutdownRoute:{kind:"attribute",type:"string","enum":["Default","Defer"],description:"To control how to shutdown the route.",title:"Shutdown Route",required:!1,deprecated:!1},shutdownRunningTask:{kind:"attribute",type:"string","enum":["CompleteCurrentTaskOnly","CompleteAllTasks"],description:"To control how to shutdown the route.",title:"Shutdown Running Task",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},routeBuilder:{type:"object",title:"Route Builder",group:"configuration",icon:"generic24.png",description:"To refer to a Java org.apache.camel.builder.RouteBuilder instance to use.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{ref:{kind:"attribute",type:"string",description:"Reference to the route builder instance",title:"Ref",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},routeContextRef:{type:"object",title:"Route Context Ref",group:"configuration",icon:"generic24.png",description:"To refer to an XML file with routes defined using the xml-dsl",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{ref:{kind:"attribute",type:"string",description:"Reference to the routes in the xml dsl",title:"Ref",required:!0,deprecated:!1}}},routes:{type:"object",title:"Routes",group:"configuration",icon:"generic24.png",description:"A series of Camel routes",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},routingSlip:{type:"object",title:"Routing Slip",group:"eip,endpoint,routing",icon:"routingSlip24.png",description:"Routes a message through a series of steps that are pre-determined (the slip)",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{uriDelimiter:{kind:"attribute",type:"string",defaultValue:",",description:"Sets the uri delimiter to use",title:"Uri Delimiter",required:!1,deprecated:!1},ignoreInvalidEndpoints:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Ignore the invalidate endpoint exception when try to create a producer with that endpoint",title:"Ignore Invalid Endpoints",required:!1,deprecated:!1},cacheSize:{kind:"attribute",type:"integer",description:"Sets the maximum size used by the org.apache.camel.impl.ProducerCache which is used to cache and reuse producers when using this recipient list when uris are reused.",title:"Cache Size",required:!1,deprecated:!1},expression:{kind:"expression",type:"object",description:"Expression to define the routing slip which defines which endpoints to route the message in a pipeline style. Notice the expression is evaluated once if you want a more dynamic style then the dynamic router eip is a better choice.",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},sample:{type:"object",title:"Sample",group:"eip,routing",icon:"generic24.png",description:"Extract a sample of the messages passing through a route",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{samplePeriod:{kind:"attribute",type:"integer",defaultValue:"1",description:"Sets the sample period during which only a single Exchange will pass through.",title:"Sample Period",required:!1,deprecated:!1},messageFrequency:{kind:"attribute",type:"integer",description:"Sets the sample message count which only a single Exchange will pass through after this many received.",title:"Message Frequency",required:!1,deprecated:!1},units:{kind:"attribute",type:"string",defaultValue:"SECONDS","enum":["DAYS","HOURS","MICROSECONDS","MILLISECONDS","MINUTES","NANOSECONDS","SECONDS"],description:"Sets the time units for the sample period defaulting to seconds.",title:"Units",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},setBody:{type:"object",title:"Set Body",group:"eip,transformation",icon:"setBody24.png",description:"Sets the contents of the message body",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression that returns the new body to use",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},setExchangePattern:{type:"object",title:"Set Exchange Pattern",group:"configuration",icon:"generic24.png",description:"Sets the exchange pattern on the message exchange",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{pattern:{kind:"attribute",type:"string","enum":["InOnly","InOptionalOut","InOut","OutIn","OutOnly","OutOptionalIn","RobustInOnly","RobustOutOnly"],description:"Sets the new exchange pattern of the Exchange to be used from this point forward",title:"Pattern",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},setFaultBody:{type:"object",title:"Set Fault Body",group:"eip,transformation",icon:"generic24.png",description:"Sets the contents of a fault message's body",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression that returns the new fault body to use",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},setHeader:{type:"object",title:"Set Header",group:"eip,transformation",icon:"generic24.png",description:"Sets the value of a message header",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{headerName:{kind:"attribute",type:"string",description:"Name of message header to set a new value",title:"Header Name",required:!0,deprecated:!1},expression:{kind:"expression",type:"object",description:"Expression to return the value of the header",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},setOutHeader:{type:"object",title:"Set Out Header",group:"eip,transformation",icon:"generic24.png",description:"Sets the value of a header on the outbound message",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{headerName:{kind:"attribute",type:"string",description:"Name of message header to set a new value",title:"Header Name",required:!0,deprecated:!0},expression:{kind:"expression",type:"object",description:"Expression to return the value of the header",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},setProperty:{type:"object",title:"Set Property",group:"eip,transformation",icon:"generic24.png",description:"Sets a named property on the message exchange",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{propertyName:{kind:"attribute",type:"string",description:"Name of exchange property to set a new value",title:"Property Name",required:!0,deprecated:!1},expression:{kind:"expression",type:"object",description:"Expression to return the value of the message exchange property",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},sort:{type:"object",title:"Sort",group:"eip,routing",icon:"generic24.png",description:"Sorts the contents of the message",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{comparatorRef:{kind:"attribute",type:"string",description:"Sets a reference to lookup for the comparator to use for sorting",title:"Comparator Ref",required:!1,deprecated:!1},expression:{kind:"expression",type:"object",description:"Optional expression to sort by something else than the message body",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},split:{type:"object",title:"Split",group:"eip,routing",icon:"split24.png",description:"Splits a single message into many sub-messages.",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{parallelProcessing:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then processing each splitted messages occurs concurrently. Note the caller thread will still wait until all messages has been fully processed before it continues. Its only processing the sub messages from the splitter which happens concurrently.",title:"Parallel Processing",required:!1,deprecated:!1},strategyRef:{kind:"attribute",type:"string",description:"Sets a reference to the AggregationStrategy to be used to assemble the replies from the splitted messages into a single outgoing message from the Splitter. By default Camel will use the original incoming message to the splitter (leave it unchanged). You can also use a POJO as the AggregationStrategy",title:"Strategy Ref",required:!1,deprecated:!1},strategyMethodName:{kind:"attribute",type:"string",description:"This option can be used to explicit declare the method name to use when using POJOs as the AggregationStrategy.",title:"Strategy Method Name",required:!1,deprecated:!1},strategyMethodAllowNull:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used if there was no data to enrich. If this option is true then null values is used as the oldExchange (when no data to enrich) when using POJOs as the AggregationStrategy",title:"Strategy Method Allow Null",required:!1,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"Refers to a custom Thread Pool to be used for parallel processing. Notice if you set this option then parallel processing is automatic implied and you do not have to enable that option as well.",title:"Executor Service Ref",required:!1,deprecated:!1},streaming:{kind:"attribute",type:"boolean",defaultValue:"false",description:"When in streaming mode then the splitter splits the original message on-demand and each splitted message is processed one by one. This reduces memory usage as the splitter do not split all the messages first but then we do not know the total size and therefore the link org.apache.camel.ExchangeSPLIT_SIZE is empty. In non-streaming mode (default) the splitter will split each message first to know the total size and then process each message one by one. This requires to keep all the splitted messages in memory and therefore requires more memory. The total size is provided in the link org.apache.camel.ExchangeSPLIT_SIZE header. The streaming mode also affects the aggregation behavior. If enabled then Camel will process replies out-of-order eg in the order they come back. If disabled Camel will process replies in the same order as the messages was splitted.",title:"Streaming",required:!1,deprecated:!1},stopOnException:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will now stop further processing if an exception or failure occurred during processing of an org.apache.camel.Exchange and the caused exception will be thrown. Will also stop if processing the exchange failed (has a fault message) or an exception was thrown and handled by the error handler (such as using onException). In all situations the splitter will stop further processing. This is the same behavior as in pipeline which is used by the routing engine. The default behavior is to not stop but continue processing till the end",title:"Stop On Exception",required:!1,deprecated:!1},timeout:{kind:"attribute",type:"integer",defaultValue:"0",description:"Sets a total timeout specified in millis when using parallel processing. If the Splitter hasn't been able to split and process all the sub messages within the given timeframe then the timeout triggers and the Splitter breaks out and continues. Notice if you provide a TimeoutAwareAggregationStrategy then the timeout method is invoked before breaking out. If the timeout is reached with running tasks still remaining certain tasks for which it is difficult for Camel to shut down in a graceful manner may continue to run. So use this option with a bit of care.",title:"Timeout",required:!1,deprecated:!1},onPrepareRef:{kind:"attribute",type:"string",description:"Uses the Processor when preparing the org.apache.camel.Exchange to be send. This can be used to deep-clone messages that should be send or any custom logic needed before the exchange is send.",title:"On Prepare Ref",required:!1,deprecated:!1},shareUnitOfWork:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Shares the org.apache.camel.spi.UnitOfWork with the parent and each of the sub messages. Splitter will by default not share unit of work between the parent exchange and each splitted exchange. This means each splitted exchange has its own individual unit of work.",title:"Share Unit Of Work",required:!1,deprecated:!1},parallelAggregate:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then the aggregate method on AggregationStrategy can be called concurrently. Notice that this would require the implementation of AggregationStrategy to be implemented as thread-safe. By default this is false meaning that Camel synchronizes the call to the aggregate method. Though in some use-cases this can be used to archive higher performance when the AggregationStrategy is implemented as thread-safe.",title:"Parallel Aggregate",required:!1,deprecated:!1},expression:{kind:"expression",type:"object",description:"Expression of how to split the message body such as as-is using a tokenizer or using an xpath.",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},sticky:{type:"object",title:"Sticky",group:"configuration,loadbalance",icon:"generic24.png",description:"Sticky load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{correlationExpression:{kind:"expression",type:"object",description:"The correlation expression to use to calculate the correlation key",title:"Correlation Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},stop:{type:"object",title:"Stop",group:"eip,routing",icon:"generic24.png",description:"Stops the processing of the current message",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},"stream-config":{type:"object",title:"Stream-config",group:"configuration,resequence",icon:"generic24.png",description:"Configures stream-processing resequence eip.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{capacity:{kind:"attribute",type:"integer",defaultValue:"100",description:"Sets the capacity of the resequencer's inbound queue.",title:"Capacity",required:!1,deprecated:!1},timeout:{kind:"attribute",type:"integer",defaultValue:"1000",description:"Sets minimum time to wait for missing elements (messages).",title:"Timeout",required:!1,deprecated:!1},ignoreInvalidExchanges:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore invalid exchanges",title:"Ignore Invalid Exchanges",required:!1,deprecated:!1},comparatorRef:{kind:"attribute",type:"string",description:"To use a custom comparator",title:"Comparator Ref",required:!1,deprecated:!1},rejectOld:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If true throws an exception when messages older than the last delivered message are processed",title:"Reject Old",required:!1,deprecated:!1}}},threadPoolProfile:{type:"object",title:"Thread Pool Profile",group:"configuration",icon:"generic24.png",description:"To configure thread pools",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{defaultProfile:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether this profile is the default thread pool profile",title:"Default Profile",required:!1,deprecated:!1},poolSize:{kind:"attribute",type:"string",description:"Sets the core pool size",title:"Pool Size",required:!1,deprecated:!1},maxPoolSize:{kind:"attribute",type:"string",description:"Sets the maximum pool size",title:"Max Pool Size",required:!1,deprecated:!1},keepAliveTime:{kind:"attribute",type:"string",description:"Sets the keep alive time for idle threads in the pool",title:"Keep Alive Time",required:!1,deprecated:!1},maxQueueSize:{kind:"attribute",type:"string",description:"Sets the maximum number of tasks in the work queue. Use -1 or Integer.MAX_VALUE for an unbounded queue",title:"Max Queue Size",required:!1,deprecated:!1},allowCoreThreadTimeOut:{kind:"attribute",type:"string",description:"Whether idle core threads is allowed to timeout and therefore can shrink the pool size below the core pool size Is by default false",title:"Allow Core Thread Time Out",required:!1,deprecated:!1},rejectedPolicy:{kind:"attribute",type:"string","enum":["Abort","CallerRuns","Discard","DiscardOldest"],description:"Sets the handler for tasks which cannot be executed by the thread pool.",title:"Rejected Policy",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},threads:{type:"object",title:"Threads",group:"eip,routing",icon:"generic24.png",description:"Specifies that all steps after this node are processed asynchronously",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{executorServiceRef:{kind:"attribute",type:"string",description:"To refer to a custom thread pool or use a thread pool profile (as overlay)",title:"Executor Service Ref",required:!1,deprecated:!1},poolSize:{kind:"attribute",type:"integer",description:"Sets the core pool size",title:"Pool Size",required:!1,deprecated:!1},maxPoolSize:{kind:"attribute",type:"integer",description:"Sets the maximum pool size",title:"Max Pool Size",required:!1,deprecated:!1},keepAliveTime:{kind:"attribute",type:"integer",description:"Sets the keep alive time for idle threads",title:"Keep Alive Time",required:!1,deprecated:!1},timeUnit:{kind:"attribute",type:"string","enum":["DAYS","HOURS","MICROSECONDS","MILLISECONDS","MINUTES","NANOSECONDS","SECONDS"],description:"Sets the keep alive time unit. By default SECONDS is used.",title:"Time Unit",required:!1,deprecated:!1},maxQueueSize:{kind:"attribute",type:"integer",description:"Sets the maximum number of tasks in the work queue. Use -1 or Integer.MAX_VALUE for an unbounded queue",title:"Max Queue Size",required:!1,deprecated:!1},allowCoreThreadTimeOut:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether idle core threads is allowed to timeout and therefore can shrink the pool size below the core pool size Is by default false",title:"Allow Core Thread Time Out",required:!1,deprecated:!1},threadName:{kind:"attribute",type:"string",defaultValue:"Threads",description:"Sets the thread name to use.",title:"Thread Name",required:!1,deprecated:!1},rejectedPolicy:{kind:"attribute",type:"string","enum":["Abort","CallerRuns","Discard","DiscardOldest"],description:"Sets the handler for tasks which cannot be executed by the thread pool.",title:"Rejected Policy",required:!1,deprecated:!1},callerRunsWhenRejected:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the caller should run the task when it was rejected by the thread pool. Is by default true",title:"Caller Runs When Rejected",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},throttle:{type:"object",title:"Throttle",group:"eip,routing",icon:"generic24.png",description:"Controls the rate at which messages are passed to the next node in the route",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{executorServiceRef:{kind:"attribute",type:"string",description:"Sets the ExecutorService which could be used by throttle definition",title:"Executor Service Ref",required:!1,deprecated:!1},timePeriodMillis:{kind:"attribute",type:"integer",defaultValue:"1000",description:"Sets the time period during which the maximum request count is valid for",title:"Time Period Millis",required:!1,deprecated:!1},asyncDelayed:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Enables asynchronous delay which means the thread will no block while delaying.",title:"Async Delayed",required:!1,deprecated:!1},callerRunsWhenRejected:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the caller should run the task when it was rejected by the thread pool. Is by default true",title:"Caller Runs When Rejected",required:!1,deprecated:!1},rejectExecution:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not throttler throws the ThrottlerRejectedExecutionException when the exchange exceeds the request limit Is by default false",title:"Reject Execution",required:!1,deprecated:!1},expression:{kind:"expression",type:"object",description:"Expression to configure the maximum number of messages to throttle per request",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},throwException:{type:"object",title:"Throw Exception",group:"error",icon:"generic24.png",description:"Throws an exception",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{ref:{kind:"attribute",type:"string",description:"Reference to the exception instance to lookup from the registry to throw",title:"Ref",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},to:{type:"object",title:"To",group:"eip,endpoint,routing",icon:"endpoint24.png",description:"Sends the message to an endpoint",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{uri:{kind:"attribute",type:"string",description:"Sets the uri of the endpoint to send to.",title:"Uri",required:!1,deprecated:!1},ref:{kind:"attribute",type:"string",description:"Sets the reference of the endpoint to send to.",title:"Ref",required:!1,deprecated:!0},pattern:{kind:"attribute",type:"string","enum":["InOnly","InOptionalOut","InOut","OutIn","OutOnly","OutOptionalIn","RobustInOnly","RobustOutOnly"],description:"Sets the optional ExchangePattern used to invoke this endpoint",title:"Pattern",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},topic:{type:"object",title:"Topic",group:"configuration,loadbalance",icon:"generic24.png",description:"Topic load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",
type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},transacted:{type:"object",title:"Transacted",group:"configuration",icon:"transactionalClient24.png",description:"Enables transaction on the route",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{ref:{kind:"attribute",type:"string",description:"Sets a reference to use for lookup the policy in the registry.",title:"Ref",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},transform:{type:"object",title:"Transform",group:"eip,transformation",icon:"transform24.png",description:"Transforms the message body based on an expression",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression to return the transformed message body (the new message body to use)",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},unmarshal:{type:"object",title:"Unmarshal",group:"eip,transformation",icon:"unmarshal24.png",description:"Converts the message data received from the wire into a format that Apache Camel processors can consume",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{dataFormatType:{kind:"element",type:"object",description:"The data format to be used",title:"Data Format Type",required:!0,deprecated:!1},ref:{kind:"attribute",type:"string",description:"To refer to a custom data format to use as unmarshaller",title:"Ref",required:!1,deprecated:!0},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},validate:{type:"object",title:"Validate",group:"eip,transformation",icon:"generic24.png",description:"Validates a message based on an expression",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression to use for validation as a predicate. The expression should return either true or false. If returning false the message is invalid and an exception is thrown.",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},weighted:{type:"object",title:"Weighted",group:"configuration,loadbalance",icon:"generic24.png",description:"Weighted load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{roundRobin:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To enable round robin mode. By default the weighted distribution mode is used. The default value is false.",title:"Round Robin",required:!1,deprecated:!1},distributionRatio:{kind:"attribute",type:"string",description:"The distribution ratio is a delimited String consisting on integer weights separated by delimiters for example 235. The distributionRatio must match the number of endpoints and/or processors specified in the load balancer list.",title:"Distribution Ratio",required:!0,deprecated:!1},distributionRatioDelimiter:{kind:"attribute",type:"string",defaultValue:",",description:"Delimiter used to specify the distribution ratio. The default value is",title:"Distribution Ratio Delimiter",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},when:{type:"object",title:"When",group:"eip,routing",icon:"generic24.png",description:"Triggers a route when an expression evaluates to true",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{expression:{kind:"expression",type:"object",description:"Expression used as the predicate to evaluate whether this when should trigger and route the message or not.",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},whenSkipSendToEndpoint:{type:"object",title:"When Skip Send To Endpoint",group:"configuration",icon:"generic24.png",description:"Predicate to determine if the message should be sent or not to the endpoint when using interceptSentToEndpoint.",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{expression:{kind:"expression",type:"object",description:"Expression used as the predicate to evaluate whether the message should be sent or not to the endpoint",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},wireTap:{type:"object",title:"Wire Tap",group:"eip,endpoint,routing",icon:"wireTap24.png",description:"Routes a copy of a message (or creates a new message) to a secondary destination while continue routing the original message.",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{uri:{kind:"attribute",type:"string",description:"Uri of the endpoint to use as wire tap",title:"Uri",required:!1,deprecated:!1},ref:{kind:"attribute",type:"string",description:"Reference of the endpoint to use as wire tap",title:"Ref",required:!1,deprecated:!0},processorRef:{kind:"attribute",type:"string",description:"Reference to a Processor to use for creating a new body as the message to use for wire tapping",title:"Processor Ref",required:!1,deprecated:!1},body:{kind:"expression",type:"object",description:"Expression used for creating a new body as the message to use for wire tapping",title:"Body",required:!1,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"Uses a custom thread pool",title:"Executor Service Ref",required:!1,deprecated:!1},copy:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Uses a copy of the original exchange",title:"Copy",required:!1,deprecated:!1},onPrepareRef:{kind:"attribute",type:"string",description:"Uses the Processor when preparing the org.apache.camel.Exchange to be send. This can be used to deep-clone messages that should be send or any custom logic needed before the exchange is send.",title:"On Prepare Ref",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}}},rests:{"delete":{type:"object",title:"Delete",group:"rest",icon:"generic24.png",description:"Rest DELETE command",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{method:{kind:"attribute",type:"string",description:"The HTTP verb such as GET or POST",title:"Method",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"Uri template of this REST service such as /id.",title:"Uri",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"string",defaultValue:"auto","enum":["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data This option will override what may be configured on a parent level",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data This option will override what may be configured on a parent level",title:"Out Type",required:!1,deprecated:!1},toOrRoute:{kind:"element",type:"object",description:"To route from this REST service to a Camel endpoint or an inlined route",title:"To Or Route",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},get:{type:"object",title:"Get",group:"rest",icon:"generic24.png",description:"Rest GET command",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{method:{kind:"attribute",type:"string",description:"The HTTP verb such as GET or POST",title:"Method",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"Uri template of this REST service such as /id.",title:"Uri",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"string",defaultValue:"auto","enum":["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data This option will override what may be configured on a parent level",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data This option will override what may be configured on a parent level",title:"Out Type",required:!1,deprecated:!1},toOrRoute:{kind:"element",type:"object",description:"To route from this REST service to a Camel endpoint or an inlined route",title:"To Or Route",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},head:{type:"object",title:"Head",group:"rest",icon:"generic24.png",description:"Rest HEAD command",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{method:{kind:"attribute",type:"string",description:"The HTTP verb such as GET or POST",title:"Method",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"Uri template of this REST service such as /id.",title:"Uri",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"string",defaultValue:"auto","enum":["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data This option will override what may be configured on a parent level",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data This option will override what may be configured on a parent level",title:"Out Type",required:!1,deprecated:!1},toOrRoute:{kind:"element",type:"object",description:"To route from this REST service to a Camel endpoint or an inlined route",title:"To Or Route",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},post:{type:"object",title:"Post",group:"rest",icon:"generic24.png",description:"Rest POST command",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{method:{kind:"attribute",type:"string",description:"The HTTP verb such as GET or POST",title:"Method",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"Uri template of this REST service such as /id.",title:"Uri",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"string",defaultValue:"auto","enum":["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data This option will override what may be configured on a parent level",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data This option will override what may be configured on a parent level",title:"Out Type",required:!1,deprecated:!1},toOrRoute:{kind:"element",type:"object",description:"To route from this REST service to a Camel endpoint or an inlined route",title:"To Or Route",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},put:{type:"object",title:"Put",group:"rest",icon:"generic24.png",description:"Rest PUT command",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{method:{kind:"attribute",type:"string",description:"The HTTP verb such as GET or POST",title:"Method",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"Uri template of this REST service such as /id.",title:"Uri",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"string",defaultValue:"auto","enum":["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data This option will override what may be configured on a parent level",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data This option will override what may be configured on a parent level",title:"Out Type",required:!1,deprecated:!1},toOrRoute:{kind:"element",type:"object",description:"To route from this REST service to a Camel endpoint or an inlined route",title:"To Or Route",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},rest:{type:"object",title:"Rest",group:"rest",icon:"generic24.png",description:"Defines a rest service using the rest-dsl",acceptInput:"false",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{path:{kind:"attribute",type:"string",description:"Path of the rest service such as /foo",title:"Path",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"string",defaultValue:"auto","enum":["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},restBinding:{type:"object",title:"Rest Binding",group:"rest",icon:"generic24.png",description:"To configure rest binding",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"string",defaultValue:"auto","enum":["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data",title:"Out Type",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do.",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},restConfiguration:{type:"object",title:"Rest Configuration",group:"rest",icon:"generic24.png",description:"To configure rest",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{component:{kind:"attribute",type:"string",description:"The Camel Rest component to use for the REST transport such as restlet spark-rest. If no component has been explicit configured then Camel will lookup if there is a Camel component that integrates with the Rest DSL or if a org.apache.camel.spi.RestConsumerFactory is registered in the registry. If either one is found then that is being used.",title:"Component",required:!1,deprecated:!1},scheme:{kind:"attribute",type:"string",description:"The scheme to use for exposing the REST service. Usually http or https is supported. The default value is http",title:"Scheme",required:!1,deprecated:!1},host:{kind:"attribute",type:"string",description:"The hostname to use for exposing the REST service.",title:"Host",required:!1,deprecated:!1},port:{kind:"attribute",type:"string",description:"The port number to use for exposing the REST service. Notice if you use servlet component then the port number configured here does not apply as the port number in use is the actual port number the servlet component is using. eg if using Apache Tomcat its the tomcat http port if using Apache Karaf its the HTTP service in Karaf that uses port 8181 by default etc. Though in those situations setting the port number here allows tooling and JMX to know the port number so its recommended to set the port number to the number that the servlet engine uses.",title:"Port",required:!1,deprecated:!1},contextPath:{kind:"attribute",type:"string",description:"Sets a leading context-path the REST services will be using. This can be used when using components such as SERVLET where the deployed web application is deployed using a context-path.",title:"Context Path",required:!1,deprecated:!1},hostNameResolver:{kind:"attribute",type:"string","enum":["localHostName","localIp"],description:"If no hostname has been explicit configured then this resolver is used to compute the hostname the REST service will be using.",title:"Host Name Resolver",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"string",defaultValue:"auto","enum":["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do.",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},jsonDataFormat:{kind:"attribute",type:"string",description:"Name of specific json data format to use. By default json-jackson will be used. Important: This option is only for setting a custom name of the data format not to refer to an existing data format instance.",title:"Json Data Format",required:!1,deprecated:!1},xmlDataFormat:{kind:"attribute",type:"string",description:"Name of specific XML data format to use. By default jaxb will be used. Important: This option is only for setting a custom name of the data format not to refer to an existing data format instance.",title:"Xml Data Format",required:!1,deprecated:!1},componentProperty:{kind:"element",type:"array",description:"Allows to configure as many additional properties for the rest component in use.",title:"Component Property",required:!1,deprecated:!1},endpointProperty:{kind:"element",type:"array",description:"Allows to configure as many additional properties for the rest endpoint in use.",title:"Endpoint Property",required:!1,deprecated:!1},consumerProperty:{kind:"element",type:"array",description:"Allows to configure as many additional properties for the rest consumer in use.",title:"Consumer Property",required:!1,deprecated:!1},dataFormatProperty:{kind:"element",type:"array",description:"Allows to configure as many additional properties for the data formats in use. For example set property prettyPrint to true to have json outputted in pretty mode. The properties can be prefixed to denote the option is only for either JSON or XML and for either the IN or the OUT. The prefixes are: json.in. json.out. xml.in. xml.out. For example a key with value xml.out.mustBeJAXBElement is only for the XML data format for the outgoing. A key without a prefix is a common key for all situations.",title:"Data Format Property",required:!1,deprecated:!1},corsHeaders:{kind:"element",type:"array",description:"Allows to configure custom CORS headers.",title:"Cors Headers",required:!1,deprecated:!1}}},restContextRef:{type:"object",title:"Rest Context Ref",group:"configuration,rest",icon:"generic24.png",description:"To refer to an XML file with rest services defined using the rest-dsl",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{ref:{kind:"attribute",type:"string",description:"Reference to the rest-dsl",title:"Ref",required:!0,deprecated:!1}}},restProperty:{type:"object",title:"Rest Property",group:"rest",icon:"generic24.png",description:"A key value pair",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{key:{kind:"attribute",type:"string",description:"Property key",title:"Key",required:!0,deprecated:!1},value:{kind:"attribute",type:"string",description:"Property value",title:"Value",required:!0,deprecated:!1}}},rests:{type:"object",title:"Rests",group:"rest",
icon:"generic24.png",description:"A series of rest services defined using the rest-dsl",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},verb:{type:"object",title:"Verb",group:"rest",icon:"generic24.png",description:"Rest command",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{method:{kind:"attribute",type:"string",description:"The HTTP verb such as GET or POST",title:"Method",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"Uri template of this REST service such as /id.",title:"Uri",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"string",defaultValue:"auto","enum":["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data This option will override what may be configured on a parent level",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data This option will override what may be configured on a parent level",title:"Out Type",required:!1,deprecated:!1},toOrRoute:{kind:"element",type:"object",description:"To route from this REST service to a Camel endpoint or an inlined route",title:"To Or Route",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}}},dataformats:{avro:{type:"object",title:"Avro",group:"dataformat,transformation",icon:"generic24.png",description:"Avro data format",properties:{instanceClassName:{kind:"attribute",type:"string",description:"Class name to use for marshal and unmarshalling",title:"Instance Class Name",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},barcode:{type:"object",title:"Barcode",group:"dataformat,transformation",icon:"generic24.png",description:"Barcode data format",properties:{width:{kind:"attribute",type:"integer",description:"Width of the barcode",title:"Width",required:!1,deprecated:!1},height:{kind:"attribute",type:"integer",description:"Height of the barcode",title:"Height",required:!1,deprecated:!1},imageType:{kind:"attribute",type:"string",description:"Image type of the barcode such as png",title:"Image Type",required:!1,deprecated:!1},barcodeFormat:{kind:"attribute",type:"string",description:"Barcode format such as QR-Code",title:"Barcode Format",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},base64:{type:"object",title:"Base64",group:"dataformat,transformation",icon:"generic24.png",description:"Base64 data format",properties:{lineLength:{kind:"attribute",type:"integer",defaultValue:"76",description:"To specific a maximum line length for the encoded data. By default 76 is used.",title:"Line Length",required:!1,deprecated:!1},lineSeparator:{kind:"attribute",type:"string",defaultValue:"\r\n",description:"The line separators to use. By default \r\n is used.",title:"Line Separator",required:!1,deprecated:!1},urlSafe:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Instead of emitting '' and '/' we emit '-' and '_' respectively. urlSafe is only applied to encode operations. Decoding seamlessly handles both modes. Is by default false.",title:"Url Safe",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},beanio:{type:"object",title:"BeanIO",group:"dataformat,transformation",icon:"generic24.png",description:"BeanIO data format",properties:{mapping:{kind:"attribute",type:"string",description:"The BeanIO mapping file. Is by default loaded from the classpath. You can prefix with file: http: or classpath: to denote from where to load the mapping file.",title:"Mapping",required:!0,deprecated:!1},streamName:{kind:"attribute",type:"string",description:"The name of the stream to use.",title:"Stream Name",required:!0,deprecated:!1},ignoreUnidentifiedRecords:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore unidentified records.",title:"Ignore Unidentified Records",required:!1,deprecated:!1},ignoreUnexpectedRecords:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore unexpected records.",title:"Ignore Unexpected Records",required:!1,deprecated:!1},ignoreInvalidRecords:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore invalid records.",title:"Ignore Invalid Records",required:!1,deprecated:!1},encoding:{kind:"attribute",type:"string",description:"The charset to use. Is by default the JVM platform default charset.",title:"Encoding",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},bindy:{type:"object",title:"Bindy",group:"dataformat,transformation",icon:"generic24.png",description:"Bindy data format",properties:{type:{kind:"attribute",type:"string","enum":["Csv","Fixed","KeyValue"],description:"Whether to use csv fixed or key value pairs mode.",title:"Type",required:!0,deprecated:!1},packages:{kind:"attribute",type:"array",description:"The java package names to scan for model classes.",title:"Packages",required:!1,deprecated:!1},classType:{kind:"attribute",type:"string",description:"Name of model class to use.",title:"Class Type",required:!1,deprecated:!1},locale:{kind:"attribute",type:"string",description:"To configure a default locale to use such as us for united states. To use the JVM platform default locale then use the name default",title:"Locale",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},castor:{type:"object",title:"Castor",group:"dataformat,transformation",icon:"generic24.png",description:"Castor data format",properties:{mappingFile:{kind:"attribute",type:"string",description:"Path to a Castor mapping file to load from the classpath.",title:"Mapping File",required:!1,deprecated:!1},validation:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether validation is turned on or off. Is by default true.",title:"Validation",required:!1,deprecated:!1},encoding:{kind:"attribute",type:"string",defaultValue:"UTF-8",description:"Encoding to use when marshalling an Object to XML. Is by default UTF-8",title:"Encoding",required:!1,deprecated:!1},packages:{kind:"attribute",type:"array",description:"Add additional packages to Castor XmlContext",title:"Packages",required:!1,deprecated:!1},classes:{kind:"attribute",type:"array",description:"Add additional class names to Castor XmlContext",title:"Classes",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},crypto:{type:"object",title:"Crypto (Java Cryptographic Extension)",group:"dataformat,transformation",icon:"generic24.png",description:"Crypto data format",properties:{algorithm:{kind:"attribute",type:"string",defaultValue:"DES/CBC/PKCS5Padding",description:"The JCE algorithm name indicating the cryptographic algorithm that will be used. Is by default DES/CBC/PKCS5Padding.",title:"Algorithm",required:!1,deprecated:!1},cryptoProvider:{kind:"attribute",type:"string",description:"The name of the JCE Security Provider that should be used.",title:"Crypto Provider",required:!1,deprecated:!1},keyRef:{kind:"attribute",type:"string",description:"Refers to the secret key to lookup from the register to use.",title:"Key Ref",required:!1,deprecated:!1},initVectorRef:{kind:"attribute",type:"string",description:"Refers to a byte array containing the Initialization Vector that will be used to initialize the Cipher.",title:"Init Vector Ref",required:!1,deprecated:!1},algorithmParameterRef:{kind:"attribute",type:"string",description:"A JCE AlgorithmParameterSpec used to initialize the Cipher. Will lookup the type using the given name as a java.security.spec.AlgorithmParameterSpec type.",title:"Algorithm Parameter Ref",required:!1,deprecated:!1},buffersize:{kind:"attribute",type:"integer",description:"The size of the buffer used in the signature process.",title:"Buffersize",required:!1,deprecated:!1},macAlgorithm:{kind:"attribute",type:"string",defaultValue:"HmacSHA1",description:"The JCE algorithm name indicating the Message Authentication algorithm.",title:"Mac Algorithm",required:!1,deprecated:!1},shouldAppendHMAC:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Flag indicating that a Message Authentication Code should be calculated and appended to the encrypted data.",title:"Should Append H M A C",required:!1,deprecated:!1},inline:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Flag indicating that the configured IV should be inlined into the encrypted data stream. Is by default false.",title:"Inline",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},csv:{type:"object",title:"CSV",group:"dataformat,transformation",icon:"generic24.png",description:"CSV data format",properties:{formatRef:{kind:"attribute",type:"string",description:"The reference format to use it will be updated with the other format options the default value is CSVFormat.DEFAULT",title:"Format Ref",required:!1,deprecated:!1},formatName:{kind:"attribute",type:"string",description:"The name of the format to use the default value is CSVFormat.DEFAULT",title:"Format Name",required:!1,deprecated:!1},commentMarkerDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Disables the comment marker of the reference format.",title:"Comment Marker Disabled",required:!1,deprecated:!1},commentMarker:{kind:"attribute",type:"string",description:"Sets the comment marker of the reference format.",title:"Comment Marker",required:!1,deprecated:!1},delimiter:{kind:"attribute",type:"string",description:"Sets the delimiter to use. The default value is (comma)",title:"Delimiter",required:!1,deprecated:!1},escapeDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Use for disabling using escape character",title:"Escape Disabled",required:!1,deprecated:!1},escape:{kind:"attribute",type:"string",description:"Sets the escape character to use",title:"Escape",required:!1,deprecated:!1},headerDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Use for disabling headers",title:"Header Disabled",required:!1,deprecated:!1},header:{kind:"element",type:"array",description:"To configure the CSV headers",title:"Header",required:!1,deprecated:!1},allowMissingColumnNames:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to allow missing column names.",title:"Allow Missing Column Names",required:!1,deprecated:!1},ignoreEmptyLines:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore empty lines.",title:"Ignore Empty Lines",required:!1,deprecated:!1},ignoreSurroundingSpaces:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore surrounding spaces",title:"Ignore Surrounding Spaces",required:!1,deprecated:!1},nullStringDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Used to disable null strings",title:"Null String Disabled",required:!1,deprecated:!1},nullString:{kind:"attribute",type:"string",description:"Sets the null string",title:"Null String",required:!1,deprecated:!1},quoteDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Used to disable quotes",title:"Quote Disabled",required:!1,deprecated:!1},quote:{kind:"attribute",type:"string",description:"Sets the quote which by default is",title:"Quote",required:!1,deprecated:!1},recordSeparatorDisabled:{kind:"attribute",type:"string",description:"Used for disabling record separator",title:"Record Separator Disabled",required:!1,deprecated:!1},recordSeparator:{kind:"attribute",type:"string",description:"Sets the record separator (aka new line) which by default is \r\n (CRLF)",title:"Record Separator",required:!1,deprecated:!1},skipHeaderRecord:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip the header record in the output",title:"Skip Header Record",required:!1,deprecated:!1},lazyLoad:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce an iterator that reads the lines on the fly or if all the lines must be read at one.",title:"Lazy Load",required:!1,deprecated:!1},useMaps:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce maps for the lines values instead of lists. It requires to have header (either defined or collected).",title:"Use Maps",required:!1,deprecated:!1},recordConverterRef:{kind:"attribute",type:"string",description:"Refers to a custom CsvRecordConverter to lookup from the registry to use.",title:"Record Converter Ref",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},customDataFormat:{type:"object",title:"Custom",group:"dataformat,transformation",icon:"generic24.png",description:"Custom data format",properties:{ref:{kind:"attribute",type:"string",description:"Reference to the custom org.apache.camel.spi.DataFormat to lookup from the Camel registry.",title:"Ref",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},dataFormats:{type:"object",title:"Data formats",group:"dataformat,transformation",icon:"generic24.png",description:"To configure data formats",properties:{dataFormats:{kind:"element",type:"array",description:"A list holding the configured data formats",title:"Data Formats",required:!0,deprecated:!1}}},flatpack:{type:"object",title:"Flatpack",group:"dataformat,transformation",icon:"generic24.png",description:"Flatpack data format",properties:{parserFactoryRef:{kind:"attribute",type:"string",description:"References to a custom parser factory to lookup in the registry",title:"Parser Factory Ref",required:!1,deprecated:!1},definition:{kind:"attribute",type:"string",description:"The flatpack pzmap configuration file. Can be omitted in simpler situations but its preferred to use the pzmap.",title:"Definition",required:!1,deprecated:!1},fixed:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Delimited or fixed. Is by default false = delimited",title:"Fixed",required:!1,deprecated:!1},ignoreFirstRecord:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether the first line is ignored for delimited files (for the column headers). Is by default true.",title:"Ignore First Record",required:!1,deprecated:!1},textQualifier:{kind:"attribute",type:"string",defaultValue:'"',description:'If the text is qualified with a char such as "',title:"Text Qualifier",required:!1,deprecated:!1},delimiter:{kind:"attribute",type:"string",defaultValue:",",description:"The delimiter char (could be ; or similar)",title:"Delimiter",required:!1,deprecated:!1},allowShortLines:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Allows for lines to be shorter than expected and ignores the extra characters",title:"Allow Short Lines",required:!1,deprecated:!1},ignoreExtraColumns:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Allows for lines to be longer than expected and ignores the extra characters.",title:"Ignore Extra Columns",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},gzip:{type:"object",title:"GZip",group:"dataformat,transformation",icon:"generic24.png",description:"GZip data format",properties:{id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},hl7:{type:"object",title:"HL7",group:"dataformat,transformation,hl7",icon:"generic24.png",description:"HL7 data format",properties:{validate:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to validate the HL7 message Is by default true.",title:"Validate",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},ical:{type:"object",title:"iCal",group:"dataformat,transformation",icon:"generic24.png",description:"iCal data format",properties:{validating:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to validate.",title:"Validating",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},jaxb:{type:"object",title:"JAXB",group:"dataformat,transformation",icon:"generic24.png",description:"JAXB data format",properties:{contextPath:{kind:"attribute",type:"string",description:"Package name where your JAXB classes are located.",title:"Context Path",required:!0,deprecated:!1},schema:{kind:"attribute",type:"string",description:"To validate against an existing schema. Your can use the prefix classpath: file: or http: to specify how the resource should by resolved. You can separate multiple schema files by using the '' character.",title:"Schema",required:!1,deprecated:!1},prettyPrint:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To enable pretty printing output nicely formatted. Is by default false.",title:"Pretty Print",required:!1,deprecated:!1},ignoreJAXBElement:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore JAXBElement elements - only needed to be set to false in very special use-cases.",title:"Ignore J A X B Element",required:!1,deprecated:!1},mustBeJAXBElement:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether marhsalling must be java objects with JAXB annotations. And if not then it fails. This option can be set to false to relax that such as when the data is already in XML format.",title:"Must Be J A X B Element",required:!1,deprecated:!1},filterNonXmlChars:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To ignore non xml characheters and replace them with an empty space.",title:"Filter Non Xml Chars",required:!1,deprecated:!1},encoding:{kind:"attribute",type:"string",description:"To overrule and use a specific encoding",title:"Encoding",required:!1,deprecated:!1},fragment:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To turn on marshalling XML fragment trees. By default JAXB looks for XmlRootElement annotation on given class to operate on whole XML tree. This is useful but not always - sometimes generated code does not have XmlRootElement annotation sometimes you need unmarshall only part of tree. In that case you can use partial unmarshalling. To enable this behaviours you need set property partClass. Camel will pass this class to JAXB's unmarshaler.",title:"Fragment",required:!1,deprecated:!1},partClass:{kind:"attribute",type:"string",description:"Name of class used for fragment parsing. See more details at the fragment option.",title:"Part Class",required:!1,deprecated:!1},partNamespace:{kind:"attribute",type:"string",description:"XML namespace to use for fragment parsing. See more details at the fragment option.",title:"Part Namespace",required:!1,deprecated:!1},namespacePrefixRef:{kind:"attribute",type:"string",description:"When marshalling using JAXB or SOAP then the JAXB implementation will automatic assign namespace prefixes such as ns2 ns3 ns4 etc. To control this mapping Camel allows you to refer to a map which contains the desired mapping.",title:"Namespace Prefix Ref",required:!1,deprecated:!1},xmlStreamWriterWrapper:{kind:"attribute",type:"string",description:"To use a custom xml stream writer.",title:"Xml Stream Writer Wrapper",required:!1,deprecated:!1},schemaLocation:{kind:"attribute",type:"string",description:"To define the location of the schema",title:"Schema Location",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},jibx:{type:"object",title:"JiBX",group:"dataformat,transformation",icon:"generic24.png",description:"JiBX data format",properties:{unmarshallClass:{kind:"attribute",type:"string",description:"Class name to use when unmarshalling from XML to Java.",title:"Unmarshall Class",required:!1,deprecated:!1},bindingName:{kind:"attribute",type:"string",description:"To use a custom binding factory",title:"Binding Name",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},json:{type:"object",title:"JSon",group:"dataformat,transformation",icon:"generic24.png",description:"Json data format",properties:{prettyPrint:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To enable pretty printing output nicely formatted. Is by default false.",title:"Pretty Print",required:!1,deprecated:!1},library:{kind:"attribute",type:"string",defaultValue:"XStream","enum":["Gson","Jackson","XStream"],description:"Which json library to use such. Is by default xstream",title:"Library",required:!1,deprecated:!1},unmarshalTypeName:{kind:"attribute",type:"string",description:"Class name of the java type to use when unarmshalling",title:"Unmarshal Type Name",required:!1,deprecated:!1},jsonView:{kind:"attribute",type:"string",description:"When marshalling a POJO to JSON you might want to exclude certain fields from the JSON output. With Jackson you can use JSON views to accomplish this. This option is to refer to the class which has JsonView annotations",title:"Json View",required:!1,deprecated:!1},include:{kind:"attribute",type:"string",description:"If you want to marshal a pojo to JSON and the pojo has some fields with null values. And you want to skip these null values you can set this option to NOT_NULL",title:"Include",required:!1,deprecated:!1},allowJmsType:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Used for JMS users to allow the JMSType header from the JMS spec to specify a FQN classname to use to unmarshal to.",title:"Allow Jms Type",required:!1,deprecated:!1},collectionTypeName:{kind:"attribute",type:"string",description:"Refers to a custom collection type to lookup in the registry to use. This option should rarely be used but allows to use different collection types than java.util.Collection based as default.",title:"Collection Type Name",required:!1,deprecated:!1},useList:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To unarmshal to a List of Map or a List of Pojo.",title:"Use List",required:!1,deprecated:!1},enableJaxbAnnotationModule:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable the JAXB annotations module when using jackson. When enabled then JAXB annotations can be used by Jackson.",title:"Enable Jaxb Annotation Module",required:!1,deprecated:!1},moduleClassNames:{kind:"attribute",type:"string",description:"To use custom Jackson modules com.fasterxml.jackson.databind.Module specified as a String with FQN class names. Multiple classes can be separated by comma.",title:"Module Class Names",required:!1,deprecated:!1},moduleRefs:{kind:"attribute",type:"string",description:"To use custom Jackson modules referred from the Camel registry. Multiple modules can be separated by comma.",title:"Module Refs",required:!1,deprecated:!1},enableFeatures:{kind:"attribute",type:"string",description:"Set of features to enable on the Jackson com.fasterxml.jackson.databind.ObjectMapper. The features should be a name that matches a enum from com.fasterxml.jackson.databind.SerializationFeature com.fasterxml.jackson.databind.DeserializationFeature or com.fasterxml.jackson.databind.MapperFeature Multiple features can be separated by comma",title:"Enable Features",required:!1,deprecated:!1},disableFeatures:{kind:"attribute",type:"string",description:"Set of features to disable on the Jackson com.fasterxml.jackson.databind.ObjectMapper. The features should be a name that matches a enum from com.fasterxml.jackson.databind.SerializationFeature com.fasterxml.jackson.databind.DeserializationFeature or com.fasterxml.jackson.databind.MapperFeature Multiple features can be separated by comma",title:"Disable Features",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},pgp:{type:"object",title:"PGP",group:"dataformat,transformation",icon:"generic24.png",description:"PGP data format",properties:{keyUserid:{kind:"attribute",type:"string",description:"The user ID of the key in the PGP keyring used during encryption. Can also be only a part of a user ID. For example if the user ID is Test User then you can use the part Test User or to address the user ID.",title:"Key Userid",required:!1,deprecated:!1},signatureKeyUserid:{kind:"attribute",type:"string",description:"User ID of the key in the PGP keyring used for signing (during encryption) or signature verification (during decryption). During the signature verification process the specified User ID restricts the public keys from the public keyring which can be used for the verification. If no User ID is specified for the signature verficiation then any public key in the public keyring can be used for the verification. Can also be only a part of a user ID. For example if the user ID is Test User then you can use the part Test User or to address the User ID.",title:"Signature Key Userid",required:!1,deprecated:!1},password:{kind:"attribute",type:"string",description:"Password used when opening the private key (not used for encryption).",title:"Password",required:!1,deprecated:!1},signaturePassword:{kind:"attribute",type:"string",description:"Password used when opening the private key used for signing (during encryption).",title:"Signature Password",required:!1,deprecated:!1},keyFileName:{kind:"attribute",type:"string",description:"Filename of the keyring; must be accessible as a classpath resource (but you can specify a location in the file system by using the file: prefix).",title:"Key File Name",required:!1,deprecated:!1},signatureKeyFileName:{kind:"attribute",type:"string",description:"Filename of the keyring to use for signing (during encryption) or for signature verification (during decryption); must be accessible as a classpath resource (but you can specify a location in the file system by using the file: prefix).",title:"Signature Key File Name",required:!1,deprecated:!1},signatureKeyRing:{kind:"attribute",type:"string",description:"Keyring used for signing/verifying as byte array. You can not set the signatureKeyFileName and signatureKeyRing at the same time.",title:"Signature Key Ring",required:!1,deprecated:!1},armored:{kind:"attribute",type:"boolean",defaultValue:"false",description:"This option will cause PGP to base64 encode the encrypted text making it available for copy/paste etc.",title:"Armored",required:!1,deprecated:!1},integrity:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Adds an integrity check/sign into the encryption file. The default value is true.",title:"Integrity",required:!1,deprecated:!1},provider:{kind:"attribute",type:"string",description:"Java Cryptography Extension (JCE) provider default is Bouncy Castle (BC). Alternatively you can use for example the IAIK JCE provider; in this case the provider must be registered beforehand and the Bouncy Castle provider must not be registered beforehand. The Sun JCE provider does not work.",title:"Provider",required:!1,deprecated:!1},algorithm:{kind:"attribute",type:"integer",description:"Symmetric key encryption algorithm; possible values are defined in org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags; for example 2 (= TRIPLE DES) 3 (= CAST5) 4 (= BLOWFISH) 6 (= DES) 7 (= AES_128). Only relevant for encrypting.",title:"Algorithm",required:!1,deprecated:!1},compressionAlgorithm:{kind:"attribute",type:"integer",description:"Compression algorithm; possible values are defined in org.bouncycastle.bcpg.CompressionAlgorithmTags; for example 0 (= UNCOMPRESSED) 1 (= ZIP) 2 (= ZLIB) 3 (= BZIP2). Only relevant for encrypting.",title:"Compression Algorithm",required:!1,deprecated:!1},hashAlgorithm:{kind:"attribute",type:"integer",description:"Signature hash algorithm; possible values are defined in org.bouncycastle.bcpg.HashAlgorithmTags; for example 2 (= SHA1) 8 (= SHA256) 9 (= SHA384) 10 (= SHA512) 11 (=SHA224). Only relevant for signing.",title:"Hash Algorithm",required:!1,deprecated:!1},signatureVerificationOption:{kind:"attribute",type:"string",description:"Controls the behavior for verifying the signature during unmarshaling. There are 4 values possible: optional: The PGP message may or may not contain signatures; if it does contain signatures then a signature verification is executed. required: The PGP message must contain at least one signature; if this is not the case an exception (PGPException) is thrown. A signature verification is executed. ignore: Contained signatures in the PGP message are ignored; no signature verification is executed. no_signature_allowed: The PGP message must not contain a signature; otherwise an exception (PGPException) is thrown.",title:"Signature Verification Option",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},protobuf:{type:"object",title:"Protobuf",group:"dataformat,transformation",icon:"generic24.png",description:"Google protobuf data format",properties:{instanceClass:{kind:"attribute",type:"string",description:"Name of class to use when unarmshalling",title:"Instance Class",
required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},rss:{type:"object",title:"RSS",group:"dataformat,transformation",icon:"generic24.png",description:"RSS data format",properties:{id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},secureXML:{type:"object",title:"XML Security",group:"dataformat,transformation",icon:"generic24.png",description:"xml-security data format",properties:{xmlCipherAlgorithm:{kind:"attribute",type:"string",defaultValue:"TRIPLEDES",description:"The cipher algorithm to be used for encryption/decryption of the XML message content. The available choices are: XMLCipher.TRIPLEDES XMLCipher.AES_128 XMLCipher.AES_128_GCM XMLCipher.AES_192 XMLCipher.AES_192_GCM XMLCipher.AES_256 XMLCipher.AES_256_GCM XMLCipher.SEED_128 XMLCipher.CAMELLIA_128 XMLCipher.CAMELLIA_192 XMLCipher.CAMELLIA_256 The default value is MLCipher.TRIPLEDES",title:"Xml Cipher Algorithm",required:!1,deprecated:!1},passPhrase:{kind:"attribute",type:"string",description:"A String used as passPhrase to encrypt/decrypt content. The passPhrase has to be provided. If no passPhrase is specified a default passPhrase is used. The passPhrase needs to be put together in conjunction with the appropriate encryption algorithm. For example using TRIPLEDES the passPhase can be a Only another 24 Byte key",title:"Pass Phrase",required:!1,deprecated:!1},secureTag:{kind:"attribute",type:"string",description:"The XPath reference to the XML Element selected for encryption/decryption. If no tag is specified the entire payload is encrypted/decrypted.",title:"Secure Tag",required:!1,deprecated:!1},secureTagContents:{kind:"attribute",type:"boolean",defaultValue:"false",description:"A boolean value to specify whether the XML Element is to be encrypted or the contents of the XML Element false = Element Level true = Element Content Level",title:"Secure Tag Contents",required:!1,deprecated:!1},keyCipherAlgorithm:{kind:"attribute",type:"string",defaultValue:"RSA_OAEP",description:"The cipher algorithm to be used for encryption/decryption of the asymmetric key. The available choices are: XMLCipher.RSA_v1dot5 XMLCipher.RSA_OAEP XMLCipher.RSA_OAEP_11 The default value is XMLCipher.RSA_OAEP",title:"Key Cipher Algorithm",required:!1,deprecated:!1},recipientKeyAlias:{kind:"attribute",type:"string",description:"The key alias to be used when retrieving the recipient's public or private key from a KeyStore when performing asymmetric key encryption or decryption.",title:"Recipient Key Alias",required:!1,deprecated:!1},keyOrTrustStoreParametersId:{kind:"attribute",type:"string",description:"Refers to a KeyStore instance to lookup in the registry which is used for configuration options for creating and loading a KeyStore instance that represents the sender's trustStore or recipient's keyStore.",title:"Key Or Trust Store Parameters Id",required:!1,deprecated:!1},keyPassword:{kind:"attribute",type:"string",description:"The password to be used for retrieving the private key from the KeyStore. This key is used for asymmetric decryption.",title:"Key Password",required:!1,deprecated:!1},digestAlgorithm:{kind:"attribute",type:"string",defaultValue:"SHA1",description:"The digest algorithm to use with the RSA OAEP algorithm. The available choices are: XMLCipher.SHA1 XMLCipher.SHA256 XMLCipher.SHA512 The default value is XMLCipher.SHA1",title:"Digest Algorithm",required:!1,deprecated:!1},mgfAlgorithm:{kind:"attribute",type:"string",defaultValue:"MGF1_SHA1",description:"The MGF Algorithm to use with the RSA OAEP algorithm. The available choices are: EncryptionConstants.MGF1_SHA1 EncryptionConstants.MGF1_SHA256 EncryptionConstants.MGF1_SHA512 The default value is EncryptionConstants.MGF1_SHA1",title:"Mgf Algorithm",required:!1,deprecated:!1},addKeyValueForEncryptedKey:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to add the public key used to encrypt the session key as a KeyValue in the EncryptedKey structure or not.",title:"Add Key Value For Encrypted Key",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},serialization:{type:"object",title:"Java Object Serialization",group:"dataformat,transformation",icon:"generic24.png",description:"Java Object Serialization data format",properties:{id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},soapjaxb:{type:"object",title:"SOAP",group:"dataformat,transformation",icon:"generic24.png",description:"SOAP data format",properties:{contextPath:{kind:"attribute",type:"string",description:"Package name where your JAXB classes are located.",title:"Context Path",required:!0,deprecated:!1},encoding:{kind:"attribute",type:"string",description:"To overrule and use a specific encoding",title:"Encoding",required:!1,deprecated:!1},elementNameStrategyRef:{kind:"attribute",type:"string",description:"Refers to an element strategy to lookup from the registry. An element name strategy is used for two purposes. The first is to find a xml element name for a given object and soap action when marshaling the object into a SOAP message. The second is to find an Exception class for a given soap fault name. The following three element strategy class name is provided out of the box. QNameStrategy - Uses a fixed qName that is configured on instantiation. Exception lookup is not supported TypeNameStrategy - Uses the name and namespace from the XMLType annotation of the given type. If no namespace is set then package-info is used. Exception lookup is not supported ServiceInterfaceStrategy - Uses information from a webservice interface to determine the type name and to find the exception class for a SOAP fault All three classes is located in the package name org.apache.camel.dataformat.soap.name If you have generated the web service stub code with cxf-codegen or a similar tool then you probably will want to use the ServiceInterfaceStrategy. In the case you have no annotated service interface you should use QNameStrategy or TypeNameStrategy.",title:"Element Name Strategy Ref",required:!1,deprecated:!1},version:{kind:"attribute",type:"string",defaultValue:"1.1",description:"SOAP version should either be 1.1 or 1.2. Is by default 1.1",title:"Version",required:!1,deprecated:!1},namespacePrefixRef:{kind:"attribute",type:"string",description:"When marshalling using JAXB or SOAP then the JAXB implementation will automatic assign namespace prefixes such as ns2 ns3 ns4 etc. To control this mapping Camel allows you to refer to a map which contains the desired mapping.",title:"Namespace Prefix Ref",required:!1,deprecated:!1},schema:{kind:"attribute",type:"string",description:"To validate against an existing schema. Your can use the prefix classpath: file: or http: to specify how the resource should by resolved. You can separate multiple schema files by using the '' character.",title:"Schema",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},string:{type:"object",title:"String Encoding",group:"dataformat,transformation",icon:"generic24.png",description:"Represents the String (text based) DataFormat",properties:{charset:{kind:"attribute",type:"string",description:"Sets an encoding to use. Will by default use the JVM platform default charset.",title:"Charset",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},syslog:{type:"object",title:"Syslog",group:"dataformat,transformation",icon:"generic24.png",description:"Syslog data format",properties:{id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},tidyMarkup:{type:"object",title:"TidyMarkup",group:"dataformat,transformation",icon:"generic24.png",description:"Tidymark (wellformed HTML) data format",properties:{dataObjectType:{kind:"attribute",type:"string",description:"What data type to unmarshal as can either be org.w3c.dom.Node or java.lang.String. Is by default org.w3c.dom.Node",title:"Data Object Type",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},"univocity-csv":{type:"object",title:"uniVocity CSV",group:"dataformat,transformation",icon:"generic24.png",description:"UniVocity CSV data format",properties:{quoteAllFields:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not all values must be quoted when writing them.",title:"Quote All Fields",required:!1,deprecated:!1},quote:{kind:"attribute",type:"string",defaultValue:'"',description:"The quote symbol.",title:"Quote",required:!1,deprecated:!1},quoteEscape:{kind:"attribute",type:"string",defaultValue:'"',description:"The quote escape symbol",title:"Quote Escape",required:!1,deprecated:!1},delimiter:{kind:"attribute",type:"string",defaultValue:",",description:"The delimiter of values",title:"Delimiter",required:!1,deprecated:!1},nullValue:{kind:"attribute",type:"string",description:"The string representation of a null value. The default value is null",title:"Null Value",required:!1,deprecated:!1},skipEmptyLines:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the empty lines must be ignored. The default value is true",title:"Skip Empty Lines",required:!1,deprecated:!1},ignoreTrailingWhitespaces:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the trailing white spaces must ignored. The default value is true",title:"Ignore Trailing Whitespaces",required:!1,deprecated:!1},ignoreLeadingWhitespaces:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the leading white spaces must be ignored. The default value is true",title:"Ignore Leading Whitespaces",required:!1,deprecated:!1},headersDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the headers are disabled. When defined this option explicitly sets the headers as null which indicates that there is no header. The default value is false",title:"Headers Disabled",required:!1,deprecated:!1},headerExtractionEnabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the header must be read in the first line of the test document The default value is false",title:"Header Extraction Enabled",required:!1,deprecated:!1},numberOfRecordsToRead:{kind:"attribute",type:"integer",description:"The maximum number of record to read.",title:"Number Of Records To Read",required:!1,deprecated:!1},emptyValue:{kind:"attribute",type:"string",description:"The String representation of an empty value",title:"Empty Value",required:!1,deprecated:!1},lineSeparator:{kind:"attribute",type:"string",description:"The line separator of the files The default value is to use the JVM platform line separator",title:"Line Separator",required:!1,deprecated:!1},normalizedLineSeparator:{kind:"attribute",type:"string",defaultValue:"\n",description:"The normalized line separator of the files The default value is \n",title:"Normalized Line Separator",required:!1,deprecated:!1},comment:{kind:"attribute",type:"string",defaultValue:"#",description:"The comment symbol. The default value is",title:"Comment",required:!1,deprecated:!1},lazyLoad:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce an iterator that reads the lines on the fly or if all the lines must be read at one. The default value is false",title:"Lazy Load",required:!1,deprecated:!1},asMap:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce maps for the lines values instead of lists. It requires to have header (either defined or collected). The default value is false",title:"As Map",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},"univocity-fixed":{type:"object",title:"uniVocity Fixed Length",group:"dataformat,transformation",icon:"generic24.png",description:"UniVocity fixed-width data format",properties:{skipTrailingCharsUntilNewline:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the trailing characters until new line must be ignored. The default value is false",title:"Skip Trailing Chars Until Newline",required:!1,deprecated:!1},recordEndsOnNewline:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the record ends on new line. The default value is false",title:"Record Ends On Newline",required:!1,deprecated:!1},padding:{kind:"attribute",type:"string",defaultValue:"",description:"The padding character. The default value is a space",title:"Padding",required:!1,deprecated:!1},nullValue:{kind:"attribute",type:"string",description:"The string representation of a null value. The default value is null",title:"Null Value",required:!1,deprecated:!1},skipEmptyLines:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the empty lines must be ignored. The default value is true",title:"Skip Empty Lines",required:!1,deprecated:!1},ignoreTrailingWhitespaces:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the trailing white spaces must ignored. The default value is true",title:"Ignore Trailing Whitespaces",required:!1,deprecated:!1},ignoreLeadingWhitespaces:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the leading white spaces must be ignored. The default value is true",title:"Ignore Leading Whitespaces",required:!1,deprecated:!1},headersDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the headers are disabled. When defined this option explicitly sets the headers as null which indicates that there is no header. The default value is false",title:"Headers Disabled",required:!1,deprecated:!1},headerExtractionEnabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the header must be read in the first line of the test document The default value is false",title:"Header Extraction Enabled",required:!1,deprecated:!1},numberOfRecordsToRead:{kind:"attribute",type:"integer",description:"The maximum number of record to read.",title:"Number Of Records To Read",required:!1,deprecated:!1},emptyValue:{kind:"attribute",type:"string",description:"The String representation of an empty value",title:"Empty Value",required:!1,deprecated:!1},lineSeparator:{kind:"attribute",type:"string",description:"The line separator of the files The default value is to use the JVM platform line separator",title:"Line Separator",required:!1,deprecated:!1},normalizedLineSeparator:{kind:"attribute",type:"string",defaultValue:"\n",description:"The normalized line separator of the files The default value is \n",title:"Normalized Line Separator",required:!1,deprecated:!1},comment:{kind:"attribute",type:"string",defaultValue:"#",description:"The comment symbol. The default value is",title:"Comment",required:!1,deprecated:!1},lazyLoad:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce an iterator that reads the lines on the fly or if all the lines must be read at one. The default value is false",title:"Lazy Load",required:!1,deprecated:!1},asMap:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce maps for the lines values instead of lists. It requires to have header (either defined or collected). The default value is false",title:"As Map",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},"univocity-header":{type:"object",title:"uniVocity Header",group:"dataformat,transformation",icon:"generic24.png",description:"To configure headers for UniVocity data formats.",properties:{name:{kind:"value",type:"string",description:"Header name",title:"Name",required:!0,deprecated:!1},length:{kind:"attribute",type:"integer",description:"Header length",title:"Length",required:!1,deprecated:!1}}},"univocity-tsv":{type:"object",title:"uniVocity TSV",group:"dataformat,transformation",icon:"generic24.png",description:"UniVocity TSV data format",properties:{escapeChar:{kind:"attribute",type:"string",defaultValue:"\\",description:"The escape character.",title:"Escape Char",required:!1,deprecated:!1},nullValue:{kind:"attribute",type:"string",description:"The string representation of a null value. The default value is null",title:"Null Value",required:!1,deprecated:!1},skipEmptyLines:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the empty lines must be ignored. The default value is true",title:"Skip Empty Lines",required:!1,deprecated:!1},ignoreTrailingWhitespaces:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the trailing white spaces must ignored. The default value is true",title:"Ignore Trailing Whitespaces",required:!1,deprecated:!1},ignoreLeadingWhitespaces:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the leading white spaces must be ignored. The default value is true",title:"Ignore Leading Whitespaces",required:!1,deprecated:!1},headersDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the headers are disabled. When defined this option explicitly sets the headers as null which indicates that there is no header. The default value is false",title:"Headers Disabled",required:!1,deprecated:!1},headerExtractionEnabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the header must be read in the first line of the test document The default value is false",title:"Header Extraction Enabled",required:!1,deprecated:!1},numberOfRecordsToRead:{kind:"attribute",type:"integer",description:"The maximum number of record to read.",title:"Number Of Records To Read",required:!1,deprecated:!1},emptyValue:{kind:"attribute",type:"string",description:"The String representation of an empty value",title:"Empty Value",required:!1,deprecated:!1},lineSeparator:{kind:"attribute",type:"string",description:"The line separator of the files The default value is to use the JVM platform line separator",title:"Line Separator",required:!1,deprecated:!1},normalizedLineSeparator:{kind:"attribute",type:"string",defaultValue:"\n",description:"The normalized line separator of the files The default value is \n",title:"Normalized Line Separator",required:!1,deprecated:!1},comment:{kind:"attribute",type:"string",defaultValue:"#",description:"The comment symbol. The default value is",title:"Comment",required:!1,deprecated:!1},lazyLoad:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce an iterator that reads the lines on the fly or if all the lines must be read at one. The default value is false",title:"Lazy Load",required:!1,deprecated:!1},asMap:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce maps for the lines values instead of lists. It requires to have header (either defined or collected). The default value is false",title:"As Map",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},xmlBeans:{type:"object",title:"XML Beans",group:"dataformat,transformation",icon:"generic24.png",description:"XMLBeans data format",properties:{prettyPrint:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To enable pretty printing output nicely formatted. Is by default false.",title:"Pretty Print",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},xmljson:{type:"object",title:"XML JSon",group:"dataformat,transformation",icon:"generic24.png",description:"xml-json data format",properties:{encoding:{kind:"attribute",type:"string",description:"Sets the encoding. Used for unmarshalling (JSON to XML conversion).",title:"Encoding",required:!1,deprecated:!1},elementName:{kind:"attribute",type:"string",description:"Specifies the name of the XML elements representing each array element. Used for unmarshalling (JSON to XML conversion).",title:"Element Name",required:!1,deprecated:!1},arrayName:{kind:"attribute",type:"string",description:"Specifies the name of the top-level XML element. Used for unmarshalling (JSON to XML conversion). For example when converting 1 2 3 it will be output by default as 123. By setting this option or rootName you can alter the name of element 'a'.",title:"Array Name",required:!1,deprecated:!1},forceTopLevelObject:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Determines whether the resulting JSON will start off with a top-most element whose name matches the XML root element. Used for marshalling (XML to JSon conversion). If disabled XML string 12 turns into 'x: '1' 'y': '2' . Otherwise it turns into 'a': 'x: '1' 'y': '2' .",title:"Force Top Level Object",required:!1,deprecated:!1},namespaceLenient:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Flag to be tolerant to incomplete namespace prefixes. Used for unmarshalling (JSON to XML conversion). In most cases json-lib automatically changes this flag at runtime to match the processing.",title:"Namespace Lenient",required:!1,deprecated:!1},rootName:{kind:"attribute",type:"string",description:"Specifies the name of the top-level element. Used for unmarshalling (JSON to XML conversion). If not set json-lib will use arrayName or objectName (default value: 'o' at the current time it is not configurable in this data format). If set to 'root' the JSON string 'x': 'value1' 'y' : 'value2' would turn into value1value2 otherwise the 'root' element would be named 'o'.",title:"Root Name",required:!1,deprecated:!1},skipWhitespace:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Determines whether white spaces between XML elements will be regarded as text values or disregarded. Used for marshalling (XML to JSon conversion).",title:"Skip Whitespace",required:!1,deprecated:!1},trimSpaces:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Determines whether leading and trailing white spaces will be omitted from String values. Used for marshalling (XML to JSon conversion).",title:"Trim Spaces",required:!1,deprecated:!1},skipNamespaces:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Signals whether namespaces should be ignored. By default they will be added to the JSON output using xmlns elements. Used for marshalling (XML to JSon conversion).",title:"Skip Namespaces",required:!1,deprecated:!1},removeNamespacePrefixes:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Removes the namespace prefixes from XML qualified elements so that the resulting JSON string does not contain them. Used for marshalling (XML to JSon conversion).",title:"Remove Namespace Prefixes",required:!1,deprecated:!1},expandableProperties:{kind:"attribute",type:"array",description:"With expandable properties JSON array elements are converted to XML as a sequence of repetitive XML elements with the local name equal to the JSON key for example: number: 123 normally converted to: 123 (where e can be modified by setting elementName) would instead translate to 123 if number is set as an expandable property Used for unmarshalling (JSON to XML conversion).",title:"Expandable Properties",required:!1,deprecated:!1},typeHints:{kind:"attribute",type:"string",description:"Adds type hints to the resulting XML to aid conversion back to JSON. Used for unmarshalling (JSON to XML conversion).",title:"Type Hints",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},xmlrpc:{type:"object",title:"XML RPC",group:"dataformat,transformation",icon:"generic24.png",description:"xml-rpc data format",properties:{request:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to unmarshal request or response Is by default false",title:"Request",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},xstream:{type:"object",title:"XStream",group:"dataformat,transformation",icon:"generic24.png",description:"xstream data format",properties:{encoding:{kind:"attribute",type:"string",description:"Sets the encoding to use",title:"Encoding",required:!1,deprecated:!1},driver:{kind:"attribute",type:"string",description:"To use a custom XStream driver. The instance must be of type com.thoughtworks.xstream.io.HierarchicalStreamDriver",title:"Driver",required:!1,deprecated:!1},driverRef:{kind:"attribute",type:"string",description:"To refer to a custom XStream driver to lookup in the registry. The instance must be of type com.thoughtworks.xstream.io.HierarchicalStreamDriver",title:"Driver Ref",required:!1,deprecated:!1},mode:{kind:"attribute",type:"string",description:"Mode for dealing with duplicate references The possible values are: NO_REFERENCES ID_REFERENCES XPATH_RELATIVE_REFERENCES XPATH_ABSOLUTE_REFERENCES SINGLE_NODE_XPATH_RELATIVE_REFERENCES SINGLE_NODE_XPATH_ABSOLUTE_REFERENCES",title:"Mode",required:!1,deprecated:!1},converters:{kind:"element",type:"array",description:"List of class names for using custom XStream converters. The classes must be of type com.thoughtworks.xstream.converters.Converter",title:"Converters",required:!1,deprecated:!1},aliases:{kind:"element",type:"object",description:"Alias a Class to a shorter name to be used in XML elements.",title:"Aliases",required:!1,deprecated:!1},omitFields:{kind:"element",type:"object",description:"Prevents a field from being serialized. To omit a field you must always provide the declaring type and not necessarily the type that is converted.",title:"Omit Fields",required:!1,deprecated:!1},implicitCollections:{kind:"element",type:"object",description:"Adds a default implicit collection which is used for any unmapped XML tag.",title:"Implicit Collections",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},zip:{type:"object",title:"Zip Deflate Compression",group:"dataformat,transformation",icon:"generic24.png",description:"zip data format (not for zip files)",properties:{compressionLevel:{kind:"attribute",type:"integer",defaultValue:"-1",description:"To specify a specific compression between 0-9. -1 is default compression 0 is no compression and 9 is best compression.",title:"Compression Level",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},zipFile:{type:"object",title:"Zip File",group:"dataformat,transformation",icon:"generic24.png",description:"zip-file data format",properties:{usingIterator:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If the zip file has more then one entry the setting this option to true allows to work with the splitter EIP to split the data using an iterator in a streaming mode.",title:"Using Iterator",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}}},languages:{constant:{type:"object",title:"Constant",group:"language",icon:"generic24.png",description:"For expressions and predicates using a constant",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},el:{type:"object",title:"EL",group:"language",icon:"generic24.png",description:"For EL expressions and predicates",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},exchangeProperty:{type:"object",title:"ExchangeProperty",group:"language",icon:"generic24.png",description:"An expression which extracts the named exchange property",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},expression:{type:"object",title:"Expression",group:"language",icon:"generic24.png",description:"A useful base class for an expression",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},groovy:{type:"object",title:"Groovy",group:"language",icon:"generic24.png",description:"For Groovy expressions and predicates",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},header:{type:"object",title:"Header",group:"language",icon:"generic24.png",description:"An expression which extracts the named exchange header",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},javaScript:{type:"object",title:"JavaScript",group:"language",icon:"generic24.png",description:"For JavaScript expressions and predicates",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",
title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},jsonpath:{type:"object",title:"JSonPath",group:"language",icon:"generic24.png",description:"For JSonPath expressions and predicates",properties:{resultType:{kind:"attribute",type:"string",description:"Sets the class name of the result type (type from output)",title:"Result Type",required:!1,deprecated:!1},expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},jxpath:{type:"object",title:"JXPath",group:"language",icon:"generic24.png",description:"For JXPath expressions and predicates",properties:{lenient:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Allows to turn lenient on the JXPathContext. When turned on this allows the JXPath expression to evaluate against expressions and message bodies which may be invalid / missing data. This option is by default false",title:"Lenient",required:!1,deprecated:!1},expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},language:{type:"object",title:"Language",group:"language",icon:"generic24.png",description:"Represents a parameterised language expression which can support any language at runtime using the language attribute.",properties:{language:{kind:"attribute",type:"string",description:"The name of the language to use",title:"Language",required:!0,deprecated:!1},expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},method:{type:"object",title:"Bean method",group:"language",icon:"generic24.png",description:"For expressions and predicates using a java bean (aka method call)",properties:{bean:{kind:"attribute",type:"string",description:"Either a reference or a class name of the bean to use",title:"Bean",required:!1,deprecated:!0},ref:{kind:"attribute",type:"string",description:"Reference to bean to lookup in the registry",title:"Ref",required:!1,deprecated:!1},method:{kind:"attribute",type:"string",description:"Name of method to call",title:"Method",required:!1,deprecated:!1},beanType:{kind:"attribute",type:"string",description:"Class name of the bean to use",title:"Bean Type",required:!1,deprecated:!1},expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},mvel:{type:"object",title:"MVEL",group:"language",icon:"generic24.png",description:"For MVEL expressions and predicates",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},ognl:{type:"object",title:"OGNL",group:"language",icon:"generic24.png",description:"For OGNL expressions and predicates",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},php:{type:"object",title:"PHP",group:"language",icon:"generic24.png",description:"For PHP expressions and predicates",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},python:{type:"object",title:"Python",group:"language",icon:"generic24.png",description:"For Python expressions and predicates",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},ref:{type:"object",title:"Ref",group:"language",icon:"generic24.png",description:"For using a custom expression",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},ruby:{type:"object",title:"Ruby",group:"language",icon:"generic24.png",description:"For Ruby expressions and predicates",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},simple:{type:"object",title:"Simple",group:"language",icon:"generic24.png",description:"For expressions and predicates using the simple language",properties:{resultType:{kind:"attribute",type:"string",description:"Sets the class name of the result type (type from output)",title:"Result Type",required:!1,deprecated:!1},expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},spel:{type:"object",title:"SpEL",group:"language",icon:"generic24.png",description:"For Spring Expression Language (SpEL) expressions and predicates",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},sql:{type:"object",title:"SQL",group:"language",icon:"generic24.png",description:"For SQL expressions and predicates",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},terser:{type:"object",title:"HL7 Terser",group:"language,hl7",icon:"generic24.png",description:"For HL7 terser expressions and predicates",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},tokenize:{type:"object",title:"Tokenize",group:"language",icon:"generic24.png",description:"For expressions and predicates using a body or header tokenizer.",properties:{token:{kind:"attribute",type:"string",description:"The (start) token to use as tokenizer for example \n for a new line token",title:"Token",required:!0,deprecated:!1},endToken:{kind:"attribute",type:"string",description:"The end token to use as tokenizer if using start/end token pairs.",title:"End Token",required:!1,deprecated:!1},inheritNamespaceTagName:{kind:"attribute",type:"string",description:"To inherit namepaces from a root/parent tag name",title:"Inherit Namespace Tag Name",required:!1,deprecated:!1},headerName:{kind:"attribute",type:"string",description:"Name of header to tokenize instead of using the message body.",title:"Header Name",required:!1,deprecated:!1},regex:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If the token is a regular expression pattern. The default value is false",title:"Regex",required:!1,deprecated:!1},xml:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the input is XML messages. This option must be set to true if working with XML payloads.",title:"Xml",required:!1,deprecated:!1},includeTokens:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to include the tokens in the parts The default value is false",title:"Include Tokens",required:!1,deprecated:!1},group:{kind:"attribute",type:"integer",description:"To group N parts together for example to split big files into chunks of 1000 lines.",title:"Group",required:!1,deprecated:!1},expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},vtdxml:{type:"object",title:"VtdXML",group:"language",icon:"generic24.png",description:"For VTD-XML (fast and efficient XPath) expressions and predicates",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},xpath:{type:"object",title:"XPath",group:"language",icon:"generic24.png",description:"For XPath expressions and predicates",properties:{documentType:{kind:"attribute",type:"string",description:"Name of class for document type The default value is org.w3c.dom.Document",title:"Document Type",required:!1,deprecated:!1},resultType:{kind:"attribute",type:"string",description:"Sets the class name of the result type (type from output) The default result type is NodeSet",title:"Result Type",required:!1,deprecated:!1},saxon:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to use Saxon.",title:"Saxon",required:!1,deprecated:!1},factoryRef:{kind:"attribute",type:"string",description:"References to a custom XPathFactory to lookup in the registry",title:"Factory Ref",required:!1,deprecated:!1},objectModel:{kind:"attribute",type:"string",description:"The XPath object model to use",title:"Object Model",required:!1,deprecated:!1},logNamespaces:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to log namespaces which can assist during trouble shooting",title:"Log Namespaces",required:!1,deprecated:!1},headerName:{kind:"attribute",type:"string",description:"Name of header to use as input instead of the message body",title:"Header Name",required:!1,deprecated:!1},expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},xquery:{type:"object",title:"XQuery",group:"language",icon:"generic24.png",description:"For XQuery expressions and predicates",properties:{type:{kind:"attribute",type:"string",description:"Sets the class name of the result type (type from output) The default result type is NodeSet",title:"Type",required:!1,deprecated:!1},headerName:{kind:"attribute",type:"string",description:"Name of header to use as input instead of the message body",title:"Header Name",required:!1,deprecated:!1},expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},xtokenize:{type:"object",title:"XML Tokenize",group:"language",icon:"generic24.png",description:"For expressions and predicates using a body or header tokenizer.",properties:{headerName:{kind:"attribute",type:"string",description:"Name of header to tokenize instead of using the message body.",title:"Header Name",required:!1,deprecated:!1},mode:{kind:"attribute",type:"string",description:"The extraction mode. The available extraction modes are: i - injecting the contextual namespace bindings into the extracted token (default) w - wrapping the extracted token in its ancestor context u - unwrapping the extracted token to its child content t - extracting the text content of the specified element",title:"Mode",required:!1,deprecated:!1},group:{kind:"attribute",type:"integer",description:"To group N parts together",title:"Group",required:!1,deprecated:!1},expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}}}},ActiveMQ;!function(e){function t(e){function t(e){if(e){if("Queues"===e.title||"Queue"===e.title)return e;var n=e.parent;if(n)return t(n)}return null}var n=e.selection;return n?t(n):null}function n(e){function t(e){var t=null;return e&&(("Topics"===e.title||"Topic"===e.title)&&(t=e),null===t&&angular.forEach(e.children,function(e){("Topics"===e.title||"Topic"===e.title)&&(t=e)})),t}var n=e.selection;return n?t(n):null}function i(e,t,n){"selectAll"in n.gridOptions?n.gridOptions.selectAll(!1):n.gridOptions.selectedItems.length=0;var i=Core.pathGet(e,["rowIndex"])||Core.pathGet(e,["index"]),r=Core.pathGet(e,["entity",t]);n.rowIndex=i;var a=n.gridOptions.selectedItems;a.splice(0,a.length),i>=0&&i<n.messages.length?(n.row=n.messages.find(function(e){return e[t]===r}),n.row&&a.push(n.row)):n.row=null}function r(e,t){void 0===t&&(t=null),e.selectRowIndex=function(n){e.rowIndex=n;var i=e.gridOptions.selectedItems;i.splice(0,i.length),n>=0&&n<e.messages.length?(e.row=e.messages[n],e.row&&i.push(e.row)):e.row=null,t&&t.apply()},e.$watch("showMessageDetails",function(){e.showMessageDetails||(e.row=null,e.gridOptions.selectedItems.splice(0,e.gridOptions.selectedItems.length))})}e.pluginName="activemq",e.log=Logger.get("activemq"),e.jmxDomain="org.apache.activemq",e.getSelectionQueuesFolder=t,e.getSelectionTopicsFolder=n,e.selectCurrentMessage=i,e.decorate=r}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(e){function t(e){var t=null,n=e.selection;return n&&(t=n.findAncestor(function(e){var t=e.entries;return t?"type"in t&&"Broker"===t.type&&"brokerName"in t&&!("destinationName"in t)&&!("destinationType"in t):!1})),t}function n(t){return t.hasDomainAndProperties(e.jmxDomain,{destinationType:"Queue"},4)||t.selectionHasDomainAndType(e.jmxDomain,"Queue")}function i(t){return t.hasDomainAndProperties(e.jmxDomain,{destinationType:"Topic"},4)||t.selectionHasDomainAndType(e.jmxDomain,"Topic")}function r(t){return t.selectionHasDomainAndLastFolderName(e.jmxDomain,"Queue")}function a(t){return t.selectionHasDomainAndLastFolderName(e.jmxDomain,"Topic")}function o(t){return t.hasDomainAndProperties(e.jmxDomain,{service:"JobScheduler"},4)}function s(t){if(t.selectionHasDomainAndType(e.jmxDomain,"Broker")){var n=Core.pathGet(t,["selection"]),i=Core.pathGet(t,["selection","parent"]);return!(i&&(i.ancestorHasType("Broker")||n.ancestorHasType("Broker")))}return!1}e._module=angular.module(e.pluginName,[]),e._module.config(["$routeProvider",function(e){e.when("/activemq/browseQueue",{templateUrl:"plugins/activemq/html/browseQueue.html"}).when("/activemq/createDestination",{templateUrl:"plugins/activemq/html/createDestination.html"}).when("/activemq/deleteQueue",{templateUrl:"plugins/activemq/html/deleteQueue.html"}).when("/activemq/deleteTopic",{templateUrl:"plugins/activemq/html/deleteTopic.html"}).when("/activemq/sendMessage",{templateUrl:"plugins/camel/html/sendMessage.html"}).when("/activemq/durableSubscribers",{templateUrl:"plugins/activemq/html/durableSubscribers.html"}).when("/activemq/jobs",{templateUrl:"plugins/activemq/html/jobs.html"})}]),e._module.run(["HawtioNav","$location","workspace","viewRegistry","helpRegistry","preferencesRegistry","$templateCache","documentBase",function(l,c,u,d,p,h,f,g){function m(e){var t=e.get("org.apache.activemq");v(t),t&&angular.forEach(t.children,function(e){angular.forEach(e.children,function(e){var t=e.children;if(t){var n=["Topic","Queue"];angular.forEach(n,function(e){var n=t.findIndex(function(t){return t.title===e});if(n>0){var i=t[n];t.splice(n,1),t.splice(0,0,i)}})}})})}function v(e){if(e){var t=e.parent,n=e.entries;if(t&&!t.typeName&&n){var i=n.endpoint;("Consumer"===i||"Producer"===i)&&(t.typeName=i);var r=n.connectorName;r&&!e.icon&&(e.icon=UrlHelpers.join(g,"/img/icons/activemq/connector.png"))}angular.forEach(e.children,function(e){return v(e)})}}d['{ "main-tab": "activemq" }']="plugins/activemq/html/layoutActiveMQTree.html",p.addUserDoc("activemq","plugins/activemq/doc/help.md",function(){return u.treeContainsDomainAndProperties("org.apache.activemq")}),h.addTab("ActiveMQ","plugins/activemq/html/preferences.html",function(){return u.treeContainsDomainAndProperties("org.apache.activemq")}),u.addTreePostProcessor(m);var y=u.attributeColumnDefs;y[e.jmxDomain+"/Broker/folder"]=[{field:"BrokerName",displayName:"Name",width:"**"},{field:"TotalProducerCount",displayName:"Producer"},{field:"TotalConsumerCount",displayName:"Consumer"},{field:"StorePercentUsage",displayName:"Store %"},{field:"TempPercentUsage",displayName:"Temp %"},{field:"MemoryPercentUsage",displayName:"Memory %"},{field:"TotalEnqueueCount",displayName:"Enqueue"},{field:"TotalDequeueCount",displayName:"Dequeue"}],y[e.jmxDomain+"/Queue/folder"]=[{field:"Name",displayName:"Name",width:"***"},{field:"QueueSize",displayName:"Queue Size"},{field:"ProducerCount",displayName:"Producer"},{field:"ConsumerCount",displayName:"Consumer"},{field:"EnqueueCount",displayName:"Enqueue"},{field:"DequeueCount",displayName:"Dequeue"},{field:"MemoryPercentUsage",displayName:"Memory %"},{field:"DispatchCount",displayName:"Dispatch",visible:!1}],y[e.jmxDomain+"/Topic/folder"]=[{field:"Name",displayName:"Name",width:"****"},{field:"ProducerCount",displayName:"Producer"},{field:"ConsumerCount",displayName:"Consumer"},{field:"EnqueueCount",displayName:"Enqueue"},{field:"DequeueCount",displayName:"Dequeue"},{field:"MemoryPercentUsage",displayName:"Memory %"},{field:"DispatchCount",displayName:"Dispatch",visible:!1}],y[e.jmxDomain+"/Consumer/folder"]=[{field:"ConnectionId",displayName:"Name",width:"**"},{field:"PrefetchSize",displayName:"Prefetch Size"},{field:"Priority",displayName:"Priority"},{field:"DispatchedQueueSize",displayName:"Dispatched Queue #"},{field:"SlowConsumer",displayName:"Slow ?"},{field:"Retroactive",displayName:"Retroactive"},{field:"Selector",displayName:"Selector"}],y[e.jmxDomain+"/networkConnectors/folder"]=[{field:"Name",displayName:"Name",width:"**"},{field:"UserName",displayName:"User Name"},{field:"PrefetchSize",displayName:"Prefetch Size"},{field:"ConduitSubscriptions",displayName:"Conduit Subscriptions?"},{field:"Duplex",displayName:"Duplex"},{field:"DynamicOnly",displayName:"Dynamic Only"}],y[e.jmxDomain+"/PersistenceAdapter/folder"]=[{field:"IndexDirectory",displayName:"Index Directory",width:"**"},{field:"LogDirectory",displayName:"Log Directory",width:"**"}];var b="/jmx/attributes",w=l.builder(),x=w.id("activemq").title(function(){return"ActiveMQ"}).defaultPage({rank:15,isValid:function(t,n){var i="ActiveMQDefaultPage";u.addNamedTreePostProcessor(i,function(r){u.removeNamedTreePostProcessor(i),u.treeContainsDomainAndProperties(e.jmxDomain)?t():n()})}}).href(function(){return b}).isValid(function(){return u.treeContainsDomainAndProperties(e.jmxDomain)}).build();x.tabs=Jmx.getNavItems(w,u,f,"activemq"),x.tabs.push({id:"activemq-browse",title:function(){return'<i class="fa fa-envelope"></i> Browse'},tooltip:function(){return"Browse the messages on the queue"},show:function(){return n(u)&&u.hasInvokeRights(u.selection,"browse()")},href:function(){return"/activemq/browseQueue"+u.hash()}}),x.tabs.push({id:"activemq-send",title:function(){return'<i class="fa fa-pencil"></i> Send'},tooltip:function(){return"Send a message to this destination"},show:function(){return(n(u)||i(u))&&u.hasInvokeRights(u.selection,"sendTextMessage(java.util.Map,java.lang.String,java.lang.String,java.lang.String)")},href:function(){return"/activemq/sendMessage"+u.hash()}}),x.tabs.push({id:"activemq-durable-subscribers",title:function(){return'<i class="fa fa-list"></i> Durable Subscribers'},tooltip:function(){return"Manage durable subscribers"},show:function(){return s(u)},href:function(){return"/activemq/durableSubscribers"+u.hash()}}),x.tabs.push({id:"activemq-jobs",title:function(){return'<i class="fa fa-list"></i> Jobs'},tooltip:function(){return"Manage jobs"},show:function(){return o(u)},href:function(){return"/activemq/jobs"+u.hash()}}),x.tabs.push({id:"activemq-create-destination",title:function(){return'<i class="fa fa-plus"></i> Create'},tooltip:function(){return"Create a new destination"},show:function(){return(s(u)||r(u)||a(u)||n(u)||i(u))&&u.hasInvokeRights(t(u),"addQueue","addTopic")},href:function(){return"/activemq/createDestination"+u.hash()}}),x.tabs.push({id:"activemq-delete-topic",title:function(){return'<i class="fa fa-remove"></i> Delete'},tooltip:function(){return"Delete this topic"},show:function(){return i(u)&&u.hasInvokeRights(t(u),"removeTopic")},href:function(){return"/activemq/deleteTopic"+u.hash()}}),x.tabs.push({id:"activemq-delete-queue",title:function(){return'<i class="fa fa-remove"></i> Delete'},tooltip:function(){return"Delete or purge this queue"},show:function(){return n(u)&&u.hasInvokeRights(t(u),"removeQueue")},href:function(){return"/activemq/deleteQueue"+u.hash()}}),l.add(x)}]),hawtioPluginLoader.addModule(e.pluginName),e.getBroker=t,e.isQueue=n,e.isTopic=i,e.isQueuesFolder=r,e.isTopicsFolder=a,e.isJobScheduler=o,e.isBroker=s}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(e){e.BrowseQueueController=e._module.controller("ActiveMQ.BrowseQueueController",["$scope","workspace","jolokia","localStorage","$location","activeMQMessage","$timeout","$dialog","$templateCache",function(t,n,i,r,a,o,s,l,c){function u(e){var n=e.value;angular.isArray(n)?t.allMessages=n:(t.allMessages=[],angular.forEach(n,function(e,n){t.allMessages.push(e)})),angular.forEach(t.allMessages,function(e){e.openMessageDialog=t.openMessageDialog,e.headerHtml=p(e),e.bodyText=d(e)}),w(t.gridOptions.filterOptions.filterText),Core.$apply(t)}function d(e){if(e.Text){var t=e.Text,n=""+t.length;return e.textMode="text ("+n+" chars)",t}if(e.BodyPreview){var t,i=Core.parseIntValue(r.activemqBrowseBytesMessages||"1","browse bytes messages");if(e.textMode="bytes (turned off)",99!=i){var a=[],o=[];e.BodyPreview.forEach(function(e){if((1===i||2===i)&&o.push(String.fromCharCode(e)),1===i||4===i){var t=e.toString(16);1===t.length&&(t="0"+t),a.push(t)}else{var t=e.toString(10);a.push(t)}});var s=a.join(" "),l=o.join("");if(1===i||2===i){var c=e.BodyPreview.length,n=""+o.length;t="bytes:\n"+s+"\n\ntext:\n"+l,e.textMode="bytes ("+c+" bytes) and text ("+n+" chars)"}else{var c=e.BodyPreview.length;t=s,e.textMode="bytes ("+c+" bytes)"}}return t}return e.textMode="unsupported","Unsupported message body type which cannot be displayed by hawtio"}function p(e){function t(e,t){return e>t?1:t>e?-1:0}function n(e){var t=r[e];null===t&&(t=""),u.push('<tr><td class="propertyName"><span class="green">Header</span> - '+e+'</td><td class="property-value">'+t+"</td></tr>")}function i(e){var t=a[e];null===t&&(t=""),u.push('<tr><td class="propertyName">'+e+'</td><td class="property-value">'+t+"</td></tr>")}var r=h(e),a=f(e),o=_.keys(r),s=_.keys(a).sort(t),l=o.filter(function(e){return e.startsWith("JMS")}).sort(t),c=o.subtract(l.concat(s)).sort(t),u=[];return l.forEach(n),c.forEach(n),s.forEach(i),u.join("\n")}function h(e){var t={};return angular.forEach(e,function(e,n){T.any(n)||A.any(n)||(t[Core.escapeHtml(n)]=Core.escapeHtml(e))}),t}function f(e){var t={};return angular.forEach(e,function(e,n){!T.any(n)&&A.any(n)&&angular.forEach(e,function(e,i){t['<span class="green">'+n.replace("Properties"," Property")+"</span> - "+Core.escapeHtml(i)]=Core.escapeHtml(e)})}),t}function g(){var e;if(n.selection)e=n.selection.objectName;else{var r=a.search().nid,o=n.keyToNodeMap[r];e=o.objectName}e&&(t.dlq=!1,i.getAttribute(e,"DLQ",Core.onSuccess(m,{silent:!0})),i.request({type:"exec",mbean:e,operation:"browse()"},Core.onSuccess(u)))}function m(e){t.dlq=e,Core.$apply(t)}function v(){}function y(){t.gridOptions.selectedItems.splice(0),Core.notification("success",t.message),setTimeout(g,50)}function b(){y(),n.loadTree()}function w(e){var t=S(e);x(t)}function x(n){n&&0!==n.length?(e.log.debug("Filtering conditions:",n),t.messages=t.allMessages.filter(function(t){e.log.debug("Message:",t);var i=!0;return $.each(n,function(e,n){i=n.column?i&&t[n.column]&&n.regex.test(t[n.column])||t.StringProperties&&t.StringProperties[n.column]&&n.regex.test(t.StringProperties[n.column]):i&&k(t,n.regex)}),i})):t.messages=t.allMessages}function k(e,t){for(var n=["JMSDestination","JMSDeliveryMode","JMSExpiration","JMSPriority","JMSMessageID","JMSTimestamp","JMSCorrelationID","JMSReplyTo","JMSType","JMSRedelivered"],i=0;i<n.length;i++){var r=n[i];if(e[r]&&t.test(e[r]))return!0}if(e.StringProperties)for(var a in e.StringProperties)if(t.test(e.StringProperties[a]))return!0;return e.bodyText&&t.test(e.bodyText)?!0:!1}function C(e,t){try{return new RegExp(e,t)}catch(n){return new RegExp(e.replace(/(\^|\$|\(|\)|<|>|\[|\]|\{|\}|\\|\||\.|\*|\+|\?)/g,"\\$1"))}}function S(e){var t,n=[];if(t=$.trim(e)){for(var i=t.split(";"),r=0;r<i.length;r++){var a=i[r].split(":");if(a.length>1){var o=$.trim(a[0]),s=$.trim(a[1]);o&&s&&n.push({column:o,columnDisplay:o.replace(/\s+/g,"").toLowerCase(),regex:C(s,"i")})}else{var l=$.trim(a[0]);l&&n.push({column:"",regex:C(l,"i")})}}return n}}t.searchText="",t.allMessages=[],t.messages=[],t.headers={},t.mode="text",t.gridOptions={selectedItems:[],data:"messages",displayFooter:!1,showFilter:!1,showColumnMenu:!0,enableColumnResize:!0,enableColumnReordering:!0,enableHighlighting:!0,filterOptions:{filterText:"",useExternalFilter:!0},selectWithCheckboxOnly:!0,showSelectionCheckbox:!0,maintainColumnRatios:!1,columnDefs:[{field:"JMSMessageID",displayName:"Message ID",cellTemplate:'<div class="ngCellText"><a href="" ng-click="row.entity.openMessageDialog(row)">{{row.entity.JMSMessageID}}</a></div>',width:"34%"},{field:"JMSType",displayName:"Type",width:"10%"},{field:"JMSPriority",displayName:"Priority",width:"7%"},{field:"JMSTimestamp",displayName:"Timestamp",width:"19%"},{field:"JMSExpiration",displayName:"Expires",width:"10%"},{field:"JMSReplyTo",displayName:"Reply To",width:"10%"},{field:"JMSCorrelationID",displayName:"Correlation ID",width:"10%"}]},t.showMessageDetails=!1;var T=["PropertiesText","BodyPreview","Text","openMessageDialog"],A=["BooleanProperties","ByteProperties","ShortProperties","IntProperties","LongProperties","FloatProperties","DoubleProperties","StringProperties"];t.$watch("workspace.selection",function(){n.moveIfViewInvalid()||setTimeout(g,50)}),t.$watch("gridOptions.filterOptions.filterText",function(e){w(e)}),t.openMessageDialog=function(n){e.selectCurrentMessage(n,"JMSMessageID",t),t.row&&(t.mode=CodeEditor.detectTextFormat(t.row.Text),t.showMessageDetails=!0)},t.refresh=g,e.decorate(t),t.moveMessages=function(){var e=n.selection,r=e.objectName;if(r&&e){var a=t.gridOptions.selectedItems;l.dialog({resolve:{selectedItems:function(){return a},gridOptions:function(){return t.gridOptions},queueNames:function(){return t.queueNames},parent:function(){return t}},template:c.get("activemqMoveMessageDialog.html"),controller:["$scope","dialog","selectedItems","gridOptions","queueNames","parent",function(e,t,n,a,o,s){e.selectedItems=n,e.gridOptions=a,e.queueNames=o,e.queueName="",e.close=function(a){if(t.close(),a){s.message="Moved "+Core.maybePlural(n.length,"message")+" to "+e.queueName;var o="moveMessageTo(java.lang.String, java.lang.String)";angular.forEach(n,function(t,a){var s=t.JMSMessageID;if(s){var l=a+1<n.length?v:b;

i.execute(r,o,s,e.queueName,Core.onSuccess(l))}})}}}]}).open()}},t.resendMessage=function(){var e=n.selection,i=e.objectName;if(i&&e){var r=t.gridOptions.selectedItems;o.message=r[0],a.path("activemq/sendMessage")}},t.deleteMessages=function(){var e=n.selection,r=e.objectName;if(r&&e){var a=t.gridOptions.selectedItems;a&&0!==a.length&&UI.multiItemConfirmActionDialog({collection:a,index:"JMSMessageID",onClose:function(e){if(e){t.message="Deleted "+Core.maybePlural(a.length,"message");var n="removeMessage(java.lang.String)";_.forEach(a,function(e,t){var o=e.JMSMessageID;if(o){var s=t+1<a.length?v:y;i.execute(r,n,o,Core.onSuccess(s))}})}},title:"Delete messages?",action:"The following messages will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()}},t.retryMessages=function(){var e=n.selection,r=e.objectName;if(r&&e){var a=t.gridOptions.selectedItems;t.message="Retry "+Core.maybePlural(a.length,"message");var o="retryMessage(java.lang.String)";angular.forEach(a,function(e,t){var n=e.JMSMessageID;if(n){var s=t+1<a.length?v:y;i.execute(r,o,n,Core.onSuccess(s))}})}},t.queueNames=function(t){var i=e.getSelectionQueuesFolder(n);return i?i.children.map(function(e){return e.title}):[]}}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(e){e._module.controller("ActiveMQ.DestinationController",["$scope","workspace","$location","jolokia",function(t,n,i,r){function a(){t.destinationTypeName="true"===t.queueType?"Queue":"Topic"}function o(){t.destinationName="",t.workspace.operationCounter+=1,Core.notification("success",t.message),t.workspace.loadTree(),Core.$apply(t)}function s(){n.removeAndSelectParentNode(),t.workspace.operationCounter+=1,Core.notification("success",t.message),i.path("/jmx/attributes").search({"main-tab":"activemq","sub-tab":"activemq-attributes"}),Core.$apply(t)}function l(t){var i=null,r=n.selection;if(r&&e.isBroker(n)&&r.objectName)return r.objectName;var a=r.folderNames,o=r?r.parent:null;return r&&o&&t&&a&&a.length>1&&(i=o.objectName,!i&&o&&(i=o.parent.objectName),i||(i=""+a[0]+":BrokerName="+a[1]+",Type=Broker")),i}t.workspace=n,t.message="",t.destinationName="",t.queueType=e.isTopicsFolder(n)||e.isTopic(n)?"false":"true",t.destinationTypeName=t.queueType?"Queue":"Topic",t.deleteDialog=!1,t.purgeDialog=!1,a(),t.$watch("queueType",function(){a()}),t.$watch("workspace.selection",function(){n.moveIfViewInvalid()}),t.createDestination=function(e,n){var i=l(r);if(i){var a;"true"===n?(a="addQueue(java.lang.String)",t.message="Created queue "+e):(a="addTopic(java.lang.String)",t.message="Created topic "+e),i?r.execute(i,a,e,Core.onSuccess(o)):Core.notification("error","Could not find the Broker MBean!")}},t.deleteDestination=function(){var e=l(r),i=n.selection,a=i.entries;if(e&&i&&r&&a){var o=(i.domain,a.Destination||a.destinationName||i.title);o=o.unescapeHTML();var c,u="Topic"!==(a.Type||a.destinationType);u?(c="removeQueue(java.lang.String)",t.message="Deleted queue "+o):(c="removeTopic(java.lang.String)",t.message="Deleted topic "+o),r.execute(e,c,o,Core.onSuccess(s))}},t.purgeDestination=function(){var e=n.getSelectedMBeanName(),i=n.selection,a=i.entries;if(e&&i&&r&&a){var s=a.Destination||a.destinationName||i.title;s=s.unescapeHTML();var l="purge()";t.message="Purged queue "+s,r.execute(e,l,Core.onSuccess(o))}},t.name=function(){var e=n.selection;return e?e.title:null}}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(e){e._module.controller("ActiveMQ.DurableSubscriberController",["$scope","workspace","jolokia",function(t,n,i){function r(){var e=o(i);e&&(t.durableSubscribers=[],i.request({type:"read",mbean:e,attribute:["DurableTopicSubscribers"]},Core.onSuccess(function(e){return a(e,"DurableTopicSubscribers","Active")})),i.request({type:"read",mbean:e,attribute:["InactiveDurableTopicSubscribers"]},Core.onSuccess(function(e){return a(e,"InactiveDurableTopicSubscribers","Offline")})))}function a(n,i,r){var a=n.value;e.log.debug("Got data: ",a),t.durableSubscribers.push.apply(t.durableSubscribers,a[i].map(function(e){var t=e.objectName,n=Core.objectNameProperties(t);return"objectName"in e||("canonicalName"in e&&(t=e.canonicalName),n=_.cloneDeep(e.keyPropertyList)),n._id=t,n.status=r,n})),Core.$apply(t)}function o(t){var i=null,r=n.selection;if(r&&e.isBroker(n)&&r.objectName)return r.objectName;var a=r.folderNames,o=r?r.parent:null;return r&&o&&t&&a&&a.length>1&&(i=o.objectName,!i&&o&&(i=o.parent.objectName),i||(i=""+a[0]+":BrokerName="+a[1]+",Type=Broker")),i}t.refresh=r,t.durableSubscribers=[],t.tempData=[],t.createSubscriberDialog=new UI.Dialog,t.deleteSubscriberDialog=new UI.Dialog,t.showSubscriberDialog=new UI.Dialog,t.topicName="",t.clientId="",t.subscriberName="",t.subSelector="",t.gridOptions={selectedItems:[],data:"durableSubscribers",displayFooter:!1,showFilter:!1,showColumnMenu:!0,enableCellSelection:!1,enableColumnResize:!0,enableColumnReordering:!0,selectWithCheckboxOnly:!1,showSelectionCheckbox:!1,multiSelect:!1,displaySelectionCheckbox:!1,filterOptions:{filterText:""},maintainColumnRatios:!1,columnDefs:[{field:"destinationName",displayName:"Topic",width:"30%"},{field:"clientId",displayName:"Client ID",width:"30%"},{field:"consumerId",displayName:"Consumer ID",cellTemplate:'<div class="ngCellText"><span ng-hide="row.entity.status != \'Offline\'">{{row.entity.consumerId}}</span><a ng-show="row.entity.status != \'Offline\'" ng-click="openSubscriberDialog(row)">{{row.entity.consumerId}}</a></div>',width:"30%"},{field:"status",displayName:"Status",width:"10%"}]},t.doCreateSubscriber=function(e,n,a,s){t.createSubscriberDialog.close(),t.clientId=e,t.subscriberName=n,t.topicName=a,t.subSelector=s,Core.isBlank(t.subSelector)&&(t.subSelector=null);var l=o(i);l?i.execute(l,"createDurableSubscriber(java.lang.String, java.lang.String, java.lang.String, java.lang.String)",t.clientId,t.subscriberName,t.topicName,t.subSelector,Core.onSuccess(function(){Core.notification("success","Created durable subscriber "+e),t.clientId="",t.subscriberName="",t.topicName="",t.subSelector="",r()})):Core.notification("error","Could not find the Broker MBean!")},t.deleteSubscribers=function(){var e=t.gridOptions.selectedItems[0]._id;i.execute(e,"destroy()",Core.onSuccess(function(){t.showSubscriberDialog.close(),Core.notification("success","Deleted durable subscriber"),r(),t.gridOptions.selectedItems.splice(0,t.gridOptions.selectedItems.length)}))},t.openSubscriberDialog=function(e){i.request({type:"read",mbean:e.entity._id},Core.onSuccess(function(n){t.showSubscriberDialog.subscriber=n.value,t.showSubscriberDialog.subscriber.Status=e.entity.status,console.log("Subscriber is now "+t.showSubscriberDialog.subscriber),Core.$apply(t),setTimeout(function(){t.showSubscriberDialog.open(),Core.$apply(t)},100)}))},t.topicNames=function(t){var i=e.getSelectionTopicsFolder(n);return i?i.children.map(function(e){return e.title}):[]},t.$watch("workspace.selection",function(){n.moveIfViewInvalid()||setTimeout(r,50)})}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(e){e._module.controller("ActiveMQ.JobSchedulerController",["$scope","workspace","jolokia",function(e,t,n){function i(){var i=t.selection;if(i){var a=i.objectName;a&&n.request({type:"read",mbean:a,attribute:"AllJobs"},Core.onSuccess(r))}Core.$apply(e)}function r(t){var n=t.value;angular.isArray(n)?e.jobs=n:(e.jobs=[],angular.forEach(n,function(t,n){e.jobs.push(t)})),Core.$apply(e)}function a(){}function o(){e.gridOptions.selectedItems.splice(0),Core.notification("success",e.message),setTimeout(i,50)}e.refresh=i,e.jobs=[],e.deleteJobsDialog=new UI.Dialog,e.gridOptions={selectedItems:[],data:"jobs",displayFooter:!1,showFilter:!1,showColumnMenu:!0,enableColumnResize:!0,enableColumnReordering:!0,filterOptions:{filterText:""},selectWithCheckboxOnly:!0,showSelectionCheckbox:!0,maintainColumnRatios:!1,columnDefs:[{field:"jobId",displayName:"Job ID",width:"25%"},{field:"cronEntry",displayName:"Cron Entry",width:"10%"},{field:"delay",displayName:"Delay",width:"5%"},{field:"repeat",displayName:"repeat",width:"5%"},{field:"period",displayName:"period",width:"5%"},{field:"start",displayName:"Start",width:"25%"},{field:"next",displayName:"Next",width:"25%"}]},e.$watch("workspace.selection",function(){t.moveIfViewInvalid()||setTimeout(i,50)}),e.deleteJobs=function(){var i=t.selection,r=i.objectName;if(r&&i){var s=e.gridOptions.selectedItems;e.message="Deleted "+Core.maybePlural(s.length,"job");var l="removeJob(java.lang.String)";angular.forEach(s,function(e,t){var i=e.jobId;if(i){var c=t+1<s.length?a:o;n.execute(r,l,i,Core.onSuccess(c))}})}}}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(e){e._module.controller("ActiveMQ.PreferencesController",["$scope","localStorage","userDetails","$rootScope",function(e,t,n,i){var r={properties:{activemqUserName:{type:"string",description:"The user name to be used when connecting to the broker"},activemqPassword:{type:"string",description:"Password to be used when connecting to the broker"},activemqFilterAdvisoryTopics:{type:"boolean","default":"false",description:"Whether to exclude advisory topics in tree/table"},activemqBrowseBytesMessages:{type:"number","enum":{"Hex and text":1,"Decimal and text":2,Hex:4,Decimal:8,Off:99},description:"Browsing byte messages should display the message body as"}}};e.entity=e,e.config=r,Core.initPreferenceScope(e,t,{activemqUserName:{value:n.username?n.username:""},activemqPassword:{value:n.password?n.password:""},activemqBrowseBytesMessages:{value:1,converter:parseInt},activemqFilterAdvisoryTopics:{value:!1,converter:Core.parseBooleanValue,post:function(e){i.$broadcast("jmxTreeUpdated")}}})}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(e){e._module.controller("ActiveMQ.TreeHeaderController",["$scope",function(e){e.expandAll=function(){Tree.expandAll("#activemqtree")},e.contractAll=function(){Tree.contractAll("#activemqtree")}}]),e._module.controller("ActiveMQ.TreeController",["$scope","$location","workspace","localStorage",function(t,n,i,r){function a(){e.log.debug("workspace tree has changed, lets reload the activemq tree");var a=[],s=i.tree;if(s){var l="org.apache.activemq",c=s.get(l);if(c&&(a=c.children),a.length){var u=a[0];if(!u.typeName&&u.children.length<4){var d=[];angular.forEach(a,function(e){d=d.concat(e.children)}),a=d}}a.forEach(function(e){var t=e.children;if(t){Tree.sanitize(t);var n=t.findIndex(function(e){return"Topic"===e.title});if(n>0){var a=t[n],o="ActiveMQ-allTopics-"+e.title,s=a.children.clone();i.mapData[o]=s;var l=Core.parseBooleanValue(r.activemqFilterAdvisoryTopics);if(l){if(a&&a.children){var c=a.children.filter(function(e){return!e.title.startsWith("ActiveMQ.Advisory")});a.children=c}}else s&&(a.children=s)}}});var p=$("#activemqtree");Jmx.enableTree(t,n,i,p,a,!0),setTimeout(o,50)}}function o(){Jmx.updateTreeSelectionFromURLAndAutoSelect(n,$("#activemqtree"),function(e){var t=e.getChildren()[0];return t&&"Queue"===t.data.title?(e=t,e.expand(!0),e):null},!0)}t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(o,50)}),t.$watch("workspace.tree",function(){a()}),t.$on("jmxTreeUpdated",function(){a()})}])}(ActiveMQ||(ActiveMQ={}));var Camel;!function(e){function t(e,t){var n=F(e);if(n){var i=t.request({type:"read",mbean:n,attribute:["NumberOfRestServices"]}),r=i.value.NumberOfRestServices;return r>0}return!1}function n(e,t,n,i){function r(e){var t=null,n=e?e.value:null;if(n){var r=$.parseXML(n),o=$(r).find("route[id='"+a+"']");o&&o.length&&(t=o[0])}i(t)}var a=V(e,n),o=N(e);o&&a?t.request({type:"exec",mbean:o,operation:"dumpRoutesAsXml()"},Core.onSuccess(r,{error:r})):(a||console.log("No selectedRouteId when trying to lazy load the route!"),i(null))}function i(e){var t=null;if(e&&(t=e.getAttribute("uri"),!t)){var n=e.getAttribute("ref");if(n){var i=e.getAttribute("method");t=i?n+"."+i+"()":"ref:"+n}}return t}function r(t,n){void 0===n&&(n={});var i=t.camelNodeData;if(!i){var r=t.routeXmlNode;r&&(i=e.getRouteNodeJSON(r)),i||(i=n),t.camelNodeData=i}return i}function a(t,n){if(void 0===n&&(n={}),t){angular.forEach(t.attributes,function(e){n[e.name]=e.value});var i=t.localName;"route"!==i&&"routes"!==i&&"camelContext"!==i&&"rests"!==i&&$(t).children("*").each(function(t,i){var r=i.localName,o=e.camelLanguageSettings(r);if(o)n.expression={language:r,expression:i.textContent};else if(!g(r)){var s=a(i);s&&(s.expression&&(s=s.expression),"completionSize"===r?r="completionSizeExpression":"completionTimeout"===r&&(r="completionTimeoutExpression"),n[r]=s)}})}return n}function o(e,t){return void 0===t&&(t="  "),e+t}function s(e,t,n){function i(t,n,a){if(void 0===a&&(a=!1),angular.isArray(t))$(e).children(n).remove(),angular.forEach(t,function(e){i(e,n,!0)});else if(angular.isObject(t)){var o=null;if("expression"===n){var l=t.language;l&&(n=l,o=t.expression,t=angular.copy(t),delete t.expression,delete t.language)}var c=$(e).children(n),u=null;if(!a&&c&&c.length)u=c[0];else{var d=e.ownerDocument||document;e.appendChild(d.createTextNode("\n"+r)),u=d.createElementNS(e.namespaceURI,n),o&&u.appendChild(d.createTextNode(o)),e.appendChild(u)}s(u,t,r),o&&c.text(o)}else if(t)if(n.startsWith("_"));else{var p=t.toString();e.setAttribute(n,p)}else e.removeAttribute(n)}if(e){var r=o(n);angular.forEach(t,function(e,t){return i(e,t,!1)})}}function l(e){var t=null;if(e){var n=e.localName;t=n?f(n):e}if(!t)return null;var i=t.icon||"generic24.png",r=HawtioCore.injector;if(!r)return Core.url("/img/icons/camel/"+i);var a=r.get("documentBase");return a?UrlHelpers.join(a,"/img/icons/camel/"+i):void 0}function c(e){var t=e.selection;if(t&&t.objectName&&t.typeName&&"endpoints"===t.typeName){var n=Core.parseMBean(t.objectName);if(!n)return null;var i=n.attributes;if(!i)return null;if(!("name"in i))return null;var r=i.name;return r=r.replace("\\?","?"),r.startsWith('"')&&(r=r.last(r.length-1)),r.endsWith('"')&&(r=r.first(r.length-1)),r}return null}function u(e){if(angular.isString(e)){var t=e.replace("?","\\?");return t=t.replace(/\:(\/[^\/])/,"://$1"),t=t.replace(/\:([^\/])/,"://$1")}return e}function d(t){return{uri:e.getSelectedEndpointName(t),mbean:e.getSelectionCamelContextMBean(t)}}function p(t){var n=t.selection||t.getSelectedMBean();return n&&e.jmxDomain===n.domain?n.routeXmlNode:null}function h(t){var n=t.selection;n&&e.jmxDomain===n.domain&&delete n.routeXmlNode}function f(t){return angular.isObject(t)?t:Forms.lookupDefinition(t,e._apacheCamelModel)}function g(t){return null!=Forms.lookupDefinition(t,e._apacheCamelModel)}function m(e){var t=f(e);return t?t.nextSiblingAddedAsChild||!1:null}function v(e){var t=f(e);return t?t.acceptInput||!1:null}function y(e){var t=f(e);return t?t.acceptOutput||!1:null}function b(t){return e._apacheCamelModel.languages[t]}function w(e){return b(e)||"expression"===e?!0:!1}function x(t,n){var i=t;angular.isString(t)&&(i=$.parseXML(t));var r="camelContext",a=new Folder(r);a.addClass="org-apache-camel-context",a.domain=e.jmxDomain,a.typeName="context",a.key=Core.toSafeDomID(n);var o=$(i).find("camelContext");return o&&o.length||(o=$(i).find("routes")),o&&o.length&&(a.xmlDocument=i,a.routeXmlNode=o,$(o).children("route").each(function(t,n){var i=n.getAttribute("id");i||(i="route"+t,n.setAttribute("id",i));var r=new Folder(i);r.addClass="org-apache-camel-route",r.typeName="routes",r.domain=e.jmxDomain,r.key=a.key+"_"+Core.toSafeDomID(i),r.parent=a;var o=f("route");if(o){var s=l(o);r.tooltip=o.tooltip||o.description||i,r.icon=s}a.children.push(r),k(r,n)})),a}function k(e,t){e.children=[],e.routeXmlNode=t,t.setAttribute("_cid",e.key),$(t).children("*").each(function(t,n){C(e,n)})}function C(t,n){var i=n.localName;if(i){var r=f(i);if(r){var a=l(r),o=new Folder(i);o.domain=e.jmxDomain,o.typeName="routeNode",M(o,n,r),o.parent=t,o.folderNames=t.folderNames;for(var s=n.getAttribute("id")||i,c=t.key+"_"+Core.toSafeDomID(s),u=1,d=!0;d;){var p=c+u;t.children.some({key:p})?u+=1:(d=!1,c=p)}return o.key=c,o.icon=a,o.routeXmlNode=n,t.children||(t.children=[]),t.children.push(o),k(o,n),o}}return null}function S(t){var n=t?t.tree:null;return n?n.get(e.jmxDomain):null}function _(e,t){var n=null,i=S(e);return i&&t&&angular.forEach(i.children,function(e){n||t!==e.title||(n=e)}),n}function T(e,t){var n=_(e,t);if(n){var i=n.navigate("context");if(i&&i.children&&i.children.length){var r=i.children[0];return r.objectName}}return null}function A(e){var t=null,n=e.selection;if(n){var i=n.entries;if(i){var r=i.context,a=i.name,o=i.type;if("endpoints"===o)return E(r,a);if("routes"===o)return P(r,a)}}return t}function E(e,t){var n=null;return e&&t&&(n="#/camel/endpoint/browse/"+e+"/"+t),n}function P(e,t){var n=null;return e&&t&&(n="#/camel/route/diagram/"+e+"/"+t),n}function I(e){var t=Core.pathGet(e,["routeXmlNode","localName"]);return"from"===t||"to"===t?"endpoint":t}function D(t,n,i){void 0===i&&(i=e.increaseIndent(""));var r=t.data||t,a=0,o=I(r);if(r){if(!n){n=document.createElement(o);var s=e.getRouteFolderJSON(r);s&&e.setRouteNodeJSON(n,s,i)}var l=n.ownerDocument||document,c=n.namespaceURI,u="route"!==o,d=e.increaseIndent(i);angular.forEach(t.children||t.getChildren(),function(t){var i=t.data||t,r=e.getFolderCamelNodeId(i),o=e.getRouteFolderJSON(i);if(r&&o){var s=!1;if("endpoint"===r&&(u?r="to":(r="from",u=!0)),"expression"===r){var p=o.language;p&&(r=p,s=!0)}n.appendChild(l.createTextNode("\n"+d));var h=l.createElementNS(c,r);e.setRouteNodeJSON(h,o,d),n.appendChild(h),a+=1,D(t,h,d)}}),a&&n.appendChild(l.createTextNode("\n"+i))}return n}function M(t,n,r){var a=n.localName,o=n.getAttribute("id"),s=r.title||a,l=r.tooltip||r.description||s;if(o)s=o;else{var c=i(n);if(c){s=c;var u=c.split("?");u&&u.length>1&&(s=u[0]),l+=" "+c}else{var d=$(n).children("*");if(d&&d.length){var p=d[0],h=p.localName,f=null;e.isCamelLanguage(h)&&(f=p.textContent,f||(f=p.getAttribute("expression"))),f&&(s+=" "+f,l+=" "+h+" expression")}}}return t.title=s,t.tooltip=l,s}function N(e){if(e){var t=q(e),n=e.selection,i=e.tree;if(i&&n){var r=n.domain;if(r&&t){var a=i.navigate(r,t,"context");if(a&&a.children){var o=a.children.first();if(o.title){var s=o.title;return""+r+":context="+t+',type=context,name="'+s+'"'}}}}}return null}function j(e){if(e){var t=q(e),n=e.selection,i=e.tree;if(i&&n){var r=n.domain;if(r&&t)return i.navigate(r,t,"endpoints")}}return null}function O(e){if(e){var t=q(e),n=e.selection,i=e.tree;if(i&&n){var r=n.domain;if(r&&t){var a=i.navigate(r,t,"tracer");if(a&&a.children){var o=a.children.find(function(e){return e.title.startsWith("BacklogTracer")});if(o)return o.objectName}}}}return null}function L(e){if(e){var t=q(e),n=e.selection,i=e.tree;if(i&&n){var r=n.domain;if(r&&t){var a=i.navigate(r,t,"tracer");if(a&&a.children){var o=a.children.find(function(e){return e.title.startsWith("BacklogDebugger")});if(o)return o.objectName}}}}return null}function R(e){if(e){var t=q(e),n=e.selection,i=e.tree;if(i&&n){var r=n.domain;if(r&&t){var a=i.navigate(r,t,"services");if(a&&a.children){var o=a.children.find(function(e){return e.title.startsWith("DefaultTypeConverter")});if(o)return o.objectName}}}}return null}function F(e){if(e){var t=q(e),n=e.selection,i=e.tree;if(i&&n){var r=n.domain;if(r&&t){var a=i.navigate(r,t,"services");if(a&&a.children){var o=a.children.find(function(e){return e.title.startsWith("DefaultRestRegistry")});if(o)return o.objectName}}}}return null}function U(e){if(e){var t=q(e),n=e.selection,i=e.tree;if(i&&n){var r=n.domain;if(r&&t){var a=i.navigate(r,t,"services");if(a&&a.children){var o=a.children.find(function(e){return e.title.startsWith("DefaultInflightRepository")});if(o)return o.objectName}}}}return null}function z(e){if(e){var t=q(e),n=e.selection,i=e.tree;if(i&&n){var r=n.domain;if(r&&t){var a=i.navigate(r,t,"services");if(a&&a.children){var o=a.children.find(function(e){return e.title.startsWith("MetricsRegistryService")});if(o)return o.objectName}}}}return null}function q(e){var t=e.selection;if(t&&(t=t.findAncestor(function(e){return"context"===e.title||null!=e.parent&&"org.apache.camel"===e.parent.title}))){var n,i=e.tree,r=t.folderNames,a=t.entries;i&&(r&&r.length>1?n=r[1]:a&&(n=a.context))}return n}function B(e,t){var n=(e.State||"").toLowerCase();return angular.isArray(t)?t.any(function(e){return n.startsWith(e)}):n.startsWith(t)}function H(e){if(e)switch(e.toLowerCase()){case"started":return"green fa fa-play-circle";case"suspended":return"fa fa-pause"}return"orange fa fa-off"}function V(e,t){void 0===t&&(t=null);var n=t||e.selection,i=null;if(n&&n&&n.entries){var r=n.entries.type,a=n.entries.name;"routes"===r&&a&&(i=Core.trimQuotes(a))}return i}function W(e,t){if(e){var n=q(e),i=e.selection,r=e.tree;if(r&&i){var a=i.domain;if(a&&n){var o=r.navigate(a,n,"routes");if(o&&o.children){var s=o.children.find(function(e){return e.title===t});if(s)return s.objectName}}}}return null}function G(e,t){if(e){var n=q(e),i=e.selection,r=e.tree;if(r&&i){var a=i.domain;if(a&&n){var o=r.navigate(a,n,"context");if(o&&o.children){var s=o.children.first();if(s.version)return s.version;if(s.title){var l=s.title,c=""+a+":context="+n+',type=context,name="'+l+'"',u=t.getAttribute(c,"CamelVersion",Core.onSuccess(null));return s.version=u,u}}}}}return null}function K(e){var t=$(e),n=t.children("uid").text(),i=t.children("timestamp").text(),r={headers:{},headerTypes:{},id:null,uid:n,timestamp:i,headerHtml:""},a=t.children("message")[0];a||(a=e);var o=$(a),s=o.find("header"),l="";s.each(function(e,t){var n=t.getAttribute("key"),i=t.getAttribute("type"),a=t.textContent;n&&(a&&(r.headers[n]=a),i&&(r.headerTypes[n]=i),l+="<tr><td class='property-name'>"+n+"</td><td class='property-value'>"+X(i)+"</td><td class='property-value'>"+(a||"")+"</td></tr>")}),r.headerHtml=l;var c=r.headers.breadcrumbId;if(!c){var u=["MessageID","ID","Path","Name"];angular.forEach(u,function(e){c||angular.forEach(r.headers,function(t,n){!c&&n.endsWith(e)&&(c=t)})}),angular.forEach(r.headers,function(e,t){c||(c=e)})}r.id=c;var d=o.children("body")[0];if(d){var p=d.textContent,h=d.getAttribute("type");r.body=p,r.bodyType=X(h)}return r}function X(e){return e?e.startsWith("java.lang")?e.substr(10):e:""}function Y(){return{selectedItems:[],data:"messages",displayFooter:!1,showFilter:!1,showColumnMenu:!0,enableColumnResize:!0,enableColumnReordering:!0,filterOptions:{filterText:""},selectWithCheckboxOnly:!0,showSelectionCheckbox:!0,maintainColumnRatios:!1,columnDefs:[{field:"id",displayName:"ID",cellTemplate:'<div class="ngCellText"><a href="" ng-click="row.entity.openMessageDialog(row)">{{row.entity.id}}</a></div>'}]}}function J(t,n,i,r,a,o){var s=$(n).find("route"),l=o/s.length,c=0;s.each(function(n,o){var s=o.getAttribute("id");i&&s&&i!==s||(e.addRouteXmlChildren(t,o,r,a,null,c,0),c+=l)})}function Q(t,n,r,a,o,s,c,u){void 0===u&&(u=null);var d=150,p=s,h=c+d,g=n.getAttribute("id"),m=[],v=n.localName;return $(n).children().each(function(n,s){var c=r.length,y=s.localName;"from"!==y||o||(o=c);var b=f(y),w=null;if(b){var x=b.title||y,k=i(s);k&&(x+=" "+k.split("?")[0]);var C=b.tooltip||b.description||x;k&&(C+=" "+k);var S=s.getAttribute("id"),_=x;if(S){var T=s.getAttribute("customId");t.camelIgnoreIdForLabel||!T||"false"===T?_="id: "+S:x=S}var $=t.camelMaximumLabelWidth||e.defaultMaximumLabelWidth,A=x.length;A>$&&(_=x+"\n\n"+_,x=x.substring(0,$)+"..");var E=l(b);if(("from"===y||"to"===y)&&k){var P=k.indexOf(":");if(P>0){var I=k.substring(0,P);if(I){var D=e.getEndpointIcon(I);if(D){var M=HawtioCore.injector;if(M){var N=M.get("documentBase");N&&(E=UrlHelpers.join(N,D))}else E=Core.url(D)}}}}var j=s.getAttribute("_cid")||s.getAttribute("id");w={name:L,label:x,labelSummary:_,group:1,id:c,elementId:S,x:p,"y:":h,imageUrl:E,cid:j,tooltip:C,type:y},g&&(w.rid=g,t.routeNodes||(t.routeNodes={}),t.routeNodes[g]=w),j||(j=y+(r.length+1)),j&&(w.cid=j,t.nodes||(t.nodes={}),t.nodes[j]=w),g=null,r.push(w),null!==o&&o!==c&&(0===m.length||"choice"===v?a.push({source:o,target:c,value:1}):(m.forEach(function(e){a.push({source:e,target:c,value:1})}),m.length=0))}else{var O=e.camelLanguageSettings(y);if(O&&u){var L=O.name||y,R=s.textContent;R?(u.tooltip=u.label+" "+L+" "+R,u.label=R):u.label=u.label+" "+L}}var F=Q(t,s,r,a,c,p,h,w);"choice"===v?(m=m.concat(F),p+=d):"choice"===y?(m=F,h+=d):(m=[r.length-1],h+=d)}),m}function Z(e){var t=e.height();if(300>t){console.log("browse thinks the height is only "+t+" so calculating offset from doc height");var n=e.offset();if(t=$(document).height()-5,n){var i=n.top;i&&(t-=i)}}return t}function ee(e,t){if(void 0===t&&(t={}),e){var n=e.key;n&&(t[n]=e),angular.forEach(e.children,function(e){return ee(e,t)})}return t}function te(t){var n=t&&t.data?t.data:t;if(!n)return null;var i=n.xmlDocument,r=n.routeXmlNode;if(r&&r.length){for(var a=r[0],o=a.childNodes,s=[],l=0;l<o.length;l++){var c=o[l],u=c.localName;"route"===u&&parent&&s.push(l)}for(;s.length;){for(var d=s.pop(),p=d+1;;){var c=a.childNodes[p];if(!Core.isTextNode(c))break;a.removeChild(c)}d<a.childNodes.length&&a.removeChild(a.childNodes[d]);for(var l=d-1;l>=0;l--){var c=a.childNodes[l];if(!Core.isTextNode(c))break;a.removeChild(c)}}e.createFolderXmlTree(t,r[0])}return i}function ne(t){var n={},i=t.tree;if(i){var r=i.navigate(e.jmxDomain);r&&angular.forEach(r.children,function(e){var t=e.navigate("context");if(t&&t.children&&t.children.length){var i=t.children[0],r=Core.pathGet(i,["entries","name"])||i.key;r&&(n[r]={folder:i,mbean:i.objectName})}})}return n}function ie(e){return ae(e,"components")}function re(e){return ae(e,"routes")}function ae(t,n){var i={},r=t.tree;if(r){var a=r.navigate(e.jmxDomain);a&&angular.forEach(a.children,function(e){var t=e.navigate("context"),r=e.navigate(n);if(t&&r&&t.children&&t.children.length){var a=t.children[0],o=a.objectName;if(o){var s={folder:a,mbean:o};angular.forEach(r.children,function(e){var t=e.title;t&&(i[t]=s)})}}})}return i}function oe(t){var n={},i=t.tree;if(i){var r=i.navigate(e.jmxDomain);r&&angular.forEach(r.children,function(e){var t=e.navigate("processors");t&&t.children&&t.children.length&&angular.forEach(t.children,function(e){var i=e.title;if(i){var r={folder:t,key:e.key};n[i]=r}})})}return n}function se(e){var t=e.camelIgnoreIdForLabel;return Core.parseBooleanValue(t)}function le(t){var n=t.camelMaximumLabelWidth;return angular.isString(n)&&(n=parseInt(n)),n||(n=e.defaultMaximumLabelWidth),n}function ce(t){var n=t.camelMaximumTraceOrDebugBodyLength;return angular.isString(n)&&(n=parseInt(n)),n||(n=e.defaultCamelMaximumTraceOrDebugBodyLength),n}function ue(t){var n=t.camelTraceOrDebugIncludeStreams;return Core.parseBooleanValue(n,e.defaultCamelTraceOrDebugIncludeStreams)}function de(e){var t=e.camelShowInflightCounter;return Core.parseBooleanValue(t,!0)}function pe(t){var n=t.camelRouteMetricMaxSeconds;return angular.isString(n)&&(n=parseInt(n)),n||(n=e.defaultCamelRouteMetricMaxSeconds),n}function he(t){var n=t.camelHideOptionDocumentation;return Core.parseBooleanValue(n,e.defaultHideOptionDocumentation)}function fe(t){var n=t.camelHideOptionDefaultValue;return Core.parseBooleanValue(n,e.defaultHideOptionDefaultValue)}function ge(t){var n=t.camelHideOptionUnusedValue;return Core.parseBooleanValue(n,e.defaultHideOptionUnusedValue)}function me(e,t){e.attr("class","node"),e.filter(function(e){if(e){var n=e.cid,i=e.rid,r=e.type,a=e.elementId;return"from"===r?t===i:a?t===a:n?t===n:t===i}return null}).attr("class","node selected")}function ve(e,t,n,i){var r=G(n,i);if(r){r+="camel-";var a=Core.parseVersionNumbers(r);return Core.compareVersionNumberArrays(a,[e,t])>=0?!0:!1}return!1}e.log=Logger.get("Camel"),e.jmxDomain="org.apache.camel",e.defaultMaximumLabelWidth=34,e.defaultCamelMaximumTraceOrDebugBodyLength=5e3,e.defaultCamelTraceOrDebugIncludeStreams=!0,e.defaultCamelRouteMetricMaxSeconds=10,e.defaultHideOptionDocumentation=!1,e.defaultHideOptionDefaultValue=!1,e.defaultHideOptionUnusedValue=!1,e._apacheCamelModel=void 0,hawtioPluginLoader.registerPreBootstrapTask(function(t){e._apacheCamelModel=window._apacheCamelModel,e.log.debug("Setting apache camel model: ",e._apacheCamelModel),t()}),e.hasRestServices=t,e.processRouteXml=n,e.getRouteNodeUri=i,e.getRouteFolderJSON=r,e.getRouteNodeJSON=a,e.increaseIndent=o,e.setRouteNodeJSON=s,e.getRouteNodeIcon=l,e.getSelectedEndpointName=c,e.escapeEndpointUriNameForJmx=u,e.getContextAndTargetEndpoint=d,e.getSelectedRouteNode=p,e.clearSelectedRouteNode=h,e.getCamelSchema=f,e.isCamelPattern=g,e.isNextSiblingAddedAsChild=m,e.acceptInput=v,e.acceptOutput=y,e.camelLanguageSettings=b,e.isCamelLanguage=w,e.loadCamelTree=x,e.addRouteChildren=k,e.addRouteChild=C,e.getRootCamelFolder=S,e.getCamelContextFolder=_,e.getCamelContextMBean=T,e.linkToFullScreenView=A,e.linkToBrowseEndpointFullScreen=E,e.linkToRouteDiagramFullScreen=P,e.getFolderCamelNodeId=I,e.createFolderXmlTree=D,e.updateRouteNodeLabelAndTooltip=M,e.getSelectionCamelContextMBean=N,e.getSelectionCamelContextEndpoints=j,e.getSelectionCamelTraceMBean=O,e.getSelectionCamelDebugMBean=L,e.getSelectionCamelTypeConverter=R,e.getSelectionCamelRestRegistry=F,e.getSelectionCamelInflightRepository=U,e.getSelectionCamelRouteMetrics=z,e.getContextId=q,e.isState=B,e.iconClass=H,e.getSelectedRouteId=V,e.getSelectionRouteMBean=W,e.getCamelVersion=G,e.createMessageFromXml=K,e.humanizeJavaType=X,e.createBrowseGridOptions=Y,e.loadRouteXmlNodes=J,e.addRouteXmlChildren=Q,e.getCanvasHeight=Z,e.addFoldersToIndex=ee,e.generateXmlFromFolder=te,e.camelContextMBeansById=ne,e.camelContextMBeansByComponentName=ie,e.camelContextMBeansByRouteId=re,e.camelProcessorMBeansById=oe,e.ignoreIdForLabel=se,e.maximumLabelWidth=le,e.maximumTraceOrDebugBodyLength=ce,e.traceOrDebugIncludeStreams=ue,e.showInflightCounter=de,e.routeMetricMaxSeconds=pe,e.hideOptionDocumentation=he,e.hideOptionDefaultValue=fe,e.hideOptionUnusedValue=ge,e.highlightSelectedNode=me,e.isCamelVersionEQGT=ve}(Camel||(Camel={}));var Camel;!function(e){var t=Jmx;e.pluginName="camel";var n="plugins/camel/html/attributeToolBarRoutes.html",i="plugins/camel/html/attributeToolBarContext.html";e._module=angular.module(e.pluginName,[]),e._module.config(["$routeProvider",function(e){e.when("/camel/browseEndpoint",{templateUrl:"plugins/camel/html/browseEndpoint.html"}).when("/camel/endpoint/browse/:contextId/*endpointPath",{templateUrl:"plugins/camel/html/browseEndpoint.html"}).when("/camel/createEndpoint",{templateUrl:"plugins/camel/html/createEndpoint.html"}).when("/camel/route/diagram/:contextId/:routeId",{templateUrl:"plugins/camel/html/routes.html"}).when("/camel/routes",{templateUrl:"plugins/camel/html/routes.html"}).when("/camel/typeConverter",{templateUrl:"plugins/camel/html/typeConverter.html",reloadOnSearch:!1}).when("/camel/restRegistry",{templateUrl:"plugins/camel/html/restRegistry.html",reloadOnSearch:!1}).when("/camel/routeMetrics",{templateUrl:"plugins/camel/html/routeMetrics.html",reloadOnSearch:!1}).when("/camel/inflight",{templateUrl:"plugins/camel/html/inflight.html",reloadOnSearch:!1}).when("/camel/sendMessage",{templateUrl:"plugins/camel/html/sendMessage.html",reloadOnSearch:!1}).when("/camel/source",{templateUrl:"plugins/camel/html/source.html"}).when("/camel/traceRoute",{templateUrl:"plugins/camel/html/traceRoute.html"}).when("/camel/debugRoute",{templateUrl:"plugins/camel/html/debug.html"}).when("/camel/profileRoute",{templateUrl:"plugins/camel/html/profileRoute.html"}).when("/camel/properties",{templateUrl:"plugins/camel/html/properties.html"}).when("/camel/propertiesComponent",{templateUrl:"plugins/camel/html/propertiesComponent.html"}).when("/camel/propertiesEndpoint",{templateUrl:"plugins/camel/html/propertiesEndpoint.html"})}]),e._module.factory("tracerStatus",function(){return{jhandle:null,messages:[]}}),e._module.filter("camelIconClass",function(){return e.iconClass}),e._module.factory("activeMQMessage",function(){return{message:null}}),e._module.factory("metricsWatcher",["$window",function(e){var t=e.metricsWatcher;return t||(t={},e.metricsWatcher=t),t}]),e._module.run(["HawtioNav","workspace","jolokia","viewRegistry","layoutFull","helpRegistry","preferencesRegistry","$templateCache","$location",function(t,r,a,o,s,l,c,u,d){
o["camel/endpoint/"]=s,o["camel/route/"]=s,o['{ "main-tab": "camel" }']="plugins/camel/html/layoutCamelTree.html",l.addUserDoc("camel","plugins/camel/doc/help.md",function(){return r.treeContainsDomainAndProperties(e.jmxDomain)}),c.addTab("Camel","plugins/camel/html/preferences.html",function(){return r.treeContainsDomainAndProperties(e.jmxDomain)}),Jmx.addAttributeToolBar(e.pluginName,e.jmxDomain,function(t){var r=t.typeName;if(r){if(r.startsWith("context"))return i;if(r.startsWith("route"))return n}var a=t.folderNames;if(a&&t.domain===e.jmxDomain){var o=a.last();if("routes"===o)return n;if("context"===o)return i}return null});var p="State",h='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(\''+p+"') | camelIconClass}}\"></i></div>",f={field:p,displayName:p,cellTemplate:h,width:56,minWidth:56,maxWidth:56,resizable:!1,defaultSort:!1},g=r.attributeColumnDefs;g[e.jmxDomain+"/context/folder"]=[f,{field:"CamelId",displayName:"Context"},{field:"Uptime",displayName:"Uptime",visible:!1},{field:"CamelVersion",displayName:"Version",visible:!1},{field:"ExchangesCompleted",displayName:"Completed"},{field:"ExchangesFailed",displayName:"Failed"},{field:"FailuresHandled",displayName:"Failed Handled",visible:!1},{field:"ExchangesTotal",displayName:"Total",visible:!1},{field:"Redeliveries",displayName:"Redelivery",visible:!1},{field:"ExchangesInflight",displayName:"Inflight"},{field:"OldestInflightDuration",displayName:"Oldest Inflight Time",visible:!1},{field:"MeanProcessingTime",displayName:"Mean Time"},{field:"MinProcessingTime",displayName:"Min Time"},{field:"MaxProcessingTime",displayName:"Max Time"},{field:"TotalProcessingTime",displayName:"Total Time",visible:!1},{field:"DeltaProcessingTime",displayName:"Delta Time",visible:!1},{field:"LastProcessingTime",displayName:"Last Time",visible:!1},{field:"LastExchangeCompletedTimestamp",displayName:"Last completed",visible:!1},{field:"LastExchangeFailedTimestamp",displayName:"Last failed",visible:!1},{field:"ExternalRedeliveries",displayName:"External Redelivery",visible:!1},{field:"StartedRoutes",displayName:"Started Routes"},{field:"TotalRoutes",displayName:"Total Routes"}],g[e.jmxDomain+"/routes/folder"]=[f,{field:"CamelId",displayName:"Context"},{field:"RouteId",displayName:"Route"},{field:"ExchangesCompleted",displayName:"Completed"},{field:"ExchangesFailed",displayName:"Failed"},{field:"FailuresHandled",displayName:"Failed Handled",visible:!1},{field:"Redeliveries",displayName:"Redelivery",visible:!1},{field:"ExchangesTotal",displayName:"Total",visible:!1},{field:"ExchangesInflight",displayName:"Inflight"},{field:"OldestInflightDuration",displayName:"Oldest Inflight Time",visible:!1},{field:"MeanProcessingTime",displayName:"Mean Time"},{field:"MinProcessingTime",displayName:"Min Time"},{field:"MaxProcessingTime",displayName:"Max Time"},{field:"TotalProcessingTime",displayName:"Total Time",visible:!1},{field:"DeltaProcessingTime",displayName:"Delta Time",visible:!1},{field:"LastProcessingTime",displayName:"Last Time",visible:!1},{field:"LastExchangeCompletedTimestamp",displayName:"Last completed",visible:!1},{field:"LastExchangeFailedTimestamp",displayName:"Last failed",visible:!1},{field:"Redeliveries",displayName:"Redelivery",visible:!1},{field:"ExternalRedeliveries",displayName:"External Redelivery",visible:!1}],g[e.jmxDomain+"/processors/folder"]=[f,{field:"CamelId",displayName:"Context"},{field:"RouteId",displayName:"Route"},{field:"ProcessorId",displayName:"Processor"},{field:"ExchangesCompleted",displayName:"Completed"},{field:"ExchangesFailed",displayName:"Failed"},{field:"FailuresHandled",displayName:"Failed Handled",visible:!1},{field:"Redeliveries",displayName:"Redelivery",visible:!1},{field:"ExchangesTotal",displayName:"Total",visible:!1},{field:"ExchangesInflight",displayName:"Inflight"},{field:"OldestInflightDuration",displayName:"Oldest Inflight Time",visible:!1},{field:"MeanProcessingTime",displayName:"Mean Time"},{field:"MinProcessingTime",displayName:"Min Time"},{field:"MaxProcessingTime",displayName:"Max Time"},{field:"TotalProcessingTime",displayName:"Total Time",visible:!1},{field:"DeltaProcessingTime",displayName:"Delta Time",visible:!1},{field:"LastProcessingTime",displayName:"Last Time",visible:!1},{field:"LastExchangeCompletedTimestamp",displayName:"Last completed",visible:!1},{field:"LastExchangeFailedTimestamp",displayName:"Last failed",visible:!1},{field:"ExternalRedeliveries",displayName:"External Redelivery",visible:!1}],g[e.jmxDomain+"/components/folder"]=[f,{field:"CamelId",displayName:"Context"},{field:"ComponentName",displayName:"Name"}],g[e.jmxDomain+"/consumers/folder"]=[f,{field:"CamelId",displayName:"Context"},{field:"RouteId",displayName:"Route"},{field:"EndpointUri",displayName:"Endpoint URI",width:"**"},{field:"Suspended",displayName:"Suspended",resizable:!1},{field:"InflightExchanges",displayName:"Inflight"}],g[e.jmxDomain+"/producers/folder"]=[f,{field:"CamelId",displayName:"Context"},{field:"RouteId",displayName:"Route"},{field:"EndpointUri",displayName:"Endpoint URI",width:"**"},{field:"Suspended",displayName:"Suspended",resizable:!1}],g[e.jmxDomain+"/services/folder"]=[f,{field:"CamelId",displayName:"Context"},{field:"RouteId",displayName:"Route"},{field:"Suspended",displayName:"Suspended",resizable:!1},{field:"SupportsSuspended",displayName:"Can Suspend",resizable:!1}],g[e.jmxDomain+"/endpoints/folder"]=[f,{field:"CamelId",displayName:"Context"},{field:"EndpointUri",displayName:"Endpoint URI",width:"***"},{field:"Singleton",displayName:"Singleton",resizable:!1}],g[e.jmxDomain+"/threadpools/folder"]=[{field:"Id",displayName:"Id",width:"**"},{field:"ActiveCount",displayName:"Active"},{field:"PoolSize",displayName:"Pool Size"},{field:"CorePoolSize",displayName:"Core Pool Size"},{field:"TaskQueueSize",displayName:"Task Queue Size"},{field:"TaskCount",displayName:"Task"},{field:"CompletedTaskCount",displayName:"Completed Task"}],g[e.jmxDomain+"/errorhandlers/folder"]=[{field:"CamelId",displayName:"Context"},{field:"DeadLetterChannel",displayName:"Dead Letter"},{field:"DeadLetterChannelEndpointUri",displayName:"Endpoint URI",width:"**",resizable:!0},{field:"MaximumRedeliveries",displayName:"Max Redeliveries"},{field:"RedeliveryDelay",displayName:"Redelivery Delay"},{field:"MaximumRedeliveryDelay",displayName:"Max Redeliveries Delay"}];var m="/jmx/attributes?main-tab=camel&sub-tab=camel-attributes",v=t.builder(),y=v.id("camel").title(function(){return"Camel"}).defaultPage({rank:20,isValid:function(t,n){var i="CamelDefaultPage";r.addNamedTreePostProcessor(i,function(a){r.removeNamedTreePostProcessor(i),r.treeContainsDomainAndProperties(e.jmxDomain)?t():n()})}}).href(function(){return m}).isValid(function(){return r.treeContainsDomainAndProperties(e.jmxDomain)}).build();y.tabs=Jmx.getNavItems(v,r,u,"camel"),y.tabs.push({id:"camel-route-diagram",title:function(){return'<i class="fa fa-sitemap"></i> Route Diagram'},tooltip:function(){return"View a diagram of the Camel routes"},show:function(){return(r.isRoute()||r.isRoutesFolder())&&r.hasInvokeRightsForName(e.getSelectionCamelContextMBean(r),"dumpRoutesAsXml")},isSelected:function(){return r.isLinkActive("camel/routes")},href:function(){return"/camel/routes"+r.hash()},index:-2}),y.tabs.push({id:"camel-route-source",title:function(){return'<i class=" fa fa-file-code-o"></i> Source'},tooltip:function(){return"View the source of the Camel routes"},show:function(){return!r.isEndpointsFolder()&&!r.isEndpoint()&&(r.isRoute()||r.isRoutesFolder())&&r.hasInvokeRightsForName(e.getSelectionCamelContextMBean(r),"dumpRoutesAsXml")},isSelected:function(){return r.isLinkActive("camel/source")},href:function(){return"/camel/source"+r.hash()}}),y.tabs.push({id:"camel-route-properties",title:function(){return'<i class=" fa fa-edit"></i> Properties'},tooltip:function(){return"View the pattern properties"},show:function(){return e.getSelectedRouteNode(r)},href:function(){return"/camel/properties"+r.hash()}}),y.tabs.push({id:"camel-endpoint-properties",title:function(){return'<i class="fa fa-list"></i> Properties'},tooltip:function(){return"Show the endpoint properties"},show:function(){return r.isEndpoint()&&e.isCamelVersionEQGT(2,15,r,a)&&r.hasInvokeRights(r.selection,"explainEndpointJson")},href:function(){return"/camel/propertiesEndpoint"+r.hash()}}),y.tabs.push({id:"camel-component-properties",title:function(){return'<i class="fa fa-list"></i> Properties'},tooltip:function(){return"Show the component properties"},show:function(){return r.isComponent()&&e.isCamelVersionEQGT(2,15,r,a)&&r.hasInvokeRights(r.selection,"explainComponentJson")},href:function(){return"/camel/propertiesComponent"+r.hash()}}),y.tabs.push({id:"camel-inflight-exchanges",title:function(){return'<i class="fa fa-bar-chart"></i> Inflight Exchanges'},tooltip:function(){return"View the entire JVMs Camel inflight exchanges"},show:function(){return!r.isEndpointsFolder()&&!r.isEndpoint()&&!r.isComponentsFolder()&&!r.isComponent()&&(r.isCamelContext()||r.isRoutesFolder()||r.isRoute())&&e.isCamelVersionEQGT(2,15,r,a)&&r.hasInvokeRightsForName(e.getSelectionCamelInflightRepository(r),"browse")},href:function(){return"/camel/inflight"+r.hash()}}),y.tabs.push({id:"camel-route-metrics",title:function(){return'<i class="fa fa-bar-chart"></i> Route Metrics'},tooltip:function(){return"View the entire JVMs Camel route metrics"},show:function(){return!r.isEndpointsFolder()&&!r.isEndpoint()&&(r.isCamelContext()||r.isRoutesFolder())&&e.isCamelVersionEQGT(2,14,r,a)&&e.getSelectionCamelRouteMetrics(r)&&r.hasInvokeRightsForName(e.getSelectionCamelRouteMetrics(r),"dumpStatisticsAsJson")},href:function(){return"/camel/routeMetrics"+r.hash()}}),y.tabs.push({id:"camel-rest-services",title:function(){return'<i class="fa fa-list"></i> Rest Services'},tooltip:function(){return"List all the REST services registered in the context"},show:function(){return!r.isEndpointsFolder()&&!r.isEndpoint()&&!r.isComponentsFolder()&&!r.isComponent()&&(r.isCamelContext()||r.isRoutesFolder())&&e.isCamelVersionEQGT(2,14,r,a)&&e.getSelectionCamelRestRegistry(r)&&e.hasRestServices(r,a)&&r.hasInvokeRightsForName(e.getSelectionCamelRestRegistry(r),"listRestServices")},href:function(){return"/camel/restRegistry"+r.hash()}}),y.tabs.push({id:"camel-type-converters",title:function(){return'<i class="fa fa-list"></i> Type Converters'},tooltip:function(){return"List all the type converters registered in the context"},show:function(){return!r.isEndpointsFolder()&&!r.isEndpoint()&&!r.isComponentsFolder()&&!r.isComponent()&&(r.isCamelContext()||r.isRoutesFolder())&&e.isCamelVersionEQGT(2,13,r,a)&&r.hasInvokeRightsForName(e.getSelectionCamelTypeConverter(r),"listTypeConverters")},href:function(){return"/camel/typeConverter"+r.hash()}}),y.tabs.push({id:"camel-route-profile",title:function(){return'<i class="fa fa-bar-chart"></i> Profile'},tooltip:function(){return"Profile the messages flowing through the Camel route"},show:function(){return r.isRoute()&&e.getSelectionCamelTraceMBean(r)&&r.hasInvokeRightsForName(e.getSelectionCamelTraceMBean(r),"dumpAllTracedMessagesAsXml")},href:function(){return"/camel/profileRoute"+r.hash()}}),y.tabs.push({id:"camel-route-debug",title:function(){return'<i class="fa fa-stethoscope"></i> Debug'},tooltip:function(){return"Debug the Camel route"},show:function(){return r.isRoute()&&e.getSelectionCamelDebugMBean(r)&&r.hasInvokeRightsForName(e.getSelectionCamelDebugMBean(r),"getBreakpoints")},href:function(){return"/camel/debugRoute"+r.hash()}}),y.tabs.push({id:"camel-route-trace",title:function(){return'<i class="fa fa-envelope"></i> Trace'},tooltip:function(){return"Trace the messages flowing through the Camel route"},show:function(){return r.isRoute()&&e.getSelectionCamelTraceMBean(r)&&r.hasInvokeRightsForName(e.getSelectionCamelTraceMBean(r),"dumpAllTracedMessagesAsXml")},href:function(){return"/camel/traceRoute"+r.hash()}}),y.tabs.push({id:"camel-endpoint-browser",title:function(){return'<i class="fa fa-envelope"></i> Browse'},tooltip:function(){return"Browse the messages on the endpoint"},show:function(){return r.isEndpoint()&&r.hasInvokeRights(r.selection,"browseAllMessagesAsXml")},href:function(){return"/camel/browseEndpoint"+r.hash()}}),y.tabs.push({id:"camel-endpoint-send",title:function(){return'<i class="fa fa-pencil"></i> Send'},show:function(){return r.isEndpoint()&&r.hasInvokeRights(r.selection,"org.apache.camel"===r.selection.domain?"sendBodyAndHeaders":"sendTextMessage")},href:function(){return"/camel/sendMessage"+r.hash()}}),y.tabs.push({id:"camel-endpoint-create",title:function(){return'<i class="fa fa-plus"></i> Endpoint'},tooltip:function(){return"Create a new endpoint"},show:function(){return r.isEndpointsFolder()&&r.hasInvokeRights(r.selection,"createEndpoint")},href:function(){return"/camel/createEndpoint"+r.hash()}}),t.add(y),r.addNamedTreePostProcessor("camel",function(t){var n=[],i=e.jmxDomain;if(t){var r=new Folder("Camel Contexts");r.addClass="org-apache-camel-context-folder",r.children=n,r.typeName="context",r.key="camelContexts",r.domain=i;var a=t.get(i);a&&(angular.forEach(a.children,function(t,a){var o=t.map;if(o){var s=o.context,l=o.routes,c=o.endpoints,u=o.components;if(s){var d=s.children[0];if(d){var p=d.title,h=!0;if(h){var f=new Folder(p);if(f.addClass="org-apache-camel-context",f.domain=i,f.objectName=d.objectName,f.entries=d.entries,f.typeName=d.typeName,f.key=d.key,f.version=d.version,l){var g=new Folder("Routes");g.addClass="org-apache-camel-routes-folder",g.parent=s,g.children=l.children,angular.forEach(g.children,function(e){return e.addClass="org-apache-camel-routes"}),f.children.push(g),g.typeName="routes",g.key=l.key,g.domain=l.domain}if(c){var m=new Folder("Endpoints");m.addClass="org-apache-camel-endpoints-folder",m.parent=s,m.children=c.children,angular.forEach(m.children,function(t){t.addClass="org-apache-camel-endpoints",e.getContextId(t)||(t.entries.context=d.entries.context)}),f.children.push(m),m.entries=d.entries,m.typeName="endpoints",m.key=c.key,m.domain=c.domain}if(u){var v=new Folder("Components");v.addClass="org-apache-camel-components-folder",v.parent=s,v.children=u.children,angular.forEach(v.children,function(t){t.addClass="org-apache-camel-components",e.getContextId(t)||(t.entries.context=d.entries.context)}),f.children.push(v),v.entries=d.entries,v.typeName="components",v.key=u.key,v.domain=u.domain}var y=new Folder("MBeans");angular.forEach(o,function(e,t){"context"!==t&&"routes"!==t&&"endpoints"!==t&&"components"!==t&&y.children.push(e)}),y.children.length>0&&(y.sortChildren(!1),f.children.push(y)),f.parent=r,n.push(f)}}}}}),a.children.splice(0,0,r))}})}]),hawtioPluginLoader.addModule(e.pluginName),hawtioPluginLoader.registerPreBootstrapTask(function(n){t.registerLazyLoadHandler(e.jmxDomain,function(t){return e.jmxDomain===t.domain&&"routes"===t.typeName?function(t,n,i){"routes"===n.typeName?e.processRouteXml(t,t.jolokia,n,function(t){t&&e.addRouteChildren(n,t),i()}):i()}:null}),n()})}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.AttributesToolBarController",["$scope","workspace","jolokia",function(t,n,i){t.deleteDialog=!1,t.start=function(){t.invokeSelectedMBeans(function(t){return e.isState(t,"suspend")?"resume()":"start()"})},t.pause=function(){t.invokeSelectedMBeans("suspend()")},t.stop=function(){t.invokeSelectedMBeans("stop()",function(){n.removeAndSelectParentNode()})},t["delete"]=function(){t.invokeSelectedMBeans("remove()",function(){t.workspace.operationCounter+=1,Core.$apply(t)})},t.anySelectionHasState=function(n){var i=t.selectedItems||[];return i.length&&i.any(function(t){return e.isState(t,n)})},t.everySelectionHasState=function(n){var i=t.selectedItems||[];return i.length&&i.every(function(t){return e.isState(t,n)})}}])}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.BreadcrumbBarController",["$scope","$routeParams","workspace","jolokia",function(t,n,i,r){function a(){var n=[],r=e.getRootCamelFolder(i);return r&&angular.forEach(r.children,function(e){var i=e.title;if(i&&i!==t.contextId){var r=i,a=l(i,s());n.push({name:r,tooltip:"Camel Context",link:a})}}),n}function o(e){var t=[];return angular.forEach(["endpoints","routes"],function(n){if(n&&n!==s()){var i=l(e,n);t.push({name:n,tooltip:"Entity inside a Camel Context",link:i})}}),t}function s(){var e=Core.pathGet(t,["breadcrumbs","childEntity"]);return e||f}function l(t,n){var i=c(t,n),r=i.length>0?i[0].link:e.linkToBrowseEndpointFullScreen(t,"noEndpoints");return r}function c(e,t){return"endpoints"===t?u(e):d(e)}function u(t){var n=[],r=e.getCamelContextFolder(i,t);if(r){var a=(r.children||[]).find(function(e){return"endpoints"===e.title});a&&angular.forEach(a.children,function(i){var r=i?i.entries:null;if(r){var a=r.name;if(a){var o=h(a),s=e.linkToBrowseEndpointFullScreen(t,a);n.push({contextId:t,path:a,name:o,tooltip:"Endpoint",link:s})}}})}return n}function d(t){var n=[],r=e.getCamelContextFolder(i,t);if(r){var a=(r.children||[]).find(function(e){return"routes"===e.title});a&&angular.forEach(a.children,function(i){var r=i?i.entries:null;if(r){var a=r.name;if(a){var o=h(a),s=e.linkToRouteDiagramFullScreen(t,a);n.push({contextId:t,path:a,name:o,tooltip:"Camel Route",link:s})}}})}return n}function p(){var n=null;if(t.contextId){var r=null,a=null;t.endpointPath?(a="browseEndpoint",r=i.findMBeanWithProperties(e.jmxDomain,{context:t.contextId,type:"endpoints",name:t.endpointPath})):t.routeId&&(a="routes",r=i.findMBeanWithProperties(e.jmxDomain,{context:t.contextId,type:"routes",name:t.routeId}));var o=r?r.key:null;o&&a&&(n="#/camel/"+a+"?tab=camel&nid="+o)}return n}function h(e){return e?Core.trimQuotes(e):e}t.workspace=i,null!=n&&(t.contextId=n.contextId,t.endpointPath=n.endpointPath,t.endpointName=h(t.endpointPath),t.routeId=n.routeId),t.treeViewLink=p();var f=t.endpointPath?"endpoints":"routes",g={endpoints:"Camel Endpoint",routes:"Camel Route"};t.breadcrumbs=[{name:t.contextId,items:a(),tooltip:"Camel Context"},{name:f,items:o(t.contextId),tooltip:"Entity inside a Camel Context"},{name:t.endpointName||h(t.routeId),items:c(t.contextId,s()),tooltip:g[f]}]}])}(Camel||(Camel={}));var Camel;!function(e){e.BrowseEndpointController=e._module.controller("Camel.BrowseEndpointController",["$scope","$routeParams","workspace","jolokia",function(t,n,i,r){function a(){}function o(){t.messageDialog&&t.messageDialog.close(),t.gridOptions.selectedItems.splice(0),Core.notification("success",t.message),setTimeout(s,50)}function s(){var n=null;if(t.contextId&&t.endpointPath){var a=i.findMBeanWithProperties(e.jmxDomain,{context:t.contextId,type:"endpoints",name:t.endpointPath});a&&(n=a.objectName)}if(n||(n=i.getSelectedMBeanName()),n){e.log.info("MBean: "+n);var o=Core.onSuccess(l);r.execute(n,"browseAllMessagesAsXml(java.lang.Boolean)",!0,o)}}function l(n){var i=[];if(angular.isString(n)){var r=$.parseXML(n),a=$(r).find("message");a.each(function(n,r){var a=e.createMessageFromXml(r);a.openMessageDialog=t.openMessageDialog,i.push(a)})}t.messages=i,Core.$apply(t)}t.workspace=i,t.forwardDialog=new UI.Dialog,t.showMessageDetails=!1,t.mode="text",t.gridOptions=e.createBrowseGridOptions(),t.contextId=n.contextId,t.endpointPath=n.endpointPath,t.isJmxTab=!n.contextId||!n.endpointPath,t.$watch("workspace.selection",function(){t.isJmxTab&&i.moveIfViewInvalid()||s()}),t.openMessageDialog=function(e){ActiveMQ.selectCurrentMessage(e,"id",t),t.row&&(t.mode=CodeEditor.detectTextFormat(t.row.body),t.showMessageDetails=!0)},ActiveMQ.decorate(t),t.forwardMessagesAndCloseForwardDialog=function(){var n=e.getSelectionCamelContextMBean(i),s=t.gridOptions.selectedItems,l=t.endpointUri;n&&l&&s&&s.length&&(r.execute(n,"createEndpoint(java.lang.String)",l,Core.onSuccess(a)),t.message="Forwarded "+Core.maybePlural(s.length,"message to "+l),angular.forEach(s,function(e,t){var i=t+1<s.length?a:o,c=e.body,u=e.headers;r.execute(n,"sendBodyAndHeaders(java.lang.String, java.lang.Object, java.util.Map)",l,c,u,Core.onSuccess(i))})),t.forwardDialog.close()},t.endpointUris=function(){var t=e.getSelectionCamelContextEndpoints(i);return t?t.children.map(function(e){return e.title}):[]},t.refresh=s}])}(Camel||(Camel={}));var Camel;!function(e){e.camelHeaderSchema={definitions:{headers:{properties:{CamelAuthentication:{type:"java.lang.String"},CamelAuthenticationFailurePolicyId:{type:"java.lang.String"},CamelAcceptContentType:{type:"java.lang.String"},CamelAggregatedSize:{type:"java.lang.String"},CamelAggregatedTimeout:{type:"java.lang.String"},CamelAggregatedCompletedBy:{type:"java.lang.String"},CamelAggregatedCorrelationKey:{type:"java.lang.String"},CamelAggregationStrategy:{type:"java.lang.String"},CamelAggregationCompleteAllGroups:{type:"java.lang.String"},CamelAggregationCompleteAllGroupsInclusive:{type:"java.lang.String"},CamelAsyncWait:{type:"java.lang.String"},CamelBatchIndex:{type:"java.lang.String"},CamelBatchSize:{type:"java.lang.String"},CamelBatchComplete:{type:"java.lang.String"},CamelBeanMethodName:{type:"java.lang.String"},CamelBeanMultiParameterArray:{type:"java.lang.String"},CamelBinding:{type:"java.lang.String"},breadcrumbId:{type:"java.lang.String"},CamelCharsetName:{type:"java.lang.String"},CamelCreatedTimestamp:{type:"java.lang.String"},"Content-Encoding":{type:"java.lang.String"},"Content-Length":{type:"java.lang.String"},"Content-Type":{type:"java.lang.String"},CamelCorrelationId:{type:"java.lang.String"},CamelDataSetIndex:{type:"java.lang.String"},"org.apache.camel.default.charset":{type:"java.lang.String"},CamelDestinationOverrideUrl:{type:"java.lang.String"},CamelDisableHttpStreamCache:{type:"java.lang.String"},CamelDuplicateMessage:{type:"java.lang.String"},CamelExceptionCaught:{type:"java.lang.String"},CamelExceptionHandled:{type:"java.lang.String"},CamelEvaluateExpressionResult:{type:"java.lang.String"},CamelErrorHandlerHandled:{type:"java.lang.String"},CamelExternalRedelivered:{type:"java.lang.String"},CamelFailureHandled:{type:"java.lang.String"},CamelFailureEndpoint:{type:"java.lang.String"},CamelFailureRouteId:{type:"java.lang.String"},CamelFilterNonXmlChars:{type:"java.lang.String"},CamelFileLocalWorkPath:{type:"java.lang.String"},CamelFileName:{type:"java.lang.String"},CamelFileNameOnly:{type:"java.lang.String"},CamelFileNameProduced:{type:"java.lang.String"},CamelFileNameConsumed:{type:"java.lang.String"},CamelFilePath:{type:"java.lang.String"},CamelFileParent:{type:"java.lang.String"},CamelFileLastModified:{type:"java.lang.String"},CamelFileLength:{type:"java.lang.String"},CamelFilterMatched:{type:"java.lang.String"},CamelFileLockFileAcquired:{type:"java.lang.String"},CamelFileLockFileName:{type:"java.lang.String"},CamelGroupedExchange:{type:"java.lang.String"},CamelHttpBaseUri:{type:"java.lang.String"},CamelHttpCharacterEncoding:{type:"java.lang.String"},CamelHttpMethod:{type:"java.lang.String"},CamelHttpPath:{type:"java.lang.String"},CamelHttpProtocolVersion:{type:"java.lang.String"},CamelHttpQuery:{type:"java.lang.String"},CamelHttpResponseCode:{type:"java.lang.String"},CamelHttpUri:{type:"java.lang.String"},CamelHttpUrl:{type:"java.lang.String"},CamelHttpChunked:{type:"java.lang.String"},CamelHttpServletRequest:{type:"java.lang.String"},CamelHttpServletResponse:{type:"java.lang.String"},CamelInterceptedEndpoint:{type:"java.lang.String"},CamelInterceptSendToEndpointWhenMatched:{type:"java.lang.String"},CamelLanguageScript:{type:"java.lang.String"},CamelLogDebugBodyMaxChars:{type:"java.lang.String"},CamelLogDebugStreams:{type:"java.lang.String"},CamelLoopIndex:{type:"java.lang.String"},CamelLoopSize:{type:"java.lang.String"},CamelMaximumCachePoolSize:{type:"java.lang.String"},CamelMaximumEndpointCacheSize:{type:"java.lang.String"},CamelMessageHistory:{type:"java.lang.String"},CamelMulticastIndex:{type:"java.lang.String"},CamelMulticastComplete:{type:"java.lang.String"},CamelNotifyEvent:{type:"java.lang.String"},CamelOnCompletion:{type:"java.lang.String"},CamelOverruleFileName:{type:"java.lang.String"},CamelParentUnitOfWork:{type:"java.lang.String"},CamelRecipientListEndpoint:{type:"java.lang.String"},CamelReceivedTimestamp:{type:"java.lang.String"},CamelRedelivered:{type:"java.lang.String"},CamelRedeliveryCounter:{type:"java.lang.String"},CamelRedeliveryMaxCounter:{type:"java.lang.String"},CamelRedeliveryExhausted:{type:"java.lang.String"},CamelRedeliveryDelay:{type:"java.lang.String"},CamelRollbackOnly:{type:"java.lang.String"},CamelRollbackOnlyLast:{type:"java.lang.String"},CamelRouteStop:{type:"java.lang.String"},CamelSoapAction:{type:"java.lang.String"},CamelSkipGzipEncoding:{type:"java.lang.String"},CamelSlipEndpoint:{type:"java.lang.String"},CamelSplitIndex:{type:"java.lang.String"},CamelSplitComplete:{type:"java.lang.String"},CamelSplitSize:{type:"java.lang.String"},CamelTimerCounter:{type:"java.lang.String"},CamelTimerFiredTime:{type:"java.lang.String"},CamelTimerName:{type:"java.lang.String"},CamelTimerPeriod:{type:"java.lang.String"},CamelTimerTime:{type:"java.lang.String"},CamelToEndpoint:{type:"java.lang.String"},CamelTraceEvent:{type:"java.lang.String"},CamelTraceEventNodeId:{type:"java.lang.String"},CamelTraceEventTimestamp:{type:"java.lang.String"},CamelTraceEventExchange:{type:"java.lang.String"},"Transfer-Encoding":{type:"java.lang.String"},CamelUnitOfWorkExhausted:{type:"java.lang.String"},CamelUnitOfWorkProcessSync:{type:"java.lang.String"},CamelXsltFileName:{type:"java.lang.String"}}}}}}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.DebugRouteController",["$scope","$element","workspace","jolokia","localStorage","documentBase",function(t,n,i,r,a,o){function s(){var t=g();if(t){var n=x();e.highlightSelectedNode(n,t)}else e.highlightSelectedNode(n,null)}function l(){t.debugging=!1;var n=e.getSelectionCamelDebugMBean(i);n&&(t.debugging=r.getAttribute(n,"Enabled",Core.onSuccess(null)),t.debugging?(r.execute(n,"getBreakpoints",Core.onSuccess(v)),t.graphView="plugins/camel/html/routes.html",Core.register(r,t,{type:"exec",mbean:n,operation:"getDebugCounter"},Core.onSuccess(c))):t.graphView=null)}function c(e){var n=e.value;n&&n!==t.breakpointCounter&&(t.breakpointCounter=n,u())}function u(){var t=e.getSelectionCamelDebugMBean(i);t&&(console.log("getting suspended breakpoints!"),r.execute(t,"getSuspendedBreakpointNodeIds",Core.onSuccess(d)))}function d(n){var a=e.getSelectionCamelDebugMBean(i);t.suspendedBreakpoints=n,t.stopped=n&&n.length;var o=g();a&&o&&(r.execute(a,"dumpTracedMessagesAsXml",o,Core.onSuccess(p)),t.selectedDiagramNodeId=o)}function p(n,i){if(_.debug("onMessage -> "+n),t.messages=[],n){var r=n;if(angular.isString(r)){var a=$.parseXML(r),o=$(a).find("fabricTracerEventMessage");o&&o.length||(o=$(a).find("backlogTracerEventMessage")),o.each(function(n,i){var r=e.createMessageFromXml(i),a=$(i).find("toNode").text();a&&(r.toNode=a),r.openMessageDialog=t.openMessageDialog,t.messages.push(r)})}}else _.warn("WARNING: dumpTracedMessagesAsXml() returned no results!");h(),k(),s(),_.debug("has messages "+t.messages.length+" selected row "+t.row+" index "+t.rowIndex),Core.$apply(t)}function h(){if(t.messages.length>0){t.row=t.messages[0];var e=t.row.body;t.mode=angular.isString(e)?CodeEditor.detectTextFormat(e):"text","javascript"==t.mode&&(t.mode="text")}else t.row={headers:{},body:"",bodyType:""},t.mode="text"}function f(){t.messages=[],t.suspendedBreakpoints=[],t.stopped=!1,h(),k(),s(),Core.$apply(t)}function g(){var e=null,n=t.suspendedBreakpoints;return n&&n.length&&(e=n[0],n.length>1&&m(t.selectedDiagramNodeId)&&(e=t.selectedDiagramNodeId)),e}function m(e){return w(t.suspendedBreakpoints,e)}function v(e){t.breakpoints=e,b();var n=x();n.length&&k(n),Core.$apply(t)}function y(e){return w(t.breakpoints,e)}function b(){t.hasBreakpoint=y(t.selectedDiagramNodeId)}function w(e,t){return t&&e&&e.some(t)}function x(){var e=d3.select("svg");return e.selectAll("g .node")}function k(e){void 0===e&&(e=x()),e.each(function(e){var t=e.cid,n=d3.select(this),i=n.selectAll("image.breakpoint"),r=m(t),a=y(t);if(a||r){var o=r?A:T;i.length&&i[0].length?i.attr("xlink:href",function(e){return o}):n.append("image").attr("xlink:href",function(e){return o}).attr("class","breakpoint").attr("x",-12).attr("y",-20).attr("height",24).attr("width",24)}else i.remove()})}function C(e){l(),Core.$apply(t)}function S(t){var n=e.getSelectionCamelDebugMBean(i);if(n){var o=t?"enableDebugger":"disableDebugger",s=e.maximumTraceOrDebugBodyLength(a),l=e.traceOrDebugIncludeStreams(a);r.setAttribute(n,"BodyMaxChars",s),r.setAttribute(n,"BodyIncludeStreams",l),r.setAttribute(n,"BodyIncludeFiles",l),r.execute(n,o,Core.onSuccess(C))}}var _=Logger.get("CamelDebugger");t.debugging=!1,t.stopped=!1,t.ignoreRouteXmlNode=!0,t.messages=[],t.mode="text",t.showMessageDetails=!0,t.startDebugging=function(){_.info("Start debugging"),S(!0)},t.stopDebugging=function(){_.info("Stop debugging"),S(!1)},t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(l,50)}),t.$on("camel.diagram.selectedNodeId",function(e,n){t.selectedDiagramNodeId=n,b()}),t.$on("camel.diagram.layoutComplete",function(e,i){k(),$(n).find("g.node").dblclick(function(e){var n=this.getAttribute("data-cid");t.toggleBreakpoint(n)})}),t.$watch("workspace.selection",function(){i.moveIfViewInvalid()||l()}),t.toggleBreakpoint=function(t){_.info("Toggle breakpoint");var n=e.getSelectionCamelDebugMBean(i);if(n&&t){var a=y(t)?"removeBreakpoint":"addBreakpoint";r.execute(n,a,t,Core.onSuccess(C))}},t.addBreakpoint=function(){_.info("Add breakpoint");var n=e.getSelectionCamelDebugMBean(i);n&&t.selectedDiagramNodeId&&r.execute(n,"addBreakpoint",t.selectedDiagramNodeId,Core.onSuccess(C))},t.removeBreakpoint=function(){_.info("Remove breakpoint");var n=e.getSelectionCamelDebugMBean(i);n&&t.selectedDiagramNodeId&&r.execute(n,"removeBreakpoint",t.selectedDiagramNodeId,Core.onSuccess(C))},t.resume=function(){_.info("Resume");var t=e.getSelectionCamelDebugMBean(i);t&&r.execute(t,"resumeAll",Core.onSuccess(f))},t.suspend=function(){_.info("Suspend");var t=e.getSelectionCamelDebugMBean(i);t&&r.execute(t,"suspendAll",Core.onSuccess(f))},t.step=function(){_.info("Step");var t=e.getSelectionCamelDebugMBean(i),n=g();t&&n&&r.execute(t,"stepBreakpoint(java.lang.String)",n,Core.onSuccess(f))};var T=UrlHelpers.join(o,"/img/icons/camel/breakpoint.gif"),A=UrlHelpers.join(o,"/img/icons/camel/breakpoint-suspended.gif")}])}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.EndpointController",["$scope","$location","localStorage","workspace","jolokia",function(t,n,i,r,a){function o(){t.endpointName="",t.workspace.operationCounter+=1,Core.$apply(t),Core.notification("success",t.message)}function s(){if(r.selection){var e=Core.pathGet(r,["selection","parent"]);e&&t.workspace.updateSelectionNode(e)}t.workspace.operationCounter+=1,Core.$apply(t),Core.notification("success",t.message)}e.initEndpointChooserScope(t,n,i,r,a),t.workspace=r,t.message="",t.createEndpoint=function(n){var i=r.jolokia;if(i){var a=e.getSelectionCamelContextMBean(r);if(a){t.message="Creating endpoint "+n;var s="createEndpoint(java.lang.String)";i.execute(a,s,n,Core.onSuccess(o))}else Core.notification("error","Could not find the CamelContext MBean!")}},t.createEndpointFromData=function(){if(t.selectedComponentName&&t.endpointPath){var e=t.selectedComponentName+"://"+t.endpointPath;console.log("Have endpoint data "+JSON.stringify(t.endpointParameters));var n="";angular.forEach(t.endpointParameters,function(e,t){var i=n?"&":"";n+=i+t+"="+e}),n&&(e+="?"+n),t.createEndpoint(e)}},t.deleteEndpoint=function(){var e=r.jolokia,n=r.selection,i=n.entries;if(n&&e&&i){var a=n.domain,o=i.BrokerName,l=i.Destination,c="Topic"!==i.Type;if(a&&o){var u=""+a+":BrokerName="+o+",Type=Broker";t.message="Deleting "+(c?"queue":"topic")+" "+l;var d="removeEndpoint(java.lang.String)";e.execute(u,d,l,Core.onSuccess(s))}}}}])}(Camel||(Camel={}));var Camel;!function(e){function t(t){var n=e.getEndpointConfig(t,null),r=Core.pathGet(n,["icon"]);

if(!r){var a=i(t);r=Core.pathGet(a,["endpointIcon"])}return r||e.endpointIcon}function n(t,n){var i=e.endpointConfigurations[t];return i||(i={},e.endpointConfigurations[t]=i),i.label||(i.label=t),i.icon||(i.icon=Core.pathGet(n,["endpointIcon"])||e.endpointIcon),i.category||(i.category=n),i}function i(t){return e.endpointToCategory[t]||e.endpointCategories.core}function r(){var t=e._apacheCamelModel,n=t.definitions;return n&&angular.forEach(o,function(e,t){var i=n[t];i&&(i.tabs||(i.tabs=e))}),t}function a(t,n,i,r,a){function o(n){t.componentNames=n,e.log.info("onComponents: "+n),t.hasComponentNames=t.componentNames?!0:!1,Core.$apply(t)}function s(e){if(e)try{var n=JSON.parse(e),i=t.selectedComponentName;l(i,n),t.endpointSchema=n,t.schema.definitions[i]=n,t.loadedEndpointSchema=i,Core.$apply(t)}catch(r){console.log("Failed to parse JSON "+r),console.log("JSON: "+e)}}function l(t,n){console.log("======== configuring schema for "+t);var i=e.endpointForms[t];i&&n&&i.tabs&&(n.tabs=i.tabs)}function c(){var a=t.profileWorkspace;if(!a){var o=t.jolokia;o&&(a=Core.createRemoteWorkspace(o,n,i),t.profileWorkspace=a)}a||(e.log.info("No profileWorkspace found so defaulting it to workspace for now"),a=r);var s,l,c=t.selectedComponentName;angular.isDefined(t.camelSelectionDetails)&&(s=t.camelSelectionDetails.selectedCamelContextId,l=t.camelSelectionDetails.selectedRouteId),console.log("==== componentName "+c+" selectedCamelContextId: "+s+" selectedRouteId: "+l);var u=e.camelContextMBeansById(a);if(s){var d=Core.pathGet(u,[s,"mbean"]);if(d)return d}if(l){var p=e.camelContextMBeansByRouteId(a),d=Core.pathGet(p,[l,"mbean"]);if(d)return d}if(c){var p=e.camelContextMBeansByComponentName(a),d=Core.pathGet(p,[c,"mbean"]);if(d)return d}var h=null;return angular.forEach(u,function(e,t){var n=e.mbean;!h&&n&&(h=n)}),h}t.selectedComponentName=null,t.endpointParameters={},t.endpointPath="",t.schema={definitions:{}},t.jolokia=a;var u={silent:!0};t.$watch("workspace.selection",function(){t.loadEndpointNames()}),t.$watch("selectedComponentName",function(){t.selectedComponentName!==t.loadedComponentName&&(t.endpointParameters={},t.loadEndpointSchema(t.selectedComponentName),t.loadedComponentName=t.selectedComponentName)}),t.endpointCompletions=function(e){var n=null,i=c(),r=t.selectedComponentName,a={};return i&&r&&e&&(n=t.jolokia.execute(i,"completeEndpointPath",r,a,e,Core.onSuccess(null,u))),n||[]},t.loadEndpointNames=function(){t.componentNames=null;var e=c();e?t.jolokia.execute(e,"findComponentNames",Core.onSuccess(o,{silent:!0})):console.log("WARNING: No camel context mbean so cannot load component names")},t.loadEndpointSchema=function(e){var n=c();n&&e&&e!==t.loadedEndpointSchema&&(t.selectedComponentName=e,t.jolokia.execute(n,"componentParameterJsonSchema",e,Core.onSuccess(s,u)))}}e.endpointCategories={bigdata:{label:"Big Data",endpoints:["hdfs","hbase","lucene","solr"],endpointIcon:"/img/icons/camel/endpointRepository24.png"},database:{label:"Database",endpoints:["couchdb","elasticsearch","hbase","jdbc","jpa","hibernate","mongodb","mybatis","sql"],endpointIcon:"/img/icons/camel/endpointRepository24.png"},cloud:{label:"Cloud",endpoints:["aws-cw","aws-ddb","aws-sdb","aws-ses","aws-sns","aws-sqs","aws-s3","gauth","ghhtp","glogin","gtask","jclouds"]},core:{label:"Core",endpoints:["bean","direct","seda"]},messaging:{label:"Messaging",endpoints:["jms","activemq","amqp","cometd","cometds","mqtt","netty","vertx","websocket"],endpointIcon:"/img/icons/camel/endpointQueue24.png"},mobile:{label:"Mobile",endpoints:["apns"]},sass:{label:"SaaS",endpoints:["salesforce","sap-netweaver"]},social:{label:"Social",endpoints:["atom","facebook","irc","ircs","rss","smpp","twitter","weather"]},storage:{label:"Storage",endpointIcon:"/img/icons/camel/endpointFolder24.png",endpoints:["file","ftp","sftp","scp","jsch"]},template:{label:"Templating",endpoints:["freemarker","velocity","xquery","xslt","scalate","string-template"]}},e.endpointToCategory={},e.endpointIcon="/img/icons/camel/endpoint24.png",e.endpointConfigurations={drools:{icon:"/img/icons/camel/endpointQueue24.png"},quartz:{icon:"/img/icons/camel/endpointTimer24.png"},facebook:{icon:"/img/icons/camel/endpoints/facebook24.jpg"},salesforce:{icon:"/img/icons/camel/endpoints/salesForce24.png"},sap:{icon:"/img/icons/camel/endpoints/SAPe24.png"},"sap-netweaver":{icon:"/img/icons/camel/endpoints/SAPNetweaver24.jpg"},timer:{icon:"/img/icons/camel/endpointTimer24.png"},twitter:{icon:"/img/icons/camel/endpoints/twitter24.png"},weather:{icon:"/img/icons/camel/endpoints/weather24.jpg"}},e.endpointForms={file:{tabs:{Options:["*"]}},activemq:{tabs:{Connection:["clientId","transacted","transactedInOut","transactionName","transactionTimeout"],Producer:["timeToLive","priority","allowNullBody","pubSubNoLocal","preserveMessageQos"],Consumer:["concurrentConsumers","acknowledgementModeName","selector","receiveTimeout"],Reply:["replyToDestination","replyToDeliveryPersistent","replyToCacheLevelName","replyToDestinationSelectorName"],Options:["*"]}}},e.endpointForms.jms=e.endpointForms.activemq,angular.forEach(e.endpointCategories,function(t,n){t.id=n,angular.forEach(t.endpoints,function(n){e.endpointToCategory[n]=t})});var o={route:{Overview:["id","description"],Advanced:["*"]}};e.getEndpointIcon=t,e.getEndpointConfig=n,e.getEndpointCategory=i,e.getConfiguredCamelModel=r,e.initEndpointChooserScope=a}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.InflightController",["$scope","$location","workspace","jolokia",function(t,n,i,r){function a(e){var n=e.value;if(n){var i=[];for(var r in n){var a=n[r];i.push({exchangeId:a.exchangeId,routeId:a.routeId,nodeId:a.nodeId,duration:a.duration,elapsed:a.elapsed})}i=i.sortBy("exchangeId"),t.data=i,t.selectedMBean=e.request.mbean}else t.data=[];t.initDone="true",Core.$apply(t)}function o(){console.log("Loading inflight data...");var n=e.getSelectedRouteId(i);null!=n&&(t.gridOptions.filterOptions.filterText=n);var o=e.getSelectionCamelInflightRepository(i);if(o){var s={type:"exec",mbean:o,operation:"browse()"};Core.scopeStoreJolokiaHandle(t,r,r.register(a,s))}}t.data=[],t.initDone=!1,t.mbeanAttributes={};var s=[{field:"exchangeId",displayName:"Exchange Id",cellFilter:null,width:"*",resizable:!0},{field:"routeId",displayName:"Route Id",cellFilter:null,width:"*",resizable:!0},{field:"nodeId",displayName:"Node Id",cellFilter:null,width:"*",resizable:!0},{field:"duration",displayName:"Duration (ms)",cellFilter:null,width:"*",resizable:!0},{field:"elapsed",displayName:"Elapsed (ms)",cellFilter:null,width:"*",resizable:!0}];t.gridOptions={data:"data",displayFooter:!0,displaySelectionCheckbox:!1,canSelectRows:!1,enableSorting:!0,columnDefs:s,selectedItems:[],filterOptions:{filterText:""}},t.renderIcon=function(t){return e.iconClass(t)},o()}])}(Camel||(Camel={}));var Camel;!function(e){e.jmsHeaderSchema={definitions:{headers:{properties:{JMSCorrelationID:{type:"java.lang.String"},JMSDeliveryMode:{type:"string","enum":["PERSISTENT","NON_PERSISTENT"]},JMSDestination:{type:"javax.jms.Destination"},JMSExpiration:{type:"long"},JMSPriority:{type:"int"},JMSReplyTo:{type:"javax.jms.Destination"},JMSType:{type:"java.lang.String"},JMSXGroupId:{type:"java.lang.String"},AMQ_SCHEDULED_CRON:{type:"java.lang.String"},AMQ_SCHEDULED_DELAY:{type:"java.lang.String"},AMQ_SCHEDULED_PERIOD:{type:"java.lang.String"},AMQ_SCHEDULED_REPEAT:{type:"java.lang.String"}}},"javax.jms.Destination":{type:"java.lang.String"}}}}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.PreferencesController",["$scope","localStorage",function(t,n){var i={properties:{camelHideOptionDocumentation:{type:"boolean","default":e.defaultHideOptionDocumentation,description:"Whether to hide documentation in the properties view and Camel route editor"},camelHideOptionDefaultValue:{type:"boolean","default":e.defaultHideOptionDefaultValue,description:"Whether to hide options that are using a default value in the properties view"},camelHideOptionUnusedValue:{type:"boolean","default":e.defaultHideOptionUnusedValue,description:"Whether to hide unused/empty options in the properties view"},camelTraceOrDebugIncludeStreams:{type:"boolean","default":e.defaultCamelTraceOrDebugIncludeStreams,description:"Whether to include stream based message body when using the tracer and debugger"},camelMaximumTraceOrDebugBodyLength:{type:"number","default":e.defaultCamelMaximumTraceOrDebugBodyLength,description:"The maximum length of the body before its clipped when using the tracer and debugger"},camelMaximumLabelWidth:{type:"number",description:"The maximum length of a label in Camel diagrams before it is clipped"},camelIgnoreIdForLabel:{type:"boolean","default":!1,description:"If enabled then we will ignore the ID value when viewing a pattern in a Camel diagram; otherwise we will use the ID value as the label (the tooltip will show the actual detail)"},camelShowInflightCounter:{type:"boolean","default":!0,description:"Whether to show inflight counter in route diagram"},camelRouteMetricMaxSeconds:{type:"number",min:"1",max:"100",description:"The maximum value in seconds used by the route metrics duration and histogram charts"}}};t.entity=t,t.config=i,Core.initPreferenceScope(t,n,{camelIgnoreIdForLabel:{value:!1,converter:Core.parseBooleanValue},camelShowInflightCounter:{value:!0,converter:Core.parseBooleanValue},camelMaximumLabelWidth:{value:e.defaultMaximumLabelWidth,converter:parseInt},camelMaximumTraceOrDebugBodyLength:{value:e.defaultCamelMaximumTraceOrDebugBodyLength,converter:parseInt},camelTraceOrDebugIncludeStreams:{value:e.defaultCamelTraceOrDebugIncludeStreams,converter:Core.parseBooleanValue},camelRouteMetricMaxSeconds:{value:e.defaultCamelRouteMetricMaxSeconds,converter:parseInt},camelHideOptionDocumentation:{value:e.defaultHideOptionDocumentation,converter:Core.parseBooleanValue},camelHideOptionDefaultValue:{value:e.defaultHideOptionDefaultValue,converter:Core.parseBooleanValue},camelHideOptionUnusedValue:{value:e.defaultHideOptionUnusedValue,converter:Core.parseBooleanValue}})}])}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.ProfileRouteController",["$scope","$location","workspace","jolokia",function(t,n,i,r){function a(e){var n=[],i=e.value;if(angular.isString(i)){var r=$.parseXML(i),a=$(r).find("routeStat");a.each(function(e,t){var i={id:{},count:{},last:{},delta:{},mean:{},min:{},max:{},total:{},self:{}};i.id=t.getAttribute("id");var r=0;r+=+t.getAttribute("exchangesCompleted"),r+=+t.getAttribute("exchangesFailed"),i.count=r,i.last=t.getAttribute("lastProcessingTime");var a=t.getAttribute("deltaProcessingTime");i.delta=a?a:0,i.mean=t.getAttribute("meanProcessingTime"),i.min=t.getAttribute("minProcessingTime"),i.max=t.getAttribute("maxProcessingTime"),i.total=t.getAttribute("totalProcessingTime"),i.self=t.getAttribute("selfProcessingTime"),n.push(i)});var o=$(r).find("processorStat");o.each(function(e,t){var i={id:{},count:{},last:{},delta:{},mean:{},min:{},max:{},total:{},self:{}};i.id=t.getAttribute("id");var r=0;r+=+t.getAttribute("exchangesCompleted"),r+=+t.getAttribute("exchangesFailed"),i.count=r,i.last=t.getAttribute("lastProcessingTime");var a=t.getAttribute("deltaProcessingTime");i.delta=a?a:0,i.mean=t.getAttribute("meanProcessingTime"),i.min=t.getAttribute("minProcessingTime"),i.max=t.getAttribute("maxProcessingTime");var o=t.getAttribute("accumulatedProcessingTime");i.total=o?o:"0",i.self=t.getAttribute("totalProcessingTime"),n.push(i)})}t.data=n,t.initDone=!0,Core.$apply(t)}function o(){console.log("Loading Camel route profile data...");var n=e.getSelectedRouteId(i),o=e.getSelectionRouteMBean(i,n);if(o){var s={type:"exec",mbean:o,operation:"dumpRouteStatsAsXml(boolean,boolean)",arguments:[!1,!0]};Core.scopeStoreJolokiaHandle(t,r,r.register(a,s))}}t.initDone=!1,t.data=[];var s=[{field:"id",displayName:"Id",cellFilter:null,width:"**",resizable:!0},{field:"count",displayName:"Count",cellFilter:null,width:"*",resizable:!0},{field:"last",displayName:"Last",cellFilter:null,width:"*",resizable:!0},{field:"delta",displayName:"Delta",cellFilter:null,width:"*",resizable:!0},{field:"mean",displayName:"Mean",cellFilter:null,width:"*",resizable:!0},{field:"min",displayName:"Min",cellFilter:null,width:"*",resizable:!0},{field:"max",displayName:"Max",cellFilter:null,width:"*",resizable:!0},{field:"total",displayName:"Total",cellFilter:null,width:"*",resizable:!0},{field:"self",displayName:"Self",cellFilter:null,width:"*",resizable:!0}];t.rowIcon=function(e){var n=t.icons[e];return n?n.img+" "+e:e},t.gridOptions={data:"data",displayFooter:!0,displaySelectionCheckbox:!1,canSelectRows:!1,enableSorting:!1,columnDefs:s,filterOptions:{filterText:""}},o()}])}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.PropertiesController",["$scope","workspace","localStorage","jolokia",function(t,n,i,r){function a(e){var n=Core.pathGet(t.model,["properties",e,"defaultValue"]);if(angular.isDefined(n)){var i=Core.pathGet(t.nodeData,e);if(angular.isDefined(i)){var r=i.toString();return 0===r.localeCompare(n)}}return!1}function o(e){var n=Core.pathGet(t.nodeData,e);return angular.isUndefined(n)||Core.isBlank(n)?!1:angular.isString(n)?!Core.isBlank(n):!0}function s(){var i=e.getSelectedRouteNode(n);if(t.nodeData=e.getRouteNodeJSON(i),i&&(t.model=e.getCamelSchema(i.nodeName),t.model)){l.enabledFor(Logger.DEBUG)&&(l.debug("Properties - data: "+JSON.stringify(t.nodeData,null,"  ")),l.debug("Properties - schema: "+JSON.stringify(t.model,null,"  ")));var r=[];t.model.group&&(r=t.model.group.split(",")),t.labels=r,t.nodeData=e.getRouteNodeJSON(i),t.icon=e.getRouteNodeIcon(i),t.viewTemplate="plugins/camel/html/nodePropertiesView.html",Core.$apply(t)}}var l=Logger.get("Camel");t.hideHelp=e.hideOptionDocumentation(i),t.hideUnused=e.hideOptionUnusedValue(i),t.hideDefault=e.hideOptionDefaultValue(i),t.viewTemplate=null,t.schema=e._apacheCamelModel,t.model=null,t.labels=[],t.nodeData=null,t.icon=null,t.$watch("hideHelp",function(e,t){e!==t&&s()}),t.$watch("hideUnused",function(e,t){e!==t&&s()}),t.$watch("hideDefault",function(e,t){e!==t&&s()}),t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(s,50)}),t.$watch("workspace.selection",function(){n.moveIfViewInvalid()||s()}),t.showEntity=function(e){return t.hideDefault&&a(e)?!1:t.hideUnused&&!o(e)?!1:!0}}])}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.PropertiesComponentController",["$scope","workspace","localStorage","jolokia","documentBase",function(t,n,i,r,a){function o(e){var n=Core.pathGet(t.model,["properties",e,"defaultValue"]);if(angular.isDefined(n)){var i=Core.pathGet(t.nodeData,e);if(angular.isDefined(i)){var r=i.toString();return 0===r.localeCompare(n)}}return!1}function s(e){var n=Core.pathGet(t.nodeData,e);return angular.isUndefined(n)||Core.isBlank(n)?!1:angular.isString(n)?!Core.isBlank(n):!0}function l(){var i=e.getSelectionCamelContextMBean(n),a=null;if(a||(a=n.getSelectedMBeanName()),a&&i){var o=r.request({type:"read",mbean:a,attribute:["ComponentName"]}),s=o.value.ComponentName;if(s){t.componentName=s,u.info("Calling explainComponentJson for name: "+s);var l={type:"exec",mbean:i,operation:"explainComponentJson(java.lang.String,boolean)",arguments:[s,!0]};r.request(l,Core.onSuccess(c))}}}function c(e){u.debug("Populate data "+e);var n=e.value;if(n){t.model=JSON.parse(n),t.model.title=t.componentName,t.model.description=t.model.component.description,t.icon=UrlHelpers.join(a,"/img/icons/camel/endpoint24.png"),t.nodeData={},t.model.properties=t.model.componentProperties,angular.forEach(t.model.componentProperties,function(e,n){var i=e.value||e.defaultValue;angular.isDefined(i)&&null!==i&&(t.nodeData[n]=i),delete e.label});var i=[];t.model.component.label&&(i=t.model.component.label.split(",")),t.labels=i,t.viewTemplate="plugins/camel/html/nodePropertiesView.html",Core.$apply(t)}}var u=Logger.get("Camel");t.hideHelp=e.hideOptionDocumentation(i),t.hideUnused=e.hideOptionUnusedValue(i),t.hideDefault=e.hideOptionDefaultValue(i),t.viewTemplate=null,t.schema=null,t.model=null,t.labels=[],t.nodeData=null,t.icon=null,t.componentName=null,t.$watch("hideHelp",function(e,t){e!==t&&l()}),t.$watch("hideUnused",function(e,t){e!==t&&l()}),t.$watch("hideDefault",function(e,t){e!==t&&l()}),t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(l,50)}),t.$watch("workspace.selection",function(){n.moveIfViewInvalid()||l()}),t.showEntity=function(e){return t.hideDefault&&o(e)?!1:t.hideUnused&&!s(e)?!1:!0}}])}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.PropertiesEndpointController",["$scope","workspace","localStorage","jolokia","documentBase",function(t,n,i,r,a){function o(e){var n=Core.pathGet(t.model,["properties",e,"defaultValue"]);if(angular.isDefined(n)){var i=Core.pathGet(t.nodeData,e);if(angular.isDefined(i)){var r=i.toString();return 0===r.localeCompare(n)}}return!1}function s(e){var n=Core.pathGet(t.nodeData,e);return angular.isUndefined(n)||Core.isBlank(n)?!1:angular.isString(n)?!Core.isBlank(n):!0}function l(){var i=e.getSelectionCamelContextMBean(n),a=null;if(t.contextId&&t.endpointPath){var o=n.findMBeanWithProperties(e.jmxDomain,{context:t.contextId,type:"endpoints",name:t.endpointPath});o&&(a=o.objectName)}if(a||(a=n.getSelectedMBeanName()),a&&i){var s=r.request({type:"read",mbean:a,attribute:["EndpointUri"]}),l=s.value.EndpointUri;if(l){t.endpointUrl=l,u.info("Calling explainEndpointJson for url: "+l);var d={type:"exec",mbean:i,operation:"explainEndpointJson(java.lang.String,boolean)",arguments:[l,!0]};r.request(d,Core.onSuccess(c))}}}function c(e){u.debug("Populate data "+e);var n=e.value;if(n){t.model=JSON.parse(n),t.model.title=t.endpointUrl,t.model.description=t.model.component.description,t.icon=UrlHelpers.join(a,"/img/icons/camel/endpoint24.png"),t.nodeData={},angular.forEach(t.model.properties,function(e,n){var i=e.value||e.defaultValue;angular.isDefined(i)&&null!==i&&(t.nodeData[n]=i),delete e.label});var i=[];t.model.component.label&&(i=t.model.component.label.split(",")),t.labels=i,t.viewTemplate="plugins/camel/html/nodePropertiesView.html",Core.$apply(t)}}var u=Logger.get("Camel");t.hideHelp=e.hideOptionDocumentation(i),t.hideUnused=e.hideOptionUnusedValue(i),t.hideDefault=e.hideOptionDefaultValue(i),t.viewTemplate=null,t.schema=null,t.model=null,t.labels=[],t.nodeData=null,t.icon=null,t.endpointUrl=null,t.$watch("hideHelp",function(e,t){e!==t&&l()}),t.$watch("hideUnused",function(e,t){e!==t&&l()}),t.$watch("hideDefault",function(e,t){e!==t&&l()}),t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(l,50)}),t.$watch("workspace.selection",function(){n.moveIfViewInvalid()||l()}),t.showEntity=function(e){return t.hideDefault&&o(e)?!1:t.hideUnused&&!s(e)?!1:!0}}])}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.RestServiceController",["$scope","$location","workspace","jolokia",function(t,n,i,r){function a(e){var n=e.value;if(n){var i=[];for(var r in n){var a=n[r];for(var o in a){var s=a[o];i.push({url:s.url,baseUrl:s.baseUrl,basePath:s.basePath,uriTemplate:s.uriTemplate,method:s.method,consumes:s.consumes,produces:s.produces,inType:s.inType,outType:s.outType,state:s.state,routeId:s.routeId,description:s.description})}}i=i.sortBy("url"),t.data=i,t.selectedMBean=e.request.mbean}else t.selectedMBean="true";Core.$apply(t)}function o(){console.log("Loading RestRegistry data...");var t=e.getSelectionCamelRestRegistry(i);t&&r.request({type:"exec",mbean:t,operation:"listRestServices"},Core.onSuccess(a))}t.data=[],t.selectedMBean=null,t.mbeanAttributes={};var s=[{field:"url",displayName:"Absolute Url",cellFilter:null,width:"*",resizable:!0},{field:"baseUrl",displayName:"Base Url",cellFilter:null,width:"*",resizable:!0},{field:"basePath",displayName:"Base Path",cellFilter:null,width:"*",resizable:!0},{field:"uriTemplate",displayName:"Uri Template",cellFilter:null,width:"*",resizable:!0},{field:"method",displayName:"Method",cellFilter:null,width:"*",resizable:!0},{field:"consumes",displayName:"Consumes",cellFilter:null,width:"*",resizable:!0},{field:"produces",displayName:"Produces",cellFilter:null,width:"*",resizable:!0},{field:"inType",displayName:"Input Type",cellFilter:null,width:"*",resizable:!0},{field:"outType",displayName:"Output Type",cellFilter:null,width:"*",resizable:!0},{field:"state",displayName:"State",cellFilter:null,width:"*",resizable:!0},{field:"routeId",displayName:"Route Id",cellFilter:null,width:"*",resizable:!0},{field:"description",displayName:"Description",cellFilter:null,width:"*",resizable:!0}];t.gridOptions={data:"data",displayFooter:!0,displaySelectionCheckbox:!1,canSelectRows:!1,enableSorting:!0,columnDefs:s,selectedItems:[],filterOptions:{filterText:""}},t.renderIcon=function(t){return e.iconClass(t)},o()}])}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.RouteMetricsController",["$scope","$location","workspace","jolokia","metricsWatcher",function(t,n,i,r,a){function o(e){var n=e.value;if(n){var i=JSON.parse(n);if(!t.initDone){var r=i.timers,o=0;if(null!=r){for(var s in r){var c=s,u=c.lastIndexOf("."),d=c.substr(0,u),p=c.substr(u+1),h=c.indexOf(":"),f=c.substr(h+1);u=f.lastIndexOf("."),u>0&&(f=f.substr(0,u));var g=(r[s],"timer-"+o);t.metricDivs.push({id:g,routeId:f}),o++,l.info("Added timer: "+g+" ("+d+"."+p+") for route: "+f+" with max seconds: "+t.maxSeconds),a.addTimer(g,d,p,t.maxSeconds,f,"Histogram",1e3*t.maxSeconds)}l.info("Pre-init graphs"),Core.$apply(t)}l.info("Init graphs"),a.initGraphs()}t.initDone=!0,l.debug("Updating graphs: "+i),a.updateGraphs(i)}t.initDone=!0,Core.$apply(t)}function s(){l.info("Loading RouteMetrics data...");var n=e.getSelectedRouteId(i);null!=n&&(t.filterText=n);var a=e.getSelectionCamelRouteMetrics(i);if(a){var s={type:"exec",mbean:a,operation:"dumpStatisticsAsJson"};Core.scopeStoreJolokiaHandle(t,r,r.register(o,s))}else t.initDone=!0,Core.$apply(t)}var l=Logger.get("Camel");t.maxSeconds=e.routeMetricMaxSeconds(localStorage),t.filterText=null,t.initDone=!1,t.metricDivs=[],t.filterByRoute=function(e){l.debug("Filter by route "+e);var n=Core.matchFilterIgnoreCase(e.routeId,t.filterText);return n?"":"display: none;"},t.onResponse=function(e){s()},t.$watch("workspace.tree",function(){setTimeout(s,50)})}])}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.RouteController",["$scope","$routeParams","$element","$timeout","workspace","$location","jolokia","localStorage",function(t,n,i,r,a,o,s,l){function c(){var n=null;if(!t.ignoreRouteXmlNode&&(n=e.getSelectedRouteNode(a),n||(n=t.nodeXmlNode),n&&"route"!==n.localName)){var i=document.createElement("route");i.appendChild(n.cloneNode(!0)),n=i}if(t.mbean=e.getSelectionCamelContextMBean(a),!t.mbean&&t.contextId&&(t.mbean=e.getCamelContextMBean(a,t.contextId)),n){t.nodes={};var r=[],o=[];t.processorTree=e.camelProcessorMBeansById(a),e.addRouteXmlChildren(t,n,r,o,null,0,0),p(r,o)}else t.mbean?s.request({type:"exec",mbean:t.mbean,operation:"dumpRoutesAsXml()"},Core.onSuccess(y)):m.info("No camel context bean! Selection: "+a.selection)}function u(e){if(e){var t=e.getAttribute("class");return t&&t.endsWith(b)}return!1}function d(e,t){var n=!1;if(e){var i=e.getAttribute("class"),r=i&&i.endsWith(b);if(r)i=i.substring(0,i.length-b.length);else{if(!t)return n;i+=b,n=!0}e.setAttribute("class",i)}return n}function p(e,n){var r,a=i,l=h(),c=f(),p=a.children("svg")[0],m=o.path();r=m.startsWith("/camel/debugRoute")||m.startsWith("/camel/traceRoute")?null:w,t.graphData=Core.dagreLayoutGraph(e,n,l,c,p,!1,r);var v=a.find("g.node");return v.click(function(){var e=u(this);v.each(function(e,t){d(t,!1)});var n=null;e||(n=this.getAttribute("data-cid"),d(this,!0)),t.$emit("camel.diagram.selectedNodeId",n),Core.$apply(t)}),t.mbean&&Core.register(s,t,{type:"exec",mbean:t.mbean,operation:"dumpRoutesStatsAsXml",arguments:[!0,!0]},Core.onSuccess(g,{silent:!0,error:!1})),t.$emit("camel.diagram.layoutComplete"),l}function h(){var e=i;return e.width()}function f(){var t=i;return e.getCanvasHeight(t)}function g(e){function n(e,n){var i=n.getAttribute("id"),r=n.getAttribute("exchangesCompleted"),a=n.hasAttribute("exchangesInflight")?n.getAttribute("exchangesInflight"):0,o="";if(i&&r){var s=e?t.routeNodes:t.nodes,l=s[i];if(l||angular.forEach(s,function(e,t){l||i!==e.elementId||(l=e)}),l){var c=0+parseInt(r),u=n.getAttribute("exchangesFailed");u&&(c+=parseInt(u));var d=n.getAttribute("lastProcessingTime"),p=n.getAttribute("meanProcessingTime"),h=n.getAttribute("minProcessingTime"),f=n.getAttribute("maxProcessingTime");o="totoal: "+c+"\ninflight:"+a+"\nlast: "+d+" (ms)\nmean: "+p+" (ms)\nmin: "+h+" (ms)\nmax: "+f+" (ms)",l.counter=c,t.camelShowInflightCounter&&(l.inflight=a);var g=l.labelSummary;g&&(o=g+"\n\n"+o),l.tooltip=o}}}var i=e.value;if(i){var r=$.parseXML(i),a=$(r).find("routeStat");a.each(function(e,t){n(!0,t)});var a=$(r).find("processorStat");a.each(function(e,t){n(!1,t)}),Core.dagreUpdateGraphData(t.graphData)}}var m=Logger.get("Camel");t.routes=[],t.routeNodes={},null!=n&&(t.contextId=n.contextId,t.routeId=Core.trimQuotes(n.routeId),t.isJmxTab=!n.contextId||!n.routeId),t.camelIgnoreIdForLabel=e.ignoreIdForLabel(l),t.camelMaximumLabelWidth=e.maximumLabelWidth(l),t.camelShowInflightCounter=e.showInflightCounter(l);var v=_.debounce(c,300,{trailing:!0});t.$on("$routeChangeSuccess",function(e,t,n){v()}),t.$watch("workspace.selection",function(){t.isJmxTab&&a.moveIfViewInvalid()||v()}),t.$on("jmxTreeUpdated",function(){v()}),t.$watch("nodeXmlNode",function(){t.isJmxTab&&a.moveIfViewInvalid()||v()});var y=function(n){var i=n.value;t.routes=i,t.nodes={},t.routeNodes={};var r=[],o=[],s=t.routeId;if(s||(s=e.getSelectedRouteId(a)),i){var l=$.parseXML(i);t.processorTree=e.camelProcessorMBeansById(a),e.loadRouteXmlNodes(t,l,s,r,o,h()),p(r,o)}else console.log("No data from route XML!");Core.$apply(t)},b=" selected",w=function(e){m.debug("Clicked on Camel Route Diagram node: "+e.cid),o.path("/camel/properties").search({"main-tab":"camel","sub-tab":"camel-route-properties",nid:e.cid})}}])}(Camel||(Camel={}));var Camel;!function(e){var t="2";e._module.controller("Camel.SendMessageController",["$route","$scope","$element","$timeout","workspace","jolokia","localStorage","$location","activeMQMessage","PreferencesLastPath",function(n,i,r,a,o,s,l,c,u,d){function p(n,r){var a=o.selection;if(a){var c=a.objectName;if(c){var u=null;i.headers.length&&(u={},angular.forEach(i.headers,function(e){var t=e.name;t&&(u[t]=e.value)}),g.info("About to send headers: "+JSON.stringify(u)));var d=Core.onSuccess(r);if("org.apache.camel"===a.domain){var p=e.getContextAndTargetEndpoint(o),h=p.uri;if(c=p.mbean,c&&h){var f=!0;if(e.isCamelVersionEQGT(2,14,o,s)){var m=s.execute(c,"canSendToEndpoint(java.lang.String)",h);m||(Core.notification("warning","Camel does not support sending to this endpoint."),f=!1)}f&&(u?s.execute(c,"sendBodyAndHeaders(java.lang.String, java.lang.Object, java.util.Map)",h,n,u,d):s.execute(c,"sendStringBody(java.lang.String, java.lang.String)",h,n,d))}else c?Core.notification("error","Failed to determine endpoint name!"):Core.notification("error","Could not find CamelContext MBean!"),g.debug("Parsed context and endpoint: ",p)}else{var v=l.activemqUserName,y=l.activemqPassword;u||(u={}),u.JMSDeliveryMode||(u.JMSDeliveryMode=t),s.execute(c,"sendTextMessage(java.util.Map, java.lang.String, java.lang.String, java.lang.String)",u,n,v,y,d)}}}}function h(){return!0}function f(){return!0}var g=Logger.get("Camel");if(i.noCredentials=!1,i.container={},i.message="\n\n\n\n",i.headers=[],Core.bindModelToSearchParam(i,c,"tab","subtab","compose"),Core.bindModelToSearchParam(i,c,"searchText","q",""),Core.reloadWhenParametersChange(n,i,c),i.checkCredentials=function(){i.noCredentials=Core.isBlank(l.activemqUserName)||Core.isBlank(l.activemqPassword)},c.path().has("activemq")){if(i.localStorage=l,i.$watch("localStorage.activemqUserName",i.checkCredentials),i.$watch("localStorage.activemqPassword",i.checkCredentials),null!==u.message&&(i.message=u.message.bodyText,null!==u.message.PropertiesText))for(var m in u.message.StringProperties)i.headers.push({name:m,value:u.message.StringProperties[m]});u.message=null}i.openPrefs=function(){d.lastPath=c.path(),d.lastSearch=c.search(),c.path("/preferences").search({pref:"ActiveMQ"})};var v="defaultLanguageFormat",y=o.getLocalStorage(v)||"javascript";i.codeMirror=void 0;var b={mode:{name:y},onChange:function(e){i.codeMirror||(i.codeMirror=e)}};i.codeMirrorOptions=CodeEditor.createEditorSettings(b),i.addHeader=function(){i.headers.push({name:"",value:""}),r&&a(function(){var e=r.find("input.headerName").last();e.focus()},100)},i.removeHeader=function(e){i.headers=i.headers.remove(e)},i.defaultHeaderNames=function(){function t(e){angular.forEach(e.definitions.headers.properties,function(e,t){n.push(t)})}var n=[];return f()&&t(e.jmsHeaderSchema),h()&&t(e.camelHeaderSchema),n},i.$watch("workspace.selection",function(){o.moveIfViewInvalid()}),i.$watch("codeMirrorOptions.mode.name",function(e,t){o.setLocalStorage(v,e)});var w=function(){i.message="",Core.notification("success","Message sent!")};i.autoFormat=function(){setTimeout(function(){CodeEditor.autoFormatEditor(i.codeMirror)},50)},i.sendMessage=function(){var e=i.message;p(e,w)}}])}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.SourceController",["$scope","workspace",function(t,n){function i(e){function t(e,t){var n=t.getAttribute("customId");"route"===t.nodeName&&(n="true"),n&&"true"===n||t.removeAttribute("id"),t.removeAttribute("customId"),t.removeAttribute("_cid"),t.removeAttribute("group")}var n=$(e).clone();n.each(t),n.find("*").each(t);var i=n&&n.length?n[0]:e;return Core.xmlNodeToString(i)}function r(){var r=e.getSelectedRouteNode(n);if(r)t.source=i(r),Core.$apply(t);else{if(t.mbean=e.getSelectionCamelContextMBean(n),!t.mbean){var o=Core.pathGet(n,["selection","parent"]);o&&"context"===o.title&&(t.mbean=o.children[0].objectName)}if(t.mbean){var s=n.jolokia;s.request({type:"exec",mbean:t.mbean,operation:"dumpRoutesAsXml()"},Core.onSuccess(a))}}}t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(r,50)}),t.$watch("workspace.selection",function(){n.moveIfViewInvalid()||r()}),t.mode="xml";var a=function(r){var a=r.value,o=e.getSelectedRouteId(n);if(a&&o){var s=$.parseXML(a),l=$(s).find('route[id="'+o+'"]');if(l&&l.length){var c=l[0],u=i(c);u&&(a=u)}}t.source=a,Core.$apply(t)},o=function(){Core.notification("success","Route updated!"),e.clearSelectedRouteNode(n),r()};t.saveRouteXml=function(){var i=t.source;if(i){var r=decodeURIComponent(i);e.log.debug("addOrUpdateRoutesFromXml xml decoded: "+r);var a=n.jolokia,s=e.getSelectionCamelContextMBean(n);s?a.execute(s,"addOrUpdateRoutesFromXml(java.lang.String)",r,Core.onSuccess(o)):Core.notification("error","Could not find CamelContext MBean!")}}}])}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.TraceRouteController",["$scope","workspace","jolokia","localStorage","tracerStatus",function(t,n,i,r,a){function o(){t.tracing=!1,null!=a.jhandle&&(d.debug("Unregistering jolokia handle"),i.unregister(a.jhandle),a.jhandle=null);var r=e.getSelectionCamelTraceMBean(n);if(r)if(t.tracing=i.getAttribute(r,"Enabled",Core.onSuccess(null)),t.tracing){var o=r;o&&null===a.jhandle&&(d.debug("Registering jolokia handle"),a.jhandle=i.register(s,{type:"exec",mbean:o,operation:"dumpAllTracedMessagesAsXml()",ignoreErrors:!0,arguments:[]})),t.graphView="plugins/camel/html/routes.html"}else a.messages=[],t.messages=[],t.graphView=null,t.showMessageDetails=!1}function s(i){d.debug("Populating response "+i);var r=e.getSelectedRouteId(n),o=i.value;if(angular.isString(o)){var s=$.parseXML(o),l=$(s).find("fabricTracerEventMessage");l&&l.length||(l=$(s).find("backlogTracerEventMessage")),l.each(function(n,i){var a=$(i).find("routeId").text();if(a===r){var o=e.createMessageFromXml(i),s=$(i).find("toNode").text();s&&(o.toNode=s),o.openMessageDialog=t.openMessageDialog,d.debug("Adding new message to trace table with id "+o.id),
t.messages.push(o)}}),a.messages=t.messages,Core.$apply(t)}}function l(){angular.forEach(t.gridOptions.selectedItems,function(t){if(t){var n=t.toNode;if(n){var i=d3.select("svg").selectAll("g .node");e.highlightSelectedNode(i,n)}}})}function c(e){o(),Core.$apply(t)}function u(t){var a=e.getSelectionCamelTraceMBean(n);if(a){if(a.toString().endsWith("BacklogTracer")){var o=e.maximumTraceOrDebugBodyLength(r),s=e.traceOrDebugIncludeStreams(r);i.setAttribute(a,"BodyMaxChars",o),i.setAttribute(a,"BodyIncludeStreams",s),i.setAttribute(a,"BodyIncludeFiles",s)}i.setAttribute(a,"Enabled",t,Core.onSuccess(c))}}var d=Logger.get("CamelTracer");t.tracing=!1,t.messages=[],t.graphView=null,t.mode="text",t.showMessageDetails=!1,t.gridOptions=e.createBrowseGridOptions(),t.gridOptions.selectWithCheckboxOnly=!1,t.gridOptions.showSelectionCheckbox=!1,t.gridOptions.multiSelect=!1,t.gridOptions.afterSelectionChange=l,t.gridOptions.columnDefs.push({field:"toNode",displayName:"To Node"}),t.startTracing=function(){d.info("Start tracing"),u(!0)},t.stopTracing=function(){d.info("Stop tracing"),u(!1)},t.clear=function(){d.debug("Clear messages"),a.messages=[],t.messages=[],Core.$apply(t)},t.$watch("workspace.selection",function(){n.moveIfViewInvalid()||(t.messages=a.messages,o())}),t.openMessageDialog=function(e){if(ActiveMQ.selectCurrentMessage(e,"id",t),t.row){var n=t.row.body;t.mode=angular.isString(n)?CodeEditor.detectTextFormat(n):"text","javascript"==t.mode&&(t.mode="text"),t.showMessageDetails=!0}else t.showMessageDetails=!1;Core.$apply(t)},ActiveMQ.decorate(t,l),d.info("Re-activating tracer with "+a.messages.length+" existing messages"),t.messages=a.messages,t.tracing=null!=a.jhandle}])}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.TreeHeaderController",["$scope","$location",function(e,t){e.contextFilterText="",e.$watch("contextFilterText",function(t,n){t!==n&&e.$emit("camel-contextFilterText",t)}),e.expandAll=function(){Tree.expandAll("#cameltree")},e.contractAll=function(){Tree.contractAll("#cameltree")}}]),e._module.controller("Camel.TreeController",["$scope","$location","$timeout","workspace","$rootScope",function(t,n,i,r,a){function o(a){void 0===a&&(a=null),t.fullScreenViewLink=e.linkToFullScreenView(r);var o=(e.jmxDomain,r.tree);if(o){var l=o.findDescendant(function(e){return"camelContexts"===e.id});l&&i(function(){var e=$("#cameltree");Jmx.enableTree(t,n,r,e,[l],!0),s(),angular.isFunction(a)&&a()},10)}}function s(){Jmx.updateTreeSelectionFromURLAndAutoSelect(n,$("#cameltree"),function(e){var t=e.getChildren();if(t&&1===t.length){e=t[0],e.expand(!0);var n=e.getChildren();if(n&&n.length){var i=n[0];if("routes"===i.data.typeName)return e=i}}return null},!0),t.fullScreenViewLink=e.linkToFullScreenView(r)}t.contextFilterText=n.search().cq,t.fullScreenViewLink=e.linkToFullScreenView(r),t.$on("$routeChangeSuccess",function(e,t,n){i(s,50,!1)}),t.$watch("workspace.tree",function(){o()}),t.$on("jmxTreeUpdated",function(){o()})}])}(Camel||(Camel={}));var Camel;!function(e){e._module.controller("Camel.TypeConverterController",["$scope","$location","workspace","jolokia",function(t,n,i,r){function a(e){var n=e.value;n&&(t.mbeanAttributes=n,Core.$apply(t))}function o(e){var n=e.value;if(n){var i=[];for(var r in n){var a=n[r];for(var o in a)i.push({from:r,to:o})}i=i.sortBy("from"),t.data=i,t.selectedMBean=e.request.mbean,Core.$apply(t)}}function s(){console.log("Loading TypeConverter data...");var n=e.getSelectionCamelTypeConverter(i);if(n){var s={type:"read",mbean:n,attribute:["AttemptCounter","FailedCounter","HitCounter","MissCounter","NumberOfTypeConverters","StatisticsEnabled"]};r.request(s,Core.onSuccess(a)),Core.scopeStoreJolokiaHandle(t,r,r.register(a,s)),r.request({type:"exec",mbean:n,operation:"listTypeConverters"},Core.onSuccess(o))}}t.data=[],t.selectedMBean=null,t.mbeanAttributes={};var l=[{field:"from",displayName:"From",cellFilter:null,width:"*",resizable:!0},{field:"to",displayName:"To",cellFilter:null,width:"*",resizable:!0}];t.gridOptions={data:"data",displayFooter:!0,displaySelectionCheckbox:!1,canSelectRows:!1,enableSorting:!0,columnDefs:l,selectedItems:[],filterOptions:{filterText:""}},t.renderIcon=function(t){return e.iconClass(t)},t.disableStatistics=function(){t.selectedMBean&&r.setAttribute(t.selectedMBean,"StatisticsEnabled",!1)},t.enableStatistics=function(){t.selectedMBean&&r.setAttribute(t.selectedMBean,"StatisticsEnabled",!0)},t.resetStatistics=function(){t.selectedMBean&&r.request({type:"exec",mbean:t.selectedMBean,operation:"resetTypeConversionCounters"},Core.onSuccess(null,{silent:!0}))},s()}])}(Camel||(Camel={}));var Karaf;!function(e){function t(e,t){if(!angular.isDefined(e))return t[0];var n=t.findIndex(function(t){return t.id===e.id});return-1!==n?t[n]:t[0]}function n(t,n,i,r,a){e.log.info("installing URI: ",i),n.request({type:"exec",mbean:C(t),operation:"addRepository(java.lang.String)",arguments:[i]},Core.onSuccess(r,{error:a}))}function i(t,n,i,r,a){e.log.info("uninstalling URI: ",i),n.request({type:"exec",mbean:C(t),operation:"removeRepository(java.lang.String)",arguments:[i]},Core.onSuccess(r,{error:a}))}function r(e,t,n,i,r,a){t.request({type:"exec",mbean:C(e),operation:"installFeature(java.lang.String, java.lang.String)",arguments:[n,i]},Core.onSuccess(r,{error:a}))}function a(e,t,n,i,r,a){t.request({type:"exec",mbean:C(e),operation:"uninstallFeature(java.lang.String, java.lang.String)",arguments:[n,i]},Core.onSuccess(r,{error:a}))}function o(e){var t=e;return angular.isArray(e)||(t=[e]),t}function s(e,t,n){return"<a href='"+Core.url("#/karaf/feature/"+t+"/"+n+e.hash())+"'>"+n+"</a>"}function l(e,t,n){var i=[],r=[];return h(e,i,r),i.find(function(e){return e.Name==t&&e.Version==n})}function c(e){return $.test(e)}function u(e){return M.test(e)}function d(e){return E.test(e)}function p(e){return I.test(e)}function h(e,t,n){var i=e.Features;angular.forEach(e.Repositories,function(e){n.push({id:e.Name,uri:e.Uri}),i&&angular.forEach(e.Features,function(n){angular.forEach(n,function(n){if(void 0!==i[n.Name]){var r=_.cloneDeep(i[n.Name][n.Version]);r.Id=n.Name+"/"+n.Version,r.RepositoryName=e.Name,r.RepositoryURI=e.Uri,t.push(r)}})})})}function f(e,t,n){var i=[];return angular.forEach(n,function(n){i.push({Name:n,State:g(b(e,t,n))})}),i}function g(e){switch(e){case 2:return"Enabled";case 4:return"Unsatisfied";case 8:return"Activating";case 16:return"Active";case 32:return"Registered";case 64:return"Factory";case 128:return"Deactivating";case 256:return"Destroying";case 1024:return"Disabling";case 2048:return"Disposing"}return"Unknown"}function m(e,t){var n=S(e),i=t.request({type:"read",mbean:n,arguments:[]});return"Components"in i.value?i.value.Components.values:(i=t.request({type:"exec",mbean:n,operation:"listComponents()"}),f(e,t,i.value))}function v(e,t,n){var i=m(e,t);return i.find(function(e){return e.Name==n})}function y(e,t,n){var i=t.request({type:"exec",mbean:S(e),operation:"isComponentActive(java.lang.String)",arguments:[n]});return i.value}function b(e,t,n){var i=t.request({type:"exec",mbean:S(e),operation:"componentState(java.lang.String)",arguments:[n]});return i.value}function w(e,t,n,i,r){t.request({type:"exec",mbean:S(e),operation:"activateComponent(java.lang.String)",arguments:[n]},Core.onSuccess(i,{error:r}))}function x(e,t,n,i,r){t.request({type:"exec",mbean:S(e),operation:"deactiveateComponent(java.lang.String)",arguments:[n]},Core.onSuccess(i,{error:r}))}function k(e,t,n){angular.forEach(t,function(t){angular.forEach(t,function(t){var i=l(e,t.Name,t.Version);i.id=t.Name+"/"+t.Version,n.push(i)})})}function C(e){if(e){var t=e.mbeanTypesToDomain.features||{},n=t["org.apache.karaf"]||{},i=n.objectName;if(i)return i;var r=e.tree.navigate("org.apache.karaf","features");if(!r&&(r=e.tree.navigate("org.apache.karaf"))){var a=r.children;r=null,angular.forEach(a,function(e){r||(r=e.navigate("features"))})}if(r){var a=r.children;if(a){var o=a[0];if(o)return o.objectName}return r.objectName}}return null}function S(e){if(e){var t=e.mbeanTypesToDomain.scr||{},n=t["org.apache.karaf"]||{},i=n.objectName;if(i)return i;var r=e.tree.navigate("org.apache.karaf","scr");if(!r&&(r=e.tree.navigate("org.apache.karaf"))){var a=r.children;r=null,angular.forEach(a,function(e){r||(r=e.navigate("scr"))})}if(r){var a=r.children;if(a){var o=a[0];if(o)return o.objectName}return r.objectName}}return null}e.log=Logger.get("Karaf"),e.setSelect=t,e.installRepository=n,e.uninstallRepository=i,e.installFeature=r,e.uninstallFeature=a,e.toCollection=o,e.featureLinks=s,e.extractFeature=l;var T=["^org.apache.aries","^org.apache.karaf","^activemq-karaf","^org.apache.commons","^org.apache.felix","^io.fabric8","^io.fabric8.fab","^io.fabric8.insight","^io.fabric8.mq","^io.fabric8.patch","^io.fabric8.runtime","^io.fabric8.security","^org.apache.geronimo.specs","^org.apache.servicemix.bundles","^org.objectweb.asm","^io.hawt","^javax.mail","^javax","^org.jvnet","^org.mvel2","^org.apache.mina.core","^org.apache.sshd.core","^org.apache.neethi","^org.apache.servicemix.specs","^org.apache.xbean","^org.apache.santuario.xmlsec","^biz.aQute.bndlib","^groovy-all","^com.google.guava","jackson-\\w+-asl","^com.fasterxml.jackson","^org.ops4j","^org.springframework","^bcprov$","^jline$","scala-library$","^org.scala-lang","^stax2-api$","^woodstox-core-asl","^org.jboss.amq.mq-fabric","^gravia-","^joda-time$","^org.apache.ws","-commands$","patch.patch","org.fusesource.insight","activeio-core","activemq-osgi","^org.eclipse.jetty","org.codehaus.jettison.jettison","org.jledit.core","org.fusesource.jansi","org.eclipse.equinox.region"],$=new RegExp(T.join("|")),A=["^org.apache.camel","camel-karaf-commands$","activemq-camel$"],E=new RegExp(A.join("|")),P=["^org.apache.cxf"],I=new RegExp(P.join("|")),D=["^org.apache.activemq","activemq-camel$"],M=new RegExp(D.join("|"));e.isPlatformBundle=c,e.isActiveMQBundle=u,e.isCamelBundle=d,e.isCxfBundle=p,e.populateFeaturesAndRepos=h,e.createScrComponentsView=f,e.getComponentStateDescription=g,e.getAllComponents=m,e.getComponentByName=v,e.isComponentActive=y,e.getComponentState=b,e.activateComponent=w,e.deactivateComponent=x,e.populateDependencies=k,e.getSelectionFeaturesMBean=C,e.getSelectionScrMBean=S}(Karaf||(Karaf={}));var Karaf;!function(e){var t="karaf";e._module=angular.module(t,["ngResource","hawtio-core"]),e._module.config(["$routeProvider",function(e){e.when("/osgi/server",{templateUrl:"plugins/karaf/html/server.html"}).when("/osgi/features",{templateUrl:"plugins/karaf/html/features.html",reloadOnSearch:!1}).when("/osgi/scr-components",{templateUrl:"plugins/karaf/html/scr-components.html"}).when("/osgi/scr-component/:name",{templateUrl:"plugins/karaf/html/scr-component.html"}).when("/osgi/feature/:name/:version",{templateUrl:"plugins/karaf/html/feature.html"})}]),e._module.run(["workspace","viewRegistry","helpRegistry",function(e,t,n){n.addUserDoc("karaf","plugins/karaf/doc/help.md",function(){return e.treeContainsDomainAndProperties("org.apache.karaf")})}]),hawtioPluginLoader.addModule(t)}(Karaf||(Karaf={}));var Karaf;!function(e){e._module.controller("Karaf.FeatureController",["$scope","jolokia","workspace","$routeParams",function(t,n,i,r){function a(n){if(t.row=e.extractFeature(n.value,t.name,t.version),t.row){l(t.row);var i=[];angular.forEach(t.row.Dependencies,function(e,t){angular.forEach(e,function(e,n){i.push({Name:t,Version:n})})}),t.row.Dependencies=i}Core.$apply(t)}function o(e){Osgi.defaultBundleValues(i,t,e.values),angular.forEach(e.value,function(e){var n=e.Location;t.bundlesByLocation[n]=e})}function s(){var t=e.getSelectionFeaturesMBean(i),n=Osgi.getSelectionBundleMBean(i),r=i.jolokia;n&&o(r.request({type:"exec",mbean:n,operation:"listBundles()"})),t&&r.request({type:"read",mbean:t},Core.onSuccess(a))}function l(e){var n=[];angular.forEach(e.Bundles,function(e){var i=t.bundlesByLocation[e];i?(i.Installed=!0,n.push(i)):n.push({Location:e,Installed:!1})}),e.BundleDetails=n}t.name=r.name,t.version=r.version,t.bundlesByLocation={},t.props="properties",s(),t.install=function(){e.installFeature(i,n,t.name,t.version,function(){Core.notification("success","Installed feature "+t.name)},function(e){Core.notification("error","Failed to install feature "+t.name+" due to "+e.error)})},t.uninstall=function(){e.uninstallFeature(i,n,t.name,t.version,function(){Core.notification("success","Uninstalled feature "+t.name)},function(e){Core.notification("error","Failed to uninstall feature "+t.name+" due to "+e.error)})},t.toProperties=function(e){var t="";return angular.forEach(e,function(e,n){t+=e.Key+" = "+e.Value+"\n"}),t.trim()}}])}(Karaf||(Karaf={}));var Karaf;!function(e){e._module.controller("Karaf.FeaturesController",["$scope","$location","workspace","jolokia",function(t,n,i,r){function a(n){var i=angular.toJson(n.value);if(t.responseJson!==i){t.responseJson=i,t.featuresError=null===n.value.Features?!0:!1,t.features=[],t.repositories=[];var r=[],a=[];e.populateFeaturesAndRepos(n.value,r,a);var o=r.filter(function(e){return Core.parseBooleanValue(e.Installed)}),s=r.filter(function(e){return!Core.parseBooleanValue(e.Installed)});if(t.installedFeatures=o.sortBy(function(e){return e.Name}),s=s.sortBy(function(e){return e.Name}),a.sortBy("id").forEach(function(e){t.repositories.push({repository:e.id,uri:e.uri,features:s.filter(function(t){return t.RepositoryName===e.id})})}),!Core.isBlank(t.newRepositoryURI)){var l=a.find(function(e){return e.uri===t.newRepositoryURI});l&&(t.selectedRepositoryId=l.id),t.newRepositoryURI=""}t.selectedRepository=Core.isBlank(t.selectedRepositoryId)?t.repositories.first():t.repositories.find(function(e){return e.repository===t.selectedRepositoryId}),Core.$apply(t)}}t.responseJson="",t.filter="",t.installedFeatures=[],t.features=[],t.repositories=[],t.selectedRepositoryId="",t.selectedRepository={},t.newRepositoryURI="",t.init=function(){var e=n.search().repositoryId;e&&(t.selectedRepositoryId=e);var i=n.search().filter;i&&(t.filter=i)},t.init(),t.$watch("selectedRepository",function(e,i){e!==i&&(t.selectedRepositoryId=e?e.repository:"",n.search("repositoryId",t.selectedRepositoryId))},!0),t.$watch("filter",function(e,t){e!==t&&n.search("filter",e)});var o=e.getSelectionFeaturesMBean(i);e.log.debug("Features mbean: ",o),o&&Core.register(r,t,{type:"read",mbean:o},Core.onSuccess(a)),t.inSelectedRepository=function(e){return t.selectedRepository&&"repository"in t.selectedRepository&&e&&"RepositoryName"in e&&e.RepositoryName===t.selectedRepository.repository?"in-selected-repository":""},t.isValidRepository=function(){return Core.isBlank(t.newRepositoryURI)},t.installRepository=function(){var n=t.newRepositoryURI;Core.notification("info","Adding feature repository URL"),e.installRepository(i,r,n,function(){Core.notification("success","Added feature repository URL"),t.selectedRepository={},t.selectedRepositoryId="",t.responseJson=null,t.triggerRefresh()},function(i){e.log.error("Failed to add feature repository URL ",n," due to ",i.error),e.log.info("stack trace: ",i.stacktrace),Core.$apply(t)})},t.uninstallRepository=function(){var n=t.selectedRepository.uri;Core.notification("info","Removing feature repository "+n),e.uninstallRepository(i,r,n,function(){Core.notification("success","Removed feature repository "+n),t.responseJson=null,t.selectedRepositoryId="",t.selectedRepository={},t.triggerRefresh()},function(i){e.log.error("Failed to remove feature repository ",n," due to ",i.error),e.log.info("stack trace: ",i.stacktrace),Core.$apply(t)})},t.triggerRefresh=function(){r.request({type:"read",method:"POST",mbean:o},Core.onSuccess(a))},t.install=function(n){Core.notification("info","Installing feature "+n.Name),e.installFeature(i,r,n.Name,n.Version,function(){Core.notification("success","Installed feature "+n.Name),t.installedFeatures.add(n),t.responseJson=null,t.triggerRefresh()},function(i){e.log.error("Failed to install feature ",n.Name," due to ",i.error),e.log.info("stack trace: ",i.stacktrace),Core.$apply(t)})},t.uninstall=function(n){Core.notification("info","Uninstalling feature "+n.Name),e.uninstallFeature(i,r,n.Name,n.Version,function(){Core.notification("success","Uninstalled feature "+n.Name),t.installedFeatures.remove(n),t.responseJson=null,t.triggerRefresh()},function(i){e.log.error("Failed to uninstall feature ",n.Name," due to ",i.error),e.log.info("stack trace: ",i.stacktrace),Core.$apply(t)})},t.filteredRows=["Bundles","Configurations","Configuration Files","Dependencies"],t.showRow=function(e,n){return t.filteredRows.any(e)?!1:angular.isArray(n)&&0===n.length?!1:angular.isString(n)&&Core.isBlank(n)?!1:!angular.isObject(n)||n&&!angular.equals(n,{})?!0:!1},t.installed=function(e){var t=Core.parseBooleanValue(e);return t},t.showValue=function(e){if(angular.isArray(e)){var t=['<ul class="zebra-list">'];return e.forEach(function(e){t.push("<li>"+e+"</li>")}),t.push("</ul>"),t.join("\n")}if(angular.isObject(e)){var t=['<table class="table">',"<tbody>"];return angular.forEach(e,function(e,n){t.push("<tr>"),t.push("<td>"+n+"</td>"),t.push("<td>"+e+"</td>"),t.push("</tr>")}),t.push("</tbody>"),t.push("</table>"),t.join("\n")}return""+e},t.getStateStyle=function(e){return Core.parseBooleanValue(e.Installed)?"badge badge-success":"badge"},t.filterFeature=function(e){return Core.isBlank(t.filter)?!0:e.Id.has(t.filter)?!0:!1}}])}(Karaf||(Karaf={}));var Karaf;!function(e){e._module.controller("Karaf.NavBarController",["$scope","workspace",function(t,n){t.hash=n.hash(),t.isKarafEnabled=n.treeContainsDomainAndProperties("org.apache.karaf"),t.isFeaturesEnabled=e.getSelectionFeaturesMBean(n),t.isScrEnabled=e.getSelectionScrMBean(n),t.$on("$routeChangeSuccess",function(){t.hash=n.hash()}),t.isActive=function(e){return n.isLinkActive(e)},t.isPrefixActive=function(e){return n.isLinkPrefixActive(e)}}])}(Karaf||(Karaf={}));var Karaf;!function(e){e._module.controller("Karaf.ScrComponentController",["$scope","$location","workspace","jolokia","$routeParams",function(t,n,i,r,a){function o(){t.row=e.getComponentByName(i,r,t.name),Core.$apply(t)}t.name=a.name,o(),t.activate=function(){e.activateComponent(i,r,t.row.Name,function(){console.log("Activated!")},function(){console.log("Failed to activate!")})},t.deactivate=function(){e.deactivateComponent(i,r,t.row.Name,function(){console.log("Deactivated!")},function(){console.log("Failed to deactivate!")})}}])}(Karaf||(Karaf={}));var Karaf;!function(e){e._module.controller("Karaf.ScrComponentsController",["$scope","$location","workspace","jolokia",function(t,n,i,r){function a(){return[{Name:"",Status:!1}]}function o(e){angular.equals(t.result,e)||(t.components=e,t.result=t.components,Core.$apply(t))}t.component=a(),t.result=[],t.components=[],t.selectedComponents=[],t.scrOptions={data:"components",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!1},sortInfo:{fields:["Name"],directions:["asc"]},selectedItems:t.selectedComponents,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"Name",displayName:"Name",cellTemplate:'<div class="ngCellText"><a href="#/osgi/scr-component/{{row.entity.Name}}?p=container">{{row.getProperty(col.field)}}</a></div>',width:400},{field:"State",displayName:"State",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200}]};var s=e.getSelectionScrMBean(i);s&&o(e.getAllComponents(i,r)),t.activate=function(){t.selectedComponents.forEach(function(t){e.activateComponent(i,r,t.Name,function(){console.log("Activated!")},function(){console.log("Failed to activate!")})})},t.deactivate=function(){t.selectedComponents.forEach(function(t){e.deactivateComponent(i,r,t.Name,function(){console.log("Deactivated!")},function(){console.log("Failed to deactivate!")})})}}])}(Karaf||(Karaf={}));var Karaf;!function(e){e._module.controller("Karaf.ServerController",["$scope","$location","workspace","jolokia",function(e,t,n,i){function r(){setTimeout(a,50)}function a(){console.log("Loading Karaf data..."),i.search("org.apache.karaf:type=admin,*",Core.onSuccess(o))}function o(e){if(angular.isArray(e)){var t=e[0];t&&i.getAttribute(t,"Instances",Core.onSuccess(function(e){s(e,t)}))}}function s(t,n){if(t){var r=Core.parseMBean(n),a="root";"attributes"in r&&"name"in r.attributes&&(a=r.attributes.name);var o=t[a];e.data.name=o.Name,e.data.state=o.State,e.data.root=o["Is Root"],e.data.location=o.Location,e.data.sshPort=o["SSH Port"],e.data.rmiRegistryPort=o["RMI Registry Port"],e.data.rmiServerPort=o["RMI Server Port"],e.data.pid=o.Pid,e.data.version="?",e.data.startLevel="?",e.data.framework="?",e.data.frameworkVersion="?";var s="org.apache.karaf:type=system,name="+o.Name,l=i.request({type:"read",mbean:s,attribute:["StartLevel","Framework","Version"]},Core.onSuccess(null)),c=l.value;c&&(e.data.version=c.Version,e.data.startLevel=c.StartLevel,e.data.framework=c.Framework);var u=i.search("osgi.core:type=bundleState,*",Core.onSuccess(null));if(angular.isArray(u)){var n=u[0];if(n){var d=i.request({type:"exec",mbean:n,operation:"getVersion(long)",arguments:[0]},Core.onSuccess(null)),p=d.value;p&&(e.data.frameworkVersion=p)}}}Core.$apply(e)}e.data={name:"",version:"",state:"",root:"",startLevel:"",framework:"",frameworkVersion:"",location:"",sshPort:"",rmiRegistryPort:"",rmiServerPort:"",pid:""},e.$on("jmxTreeUpdated",r),e.$watch("workspace.tree",r)}])}(Karaf||(Karaf={}));var Osgi;!function(e){function t(e,t,i){var r=i;return angular.forEach(i,function(t){t.ImportData=o(t.ImportedPackages),t.ExportData=o(t.ExportedPackages),t.IdentifierLink=d(e,t.Identifier),t.Hosts=u(e,t.Hosts,r),t.Fragments=u(e,t.Fragments,r),t.ImportedPackages=t.ImportedPackages.union([]),t.StateStyle=n("label",t.State),t.RequiringBundles=u(e,t.RequiringBundles,r)}),i}function n(e,t){switch(t){case"INSTALLED":return e+"-important";case"RESOLVED":return e+"-inverse";case"STARTING":return e+"-warning";case"ACTIVE":return e+"-success";case"STOPPING":return e+"-info";case"UNINSTALLED":return"";default:return e+"-important"}}function i(e,t,n){return angular.forEach(n,function(t){t.BundleIdentifier=d(e,t.BundleIdentifier)}),n}function r(e,t,n){function i(t,n){n||(n=t);var i=t.Name,a=t.Version;if(i&&!i.startsWith("#")){t.VersionLink="<a href='"+Core.url("#/osgi/package/"+i+"/"+a+e.hash())+"'>"+a+"</a>";var o=n.ImportingBundles||t.ImportingBundles,s=n.ExportingBundles||t.ExportingBundles;t.ImportingBundleLinks=d(e,o),t.ImportingBundleLinks=d(e,o),t.ExportingBundleLinks=d(e,s),r.push(t)}}var r=[],a=n.values;return a&&angular.forEach(a,i),angular.forEach(n,function(e){angular.forEach(e,function(t){angular.forEach(t,function(t){i(t,e)})})}),r}function a(e,t,n){var i=[];return angular.forEach(n,function(t){var n={};n.Pid=t[0],n.PidLink="<a href='"+Core.url("#/osgi/pid/"+t[0]+e.hash())+"'>"+t[0]+"</a>",n.Bundle=t[1],i.push(n)}),i}function o(e){for(var t={},n=0;n<e.length;n++){var i=e[n],r=i.indexOf(";");if(r>0){var a=i.substring(0,r),o=i.substring(r+1),s=t[a];void 0===s&&(s={},t[a]=s),s.ReportedVersion=o}}return t}function s(e,t){var n={},i={},r=e[t];if(void 0===r)return n;for(var a=r.Value,o=!0,s=!1,c="",u="",d=0;d<a.length;d++){var p=a[d];'"'!==p?s?u+=p:";"!==p?","!==p?o?c+=p:u+=p:(l(i,u),n[c]=i,i={},c="",u="",o=!0):o?o=!1:(l(i,u),u=""):s=!s}return l(i,u),n[c]=i,n}function l(e,t){var n=t.indexOf(":=");if(n>0)return void(e["D"+t.substring(0,n)]=t.substring(n+2));var i=t.indexOf("=");return i>0?void(e["A"+t.substring(0,i)]=t.substring(i+1)):void 0}function c(e){var t=e;return angular.isArray(e)||(t=[e]),t}function u(e,t,n){var i="",r=c(t).sort(function(e,t){return e-t});return angular.forEach(r,function(t,r){var a="";i.length>0&&(a=" ");var o=n[t]||{},s=o.SymbolicName;i+=a+"<a class='label' href='"+Core.url("#/osgi/bundle/"+t+e.hash())+"'>"+s+"</a>"}),i}function d(e,t){var n="",i=c(t).sort(function(e,t){return e-t});return angular.forEach(i,function(t,i){var r="";n.length>0&&(r=" "),n+=r+"<a class='label' href='"+Core.url("#/osgi/bundle/"+t+e.hash())+"'>"+t+"</a>"}),n}function p(e,t){var n="";return angular.forEach(c(t),function(t,i){var r="";n.length>0&&(r=" "),n+=r+"<a href='"+Core.url("#/osgi/bundle/"+t+e.hash())+"'>"+t+"</a>"}),n}function h(e,t){var n="";return angular.forEach(t,function(t){var i=t.Identifier;return e===i.toString()?n=t:void 0}),n}function f(t){if(t){var n=t.tree.navigate("osgi.core","bundleState");return e.findFirstObjectName(n)}return null}function g(e){if(e){var t=e.objectName;if(t)return t;var n=e.children;if(n&&n.length)return g(n[0])}return null}function m(t){if(t){var n=t.tree.navigate("osgi.core","framework");return e.findFirstObjectName(n)}return null}function v(t){if(t){var n=t.tree.navigate("osgi.core","serviceState");return e.findFirstObjectName(n)}return null}function y(t){if(t){var n=t.tree.navigate("osgi.core","packageState");return e.findFirstObjectName(n)}return null}function b(t){if(t){var n=t.tree.navigate("osgi.compendium","cm");return e.findFirstObjectName(n)}return null}function w(e){if(e){var t=e.mbeanTypesToDomain,n=t.MetaTypeFacade||{},i=n["io.fabric8"]||{};return i.objectName}return null}function x(e){if(e){var t=e.mbeanTypesToDomain,n=t.ProfileMetadata||{},i=n["io.fabric8"]||{};return i.objectName}return null}function k(e){if(e){var t=e.mbeanTypesToDomain,n=t.OSGiTools||{},i=n.hawtio||{};return i.objectName}return null}function C(e){if(e){var t=e.mbeanTypesToDomain,n=t.ConfigAdmin||{},i=n.hawtio||{};return i.objectName}return null}function S(e,t,n,i){return void 0===i&&(i=!1),Core.url("#"+_(e,n,i)+t.hash())}function _(e,t,n){void 0===n&&(n=!1);{var i=t,r=e.versionId;e.profileId}if(r&&r){var a=n?"/newConfiguration/":"/configuration/";return"/wiki/branch/"+r+a+i+"/"+e.pageId}return"/osgi/pid/"+i}function T(e,t,n,i){var r=b(e),a=null;return t&&r&&(a=t.execute(r,"getProperties",n,Core.onSuccess(i))),a}function $(e,t){if(e&&t){if(e.startsWith(t))return e.substring(t.length+1);var n=t.lastIndexOf(".");if(n>0){var i=t.substring(0,n+1);return Core.trimLeading(e,i)}}return e}e.log=Logger.get("OSGi"),e.defaultBundleValues=t,e.getStateStyle=n,e.defaultServiceValues=i,e.defaultPackageValues=r,e.defaultConfigurationValues=a,e.parseActualPackages=o,e.parseManifestHeader=s,e.toCollection=c,e.labelBundleLinks=u,e.bundleLinks=d,e.pidLinks=p,e.findBundle=h,e.getSelectionBundleMBean=f,e.findFirstObjectName=g,e.getSelectionFrameworkMBean=m,e.getSelectionServiceMBean=v,e.getSelectionPackageMBean=y,e.getSelectionConfigAdminMBean=b,e.getMetaTypeMBean=w,e.getProfileMetadataMBean=x,e.getHawtioOSGiToolsMBean=k,e.getHawtioConfigAdminMBean=C,e.createConfigPidLink=S,e.createConfigPidPath=_,e.getConfigurationProperties=T,e.removeFactoryPidPrefix=$}(Osgi||(Osgi={}));var Osgi;!function(e){var t=function(){function t(e,t){this.jolokia=t,this.workspace=e}return t.prototype.getBundles=function(){var t={},n=this.jolokia.request({type:"exec",mbean:e.getSelectionBundleMBean(this.workspace),operation:"listBundles()"},Core.onSuccess(null));return angular.forEach(n.value,function(e,n){var i={Identifier:e.Identifier,Name:"",SymbolicName:e.SymbolicName,Fragment:e.Fragment,State:e.State,Version:e.Version,LastModified:new Date(Number(e.LastModified)),Location:e.Location,StartLevel:void 0,RegisteredServices:e.RegisteredServices,ServicesInUse:e.ServicesInUse};e.Headers["Bundle-Name"]&&(i.Name=e.Headers["Bundle-Name"].Value),t[e.Identifier]=i}),t},t.prototype.getServices=function(){var t={},n=this.jolokia.request({type:"exec",mbean:e.getSelectionServiceMBean(this.workspace),operation:"listServices()"},Core.onSuccess(null)),i=n.value;return angular.forEach(i,function(e,n){t[e.Identifier]=e}),t},t.prototype.getPackages=function(){var t={},n=this.jolokia.request({type:"exec",mbean:e.getSelectionPackageMBean(this.workspace),operation:"listPackages()"},Core.onSuccess(null)),i=n.value.values;return i.forEach(function(e){t[e.Name+"-"+e.Version]=e}),t},t}();e.OsgiDataService=t}(Osgi||(Osgi={}));var Osgi;!function(e){e.pluginName="osgi",e._module=angular.module(e.pluginName,[]),e._module.config(["$routeProvider",function(e){e.when("/osgi",{redirectTo:"/osgi/bundle-list"}).when("/osgi/bundle-list",{templateUrl:"plugins/osgi/html/bundle-list.html"}).when("/osgi/bundles",{templateUrl:"plugins/osgi/html/bundles.html"}).when("/osgi/bundle/:bundleId",{templateUrl:"plugins/osgi/html/bundle.html"}).when("/osgi/services",{templateUrl:"plugins/osgi/html/services.html"}).when("/osgi/packages",{templateUrl:"plugins/osgi/html/packages.html"}).when("/osgi/package/:package/:version",{templateUrl:"plugins/osgi/html/package.html"}).when("/osgi/configurations",{templateUrl:"plugins/osgi/html/configurations.html"}).when("/osgi/pid/:pid/:factoryPid",{templateUrl:"plugins/osgi/html/pid.html"}).when("/osgi/pid/:pid",{templateUrl:"plugins/osgi/html/pid.html"}).when("/osgi/fwk",{templateUrl:"plugins/osgi/html/framework.html"}).when("/osgi/dependencies",{templateUrl:"plugins/osgi/html/svc-dependencies.html",reloadOnSearch:!1})}]),e._module.run(["HawtioNav","workspace","viewRegistry","helpRegistry",function(e,t,n,i){i.addUserDoc("osgi","plugins/osgi/doc/help.md",function(){return t.treeContainsDomainAndProperties("osgi.core")});var r=e.builder(),a=r.id("osgi-configuration").href(function(){return"/osgi/configurations"+t.hash()}).title(function(){return"Configuration"}).isSelected(function(){return t.isLinkPrefixActive("/osgi/configuration")||t.isLinkPrefixActive("/osgi/pid")}).build(),o=r.id("osgi-bundles").href(function(){return"/osgi/bundle-list"+t.hash()}).title(function(){return"Bundles"}).isSelected(function(){return t.isLinkPrefixActive("/osgi/bundle")}).build(),s=r.id("osgi-features").href(function(){return"/osgi/features"+t.hash()}).title(function(){return"Features"}).show(function(){return!Core.isBlank(Karaf.getSelectionFeaturesMBean(t))}).isSelected(function(){return t.isLinkPrefixActive("/osgi/feature")}).build(),l=r.id("osgi-packages").href(function(){return"/osgi/packages"+t.hash()}).title(function(){return"Packages"}).isSelected(function(){return t.isLinkPrefixActive("/osgi/package")}).build(),c=r.id("osgi-services").href(function(){return"/osgi/services"+t.hash()}).title(function(){return"Services"}).isSelected(function(){return t.isLinkPrefixActive("/osgi/service")}).build(),u=r.id("osgi-scr-components").href(function(){return"/osgi/scr-components"+t.hash()}).title(function(){return"Declarative Services"}).show(function(){return!Core.isBlank(Karaf.getSelectionScrMBean(t))}).isSelected(function(){return t.isLinkPrefixActive("/osgi/scr-component")}).build(),d=r.id("osgi-server").href(function(){return"/osgi/server"+t.hash()}).title(function(){return"Server"}).isSelected(function(){return t.isLinkPrefixActive("/osgi/server")}).build(),p=r.id("osgi-fwk").href(function(){return"/osgi/fwk"+t.hash()}).title(function(){return"Framework"}).isSelected(function(){return t.isLinkPrefixActive("/osgi/fwk")}).build(),h=r.id("osgi-dependencies").href(function(){return"/osgi/dependencies"+t.hash()}).title(function(){return"Dependencies"}).isSelected(function(){return t.isLinkPrefixActive("/osgi/dependencies")}).build(),f=r.id("osgi").title(function(){return"OSGi"}).href(function(){return"/osgi"}).isValid(function(){return t.treeContainsDomainAndProperties("osgi.core")}).isSelected(function(){return t.isLinkActive("osgi")}).tabs(a,o,s,l,c,u,d,p,h).build();e.add(f)}]),e._module.factory("osgiDataService",["workspace","jolokia",function(t,n){return new e.OsgiDataService(t,n)}]),hawtioPluginLoader.addModule(e.pluginName)}(Osgi||(Osgi={}));var Osgi;!function(e){e._module.controller("Osgi.BundleListController",["$scope","workspace","jolokia","localStorage",function(t,n,i,r){function a(r){var a=r.value,o=angular.toJson(a);t.responseJson!==o&&(t.responseJson=o,t.bundles=[],angular.forEach(a,function(e,n){var i={Identifier:e.Identifier,Name:"",SymbolicName:e.SymbolicName,Fragment:e.Fragment,State:e.State,Version:e.Version,LastModified:new Date(Number(e.LastModified)),Location:e.Location,StartLevel:void 0};e.Headers["Bundle-Name"]&&(i.Name=e.Headers["Bundle-Name"].Value),t.bundles.push(i)}),t.bundles=t.bundles.sortBy(t.display.sortField),Core.$apply(t),
setTimeout(function(){for(var r=[],a=0;a<t.bundles.length;a++){var o=t.bundles[a];r.push({type:"exec",mbean:e.getSelectionBundleMBean(n),operation:"getStartLevel(long)",arguments:[o.Identifier]})}var s=r.length;i.request(r,Core.onSuccess(function(n){var i=n.request.arguments.first();if(angular.isDefined(i)){var r=t.bundles[i];r&&(e.log.debug("Setting bundle: ",r.Identifier," start level to: ",n.value),r.StartLevel=n.value)}s-=1,e.log.debug("oustanding responses: ",s),0===s&&(e.log.debug("Updating page..."),Core.$apply(t))}))},500))}t.result={},t.bundles=[],t.bundleUrl="",t.display={bundleField:"Name",sortField:"Identifier",bundleFilter:"",startLevelFilter:0,showActiveMQBundles:!1,showCamelBundles:!1,showCxfBundles:!1,showPlatformBundles:!1},"bundleList"in r&&(t.display=angular.fromJson(r.bundleList)),t.$watch("display",function(e,t){e!==t&&(r.bundleList=angular.toJson(e))},!0),t.installDisabled=function(){return""===t.bundleUrl},t.install=function(){i.request({type:"exec",mbean:e.getSelectionFrameworkMBean(n),operation:"installBundle(java.lang.String)",arguments:[t.bundleUrl]},{success:function(r){var a=r.value;i.request({type:"exec",mbean:e.getSelectionBundleMBean(n),operation:"isFragment(long)",arguments:[a]},{success:function(r){var o=r.value;o?(Core.notification("success","Fragment installed successfully."),t.bundleUrl="",Core.$apply(t)):i.request({type:"exec",mbean:e.getSelectionFrameworkMBean(n),operation:"startBundle(long)",arguments:[a]},{success:function(e){Core.notification("success","Bundle installed and started successfully."),t.bundleUrl="",Core.$apply(t)},error:function(e){Core.notification("error",e.error)}})},error:function(e){Core.notification("error",e.error)}})},error:function(e){Core.notification("error",e.error)}})},t.$watch("display.sortField",function(e,n){e!==n&&(t.bundles=t.bundles.sortBy(e))}),t.getStateStyle=function(t){return e.getStateStyle("badge",t)},t.getLabel=function(e){var n;return"Name"===t.display.bundleField?(n=e.Name,""===n&&(n=e.SymbolicName)):n=e.SymbolicName,n},t.filterBundle=function(e){if(t.display.startLevelFilter>0&&e.StartLevel<t.display.startLevelFilter)return!1;var n=t.getLabel(e);return t.display.bundleFilter&&!n.toLowerCase().has(t.display.bundleFilter.toLowerCase())?!1:Core.isBlank(t.display.bundleFilter)?t.display.showPlatformBundles&&Karaf.isPlatformBundle(e.SymbolicName)||t.display.showActiveMQBundles&&Karaf.isActiveMQBundle(e.SymbolicName)||t.display.showCxfBundles&&Karaf.isCxfBundle(e.SymbolicName)||t.display.showCamelBundles&&Karaf.isCamelBundle(e.SymbolicName)?!0:!1:!0},Core.register(i,t,{type:"exec",mbean:e.getSelectionBundleMBean(n),operation:"listBundles()"},Core.onSuccess(a))}])}(Osgi||(Osgi={}));var Osgi;!function(e){function t(e){var t=e.indexOf(";");return 0>=t?"":e.substring(t+1).trim()}function n(e,t){var n="";if(!e)return n;for(var i=Object.keys(e).sort(),r=0;r<i.length;r++){var a,o=i[r],s=o.charAt(0),l="";if("A"===s&&(l="=",a="text-info"),"D"===s&&(l=":=",a="muted"),""!==l){if(t&&"Aversion"===o)continue;var c=e[o];c.length>15&&(c=c.replace(/[,]/g,",<br/>&nbsp;&nbsp;")),n+="<tr><td><strong class='"+a+"'>"+o.substring(1)+"</strong>"+l+c+"</td></tr>"}}return n}function i(e){if(angular.isArray(e))return r(e);var t=e.toString(),n=t.lastIndexOf(".");return t.substring(n+1)}function r(e){for(var t=[],n=0;n<e.length;n++)t.add(i(e[n]));return t=t.filter(function(e,t,n){return n.indexOf(e)===t}),t.sort(),t.toString()}e.readBSNHeaderData=t,e.formatAttributesAndDirectivesForPopover=n,e.formatServiceName=i,e._module.controller("Osgi.BundleController",["$scope","$location","workspace","$routeParams","jolokia",function(r,a,o,s,l){function c(){var e=document.getElementById("loadClassResult");e.innerHTML+="<div class='alert alert-error'><button type='button' class='close' data-dismiss='alert'>&times;</button>The hawtio.OSGiTools MBean is not available. Please contact technical support.</div>"}function u(e){var t=document.getElementById("loadClassResult");t.innerHTML+="<div class='alert alert-error'><button type='button' class='close' data-dismiss='alert'>&times;</button>Problem invoking hawtio.OSGiTools MBean. "+e+"</div>"}function d(n){var i=n.value;r.bundles=i,e.defaultBundleValues(o,r,i),r.row=e.findBundle(r.bundleId,i),Core.$apply(r),$(".accordion-body.collapse").hover(function(){$(this).css("overflow","visible")},function(){$(this).css("overflow","hidden")}),$("#bsn").tooltip({title:t(r.row.Headers["Bundle-SymbolicName"].Value),placement:"right"}),p(),h(),f()}function p(){var t=e.parseManifestHeader(r.row.Headers,"Import-Package");for(var i in r.row.ImportData){var a=t[i],o="<small><table><tr><td><strong>Imported Version=</strong>"+r.row.ImportData[i].ReportedVersion+"</td></tr>";if(void 0!==a)o+=n(a,!1),"optional"!==t[i].Dresolution&&$(document.getElementById("import."+i)).addClass("badge-info");else{$(document.getElementById("import."+i)).addClass("badge-important");var s=r.row.Headers["DynamicImport-Package"];void 0!==s&&(s=s.Value,o+="<tr><td>Dynamic Import. Imported due to:</td></tr>",o+="<tr><td><strong>DynamicImport-Package=</strong>"+s+"</td></tr>")}o+="</table></small>",$(document.getElementById("import."+i)).popover({title:"attributes and directives",content:o,trigger:"hover",html:!0}),t[i]=void 0}var l="";for(var i in t)void 0!==t[i]&&void 0===r.row.ExportData[i]&&(l+="<tr><td><div class='less-big badge badge-warning' id='unsatisfied."+i+"'>"+i+"</div></td></tr>");""!==l&&(l="<p/><p class='text-warning'>The following optional imports were not satisfied:<table>"+l+"</table></p>",document.getElementById("unsatisfiedOptionalImports").innerHTML=l);for(var i in t)if(void 0!==t[i]){var o="<small><table>";o+=n(t[i],!1),o+="</table></small>",$(document.getElementById("unsatisfied."+i)).popover({title:"attributes and directives",content:o,trigger:"hover",html:!0})}}function h(){var t=e.parseManifestHeader(r.row.Headers,"Export-Package");for(var i in r.row.ExportData){var a="<small><table><tr><td><strong>Exported Version=</strong>"+r.row.ExportData[i].ReportedVersion+"</td></tr>";a+=n(t[i],!0),a+="</table></small>",$(document.getElementById("export."+i)).popover({title:"attributes and directives",content:a,trigger:"hover",html:!0})}}function f(){if(void 0!==r.row.RegisteredServices&&0!==r.row.RegisteredServices.length||void 0!==r.row.ServicesInUse&&0!==r.row.ServicesInUse){var t=e.getSelectionServiceMBean(o);t&&l.request({type:"exec",mbean:t,operation:"listServices()"},Core.onSuccess(g))}}function g(t){var n=t.value;for(var a in n){var s=document.getElementById("registers.service."+a),c=document.getElementById("uses.service."+a);(void 0!==s&&null!==s||void 0!==c&&null!==c)&&l.request({type:"exec",mbean:e.getSelectionServiceMBean(o),operation:"getProperties",arguments:[a]},Core.onSuccess(function(e,t,a){return function(o){for(var s=o.value,l=Object.keys(s).sort(),c="<small><table>",u=0;u<l.length;u++){var d=s[l[u]];if(void 0!==d){var p=d.Value;p.length>15&&(p=p.replace(/[,]/g,",<br/>&nbsp;&nbsp;")),c+="<tr><td valign='top'>"+l[u]+"</td><td>"+p+"</td></tr>"}}var h=n[e].BundleIdentifier;c+="<tr><td>Registered&nbsp;by</td><td>Bundle "+h+" <div class='less-big label'>"+r.bundles[h].SymbolicName+"</div></td></tr>",c+="</table></small>",void 0!==t&&null!==t&&(t.innerText=" "+i(n[e].objectClass),$(t).popover({title:"service properties",content:c,trigger:"hover",html:!0})),void 0!==a&&null!==a&&(a.innerText=" "+i(n[e].objectClass),$(a).popover({title:"service properties",content:c,trigger:"hover",html:!0}))}}(a,s,c)))}}function m(){var t=e.getSelectionBundleMBean(o);t&&l.request({type:"exec",mbean:t,operation:"listBundles()"},Core.onSuccess(d))}r.bundleId=s.bundleId,m(),r.showValue=function(e){switch(e){case"Bundle-Name":case"Bundle-SymbolicName":case"Bundle-Version":case"Export-Package":case"Import-Package":return!1;default:return!0}},r.executeLoadClass=function(t){var n=e.getHawtioOSGiToolsMBean(o);n?l.request({type:"exec",mbean:n,operation:"getLoadClassOrigin",arguments:[r.bundleId,t]},{success:function(n){var i,a,s=document.getElementById("loadClassResult"),l=n.value;-1===l?(i="",a="Class can not be loaded from this bundle."):(i="alert-success",a="Class is served from Bundle "+e.bundleLinks(o,l)),s.innerHTML+="<div class='alert "+i+"'><button type='button' class='close' data-dismiss='alert'>&times;</button>Loading class <strong>"+t+"</strong> in Bundle "+r.bundleId+". "+a+"</div>"},error:function(e){u(e)}}):c()},r.executeFindResource=function(t){var n=e.getHawtioOSGiToolsMBean(o);n?l.request({type:"exec",mbean:n,operation:"getResourceURL",arguments:[r.bundleId,t]},{success:function(e){var n,i,a=document.getElementById("loadClassResult"),o=e.value;null===o?(n="",i="Resource can not be found from this bundle."):(n="alert-success",i="Resource is available from: "+o),a.innerHTML+="<div class='alert "+n+"'><button type='button' class='close' data-dismiss='alert'>&times;</button>Finding resource <strong>"+t+"</strong> in Bundle "+r.bundleId+". "+i+"</div>"},error:function(e){u(e)}}):c()},r.startBundle=function(t){l.request([{type:"exec",mbean:e.getSelectionFrameworkMBean(o),operation:"startBundle",arguments:[t]}],Core.onSuccess(m))},r.stopBundle=function(t){l.request([{type:"exec",mbean:e.getSelectionFrameworkMBean(o),operation:"stopBundle",arguments:[t]}],Core.onSuccess(m))},r.updatehBundle=function(t){l.request([{type:"exec",mbean:e.getSelectionFrameworkMBean(o),operation:"updateBundle",arguments:[t]}],Core.onSuccess(m))},r.refreshBundle=function(t){l.request([{type:"exec",mbean:e.getSelectionFrameworkMBean(o),operation:"refreshBundle",arguments:[t]}],Core.onSuccess(m))},r.uninstallBundle=function(t){l.request([{type:"exec",mbean:e.getSelectionFrameworkMBean(o),operation:"uninstallBundle",arguments:[t]}],Core.onSuccess(function(){a.path("/osgi/bundle-list"),Core.$apply(r)}))}}])}(Osgi||(Osgi={}));var Osgi;!function(e){e._module.controller("Osgi.BundlesController",["$scope","workspace","jolokia",function(t,n,i){function r(e){angular.equals(t.result,e.value)||(t.selected.length=0,t.result=e.value,t.bundles=[],angular.forEach(t.result,function(e,n){var i={Identifier:e.Identifier,Name:"",SymbolicName:e.SymbolicName,State:e.State,Version:e.Version,LastModified:e.LastModified,Location:e.Location};e.Headers["Bundle-Name"]&&(i.Name=e.Headers["Bundle-Name"].Value),t.bundles.push(i)}),t.loading=!1,Core.$apply(t))}t.result={},t.bundles=[],t.selected=[],t.loading=!0,t.bundleUrl="",t.installDisabled=function(){return""===t.bundleUrl};var a=[{field:"Identifier",displayName:"Identifier",width:"48",headerCellTemplate:'<div ng-click="col.sort()" class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }"><div class="ngHeaderText colt{{$index}} pagination-centered" title="Identifier"><i class="fa fa-tag"></i></div><div class="ngSortButtonDown" ng-show="col.showSortButtonDown()"></div><div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"></div></div>'},{field:"State",displayName:"Bundle State",width:"24",headerCellTemplate:'<div ng-click="col.sort()" class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }"><div class="ngHeaderText colt{{$index}} pagination-centered" title="State"><i class="fa fa-tasks"></i></div><div class="ngSortButtonDown" ng-show="col.showSortButtonDown()"></div><div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"></div></div>',cellTemplate:'<div class="ngCellText" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field)}}"></i></div>'},{field:"Name",displayName:"Name",width:"***",cellTemplate:'<div class="ngCellText"><a href="#/osgi/bundle/{{row.entity.Identifier}}?p=container">{{row.getProperty(col.field)}}</a></div>'},{field:"SymbolicName",displayName:"Symbolic Name",width:"***",cellTemplate:'<div class="ngCellText"><a href="#/osgi/bundle/{{row.entity.Identifier}}?p=container">{{row.getProperty(col.field)}}</a></div>'},{field:"Version",displayName:"Version",width:"**"},{field:"Location",displayName:"Update Location",width:"***"}];t.gridOptions={data:"bundles",showFilter:!1,selectedItems:t.selected,selectWithCheckboxOnly:!0,columnDefs:a,filterOptions:{filterText:""}},t.onResponse=function(){i.request({type:"exec",mbean:e.getSelectionBundleMBean(n),operation:"listBundles()"},{success:r,error:r})},t.controlBundles=function(r){var a=t.selected.map(function(e){return e.Identifier});angular.isArray(a)||(a=[a]),i.request({type:"exec",mbean:e.getSelectionFrameworkMBean(n),operation:r,arguments:[a]},{success:t.onResponse,error:t.onResponse})},t.stop=function(){t.controlBundles("stopBundles([J)")},t.start=function(){t.controlBundles("startBundles([J)")},t.update=function(){t.controlBundles("updateBundles([J)")},t.refresh=function(){t.controlBundles("refreshBundles([J)")},t.uninstall=function(){t.controlBundles("uninstallBundles([J)")},t.install=function(){i.request({type:"exec",mbean:e.getSelectionFrameworkMBean(n),operation:"installBundle(java.lang.String)",arguments:[t.bundleUrl]},{success:function(r){console.log("Got: ",r),t.bundleUrl="",i.request({type:"exec",mbean:e.getSelectionFrameworkMBean(n),operation:"startBundle(long)",arguments:[r.value]},{success:t.onResponse,error:t.onResponse})},error:function(e){t.bundleUrl="",t.onResponse()}})},Core.register(i,t,{type:"exec",mbean:e.getSelectionBundleMBean(n),operation:"listBundles()"},Core.onSuccess(r))}])}(Osgi||(Osgi={}));var Osgi;!function(e){e._module.controller("Osgi.ConfigurationsController",["$scope","$routeParams","$location","workspace","jolokia",function(t,n,i,r,a){function o(n){var i={};angular.forEach(n,function(e){var t=e[0],n=e[1],r=m(t,n);v(t)||(r.hasValue=!0,r.kind=C.pid,i[t]=r)}),t.pids=i;var r=e.getSelectionConfigAdminMBean(t.workspace);r&&t.jolokia.execute(r,"getConfigurations","(service.factoryPid=*)",Core.onSuccess(s,k("Failed to load factory PID configurations: "))),d()}function s(n){var i=e.getSelectionConfigAdminMBean(t.workspace),r=t.pids;r&&i&&angular.forEach(n,function(n){var a=n[0],o=n[1];if(a&&!v(a)){var s=r[a];s&&(s.isFactoryInstance=!0,t.jolokia.execute(i,"getFactoryPid",a,Core.onSuccess(function(n){if(s.factoryPid=n,s.name=e.removeFactoryPidPrefix(a,n),n){var i=y(n,o,r);i&&(b(a,i,s),t.inFabricProfile&&e.getConfigurationProperties(t.workspace,t.jolokia,a,function(i){var r=Core.pathGet(i,["fabric.zookeeper.pid","Value"]);r&&(s.name=e.removeFactoryPidPrefix(r,n),s.zooKeeperPid=r,Core.$apply(t))}),Core.$apply(t))}})))}}),u()}function l(e){t.metaType=e,u()}function c(){var e=t.pids,n=[];angular.forEach(e,function(e,t){e.isFactoryInstance||n.push(e)}),t.configurations=n.sortBy("name"),Core.$apply(t)}function u(n){void 0===n&&(n=!0);var i=t.metaType;if(i){var r=e.configuration.pidMetadata,a=t.pids||{};angular.forEach(i.pids,function(e,t){var i=null,o=n?y(t,i):a[t];if(o){var s=e.factoryPidBundleIds;s&&s.length&&w(o),o.name=Core.pathGet(r,[t,"name"])||f(e.name)||t;var l=Core.pathGet(r,[t,"description"])||e.description;o.description=l}})}c()}function d(){if(t.pids)if(t.profileNotRunning&&t.profileMetadataMBean&&t.versionId&&t.profileId)a.execute(t.profileMetadataMBean,"metaTypeSummary",t.versionId,t.profileId,Core.onSuccess(l));else{var n=e.getMetaTypeMBean(t.workspace);n&&t.jolokia.execute(n,"metaTypeSummary",Core.onSuccess(l))}}function p(){if(t.configurations=[],t.profileNotRunning&&t.profileMetadataMBean&&t.versionId&&t.profileId)a.execute(t.profileMetadataMBean,"metaTypeSummary",t.versionId,t.profileId,Core.onSuccess(h,{silent:!0}));else if(t.jolokia){var n=e.getSelectionConfigAdminMBean(t.workspace);n&&t.jolokia.execute(n,"getConfigurations","(service.pid=*)",Core.onSuccess(o,k("Failed to load PID configurations: ")))}}function h(e){var n=e;if(n){var i={};angular.forEach(n.pids,function(e,t){if(e&&!v(t)){var n="mvn:"+t,r={pid:t,name:e.name,"class":"pid",description:e.description,bundle:n,kind:C.pid,pidLink:x(t)};i[t]=r}}),angular.forEach(i,function(e,t){var n=t.indexOf("-");if(n>0){var r=t.substring(0,n),a=t.substring(n+1,t.length),o=i[r];if(!o){var s=e.bundle;o=y(r,s,i)}o&&(b(t,o,e,r),e.name=a,i[r]=o,delete i[t])}}),t.pids=i}t.metaType=n,u(!1)}function f(e){return angular.forEach(["Fabric8 ","Apache "],function(t){e&&e.startsWith(t)&&e.length>t.length&&(e=e.substring(t.length))}),e}function g(t,n){var i=e.configuration.pidMetadata;return Core.pathGet(i,[t,"description"])||"pid: "+t+"\nbundle: "+n}function m(t,n){var i=e.configuration.pidMetadata,r={pid:t,name:Core.pathGet(i,[t,"name"])||t,"class":"pid",description:Core.pathGet(i,[t,"description"])||g(t,n),bundle:n,kind:C.pidNoValue,pidLink:x(t)};return r}function v(t){var n=!1;return angular.forEach(e.configuration.ignorePids,function(e){t.startsWith(e)&&(n=!0)}),n}function y(n,i,r){if(void 0===r&&(r=null),v(n))return e.log.info("ignoring pid "+n),null;r||(r=t.pids);var a=r[n];return a||(a=m(n,i),r[n]=a,c()),a}function b(e,t,n,i){void 0===i&&(i=null),w(t,i,e);var r=t.children;i&&(t.pidLink=x(i,!0)),r||(r={},t.children=r),r[e]=n}function w(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null),e.isFactory=!0,e["class"]="factoryPid",e.kind=C.factory,t||(t=e.factoryPid||""),n||(n=e.pid||""),t||(t=n,n=null),e.pidLink=x(t)}function x(n,i){return void 0===i&&(i=!1),e.createConfigPidLink(t,r,n,i)}function k(e){return{error:function(t){Core.notification("error",e+t.error||t),Core.defaultJolokiaErrorHandler(t)}}}t.selectedItems=[],t.grid={data:"configurations",showFilter:!1,showColumnMenu:!1,multiSelect:!1,filterOptions:{filterText:"",useExternalFilter:!1},selectedItems:t.selectedItems,showSelectionCheckbox:!1,displaySelectionCheckbox:!1,columnDefs:[{field:"Pid",displayName:"Configuration",cellTemplate:'<div class="ngCellText"><a ng-href="{{row.entity.pidLink}}" title="{{row.entity.description}}">{{row.entity.name}}</a></div>'}]};var C={factory:{"class":"badge badge-info",title:"Configuration factory used to create separate instances of the configuration"},pid:{"class":"badge badge-success",title:"Configuration which has a set of properties associated with it"},pidNoValue:{"class":"badge badge-warning",title:"Configuration which does not yet have any bound values"}};t.addPidDialog=new UI.Dialog,t.addPid=function(n){if(t.configurations.any(function(e){return e.pid==n}))return void Core.notification("error",'pid "'+n+'" already exists.');t.addPidDialog.close();var i=e.getHawtioConfigAdminMBean(t.workspace);if(i&&n){var r=JSON.stringify({});t.jolokia.execute(i,"configAdminUpdate",n,r,Core.onSuccess(function(e){Core.notification("success","Successfully created pid: "+n),p()}))}},t.$on("$routeChangeSuccess",function(e,t,n){setTimeout(p,50)}),p()}])}(Osgi||(Osgi={}));var Osgi;!function(e){e._module.controller("Osgi.FrameworkController",["$scope","$dialog","workspace",function(t,n,i){function r(e,t){Core.notification(e,t),o()}function a(e){t.startLevel=e.value.FrameworkStartLevel,t.initialBundleStartLevel=e.value.InitialBundleStartLevel,Core.$apply(t)}function o(){var t=e.getSelectionFrameworkMBean(i);if(t){var n=i.jolokia;n.request({type:"read",mbean:t},Core.onSuccess(a))}}t.editDialog=new UI.Dialog,o(),t.edit=function(e,n){t.editAttr=e,t.editDisplayName=n,t.editDialog.open()},t.edited=function(n,a,o){if(t.editDialog.close(),angular.isNumber(o)){var s=e.getSelectionFrameworkMBean(i);if(s){var l=i.jolokia;l.request({type:"write",mbean:s,attribute:n,value:o},{error:function(e){r("error",e.error)},success:function(e){r("success",a+" changed to "+o)}})}}}}])}(Osgi||(Osgi={}));var Osgi;!function(e){e.configuration={pidMetadata:{"io.fabric8.container.java":{name:"Java Container"},"io.fabric8.container.process":{name:"Process Container"},"io.fabric8.container.process.overlay.resources":{name:"Container Overlay Resources",description:"The resources overlaid over the distribution of the process",schemaExtensions:{disableHumanizeLabel:!0}},"io.fabric8.dosgi":{name:"Fabric8 DOSGi",description:"The configuration for the Distributed OSGi implementation in Fabric8"},"io.fabric8.environment":{name:"Environment Variables",description:"The operating system Environment Variables which are exported into any child processes",schemaExtensions:{disableHumanizeLabel:!0}},"io.fabric8.fab.osgi.url":{name:"FAB URL",description:"Configures the 'fab:' URL handler for deploying JARs as bundles"},"io.fabric8.mq.fabric.server":{name:"ActiveMQ Broker",description:"The configuration of the Apache ActiveMQ server configured via the fabric"},"io.fabric8.openshift":{name:"OpenShift"},"io.fabric8.ports":{name:"Ports",description:"The network ports exported by the container",schemaExtensions:{disableHumanizeLabel:!0}},"io.fabric8.system":{name:"System Properties",description:"The Java System Properties which are exported into any child Java processes",schemaExtensions:{disableHumanizeLabel:!0}},"io.fabric8.version":{name:"Versions",schemaExtensions:{disableHumanizeLabel:!0}},"org.ops4j.pax.logging":{name:"Logging",description:"The configuration of the logging subsystem"},"org.ops4j.pax.url.mvn":{name:"Maven URL",description:"Configures the Maven 'mvn:' URL handler for referencing maven artifacts"},"org.ops4j.pax.url.war":{name:"WAR URL",description:"Configures the 'war:' URL handler for referencing WAR deployments"},"org.ops4j.pax.url.wrap":{name:"Wrap URL",description:"Configures the 'wrap:' URL handler for wrapping JARs as bundles"}},ignorePids:["jmx.acl","io.fabric8.agent","io.fabric8.git","io.fabric8.mq.fabric.template","io.fabric8.openshift.agent","io.fabric8.service.ZkDataStoreImpl","org.apache.felix.fileinstall","org.apache.karaf.command.acl.","org.apache.karaf.service.acl."],tabs:{fabric8:{label:"Fabric8",description:"Configuration options for the Fabric8 services",pids:["io.fabric8"]},karaf:{label:"Karaf",description:"Configuration options for the Apache Karaf container and subsystem",pids:["org.apache.karaf"]}}}}(Osgi||(Osgi={}));var Osgi;!function(e){var t=function(){function e(e,t,n,i,r,a){this.filteredBundles={},this.bundles=null,this.services=null,this.packages=null,this.PREFIX_BUNDLE="Bundle-",this.PREFIX_SVC="Service-",this.PREFIX_PKG="Package-",this.osgiDataService=e,this.bundleFilter=t,this.packageFilter=n,this.showServices=i,this.showPackages=r,this.hideUnused=a,this.graphBuilder=new ForceGraph.GraphBuilder}return e.prototype.getBundles=function(){return null==this.bundles&&(this.bundles=this.osgiDataService.getBundles()),this.bundles},e.prototype.getServices=function(){return null==this.services&&(this.services=this.osgiDataService.getServices()),this.services},e.prototype.getPackages=function(){return null==this.packages&&(this.packages=this.osgiDataService.getPackages()),this.packages},e.prototype.bundleNodeId=function(e){return this.PREFIX_BUNDLE+e.Identifier},e.prototype.serviceNodeId=function(e){return this.PREFIX_SVC+e.Identifier},e.prototype.pkgNodeId=function(e){return this.PREFIX_PKG+e.Name+"-"+e.Version},e.prototype.buildSvcNode=function(e){return{id:this.serviceNodeId(e),name:""+e.Identifier,type:"service",used:!1,popup:{title:"Service ["+e.Identifier+"]",content:function(){var t="";return null!=e&&e.objectClass.forEach(function(e){t.length>0&&(t+="<br/>"),t+=e}),t}}}},e.prototype.buildBundleNode=function(e){return{id:this.bundleNodeId(e),name:e.SymbolicName,type:"bundle",used:!1,navUrl:"#/osgi/bundle/"+e.Identifier,popup:{title:"Bundle ["+e.Identifier+"]",content:"<p>"+e.SymbolicName+"<br/>Version "+e.Version+"</p>"}}},e.prototype.buildPackageNode=function(e){return{id:this.pkgNodeId(e),name:e.Name,type:"package",used:!1,popup:{title:"Package ["+e.Name+"]",content:"<p>"+e.Version+"</p>"}}},e.prototype.exportingBundle=function(e){var t=this,n=null;return e.ExportingBundles.forEach(function(e){null!=t.filteredBundles[t.PREFIX_BUNDLE+e]&&(n=e)}),n},e.prototype.addFilteredBundles=function(){var e=this;d3.values(this.getBundles()).forEach(function(t){if(null==e.bundleFilter||""==e.bundleFilter||t.SymbolicName.startsWith(e.bundleFilter)){var n=e.buildBundleNode(t);if(e.filteredBundles[n.id]=t,n.used=!0,e.graphBuilder.addNode(n),e.showServices){var i=e.getServices();t.RegisteredServices.forEach(function(t){var r=i[t];if(r){var a=e.buildSvcNode(i[t]);e.graphBuilder.addNode(a),e.graphBuilder.addLink(n.id,a.id,"registered")}})}}})},e.prototype.addFilteredServices=function(){var e=this;this.showServices&&d3.values(this.getBundles()).forEach(function(t){t.ServicesInUse.forEach(function(n){var i=e.PREFIX_SVC+n;if(null!=e.graphBuilder.getNode(i)){e.graphBuilder.getNode(i).used=!0;var r=e.graphBuilder.getNode(e.bundleNodeId(t))||e.buildBundleNode(t);r.used=!0,e.graphBuilder.addNode(r),e.graphBuilder.addLink(i,r.id,"inuse")}})})},e.prototype.addFilteredPackages=function(){var e=this;this.showPackages&&d3.values(this.getPackages()).forEach(function(t){if(null==e.packageFilter||""==e.packageFilter||t.Name.startsWith(e.packageFilter)){var n=e.exportingBundle(t);if(null!=n){var i=e.graphBuilder.getNode(e.PREFIX_BUNDLE+n);i.used=!0;var r=e.buildPackageNode(t);e.graphBuilder.addNode(r),e.graphBuilder.addLink(i.id,r.id,"registered"),t.ImportingBundles.forEach(function(t){var n=e.graphBuilder.getNode(e.PREFIX_BUNDLE+t)||e.buildBundleNode(e.getBundles()[t]);n.used=!0,r.used=!0,e.graphBuilder.addNode(n),e.graphBuilder.addLink(n.id,r.id,"inuse")})}}})},e.prototype.buildGraph=function(){var e=this;return this.addFilteredBundles(),this.addFilteredServices(),this.addFilteredPackages(),this.hideUnused&&(this.graphBuilder.filterNodes(function(e){return e.used}),this.graphBuilder.filterNodes(function(t){return e.graphBuilder.hasLinks(t.id)})),this.graphBuilder.buildGraph()},e}();e.OsgiGraphBuilder=t}(Osgi||(Osgi={}));var Osgi;!function(e){e.TopLevelController=e._module.controller("Osgi.TopLevelController",["$scope","workspace",function(t,n){t.frameworkMBean=e.getSelectionFrameworkMBean(n),t.bundleMBean=e.getSelectionBundleMBean(n),t.serviceMBean=e.getSelectionServiceMBean(n),t.packageMBean=e.getSelectionPackageMBean(n),t.configAdminMBean=e.getSelectionConfigAdminMBean(n),t.metaTypeMBean=e.getMetaTypeMBean(n),t.osgiToolsMBean=e.getHawtioOSGiToolsMBean(n),t.hawtioConfigAdminMBean=e.getHawtioConfigAdminMBean(n),t.scrMBean=Karaf.getSelectionScrMBean(n),t.featuresMBean=Karaf.getSelectionFeaturesMBean(n)}])}(Osgi||(Osgi={}));var Osgi;!function(e){e._module.controller("Osgi.PackageController",["$scope","$filter","workspace","$routeParams",function(t,n,i,r){function a(n){var r=e.defaultPackageValues(i,t,n.value);t.row=r.filter({Name:t["package"],Version:t.version})[0],Core.$apply(t)}function o(){var t=e.getSelectionPackageMBean(i);if(t){var n=i.jolokia;n.request({type:"exec",mbean:t,operation:"listPackages"},Core.onSuccess(a))}}t["package"]=r["package"],t.version=r.version,o()}])}(Osgi||(Osgi={}));var Osgi;!function(e){e.PackagesController=e._module.controller("Osgi.PackagesController",["$scope","$filter","workspace","$templateCache","$compile",function(t,n,i,r,a){function o(n){var r=e.defaultPackageValues(i,t,n.value);s(r)}function s(n){var r={},a=function(e){angular.forEach(e.value,function(e,t){var n={Identifier:e.Identifier,Name:"",SymbolicName:e.SymbolicName,State:e.State,Version:e.Version,LastModified:e.LastModified,Location:e.Location};e.Headers["Bundle-Name"]&&(n.Name=e.Headers["Bundle-Name"].Value),r[n.Identifier]=n}),angular.forEach(n,function(e,t){angular.forEach(e.ExportingBundles,function(t,n){e.ExportingBundles[n]=r[t]}),angular.forEach(e.ImportingBundles,function(t,n){e.ImportingBundles[n]=r[t]})}),t.packages=n,Core.$apply(t)};i.jolokia.request({type:"exec",mbean:e.getSelectionBundleMBean(i),operation:"listBundles()"},{success:a,error:a})}function l(){var t=e.getSelectionPackageMBean(i);if(t){var n=i.jolokia;n.request({type:"exec",mbean:t,operation:"listPackages"},Core.onSuccess(o))}}n("date");t.packages=[],t.selectedItems=[],t.mygrid={data:"packages",showFilter:!1,showColumnMenu:!1,filterOptions:{filterText:"",useExternalFilter:!1},selectedItems:t.selectedItems,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"Name",displayName:"Name",width:"***"},{field:"VersionLink",displayName:"Version",width:"***"},{field:"RemovalPending",displayName:"Removal Pending",width:"***"}]},t.$watch("workspace.selection",function(){l()})}])}(Osgi||(Osgi={}));var Osgi;!function(e){e._module.controller("Osgi.PidController",["$scope","$timeout","$routeParams","$location","workspace","jolokia",function(t,n,i,r,a,o){function s(n,i,a){var o=function(n){if(Core.notification("success","Successfully updated pid: "+i),i&&t.factoryPid&&t.newPid){var a=e.createConfigPidPath(t,i);r.path(a)}else t.setEditMode(!1),t.canSave=!1,t.saved=!0},s=Core.onSuccess(o,l("Failed to update: "+i)),c=JSON.stringify(a);t.jolokia.execute(n,"configAdminUpdate",i,c,s)}function l(e){return{error:function(t){Core.notification("error",e+"\n"+t.error||t),Core.defaultJolokiaErrorHandler(t)}}}function c(){t.editMode&&(t.canSave=!0)}function u(e){t.modelLoaded=!0;var n=e||{};t.configValues=n,t.zkPid=Core.pathGet(n,["fabric.zookeeper.pid","Value"]),t.zkPid&&t.saved||d()}function d(){h();var n=t.configValues;if(n)if(t.profileNotRunning&&t.profileMetadataMBean&&t.versionId&&t.profileId){var i=t.factoryPid||t.pid;o.execute(t.profileMetadataMBean,"getPidMetaTypeObject",t.versionId,t.profileId,i,Core.onSuccess(p))}else{var r=null,i=null,a=n["service.factoryPid"];a&&!i&&(i=a.Value);var s=e.getMetaTypeMBean(t.workspace);s&&t.jolokia.execute(s,"getPidMetaTypeObject",i,r,Core.onSuccess(p))}Core.$apply(t)}function p(e){t.metaType=e,h(),Core.$apply(t)}function h(){var n={},i=[];t.defaultValues={};var r={type:"object",required:i,properties:n},a="span12",o="control-label",s="",l=o,c=t.metaType;if(c){var u=e.configuration.pidMetadata,d=c.id;r.id=d,r.name=Core.pathGet(u,[d,"name"])||c.name,r.description=Core.pathGet(u,[d,"description"])||c.description;var p=Core.pathGet(u,[d,"schemaExtensions","disableHumanizeLabel"]);angular.forEach(c.attributes,function(e){var r=e.id;if(g(r)){var c=m(r,d),u=y(e.typeName,e.id),h={title:e.name,tooltip:e.description,"input-attributes":{"class":a},"label-attributes":{"class":o},type:u};p&&(h.title=r),"char"===e.typeName&&(h.maxLength=1,h.minLength=1);var f=e.cardinality;f&&(h["input-attributes"]["class"]=null,h.type="array",h.items={"input-attributes":{"class":s},"label-attributes":{"class":l},type:u}),e.required&&i.push(r);var v=e.defaultValue;v&&(angular.isArray(v)&&1===v.length&&(v=v[0]),t.defaultValues[c]=v);var b=e.optionLabels,w=e.optionValues;if(b&&b.length&&w&&w.length){for(var x={},k=0;k<b.length;k++){var C=b[k],S=w[k];x[S]=C}t.selectValues[c]=x,Core.pathSet(h,["input-element"],"select"),Core.pathSet(h,["input-attributes","ng-options"],"key as value for (key, value) in selectValues."+c)}n[c]=h}});var h=Core.pathGet(e.configuration.pidMetadata,[d,"schemaExtensions"]);h&&f(r,h)}var v={};angular.forEach(t.configValues,function(e,t){if(g(t)){var i=m(t,d),r=e,s="string";angular.isObject(e)&&(r=e.Value,s=y(e.Type,t));var l=n[i];if(l){var c=l.type;"array"===c&&(angular.isArray(r)||(r=r?r.split(","):[]))}else l={"input-attributes":{"class":a},"label-attributes":{"class":o},type:s},n[i]=l,"org.osgi.service.http.port"==t&&(n[i]["input-attributes"].disabled="disabled",n[i]["input-attributes"].title="Changing port of OSGi http service is not possible from Hawtio");p&&(l.title=t),i=i.replace(/-/g,"_"),v[i]=r}}),angular.forEach(t.defaultValues,function(e,t){var n=v[t];angular.isDefined(n)||(v[t]=e)}),t.entity=v,t.schema=r,t.fullSchema=r}function f(e,t){angular.isObject(e)&&angular.isObject(t)&&angular.forEach(t,function(t,n){if(angular.isObject(t)){var i=e[n];i||(i={},e[n]=i),f(i,t)}else e[n]=t})}function g(e){return e&&k.indexOf(e)<0}function m(e,t){return e.replace(/\./g,"__")}function v(e,t){return e.replace(/__/g,".")}function y(e,t){if(e){var n=e.toLowerCase();return n.startsWith("int")||"long"===n||"short"===n||"byte"===n||n.endsWith("int")?"integer":"double"===n||"float"===n||"bigdecimal"===n?"number":"string"===n?t&&t.endsWith("password")?"password":"string":e}return"string"}function b(){t.modelLoaded=!1,e.getConfigurationProperties(t.workspace,t.jolokia,t.pid,u);

}if(t.deletePropDialog=new UI.Dialog,t.deletePidDialog=new UI.Dialog,t.addPropertyDialog=new UI.Dialog,t.factoryPid=i.factoryPid,t.pid=i.pid,t.createForm={pidInstanceName:null},t.newPid=t.factoryPid&&!t.pid,t.newPid&&(t.editMode=!0),t.pid&&!t.factoryPid){var w=t.pid.indexOf("-");w>0&&(t.factoryPid=t.pid.substring(0,w),t.factoryInstanceName=t.pid.substring(w+1,t.pid.length))}t.selectValues={},t.modelLoaded=!1,t.canSave=!1,t.setEditMode=function(e){t.editMode=e,t.formMode=e?"edit":"view",e&&t.entity||(t.entity={},b())};var x=t.factoryPid&&!i.pid;t.setEditMode(x),t.$on("hawtio.form.modelChange",function(){t.modelLoaded&&(c(),Core.$apply(t))}),t.pidSave=function(){var n={};angular.forEach(t.entity,function(e,i){var r=void 0;angular.isString(e)?r=e:angular.isDefined(e)&&(r=e.toString()),angular.isDefined(r)&&(n[v(i,t.pid)]=r)});var i=e.getHawtioConfigAdminMBean(a);if(i||t.inFabricProfile){var r=e.getSelectionConfigAdminMBean(t.workspace),o=t.pid,c=t.zkPid,u=t.factoryPid;if(!t.inFabricProfile&&u&&r&&!c)t.jolokia.execute(r,"createFactoryConfiguration",u,Core.onSuccess(function(e){o=e,o&&s(i,o,n)},l("Failed to create new PID: ")));else{if(t.newPid){var d=t.createForm.pidInstanceName;if(!d||!u)return;o=u+"-"+d}else c&&(o=c);s(i,o,n)}}},t.addPropertyConfirmed=function(e,n){t.addPropertyDialog.close(),t.configValues[e]={Key:e,Value:n,Type:"String"},c(),h()},t.deletePidProp=function(e){t.deleteKey=e.Key,t.deletePropDialog.open()},t.deletePidPropConfirmed=function(){t.deletePropDialog.close();var e=document.getElementById("pid."+t.deleteKey);e.parentElement.remove(),c()},t.deletePidConfirmed=function(){function n(e){Core.notification("error",e.error)}function i(e){Core.notification("success","Successfully deleted pid: "+t.pid),r.path(t.configurationsLink)}t.deletePidDialog.close();var a=e.getSelectionConfigAdminMBean(t.workspace);a&&t.jolokia.request({type:"exec",mbean:a,operation:"delete",arguments:[t.pid]},{error:n,success:i})};var k=["service.pid","service.factoryPid","fabric.zookeeper.pid"];b()}])}(Osgi||(Osgi={}));var Osgi;!function(e){e.ServiceController=e._module.controller("Osgi.ServiceController",["$scope","$filter","workspace","$templateCache","$compile",function(t,n,i,r,a){function o(n){var r={},a=function(e){angular.forEach(e.value,function(e,t){var n={Identifier:e.Identifier,Name:"",SymbolicName:e.SymbolicName,State:e.State,Version:e.Version,LastModified:e.LastModified,Location:e.Location};e.Headers["Bundle-Name"]&&(n.Name=e.Headers["Bundle-Name"].Value),r[n.Identifier]=n}),angular.forEach(n,function(e,t){angular.forEach(e.UsingBundles,function(t,n){e.UsingBundles[n]=r[t]})}),t.services=n,Core.$apply(t)};i.jolokia.request({type:"exec",mbean:e.getSelectionBundleMBean(i),operation:"listBundles()"},{success:a,error:a})}n("date");t.services=[],t.selectedItems=[],t.mygrid={data:"services",showFilter:!1,showColumnMenu:!1,filterOptions:{filterText:"",useExternalFilter:!1},selectedItems:t.selectedItems,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"Identifier",displayName:"ID",width:"***"},{field:"BundleIdentifier",displayName:"Bundle",width:"***"},{field:"objectClass",displayName:"Object Class(es)",width:"***"}]},t.$watch("workspace.selection",function(){var t=e.getSelectionServiceMBean(i);if(t){var n=i.jolokia;n.request({type:"exec",mbean:t,operation:"listServices()"},Core.onSuccess(s))}});var s=function(n){var r=e.defaultServiceValues(i,t,n.value);o(r)}}])}(Osgi||(Osgi={}));var Osgi;!function(e){e._module.controller("Osgi.ServiceDependencyController",["$scope","$location","$routeParams","workspace","osgiDataService",function(t,n,i,r,a){t.init=function(){t.bundleFilter=i.bundleFilter?i.bundleFilter:"",t.packageFilter=i.pkgFilter?i.pkgFilter:"",t.selectView="packages"==i.view?"packages":"services",t.hideUnused=i.hideUnused?"true"==i.hideUnused:!0},t.updateLink=function(){var e=n.search();t.bundleFilter&&""!=t.bundleFilter?e.bundleFilter=t.bundleFilter:delete e.bundleFilter,t.packageFilter&&""!=t.packageFilter?e.pkgFilter=t.packageFilter:delete e.pkgFilter,e.view=t.selectView,e.hideUnused=t.hideUnused?"true":"false",n.search(e)},t.addToDashboardLink=function(){var e=angular.toJson(i),t="#/osgi/dependencies",n="OSGi dependencies",r=angular.toJson({size_x:2,size_y:2}),a="#/dashboard/add?tab=dashboard&href="+encodeURIComponent(t)+"&routeParams="+encodeURIComponent(e)+"&size="+encodeURIComponent(r)+"&title="+encodeURIComponent(n);return a},t.$on("$routeUpdate",function(){var e=n.search;t.bundleFilter=e.bundleFilter?i.bundleFilter:"",t.packageFilter=e.pkgFilter?i.pkgFilter:"",t.selectView="packages"==e.view?"packages":"services",t.hideUnused=e.hideUnused?"true"==i.hideUnused:!0,t.updateLink(),t.updateGraph()}),t.updateGraph=function(){t.updateLink(),t.updatePkgFilter();var n=new e.OsgiGraphBuilder(a,t.bundleFilter,t.packageFilter,"services"==t.selectView,"packages"==t.selectView,t.hideUnused);t.graph=n.buildGraph(),Core.$apply(t)},t.updatePkgFilter=function(){null==t.packageFilter||""==t.packageFilter?(t.selectView="services",t.disablePkg=!0):t.disablePkg=!1},t.init(),t.updateGraph()}])}(Osgi||(Osgi={})),angular.module("hawtio-integration-templates",[]).run(["$templateCache",function(e){e.put("plugins/activemq/html/browseQueue.html",'<div ng-controller="ActiveMQ.BrowseQueueController">\n  <div class="row">\n    <div class="col-md-6">\n      <input class="search-query col-md-12" type="text" ng-model="gridOptions.filterOptions.filterText"\n             placeholder="Filter messages">\n    </div>\n    <div class="col-md-6">\n      <div class="pull-right">\n        <form class="form-inline">\n          <button class="btn" ng-disabled="!gridOptions.selectedItems.length" ng-show="dlq" ng-click="retryMessages()"\n                  title="Moves the dead letter queue message back to its original destination so it can be retried" data-placement="bottom">\n            <i class="fa fa-reply"></i> Retry\n          </button>\n          <button class="btn" ng-disabled="gridOptions.selectedItems.length !== 1" ng-click="resendMessage()"\n                    title="Edit the message to resend it" data-placement="bottom">\n           <i class="fa fa-share-alt"></i> Resend\n          </button>\n\n          <button class="btn" ng-disabled="!gridOptions.selectedItems.length" ng-click="moveMessages()"\n                  title="Move the selected messages to another destination" data-placement="bottom">\n            <i class="fa fa-share-alt"></i> Move\n          </button>\n          <button class="btn" ng-disabled="!gridOptions.selectedItems.length"\n                  ng-click="deleteMessages()"\n                  title="Delete the selected messages">\n            <i class="fa fa-remove"></i> Delete\n          </button>\n          <button class="btn" ng-click="refresh()"\n                  title="Refreshes the list of messages">\n            <i class="fa fa-refresh"></i>\n          </button>\n        </form>\n      </div>\n    </div>\n  </div>\n\n  <div class="row">\n    <table class="table table-striped" hawtio-simple-table="gridOptions"></table>\n  </div>\n\n  <div hawtio-slideout="showMessageDetails" title="{{row.JMSMessageID}}">\n    <div class="dialog-body">\n\n      <div class="row">\n        <div class="pull-right">\n          <form class="form-horizontal no-bottom-margin">\n\n            <div class="btn-group"\n                 hawtio-pager="messages"\n                 on-index-change="selectRowIndex"\n                 row-index="rowIndex"></div>\n\n            <button class="btn" ng-disabled="!gridOptions.selectedItems.length" ng-click="moveMessages()"\n                    title="Move the selected messages to another destination" data-placement="bottom">\n              <i class="fa fa-share-alt"></i> Move\n            </button>\n\n            <button class="btn btn-danger" ng-disabled="!gridOptions.selectedItems.length"\n                    ng-click="deleteMessages()"\n                    title="Delete the selected messages">\n              <i class="fa fa-remove"></i> Delete\n            </button>\n\n            <!-- no need for close button as the hawtio-slideout already have that -->\n\n          </form>\n        </div>\n      </div>\n\n      <div class="row">\n        <div class="expandable closed">\n          <div title="Headers" class="title">\n            <i class="expandable-indicator"></i> Headers & Properties\n          </div>\n          <div class="expandable-body well">\n            <table class="table table-condensed table-striped">\n              <thead>\n              <tr>\n                <th>Header</th>\n                <th>Value</th>\n              </tr>\n              </thead>\n              <tbody compile="row.headerHtml"></tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n\n      <div class="row">\n        <div>Displaying body as <span ng-bind="row.textMode"></span></div>\n        <div hawtio-editor="row.bodyText" read-only="true" mode=\'mode\'></div>\n      </div>\n\n    </div>\n  </div>\n\n  <script type="text/ng-template" id="activemqMoveMessageDialog.html">\n    <div class="modal-header">\n      <span>Move messages?</span>\n    </div>\n    <div class="modal-body">\n      <p>Move\n        <ng-pluralize count="gridOptions.selectedItems.length"\n                      when="{\'1\': \'message\', \'other\': \'{} messages\'}"></ng-pluralize>\n        to: <input type="text" ng-model="queueName" placeholder="Queue name"\n                   typeahead="title.unescapeHTML() for title in queueNames($viewValue) | filter:$viewValue" typeahead-editable=\'true\'></p>\n      <p>\n        You cannot undo this operation.<br>\n        Though after the move you can always move the\n        <ng-pluralize count="gridOptions.selectedItems.length"\n                      when="{\'1\': \'message\', \'other\': \'messages\'}"></ng-pluralize>\n        back again.\n      </p>\n    </div>\n    <div class="modal-footer">\n      <button class="btn btn-info" \n              ng-click="close(true)">Move</button>\n      <button class="btn" \n              ng-click="close(false)">Cancel</button>\n    </div>\n  </script>\n\n</div>\n\n'),e.put("plugins/activemq/html/createDestination.html",'<form class="form-horizontal" ng-controller="ActiveMQ.DestinationController">\n\n  <div class="alert alert-info">\n    <span class="pficon pficon-info"></span>The JMS API does not define a standard address syntax. <p></p> Although a\n    standard address syntax was considered, it was decided that the differences in address semantics between existing\n    message-oriented middleware (MOM) products were too wide to bridge with a single syntax.\n  </div>\n\n  <div class="form-group">\n    <label class="col-sm-2 control-label" for="name-markup">{{destinationTypeName}} name</label>\n\n    <div class="col-sm-10">\n      <input id="name-markup" class="form-control" type="text" size="60" style="margin-left:15px;" maxlength="300"\n             name="destinationName" ng-model="destinationName" placeholder="{{destinationTypeName}} name"/>\n    </div>\n  </div>\n  <div class="form-group">\n    <label class="col-sm-2 control-label">Destination type</label>\n\n    <div class="col-sm-10">\n      <label class="checkbox">\n        <input type="radio" ng-model="queueType" value="true"> Queue\n      </label>\n      <label class="checkbox">\n        <input type="radio" ng-model="queueType" value="false"> Topic\n      </label>\n    </div>\n  </div>\n\n  <div class="control-group col-md-12">\n    <button type="submit" class="btn btn-primary" ng-click="createDestination(destinationName, queueType)"\n            ng-disabled="!destinationName">Create {{destinationTypeName}}\n    </button>\n  </div>\n\n</form>\n'),e.put("plugins/activemq/html/deleteQueue.html",'<div ng-controller="ActiveMQ.DestinationController">\n  <div class="row">\n\n    <div class="control-group">\n\n      <div class="alert alert-warning">\n        <span class="pficon-layered">\n          <span class="pficon pficon-warning-triangle"></span>\n          <span class="pficon pficon-warning-exclamation"></span>\n        </span>\n        <strong>Warning:</strong> these operations cannot be undone. Please be careful!\n      </div>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-md-4">\n      <div class="control-group">\n        <button type="submit" class="btn btn-warning" ng-click="deleteDialog = true">Delete queue\n          \'{{name().unescapeHTML()}}\'\n        </button>\n        <label>This will remove the queue completely.</label>\n      </div>\n    </div>\n    <div class="col-md-4">\n      <div class="control-group">\n        <button type="submit" class="btn btn-warning" ng-click="purgeDialog = true">Purge queue\n          \'{{name().unescapeHTML()}}\'\n        </button>\n        <label>Purges all the current messages on the queue.</label>\n      </div>\n    </div>\n  </div>\n\n  <div hawtio-confirm-dialog="deleteDialog"\n       title="Confirm delete queue"\n       ok-button-text="Delete"\n       cancel-button-text="Cancel"\n       on-ok="deleteDestination()">\n    <div class="dialog-body">\n      <p>You are about to delete the <b>{{name().unescapeHTML()}}</b> queue</p>\n      <p>This operation cannot be undone so please be careful.</p>\n    </div>\n  </div>\n\n  <div hawtio-confirm-dialog="purgeDialog"\n       title="Confirm purge queue"\n       ok-button-text="Purge"\n       cancel-button-text="Cancel"\n       on-ok="purgeDestination()">\n    <div class="dialog-body">\n      <p>You are about to purge the <b>{{name().unescapeHTML()}}</b> queue</p>\n      <p>This operation cannot be undone so please be careful.</p>\n    </div>\n  </div>\n\n</div>\n'),e.put("plugins/activemq/html/deleteTopic.html",'<div ng-controller="ActiveMQ.DestinationController">\n  <div class="row">\n\n    <div class="control-group">\n\n      <div class="alert alert-warning">\n        <span class="pficon-layered">\n          <span class="pficon pficon-warning-triangle"></span>\n          <span class="pficon pficon-warning-exclamation"></span>\n        </span>\n        <strong>Warning:</strong> this operation cannot be undone. Please be careful!\n      </div>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-md-4">\n      <div class="control-group">\n        <button type="submit" class="btn btn-warning" ng-click="deleteDialog = true">Delete topic\n          \'{{name().unescapeHTML()}}\'\n        </button>\n        <label>This will remove the topic completely.</label>\n      </div>\n    </div>\n  </div>\n\n  <div hawtio-confirm-dialog="deleteDialog"\n       title="Confirm delete topic"\n       ok-button-text="Delete"\n       cancel-button-text="Cancel"\n       on-ok="deleteDestination()">\n    <div class="dialog-body">\n      <p>You are about to delete the <b>{{name().unescapeHTML()}}</b> topic</p>\n      <p>This operation cannot be undone so please be careful.</p>\n    </div>\n  </div>\n\n</div>\n'),e.put("plugins/activemq/html/durableSubscribers.html",'<div ng-controller="ActiveMQ.DurableSubscriberController">\n\n    <div class="row">\n      <div class="col-md-12">\n        <div class="pull-right">\n            <form class="form-inline">\n                <button class="btn" ng-click="createSubscriberDialog.open()"\n                        hawtio-show object-name="{{workspace.selection.objectName}}" method-name="createDurableSubscriber"\n                        title="Create durable subscriber">\n                    <i class="fa fa-plus"></i> Create\n                </button>\n                <button class="btn" ng-click="deleteSubscriberDialog.open()"\n                        hawtio-show object-name="{{$scope.gridOptions.selectedItems[0]._id}}" method-name="destroy"\n                        title="Destroy durable subscriber" ng-disabled="gridOptions.selectedItems.length != 1">\n                    <i class="fa fa-exclamation"></i> Destroy\n                </button>\n                <button class="btn" ng-click="refresh()"\n                        title="Refreshes the list of subscribers">\n                    <i class="fa fa-refresh"></i>\n                </button>\n            </form>\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="gridStyle" ng-grid="gridOptions"></div>\n    </div>\n\n    <div modal="createSubscriberDialog.show">\n      <form name="createSubscriber" class="form-horizontal no-bottom-margin" ng-submit="doCreateSubscriber(clientId, subscriberName, topicName, subSelector)">\n        <div class="modal-header"><h4>Create Durable Subscriber</h4></div>\n        <div class="modal-body">\n          <label>Client Id: </label>\n          <input name="clientId" class="input-xlarge" type="text" ng-model="clientId" required>\n          <label>Subscriber name: </label>\n          <input name="subscriberName" class="input-xlarge" type="text" ng-model="subscriberName" required>\n          <label>Topic name: </label>\n          <input name="topicName" class="input-xlarge" type="text" ng-model="topicName" required typeahead="title for title in topicNames($viewValue) | filter:$viewValue" typeahead-editable=\'true\'>\n          <label>Selector: </label>\n          <input name="subSelector" class="input-xlarge" type="text" ng-model="subSelector">\n        </div>\n        <div class="modal-footer">\n          <input class="btn btn-success" type="submit" value="Create">\n          <input class="btn btn-primary" type="button" ng-click="createSubscriberDialog.close()" value="Cancel">\n        </div>\n      </form>\n    </div>\n\n    <div hawtio-slideout="showSubscriberDialog.show" title="Details">\n      <div class="dialog-body">\n\n        <div class="row">\n          <div class="pull-right">\n            <form class="form-inline">\n\n              <button class="btn btn-danger" ng-disabled="showSubscriberDialog.subscriber.Status == \'Active\'"\n                      ng-click="deleteSubscriberDialog.open()"\n                      title="Delete subscriber">\n                <i class="fa fa-remove"></i> Delete\n              </button>\n\n              <button class="btn" ng-click="showSubscriberDialog.close()" title="Close this dialog">\n                <i class="fa fa-remove"></i> Close\n              </button>\n\n            </form>\n          </div>\n        </div>\n\n          <div class="row">\n              <div class="expandable-body well">\n                <table class="table table-condensed table-striped">\n                  <thead>\n                  <tr>\n                    <th>Property</th>\n                    <th>Value</th>\n                  </tr>\n                  </thead>\n                  <tbody>\n                  <tr>\n                    <td class="property-name">Client Id</td>\n                    <td class="property-value">{{showSubscriberDialog.subscriber["ClientId"]}}</td>\n                  </tr>\n                  <tr>\n                    <td class="property-name">Subscription Name</td>\n                    <td class="property-value">{{showSubscriberDialog.subscriber["SubscriptionName"]}}</td>\n                  </tr>\n                  <tr>\n                    <td class="property-name">Topic Name</td>\n                    <td class="property-value">{{showSubscriberDialog.subscriber["DestinationName"]}}</td>\n                  </tr>\n                  <tr>\n                    <td class="property-name">Selector</td>\n                    <td class="property-value">{{showSubscriberDialog.subscriber["Selector"]}}</td>\n                  </tr>\n                  <tr>\n                    <td class="property-name">Status</td>\n                    <td class="property-value">{{showSubscriberDialog.subscriber.Status}}</td>\n                  </tr>\n                  <tr>\n                    <td class="property-name">Enqueue Counter</td>\n                    <td class="property-value">{{showSubscriberDialog.subscriber["EnqueueCounter"]}}</td>\n                  </tr>\n                  <tr>\n                    <td class="property-name">Dequeue Counter</td>\n                    <td class="property-value">{{showSubscriberDialog.subscriber["DequeueCounter"]}}</td>\n                  </tr>\n                  <tr>\n                    <td class="property-name">Dispatched Counter</td>\n                    <td class="property-value">{{showSubscriberDialog.subscriber["DispatchedCounter"]}}</td>\n                  </tr>\n                  <tr>\n                    <td class="property-name">Pending Size</td>\n                    <td class="property-value">{{showSubscriberDialog.subscriber["PendingQueueSize"]}}</td>\n                  </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n\n      </div>\n\n    </div>\n\n    <div hawtio-confirm-dialog="deleteSubscriberDialog.show" ok-button-text="Yes" cancel-button-text="No" on-ok="deleteSubscribers()">\n      <div class="dialog-body">\n        <p>Are you sure you want to delete the subscriber</p>\n      </div>\n    </div>\n\n</div>'),e.put("plugins/activemq/html/jobs.html",'<div ng-controller="ActiveMQ.JobSchedulerController">\n\n    <div class="row">\n      <div class="col-md-12">\n        <div class="pull-right">\n            <form class="form-inline">\n                <button class="btn" ng-disabled="!gridOptions.selectedItems.length"\n                        hawtio-show object-name="{{workspace.selection.objectName}}" method-name="removeJob"\n                        ng-click="deleteJobsDialog.open()"\n                        title="Delete the selected jobs">\n                  <i class="fa fa-remove"></i> Delete\n                </button>\n                <button class="btn" ng-click="refresh()"\n                        title="Refreshes the list of subscribers">\n                    <i class="fa fa-refresh"></i>\n                </button>\n            </form>\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="gridStyle" ng-grid="gridOptions"></div>\n    </div>\n\n    <div hawtio-confirm-dialog="deleteJobsDialog.show" ok-button-text="Yes" cancel-button-text="No" on-ok="deleteJobs()">\n      <div class="dialog-body">\n        <p>Are you sure you want to delete the jobs</p>\n      </div>\n    </div>\n\n</div>'),e.put("plugins/activemq/html/layoutActiveMQTree.html",'<script type="text/ng-template" id="ActiveMQTreeHeader.html">\n  <div class="tree-header" ng-controller="ActiveMQ.TreeHeaderController">\n    <div class="left">\n    </div>\n    <div class="right">\n      <i class="fa fa-chevron-down clickable"\n         title="Expand all nodes"\n         ng-click="expandAll()"></i>\n      <i class="fa fa-chevron-up clickable"\n         title="Unexpand all nodes"\n         ng-click="contractAll()"></i>\n    </div>\n  </div>\n</script>\n\n<hawtio-pane position="left" width="300" header="ActiveMQTreeHeader.html">\n  <div id="tree-container"\n       ng-controller="Jmx.MBeansController">\n    <div id="activemqtree"\n         ng-controller="ActiveMQ.TreeController"></div>\n  </div>\n</hawtio-pane>\n<div class="row">\n  <!--\n  <ng-include src="\'plugins/jmx/html/subLevelTabs.html\'"></ng-include>\n  -->\n  <div id="properties" ng-view></div>\n</div>\n'),e.put("plugins/activemq/html/preferences.html",'<div ng-controller="ActiveMQ.PreferencesController">\n  <div hawtio-form-2="config" entity="entity"></div>\n</div>\n'),e.put("plugins/camel/html/attributeToolBarContext.html",'<div class="row">\n  <div class="col-md-6" ng-controller="Camel.AttributesToolBarController">\n    <div class="control-group">\n      <button class="btn" ng-disabled="!anySelectionHasState([\'stop\', \'suspend\'])" ng-click="start()"><i\n              class="fa fa-play-circle"></i> Start\n      </button>\n      <button class="btn" ng-disabled="!anySelectionHasState(\'start\')" ng-click="pause()"><i class="fa fa-pause"></i>\n        Pause\n      </button>\n      <button class="btn" ng-disabled="!anySelectionHasState([\'start\', \'suspend\'])" ng-click="deleteDialog = true"><i\n              class="fa fa-remove"></i> Destroy\n      </button>\n    </div>\n\n    <div hawtio-confirm-dialog="deleteDialog"\n         ok-button-text="Delete"\n         on-ok="stop()">\n      <div class="dialog-body">\n        <p>You are about to delete this Camel Context.</p>\n        <p>This operation cannot be undone so please be careful.</p>\n      </div>\n    </div>\n\n  </div>\n  <div class="col-md-6">\n    <div class="control-group">\n      <input class="col-md-12 search-query" type="text" ng-model="$parent.gridOptions.filterOptions.filterText" placeholder="Filter...">\n    </div>\n  </div>\n</div>\n'),e.put("plugins/camel/html/attributeToolBarRoutes.html",'<div class="row">\n  <div class="col-md-6">\n    <div class="control-group"  ng-controller="Camel.AttributesToolBarController">\n      <button class="btn" ng-disabled="!anySelectionHasState([\'stop\', \'suspend\'])" ng-click="start()"><i class="fa fa-play-circle"></i> Start</button>\n      <button class="btn" ng-disabled="!anySelectionHasState(\'start\')" ng-click="pause()"><i class="fa fa-pause"></i> Pause</button>\n      <button class="btn" ng-disabled="!anySelectionHasState([\'start\', \'suspend\'])" ng-click="stop()"><i class="fa fa-off"></i> Stop</button>\n      <button class="btn" ng-disabled="!everySelectionHasState(\'stop\')" ng-click="delete()"><i class="fa fa-remove"></i> Delete</button>\n    </div>\n  </div>\n  <div class="col-md-6">\n    <div class="control-group">\n      <input type="text" class="col-md-12 search-query" ng-model="$parent.gridOptions.filterOptions.filterText" placeholder="Filter...">\n    </div>\n  </div>\n</div>\n'),e.put("plugins/camel/html/breadcrumbBar.html",'<div ng-hide="inDashboard" class="logbar logbar-wiki" ng-controller="Camel.BreadcrumbBarController">\n  <div class="wiki logbar-container">\n    <ul class="nav nav-tabs">\n      <li class="" >\n        <a class="breadcrumb-link">\n          <span class="contained c-medium">Camel Contexts</span>\n        </a>\n      </li>\n        <li class="dropdown" ng-repeat="breadcrumb in breadcrumbs">\n          <a ng-show="breadcrumb.items.length > 0" href="#" class="breadcrumb-link dropdown-toggle" data-toggle="dropdown"\n             data-placement="bottom" title="{{breadcrumb.tooltip}}">\n            {{breadcrumb.name}}\n            <span class="caret"></span>\n          </a>\n          <ul class="dropdown-menu">\n            <li ng-repeat="item in breadcrumb.items">\n              <a ng-href="{{item.link}}{{hash}}"\n                 title="Switch to {{item.name}} "\n                 data-placement="bottom">\n                {{item.name}}</a>\n            </li>\n          </ul>\n        </li>\n      <li class="pull-right" ng-show="treeViewLink" title="Switch to the tree based explorer view">\n        <a href="{{treeViewLink}}"><i class="fa fa-resize-full"></i></a>\n      </li>\n      </ul>\n  </div>\n</div>\n'),e.put("plugins/camel/html/browseEndpoint.html",'<div ng-controller="Camel.BrowseEndpointController">\n  <div ng-hide="isJmxTab">\n    <ng-include src="\'plugins/camel/html/breadcrumbBar.html\'"></ng-include>\n  </div>\n  <div ng-class="{\'wiki-fixed\' : !isJmxTab}">\n    <div class="row">\n      <div class="col-md-6">\n        <input class="search-query col-md-12" type="text" ng-model="gridOptions.filterOptions.filterText"\n               placeholder="Filter messages">\n      </div>\n      <div class="col-md-6">\n        <div class="pull-right">\n          <form class="form-inline">\n            <button class="btn" ng-disabled="!gridOptions.selectedItems.length" ng-click="forwardDialog.open()"\n                    hawtio-show object-name="{{workspace.selection.objectName}}" method-name="sendBodyAndHeaders"\n                    title="Forward the selected messages to another endpoint" data-placement="bottom">\n              <i class="fa fa-forward"></i> Forward\n            </button>\n            <button class="btn" ng-click="refresh()"\n                    title="Refreshes the list of messages">\n              <i class="fa fa-refresh"></i>\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n\n\n    <div class="row">\n      <table class="table table-striped" hawtio-simple-table="gridOptions"></table>\n    </div>\n\n    <div hawtio-slideout="showMessageDetails" title="{{row.id}}">\n      <div class="dialog-body">\n\n        <div class="row">\n          <div class="pull-right">\n            <form class="form-horizontal no-bottom-margin">\n              <div class="btn-group" hawtio-pager="messages" on-index-change="selectRowIndex"\n                   row-index="rowIndex"></div>\n              <button class="btn" ng-disabled="!gridOptions.selectedItems.length" ng-click="forwardDialog.open()"\n                      hawtio-show object-name="{{workspace.selection.objectName}}" method-name="sendBodyAndHeaders"\n                      title="Forward the selected messages to another endpoint" data-placement="bottom">\n                <i class="fa fa-forward"></i> Forward\n              </button>\n\n              <!-- no need for close button as the hawtio-slideout already have that -->\n\n            </form>\n          </div>\n        </div>\n\n        <div class="row">\n          <div class="expandable closed">\n            <div title="Headers" class="title">\n              <i class="expandable-indicator"></i> Headers\n            </div>\n            <div class="expandable-body well">\n              <table class="table table-condensed table-striped">\n                <thead>\n                <tr>\n                  <th>Header</th>\n                  <th>Type</th>\n                  <th>Value</th>\n                </tr>\n                </thead>\n                <tbody compile="row.headerHtml"></tbody>\n              </table>\n            </div>\n          </div>\n\n          <div class="row">\n            <div hawtio-editor="row.body" read-only="true" mode="mode"></div>\n          </div>\n\n        </div>\n\n      </div>\n    </div>\n  </div>\n\n  <div modal="forwardDialog.show" close="forwardDialog.close()" options="forwardDialog.options">\n    <form class="form-horizontal no-bottom-margin" ng-submit="forwardDialog.close()">\n      <div class="modal-header">\n        <h4>Forward\n          <ng-pluralize count="selectedItems.length"\n                        when="{\'1\': \'a message\', \'other\': \'messages\'}"></ng-pluralize>\n        </h4>\n      </div>\n      <div class="modal-body">\n        <p>Forward\n          <ng-pluralize count="selectedItems.length"\n                        when="{\'1\': \'a message\', \'other\': \'{} messages\'}"></ng-pluralize>\n          to: <input type="text" style="width: 100%" ng-model="endpointUri" placeholder="Endpoint URI"\n                     typeahead="title for title in endpointUris() | filter:$viewValue" typeahead-editable=\'true\'></p>\n      </div>\n      <div class="modal-footer">\n        <input id="submit" class="btn btn-primary add" type="submit" ng-click="forwardMessagesAndCloseForwardDialog()"\n               value="Forward">\n        <button class="btn btn-warning cancel" type="button" ng-click="forwardDialog.close()">Cancel</button>\n      </div>\n    </form>\n  </div>\n</div>\n'),e.put("plugins/camel/html/browseRoute.html",'<ng-include src="\'plugins/camel/html/browseMessageTemplate.html\'"></ng-include>\n\n<div class="row">\n  <table class="table table-striped" hawtio-simple-table="gridOptions"></table>\n  <!--\n      <div class="gridStyle" hawtio-datatable="gridOptions"></div>\n  -->\n</div>\n'),e.put("plugins/camel/html/createEndpoint.html",'<div ng-controller="Camel.EndpointController" ng-switch="hasComponentNames">\n  <div ng-switch-when="true">\n    <tabs>\n      <pane heading="URL">\n        <ng-include src="\'plugins/camel/html/createEndpointURL.html\'"></ng-include>\n      </pane>\n      <pane heading="Components">\n        <ng-include src="\'plugins/camel/html/createEndpointWizard.html\'"></ng-include>\n      </pane>\n    </tabs>\n  </div>\n  <div ng-switch-default="false">\n    <ng-include src="\'plugins/camel/html/createEndpointURL.html\'"></ng-include>\n  </div>\n</div>\n'),
e.put("plugins/camel/html/createEndpointURL.html",'<form class="form-horizontal">\n  <div class="control-group">\n    <input class="col-md-12" type="text" size="255" ng-model="endpointName" placeholder="Endpoint URI"/>\n  </div>\n  <div class="control-group">\n    <button type="submit" class="btn btn-info" ng-click="createEndpoint(endpointName)"\n            ng-disabled="!endpointName">\n      Create endpoint\n    </button>\n  </div>\n</form>\n'),e.put("plugins/camel/html/createEndpointWizard.html",'<div ng-controller="Camel.EndpointController">\n  <form class="form-horizontal">\n    <div class="control-group">\n      <label class="control-label" for="componentName">Component</label>\n\n      <div class="controls">\n        <select id="componentName" ng-model="selectedComponentName"\n                ng-options="componentName for componentName in componentNames"></select>\n      </div>\n    </div>\n    <div ng-show="selectedComponentName">\n      <div class="control-group">\n        <label class="control-label" for="endpointPath">Endpoint</label>\n\n        <div class="controls">\n          <input id="endpointPath" class="col-md-10" type="text" ng-model="endpointPath" placeholder="name"\n                 typeahead="title for title in endpointCompletions($viewValue) | filter:$viewValue" typeahead-editable=\'true\'\n                 min-length="1">\n        </div>\n      </div>\n\n      <div simple-form name="formEditor" entity=\'endpointParameters\' data=\'endpointSchema\' schema="schema"></div>\n\n      <div class="control-group">\n        <div class="controls">\n          <button type="submit" class="btn btn-info" ng-click="createEndpointFromData()"\n                  ng-disabled="!endpointPath || !selectedComponentName">\n            Create endpoint\n          </button>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n'),e.put("plugins/camel/html/debug.html",'<div ng-controller="Camel.DebugRouteController" ng-switch="debugging">\n  <div ng-switch-when="true">\n    <div class="row">\n      <div class="col-md-10">\n        <div ng-include src="graphView">\n        </div>\n      </div>\n      <div class="col-md-2">\n        <div class="btn-toolbar pull-right">\n          <div class="btn-group">\n            <div ng-switch="hasBreakpoint">\n              <button ng-switch-when="true" class="btn" ng-disabled="!selectedDiagramNodeId"\n                      ng-click="removeBreakpoint()" title="Remove the breakpoint on the selected node"><i\n                      class="fa fa-remove"></i>\n              </button>\n              <button ng-switch-default="false" class="btn" ng-disabled="!selectedDiagramNodeId"\n                      ng-click="addBreakpoint()" title="Add a breakpoint on the selected node"><i class="fa fa-plus"></i>\n              </button>\n            </div>\n          </div>\n          <div class="btn-group">\n            <button class="btn" type="submit" ng-click="stopDebugging()" title="Stops the debugger">Close\n            </button>\n          </div>\n        </div>\n        <div class="btn-toolbar pull-right">\n          <div class="btn-group">\n            <button class="btn" ng-click="step()" ng-disabled="!stopped" title="Step into the next node"><img\n                    ng-src="img/icons/camel/step.gif"></button>\n            <button class="btn" ng-click="resume()" ng-disabled="!stopped" title="Resume running"><img\n                    ng-src="img/icons/camel/resume.gif"></button>\n            <button class="btn" ng-click="suspend()" ng-disabled="stopped"\n                    title="Suspend all threads in this route"><img ng-src="img/icons/camel/suspend.gif"></button>\n          </div>\n        </div>\n        <div class="col-md-12 well">\n          <form>\n            <div class="table-header">Breakpoints:</div>\n            <ul>\n              <li class="table-row" ng-repeat="b in breakpoints">\n                {{b}}\n              </li>\n            </ul>\n            <div class="table-row">Suspended:</div>\n            <ul>\n              <li class="table-row" ng-repeat="b in suspendedBreakpoints">\n                {{b}}\n              </li>\n            </ul>\n          </form>\n        </div>\n      </div>\n    </div>\n\n    <!-- slider to always show the current debugged message -->\n    <div hawtio-slideout="true" title="Breakpoint suspended at {{row.toNode}}" close="false" top="60%" height="40%">\n      <div class="dialog-body">\n\n        <div title="ID" class="title">\n          {{row.id}}\n        </div>\n\n        <div class="row">\n          <div class="expandable closed">\n            <div title="Headers" class="title">\n              <i class="expandable-indicator"></i> Headers\n            </div>\n            <div class="expandable-body well">\n              <table class="table table-condensed table-striped">\n                <thead>\n                <tr>\n                  <th>Header</th>\n                  <th>Type</th>\n                  <th>Value</th>\n                </tr>\n                </thead>\n                <tbody compile="row.headerHtml"></tbody>\n              </table>\n            </div>\n          </div>\n\n          <div title="Body" class="row">\n            <div>Body type: <span ng-bind="row.bodyType"></span></div>\n            <div hawtio-editor="row.body" read-only="true" mode="mode"></div>\n          </div>\n\n        </div>\n\n      </div>\n    </div>\n\n  </div>\n  <div class="col-md-12 well" ng-switch-default="false">\n    <form>\n      <p>Debugging allows you to step through camel routes to diagnose issues</p>\n\n      <button class="btn btn-info" type="submit" ng-click="startDebugging()">Start debugging</button>\n    </form>\n  </div>\n</div>'),e.put("plugins/camel/html/inflight.html",'<div class="row-fluid" ng-controller="Camel.InflightController">\n\n  <div ng-show="initDone">\n\n    <div class="row-fluid">\n      <div class="pull-right">\n        <hawtio-filter ng-model="gridOptions.filterOptions.filterText"\n                       placeholder="Filter..."></hawtio-filter>\n      </div>\n    </div>\n\n    <div class="row-fluid">\n      <table class="table table-condensed table-striped" hawtio-simple-table="gridOptions"></table>\n    </div>\n\n  </div>\n\n  <div ng-hide="initDone">\n    <p class="text-center"><i class="fa fa-spinner fa-spin"></i></p>\n  </div>\n\n</div>\n\n'),e.put("plugins/camel/html/layoutCamelTree.html",'\n<script type="text/ng-template" id="camelTreeHeader.html">\n  <div class="camel tree-header" ng-controller="Camel.TreeHeaderController">\n\n    <!--\n    TODO - changes to the tree made this filter not work\n    <div class="left">\n      <div class="section-filter">\n        <input id="camelContextIdFilter"\n               class="search-query"\n               type="text"\n               ng-model="contextFilterText"\n               title="filter camel context IDs"\n               placeholder="Filter...">\n        <i class="fa fa-remove clickable"\n           title="Clear filter"\n           ng-click="contextFilterText = \'\'"></i>\n      </div>\n    </div>\n    -->\n\n    <div class="right">\n      <i class="fa fa-chevron-down clickable"\n         title="Expand all nodes"\n         ng-click="expandAll()"></i>\n      <i class="fa fa-chevron-up clickable"\n         title="Unexpand all nodes"\n         ng-click="contractAll()"></i>\n    </div>\n  </div>\n</script>\n\n<hawtio-pane position="left" width="300" header="camelTreeHeader.html">\n  <div id="tree-container" ng-controller="Jmx.MBeansController">\n    <div class="camel-tree" ng-controller="Camel.TreeController">\n      <div id="cameltree"></div>\n    </div>\n  </div>\n</hawtio-pane>\n<div class="row">\n  <!--\n  <ng-include src="\'plugins/jmx/html/subLevelTabs.html\'"></ng-include>\n  -->\n  <div id="properties" ng-view></div>\n</div>\n'),e.put("plugins/camel/html/nodePropertiesEdit.html",'<div class="row-fluid">\n\n  <!-- the label and input fields needs to be wider -->\n  <style>\n    input, textarea, .uneditable-input {\n      width: 600px;\n    }\n    input, textarea, .editable-input {\n      width: 600px;\n    }\n\n    .form-horizontal .control-label {\n      width: 180px;\n    }\n\n    .form-horizontal .controls {\n      margin-left: 200px;\n    }\n  </style>\n\n  <h3>\n    <img src="{{icon}}" width="48" height="48" ng-show="icon"/> {{model.title}}\n    <span style="margin-left: 10px" ng-repeat="label in labels track by $index" class="pod-label badge" title="{{label}}">{{label}}</span>\n  </h3>\n\n  <div simple-form name="formViewer" mode=\'edit\' entity=\'nodeData\' data=\'model\' schema="schema"\n       showhelp="!hideHelp"></div>\n</div>\n'),e.put("plugins/camel/html/nodePropertiesView.html",'<div class="row-fluid">\n\n  <!-- the label and input fields needs to be wider -->\n  <style>\n    input, textarea, .uneditable-input {\n      width: 600px;\n    }\n\n    input, textarea, .editable-input {\n      width: 600px;\n    }\n\n    .form-horizontal .control-label {\n      width: 180px;\n    }\n\n    .form-horizontal .controls {\n      margin-left: 200px;\n    }\n  </style>\n\n  <h3>\n    <img src="{{icon}}" width="48" height="48" ng-show="icon"/> {{model.title}}\n    <span style="margin-left: 10px" ng-repeat="label in labels track by $index" class="pod-label badge" title="{{label}}">{{label}}</span>\n  </h3>\n\n  <div simple-form name="formViewer" mode=\'view\' entity=\'nodeData\' data=\'model\' schema="schema"\n       showhelp="!hideHelp" showempty="showEntity"></div>\n</div>\n'),e.put("plugins/camel/html/preferences.html",'<div ng-controller="Camel.PreferencesController">\n  <div hawtio-form-2="config" entity="entity"></div>\n</div>\n'),e.put("plugins/camel/html/profileRoute.html",'<div class="row" ng-controller="Camel.ProfileRouteController">\n\n    <div ng-show="initDone">\n\n        <div class="row-fluid">\n            <div class="pull-right">\n                <hawtio-filter ng-model="gridOptions.filterOptions.filterText"\n                               placeholder="Filter..."></hawtio-filter>\n            </div>\n        </div>\n\n        <div class="row-fluid">\n            <table class="table table-condensed table-striped" hawtio-simple-table="gridOptions"></table>\n        </div>\n\n    </div>\n\n    <div ng-hide="initDone">\n        <p class="text-center"><i class="fa fa-spinner fa-spin"></i></p>\n    </div>\n\n</div>\n\n'),e.put("plugins/camel/html/properties.html",'<div ng-controller="Camel.PropertiesController">\n\n  <div class="control-group inline-block">\n    <form class="form-inline no-bottom-margin">\n      <label>Hide Documentation:\n        <input type="checkbox" ng-model="hideHelp"\n               title="Hide documentation for the options"/>\n      </label>\n      <label>Hide Default:\n        <input type="checkbox" ng-model="hideDefault"\n               title="Hide options with default values"/>\n      </label>\n      <label>Hide Unused:\n        <input type="checkbox" ng-model="hideUnused"\n               title="Hide options with unused/empty values"/>\n      </label>\n    </form>\n  </div>\n\n  <div ng-include="viewTemplate"></div>\n</div>\n'),e.put("plugins/camel/html/propertiesComponent.html",'<div ng-controller="Camel.PropertiesComponentController">\n\n  <div class="control-group inline-block">\n    <form class="form-inline no-bottom-margin">\n      <label>Hide Documentation:\n        <input type="checkbox" ng-model="hideHelp"\n               title="Hide documentation for the options"/>\n      </label>\n      <label>Hide Default:\n        <input type="checkbox" ng-model="hideDefault"\n               title="Hide options with default values"/>\n      </label>\n      <label>Hide Unused:\n        <input type="checkbox" ng-model="hideUnused"\n               title="Hide options with unused/empty values"/>\n      </label>\n    </form>\n  </div>\n\n  <div ng-include="viewTemplate"></div>\n</div>\n'),e.put("plugins/camel/html/propertiesEndpoint.html",'<div ng-controller="Camel.PropertiesEndpointController">\n\n  <div class="control-group inline-block">\n    <form class="form-inline no-bottom-margin">\n      <label>Hide Documentation:\n        <input type="checkbox" ng-model="hideHelp"\n               title="Hide documentation for the options"/>\n      </label>\n      <label>Hide Default:\n        <input type="checkbox" ng-model="hideDefault"\n               title="Hide options with default values"/>\n      </label>\n      <label>Hide Unused:\n        <input type="checkbox" ng-model="hideUnused"\n               title="Hide options with unused/empty values"/>\n      </label>\n    </form>\n  </div>\n\n  <div ng-include="viewTemplate"></div>\n</div>\n'),e.put("plugins/camel/html/restRegistry.html",'<div class="row" ng-controller="Camel.RestServiceController">\n\n  <div ng-show="selectedMBean">\n\n    <div class="row" ng-show="data.length > 0">\n      <div class="pull-right">\n        <form class="form-inline no-bottom-margin">\n          <fieldset>\n            <div class="control-group inline-block">\n              <input type="text" class="search-query" placeholder="Filter..."\n                     ng-model="gridOptions.filterOptions.filterText">\n            </div>\n          </fieldset>\n        </form>\n      </div>\n    </div>\n\n    <div class="row" ng-show="data.length > 0">\n      <table class="table table-condensed table-striped" hawtio-simple-table="gridOptions"></table>\n    </div>\n    <div class="row well" ng-show="data.length == 0">\n      <form>\n        <p>There are no Rest Services registered in this CamelContext.</p>\n      </form>\n    </div>\n  </div>\n\n  <div ng-hide="selectedMBean">\n    <p class="text-center"><i class="fa fa-spinner fa-spin"></i></p>\n  </div>\n\n</div>\n\n'),e.put("plugins/camel/html/routeMetrics.html",'<div class="row" ng-controller="Camel.RouteMetricsController">\n\n  <div class="row">\n    <div class="pull-right">\n      <form class="form-inline no-bottom-margin">\n        <fieldset>\n          <div class="control-group inline-block">\n            <input type="text" class="search-query" placeholder="Filter..." ng-model="filterText">\n          </div>\n        </fieldset>\n      </form>\n    </div>\n  </div>\n\n  <div class="row" ng-show="!initDone">\n    <p class="text-center"><i class="fa fa-spinner fa-spin"></i></p>\n  </div>\n\n  <div class="col-md-8 centered well" ng-show="initDone && metricDivs.length === 0">\n    <form>\n      This Camel context has no route metrics data.\n    </form>\n  </div>\n\n  <!-- div to contain the graphs -->\n  <div class="metricsWatcher container mainContent">\n    <div id="{{metric.id}}" class="row" ng-repeat="metric in metricDivs track by $index" style="{{filterByRoute(metric)}}"></div>\n  </div>\n\n</div>\n\n'),e.put("plugins/camel/html/routes.html",'<style>\n\n  #node-CLOSED rect {\n    stroke-width: 1px;\n    fill: #f88;\n  }\n\n  .node:hover,\n  .node > *:hover,\n  rect > *:hover {\n    cursor: pointer;\n    opacity: 0.6;\n  }\n\n  path.edge {\n    fill: none;\n    stroke: #666;\n    stroke-width: 3px;\n  }\n\n  .edge:hover {\n    cursor: pointer;\n    opacity: 0.4;\n  }\n\n  text.counter {\n    stroke: #080;\n  }\n\n  text.inflight {\n    stroke: #08f;\n  }\n</style>\n<div ng-class="{\'wiki-fixed\' : !isJmxTab}" id="canvas" ng-controller="Camel.RouteController">\n  <!--\n  <div ng-hide="isJmxTab">\n    <ng-include src="\'plugins/camel/html/breadcrumbBar.html\'"></ng-include>\n  </div>\n  -->\n  <svg class="camel-diagram" width=0 height=0>\n    <defs>\n      <marker id="arrowhead"\n              viewBox="0 0 10 10"\n              refX="8"\n              refY="5"\n              markerUnits="strokeWidth"\n              markerWidth="4"\n              markerHeight="3"\n              orient="auto"\n              style="fill: #333">\n        <path d="M 0 0 L 10 5 L 0 10 z"></path>\n      </marker>\n\n      <filter id="drop-shadow" width="300%" height="300%">\n        <feGaussianBlur in="SourceAlpha" result="blur-out" stdDeviation="19"/>\n        <feOffset in="blur-out" result="the-shadow" dx="2" dy="2"/>\n        <feComponentTransfer xmlns="http://www.w3.org/2000/svg">\n          <feFuncA type="linear" slope="0.2"/>\n        </feComponentTransfer>\n        <feMerge xmlns="http://www.w3.org/2000/svg">\n          <feMergeNode/>\n          <feMergeNode in="SourceGraphic"/>\n        </feMerge>\n      </filter>\n      <linearGradient id="rect-gradient" x1="0%" y1="0%" x2="0%" y2="100%">\n        <stop offset="0%" style="stop-color:rgb(254,254,255);stop-opacity:1"/>\n        <stop offset="100%" style="stop-color:rgb(247,247,255);stop-opacity:1"/>\n      </linearGradient>\n      <linearGradient id="rect-select-gradient" x1="0%" y1="0%" x2="0%" y2="100%">\n        <stop offset="0%" style="stop-color: #ffffa0; stop-opacity: 0.7"/>\n        <stop offset="100%" style="stop-color: #f0f0a0; stop-opacity: 0.7"/>\n      </linearGradient>\n    </defs>\n  </svg>\n</div>\n\n'),e.put("plugins/camel/html/sendMessage.html",'<div ng-controller="Camel.SendMessageController">\n\n  <div class="tabbable" ng-model="tab">\n\n    <div value="compose" class="tab-pane" title="Compose">\n      <div class="row">\n        <span ng-show="noCredentials" class="alert">\n          No credentials set for endpoint!  Please set your username and password in the <a\n            href="" ng-click="openPrefs()">Preferences</a> page\n        </span>\n\n        <form class="form-inline pull-right">\n          <button class="btn" ng-click="addHeader()" title="Add a new message header"><i\n              class="fa fa-plus"></i> Header\n          </button>\n          <button type="submit" class="btn btn-primary" ng-click="sendMessage()">Send message</button>\n        </form>\n      </div>\n\n      <form class="form-inline bottom-margin" ng-submit="addHeader()">\n        <ol class="zebra-list header-list">\n          <div class="row">\n            <li ng-repeat="header in headers">\n              <div class="col-md-4">\n                <input type="text" style="width: 100%" class="headerName"\n                       ng-model="header.name"\n                       typeahead="completion for completion in defaultHeaderNames() | filter:$viewValue"\n                       typeahead-editable=\'true\'\n                       placeholder="Header name">\n              </div>\n              <div class="col-md-6">\n                <input type="text" style="width: 100%" ng-model="header.value"\n                       placeholder="Value of the message header">\n              </div>\n              <div class="col-md-2">\n                <button type="submit" class="btn" title="Add a new message header">\n                  <i class="fa fa-plus"></i>\n                </button>\n                <button type="button" ng-click="removeHeader(header)" class="btn" title="Removes this message header">\n                  <i class="fa fa-remove"></i>\n                </button>\n              </div>\n            </li>\n          </div>\n        </ol>\n      </form>\n\n      <div class="row">\n        <form class="form-inline">\n          <div class="controls">\n            <label class="control-label" for="sourceFormat" title="The text format to use for the message payload">Payload\n              format: </label>\n            <select ng-model="codeMirrorOptions.mode.name" id="sourceFormat">\n              <option value="javascript">JSON</option>\n              <option value="text" selected>Plain text</option>\n              <option value="properties">Properties</option>\n              <option value="xml">XML</option>\n            </select>\n\n            <button class="btn" ng-click="autoFormat()"\n                    title="Automatically pretty prints the message so its easier to read">Auto format\n            </button>\n          </div>\n        </form>\n      </div>\n\n      <div class="row">\n        <div hawtio-editor="message" mode="codeMirrorOptions.mode.name"></div>\n        <!--\n        <textarea ui-codemirror="codeMirrorOptions" ng-model="message"></textarea>\n        -->\n      </div>\n    </div>\n\n  </div>\n</div>\n'),e.put("plugins/camel/html/source.html",'<div class="form-horizontal" ng-controller="Camel.SourceController">\n  <div class="row">\n    <div class="col-md-12">\n      <button class="pull-right btn btn-primary"\n              hawtio-show object-name="{{getSelectionCamelContextMBean(workspace)}}" method-name="addOrUpdateRoutesFromXml"\n              ng-click="saveRouteXml()"><i class="fa fa-save"></i> Update</button>\n    </div>\n  </div>\n  <p></p>\n  <div class="row">\n    <div class="col-md-12">\n      <div hawtio-editor="source" mode="mode"></div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/camel/html/traceRoute.html",'<div ng-controller="Camel.TraceRouteController">\n  <div class="col-md-12 well" ng-hide="tracing">\n    <form>\n      <p>Tracing allows you to send messages to a route and then step through and see the messages flow through a route\n        to aid debugging and to help diagnose issues.</p>\n\n      <p>Once you start tracing, you can send messages to the input endpoints, then come back to this page and see the\n        flow of messages through your route.</p>\n\n      <p>As you click on the message table, you can see which node in the flow it came through; moving the selection up\n        and down in the message table lets you see the flow of the message through the diagram.</p>\n\n      <button class="btn btn-info" type="submit" ng-click="startTracing()">Start tracing</button>\n    </form>\n  </div>\n  <div ng-show="tracing">\n\n    <form>\n      <button class="btn btn-info pull-right" type="submit" ng-click="stopTracing()">Stop tracing</button>\n    </form>\n    <div ng-include src="graphView">\n    </div>\n\n    <form>\n      <button class="btn btn-info pull-right" type="submit" ng-click="clear()">Clear messages</button>\n    </form>\n    <div>&nbsp;</div>\n\n    <!-- table and slider to show the traced messages -->\n    <div class="row">\n      <table class="table table-striped" hawtio-simple-table="gridOptions"></table>\n    </div>\n\n    <div hawtio-slideout="showMessageDetails" title="{{row.id}}" top="60%" height="40%">\n      <div class="dialog-body">\n\n        <div class="row">\n          <div class="pull-right">\n            <form class="form-horizontal no-bottom-margin">\n              <div class="btn-group" hawtio-pager="messages" on-index-change="selectRowIndex"\n                   row-index="rowIndex"></div>\n\n              <!-- no need for close button as the hawtio-slideout already have that -->\n\n            </form>\n          </div>\n        </div>\n\n        <div class="row">\n          <div class="expandable closed">\n            <div title="Headers" class="title">\n              <i class="expandable-indicator"></i> Headers\n            </div>\n            <div class="expandable-body well">\n              <table class="table table-condensed table-striped">\n                <thead>\n                <tr>\n                  <th>Header</th>\n                  <th>Type</th>\n                  <th>Value</th>\n                </tr>\n                </thead>\n                <tbody compile="row.headerHtml"></tbody>\n              </table>\n            </div>\n          </div>\n\n          <div class="row">\n            <div>Body type: <span ng-bind="row.bodyType"></span></div>\n            <div hawtio-editor="row.body" read-only="true" mode="mode"></div>\n          </div>\n\n        </div>\n\n      </div>\n    </div>\n\n  </div>\n\n</div>\n'),e.put("plugins/camel/html/typeConverter.html",'<div class="row" ng-controller="Camel.TypeConverterController">\n\n  <!-- the dl need to be wider so we can see the labels -->\n  <style>\n    .dl-horizontal dt {\n      width: 260px;\n    }\n    .dl-horizontal dd {\n      margin-left: 280px;\n    }\n  </style>\n\n  <div ng-show="selectedMBean">\n\n    <div class="row">\n\n      <div class="pull-right">\n        <form class="form-inline no-bottom-margin">\n          <fieldset>\n            <div class="controls control-group inline-block controls-row">\n              <div class="btn-group">\n                <button\n                    class="btn" ng-click="resetStatistics()" title="Reset statistics">\n                  <i class="fa fa-refresh"></i></button>\n                <button\n                    ng-disabled="mbeanAttributes.StatisticsEnabled"\n                    class="btn" ng-click="enableStatistics()" title="Enable statistics">\n                  <i class="fa fa-play-circle"></i></button>\n                <button\n                    ng-disabled="!mbeanAttributes.StatisticsEnabled"\n                    class="btn" ng-click="disableStatistics()" title="Disable statistics">\n                  <i class="fa fa-power-off"></i></button>\n              </div>\n            </div>\n          </fieldset>\n        </form>\n      </div>\n      <div>\n        <dl class="dl-horizontal">\n          <dt>Number of Type Converters</dt>\n          <dd>{{mbeanAttributes.NumberOfTypeConverters}}</dd>\n          <dt># Attempts</dt>\n          <dd>{{mbeanAttributes.AttemptCounter}}</dd>\n          <dt># Hit</dt>\n          <dd>{{mbeanAttributes.HitCounter}}</dd>\n          <dt># Miss</dt>\n          <dd>{{mbeanAttributes.MissCounter}}</dd>\n          <dt># Failed</dt>\n          <dd>{{mbeanAttributes.FailedCounter}}</dd>\n          <dt>Statistics Enabled</dt>\n          <dd>{{mbeanAttributes.StatisticsEnabled}}</dd>\n        </dl>\n      </div>\n\n    </div>\n\n    <div class="row">\n      <div class="pull-right">\n        <form class="form-inline no-bottom-margin">\n          <fieldset>\n            <div class="control-group inline-block">\n              <input type="text" class="search-query" placeholder="Filter..."\n                     ng-model="gridOptions.filterOptions.filterText">\n            </div>\n          </fieldset>\n        </form>\n      </div>\n    </div>\n\n    <div class="row" ng-show="data.length > 0">\n      <table class="table table-condensed table-striped" hawtio-simple-table="gridOptions"></table>\n    </div>\n    <div class="row" ng-show="data.length == 0">\n      <p class="text-center"><i class="fa fa-spinner fa-spin"></i></p>\n    </div>\n\n  </div>\n\n</div>\n\n'),e.put("plugins/karaf/html/feature-details.html",'<div>\n    <table class="overviewSection">\n        <tr ng-hide="hasFabric">\n            <td></td>\n            <td class="less-big">\n                <div class="btn-group">\n                  <button ng-click="uninstall(name,version)" \n                          class="btn" \n                          title="uninstall" \n                          hawtio-show\n                          object-name="{{featuresMBean}"\n                          method-name="uninstallFeature">\n                    <i class="fa fa-off"></i>\n                  </button>\n                  <button ng-click="install(name,version)" \n                          class="btn" \n                          title="install" \n                          hawtio-show\n                          object-name="{{featuresMBean}"\n                          method-name="installFeature">\n                    <i class=icon-play-circle"></i>\n                  </button>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class="pull-right"><strong>Name:</strong></td>\n            <td class="less-big">{{row.Name}}\n            </td>\n        </tr>\n        <tr>\n            <td class="pull-right"><strong>Version:</strong></td>\n            <td class="less-big">{{row.Version}}\n            </td>\n        </tr>\n        <tr>\n            <td class="pull-right"><strong>Repository:</strong></td>\n            <td class="less-big">{{row.RepositoryName}}\n            </td>\n        </tr>\n        <tr>\n          <td class="pull-right"><strong>Repository URI:</strong></td>\n          <td class="less-big">{{row.RepositoryURI}}\n          </td>\n        </tr>\n        <tr>\n            <td class="pull-right"><strong>State:</strong></td>\n            <td class="wrap">\n                <div ng-switch="row.Installed">\n                    <p style="display: inline;" ng-switch-when="true">Installed</p>\n\n                    <p style="display: inline;" ng-switch-default>Not Installed</p>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td>\n            </td>\n            <td>\n                <div class="accordion" id="accordionFeatures">\n                    <div class="accordion-group">\n                        <div class="accordion-heading">\n                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionFeatures"\n                               href="#collapseFeatures">\n                                Features\n                            </a>\n                        </div>\n                        <div id="collapseFeatures" class="accordion-body collapse in">\n                            <ul class="accordion-inner">\n                                <li ng-repeat="feature in row.Dependencies">\n                                    <a href=\'#/osgi/feature/{{feature.Name}}/{{feature.Version}}?p=container\'>{{feature.Name}}/{{feature.Version}}</a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td>\n            </td>\n            <td>\n                <div class="accordion" id="accordionBundles">\n                    <div class="accordion-group">\n                        <div class="accordion-heading">\n                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionBundles"\n                               href="#collapseBundles">\n                                Bundles\n                            </a>\n                        </div>\n                        <div id="collapseBundles" class="accordion-body collapse in">\n                            <ul class="accordion-inner">\n                                <li ng-repeat="bundle in row.BundleDetails">\n                                    <div ng-switch="bundle.Installed">\n                                        <p style="display: inline;" ng-switch-when="true">\n                                            <a href=\'#/osgi/bundle/{{bundle.Identifier}}?p=container\'>{{bundle.Location}}</a></p>\n\n                                        <p style="display: inline;" ng-switch-default>{{bundle.Location}}</p>\n                                    </div>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td>\n            </td>\n            <td>\n                <div class="accordion" id="accordionConfigurations">\n                    <div class="accordion-group">\n                        <div class="accordion-heading">\n                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionConfigurations"\n                               href="#collapsConfigurations">\n                                Configurations\n                            </a>\n                        </div>\n                        <div id="collapsConfigurations" class="accordion-body collapse in">\n                            <table class="accordion-inner">\n                                <tr ng-repeat="(pid, value) in row.Configurations">\n                                    <td>\n                                      <p>{{value.Pid}}</p>\n                                      <div hawtio-editor="toProperties(value.Elements)" mode="props"></div></td>\n                                </tr>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td>\n            </td>\n            <td>\n                <div class="accordion" id="accordionConfigurationFiles">\n                    <div class="accordion-group">\n                        <div class="accordion-heading">\n                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionConfigurationFiles"\n                               href="#collapsConfigurationFiles">\n                                Configuration Files\n                            </a>\n                        </div>\n                        <div id="collapsConfigurationFiles" class="accordion-body collapse in">\n                            <table class="accordion-inner">\n                                <tr ng-repeat="file in row.Files">\n                                    <td>{{file.Files}}</td>\n                                </tr>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </td>\n        </tr>\n    </table>\n</div>\n'),
e.put("plugins/karaf/html/feature.html",'<div class="controller-section" ng-controller="Karaf.FeatureController">\n  <div class="row">\n    <div class="col-md-4">\n      <h1>{{row.id}}</h1>\n    </div>\n  </div>\n\n  <div ng-include src="\'plugins/karaf/html/feature-details.html\'"></div>\n\n</div>\n\n'),e.put("plugins/karaf/html/features.html",'<div class="controller-section" ng-controller="Karaf.FeaturesController">\n\n  <div class="row section-filter">\n    <input type="text" class="col-md-12 search-query" placeholder="Filter..." ng-model="filter">\n    <i class="fa fa-remove clickable" title="Clear filter" ng-click="filter = \'\'"></i>\n  </div>\n\n  <script type="text/ng-template" id="popoverTemplate">\n    <small>\n      <table class="table">\n        <tbody>\n        <tr ng-repeat="(k, v) in feature track by $index" ng-show="showRow(k, v)">\n          <td class="property-name">{{k}}</td>\n          <td class="property-value" ng-bind-html-unsafe="showValue(v)"></td>\n        </tr>\n        </tbody>\n      </table>\n    </small>\n  </script>\n\n  <p></p>\n  <div class="row">\n    <div class="col-md-6">\n      <h3 class="centered">Installed Features</h3>\n      <div ng-show="featuresError" class="alert alert-warning">\n        The feature list returned by the server was null, please check the logs and Karaf console for errors.\n      </div>\n      <div class="bundle-list"\n           hawtio-auto-columns=".bundle-item">\n        <div ng-repeat="feature in installedFeatures"\n             class="bundle-item"\n             ng-show="filterFeature(feature)"\n             ng-class="inSelectedRepository(feature)">\n          <a ng-href="#/osgi/feature/{{feature.Id}}?p=container"\n             hawtio-template-popover title="Feature details">\n            <span class="badge" ng-class="getStateStyle(feature)">{{feature.Name}} / {{feature.Version}}</span>\n          </a>\n          <span ng-hide="hasFabric">\n            <a class="toggle-action"\n               href=""\n               ng-show="installed(feature.Installed)"\n               ng-click="uninstall(feature)"\n               hawtio-show\n               object-name="{{featuresMBean}"\n               method-name="uninstallFeature">\n              <i class="fa fa-power-off"></i>\n            </a>\n            <a class="toggle-action"\n               href=""\n               ng-hide="installed(feature.Installed)"\n               ng-click="install(feature)"\n               hawtio-show\n               object-name="{{featuresMBean}"\n               method-name="installFeature">\n              <i class="fa fa-play-circle"></i>\n            </a>\n          </span>\n        </div>\n      </div>\n    </div>\n\n    <div class="col-md-6">\n      <h3 class="centered">Available Features</h3>\n      <div class="row repository-browser-toolbar centered">\n        <select id="repos"\n                class="input-xlarge"\n                title="Feature repositories"\n                ng-model="selectedRepository"\n                ng-options="r.repository for r in repositories"></select>\n        <button class="btn"\n                title="Remove selected feature repository"\n                ng-click="uninstallRepository()"\n                ng-hide="hasFabric"\n                hawtio-show\n                object-name="{{featuresMBean}}"\n                method-name="removeRepository"><i class="fa fa-remove-sign"></i></button>\n        <input type="text"\n               class="input-xlarge"\n               placeholder="mvn:foo/bar/1.0/xml/features"\n               title="New feature repository URL"\n               ng-model="newRepositoryURI"\n               ng-hide="hasFabric"\n               hawtio-show\n               object-name="{{featuresMBean}}"\n               method-name="addRepository">\n        <button class="btn"\n                title="Add feature repository URL"\n                ng-hide="hasFabric"\n                ng-click="installRepository()"\n                ng-disabled="isValidRepository()"\n                hawtio-show\n                object-name="{{featuresMBean}}"\n                method-name="addRepository"><i class="fa fa-plus"></i></button>\n      </div>\n      <div class="row">\n        <div class="bundle-list"\n             hawtio-auto-columns=".bundle-item">\n          <div ng-repeat="feature in selectedRepository.features"\n               class="bundle-item"\n               ng-show="filterFeature(feature)"\n               hawtio-template-popover title="Feature details">\n            <a ng-href="#/osgi/feature/{{feature.Id}}?p=container">\n              <span class="badge" ng-class="getStateStyle(feature)">{{feature.Name}} / {{feature.Version}}</span>\n            </a >\n            <span ng-hide="hasFabric">\n              <a class="toggle-action"\n                 href=""\n                 ng-show="installed(feature.Installed)"\n                 ng-click="uninstall(feature)"\n                 hawtio-show\n                 object-name="{{featuresMBean}"\n                 method-name="uninstallFeature">\n                <i class="fa fa-power-off"></i>\n              </a>\n              <a class="toggle-action"\n                 href=""\n                 ng-hide="installed(feature.Installed)"\n                 ng-click="install(feature)"\n                 hawtio-show\n                 object-name="{{featuresMBean}"\n                 method-name="installFeature">\n                <i class="fa fa-play-circle"></i>\n              </a>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n\n</div>\n'),e.put("plugins/karaf/html/scr-component-details.html",'<div>\n    <table class="overviewSection">\n        <tr ng-hide="hasFabric">\n            <td></td>\n            <td class="less-big">\n                <div class="btn-group">\n                  <button class="btn" \n                          ng-click="activate()"\n                          hawtio-show\n                          object-name="{{scrMBean}}"\n                          method-name="activateComponent">\n                    <i class="fa fa-play-circle"></i> Activate\n                  </button>\n                  <button class="btn" \n                          ng-click="deactivate()"\n                          hawtio-show\n                          object-name="{{scrMBean}}"\n                          method-name="deactiveateComponent">\n                    <i class="fa fa-off"></i> Deactivate\n                  </button>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class="pull-right"><strong>Id:</strong></td>\n            <td class="less-big">{{row.Id}}\n            </td>\n        </tr>\n        <tr>\n            <td class="pull-right"><strong>Name:</strong></td>\n            <td class="less-big">{{row.Name}}\n            </td>\n        </tr>\n        <tr>\n            <td class="pull-right"><strong>State:</strong></td>\n            <td class="less-big">{{row.State}}\n            </td>\n        </tr>\n        <tr>\n            <td>\n            </td>\n            <td>\n                <div class="accordion" id="accordionProperties">\n                    <div class="accordion-group">\n                        <div class="accordion-heading">\n                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionProperties"\n                               href="#collapseProperties">\n                                Properties\n                            </a>\n                        </div>\n                        <div id="collapseProperties" class="accordion-body collapse in">\n                            <table class="accordion-inner">\n                                <tr ng-repeat="(key, value) in row.Properties">\n                                    <td valign="top">{{key}}</td>\n                                    <td>{{value.Value}}</td>\n                                </tr>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td>\n            </td>\n            <td>\n                <div class="accordion" id="accordionReferences">\n                    <div class="accordion-group">\n                        <div class="accordion-heading">\n                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionReferences"\n                               href="#collapseReferences">\n                                References\n                            </a>\n                        </div>\n                        <div id="collapseReferences" class="accordion-body collapse in">\n                            <table class="accordion-inner">\n                                <thead>\n                                <tr>\n                                    <th>Name</th>\n                                    <th>Availability</th>\n                                    <th>Cardinality</th>\n                                    <th>Policy</th>\n                                    <th>Bound Services</th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                    <tr ng-repeat="(key, value) in row.References">\n                                        <td valign="left" class="less-big">{{value.Name}}</td>\n                                        <td valign="left" class="less-big">{{value.Availability}}</td>\n                                        <td valign="left" class="less-big">{{value.Cardinality}}</td>\n                                        <td valign="left" class="less-big">{{value.Policy}}</td>\n                                        <td>\n                                            <ul>\n                                                <li ng-repeat="id in value[\'Bound Services\']">\n                                                    <i class="fa fa-cog less-big text-info" id="bound.service.{{id}}">{{id}}</i>\n                                                </li>\n                                            </ul>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </td>\n        </tr>\n    </table>\n</div>\n'),e.put("plugins/karaf/html/scr-component.html",'<div class="controller-section" ng-controller="Karaf.ScrComponentController">\n    <div class="row">\n        <div class="col-md-4">\n            <h1>{{row.id}}</h1>\n        </div>\n    </div>\n\n    <div ng-include src="\'plugins/karaf/html/scr-component-details.html\'"></div>\n\n</div>\n'),e.put("plugins/karaf/html/scr-components.html",'<div class="controller-section" ng-controller="Karaf.ScrComponentsController">\n  <div class="row">\n    <div class="pull-left">\n      <form class="form-inline no-bottom-margin">\n        <fieldset>\n          <div class="control-group inline-block">\n            <div class="btn-group">\n              <button ng-disabled="selectedComponents.length == 0" \n                      class="btn" \n                      ng-click="activate()"\n                      hawtio-show\n                      object-name="{{scrMBean}}"\n                      method-name="activateComponent"><i\n                      class="fa fa-play-circle"></i> Activate\n              </button>\n              <button ng-disabled="selectedComponents.length == 0" \n                      class="btn" \n                      ng-click="deactivate()"\n                      hawtio-show\n                      object-name="{{scrMBean}}"\n                      method-name="deactiveateComponent"><i\n                      class="fa fa-off"></i> Deactivate\n              </button>\n            </div>\n          </div>\n        </fieldset>\n      </form>\n    </div>\n\n    <div class="pull-right">\n      <input type="text" class="input-text search-query" placeholder="Filter..." ng-model="scrOptions.filterOptions.filterText">\n    </div>\n  </div>\n\n\n  <div class="row">\n    <div class="gridStyle" ng-grid="scrOptions"></div>\n  </div>\n</div>\n'),e.put("plugins/karaf/html/server.html",'<div class="controller-section row" ng-controller="Karaf.ServerController">\n\n  <dl class="dl-horizontal">\n    <dt>Name</dt>\n    <dd>{{data.name}}</dd>\n    <dt>Version</dt>\n    <dd>{{data.version}}</dd>\n    <dt>State</dt>\n    <dd>{{data.state}}</dd>\n    <dt>Is root</dt>\n    <dd>{{data.root}}</dd>\n    <dt>Start Level</dt>\n    <dd>{{data.startLevel}}</dd>\n    <dt>Framework</dt>\n    <dd>{{data.framework}}</dd>\n    <dt>Framework Version</dt>\n    <dd>{{data.frameworkVersion}}</dd>\n    <dt>Location</dt>\n    <dd>{{data.location}}</dd>\n    <dt>SSH Port</dt>\n    <dd>{{data.sshPort}}</dd>\n    <dt>RMI Registry Port</dt>\n    <dd>{{data.rmiRegistryPort}}</dd>\n    <dt>RMI Server Port</dt>\n    <dd>{{data.rmiServerPort}}</dd>\n    <dt>PID</dt>\n    <dd>{{data.pid}}</dd>\n  </dl>\n\n</div>\n\n'),e.put("plugins/osgi/html/bundle-details.html",'<div>\n  <table>\n    <tr>\n      <td></td>\n      <td class="less-big">\n        <div class="btn-group">\n          <button ng-click="stopBundle(bundleId)" \n                  class="btn" \n                  hawtio-show\n                  object-name="{{frameworkMBean}}"\n                  method-name="stopBundle"\n                  title="stop"><i class="fa fa-off"/></button>\n          <button ng-click="startBundle(bundleId)" \n                  class="btn" \n                  hawtio-show\n                  object-name="{{frameworkMBean}}"\n                  method-name="startBundle"\n                  title="start"><i class="fa fa-play-circle"/></button>\n          <button ng-click="refreshBundle(bundleId)" \n                  class="btn" \n                  hawtio-show\n                  object-name="{{frameworkMBean}}"\n                  method-name="refreshBundle"\n                  title="refresh"><i class="fa fa-refresh"/></button>\n          <button ng-click="updateBundle(bundleId)" \n                  class="btn" \n                  hawtio-show\n                  object-name="{{frameworkMBean}}"\n                  method-name="updateBundle"\n                  title="update"><i class="fa fa-cloud-download"/></button>\n          <button ng-click="uninstallBundle(bundleId)" \n                  class="btn" \n                  hawtio-show\n                  object-name="{{frameworkMBean}}"\n                  method-name="uninstallBundle"\n                  title="uninstall"><i class="fa fa-eject"/></button>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td><p/></td>\n      <td/>\n    <tr>\n      <td>\n        <div ng-switch="row.Fragment">\n          <div ng-switch-when="true"><strong>Fragment&nbsp;ID:</strong></div>\n          <div ng-switch-default><strong>Bundle&nbsp;ID:</strong></div>\n        </div>\n      </td>\n      <td class="less-big">{{row.Identifier}}\n      </td>\n    </tr>\n    <tr>\n      <td><strong>Bundle&nbsp;Name:</strong></td>\n      <td class="less-big">{{row.Headers[\'Bundle-Name\'].Value}}\n      </td>\n    </tr>\n    <tr>\n      <td><strong>Symbolic&nbsp;Name:</strong></td>\n      <td class="less-big label">\n        <div id="bsn" rel="tooltip">{{row.SymbolicName}}</div>\n      </td>\n    </tr>\n    <tr>\n      <td><strong>Version:</strong></td>\n      <td class="less-big">{{row.Version}}\n      </td>\n    </tr>\n    <tr>\n      <td><strong>Start&nbsp;Level:</strong></td>\n      <td class="less-big">{{row.StartLevel}}\n      </td>\n    </tr>\n    <tr>\n      <td><strong>Location:</strong></td>\n      <td class="less-big">{{row.Location}}\n      </td>\n    </tr>\n    <tr>\n      <td><strong>State:</strong></td>\n      <td>\n        <div class="less-big label" ng-class="row.StateStyle">{{row.State}}</div>\n      </td>\n    </tr>\n    <tr>\n      <td><strong>Last&nbsp;Modified:</strong></td>\n      <td class="less-big">{{row.LastModified | date:\'medium\'}}\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <div ng-switch="row.Fragment">\n          <div ng-switch-when="true"><strong>Hosts:</strong></div>\n          <div ng-switch-default><strong>Fragments:</strong></div>\n        </div>\n      </td>\n      <td class="less-big">\n        <div ng-switch="row.Fragment">\n          <div ng-switch-when="true" ng-bind-html-unsafe="row.Hosts"/>\n          <div ng-switch-default ng-bind-html-unsafe="row.Fragments"/>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td>\n      </td>\n      <td>\n        <div class="accordion" id="accordionInspectClassloading">\n          <div class="accordion-group">\n            <div class="accordion-heading">\n              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionInspectClassloading"\n                 href="#collapseInspectClassloading">\n                Inspect Classloading\n              </a>\n            </div>\n            <div id="collapseInspectClassloading" class="accordion-body collapse in">\n              <form class="form-inline" hawtio-show object-name="{{osgiToolsMBean}}" operation-name="getLoadClassOrigin">\n                <fieldset>\n                  &nbsp;&nbsp;\n                  <input class="input-xlarge" type="text" ng-model="classToLoad" placeHolder="Enter Class Name to Load...">\n                  <button class="btn btn-success execute" ng-click="executeLoadClass(classToLoad)">Load class</button>\n                </fieldset>\n              </form>\n              <form class="form-inline" hawtio-show object-name="{{osgiToolsMBean}}" operation-name="getResourceURL">\n                <fieldset>\n                  &nbsp;&nbsp;\n                  <input class="input-xlarge" type="text" ng-model="resourceToLoad"\n                         placeHolder="Enter Resource Name to Find...">\n                  <button class="btn btn-success execute" ng-click="executeFindResource(resourceToLoad)">Get resource\n                  </button>\n                </fieldset>\n              </form>\n              <div id="loadClassResult"/>\n            </div>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td>\n      </td>\n      <td>\n        <div class="accordion" id="accordionImportedPackages">\n          <div class="accordion-group">\n            <div class="accordion-heading">\n              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionImportedPackages"\n                 href="#collapseImportedPackages">\n                Imported Packages\n              </a>\n            </div>\n            <div id="collapseImportedPackages" class="accordion-body collapse in">\n              <table>\n                <tr ng-repeat="(package, data) in row.ImportData">\n                  <td>\n                    <div class="less-big badge" id="import.{{package}}">{{package}}</div>\n                  </td>\n                </tr>\n              </table>\n              <div id="unsatisfiedOptionalImports"/>\n            </div>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td>\n      </td>\n      <td>\n        <div class="accordion" id="accordionExportedPackages">\n          <div class="accordion-group">\n            <div class="accordion-heading">\n              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionExportedPackages"\n                 href="#collapseExportedPackages">\n                Exported Packages\n              </a>\n            </div>\n            <div id="collapseExportedPackages" class="accordion-body collapse in">\n              <table>\n                <tr ng-repeat="(package, data) in row.ExportData">\n                  <td>\n                    <div class="less-big badge badge-success" id="export.{{package}}">{{package}}</div>\n                  </td>\n                </tr>\n              </table>\n            </div>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td></td>\n      <td>\n        <div class="accordion" id="accordionServices">\n          <div class="accordion-group">\n            <div class="accordion-heading">\n              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionServices"\n                 href="#collapseServices">\n                Services\n              </a>\n            </div>\n            <div id="collapseServices" class="accordion-body collapse in">\n              Registered Services\n              <table>\n                <tr ng-repeat="id in row.RegisteredServices">\n                  <td><i class="fa fa-cog less-big text-success" id="registers.service.{{id}}">{{id}}</i></td>\n                </tr>\n              </table>\n              <br/>\n              Services used by this Bundle\n              <table>\n                <tr ng-repeat="id in row.ServicesInUse">\n                  <td><i class="fa fa-cog less-big text-info" id="uses.service.{{id}}">{{id}}</i></td>\n                </tr>\n              </table>\n            </div>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td>\n      </td>\n      <td>\n        <div class="accordion" id="accordionRequiringBundles">\n          <div class="accordion-group">\n            <div class="accordion-heading">\n              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionRequiringBundles"\n                 href="#collapseRequiringBundles">\n                Other Bundles using this Bundle\n              </a>\n            </div>\n            <div id="collapseRequiringBundles" class="accordion-body collapse in">\n              <div class="accordion-inner">\n                <span ng-bind-html-unsafe="row.RequiringBundles"/>\n              </div>\n            </div>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td>\n      </td>\n      <td>\n        <div class="accordion" id="accordionHeaders">\n          <div class="accordion-group">\n            <div class="accordion-heading">\n              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionHeaders"\n                 href="#collapsHeaders">\n                Headers\n              </a>\n            </div>\n            <div id="collapsHeaders" class="accordion-body collapse in">\n              <table class="accordion-inner">\n                <tr ng-repeat="(key, value) in row.Headers" ng-show="showValue(key)">\n                  <td valign="top">{{key}}</td>\n                  <td>{{value.Value}}</td>\n                </tr>\n              </table>\n            </div>\n          </div>\n        </div>\n      </td>\n    </tr>\n  </table>\n</div>\n'),e.put("plugins/osgi/html/bundle-list.html",'<div class="controller-section" ng-controller="Osgi.BundleListController">\n  <div class="row bundle-list-toolbar">\n\n    <div class="pull-left">\n      <div class="btn-group">\n        <a ng-href="#/osgi/bundle-list?p=container"\n                type="button"\n                class="btn active"\n                title="List view">\n          <i class="fa fa-list"></i>\n        </a>\n        <a ng-href="#/osgi/bundles?p=container"\n                type="button"\n                class="btn"\n                title="Table view">\n          <i class="fa fa-table"></i>\n        </a>\n      </div>\n\n      <div class="input-group" hawtio-show object-name="{{frameworkMBean}}" method-name="installBundle">\n        <input class="input-xxlarge"\n               type="text"\n               placeholder="Install Bundle..."\n               ng-model="bundleUrl">\n        <button ng-disabled="installDisabled()"\n                class="btn"\n                ng-click="install()"\n                title="Install">\n          <i class="fa fa-ok"></i>\n        </button>\n      </div>\n\n    </div>\n\n\n    <div class="pull-right">\n      <strong>Show bundles: </strong>\n      &nbsp;\n      <label for="showActiveMQBundles">ActiveMQ</label>\n      <input id="showActiveMQBundles" type="checkbox" ng-model="display.showActiveMQBundles">\n      &nbsp;\n      &nbsp;\n      <label for="showCamelBundles">Camel</label>\n      <input id="showCamelBundles" type="checkbox" ng-model="display.showCamelBundles">\n      &nbsp;\n      &nbsp;\n      <label for="showCxfBundles">CXF</label>\n      <input id="showCxfBundles" type="checkbox" ng-model="display.showCxfBundles">\n      &nbsp;\n      &nbsp;\n      <label for="showPlatformBundles">Platform</label>\n      <input id="showPlatformBundles" type="checkbox" ng-model="display.showPlatformBundles">\n      &nbsp;\n      &nbsp;\n      &nbsp;\n      <select class="input-lg" ng-model="display.sortField" id="sortField">\n        <option value="Identifier">Sort by ID</option>\n        <option value="Name">Sort by Name</option>\n        <option value="SymbolicName">Sort by Symbolic Name</option>\n      </select>\n      <select class="input-lg" ng-model="display.bundleField" id="bundleField">\n        <option value="Name">Display Name</option>\n        <option value="SymbolicName">Display Symbolic Name</option>\n      </select>\n      <input class="input-sm search-query" type="number" min="0"\n             ng-model="display.startLevelFilter"\n             placeholder="Start Level..."/>\n      <hawtio-filter ng-model="display.bundleFilter" placeholder="Filter..." save-as="osgi-bundle-list-text-filter"></hawtio-filter>\n    </div>\n\n  </div>\n\n  <div class="row" id="bundleTableHolder">\n    <!-- Just create a bit of space between the form and the controls -->\n    <p></p>\n\n    <script type="text/ng-template" id="popoverTemplate">\n<small>\n  <table class="table">\n    <tbody>\n    <tr ng-repeat="(k, v) in bundle track by $index">\n      <td class="property-name">{{k}}</td>\n      <td class="property-value">{{v}}</td>\n    </tr>\n    </tbody>\n  </table>\n</small>\n    </script>\n\n    <div class="bundle-list centered"\n         hawtio-auto-columns=".bundle-item">\n      <div ng-repeat="bundle in bundles"\n           class="bundle-item"\n           ng-show="filterBundle(bundle)"\n           hawtio-template-popover title="Bundle details">\n        <a id="{{bundle.Identifier}}"\n           ng-href="#/osgi/bundle/{{bundle.Identifier}}?p=container">\n          <span class="badge" ng-class="getStateStyle(bundle.State)">{{getLabel(bundle)}}</span>\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/osgi/html/bundle.html",'<div class="controller-section" ng-controller="Osgi.BundleController">\n  <div ng-include src="\'plugins/osgi/html/bundle-details.html\'"></div>\n</div>\n'),e.put("plugins/osgi/html/bundles.html",'<div class="controller-section" ng-controller="Osgi.BundlesController">\n  <div class="row">\n    <div class="pull-left">\n\n      <form class="form-inline no-bottom-margin">\n        <fieldset>\n\n          <div class="btn-group inline-block">\n            <a ng-href="#/osgi/bundle-list?p=container"\n                    type="button"\n                    class="btn"\n                    title="List view">\n              <i class="fa fa-list"></i>\n            </a>\n            <a ng-href="#/osgi/bundles?p=container"\n                    type="button"\n                    class="btn active"\n                    title="Table view">\n              <i class="fa fa-table"></i>\n            </a>\n          </div>\n\n          <div class="controls control-group inline-block controls-row">\n            <div class="btn-group">\n              <button ng-disabled="selected.length == 0" class="btn" ng-click="stop()" title="Stop"><i class="fa fa-off"></i></button>\n              <button ng-disabled="selected.length == 0" class="btn" ng-click="start()" title="Start"><i class="fa fa-play-circle"></i></button>\n              <button ng-disabled="selected.length == 0" class="btn" ng-click="refresh()" title="Refresh"><i class="fa fa-refresh"></i></button>\n              <button ng-disabled="selected.length == 0" class="btn" ng-click="update()" title="Update"><i class="fa fa-cloud-download"></i></button>\n              <button ng-disabled="selected.length == 0" class="btn" ng-click="uninstall()" title="Uninstall"><i class="fa fa-eject"></i></button>\n            </div>\n            <div class="input-group">\n              <input class="input-xlarge" type="text" placeholder="Install Bundle..." ng-model="bundleUrl">\n              <button ng-disabled="installDisabled()" class="btn" ng-click="install()" title="Install"><i class="fa fa-ok"></i></button>\n            </div>\n          </div>\n        </fieldset>\n      </form>\n      \n    </div>\n\n    <div class="pull-right">\n      <form class="form-inline no-bottom-margin">\n        <fieldset>\n          <div class="control-group inline-block">\n            <input type="text"\n                   class="input-lg search-query"\n                   placeholder="Filter..."\n                   ng-model="gridOptions.filterOptions.filterText">\n          </div>\n        </fieldset>\n      </form>\n\n    </div>\n  </div>\n  \n  \n  <div class="row">\n    <div ng-hide="loading" class="gridStyle" ng-grid="gridOptions"></div>\n    <div ng-show="loading">\n      Please wait, loading...\n    </div>\n  </div>\n</div>\n'),e.put("plugins/osgi/html/configurations.html",'<style type="text/css">\n  .configuration-header {\n    margin: 20px 20px;\n  }\n\n  ul.configurations,\n  ul.configurations li {\n    list-style: none;\n  }\n\n  ul.configurations {\n    margin: 0px 20px;\n  }\n\n  ul.configurations .bundle-item {\n    display: list-item;\n    margin-bottom: 4px;\n  }\n\n  ul.configurations li.bundle-item a {\n    /*\n      TODO it\'d be nice to use the natural widgth here,\n      but then it might be nice to use multiple columns?\n    */\n    width: 450px;\n  }\n</style>\n\n<div class="controller-section" ng-controller="Osgi.ConfigurationsController">\n  <div class="row">\n    <div class="configuration-header">\n      <div class="configuration-filter">\n        <input type="text" class="col-md-8 search-query" placeholder="Filter..." ng-model="filterText">\n        <i class="fa fa-remove clickable" title="Clear filter" ng-click="filterText = \'\'"></i>\n        <button class="btn pull-right" ng-click="addPidDialog.open()" title="Add a new configuration" hawtio-show object-name="{{hawtioConfigAdminMBean}}" method-name="configAdminUpdate"><i\n                class="fa fa-plus"></i> Configuration\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <div class="row centered" ng-hide="configurations.length">\n    <p class="text-center"><i class="fa fa-spinner fa-spin"></i></p>\n  </div>\n\n  <ul class="configurations">\n    <li ng-repeat=\'config in configurations | filter:filterText\' class=\'{{config.class}} bundle-item\'>\n      <a ng-href="{{config.pidLink}}" title="{{config.description}}">\n        <span class="{{config.kind.class}}">{{config.name}}</span>\n      </a>\n      <ul ng-show="config.isFactory">\n        <li ng-repeat="child in config.children" class=\'{{child.class}} bundle-item\'>\n          <a ng-href="{{child.pidLink}}" title="{{child.description}}">\n            <span class="{{child.kind.class}}">{{child.name}}</span>\n          </a>\n        </li>\n      </ul>\n    </li>\n  </ul>\n\n  <div modal="addPidDialog.show" close="addPidDialog.close()" options="addPidDialog.options">\n    <form name="addPidDialogForm" class="form-horizontal no-bottom-margin" ng-submit="addPid(newPid)">\n      <div class="modal-header"><h4>Add New Configuration</h4></div>\n      <div class="modal-body">\n        <div class="control-group">\n          <label class="control-label" for="newPid">New configuration ID</label>\n\n          <div class="controls">\n            <input class="input-xlarge" type="text" id="newPid" ng-model="newPid"/>\n          </div>\n        </div>\n      </div>\n      <div class="modal-footer">\n        <input class="btn btn-success" ng-disabled="!(newPid !== \'\' && newPid !== undefined)" type="submit" value="Add">\n        <input class="btn btn-primary" ng-click="addPidDialog.close()" type="button" value="Cancel">\n      </div>\n    </form>\n  </div>\n</div>\n\n'),
e.put("plugins/osgi/html/framework.html",'<div class="container" ng-controller="Osgi.FrameworkController">\n    <h3>Framework Configuration</h3>\n    <div class="col-md-11">\n    <table>\n        <tr>\n            <td><strong>Current Framework Start Level:</strong></td>\n            <td class="less-big">{{startLevel}}</td>\n            <td><button class="btn btn-primary" \n                        ng-click="edit(\'FrameworkStartLevel\', \'Framework Start Level\')" \n                        title="Edit framework start level"\n                        hawtio-show\n                        object-name="{{frameworkMBean}}"\n                        method-name="setFrameworkStartLevel">Edit</button></td>\n        </tr>\n        <tr><td><p></p></td></tr>\n        <tr>\n            <td><strong>Initial Bundle Start Level:</strong></td>\n            <td class="less-big">{{initialBundleStartLevel}}</td>\n            <td><button class="btn btn-primary"\n                        ng-click="edit(\'InitialBundleStartLevel\', \'Initial Bundle Start Level\')" \n                        title="Edit initial bundle start level"\n                        hawtio-show\n                        object-name="{{frameworkMBean}}"\n                        method-name="setInitialBundleStartLevel">Edit</button></td>\n        </tr>\n    </table>\n    </div>\n\n    <div modal="editDialog.show" close="editDialog.close()" options="editDialog.options">\n        <form id="myForm" class="form-horizontal no-bottom-margin" ng-submit="editDialog.close()">\n            <div class="modal-header"><h4>Change {{editDisplayName}}</h4></div>\n            <div class="modal-body">\n                <p>New Start Level (0-100): <input ng-model="editResult" type="number" min="0" max="100" required/></p>\n            </div>\n            <div class="modal-footer">\n                <input class="btn" ng-click="editDialog.close()" type="submit" value="Cancel">\n                <input class="btn btn-primary" ng-click="edited(editAttr, editDisplayName, editResult)" type="submit" value="OK">\n            </div>\n        </form>\n    </div>\n</div>\n'),e.put("plugins/osgi/html/layoutOsgi.html",'<ul class="nav nav-tabs" hawtio-auto-dropdown ng-controller="Karaf.NavBarController">\n  <li ng-class=\'{active : isActive("#/osgi/configuration") || isPrefixActive("#/osgi/pid")}\'>\n      <a ng-href="#/osgi/configurations{{hash}}">Configuration</a>\n  </li>\n  <li ng-class=\'{active : isActive("#/osgi/bundle")}\'>\n      <a ng-href="#/osgi/bundle-list{{hash}}">Bundles</a>\n  </li>\n  <li ng-class=\'{active : isActive("#/osgi/features") || isActive("#/osgi/feature")}\' ng-show="isFeaturesEnabled">\n    <a ng-href="#/osgi/features{{hash}}">Features</a>\n  </li>\n  <li ng-class=\'{active : isActive("#/osgi/package")}\'>\n      <a ng-href="#/osgi/packages{{hash}}">Packages</a>\n  </li>\n  <li ng-class=\'{active : isActive("#/osgi/service")}\'>\n      <a ng-href="#/osgi/services{{hash}}">Services</a>\n  </li>\n  <li ng-class=\'{active : isActive("#/osgi/scr-components")}\' ng-show="isScrEnabled">\n    <a ng-href="#/osgi/scr-components{{hash}}">Declarative Services</a>\n  </li>\n  <li ng-class=\'{active : isActive("#/osgi/server")}\'>\n    <a ng-href="#/osgi/server{{hash}}">Server</a>\n  </li>\n  <li ng-class=\'{active : isActive("#/osgi/fwk")}\'>\n      <a ng-href="#/osgi/fwk{{hash}}">Framework</a>\n  </li>\n  <li ng-class=\'{active : isActive("#/osgi/dependencies")}\'>\n      <a ng-href="#/osgi/dependencies{{hash}}">Dependencies</a>\n  </li>\n\n  <li class="dropdown overflow" style="float: right !important; visibility: hidden;">\n    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-chevron-down"></i></a>\n    <ul class="dropdown-menu right"></ul>\n  </li>\n\n</ul>\n<div class="row" ng-controller="Osgi.TopLevelController">\n    <div ng-view></div>\n</div>\n\n\n'),e.put("plugins/osgi/html/package-details.html",'<div>\n    <table class="overviewSection">\n        <tr>\n            <td><strong>Name:</strong></td>\n            <td class="less-big">{{row.Name}}\n            </td>\n        </tr>\n        <tr>\n            <td><strong>Version:</strong></td>\n            <td class="less-big">{{row.Version}}\n            </td>\n        </tr>\n        <tr>\n            <td><strong>Removal Pending:</strong></td>\n            <td class="less-big">{{row.RemovalPending}}\n        </tr>\n        <tr>\n            <td><strong>Exporting Bundles:</strong></td>\n            <td>\n                <ul>\n                    <li ng-repeat="name in row.ExportingBundles">\n                        <a href=\'#/osgi/bundle/{{name}}{{hash}}\'>{{name}}</a>\n                    </li>\n                </ul>\n            </td>\n        </tr>\n        <tr>\n            <td><strong>Importing Bundles:</strong></td>\n            <td>\n                <ul>\n                    <li ng-repeat="name in row.ImportingBundles">\n                        <a href=\'#/osgi/bundle/{{name}}{{hash}}\'>{{name}}</a>\n                    </li>\n                </ul>\n            </td>\n        </tr>\n    </table>\n</div>'),e.put("plugins/osgi/html/package.html",'<div class="controller-section" ng-controller="Osgi.PackageController">\n\n<h1>{{row.id}}</h1>\n\n<div ng-include src="\'plugins/osgi/html/package-details.html\'"></div>\n</div>\n'),e.put("plugins/osgi/html/packages.html",'<script type="text/ng-template" id="packageBundlesTemplate">\n  <table>\n    <tr>\n      <th>Exporting Bundles</th>\n      <th>Importing Bundles</th>\n    </tr>\n    <tr>\n      <td>\n        <ul>\n          <li ng-repeat="b in row.ExportingBundles">\n            <a href=\'#/osgi/bundle/{{b.Identifier}}?\'>{{b.SymbolicName}}</a>\n          </li>\n        </ul>\n      </td>\n      <td>\n        <ul>\n          <li ng-repeat="b in row.ImportingBundles">\n            <a href=\'#/osgi/bundle/{{b.Identifier}}?\'>{{b.SymbolicName}}</a>\n          </li>\n        </ul>\n      </td>\n    </tr>\n  </table>\n</script>\n\n<div class="controller-section" ng-controller="Osgi.PackagesController">\n  <table class="table table-striped" hawtio-simple-table="mygrid"></table>\n</div>\n'),e.put("plugins/osgi/html/pid-details.html",'<div>\n  <h4 title="{{metaType.description}}">{{zkPid || metaType.name || pid}}\n    <span ng-show="factoryInstanceName">: {{factoryInstanceName}}</span>\n  </h4>\n\n  <div ng-hide="editMode">\n    <div class="row">\n      <button class="btn" ng-click="setEditMode(true)" title="Edit this configuration" hawtio-show object-name="{{hawtioConfigAdminMBean}}" method-name="configAdminUpdate"><i class="fa fa-edit"></i> Edit</button>\n      <button class="btn btn-danger pull-right" ng-click="deletePidDialog.open()" title="Delete this configuration" hawtio-show object-name="{{configAdminMBean}}" method-name="delete"><i class="fa fa-remove"></i> Delete</button>\n    </div>\n    <div class="row config-admin-form view">\n      <div simple-form name="pidEditor" mode=\'view\' entity=\'entity\' data=\'schema\' schema="fullSchema"></div>\n    </div>\n  </div>\n  <div ng-show="editMode">\n    <div class="row">\n      <button ng-show="newPid" class="btn btn-primary" ng-disabled="!canSave || !createForm.pidInstanceName" ng-click="pidSave()"><i class="fa fa-save"></i> Create</button>\n      <button ng-hide="newPid" class="btn btn-primary" ng-disabled="!canSave" ng-click="pidSave()"><i class="fa fa-save"></i> Save</button>\n      <button class="btn btn-warning" ng-click="setEditMode(false)"><i class="fa fa-remove"></i> Cancel</button>\n      <button class="btn pull-right" ng-click="addPropertyDialog.open()" title="Add a new property value to this configuration"><i class="fa fa-plus"></i> Property</button>\n    </div>\n    <div class="row config-admin-form edit">\n      <div ng-show="newPid" class="new-config-name-form">\n        <form class="form-horizontal" action="">\n          <fieldset>\n            <div class="control-group">\n              <label class="control-label" title="The name of the configuration file">Configuration name: </label>\n              <div class="controls">\n                <input type="text" class="col-md-12"\n                       title="The name of the configuration file"\n                       ng-required="true"\n                       ng-model="createForm.pidInstanceName" name="path"\n                       autofocus="autofocus">\n              </div>\n            </div>\n          </fieldset>\n        </form>\n      </div>\n\n      <div simple-form name="pidEditor" mode=\'edit\' entity=\'entity\' data=\'schema\' schema="fullSchema" onSubmit="pidSave()"></div>\n    </div>\n  </div>\n\n  <div modal="deletePropDialog.show" close="deletePropDialog.close()" options="deletePropDialog.options">\n    <form name="deleteProperty" class="form-horizontal no-bottom-margin" ng-submit="deletePidPropConfirmed()">\n      <div class="modal-header"><h4>Delete property \'{{deleteKey}}\'</h4></div>\n      <div class="modal-body">\n        <p>Are you sure?</p>\n      </div>\n      <div class="modal-footer">\n        <input class="btn btn-success" type="submit" value="Delete">\n        <input class="btn btn-primary" ng-click="deletePropDialog.close()" type="button" value="Cancel">\n      </div>\n    </form>\n  </div>\n\n  <div modal="deletePidDialog.show" close="deletePidDialog.close()" options="deletePidDialog.options">\n    <form name="deletePid" class="form-horizontal no-bottom-margin" ng-submit="deletePidConfirmed()">\n      <div class="modal-header"><h4>Delete configuration: {{pid}}</h4></div>\n      <div class="modal-body">\n        <p>Are you sure?</p>\n      </div>\n      <div class="modal-footer">\n        <input class="btn btn-success" type="submit" value="Delete">\n        <input class="btn btn-primary" ng-click="deletePidDialog.close()" type="button" value="Cancel">\n      </div>\n    </form>\n  </div>\n\n  <div modal="addPropertyDialog.show" close="addPropertyDialog.close()" options="addPropertyDialog.options">\n    <form name="addProperty" class="form-horizontal no-bottom-margin"\n          ng-submit="addPropertyConfirmed(addPropKey, addPropValue)">\n      <div class="modal-header"><h4>Add property</h4></div>\n      <div class="modal-body">\n        <div class="control-group">\n          <label class="control-label" for="propKey">Key</label>\n\n          <div class="controls">\n            <input class="input-xlarge" type="text" id="propKey" placeholder="Key" ng-model="addPropKey"/>\n            <span class="help-block"\n                  ng-hide="addPropKey !== \'\' && addPropKey !== undefined">A key must be specified</span>\n          </div>\n        </div>\n        <div class="control-group">\n          <label class="control-label" for="propValue">Value</label>\n\n          <div class="controls">\n            <input class="input-xlarge" type="text" id="propValue" placeholder="Value" ng-model="addPropValue"/>\n          </div>\n        </div>\n      </div>\n      <div class="modal-footer">\n        <input class="btn btn-success" ng-disabled="!(addPropKey !== \'\' && addPropKey !== undefined)" type="submit"\n               value="Add">\n        <input class="btn btn-primary" ng-click="addPropertyDialog.close()" type="button" value="Cancel">\n      </div>\n    </form>\n  </div>\n</div>\n'),e.put("plugins/osgi/html/pid.html",'<div class="controller-section" ng-controller="Osgi.PidController">\n  <div ng-include src="\'plugins/osgi/html/pid-details.html\'"></div>\n</div>\n'),e.put("plugins/osgi/html/services.html",'<script type="text/ng-template" id="osgiServiceTemplate">\n  <table>\n    <tr>\n      <th>Using Bundles</th>\n    </tr>\n    <tr>\n      <td>\n        <ul>\n          <li ng-repeat="b in row.UsingBundles">\n            <a href=\'#/osgi/bundle/{{b.Identifier}}{{hash}}\'>{{b.SymbolicName}}</a>\n          </li>\n        </ul>\n      </td>\n    </tr>\n  </table>\n</script>\n\n<div class="controller-section" ng-controller="Osgi.ServiceController">\n\n  <table class="table table-striped" hawtio-simple-table="mygrid"></table>\n\n  <table cellpadding="0" cellspacing="0" border="0"\n         class="table table-condensed table-striped table-bordered table-hover"\n         id="grid">\n    <thead>\n    <tr>\n      <th></th>\n      <th>ID</th>\n      <th>Bundle</th>\n      <th>Object Class(es)</th>\n    </tr>\n    </thead>\n    <tbody>\n  </table>\n</div>\n'),e.put("plugins/osgi/html/svc-dependencies.html",'<style type="text/css">\n\n    div#pop-up {\n        display: none;\n        position:absolute;\n        color: white;\n        font-size: 14px;\n        background: rgba(0,0,0,0.6);\n        padding: 5px 10px 5px 10px;\n        -moz-border-radius: 8px 8px;\n        border-radius: 8px 8px;\n    }\n\n    div#pop-up-title {\n        font-size: 15px;\n        margin-bottom: 4px;\n        font-weight: bolder;\n    }\n    div#pop-up-content {\n        font-size: 12px;\n    }\n\n    rect.graphbox {\n        fill: #DDD;\n    }\n\n    rect.graphbox.frame {\n        stroke: #222;\n        stroke-width: 2px\n    }\n\n    path.link {\n        fill: none;\n        stroke: #666;\n        stroke-width: 1.5px;\n    }\n\n    path.link.registered {\n        stroke: #444;\n    }\n\n    path.link.inuse {\n        stroke-dasharray: 0,2 1;\n    }\n\n    circle {\n        fill: #black;\n    }\n\n    circle.service {\n        fill: blue;\n    }\n\n    circle.bundle {\n        fill: black;\n    }\n\n    circle.package {\n        fill: gray;\n    }\n\n    text {\n        font: 10px sans-serif;\n        pointer-events: none;\n    }\n\n    text.shadow {\n        stroke: #fff;\n        stroke-width: 3px;\n        stroke-opacity: .8;\n    }\n\n</style>\n\n<div ng-controller="Osgi.ServiceDependencyController">\n\n    <div class="pull-left">\n        <form class="form-inline no-bottom-margin">\n            <fieldset>\n                <div class="control-group inline-block">\n                    <input type="text" class="search-query" placeholder="Filter Bundle Symbolic Name..." ng-model="bundleFilter">\n                    <input type="text" class="search-query" placeholder="Filter Package Name..." ng-model="packageFilter" ng-change="updatePkgFilter()">\n                    <label class="radio" for="showServices">\n                        <input id="showServices" type="radio" value="services" ng-model="selectView"> Show Services\n                    </label>\n                    <label class="radio" for="showPackages">\n                        <input id="showPackages" type="radio" value="packages" ng-model="selectView" ng-disabled="disablePkg"> Show Packages\n                    </label>\n                    <label class="checkbox" for="hideUnused">\n                        <input id="hideUnused" type="checkbox" ng-model="hideUnused"> Hide Unused\n                    </label>\n                    <button class="btn btn-primary" ng-click="updateGraph()" title="Apply the selected criteria to the Graph.">Apply</button>\n                </div>\n            </fieldset>\n        </form>\n    </div>\n\n  <div ng-hide="inDashboard" class="add-link">\n    <a ng-href="{{addToDashboardLink()}}" title="Add this view to a Dashboard"><i class="fa fa-share"></i></a>\n  </div>\n\n    <div id="pop-up">\n        <div id="pop-up-title"></div>\n        <div id="pop-up-content"></div>\n    </div>\n\n  <div class="row">\n    <div class="col-md-12 canvas" style="min-height: 800px">\n      <div hawtio-force-graph graph="graph" link-distance="100" charge="-300" nodesize="6"></div>\n    </div>\n  </div>\n\n</div>\n')}]),hawtioPluginLoader.addModule("hawtio-integration-templates"),!function(e){"use strict";e.expr[":"].icontains=function(t,n,i){return e(t).text().toUpperCase().indexOf(i[3].toUpperCase())>=0};var t=function(n,i,r){r&&(r.stopPropagation(),r.preventDefault()),this.$element=e(n),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=e.extend({},e.fn.selectpicker.defaults,this.$element.data(),"object"==typeof i&&i),null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=t.prototype.val,this.render=t.prototype.render,this.refresh=t.prototype.refresh,this.setStyle=t.prototype.setStyle,this.selectAll=t.prototype.selectAll,this.deselectAll=t.prototype.deselectAll,this.init()};t.prototype={constructor:t,init:function(){var t=this,n=this.$element.attr("id");this.$element.hide(),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$menu=this.$newElement.find("> .dropdown-menu"),this.$button=this.$newElement.find("> button"),this.$searchbox=this.$newElement.find("input"),void 0!==n&&(this.$button.attr("data-id",n),e('label[for="'+n+'"]').click(function(e){e.preventDefault(),t.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this)},createDropdown:function(){var t=this.multiple?" show-tick":"",n=this.$element.parent().hasClass("input-group")?" input-group-btn":"",i=this.autofocus?" autofocus":"",r=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",a=this.options.liveSearch?'<div class="bootstrap-select-searchbox"><input type="text" class="input-block-level form-control" autocomplete="off" /></div>':"",o=this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-block"><button class="actions-btn bs-select-all btn btn-sm btn-default">Select All</button><button class="actions-btn bs-deselect-all btn btn-sm btn-default">Deselect All</button></div></div>':"",s='<div class="btn-group bootstrap-select'+t+n+'"><button type="button" class="btn dropdown-toggle selectpicker" data-toggle="dropdown"'+i+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+r+a+o+'<ul class="dropdown-menu inner selectpicker" role="menu"></ul></div></div>';return e(s)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul").append(t),e},reloadLi:function(){this.destroyLi();var e=this.createLi();this.$menu.find("ul").append(e)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var t=this,n=[],i="";return this.$element.find("option").each(function(){var i=e(this),r=i.attr("class")||"",a=i.attr("style")||"",o=i.data("content")?i.data("content"):i.html(),s=void 0!==i.data("subtext")?'<small class="muted text-muted">'+i.data("subtext")+"</small>":"",l=void 0!==i.data("icon")?'<i class="'+t.options.iconBase+" "+i.data("icon")+'"></i> ':"";if(""!==l&&(i.is(":disabled")||i.parent().is(":disabled"))&&(l="<span>"+l+"</span>"),i.data("content")||(o=l+'<span class="text">'+o+s+"</span>"),t.options.hideDisabled&&(i.is(":disabled")||i.parent().is(":disabled")))n.push('<a style="min-height: 0; padding: 0"></a>');else if(i.parent().is("optgroup")&&i.data("divider")!==!0)if(0===i.index()){var c=i.parent().attr("label"),u=void 0!==i.parent().data("subtext")?'<small class="muted text-muted">'+i.parent().data("subtext")+"</small>":"",d=i.parent().data("icon")?'<i class="'+i.parent().data("icon")+'"></i> ':"";c=d+'<span class="text">'+c+u+"</span>",n.push(0!==i[0].index?'<div class="div-contain"><div class="divider"></div></div><dt>'+c+"</dt>"+t.createA(o,"opt "+r,a):"<dt>"+c+"</dt>"+t.createA(o,"opt "+r,a))}else n.push(t.createA(o,"opt "+r,a));else n.push(i.data("divider")===!0?'<div class="div-contain"><div class="divider"></div></div>':e(this).data("hidden")===!0?"<a></a>":t.createA(o,r,a))}),e.each(n,function(e,t){var n="<a></a>"===t?'class="hide is-hidden"':"";i+='<li rel="'+e+'"'+n+">"+t+"</li>"}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),e(i)},createA:function(e,t,n){return'<a tabindex="0" class="'+t+'" style="'+n+'">'+e+'<i class="'+this.options.iconBase+" "+this.options.tickIcon+' icon-ok check-mark"></i></a>'},render:function(t){var n=this;t!==!1&&this.$element.find("option").each(function(t){n.setDisabled(t,e(this).is(":disabled")||e(this).parent().is(":disabled")),n.setSelected(t,e(this).is(":selected"))}),this.tabIndex();var i=this.$element.find("option:selected").map(function(){var t,i=e(this),r=i.data("icon")&&n.options.showIcon?'<i class="'+n.options.iconBase+" "+i.data("icon")+'"></i> ':"";return t=n.options.showSubtext&&i.attr("data-subtext")&&!n.multiple?' <small class="muted text-muted">'+i.data("subtext")+"</small>":"",i.data("content")&&n.options.showContent?i.data("content"):void 0!==i.attr("title")?i.attr("title"):r+i.html()+t}).toArray(),r=this.multiple?i.join(this.options.multipleSeparator):i[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var a=this.options.selectedTextFormat.split(">"),o=this.options.hideDisabled?":not([disabled])":"";(a.length>1&&i.length>a[1]||1==a.length&&i.length>=2)&&(r=this.options.countSelectedText.replace("{0}",i.length).replace("{1}",this.$element.find('option:not([data-divider="true"]):not([data-hidden="true"])'+o).length))}this.options.title=this.$element.attr("title"),r||(r=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",e.trim(r)),this.$newElement.find(".filter-option").html(r)},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""));var n=e?e:this.options.style;"add"==t?this.$button.addClass(n):"remove"==t?this.$button.removeClass(n):(this.$button.removeClass(this.options.style),this.$button.addClass(n))},liHeight:function(){if(this.options.size!==!1){var e=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),t=e.addClass("open").find("> .dropdown-menu"),n=t.find("li > a").outerHeight(),i=this.options.header?t.find(".popover-title").outerHeight():0,r=this.options.liveSearch?t.find(".bootstrap-select-searchbox").outerHeight():0,a=this.options.actionsBox?t.find(".bs-actionsbox").outerHeight():0;e.remove(),this.$newElement.data("liHeight",n).data("headerHeight",i).data("searchHeight",r).data("actionsHeight",a)}},setSize:function(){var t,n,i,r=this,a=this.$menu,o=a.find(".inner"),s=this.$newElement.outerHeight(),l=this.$newElement.data("liHeight"),c=this.$newElement.data("headerHeight"),u=this.$newElement.data("searchHeight"),d=this.$newElement.data("actionsHeight"),p=a.find("li .divider").outerHeight(!0),h=parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom"))+parseInt(a.css("border-top-width"))+parseInt(a.css("border-bottom-width")),f=this.options.hideDisabled?":not(.disabled)":"",g=e(window),m=h+parseInt(a.css("margin-top"))+parseInt(a.css("margin-bottom"))+2,v=function(){n=r.$newElement.offset().top-g.scrollTop(),i=g.height()-n-s};if(v(),this.options.header&&a.css("padding-top",0),"auto"==this.options.size){var y=function(){var e,s=r.$lis.not(".hide");v(),t=i-m,r.options.dropupAuto&&r.$newElement.toggleClass("dropup",n>i&&t-m<a.height()),r.$newElement.hasClass("dropup")&&(t=n-m),e=s.length+s.find("dt").length>3?3*l+m-2:0,a.css({"max-height":t+"px",overflow:"hidden","min-height":e+c+u+d+"px"}),o.css({"max-height":t-c-u-d-h+"px","overflow-y":"auto","min-height":Math.max(e-h,0)+"px"})};y(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",y),e(window).off("resize.getSize").on("resize.getSize",y),e(window).off("scroll.getSize").on("scroll.getSize",y)}else if(this.options.size&&"auto"!=this.options.size&&a.find("li"+f).length>this.options.size){var b=a.find("li"+f+" > *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index(),w=a.find("li").slice(0,b+1).find(".div-contain").length;t=l*this.options.size+w*p+h,r.options.dropupAuto&&this.$newElement.toggleClass("dropup",n>i&&t<a.height()),a.css({"max-height":t+c+u+d+"px",overflow:"hidden"}),o.css({"max-height":t-h+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var e=this.$newElement.clone().appendTo("body"),t=e.find("> .dropdown-menu").css("width"),n=e.css("width","auto").find("> button").css("width");e.remove(),this.$newElement.css("width",Math.max(parseInt(t),parseInt(n))+"px")}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var t,n,i=this,r="<div />",a=e(r),o=function(e){a.addClass(e.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",e.hasClass("dropup")),t=e.offset(),n=e.hasClass("dropup")?0:e[0].offsetHeight,a.css({top:t.top+n,left:t.left,width:e[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){i.isDisabled()||(o(e(this)),a.appendTo(i.options.container),a.toggleClass("open",!e(this).hasClass("open")),a.append(i.$menu))}),e(window).resize(function(){o(i.$newElement)}),e(window).on("scroll",function(){o(i.$newElement)}),e("html").on("click",function(t){e(t.target).closest(i.$newElement).length<1&&a.removeClass("open")})},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},update:function(){this.reloadLi(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},setSelected:function(t,n){null==this.$lis&&(this.$lis=this.$menu.find("li")),e(this.$lis[t]).toggleClass("selected",n)},setDisabled:function(t,n){null==this.$lis&&(this.$lis=this.$menu.find("li")),n?e(this.$lis[t]).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):e(this.$lis[t]).removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var e=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1==this.$button.attr("tabindex")&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex"))),this.$button.click(function(){return!e.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var t=this;e("body").on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()}),this.$newElement.on("click",function(){t.setSize(),t.options.liveSearch||t.multiple||setTimeout(function(){t.$menu.find(".selected a").focus()},10)}),this.$menu.on("click","li a",function(n){var i=e(this).parent().index(),r=t.$element.val(),a=t.$element.prop("selectedIndex");if(t.multiple&&n.stopPropagation(),n.preventDefault(),!t.isDisabled()&&!e(this).parent().hasClass("disabled")){var o=t.$element.find("option"),s=o.eq(i),l=s.prop("selected"),c=s.parent("optgroup"),u=t.options.maxOptions,d=c.data("maxOptions")||!1;if(t.multiple){if(s.prop("selected",!l),t.setSelected(i,!l),u!==!1||d!==!1){var p=u<o.filter(":selected").length,h=d<c.find("option:selected").length,f=t.options.maxOptionsText,g=f[0].replace("{n}",u),m=f[1].replace("{n}",d),v=e('<div class="notify"></div>');(u&&p||d&&h)&&(f[2]&&(g=g.replace("{var}",f[2][u>1?0:1]),m=m.replace("{var}",f[2][d>1?0:1])),s.prop("selected",!1),t.$menu.append(v),u&&p&&(v.append(e("<div>"+g+"</div>")),t.$element.trigger("maxReached.bs.select")),d&&h&&(v.append(e("<div>"+m+"</div>")),t.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){t.setSelected(i,!1)},10),v.delay(750).fadeOut(300,function(){e(this).remove()}))}}else o.prop("selected",!1),s.prop("selected",!0),t.$menu.find(".selected").removeClass("selected"),t.setSelected(i,!0);t.multiple?t.options.liveSearch&&t.$searchbox.focus():t.$button.focus(),(r!=t.$element.val()&&t.multiple||a!=t.$element.prop("selectedIndex")&&!t.multiple)&&t.$element.change()}}),this.$menu.on("click","li.disabled a, li dt, li .div-contain, .popover-title, .popover-title :not(.close)",function(e){e.target==this&&(e.preventDefault(),e.stopPropagation(),t.options.liveSearch?t.$searchbox.focus():t.$button.focus())}),this.$menu.on("click",".popover-title .close",function(){t.$button.focus()}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(n){t.options.liveSearch?t.$searchbox.focus():t.$button.focus(),n.preventDefault(),n.stopPropagation(),e(this).is(".bs-select-all")?t.selectAll():t.deselectAll(),t.$element.change()}),this.$element.change(function(){t.render(!1)})},liveSearchListener:function(){var t=this,n=e('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api",function(){t.$menu.find(".active").removeClass("active"),t.$searchbox.val()&&(t.$searchbox.val(""),t.$lis.not(".is-hidden").removeClass("hide"),n.parent().length&&n.remove()),t.multiple||t.$menu.find(".selected").addClass("active"),setTimeout(function(){t.$searchbox.focus()},10)}),this.$searchbox.on("input propertychange",function(){t.$searchbox.val()?(t.$lis.not(".is-hidden").removeClass("hide").find("a").not(":icontains("+t.$searchbox.val()+")").parent().addClass("hide"),t.$menu.find("li").filter(":visible:not(.no-results)").length?n.parent().length&&n.remove():(n.parent().length&&n.remove(),n.html(t.options.noneResultsText+' "'+t.$searchbox.val()+'"').show(),t.$menu.find("li").last().after(n))):(t.$lis.not(".is-hidden").removeClass("hide"),n.parent().length&&n.remove()),t.$menu.find("li.active").removeClass("active"),t.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus(),e(this).focus()}),this.$menu.on("mouseenter","a",function(n){t.$menu.find(".active").removeClass("active"),e(n.currentTarget).parent().not(".disabled").addClass("active")}),this.$menu.on("mouseleave","a",function(){t.$menu.find(".active").removeClass("active")})},val:function(e){return void 0!==e?(this.$element.val(e),this.$element.change(),this.$element):this.$element.val()},selectAll:function(){null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$element.find("option:enabled").prop("selected",!0),e(this.$lis).filter(":not(.disabled)").addClass("selected"),this.render(!1)},deselectAll:function(){null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$element.find("option:enabled").prop("selected",!1),e(this.$lis).filter(":not(.disabled)").removeClass("selected"),this.render(!1)},keydown:function(t){var n,i,r,a,o,s,l,c,u,d,p,h,f={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(n=e(this),r=n.parent(),n.is("input")&&(r=n.parent().parent()),d=r.data("this"),d.options.liveSearch&&(r=n.parent().parent()),d.options.container&&(r=d.$menu),i=e("[role=menu] li:not(.divider) a",r),h=d.$menu.parent().hasClass("open"),!h&&/([0-9]|[A-z])/.test(String.fromCharCode(t.keyCode))&&(d.options.container?d.$newElement.trigger("click"):(d.setSize(),d.$menu.parent().addClass("open"),h=d.$menu.parent().hasClass("open")),d.$searchbox.focus()),d.options.liveSearch&&(/(^9$|27)/.test(t.keyCode)&&h&&0===d.$menu.find(".active").length&&(t.preventDefault(),
d.$menu.parent().removeClass("open"),d.$button.focus()),i=e("[role=menu] li:not(.divider):visible",r),n.val()||/(38|40)/.test(t.keyCode)||0===i.filter(".active").length&&(i=d.$newElement.find("li").filter(":icontains("+f[t.keyCode]+")"))),i.length){if(/(38|40)/.test(t.keyCode))a=i.index(i.filter(":focus")),s=i.parent(":not(.disabled):visible").first().index(),l=i.parent(":not(.disabled):visible").last().index(),o=i.eq(a).parent().nextAll(":not(.disabled):visible").eq(0).index(),c=i.eq(a).parent().prevAll(":not(.disabled):visible").eq(0).index(),u=i.eq(o).parent().prevAll(":not(.disabled):visible").eq(0).index(),d.options.liveSearch&&(i.each(function(t){e(this).is(":not(.disabled)")&&e(this).data("index",t)}),a=i.index(i.filter(".active")),s=i.filter(":not(.disabled):visible").first().data("index"),l=i.filter(":not(.disabled):visible").last().data("index"),o=i.eq(a).nextAll(":not(.disabled):visible").eq(0).data("index"),c=i.eq(a).prevAll(":not(.disabled):visible").eq(0).data("index"),u=i.eq(o).prevAll(":not(.disabled):visible").eq(0).data("index")),p=n.data("prevIndex"),38==t.keyCode&&(d.options.liveSearch&&(a-=1),a!=u&&a>c&&(a=c),s>a&&(a=s),a==p&&(a=l)),40==t.keyCode&&(d.options.liveSearch&&(a+=1),-1==a&&(a=0),a!=u&&o>a&&(a=o),a>l&&(a=l),a==p&&(a=s)),n.data("prevIndex",a),d.options.liveSearch?(t.preventDefault(),n.is(".dropdown-toggle")||(i.removeClass("active"),i.eq(a).addClass("active").find("a").focus(),n.focus())):i.eq(a).focus();else if(!n.is("input")){var g,m,v=[];i.each(function(){e(this).parent().is(":not(.disabled)")&&e.trim(e(this).text().toLowerCase()).substring(0,1)==f[t.keyCode]&&v.push(e(this).parent().index())}),g=e(document).data("keycount"),g++,e(document).data("keycount",g),m=e.trim(e(":focus").text().toLowerCase()).substring(0,1),m!=f[t.keyCode]?(g=1,e(document).data("keycount",g)):g>=v.length&&(e(document).data("keycount",0),g>v.length&&(g=1)),i.eq(v[g-1]).focus()}/(13|32|^9$)/.test(t.keyCode)&&h&&(/(32)/.test(t.keyCode)||t.preventDefault(),d.options.liveSearch?/(32)/.test(t.keyCode)||(d.$menu.find(".active a").click(),n.focus()):e(":focus").click(),e(document).data("keycount",0)),(/(^9$|27)/.test(t.keyCode)&&h&&(d.multiple||d.options.liveSearch)||/(27)/.test(t.keyCode)&&!h)&&(d.$menu.parent().removeClass("open"),d.$button.focus())}},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},destroy:function(){this.$newElement.remove(),this.$element.remove()}},e.fn.selectpicker=function(n,i){var r,a=arguments,o=this.each(function(){if(e(this).is("select")){var o=e(this),s=o.data("selectpicker"),l="object"==typeof n&&n;if(s){if(l)for(var c in l)s.options[c]=l[c]}else o.data("selectpicker",s=new t(this,l,i));if("string"==typeof n){var u=n;s[u]instanceof Function?([].shift.apply(a),r=s[u].apply(s,a)):r=s.options[u]}}});return void 0!==r?r:o},e.fn.selectpicker.defaults={style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:"{0} of {1} selected",maxOptionsText:["Limit reached ({n} {var} max)","Group limit reached ({n} {var} max)",["items","item"]],width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,actionsBox:!1,multipleSeparator:", ",iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1},e(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",t.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",function(e){e.stopPropagation()})}(window.jQuery),function(){var e;!function(){var t=!1,n=/xyz/.test(function(){window.postMessage("xyz")})?/\b_super\b/:/.*/;return e=function(){},e.extend=function(e){function i(){!t&&this.init&&this.init.apply(this,arguments)}var r=this.prototype;t=!0;var a=new this;t=!1;for(var o in e)a[o]="function"==typeof e[o]&&"function"==typeof r[o]&&n.test(e[o])?function(e,t){return function(){var n=this._super;this._super=r[e];var i=t.apply(this,arguments);return this._super=n,i}}(o,e[o]):e[o];return i.prototype=a,i.prototype.constructor=i,i.extend=arguments.callee,i},e}(),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),r=Math.max(0,16-(i-e)),a=window.setTimeout(function(){t(i+r)},r);return e=i+r,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)})}();var t=function(e){var t;if(!e||"object"!=typeof e||e.nodeType||e===window)return!1;if(e.constructor&&!e.hasOwnProperty("constructor")&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1;try{if(e.constructor&&!e.hasOwnProperty("constructor")&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(n){return!1}if(/msie 8\.0/i.test(window.navigator.userAgent))for(t in e)return e.hasOwnProperty(t);for(t in e);return void 0===t||e.hasOwnProperty(t)},n=function(e){var i,r,a;for(r=1;r<arguments.length;r++){i=arguments[r];for(a in i)i.hasOwnProperty(a)&&(i[a]&&t(i[a])?(e.hasOwnProperty(a)||(e[a]={}),n(e[a],i[a])):e[a]=i[a])}return e},i=function(e,t){if(e&&"object"==typeof e){var n;if(Array.isArray(e)||"number"==typeof e.length&&e.length>0&&e.length-1 in e){for(n=0;n<e.length;n++)if(t(n,e[n])===!1)return}else for(n in e)if(e.hasOwnProperty(n)&&t(n,e[n])===!1)return}},r=function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)},a=function(e,t){if(!(e instanceof Element))throw new Error("element should be an instance of Element");t=n({},a.defaults.options,t||{}),this.element=e,this.options=t,this.init()};a.prototype={init:function(){var e=this;this.ready=!1;var t=a.defaults.themes[this.options.theme||a.defaults.theme];if(!t)throw"Unknown theme "+(this.options.theme||a.defaults.theme);this.schema=this.options.schema,this.theme=new t,this.template=this.options.template,this.refs=this.options.refs||{},this.uuid=0,this.__data={};var n=a.defaults.iconlibs[this.options.iconlib||a.defaults.iconlib];n&&(this.iconlib=new n),this.root_container=this.theme.getContainer(),this.element.appendChild(this.root_container),this.translate=this.options.translate||a.defaults.translate,this._loadExternalRefs(this.schema,function(){e._getDefinitions(e.schema),e.validator=new a.Validator(e);var t=e.getEditorClass(e.schema);e.root=e.createEditor(t,{jsoneditor:e,schema:e.schema,required:!0,container:e.root_container}),e.root.preBuild(),e.root.build(),e.root.postBuild(),e.options.startval&&e.root.setValue(e.options.startval),e.validation_results=e.validator.validate(e.root.getValue()),e.root.showValidationErrors(e.validation_results),e.ready=!0,window.requestAnimationFrame(function(){e.ready&&(e.validation_results=e.validator.validate(e.root.getValue()),e.root.showValidationErrors(e.validation_results),e.trigger("ready"),e.trigger("change"))})})},getValue:function(){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before getting the value";return this.root.getValue()},setValue:function(e){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before setting the value";return this.root.setValue(e),this},validate:function(e){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before validating";return 1===arguments.length?this.validator.validate(e):this.validation_results},destroy:function(){this.destroyed||this.ready&&(this.schema=null,this.options=null,this.root.destroy(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,this.__data=null,this.ready=!1,this.element.innerHTML="",this.destroyed=!0)},on:function(e,t){return this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].push(t),this},off:function(e,t){if(e&&t){this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[];for(var n=[],i=0;i<this.callbacks[e].length;i++)this.callbacks[e][i]!==t&&n.push(this.callbacks[e][i]);this.callbacks[e]=n}else e?(this.callbacks=this.callbacks||{},this.callbacks[e]=[]):this.callbacks={};return this},trigger:function(e){if(this.callbacks&&this.callbacks[e]&&this.callbacks[e].length)for(var t=0;t<this.callbacks[e].length;t++)this.callbacks[e][t]();return this},setOption:function(e,t){if("show_errors"!==e)throw"Option "+e+" must be set during instantiation and cannot be changed later";return this.options.show_errors=t,this.onChange(),this},getEditorClass:function(e){var t;if(e=this.expandSchema(e),i(a.defaults.resolvers,function(n,i){var r=i(e);return r&&a.defaults.editors[r]?(t=r,!1):void 0}),!t)throw"Unknown editor for schema "+JSON.stringify(e);if(!a.defaults.editors[t])throw"Unknown editor "+t;return a.defaults.editors[t]},createEditor:function(e,t){return t=n({},e.options||{},t),new e(t)},onChange:function(){if(this.ready&&!this.firing_change){this.firing_change=!0;var e=this;return window.requestAnimationFrame(function(){e.firing_change=!1,e.ready&&(e.validation_results=e.validator.validate(e.root.getValue()),e.root.showValidationErrors("never"!==e.options.show_errors?e.validation_results:[]),e.trigger("change"))}),this}},compileTemplate:function(e,t){t=t||a.defaults.template;var n;if("string"==typeof t){if(!a.defaults.templates[t])throw"Unknown template engine "+t;if(n=a.defaults.templates[t](),!n)throw"Template engine "+t+" missing required library."}else n=t;if(!n)throw"No template engine set";if(!n.compile)throw"Invalid template engine set";return n.compile(e)},_data:function(e,t,n){if(3!==arguments.length)return e.hasAttribute("data-jsoneditor-"+t)?this.__data[e.getAttribute("data-jsoneditor-"+t)]:null;var i;e.hasAttribute("data-jsoneditor-"+t)?i=e.getAttribute("data-jsoneditor-"+t):(i=this.uuid++,e.setAttribute("data-jsoneditor-"+t,i)),this.__data[i]=n},registerEditor:function(e){return this.editors=this.editors||{},this.editors[e.path]=e,this},unregisterEditor:function(e){return this.editors=this.editors||{},this.editors[e.path]=null,this},getEditor:function(e){return this.editors?this.editors[e]:void 0},watch:function(e,t){return this.watchlist=this.watchlist||{},this.watchlist[e]=this.watchlist[e]||[],this.watchlist[e].push(t),this},unwatch:function(e,t){if(!this.watchlist||!this.watchlist[e])return this;if(!t)return this.watchlist[e]=null,this;for(var n=[],i=0;i<this.watchlist[e].length;i++)this.watchlist[e][i]!==t&&n.push(this.watchlist[e][i]);return this.watchlist[e]=n.length?n:null,this},notifyWatchers:function(e){if(!this.watchlist||!this.watchlist[e])return this;for(var t=0;t<this.watchlist[e].length;t++)this.watchlist[e][t]()},isEnabled:function(){return!this.root||this.root.isEnabled()},enable:function(){this.root.enable()},disable:function(){this.root.disable()},_getDefinitions:function(e,t){if(t=t||"#/definitions/",e.definitions)for(var n in e.definitions)e.definitions.hasOwnProperty(n)&&(this.refs[t+n]=e.definitions[n],e.definitions[n].definitions&&this._getDefinitions(e.definitions[n],t+n+"/definitions/"))},_getExternalRefs:function(e){var t={},n=function(e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=!0)};e.$ref&&"object"!=typeof e.$ref&&"#"!==e.$ref.substr(0,1)&&!this.refs[e.$ref]&&(t[e.$ref]=!0);for(var i in e)if(e.hasOwnProperty(i))if(e[i]&&"object"==typeof e[i]&&Array.isArray(e[i]))for(var r=0;r<e[i].length;r++)"object"==typeof e[i][r]&&n(this._getExternalRefs(e[i][r]));else e[i]&&"object"==typeof e[i]&&n(this._getExternalRefs(e[i]));return t},_loadExternalRefs:function(e,t){var n=this,r=this._getExternalRefs(e),a=0,o=0,s=!1;i(r,function(e){if(!n.refs[e]){if(!n.options.ajax)throw"Must set ajax option to true to load external ref "+e;n.refs[e]="loading",o++;var i=new XMLHttpRequest;i.open("GET",e,!0),i.onreadystatechange=function(){if(4==i.readyState){if(200!==i.status)throw window.console.log(i),"Failed to fetch ref via ajax- "+e;var r;try{r=JSON.parse(i.responseText)}catch(l){throw window.console.log(l),"Failed to parse external ref "+e}if(!r||"object"!=typeof r)throw"External ref does not contain a valid schema - "+e;n.refs[e]=r,n._loadExternalRefs(r,function(){a++,a>=o&&!s&&(s=!0,t())})}},i.send()}}),o||t()},expandRefs:function(e){for(e=n({},e);e.$ref;){var t=e.$ref;delete e.$ref,this.refs[t]||(t=decodeURIComponent(t)),e=this.extendSchemas(e,this.refs[t])}return e},expandSchema:function(e){var t,r=this,a=n({},e);if("object"==typeof e.type&&(Array.isArray(e.type)?i(e.type,function(t,n){"object"==typeof n&&(e.type[t]=r.expandSchema(n))}):e.type=r.expandSchema(e.type)),"object"==typeof e.disallow&&(Array.isArray(e.disallow)?i(e.disallow,function(t,n){"object"==typeof n&&(e.disallow[t]=r.expandSchema(n))}):e.disallow=r.expandSchema(e.disallow)),e.anyOf&&i(e.anyOf,function(t,n){e.anyOf[t]=r.expandSchema(n)}),e.dependencies&&i(e.dependencies,function(t,n){"object"!=typeof n||Array.isArray(n)||(e.dependencies[t]=r.expandSchema(n))}),e.not&&(e.not=this.expandSchema(e.not)),e.allOf){for(t=0;t<e.allOf.length;t++)a=this.extendSchemas(a,this.expandSchema(e.allOf[t]));delete a.allOf}if(e["extends"]){if(Array.isArray(e["extends"]))for(t=0;t<e["extends"].length;t++)a=this.extendSchemas(a,this.expandSchema(e["extends"][t]));else a=this.extendSchemas(a,this.expandSchema(e["extends"]));delete a["extends"]}if(e.oneOf){var o=n({},a);for(delete o.oneOf,t=0;t<e.oneOf.length;t++)a.oneOf[t]=this.extendSchemas(this.expandSchema(e.oneOf[t]),o)}return this.expandRefs(a)},extendSchemas:function(e,t){e=n({},e),t=n({},t);var r=this,a={};return i(e,function(e,n){"undefined"!=typeof t[e]?"required"===e&&"object"==typeof n&&Array.isArray(n)?a.required=n.concat(t[e]).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]):"type"!==e||"string"!=typeof n&&!Array.isArray(n)?a[e]="object"==typeof n&&Array.isArray(n)?n.filter(function(n){return-1!==t[e].indexOf(n)}):"object"==typeof n&&null!==n?r.extendSchemas(n,t[e]):n:("string"==typeof n&&(n=[n]),"string"==typeof t.type&&(t.type=[t.type]),a.type=n.filter(function(e){return-1!==t.type.indexOf(e)}),1===a.type.length&&"string"==typeof a.type[0]&&(a.type=a.type[0])):a[e]=n}),i(t,function(t,n){"undefined"==typeof e[t]&&(a[t]=n)}),a}},a.defaults={themes:{},templates:{},iconlibs:{},editors:{},languages:{},resolvers:[],custom_validators:[]},a.Validator=e.extend({init:function(e,t){this.jsoneditor=e,this.schema=t||this.jsoneditor.schema,this.options={},this.translate=this.jsoneditor.translate||a.defaults.translate},validate:function(e){return this._validateSchema(this.schema,e)},_validateSchema:function(e,t,r){var o,s,l,c=this,u=[],d=JSON.stringify(t);if(r=r||"root",e=n({},this.jsoneditor.expandRefs(e)),e.required&&e.required===!0){if("undefined"==typeof t)return u.push({path:r,property:"required",message:this.translate("error_notset")}),u}else if("undefined"==typeof t){if(!this.jsoneditor.options.required_by_default)return u;u.push({path:r,property:"required",message:this.translate("error_notset")})}if(e["enum"]){for(o=!1,s=0;s<e["enum"].length;s++)d===JSON.stringify(e["enum"][s])&&(o=!0);o||u.push({path:r,property:"enum",message:this.translate("error_enum")})}if(e["extends"])for(s=0;s<e["extends"].length;s++)u=u.concat(this._validateSchema(e["extends"][s],t,r));if(e.allOf)for(s=0;s<e.allOf.length;s++)u=u.concat(this._validateSchema(e.allOf[s],t,r));if(e.anyOf){for(o=!1,s=0;s<e.anyOf.length;s++)if(!this._validateSchema(e.anyOf[s],t,r).length){o=!0;break}o||u.push({path:r,property:"anyOf",message:this.translate("error_anyOf")})}if(e.oneOf){o=0;var p=[];for(s=0;s<e.oneOf.length;s++){var h=this._validateSchema(e.oneOf[s],t,r);for(h.length||o++,l=0;l<h.length;l++)h[l].path=r+".oneOf["+s+"]"+h[l].path.substr(r.length);p=p.concat(h)}1!==o&&(u.push({path:r,property:"oneOf",message:this.translate("error_oneOf",[o])}),u=u.concat(p))}if(e.not&&(this._validateSchema(e.not,t,r).length||u.push({path:r,property:"not",message:this.translate("error_not")})),e.type)if(Array.isArray(e.type)){for(o=!1,s=0;s<e.type.length;s++)if(this._checkType(e.type[s],t)){o=!0;break}o||u.push({path:r,property:"type",message:this.translate("error_type_union")})}else this._checkType(e.type,t)||u.push({path:r,property:"type",message:this.translate("error_type",[e.type])});if(e.disallow)if(Array.isArray(e.disallow)){for(o=!0,s=0;s<e.disallow.length;s++)if(this._checkType(e.disallow[s],t)){o=!1;break}o||u.push({path:r,property:"disallow",message:this.translate("error_disallow_union")})}else this._checkType(e.disallow,t)&&u.push({path:r,property:"disallow",message:this.translate("error_disallow",[e.disallow])});if("number"==typeof t)(e.multipleOf||e.divisibleBy)&&(o=t/(e.multipleOf||e.divisibleBy),o!==Math.floor(o)&&u.push({path:r,property:e.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[e.multipleOf||e.divisibleBy])})),e.hasOwnProperty("maximum")&&(e.exclusiveMaximum&&t>=e.maximum?u.push({path:r,property:"maximum",message:this.translate("error_maximum_excl",[e.maximum])}):!e.exclusiveMaximum&&t>e.maximum&&u.push({path:r,property:"maximum",message:this.translate("error_maximum_incl",[e.maximum])})),e.hasOwnProperty("minimum")&&(e.exclusiveMinimum&&t<=e.minimum?u.push({path:r,property:"minimum",message:this.translate("error_minimum_excl",[e.minimum])}):!e.exclusiveMinimum&&t<e.minimum&&u.push({path:r,property:"minimum",message:this.translate("error_minimum_incl",[e.minimum])}));else if("string"==typeof t)e.maxLength&&(t+"").length>e.maxLength&&u.push({path:r,property:"maxLength",message:this.translate("error_maxLength",[e.maxLength])}),e.minLength&&(t+"").length<e.minLength&&u.push({path:r,property:"minLength",message:this.translate(1===e.minLength?"error_notempty":"error_minLength",[e.minLength])}),e.pattern&&(new RegExp(e.pattern).test(t)||u.push({path:r,property:"pattern",message:this.translate("error_pattern")}));else if("object"==typeof t&&null!==t&&Array.isArray(t)){if(e.items)if(Array.isArray(e.items))for(s=0;s<t.length;s++)if(e.items[s])u=u.concat(this._validateSchema(e.items[s],t[s],r+"."+s));else{if(e.additionalItems===!0)break;if(!e.additionalItems){if(e.additionalItems===!1){u.push({path:r,property:"additionalItems",message:this.translate("error_additionalItems")});break}break}u=u.concat(this._validateSchema(e.additionalItems,t[s],r+"."+s))}else for(s=0;s<t.length;s++)u=u.concat(this._validateSchema(e.items,t[s],r+"."+s));if(e.maxItems&&t.length>e.maxItems&&u.push({path:r,property:"maxItems",message:this.translate("error_maxItems",[e.maxItems])}),e.minItems&&t.length<e.minItems&&u.push({path:r,property:"minItems",message:this.translate("error_minItems",[e.minItems])}),e.uniqueItems){var f={};for(s=0;s<t.length;s++){if(o=JSON.stringify(t[s]),f[o]){u.push({path:r,property:"uniqueItems",message:this.translate("error_uniqueItems")});break}f[o]=!0}}}else if("object"==typeof t&&null!==t){if(e.maxProperties){o=0;for(s in t)t.hasOwnProperty(s)&&o++;o>e.maxProperties&&u.push({path:r,property:"maxProperties",message:this.translate("error_maxProperties",[e.maxProperties])})}if(e.minProperties){o=0;for(s in t)t.hasOwnProperty(s)&&o++;o<e.minProperties&&u.push({path:r,property:"minProperties",message:this.translate("error_minProperties",[e.minProperties])})}if(e.required&&Array.isArray(e.required))for(s=0;s<e.required.length;s++)"undefined"==typeof t[e.required[s]]&&u.push({path:r,property:"required",message:this.translate("error_required",[e.required[s]])});var g={};if(e.properties)for(s in e.properties)e.properties.hasOwnProperty(s)&&(g[s]=!0,u=u.concat(this._validateSchema(e.properties[s],t[s],r+"."+s)));if(e.patternProperties)for(s in e.patternProperties)if(e.patternProperties.hasOwnProperty(s)){var m=new RegExp(s);for(l in t)t.hasOwnProperty(l)&&m.test(l)&&(g[l]=!0,u=u.concat(this._validateSchema(e.patternProperties[s],t[l],r+"."+l)))}if("undefined"!=typeof e.additionalProperties||!this.jsoneditor.options.no_additional_properties||e.oneOf||e.anyOf||(e.additionalProperties=!1),"undefined"!=typeof e.additionalProperties)for(s in t)if(t.hasOwnProperty(s)&&!g[s]){if(!e.additionalProperties){u.push({path:r,property:"additionalProperties",message:this.translate("error_additional_properties",[s])});break}if(e.additionalProperties===!0)break;u=u.concat(this._validateSchema(e.additionalProperties,t[s],r+"."+s))}if(e.dependencies)for(s in e.dependencies)if(e.dependencies.hasOwnProperty(s)&&"undefined"!=typeof t[s])if(Array.isArray(e.dependencies[s]))for(l=0;l<e.dependencies[s].length;l++)"undefined"==typeof t[e.dependencies[s][l]]&&u.push({path:r,property:"dependencies",message:this.translate("error_dependency",[e.dependencies[s][l]])});else u=u.concat(this._validateSchema(e.dependencies[s],t,r))}return i(a.defaults.custom_validators,function(n,i){u=u.concat(i.call(c,e,t,r))}),u},_checkType:function(e,t){return"string"==typeof e?"string"===e?"string"==typeof t:"number"===e?"number"==typeof t:"integer"===e?"number"==typeof t&&t===Math.floor(t):"boolean"===e?"boolean"==typeof t:"array"===e?Array.isArray(t):"object"===e?null!==t&&!Array.isArray(t)&&"object"==typeof t:"null"===e?null===t:!0:!this._validateSchema(e,t).length}}),a.AbstractEditor=e.extend({onChildEditorChange:function(e){this.onChange(!0)},notify:function(){this.jsoneditor.notifyWatchers(this.path)},change:function(){this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange()},onChange:function(e){this.notify(),this.watch_listener&&this.watch_listener(),e&&this.change()},register:function(){this.jsoneditor.registerEditor(this),this.onChange()},unregister:function(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)},getNumColumns:function(){return 12},init:function(e){this.jsoneditor=e.jsoneditor,this.theme=this.jsoneditor.theme,this.template_engine=this.jsoneditor.template,this.iconlib=this.jsoneditor.iconlib,this.original_schema=e.schema,this.schema=this.jsoneditor.expandSchema(this.original_schema),this.options=n({},this.options||{},e.schema.options||{},e),e.path||this.schema.id||(this.schema.id="root"),this.path=e.path||"root",this.formname=e.formname||this.path.replace(/\.([^.]+)/g,"[$1]"),this.jsoneditor.options.form_name_root&&(this.formname=this.formname.replace(/^root\[/,this.jsoneditor.options.form_name_root+"[")),this.key=this.path.split(".").pop(),this.parent=e.parent,this.link_watchers=[],e.container&&this.setContainer(e.container)},setContainer:function(e){this.container=e,this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id),this.schema.type&&"string"==typeof this.schema.type&&this.container.setAttribute("data-schematype",this.schema.type),this.container.setAttribute("data-schemapath",this.path)},preBuild:function(){},build:function(){},postBuild:function(){this.setupWatchListeners(),this.addLinks(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.register(),this.onWatchedFieldChange()},setupWatchListeners:function(){var e=this;if(this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener=function(){e.refreshWatchedFieldValues()&&e.onWatchedFieldChange()},this.register(),this.schema.hasOwnProperty("watch")){var t,n,i,r,a;for(var o in this.schema.watch)if(this.schema.watch.hasOwnProperty(o)){if(t=this.schema.watch[o],Array.isArray(t)?n=[t[0]].concat(t[1].split(".")):(n=t.split("."),e.theme.closest(e.container,'[data-schemaid="'+n[0]+'"]')||n.unshift("#")),i=n.shift(),"#"===i&&(i=e.jsoneditor.schema.id||"root"),r=e.theme.closest(e.container,'[data-schemaid="'+i+'"]'),!r)throw"Could not find ancestor node with id "+i;a=r.getAttribute("data-schemapath")+"."+n.join("."),e.jsoneditor.watch(a,e.watch_listener),e.watched[o]=a}}this.schema.headerTemplate&&(this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))},addLinks:function(){if(!this.no_link_holder&&(this.link_holder=this.theme.getLinksHolder(),this.container.appendChild(this.link_holder),this.schema.links))for(var e=0;e<this.schema.links.length;e++)this.addLink(this.getLink(this.schema.links[e]))},getButton:function(e,t,n){var i="json-editor-btn-"+t;t=this.iconlib?this.iconlib.getIcon(t):null,!t&&n&&(e=n,n=null);var r=this.theme.getButton(e,t,n);return r.className+=" "+i+" ",r},setButtonText:function(e,t,n,i){return n=this.iconlib?this.iconlib.getIcon(n):null,!n&&i&&(t=i,i=null),this.theme.setButtonText(e,t,n,i)},addLink:function(e){this.link_holder&&this.link_holder.appendChild(e)},getLink:function(e){var t,n,i=e.mediaType||"application/javascript",r=i.split("/")[0],a=this.jsoneditor.compileTemplate(e.href,this.template_engine);if("image"===r){t=this.theme.getBlockLinkHolder(),n=document.createElement("a"),n.setAttribute("target","_blank");var o=document.createElement("img");this.theme.createImageLink(t,n,o),this.link_watchers.push(function(t){var i=a(t);n.setAttribute("href",i),n.setAttribute("title",e.rel||i),o.setAttribute("src",i)})}else if(["audio","video"].indexOf(r)>=0){t=this.theme.getBlockLinkHolder(),n=this.theme.getBlockLink(),n.setAttribute("target","_blank");var s=document.createElement(r);s.setAttribute("controls","controls"),this.theme.createMediaLink(t,n,s),this.link_watchers.push(function(t){var i=a(t);n.setAttribute("href",i),n.textContent=e.rel||i,s.setAttribute("src",i)})}else t=this.theme.getBlockLink(),t.setAttribute("target","_blank"),t.textContent=e.rel,this.link_watchers.push(function(n){var i=a(n);t.setAttribute("href",i),t.textContent=e.rel||i});return t},refreshWatchedFieldValues:function(){if(this.watched_values){var e={},t=!1,n=this;if(this.watched){var i,r;for(var a in this.watched)this.watched.hasOwnProperty(a)&&(r=n.jsoneditor.getEditor(this.watched[a]),i=r?r.getValue():null,n.watched_values[a]!==i&&(t=!0),e[a]=i)}return e.self=this.getValue(),this.watched_values.self!==e.self&&(t=!0),this.watched_values=e,t}},getWatchedFieldValues:function(){return this.watched_values},updateHeaderText:function(){if(this.header)if(this.header.children.length){for(var e=0;e<this.header.childNodes.length;e++)if(3===this.header.childNodes[e].nodeType){this.header.childNodes[e].nodeValue=this.getHeaderText();break}}else this.header.textContent=this.getHeaderText()},getHeaderText:function(e){return this.header_text?this.header_text:e?this.schema.title:this.getTitle()},onWatchedFieldChange:function(){var e;if(this.header_template){e=n(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:1*this.key,i1:1*this.key+1,title:this.getTitle()});var t=this.header_template(e);t!==this.header_text&&(this.header_text=t,this.updateHeaderText(),this.notify())}if(this.link_watchers.length){e=this.getWatchedFieldValues();for(var i=0;i<this.link_watchers.length;i++)this.link_watchers[i](e)}},setValue:function(e){this.value=e},getValue:function(){return this.value},refreshValue:function(){},getChildEditors:function(){return!1},destroy:function(){var e=this;this.unregister(this),i(this.watched,function(t,n){e.jsoneditor.unwatch(n,e.watch_listener)}),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null},getDefault:function(){if(this.schema["default"])return this.schema["default"];if(this.schema["enum"])return this.schema["enum"][0];var e=this.schema.type||this.schema.oneOf;if(e&&Array.isArray(e)&&(e=e[0]),e&&"object"==typeof e&&(e=e.type),e&&Array.isArray(e)&&(e=e[0]),"string"==typeof e){if("number"===e)return 0;if("boolean"===e)return!1;if("integer"===e)return 0;if("string"===e)return"";if("object"===e)return{};if("array"===e)return[]}return null},getTitle:function(){return this.schema.title||this.key},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},isEnabled:function(){return!this.disabled},getDisplayText:function(e){var t=[],n={};i(e,function(e,t){t.title&&(n[t.title]=n[t.title]||0,n[t.title]++),t.description&&(n[t.description]=n[t.description]||0,n[t.description]++),t.format&&(n[t.format]=n[t.format]||0,n[t.format]++),t.type&&(n[t.type]=n[t.type]||0,n[t.type]++)}),i(e,function(e,i){var r;r="string"==typeof i?i:i.title&&n[i.title]<=1?i.title:i.format&&n[i.format]<=1?i.format:i.type&&n[i.type]<=1?i.type:i.description&&n[i.description]<=1?i.descripton:i.title?i.title:i.format?i.format:i.type?i.type:i.description?i.description:JSON.stringify(i).length<50?JSON.stringify(i):"type",t.push(r)});var r={};return i(t,function(e,i){r[i]=r[i]||0,r[i]++,n[i]>1&&(t[e]=i+" "+r[i])}),t},getOption:function(e){try{throw"getOption is deprecated"}catch(t){window.console.error(t)}return this.options[e]},showValidationErrors:function(e){}}),a.defaults.editors["null"]=a.AbstractEditor.extend({getValue:function(){return null},setValue:function(){this.onChange()},getNumColumns:function(){return 2}}),a.defaults.editors.string=a.AbstractEditor.extend({register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},setValue:function(e,t,n){if((!this.template||n)&&(null===e?e="":"object"==typeof e?e=JSON.stringify(e):"string"!=typeof e&&(e=""+e),e!==this.serialized)){var i=this.sanitize(e);if(this.input.value!==i){this.input.value=i,this.sceditor_instance?this.sceditor_instance.val(i):this.epiceditor?this.epiceditor.importFile(null,i):this.ace_editor&&this.ace_editor.setValue(i);var r=n||this.getValue()!==e;this.refreshValue(),t?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(r)}}},getNumColumns:function(){var e,t=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);return e="textarea"===this.input_type?6:["text","email"].indexOf(this.input_type)>=0?4:2,Math.min(12,Math.max(t,e))},build:function(){var e=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.format=this.schema.format,!this.format&&this.schema.media&&this.schema.media.type&&(this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"")),!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.format)if("textarea"===this.format)this.input_type="textarea",this.input=this.theme.getTextareaInput();else if("range"===this.format){this.input_type="range";var t=this.schema.minimum||0,n=this.schema.maximum||Math.max(100,t+1),i=1;this.schema.multipleOf&&(t%this.schema.multipleOf&&(t=Math.ceil(t/this.schema.multipleOf)*this.schema.multipleOf),n%this.schema.multipleOf&&(n=Math.floor(n/this.schema.multipleOf)*this.schema.multipleOf),i=this.schema.multipleOf),this.input=this.theme.getRangeInput(t,n,i)}else["actionscript","batchfile","bbcode","c","c++","cpp","coffee","csharp","css","dart","django","ejs","erlang","golang","handlebars","haskell","haxe","html","ini","jade","java","javascript","json","less","lisp","lua","makefile","markdown","matlab","mysql","objectivec","pascal","perl","pgsql","php","python","r","ruby","sass","scala","scss","smarty","sql","stylus","svg","twig","vbscript","xml","yaml"].indexOf(this.format)>=0?(this.input_type=this.format,
this.source_code=!0,this.input=this.theme.getTextareaInput()):(this.input_type=this.format,this.input=this.theme.getFormInputField(this.input_type));else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);"undefined"!=typeof this.schema.maxLength&&this.input.setAttribute("maxlength",this.schema.maxLength),"undefined"!=typeof this.schema.pattern?this.input.setAttribute("pattern",this.schema.pattern):"undefined"!=typeof this.schema.minLength&&this.input.setAttribute("pattern",".{"+this.schema.minLength+",}"),this.options.compact?this.container.className+=" compact":this.options.input_width&&(this.input.style.width=this.options.input_width),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),e.schema.template)return void(this.value=e.value);var n=this.value,i=e.sanitize(n);n!==i&&(this.value=i),e.is_dirty=!0,e.refreshValue(),e.onChange(!0)}),this.options.input_height&&(this.input.style.height=this.options.input_height),this.options.expand_height&&(this.adjust_height=function(e){if(e){var t,n=e.offsetHeight;if(e.offsetHeight<e.scrollHeight)for(t=0;e.offsetHeight<e.scrollHeight+3&&!(t>100);)t++,n++,e.style.height=n+"px";else{for(t=0;e.offsetHeight>=e.scrollHeight+3&&!(t>100);)t++,n--,e.style.height=n+"px";e.style.height=n+1+"px"}}},this.input.addEventListener("keyup",function(t){e.adjust_height(this)}),this.input.addEventListener("change",function(t){e.adjust_height(this)}),this.adjust_height()),this.format&&this.input.setAttribute("data-schemaformat",this.format),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),window.requestAnimationFrame(function(){e.input.parentNode&&e.afterInputReady(),e.adjust_height&&e.adjust_height(e.input)}),this.schema.template?(this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()):this.refreshValue()},enable:function(){this.always_disabled||(this.input.disabled=!1),this._super()},disable:function(){this.input.disabled=!0,this._super()},afterInputReady:function(){var e,t=this;if(this.source_code)if(this.options.wysiwyg&&["html","bbcode"].indexOf(this.input_type)>=0&&window.jQuery&&window.jQuery.fn&&window.jQuery.fn.sceditor)e=n({},{plugins:"html"===t.input_type?"xhtml":"bbcode",emoticonsEnabled:!1,width:"100%",height:300},a.plugins.sceditor,t.options.sceditor_options||{}),window.jQuery(t.input).sceditor(e),t.sceditor_instance=window.jQuery(t.input).sceditor("instance"),t.sceditor_instance.blur(function(){var e=window.jQuery("<div>"+t.sceditor_instance.val()+"</div>");window.jQuery("#sceditor-start-marker,#sceditor-end-marker,.sceditor-nlf",e).remove(),t.input.value=e.html(),t.value=t.input.value,t.is_dirty=!0,t.onChange(!0)});else if("markdown"===this.input_type&&window.EpicEditor)this.epiceditor_container=document.createElement("div"),this.input.parentNode.insertBefore(this.epiceditor_container,this.input),this.input.style.display="none",e=n({},a.plugins.epiceditor,{container:this.epiceditor_container,clientSideStorage:!1}),this.epiceditor=new window.EpicEditor(e).load(),this.epiceditor.importFile(null,this.getValue()),this.epiceditor.on("update",function(){var e=t.epiceditor.exportFile();t.input.value=e,t.value=e,t.is_dirty=!0,t.onChange(!0)});else if(window.ace){var i=this.input_type;("cpp"===i||"c++"===i||"c"===i)&&(i="c_cpp"),this.ace_container=document.createElement("div"),this.ace_container.style.width="100%",this.ace_container.style.position="relative",this.ace_container.style.height="400px",this.input.parentNode.insertBefore(this.ace_container,this.input),this.input.style.display="none",this.ace_editor=window.ace.edit(this.ace_container),this.ace_editor.setValue(this.getValue()),a.plugins.ace.theme&&this.ace_editor.setTheme("ace/theme/"+a.plugins.ace.theme),i=window.ace.require("ace/mode/"+i),i&&this.ace_editor.getSession().setMode(new i.Mode),this.ace_editor.on("change",function(){var e=t.ace_editor.getValue();t.input.value=e,t.refreshValue(),t.is_dirty=!0,t.onChange(!0)})}t.theme.afterInputReady(t.input)},refreshValue:function(){this.value=this.input.value,"string"!=typeof this.value&&(this.value=""),this.serialized=this.value},destroy:function(){this.sceditor_instance?this.sceditor_instance.destroy():this.epiceditor?this.epiceditor.unload():this.ace_editor&&this.ace_editor.destroy(),this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this._super()},sanitize:function(e){return e},onWatchedFieldChange:function(){var e;this.template&&(e=this.getWatchedFieldValues(),this.setValue(this.template(e),!1,!0)),this._super()},showValidationErrors:function(e){var t=this;if("always"===this.jsoneditor.options.show_errors);else if(!this.is_dirty&&this.previous_error_setting===this.jsoneditor.options.show_errors)return;this.previous_error_setting=this.jsoneditor.options.show_errors;var n=[];i(e,function(e,i){i.path===t.path&&n.push(i.message)}),n.length?this.theme.addInputError(this.input,n.join(". ")+"."):this.theme.removeInputError(this.input)}}),a.defaults.editors.number=a.defaults.editors.string.extend({sanitize:function(e){return(e+"").replace(/[^0-9\.\-eE]/g,"")},getNumColumns:function(){return 2},getValue:function(){return 1*this.value}}),a.defaults.editors.integer=a.defaults.editors.number.extend({sanitize:function(e){return e+="",e.replace(/[^0-9\-]/g,"")},getNumColumns:function(){return 2}}),a.defaults.editors.object=a.AbstractEditor.extend({getDefault:function(){return n({},this.schema["default"]||{})},getChildEditors:function(){return this.editors},register:function(){if(this._super(),this.editors)for(var e in this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].register()},unregister:function(){if(this._super(),this.editors)for(var e in this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.maxwidth),3)},enable:function(){if(this.editjson_button&&(this.editjson_button.disabled=!1),this.addproperty_button&&(this.addproperty_button.disabled=!1),this._super(),this.editors)for(var e in this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].enable()},disable:function(){if(this.editjson_button&&(this.editjson_button.disabled=!0),this.addproperty_button&&(this.addproperty_button.disabled=!0),this.hideEditJSON(),this._super(),this.editors)for(var e in this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].disable()},layoutEditors:function(){var e,t,n=this;if(this.row_container){this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort(function(e,t){var i=n.editors[e].schema.propertyOrder,r=n.editors[t].schema.propertyOrder;return"number"!=typeof i&&(i=1e3),"number"!=typeof r&&(r=1e3),i-r});var r;if("grid"===this.format){var a=[];for(i(this.property_order,function(e,t){var i=n.editors[t];if(!i.property_removed){for(var r=!1,o=i.options.hidden?0:i.options.grid_columns||i.getNumColumns(),s=i.options.hidden?0:i.container.offsetHeight,l=0;l<a.length;l++)a[l].width+o<=12&&(!s||.5*a[l].minh<s&&2*a[l].maxh>s)&&(r=l);r===!1&&(a.push({width:0,minh:999999,maxh:0,editors:[]}),r=a.length-1),a[r].editors.push({key:t,width:o,height:s}),a[r].width+=o,a[r].minh=Math.min(a[r].minh,s),a[r].maxh=Math.max(a[r].maxh,s)}}),e=0;e<a.length;e++)if(a[e].width<12){var o=!1,s=0;for(t=0;t<a[e].editors.length;t++)o===!1?o=t:a[e].editors[t].width>a[e].editors[o].width&&(o=t),a[e].editors[t].width*=12/a[e].width,a[e].editors[t].width=Math.floor(a[e].editors[t].width),s+=a[e].editors[t].width;12>s&&(a[e].editors[o].width+=12-s),a[e].width=12}if(this.layout===JSON.stringify(a))return!1;for(this.layout=JSON.stringify(a),r=document.createElement("div"),e=0;e<a.length;e++){var l=this.theme.getGridRow();for(r.appendChild(l),t=0;t<a[e].editors.length;t++){var c=a[e].editors[t].key,u=this.editors[c];u.options.hidden?u.container.style.display="none":this.theme.setGridColumnSize(u.container,a[e].editors[t].width),l.appendChild(u.container)}}}else r=document.createElement("div"),i(this.property_order,function(e,t){var i=n.editors[t];if(!i.property_removed){var a=n.theme.getGridRow();r.appendChild(a),i.options.hidden?i.container.style.display="none":n.theme.setGridColumnSize(i.container,12),a.appendChild(i.container)}});this.row_container.innerHTML="",this.row_container.appendChild(r)}},getPropertySchema:function(e){var t=this.schema.properties[e]||{};t=n({},t);var i=this.schema.properties[e]?!0:!1;if(this.schema.patternProperties)for(var r in this.schema.patternProperties)if(this.schema.patternProperties.hasOwnProperty(r)){var a=new RegExp(r);a.test(e)&&(t.allOf=t.allOf||[],t.allOf.push(this.schema.patternProperties[r]),i=!0)}return!i&&this.schema.additionalProperties&&"object"==typeof this.schema.additionalProperties&&(t=n({},this.schema.additionalProperties)),t},preBuild:function(){this._super(),this.editors={},this.cached_editors={};var e=this;if(this.format=this.options.layout||this.options.object_layout||this.schema.format||this.jsoneditor.options.object_layout||"normal",this.schema.properties=this.schema.properties||{},this.minwidth=0,this.maxwidth=0,this.options.table_row)i(this.schema.properties,function(t,n){var i=e.jsoneditor.getEditorClass(n);e.editors[t]=e.jsoneditor.createEditor(i,{jsoneditor:e.jsoneditor,schema:n,path:e.path+"."+t,parent:e,compact:!0,required:!0}),e.editors[t].preBuild();var r=e.editors[t].options.hidden?0:e.editors[t].options.grid_columns||e.editors[t].getNumColumns();e.minwidth+=r,e.maxwidth+=r}),this.no_link_holder=!0;else{if(this.options.table)throw"Not supported yet";this.defaultProperties=this.schema.defaultProperties||Object.keys(this.schema.properties),e.maxwidth+=1,i(this.defaultProperties,function(t,n){e.addObjectProperty(n,!0),e.editors[n]&&(e.minwidth=Math.max(e.minwidth,e.editors[n].options.grid_columns||e.editors[n].getNumColumns()),e.maxwidth+=e.editors[n].options.grid_columns||e.editors[n].getNumColumns())})}this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort(function(t,n){var i=e.editors[t].schema.propertyOrder,r=e.editors[n].schema.propertyOrder;return"number"!=typeof i&&(i=1e3),"number"!=typeof r&&(r=1e3),i-r})},build:function(){var e=this;if(this.options.table_row)this.editor_holder=this.container,i(this.editors,function(t,n){var i=e.theme.getTableCell();e.editor_holder.appendChild(i),n.setContainer(i),n.build(),n.postBuild(),e.editors[t].options.hidden&&(i.style.display="none"),e.editors[t].options.input_width&&(i.style.width=e.editors[t].options.input_width)});else{if(this.options.table)throw"Not supported yet";this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.container.style.position="relative",this.editjson_holder=this.theme.getModal(),this.editjson_textarea=this.theme.getTextareaInput(),this.editjson_textarea.style.height="170px",this.editjson_textarea.style.width="300px",this.editjson_textarea.style.display="block",this.editjson_save=this.getButton("Save","save","Save"),this.editjson_save.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.saveJSON()}),this.editjson_cancel=this.getButton("Cancel","cancel","Cancel"),this.editjson_cancel.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.hideEditJSON()}),this.editjson_holder.appendChild(this.editjson_textarea),this.editjson_holder.appendChild(this.editjson_save),this.editjson_holder.appendChild(this.editjson_cancel),this.addproperty_holder=this.theme.getModal(),this.addproperty_list=document.createElement("div"),this.addproperty_list.style.width="295px",this.addproperty_list.style.maxHeight="160px",this.addproperty_list.style.padding="5px 0",this.addproperty_list.style.overflowY="auto",this.addproperty_list.style.overflowX="hidden",this.addproperty_list.style.paddingLeft="5px",this.addproperty_list.setAttribute("class","property-selector"),this.addproperty_add=this.getButton("add","add","add"),this.addproperty_input=this.theme.getFormInputField("text"),this.addproperty_input.setAttribute("placeholder","Property name..."),this.addproperty_input.style.width="220px",this.addproperty_input.style.marginBottom="0",this.addproperty_input.style.display="inline-block",this.addproperty_add.addEventListener("click",function(t){if(t.preventDefault(),t.stopPropagation(),e.addproperty_input.value){if(e.editors[e.addproperty_input.value])return void window.alert("there is already a property with that name");e.addObjectProperty(e.addproperty_input.value),e.editors[e.addproperty_input.value]&&e.editors[e.addproperty_input.value].disable(),e.onChange(!0)}}),this.addproperty_holder.appendChild(this.addproperty_list),this.addproperty_holder.appendChild(this.addproperty_input),this.addproperty_holder.appendChild(this.addproperty_add);var t=document.createElement("div");t.style.clear="both",this.addproperty_holder.appendChild(t),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.editor_holder=this.theme.getIndentedPanel(),this.editor_holder.style.paddingBottom="0",this.container.appendChild(this.editor_holder),this.row_container=this.theme.getGridContainer(),this.editor_holder.appendChild(this.row_container),i(this.editors,function(t,n){var i=e.theme.getGridColumn();e.row_container.appendChild(i),n.setContainer(i),n.build(),n.postBuild()}),this.title_controls=this.theme.getHeaderButtonHolder(),this.editjson_controls=this.theme.getHeaderButtonHolder(),this.addproperty_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.title.appendChild(this.editjson_controls),this.title.appendChild(this.addproperty_controls),this.collapsed=!1,this.toggle_button=this.getButton("","collapse","Collapse"),this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.collapsed?(e.editor_holder.style.display="",e.collapsed=!1,e.setButtonText(e.toggle_button,"","collapse","Collapse")):(e.editor_holder.style.display="none",e.collapsed=!0,e.setButtonText(e.toggle_button,"","expand","Expand"))}),this.options.collapsed&&r(this.toggle_button,"click"),this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.editjson_button=this.getButton("JSON","edit","Edit JSON"),this.editjson_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.toggleEditJSON()}),this.editjson_controls.appendChild(this.editjson_button),this.editjson_controls.appendChild(this.editjson_holder),this.schema.options&&"undefined"!=typeof this.schema.options.disable_edit_json?this.schema.options.disable_edit_json&&(this.editjson_button.style.display="none"):this.jsoneditor.options.disable_edit_json&&(this.editjson_button.style.display="none"),this.addproperty_button=this.getButton("Properties","edit","Object Properties"),this.addproperty_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.toggleAddProperty()}),this.addproperty_controls.appendChild(this.addproperty_button),this.addproperty_controls.appendChild(this.addproperty_holder),this.refreshAddProperties()}this.options.table_row?(this.editor_holder=this.container,i(this.property_order,function(t,n){e.editor_holder.appendChild(e.editors[n].container)})):(this.layoutEditors(),this.layoutEditors())},showEditJSON:function(){this.editjson_holder&&(this.hideAddProperty(),this.editjson_holder.style.left=this.editjson_button.offsetLeft+"px",this.editjson_holder.style.top=this.editjson_button.offsetTop+this.editjson_button.offsetHeight+"px",this.editjson_textarea.value=JSON.stringify(this.getValue(),null,2),this.disable(),this.editjson_holder.style.display="",this.editjson_button.disabled=!1,this.editing_json=!0)},hideEditJSON:function(){this.editjson_holder&&this.editing_json&&(this.editjson_holder.style.display="none",this.enable(),this.editing_json=!1)},saveJSON:function(){if(this.editjson_holder)try{var e=JSON.parse(this.editjson_textarea.value);this.setValue(e),this.hideEditJSON()}catch(t){throw window.alert("invalid JSON"),t}},toggleEditJSON:function(){this.editing_json?this.hideEditJSON():this.showEditJSON()},insertPropertyControlUsingPropertyOrder:function(e,t,n){var i;this.schema.properties[e]&&(i=this.schema.properties[e].propertyOrder),"number"!=typeof i&&(i=1e3),t.propertyOrder=i;for(var r=0;r<n.childNodes.length;r++){var a=n.childNodes[r];if(t.propertyOrder<a.propertyOrder){this.addproperty_list.insertBefore(t,a),t=null;break}}t&&this.addproperty_list.appendChild(t)},addPropertyCheckbox:function(e){var t,n,i,r,a=this;return t=a.theme.getCheckbox(),t.style.width="auto",i=this.schema.properties[e]&&this.schema.properties[e].title?this.schema.properties[e].title:e,n=a.theme.getCheckboxLabel(i),r=a.theme.getFormControl(n,t),r.style.paddingBottom=r.style.marginBottom=r.style.paddingTop=r.style.marginTop=0,r.style.height="auto",this.insertPropertyControlUsingPropertyOrder(e,r,this.addproperty_list),t.checked=e in this.editors,t.addEventListener("change",function(){t.checked?a.addObjectProperty(e):a.removeObjectProperty(e),a.onChange(!0)}),a.addproperty_checkboxes[e]=t,t},showAddProperty:function(){this.addproperty_holder&&(this.hideEditJSON(),this.addproperty_holder.style.left=this.addproperty_button.offsetLeft+"px",this.addproperty_holder.style.top=this.addproperty_button.offsetTop+this.addproperty_button.offsetHeight+"px",this.disable(),this.adding_property=!0,this.addproperty_button.disabled=!1,this.addproperty_holder.style.display="",this.refreshAddProperties())},hideAddProperty:function(){this.addproperty_holder&&this.adding_property&&(this.addproperty_holder.style.display="none",this.enable(),this.adding_property=!1)},toggleAddProperty:function(){this.adding_property?this.hideAddProperty():this.showAddProperty()},removeObjectProperty:function(e){this.editors[e]&&(this.editors[e].unregister(),delete this.editors[e],this.refreshValue(),this.layoutEditors())},addObjectProperty:function(e,t){var n=this;if(!this.editors[e]){if(this.cached_editors[e]){if(this.editors[e]=this.cached_editors[e],t)return;this.editors[e].register()}else{if(!(this.canHaveAdditionalProperties()||this.schema.properties&&this.schema.properties[e]))return;var i=n.getPropertySchema(e),r=n.jsoneditor.getEditorClass(i);if(n.editors[e]=n.jsoneditor.createEditor(r,{jsoneditor:n.jsoneditor,schema:i,path:n.path+"."+e,parent:n}),n.editors[e].preBuild(),!t){var a=n.theme.getChildEditorHolder();n.editor_holder.appendChild(a),n.editors[e].setContainer(a),n.editors[e].build(),n.editors[e].postBuild()}n.cached_editors[e]=n.editors[e]}t||(n.refreshValue(),n.layoutEditors())}},onChildEditorChange:function(e){this.refreshValue(),this._super(e)},canHaveAdditionalProperties:function(){return"boolean"==typeof this.schema.additionalProperties?this.schema.additionalProperties:!this.jsoneditor.options.no_additional_properties},destroy:function(){i(this.cached_editors,function(e,t){t.destroy()}),this.editor_holder&&(this.editor_holder.innerHTML=""),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.error_holder&&this.error_holder.parentNode&&this.error_holder.parentNode.removeChild(this.error_holder),this.editors=null,this.cached_editors=null,this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.editor_holder=null,this._super()},getValue:function(){var e=this._super();if(this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties)for(var t in e)e.hasOwnProperty(t)&&(e[t]||delete e[t]);return e},refreshValue:function(){this.value={};for(var e in this.editors)this.editors.hasOwnProperty(e)&&(this.value[e]=this.editors[e].getValue());this.adding_property&&this.refreshAddProperties()},refreshAddProperties:function(){if(this.options.disable_properties||this.options.disable_properties!==!1&&this.jsoneditor.options.disable_properties)return void(this.addproperty_controls.style.display="none");var e,t=!1,n=!1,i=0,r=!1;for(e in this.editors)this.editors.hasOwnProperty(e)&&i++;t=this.canHaveAdditionalProperties()&&!("undefined"!=typeof this.schema.maxProperties&&i>=this.schema.maxProperties),this.addproperty_checkboxes&&(this.addproperty_list.innerHTML=""),this.addproperty_checkboxes={};for(e in this.cached_editors)this.cached_editors.hasOwnProperty(e)&&(this.addPropertyCheckbox(e),this.isRequired(this.cached_editors[e])&&e in this.editors&&(this.addproperty_checkboxes[e].disabled=!0),"undefined"!=typeof this.schema.minProperties&&i<=this.schema.minProperties?(this.addproperty_checkboxes[e].disabled=this.addproperty_checkboxes[e].checked,this.addproperty_checkboxes[e].checked||(r=!0)):e in this.editors?(r=!0,n=!0):t||this.schema.properties.hasOwnProperty(e)?(this.addproperty_checkboxes[e].disabled=!1,r=!0):this.addproperty_checkboxes[e].disabled=!0);this.canHaveAdditionalProperties()&&(r=!0);for(e in this.schema.properties)this.schema.properties.hasOwnProperty(e)&&(this.cached_editors[e]||(r=!0,this.addPropertyCheckbox(e)));r?this.canHaveAdditionalProperties()?this.addproperty_add.disabled=t?!1:!0:(this.addproperty_add.style.display="none",this.addproperty_input.style.display="none"):(this.hideAddProperty(),this.addproperty_controls.style.display="none")},isRequired:function(e){return"boolean"==typeof e.schema.required?e.schema.required:Array.isArray(this.schema.required)?this.schema.required.indexOf(e.key)>-1:this.jsoneditor.options.required_by_default?!0:!1},setValue:function(e,t){var n=this;e=e||{},("object"!=typeof e||Array.isArray(e))&&(e={}),i(this.cached_editors,function(i,r){"undefined"!=typeof e[i]?(n.addObjectProperty(i),r.setValue(e[i],t)):t||n.isRequired(r)?r.setValue(r.getDefault(),t):n.removeObjectProperty(i)}),i(e,function(e,i){n.cached_editors[e]||(n.addObjectProperty(e),n.editors[e]&&n.editors[e].setValue(i,t))}),this.refreshValue(),this.layoutEditors(),this.onChange()},showValidationErrors:function(e){var t=this,n=[],r=[];if(i(e,function(e,i){i.path===t.path?n.push(i):r.push(i)}),this.error_holder)if(n.length){this.error_holder.innerHTML="",this.error_holder.style.display="",i(n,function(e,n){t.error_holder.appendChild(t.theme.getErrorMessage(n.message))})}else this.error_holder.style.display="none";this.options.table_row&&(n.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container)),i(this.editors,function(e,t){t.showValidationErrors(r)})}}),a.defaults.editors.array=a.AbstractEditor.extend({getDefault:function(){return this.schema["default"]||[]},register:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].register()},unregister:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].unregister()},getNumColumns:function(){var e=this.getItemInfo(0);return this.tabs_holder?Math.max(Math.min(12,e.width+2),4):e.width},enable:function(){if(this.add_row_button&&(this.add_row_button.disabled=!1),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!1),this.delete_last_row_button&&(this.delete_last_row_button.disabled=!1),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].enable(),this.rows[e].moveup_button&&(this.rows[e].moveup_button.disabled=!1),this.rows[e].movedown_button&&(this.rows[e].movedown_button.disabled=!1),this.rows[e].delete_button&&(this.rows[e].delete_button.disabled=!1);this._super()},disable:function(){if(this.add_row_button&&(this.add_row_button.disabled=!0),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!0),this.delete_last_row_button&&(this.delete_last_row_button.disabled=!0),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].disable(),this.rows[e].moveup_button&&(this.rows[e].moveup_button.disabled=!0),this.rows[e].movedown_button&&(this.rows[e].movedown_button.disabled=!0),this.rows[e].delete_button&&(this.rows[e].delete_button.disabled=!0);this._super()},preBuild:function(){this._super(),this.rows=[],this.row_cache=[],this.hide_delete_buttons=this.options.disable_array_delete||this.jsoneditor.options.disable_array_delete,this.hide_move_buttons=this.options.disable_array_reorder||this.jsoneditor.options.disable_array_reorder,this.hide_add_button=this.options.disable_array_add||this.jsoneditor.options.disable_array_add},build:function(){this.options.compact?(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),"tabs"===this.schema.format?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null):(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls))),this.addControls()},onChildEditorChange:function(e){this.refreshValue(),this.refreshTabs(!0),this._super(e)},getItemTitle:function(){if(!this.item_title)if(this.schema.items&&!Array.isArray(this.schema.items)){var e=this.jsoneditor.expandRefs(this.schema.items);this.item_title=e.title||"item"}else this.item_title="item";return this.item_title},getItemSchema:function(e){return Array.isArray(this.schema.items)?e>=this.schema.items.length?this.schema.additionalItems===!0?{}:this.schema.additionalItems?n({},this.schema.additionalItems):void 0:n({},this.schema.items[e]):this.schema.items?n({},this.schema.items):{}},getItemInfo:function(e){var t=this.getItemSchema(e);this.item_info=this.item_info||{};var n=JSON.stringify(t);return"undefined"!=typeof this.item_info[n]?this.item_info[n]:(t=this.jsoneditor.expandRefs(t),this.item_info[n]={title:t.title||"item","default":t["default"],width:12,child_editors:t.properties||t.items},this.item_info[n])},getElementEditor:function(e){var t=this.getItemInfo(e),n=this.getItemSchema(e);n=this.jsoneditor.expandRefs(n),n.title=t.title+" "+(e+1);var i,r=this.jsoneditor.getEditorClass(n);i=this.tabs_holder?this.theme.getTabContent():t.child_editors?this.theme.getChildEditorHolder():this.theme.getIndentedPanel(),this.row_holder.appendChild(i);var a=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:n,container:i,path:this.path+"."+e,parent:this,required:!0});return a.preBuild(),a.build(),a.postBuild(),a.title_controls||(a.array_controls=this.theme.getButtonHolder(),i.appendChild(a.array_controls)),a},destroy:function(){this.empty(!0),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder),this.controls&&this.controls.parentNode&&this.controls.parentNode.removeChild(this.controls),this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null,this._super()},empty:function(e){if(this.rows){var t=this;i(this.rows,function(n,i){e&&(i.tab&&i.tab.parentNode&&i.tab.parentNode.removeChild(i.tab),t.destroyRow(i,!0),t.row_cache[n]=null),t.rows[n]=null}),t.rows=[],e&&(t.row_cache=[])}},destroyRow:function(e,t){var n=e.container;t?(e.destroy(),n.parentNode&&n.parentNode.removeChild(n),e.tab&&e.tab.parentNode&&e.tab.parentNode.removeChild(e.tab)):(e.tab&&(e.tab.style.display="none"),n.style.display="none",e.unregister())},getMax:function(){return Array.isArray(this.schema.items)&&this.schema.additionalItems===!1?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0},refreshTabs:function(e){var t=this;i(this.rows,function(n,i){i.tab&&(e?i.tab_text.textContent=i.getHeaderText():i.tab===t.active_tab?(t.theme.markTabActive(i.tab),i.container.style.display=""):(t.theme.markTabInactive(i.tab),i.container.style.display="none"))})},setValue:function(e,t){e=e||[],Array.isArray(e)||(e=[e]);var n=JSON.stringify(e);if(n!==this.serialized){if(this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemInfo(e.length)["default"]);this.getMax()&&e.length>this.getMax()&&(e=e.slice(0,this.getMax()));var r=this;i(e,function(e,n){r.rows[e]?r.rows[e].setValue(n,t):r.row_cache[e]?(r.rows[e]=r.row_cache[e],r.rows[e].setValue(n,t),r.rows[e].container.style.display="",r.rows[e].tab&&(r.rows[e].tab.style.display=""),r.rows[e].register()):r.addRow(n,t)});for(var a=e.length;a<r.rows.length;a++)r.destroyRow(r.rows[a]),r.rows[a]=null;r.rows=r.rows.slice(0,e.length);var o=null;i(r.rows,function(e,t){return t.tab===r.active_tab?(o=t.tab,!1):void 0}),!o&&r.rows.length&&(o=r.rows[0].tab),r.active_tab=o,r.refreshValue(t),r.refreshTabs(!0),r.refreshTabs(),r.onChange()}},refreshValue:function(e){var t=this,n=this.value?this.value.length:0;if(this.value=[],i(this.rows,function(e,n){t.value[e]=n.getValue()}),n!==this.value.length||e){var r=this.schema.minItems&&this.schema.minItems>=this.rows.length;i(this.rows,function(e,n){n.movedown_button&&(n.movedown_button.style.display=e===t.rows.length-1?"none":""),n.delete_button&&(n.delete_button.style.display=r?"none":""),t.value[e]=n.getValue()});var a=!1;this.value.length?1===this.value.length?(this.remove_all_rows_button.style.display="none",r||this.hide_delete_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",a=!0)):r||this.hide_delete_buttons?(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none"):(this.delete_last_row_button.style.display="",this.remove_all_rows_button.style.display="",a=!0):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none"),this.getMax()&&this.getMax()<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",a=!0),this.controls.style.display=!this.collapsed&&a?"inline-block":"none"}},addRow:function(e,t){var n=this,r=this.rows.length;n.rows[r]=this.getElementEditor(r),n.row_cache[r]=n.rows[r],n.tabs_holder&&(n.rows[r].tab_text=document.createElement("span"),n.rows[r].tab_text.textContent=n.rows[r].getHeaderText(),n.rows[r].tab=n.theme.getTab(n.rows[r].tab_text),n.rows[r].tab.addEventListener("click",function(e){n.active_tab=n.rows[r].tab,n.refreshTabs(),e.preventDefault(),e.stopPropagation()}),n.theme.addTab(n.tabs_holder,n.rows[r].tab));var a=n.rows[r].title_controls||n.rows[r].array_controls;

n.hide_delete_buttons||(n.rows[r].delete_button=this.getButton(n.getItemTitle(),"delete","Delete "+n.getItemTitle()),n.rows[r].delete_button.className+=" delete",n.rows[r].delete_button.setAttribute("data-i",r),n.rows[r].delete_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=1*this.getAttribute("data-i"),r=n.getValue(),a=[],o=null;i(r,function(e,i){return e===t?void(n.rows[e].tab===n.active_tab&&(n.rows[e+1]?o=n.rows[e].tab:e&&(o=n.rows[e-1].tab))):void a.push(i)}),n.setValue(a),o&&(n.active_tab=o,n.refreshTabs()),n.onChange(!0)}),a&&a.appendChild(n.rows[r].delete_button)),r&&!n.hide_move_buttons&&(n.rows[r].moveup_button=this.getButton("","moveup","Move up"),n.rows[r].moveup_button.className+=" moveup",n.rows[r].moveup_button.setAttribute("data-i",r),n.rows[r].moveup_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=1*this.getAttribute("data-i");if(!(0>=t)){var i=n.getValue(),r=i[t-1];i[t-1]=i[t],i[t]=r,n.setValue(i),n.active_tab=n.rows[t-1].tab,n.refreshTabs(),n.onChange(!0)}}),a&&a.appendChild(n.rows[r].moveup_button)),n.hide_move_buttons||(n.rows[r].movedown_button=this.getButton("","movedown","Move down"),n.rows[r].movedown_button.className+=" movedown",n.rows[r].movedown_button.setAttribute("data-i",r),n.rows[r].movedown_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=1*this.getAttribute("data-i"),i=n.getValue();if(!(t>=i.length-1)){var r=i[t+1];i[t+1]=i[t],i[t]=r,n.setValue(i),n.active_tab=n.rows[t+1].tab,n.refreshTabs(),n.onChange(!0)}}),a&&a.appendChild(n.rows[r].movedown_button)),e&&n.rows[r].setValue(e,t),n.refreshTabs()},addControls:function(){var e=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse","Collapse"),this.title_controls.appendChild(this.toggle_button);var t=e.row_holder.style.display,n=e.controls.style.display;this.toggle_button.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation(),e.collapsed?(e.collapsed=!1,e.panel&&(e.panel.style.display=""),e.row_holder.style.display=t,e.tabs_holder&&(e.tabs_holder.style.display=""),e.controls.style.display=n,e.setButtonText(this,"","collapse","Collapse")):(e.collapsed=!0,e.row_holder.style.display="none",e.tabs_holder&&(e.tabs_holder.style.display="none"),e.controls.style.display="none",e.panel&&(e.panel.style.display="none"),e.setButtonText(this,"","expand","Expand"))}),this.options.collapsed&&r(this.toggle_button,"click"),this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.add_row_button=this.getButton(this.getItemTitle(),"add","Add "+this.getItemTitle()),this.add_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=e.rows.length;e.row_cache[n]?(e.rows[n]=e.row_cache[n],e.rows[n].setValue(e.rows[n].getDefault()),e.rows[n].container.style.display="",e.rows[n].tab&&(e.rows[n].tab.style.display=""),e.rows[n].register()):e.addRow(),e.active_tab=e.rows[n].tab,e.refreshTabs(),e.refreshValue(),e.onChange(!0)}),e.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton("Last "+this.getItemTitle(),"delete","Delete Last "+this.getItemTitle()),this.delete_last_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=e.getValue(),i=null;e.rows.length>1&&e.rows[e.rows.length-1].tab===e.active_tab&&(i=e.rows[e.rows.length-2].tab),n.pop(),e.setValue(n),i&&(e.active_tab=i,e.refreshTabs()),e.onChange(!0)}),e.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton("All","delete","Delete All"),this.remove_all_rows_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.setValue([]),e.onChange(!0)}),e.controls.appendChild(this.remove_all_rows_button),e.tabs&&(this.add_row_button.style.width="100%",this.add_row_button.style.textAlign="left",this.add_row_button.style.marginBottom="3px",this.delete_last_row_button.style.width="100%",this.delete_last_row_button.style.textAlign="left",this.delete_last_row_button.style.marginBottom="3px",this.remove_all_rows_button.style.width="100%",this.remove_all_rows_button.style.textAlign="left",this.remove_all_rows_button.style.marginBottom="3px")},showValidationErrors:function(e){var t=this,n=[],r=[];if(i(e,function(e,i){i.path===t.path?n.push(i):r.push(i)}),this.error_holder)if(n.length){this.error_holder.innerHTML="",this.error_holder.style.display="",i(n,function(e,n){t.error_holder.appendChild(t.theme.getErrorMessage(n.message))})}else this.error_holder.style.display="none";i(this.rows,function(e,t){t.showValidationErrors(r)})}}),a.defaults.editors.table=a.defaults.editors.array.extend({register:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].register()},unregister:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.width),3)},preBuild:function(){var e=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=e.title||"row",this.item_default=e["default"]||null,this.item_has_child_editors=e.properties||e.items,this.width=12,this._super()},build:function(){var e=this;this.table=this.theme.getTable(),this.container.appendChild(this.table),this.thead=this.theme.getTableHead(),this.table.appendChild(this.thead),this.header_row=this.theme.getTableRow(),this.thead.appendChild(this.header_row),this.row_holder=this.theme.getTableBody(),this.table.appendChild(this.row_holder);var t=this.getElementEditor(0,!0);if(this.item_default=t.getDefault(),this.width=t.getNumColumns()+2,this.options.compact?(this.panel=document.createElement("div"),this.container.appendChild(this.panel)):(this.title=this.theme.getHeader(this.getTitle()),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)),this.panel.appendChild(this.table),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.item_has_child_editors)for(var n=t.getChildEditors(),i=t.property_order||Object.keys(n),r=0;r<i.length;r++){var a=e.theme.getTableHeaderCell(n[i[r]].getTitle());n[i[r]].options.hidden&&(a.style.display="none"),e.header_row.appendChild(a)}else e.header_row.appendChild(e.theme.getTableHeaderCell(this.item_title));t.destroy(),this.row_holder.innerHTML="",this.controls_header_cell=e.theme.getTableHeaderCell(" "),e.header_row.appendChild(this.controls_header_cell),this.addControls()},onChildEditorChange:function(e){this.refreshValue(),this._super()},getItemDefault:function(){return n({},{"default":this.item_default})["default"]},getItemTitle:function(){return this.item_title},getElementEditor:function(e,t){var i=n({},this.schema.items),r=this.jsoneditor.getEditorClass(i,this.jsoneditor),a=this.row_holder.appendChild(this.theme.getTableRow()),o=a;this.item_has_child_editors||(o=this.theme.getTableCell(),a.appendChild(o));var s=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:i,container:o,path:this.path+"."+e,parent:this,compact:!0,table_row:!0});return s.preBuild(),t||(s.build(),s.postBuild(),s.controls_cell=a.appendChild(this.theme.getTableCell()),s.row=a,s.table_controls=this.theme.getButtonHolder(),s.controls_cell.appendChild(s.table_controls),s.table_controls.style.margin=0,s.table_controls.style.padding=0),s},destroy:function(){this.innerHTML="",this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder),this.table&&this.table.parentNode&&this.table.parentNode.removeChild(this.table),this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,this._super()},setValue:function(e,t){if(e=e||[],this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemDefault());this.schema.maxItems&&e.length>this.schema.maxItems&&(e=e.slice(0,this.schema.maxItems));var n=JSON.stringify(e);if(n!==this.serialized){var r=!1,a=this;i(e,function(e,t){a.rows[e]?a.rows[e].setValue(t):(a.addRow(t),r=!0)});for(var o=e.length;o<a.rows.length;o++){var s=a.rows[o].container;a.item_has_child_editors||a.rows[o].row.parentNode.removeChild(a.rows[o].row),a.rows[o].destroy(),s.parentNode&&s.parentNode.removeChild(s),a.rows[o]=null,r=!0}a.rows=a.rows.slice(0,e.length),a.refreshValue(),(r||t)&&a.refreshRowButtons(),a.onChange()}},refreshRowButtons:function(){var e=this,t=this.schema.minItems&&this.schema.minItems>=this.rows.length,n=!1;i(this.rows,function(i,r){r.movedown_button&&(i===e.rows.length-1?r.movedown_button.style.display="none":(n=!0,r.movedown_button.style.display="")),r.delete_button&&(t?r.delete_button.style.display="none":(n=!0,r.delete_button.style.display="")),r.moveup_button&&(n=!0)}),i(this.rows,function(e,t){t.controls_cell.style.display=n?"":"none"}),this.controls_header_cell.style.display=n?"":"none";var r=!1;this.value.length?1===this.value.length||this.hide_delete_buttons?(this.table.style.display="",this.remove_all_rows_button.style.display="none",t||this.hide_delete_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",r=!0)):(this.table.style.display="",t||this.hide_delete_buttons?(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none"):(this.delete_last_row_button.style.display="",this.remove_all_rows_button.style.display="",r=!0)):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none",this.table.style.display="none"),this.schema.maxItems&&this.schema.maxItems<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",r=!0),this.controls.style.display=r?"":"none"},refreshValue:function(){var e=this;this.value=[],i(this.rows,function(t,n){e.value[t]=n.getValue()}),this.serialized=JSON.stringify(this.value)},addRow:function(e){var t=this,n=this.rows.length;t.rows[n]=this.getElementEditor(n);var r=t.rows[n].table_controls;this.hide_delete_buttons||(t.rows[n].delete_button=this.getButton("","delete","Delete"),t.rows[n].delete_button.className+=" delete",t.rows[n].delete_button.setAttribute("data-i",n),t.rows[n].delete_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var n=1*this.getAttribute("data-i"),r=t.getValue(),a=[];i(r,function(e,t){e!==n&&a.push(t)}),t.setValue(a),t.onChange(!0)}),r.appendChild(t.rows[n].delete_button)),n&&!this.hide_move_buttons&&(t.rows[n].moveup_button=this.getButton("","moveup","Move up"),t.rows[n].moveup_button.className+=" moveup",t.rows[n].moveup_button.setAttribute("data-i",n),t.rows[n].moveup_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var n=1*this.getAttribute("data-i");if(!(0>=n)){var i=t.getValue(),r=i[n-1];i[n-1]=i[n],i[n]=r,t.setValue(i),t.onChange(!0)}}),r.appendChild(t.rows[n].moveup_button)),this.hide_move_buttons||(t.rows[n].movedown_button=this.getButton("","movedown","Move down"),t.rows[n].movedown_button.className+=" movedown",t.rows[n].movedown_button.setAttribute("data-i",n),t.rows[n].movedown_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var n=1*this.getAttribute("data-i"),i=t.getValue();if(!(n>=i.length-1)){var r=i[n+1];i[n+1]=i[n],i[n]=r,t.setValue(i),t.onChange(!0)}}),r.appendChild(t.rows[n].movedown_button)),e&&t.rows[n].setValue(e)},addControls:function(){var e=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse","Collapse"),this.title_controls&&(this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.collapsed?(e.collapsed=!1,e.panel.style.display="",e.setButtonText(this,"","collapse","Collapse")):(e.collapsed=!0,e.panel.style.display="none",e.setButtonText(this,"","expand","Expand"))}),this.options.collapsed&&r(this.toggle_button,"click"),this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none")),this.add_row_button=this.getButton(this.getItemTitle(),"add","Add "+this.getItemTitle()),this.add_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.addRow(),e.refreshValue(),e.refreshRowButtons(),e.onChange(!0)}),e.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton("Last "+this.getItemTitle(),"delete","Delete Last "+this.getItemTitle()),this.delete_last_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=e.getValue();n.pop(),e.setValue(n),e.onChange(!0)}),e.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton("All","delete","Delete All"),this.remove_all_rows_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.setValue([]),e.onChange(!0)}),e.controls.appendChild(this.remove_all_rows_button)}}),a.defaults.editors.multiple=a.AbstractEditor.extend({register:function(){if(this.editors){for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister();this.editors[this.type]&&this.editors[this.type].register()}this._super()},unregister:function(){if(this._super(),this.editors)for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister()},getNumColumns:function(){return this.editors[this.type]?Math.max(this.editors[this.type].getNumColumns(),4):4},enable:function(){if(this.editors)for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].enable();this.switcher.disabled=!1,this._super()},disable:function(){if(this.editors)for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].disable();this.switcher.disabled=!0,this._super()},switchEditor:function(e){var t=this;this.editors[e]||this.buildChildEditor(e),t.type=e,t.register();var n=t.getValue();i(t.editors,function(e,i){i&&(t.type===e?(t.keep_values&&i.setValue(n,!0),i.container.style.display=""):i.container.style.display="none")}),t.refreshValue(),t.refreshHeaderText()},buildChildEditor:function(e){var t=this,i=this.types[e],r=t.theme.getChildEditorHolder();t.editor_holder.appendChild(r);var a;"string"==typeof i?(a=n({},t.schema),a.type=i):(a=n({},t.schema,i),a=t.jsoneditor.expandRefs(a),i.required&&Array.isArray(i.required)&&t.schema.required&&Array.isArray(t.schema.required)&&(a.required=t.schema.required.concat(i.required)));var o=t.jsoneditor.getEditorClass(a);t.editors[e]=t.jsoneditor.createEditor(o,{jsoneditor:t.jsoneditor,schema:a,container:r,path:t.path,parent:t,required:!0}),t.editors[e].preBuild(),t.editors[e].build(),t.editors[e].postBuild(),t.editors[e].header&&(t.editors[e].header.style.display="none"),t.editors[e].option=t.switcher_options[e],r.addEventListener("change_header_text",function(){t.refreshHeaderText()}),e!==t.type&&(r.style.display="none")},preBuild:function(){if(this.types=[],this.type=0,this.editors=[],this.validators=[],this.keep_values=!0,"undefined"!=typeof this.jsoneditor.options.keep_oneof_values&&(this.keep_values=this.jsoneditor.options.keep_oneof_values),"undefined"!=typeof this.options.keep_oneof_values&&(this.keep_values=this.options.keep_oneof_values),this.schema.oneOf)this.oneOf=!0,this.types=this.schema.oneOf,i(this.types,function(e,t){}),delete this.schema.oneOf;else{if(this.schema.type&&"any"!==this.schema.type)this.types=Array.isArray(this.schema.type)?this.schema.type:[this.schema.type];else if(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow){var e=this.schema.disallow;"object"==typeof e&&Array.isArray(e)||(e=[e]);var t=[];i(this.types,function(n,i){-1===e.indexOf(i)&&t.push(i)}),this.types=t}delete this.schema.type}this.display_text=this.getDisplayText(this.types)},build:function(){var e=this,t=this.container;this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.container.appendChild(this.header),this.switcher=this.theme.getSwitcher(this.display_text),t.appendChild(this.switcher),this.switcher.addEventListener("change",function(t){t.preventDefault(),t.stopPropagation(),e.switchEditor(e.display_text.indexOf(this.value)),e.onChange(!0)}),this.switcher.style.marginBottom=0,this.switcher.style.width="auto",this.switcher.style.display="inline-block",this.switcher.style.marginLeft="5px",this.editor_holder=document.createElement("div"),t.appendChild(this.editor_holder),this.switcher_options=this.theme.getSwitcherOptions(this.switcher),i(this.types,function(t,i){e.editors[t]=!1;var r;"string"==typeof i?(r=n({},e.schema),r.type=i):(r=n({},e.schema,i),i.required&&Array.isArray(i.required)&&e.schema.required&&Array.isArray(e.schema.required)&&(r.required=e.schema.required.concat(i.required))),e.validators[t]=new a.Validator(e.jsoneditor,r)}),this.switchEditor(0)},onChildEditorChange:function(e){this.editors[this.type]&&(this.refreshValue(),this.refreshHeaderText()),this._super()},refreshHeaderText:function(){var e=this.getDisplayText(this.types);i(this.switcher_options,function(t,n){n.textContent=e[t]})},refreshValue:function(){this.value=this.editors[this.type].getValue()},setValue:function(e,t){var n=this;i(this.validators,function(t,i){return i.validate(e).length?void 0:(n.type=t,n.switcher.value=n.display_text[t],!1)}),this.switchEditor(this.type),this.editors[this.type].setValue(e,t),this.refreshValue(),n.onChange()},destroy:function(){i(this.editors,function(e,t){t&&t.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),this._super()},showValidationErrors:function(e){var t=this;this.oneOf?i(this.editors,function(r,a){if(a){var o=t.path+".oneOf["+r+"]",s=[];i(e,function(e,i){if(i.path.substr(0,o.length)===o){var r=n({},i);r.path=t.path+r.path.substr(o.length),s.push(r)}}),a.showValidationErrors(s)}}):i(this.editors,function(t,n){n&&n.showValidationErrors(e)})}}),a.defaults.editors["enum"]=a.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){this.container;this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.container.appendChild(this.title),this.options.enum_titles=this.options.enum_titles||[],this["enum"]=this.schema["enum"],this.selected=0,this.select_options=[],this.html_values=[];for(var e=this,t=0;t<this["enum"].length;t++)this.select_options[t]=this.options.enum_titles[t]||"Value "+(t+1),this.html_values[t]=this.getHTML(this["enum"][t]);this.switcher=this.theme.getSwitcher(this.select_options),this.container.appendChild(this.switcher),this.switcher.style.width="auto",this.switcher.style.display="inline-block",this.switcher.style.marginLeft="5px",this.switcher.style.marginBottom=0,this.display_area=this.theme.getIndentedPanel(),this.display_area.style.paddingTop=0,this.display_area.style.paddingBottom=0,this.container.appendChild(this.display_area),this.options.hide_display&&(this.display_area.style.display="none"),this.switcher.addEventListener("change",function(){e.selected=e.select_options.indexOf(this.value),e.value=e["enum"][e.selected],e.refreshValue(),e.onChange(!0)}),this.value=this["enum"][0],this.refreshValue(),1===this["enum"].length&&(this.switcher.style.display="none")},refreshValue:function(){var e=this;e.selected=-1;var t=JSON.stringify(this.value);return i(this["enum"],function(n,i){return t===JSON.stringify(i)?(e.selected=n,!1):void 0}),e.selected<0?void e.setValue(e["enum"][0]):(this.switcher.value=this.select_options[this.selected],void(this.display_area.innerHTML=this.html_values[this.selected]))},enable:function(){this.always_disabled||(this.switcher.disabled=!1),this._super()},disable:function(){this.switcher.disabled=!0,this._super()},getHTML:function(e){var t=this;if(null===e)return"<em>null</em>";if("object"==typeof e){var n="";return i(e,function(i,r){var a=t.getHTML(r);Array.isArray(e)||(a="<div><em>"+i+"</em>: "+a+"</div>"),n+="<li>"+a+"</li>"}),n=Array.isArray(e)?"<ol>"+n+"</ol>":"<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>"+n+"</ul>"}return"boolean"==typeof e?e?"true":"false":"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},setValue:function(e){this.value!==e&&(this.value=e,this.refreshValue(),this.onChange())},destroy:function(){this.display_area&&this.display_area.parentNode&&this.display_area.parentNode.removeChild(this.display_area),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),this._super()}}),a.defaults.editors.select=a.AbstractEditor.extend({setValue:function(e,t){e=this.typecast(e||"");var n=e;this.enum_values.indexOf(n)<0&&(n=this.enum_values[0]),this.value!==n&&(this.input.value=this.enum_options[this.enum_values.indexOf(n)],this.select2&&this.select2.select2("val",this.input.value),this.value=n,this.onChange())},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){if(!this.enum_options)return 3;for(var e=this.getTitle().length,t=0;t<this.enum_options.length;t++)e=Math.max(e,this.enum_options[t].length+4);return Math.min(12,Math.max(e/7,2))},typecast:function(e){return"boolean"===this.schema.type?!!e:"number"===this.schema.type?1*e:"integer"===this.schema.type?Math.floor(1*e):""+e},getValue:function(){return this.value},preBuild:function(){var e=this;if(this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[],this.schema["enum"]){var t=this.schema.options&&this.schema.options.enum_titles||[];i(this.schema["enum"],function(n,i){e.enum_options[n]=""+i,e.enum_display[n]=""+(t[n]||i),e.enum_values[n]=e.typecast(i)})}else if("boolean"===this.schema.type)e.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],e.enum_options=["1",""],e.enum_values=[!0,!1];else{if(!this.schema.enumSource)throw"'select' editor requires the enum property to be set.";if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],Array.isArray(this.schema.enumSource))for(o=0;o<this.schema.enumSource.length;o++)this.enumSource[o]="string"==typeof this.schema.enumSource[o]?{source:this.schema.enumSource[o]}:Array.isArray(this.schema.enumSource[o])?this.schema.enumSource[o]:n({},this.schema.enumSource[o]);else this.enumSource=this.schema.enumValue?[{source:this.schema.enumSource,value:this.schema.enumValue}]:[{source:this.schema.enumSource}];for(o=0;o<this.enumSource.length;o++)this.enumSource[o].value&&(this.enumSource[o].value=this.jsoneditor.compileTemplate(this.enumSource[o].value,this.template_engine)),this.enumSource[o].title&&(this.enumSource[o].title=this.jsoneditor.compileTemplate(this.enumSource[o].title,this.template_engine)),this.enumSource[o].filter&&(this.enumSource[o].filter=this.jsoneditor.compileTemplate(this.enumSource[o].filter,this.template_engine))}},build:function(){var e=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.compact&&(this.container.className+=" compact"),this.input=this.theme.getSelectInput(this.enum_options),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(t){t.preventDefault(),t.stopPropagation(),e.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),this.value=this.enum_values[0]},onInputChange:function(){var e=this.input.value,t=e;-1===this.enum_options.indexOf(e)&&(t=this.enum_options[0]),this.value=this.enum_values[this.enum_options.indexOf(e)],this.onChange(!0)},setupSelect2:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&(this.enum_options.length>2||this.enum_options.length&&this.enumSource)){var e=n({},a.plugins.select2);this.schema.options&&this.schema.options.select2_options&&(e=n(e,this.schema.options.select2_options)),this.select2=window.jQuery(this.input).select2(e);var t=this;this.select2.on("select2-blur",function(){t.input.value=t.select2.select2("val"),t.onInputChange()})}else this.select2=null},postBuild:function(){this._super(),this.theme.afterInputReady(this.input),this.setupSelect2()},onWatchedFieldChange:function(){var e,t;if(this.enumSource){e=this.getWatchedFieldValues();for(var n=[],i=[],r=0;r<this.enumSource.length;r++)if(Array.isArray(this.enumSource[r]))n=n.concat(this.enumSource[r]),i=i.concat(this.enumSource[r]);else{var a=[];if(a=Array.isArray(this.enumSource[r].source)?this.enumSource[r].source:e[this.enumSource[r].source]){if(this.enumSource[r].slice&&(a=Array.prototype.slice.apply(a,this.enumSource[r].slice)),this.enumSource[r].filter){var o=[];for(t=0;t<a.length;t++)this.enumSource[r].filter({i:t,item:a[t]})&&o.push(a[t]);a=o}var s=[],l=[];for(t=0;t<a.length;t++){var c=a[t];l[t]=this.enumSource[r].value?this.enumSource[r].value({i:t,item:c}):a[t],s[t]=this.enumSource[r].title?this.enumSource[r].title({i:t,item:c}):l[t]}n=n.concat(l),i=i.concat(s)}}var u=this.value;this.theme.setSelectOptions(this.input,n,i),this.enum_options=n,this.enum_display=i,this.enum_values=n,this.select2&&this.select2.select2("destroy"),-1!==n.indexOf(u)?(this.input.value=u,this.value=u):(this.input.value=n[0],this.value=n[0]||"",this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path)),this.setupSelect2()}this._super()},enable:function(){this.always_disabled||(this.input.disabled=!1,this.select2&&this.select2.select2("enable",!0)),this._super()},disable:function(){this.input.disabled=!0,this.select2&&this.select2.select2("enable",!1),this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.select2&&(this.select2.select2("destroy"),this.select2=null),this._super()}}),a.defaults.editors.multiselect=a.AbstractEditor.extend({preBuild:function(){this._super(),this.select_options={},this.select_values={};var e=this.jsoneditor.expandRefs(this.schema.items||{}),t=e["enum"]||[];for(this.option_keys=[],o=0;o<t.length;o++)this.sanitize(t[o])===t[o]&&(this.option_keys.push(t[o]+""),this.select_values[t[o]+""]=t[o])},build:function(){var e,t=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),!this.schema.format&&this.option_keys.length<8||"checkbox"===this.schema.format){for(this.input_type="checkboxes",this.inputs={},this.controls={},e=0;e<this.option_keys.length;e++){this.inputs[this.option_keys[e]]=this.theme.getCheckbox(),this.select_options[this.option_keys[e]]=this.inputs[this.option_keys[e]];var n=this.theme.getCheckboxLabel(this.option_keys[e]);this.controls[this.option_keys[e]]=this.theme.getFormControl(n,this.inputs[this.option_keys[e]])}this.control=this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description)}else{for(this.input_type="select",this.input=this.theme.getSelectInput(this.option_keys),this.input.multiple=!0,this.input.size=Math.min(10,this.option_keys.length),e=0;e<this.option_keys.length;e++)this.select_options[this.option_keys[e]]=this.input.children[e];(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.control=this.theme.getFormControl(this.label,this.input,this.description)}this.container.appendChild(this.control),this.control.addEventListener("change",function(n){n.preventDefault(),n.stopPropagation();var i=[];for(e=0;e<t.option_keys.length;e++)(t.select_options[t.option_keys[e]].selected||t.select_options[t.option_keys[e]].checked)&&i.push(t.select_values[t.option_keys[e]]);t.updateValue(i),t.onChange(!0)})},setValue:function(e,t){var n;for(e=e||[],"object"!=typeof e?e=[e]:Array.isArray(e)||(e=[]),n=0;n<e.length;n++)"string"!=typeof e[n]&&(e[n]+="");for(n in this.select_options)this.select_options.hasOwnProperty(n)&&(this.select_options[n]["select"===this.input_type?"selected":"checked"]=-1!==e.indexOf(n));this.updateValue(e),this.onChange()},setupSelect2:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2){var e=window.jQuery.extend({},a.plugins.select2);this.schema.options&&this.schema.options.select2_options&&(e=n(e,this.schema.options.select2_options)),this.select2=window.jQuery(this.input).select2(e);var t=this;this.select2.on("select2-blur",function(){var e=t.select2.select2("val");t.value=e,t.onChange(!0)})}else this.select2=null},onInputChange:function(){this.value=this.input.value,this.onChange(!0)},postBuild:function(){this._super(),this.setupSelect2()},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){var e=this.getTitle().length;for(var t in this.select_values)this.select_values.hasOwnProperty(t)&&(e=Math.max(e,(this.select_values[t]+"").length+4));return Math.min(12,Math.max(e/7,2))},updateValue:function(e){for(var t=!1,n=[],i=0;i<e.length;i++)if(this.select_options[e[i]+""]){var r=this.sanitize(this.select_values[e[i]]);n.push(r),r!==e[i]&&(t=!0)}else t=!0;return this.value=n,this.select2&&this.select2.select2("val",this.value),t},sanitize:function(e){return"number"===this.schema.items.type?1*e:"integer"===this.schema.items.type?Math.floor(1*e):""+e},enable:function(){if(!this.always_disabled){if(this.input)this.input.disabled=!1;else if(this.inputs)for(var e in this.inputs)this.inputs.hasOwnProperty(e)&&(this.inputs[e].disabled=!1);this.select2&&this.select2.select2("enable",!0)}this._super()},disable:function(){if(this.input)this.input.disabled=!0;else if(this.inputs)for(var e in this.inputs)this.inputs.hasOwnProperty(e)&&(this.inputs[e].disabled=!0);this.select2&&this.select2.select2("enable",!1),this._super()},destroy:function(){this.select2&&(this.select2.select2("destroy"),this.select2=null),this._super()}}),a.defaults.editors.base64=a.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var e=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader)throw"FileReader required for base64 editor";this.uploader=this.theme.getFormInputField("file"),this.uploader.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),
this.files&&this.files.length){var n=new FileReader;n.onload=function(t){e.value=t.target.result,e.refreshPreview(),e.onChange(!0),n=null},n.readAsDataURL(this.files[0])}})}this.preview=this.theme.getFormInputDescription(this.schema.description),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview),this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.value&&(this.last_preview=this.value,this.preview.innerHTML="",this.value)){var e=this.value.match(/^data:([^;,]+)[;,]/);if(e&&(e=e[1]),e){if(this.preview.innerHTML="<strong>Type:</strong> "+e+", <strong>Size:</strong> "+Math.floor((this.value.length-this.value.split(",")[0].length-1)/1.33333)+" bytes","image"===e.substr(0,5)){this.preview.innerHTML+="<br>";var t=document.createElement("img");t.style.maxWidth="100%",t.style.maxHeight="100px",t.src=this.value,this.preview.appendChild(t)}}else this.preview.innerHTML="<em>Invalid data URI</em>"}},enable:function(){this.uploader&&(this.uploader.disabled=!1),this._super()},disable:function(){this.uploader&&(this.uploader.disabled=!0),this._super()},setValue:function(e){this.value!==e&&(this.value=e,this.input.value=this.value,this.refreshPreview(),this.onChange())},destroy:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),this._super()}}),a.defaults.editors.upload=a.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var e=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!this.jsoneditor.options.upload)throw"Upload handler required for upload editor";this.uploader=this.theme.getFormInputField("file"),this.uploader.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),this.files&&this.files.length){var n=new FileReader;n.onload=function(t){e.preview_value=t.target.result,e.refreshPreview(),e.onChange(!0),n=null},n.readAsDataURL(this.files[0])}})}var t=this.schema.description;t||(t=""),this.preview=this.theme.getFormInputDescription(t),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview),this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.preview_value&&(this.last_preview=this.preview_value,this.preview.innerHTML="",this.preview_value)){var e=this,t=this.preview_value.match(/^data:([^;,]+)[;,]/);t&&(t=t[1]),t||(t="unknown");var n=this.uploader.files[0];if(this.preview.innerHTML="<strong>Type:</strong> "+t+", <strong>Size:</strong> "+n.size+" bytes","image"===t.substr(0,5)){this.preview.innerHTML+="<br>";var i=document.createElement("img");i.style.maxWidth="100%",i.style.maxHeight="100px",i.src=this.preview_value,this.preview.appendChild(i)}this.preview.innerHTML+="<br>";var r=this.getButton("Upload","upload","Upload");this.preview.appendChild(r),r.addEventListener("click",function(t){t.preventDefault(),r.setAttribute("disabled","disabled"),e.theme.removeInputError(e.uploader),e.theme.getProgressBar&&(e.progressBar=e.theme.getProgressBar(),e.preview.appendChild(e.progressBar)),e.jsoneditor.options.upload(e.path,n,{success:function(t){e.setValue(t),e.parent?e.parent.onChildEditorChange(e):e.jsoneditor.onChange(),e.progressBar&&e.preview.removeChild(e.progressBar),r.removeAttribute("disabled")},failure:function(t){e.theme.addInputError(e.uploader,t),e.progressBar&&e.preview.removeChild(e.progressBar),r.removeAttribute("disabled")},updateProgress:function(t){e.progressBar&&(t?e.theme.updateProgressBar(e.progressBar,t):e.theme.updateProgressBarUnknown(e.progressBar))}})})}},enable:function(){this.uploader&&(this.uploader.disabled=!1),this._super()},disable:function(){this.uploader&&(this.uploader.disabled=!0),this._super()},setValue:function(e){this.value!==e&&(this.value=e,this.input.value=this.value,this.onChange())},destroy:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),this._super()}}),a.defaults.editors.checkbox=a.AbstractEditor.extend({setValue:function(e,t){this.value=!!e,this.input.checked=this.value,this.onChange()},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){return Math.min(12,Math.max(this.getTitle().length/7,2))},build:function(){var e=this;this.options.compact||(this.label=this.header=this.theme.getCheckboxLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.compact&&(this.container.className+=" compact"),this.input=this.theme.getCheckbox(),this.control=this.theme.getFormControl(this.label,this.input,this.description),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(t){t.preventDefault(),t.stopPropagation(),e.value=this.checked,e.onChange(!0)}),this.container.appendChild(this.control)},enable:function(){this.always_disabled||(this.input.disabled=!1),this._super()},disable:function(){this.input.disabled=!0,this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this._super()}}),a.AbstractTheme=e.extend({getContainer:function(){return document.createElement("div")},getFloatRightLinkHolder:function(){var e=document.createElement("div");return e.style=e.style||{},e.style.cssFloat="right",e.style.marginLeft="10px",e},getModal:function(){var e=document.createElement("div");return e.style.backgroundColor="white",e.style.border="1px solid black",e.style.boxShadow="3px 3px black",e.style.position="absolute",e.style.zIndex="10",e.style.display="none",e},getGridContainer:function(){var e=document.createElement("div");return e},getGridRow:function(){var e=document.createElement("div");return e.className="row",e},getGridColumn:function(){var e=document.createElement("div");return e},setGridColumnSize:function(e,t){},getLink:function(e){var t=document.createElement("a");return t.setAttribute("href","#"),t.appendChild(document.createTextNode(e)),t},disableHeader:function(e){e.style.color="#ccc"},disableLabel:function(e){e.style.color="#ccc"},enableHeader:function(e){e.style.color=""},enableLabel:function(e){e.style.color=""},getFormInputLabel:function(e){var t=document.createElement("label");return t.appendChild(document.createTextNode(e)),t},getCheckboxLabel:function(e){var t=this.getFormInputLabel(e);return t.style.fontWeight="normal",t},getHeader:function(e){var t=document.createElement("h3");return"string"==typeof e?t.textContent=e:t.appendChild(e),t},getCheckbox:function(){var e=this.getFormInputField("checkbox");return e.style.display="inline-block",e.style.width="auto",e},getMultiCheckboxHolder:function(e,t,n){var i=document.createElement("div");t&&(t.style.display="block",i.appendChild(t));for(var r in e)e.hasOwnProperty(r)&&(e[r].style.display="inline-block",e[r].style.marginRight="20px",i.appendChild(e[r]));return n&&i.appendChild(n),i},getSelectInput:function(e){var t=document.createElement("select");return e&&this.setSelectOptions(t,e),t},getSwitcher:function(e){var t=this.getSelectInput(e);return t.style.backgroundColor="transparent",t.style.height="auto",t.style.fontStyle="italic",t.style.fontWeight="normal",t.style.padding="0 0 0 3px",t},getSwitcherOptions:function(e){return e.getElementsByTagName("option")},setSwitcherOptions:function(e,t,n){this.setSelectOptions(e,t,n)},setSelectOptions:function(e,t,n){n=n||[],e.innerHTML="";for(var i=0;i<t.length;i++){var r=document.createElement("option");r.setAttribute("value",t[i]),r.textContent=n[i]||t[i],e.appendChild(r)}},getTextareaInput:function(){var e=document.createElement("textarea");return e.style=e.style||{},e.style.width="100%",e.style.height="300px",e.style.boxSizing="border-box",e},getRangeInput:function(e,t,n){var i=this.getFormInputField("range");return i.setAttribute("min",e),i.setAttribute("max",t),i.setAttribute("step",n),i},getFormInputField:function(e){var t=document.createElement("input");return t.setAttribute("type",e),t},afterInputReady:function(e){},getFormControl:function(e,t,n){var i=document.createElement("div");return i.className="form-control",e&&i.appendChild(e),"checkbox"===t.type?e.insertBefore(t,e.firstChild):i.appendChild(t),n&&i.appendChild(n),i},getIndentedPanel:function(){var e=document.createElement("div");return e.style=e.style||{},e.style.paddingLeft="10px",e.style.marginLeft="10px",e.style.borderLeft="1px solid #ccc",e},getChildEditorHolder:function(){return document.createElement("div")},getDescription:function(e){var t=document.createElement("p");return t.innerHTML=e,t},getCheckboxDescription:function(e){return this.getDescription(e)},getFormInputDescription:function(e){return this.getDescription(e)},getHeaderButtonHolder:function(){return this.getButtonHolder()},getButtonHolder:function(){return document.createElement("div")},getButton:function(e,t,n){var i=document.createElement("button");return i.type="button",this.setButtonText(i,e,t,n),i},setButtonText:function(e,t,n,i){e.innerHTML="",n&&(e.appendChild(n),e.innerHTML+=" "),e.appendChild(document.createTextNode(t)),i&&e.setAttribute("title",i)},getTable:function(){return document.createElement("table")},getTableRow:function(){return document.createElement("tr")},getTableHead:function(){return document.createElement("thead")},getTableBody:function(){return document.createElement("tbody")},getTableHeaderCell:function(e){var t=document.createElement("th");return t.textContent=e,t},getTableCell:function(){var e=document.createElement("td");return e},getErrorMessage:function(e){var t=document.createElement("p");return t.style=t.style||{},t.style.color="red",t.appendChild(document.createTextNode(e)),t},addInputError:function(e,t){},removeInputError:function(e){},addTableRowError:function(e){},removeTableRowError:function(e){},getTabHolder:function(){var e=document.createElement("div");return e.innerHTML="<div style='float: left; width: 130px;' class='tabs'></div><div class='content' style='margin-left: 130px;'></div><div style='clear:both;'></div>",e},applyStyles:function(e,t){e.style=e.style||{};for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])},closest:function(e,t){for(var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e&&e!==document;)try{var i=n.bind(e);if(i(t))return e;e=e.parentNode}catch(r){return!1}return!1},getTab:function(e){var t=document.createElement("div");return t.appendChild(e),t.style=t.style||{},this.applyStyles(t,{border:"1px solid #ccc",borderWidth:"1px 0 1px 1px",textAlign:"center",lineHeight:"30px",borderRadius:"5px",borderBottomRightRadius:0,borderTopRightRadius:0,fontWeight:"bold",cursor:"pointer"}),t},getTabContentHolder:function(e){return e.children[1]},getTabContent:function(){return this.getIndentedPanel()},markTabActive:function(e){this.applyStyles(e,{opacity:1,background:"white"})},markTabInactive:function(e){this.applyStyles(e,{opacity:.5,background:""})},addTab:function(e,t){e.children[0].appendChild(t)},getBlockLink:function(){var e=document.createElement("a");return e.style.display="block",e},getBlockLinkHolder:function(){var e=document.createElement("div");return e},getLinksHolder:function(){var e=document.createElement("div");return e},createMediaLink:function(e,t,n){e.appendChild(t),n.style.width="100%",e.appendChild(n)},createImageLink:function(e,t,n){e.appendChild(t),t.appendChild(n)}}),a.defaults.themes.bootstrap2=a.AbstractTheme.extend({getRangeInput:function(e,t,n){return this._super(e,t,n)},getGridContainer:function(){var e=document.createElement("div");return e.className="container-fluid",e},getGridRow:function(){var e=document.createElement("div");return e.className="row-fluid",e},getFormInputLabel:function(e){var t=this._super(e);return t.style.display="inline-block",t.style.fontWeight="bold",t},setGridColumnSize:function(e,t){e.className="span"+t},getSelectInput:function(e){var t=this._super(e);return t.style.width="auto",t.style.maxWidth="98%",t},getFormInputField:function(e){var t=this._super(e);return t.style.width="98%",t},afterInputReady:function(e){e.controlgroup||(e.controlgroup=this.closest(e,".control-group"),e.controls=this.closest(e,".controls"),this.closest(e,".compact")&&(e.controlgroup.className=e.controlgroup.className.replace(/control-group/g,"").replace(/[ ]{2,}/g," "),e.controls.className=e.controlgroup.className.replace(/controls/g,"").replace(/[ ]{2,}/g," "),e.style.marginBottom=0))},getIndentedPanel:function(){var e=document.createElement("div");return e.className="well well-small",e},getFormInputDescription:function(e){var t=document.createElement("p");return t.className="help-inline",t.textContent=e,t},getFormControl:function(e,t,n){var i=document.createElement("div");i.className="control-group";var r=document.createElement("div");return r.className="controls",e&&"checkbox"===t.getAttribute("type")?(i.appendChild(r),e.className+=" checkbox",e.appendChild(t),r.appendChild(e),r.style.height="30px"):(e&&(e.className+=" control-label",i.appendChild(e)),r.appendChild(t),i.appendChild(r)),n&&r.appendChild(n),i},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.marginLeft="10px",e},getButtonHolder:function(){var e=document.createElement("div");return e.className="btn-group",e},getButton:function(e,t,n){var i=this._super(e,t,n);return i.className+=" btn btn-default",i},getTable:function(){var e=document.createElement("table");return e.className="table table-bordered",e.style.width="auto",e.style.maxWidth="none",e},addInputError:function(e,t){e.controlgroup&&e.controls&&(e.controlgroup.className+=" error",e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.className="help-block errormsg",e.controls.appendChild(e.errmsg)),e.errmsg.textContent=t)},removeInputError:function(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.className=e.controlgroup.className.replace(/\s?error/g,""))},getTabHolder:function(){var e=document.createElement("div");return e.className="tabbable tabs-left",e.innerHTML="<ul class='nav nav-tabs span2' style='margin-right: 0;'></ul><div class='tab-content span10' style='overflow:visible;'></div>",e},getTab:function(e){var t=document.createElement("li"),n=document.createElement("a");return n.setAttribute("href","#"),n.appendChild(e),t.appendChild(n),t},getTabContentHolder:function(e){return e.children[1]},getTabContent:function(){var e=document.createElement("div");return e.className="tab-pane active",e},markTabActive:function(e){e.className+=" active"},markTabInactive:function(e){e.className=e.className.replace(/\s?active/g,"")},addTab:function(e,t){e.children[0].appendChild(t)},getProgressBar:function(){var e=document.createElement("div");e.className="progress";var t=document.createElement("div");return t.className="bar",t.style.width="0%",e.appendChild(t),e},updateProgressBar:function(e,t){e&&(e.firstChild.style.width=t+"%")},updateProgressBarUnknown:function(e){e&&(e.className="progress progress-striped active",e.firstChild.style.width="100%")}}),a.defaults.themes.bootstrap3=a.AbstractTheme.extend({getSelectInput:function(e){var t=this._super(e);return t.className+="form-control",t},setGridColumnSize:function(e,t){e.className="col-md-"+t},afterInputReady:function(e){e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))},getTextareaInput:function(){var e=document.createElement("textarea");return e.className="form-control",e},getRangeInput:function(e,t,n){return this._super(e,t,n)},getFormInputField:function(e){var t=this._super(e);return"checkbox"!==e&&(t.className+="form-control"),t},getFormControl:function(e,t,n){var i=document.createElement("div");return e&&"checkbox"===t.type?(i.className+=" checkbox",e.appendChild(t),e.style.fontSize="14px",i.style.marginTop="0",i.appendChild(e),t.style.position="relative",t.style.cssFloat="left"):(i.className+=" form-group",e&&(e.className+=" control-label",i.appendChild(e)),i.appendChild(t)),n&&i.appendChild(n),i},getIndentedPanel:function(){var e=document.createElement("div");return e.className="well well-sm",e},getFormInputDescription:function(e){var t=document.createElement("p");return t.className="help-block",t.innerHTML=e,t},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.marginLeft="10px",e},getButtonHolder:function(){var e=document.createElement("div");return e.className="btn-group",e},getButton:function(e,t,n){var i=this._super(e,t,n);return i.className+="btn btn-default",i},getTable:function(){var e=document.createElement("table");return e.className="table table-bordered",e.style.width="auto",e.style.maxWidth="none",e},addInputError:function(e,t){e.controlgroup&&(e.controlgroup.className+=" has-error",e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.className="help-block errormsg",e.controlgroup.appendChild(e.errmsg)),e.errmsg.textContent=t)},removeInputError:function(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.className=e.controlgroup.className.replace(/\s?has-error/g,""))},getTabHolder:function(){var e=document.createElement("div");return e.innerHTML="<div class='tabs list-group col-md-2'></div><div class='col-md-10'></div>",e.className="rows",e},getTab:function(e){var t=document.createElement("a");return t.className="list-group-item",t.setAttribute("href","#"),t.appendChild(e),t},markTabActive:function(e){e.className+=" active"},markTabInactive:function(e){e.className=e.className.replace(/\s?active/g,"")},getProgressBar:function(){var e=0,t=100,n=0,i=document.createElement("div");i.className="progress";var r=document.createElement("div");return r.className="progress-bar",r.setAttribute("role","progressbar"),r.setAttribute("aria-valuenow",n),r.setAttribute("aria-valuemin",e),r.setAttribute("aria-valuenax",t),r.innerHTML=n+"%",i.appendChild(r),i},updateProgressBar:function(e,t){if(e){var n=e.firstChild,i=t+"%";n.setAttribute("aria-valuenow",t),n.style.width=i,n.innerHTML=i}},updateProgressBarUnknown:function(e){if(e){var t=e.firstChild;e.className="progress progress-striped active",t.removeAttribute("aria-valuenow"),t.style.width="100%",t.innerHTML=""}}}),a.defaults.themes.foundation=a.AbstractTheme.extend({getChildEditorHolder:function(){var e=document.createElement("div");return e.style.marginBottom="15px",e},getSelectInput:function(e){var t=this._super(e);return t.style.minWidth="none",t.style.padding="5px",t.style.marginTop="3px",t},getSwitcher:function(e){var t=this._super(e);return t.style.paddingRight="8px",t},afterInputReady:function(e){this.closest(e,".compact")&&(e.style.marginBottom=0),e.group=this.closest(e,".form-control")},getFormInputLabel:function(e){var t=this._super(e);return t.style.display="inline-block",t},getFormInputField:function(e){var t=this._super(e);return t.style.width="100%",t.style.marginBottom="checkbox"===e?"0":"12px",t},getFormInputDescription:function(e){var t=document.createElement("p");return t.textContent=e,t.style.marginTop="-10px",t.style.fontStyle="italic",t},getIndentedPanel:function(){var e=document.createElement("div");return e.className="panel",e},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.display="inline-block",e.style.marginLeft="10px",e.style.verticalAlign="middle",e},getButtonHolder:function(){var e=document.createElement("div");return e.className="button-group",e},getButton:function(e,t,n){var i=this._super(e,t,n);return i.className+=" small button",i},addInputError:function(e,t){e.group&&(e.group.className+=" error",e.errmsg?e.errmsg.style.display="":(e.insertAdjacentHTML("afterend",'<small class="error"></small>'),e.errmsg=e.parentNode.getElementsByClassName("error")[0]),e.errmsg.textContent=t)},removeInputError:function(e){e.errmsg&&(e.group.className=e.group.className.replace(/ error/g,""),e.errmsg.style.display="none")},getProgressBar:function(){var e=document.createElement("div");e.className="progress";var t=document.createElement("span");return t.className="meter",t.style.width="0%",e.appendChild(t),e},updateProgressBar:function(e,t){e&&(e.firstChild.style.width=t+"%")},updateProgressBarUnknown:function(e){e&&(e.firstChild.style.width="100%")}}),a.defaults.themes.foundation3=a.defaults.themes.foundation.extend({getHeaderButtonHolder:function(){var e=this._super();return e.style.fontSize=".6em",e},getFormInputLabel:function(e){var t=this._super(e);return t.style.fontWeight="bold",t},getTabHolder:function(){var e=document.createElement("div");return e.className="row",e.innerHTML="<dl class='tabs vertical two columns'></dl><div class='tabs-content ten columns'></div>",e},setGridColumnSize:function(e,t){var n=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve"];e.className="columns "+n[t]},getTab:function(e){var t=document.createElement("dd"),n=document.createElement("a");return n.setAttribute("href","#"),n.appendChild(e),t.appendChild(n),t},getTabContentHolder:function(e){return e.children[1]},getTabContent:function(){var e=document.createElement("div");return e.className="content active",e.style.paddingLeft="5px",e},markTabActive:function(e){e.className+=" active"},markTabInactive:function(e){e.className=e.className.replace(/\s*active/g,"")},addTab:function(e,t){e.children[0].appendChild(t)}}),a.defaults.themes.foundation4=a.defaults.themes.foundation.extend({getHeaderButtonHolder:function(){var e=this._super();return e.style.fontSize=".6em",e},setGridColumnSize:function(e,t){e.className="columns large-"+t},getFormInputDescription:function(e){var t=this._super(e);return t.style.fontSize=".8rem",t},getFormInputLabel:function(e){var t=this._super(e);return t.style.fontWeight="bold",t}}),a.defaults.themes.foundation5=a.defaults.themes.foundation.extend({getFormInputDescription:function(e){var t=this._super(e);return t.style.fontSize=".8rem",t},setGridColumnSize:function(e,t){e.className="columns medium-"+t},getButton:function(e,t,n){var i=this._super(e,t,n);return i.className=i.className.replace(/\s*small/g,"")+" tiny",i},getTabHolder:function(){var e=document.createElement("div");return e.innerHTML="<dl class='tabs vertical'></dl><div class='tabs-content vertical'></div>",e},getTab:function(e){var t=document.createElement("dd"),n=document.createElement("a");return n.setAttribute("href","#"),n.appendChild(e),t.appendChild(n),t},getTabContentHolder:function(e){return e.children[1]},getTabContent:function(){var e=document.createElement("div");return e.className="content active",e.style.paddingLeft="5px",e},markTabActive:function(e){e.className+=" active"},markTabInactive:function(e){e.className=e.className.replace(/\s*active/g,"")},addTab:function(e,t){e.children[0].appendChild(t)}}),a.defaults.themes.html=a.AbstractTheme.extend({getFormInputLabel:function(e){var t=this._super(e);return t.style.display="block",t.style.marginBottom="3px",t.style.fontWeight="bold",t},getFormInputDescription:function(e){var t=this._super(e);return t.style.fontSize=".8em",t.style.margin=0,t.style.display="inline-block",t.style.fontStyle="italic",t},getIndentedPanel:function(){var e=this._super();return e.style.border="1px solid #ddd",e.style.padding="5px",e.style.margin="5px",e.style.borderRadius="3px",e},getChildEditorHolder:function(){var e=this._super();return e.style.marginBottom="8px",e},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.display="inline-block",e.style.marginLeft="10px",e.style.fontSize=".8em",e.style.verticalAlign="middle",e},getTable:function(){var e=this._super();return e.style.borderBottom="1px solid #ccc",e.style.marginBottom="5px",e},addInputError:function(e,t){if(e.style.borderColor="red",e.errmsg)e.errmsg.style.display="block";else{var n=this.closest(e,".form-control");e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),e.errmsg.style=e.errmsg.style||{},e.errmsg.style.color="red",n.appendChild(e.errmsg)}e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(t))},removeInputError:function(e){e.style.borderColor="",e.errmsg&&(e.errmsg.style.display="none")},getProgressBar:function(){var e=100,t=0,n=document.createElement("progress");return n.setAttribute("max",e),n.setAttribute("value",t),n},updateProgressBar:function(e,t){e&&e.setAttribute("value",t)},updateProgressBarUnknown:function(e){e&&e.removeAttribute("value")}}),a.defaults.themes.jqueryui=a.AbstractTheme.extend({getTable:function(){var e=this._super();return e.setAttribute("cellpadding",5),e.setAttribute("cellspacing",0),e},getTableHeaderCell:function(e){var t=this._super(e);return t.className="ui-state-active",t.style.fontWeight="bold",t},getTableCell:function(){var e=this._super();return e.className="ui-widget-content",e},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.marginLeft="10px",e.style.fontSize=".6em",e.style.display="inline-block",e},getFormInputDescription:function(e){var t=this.getDescription(e);return t.style.marginLeft="10px",t.style.display="inline-block",t},getFormControl:function(e,t,n){var i=this._super(e,t,n);return"checkbox"===t.type?(i.style.lineHeight="25px",i.style.padding="3px 0"):i.style.padding="4px 0 8px 0",i},getDescription:function(e){var t=document.createElement("span");return t.style.fontSize=".8em",t.style.fontStyle="italic",t.textContent=e,t},getButtonHolder:function(){var e=document.createElement("div");return e.className="ui-buttonset",e.style.fontSize=".7em",e},getFormInputLabel:function(e){var t=document.createElement("label");return t.style.fontWeight="bold",t.style.display="block",t.textContent=e,t},getButton:function(e,t,n){var i=document.createElement("button");i.className="ui-button ui-widget ui-state-default ui-corner-all",t&&!e?(i.className+=" ui-button-icon-only",t.className+=" ui-button-icon-primary ui-icon-primary",i.appendChild(t)):t?(i.className+=" ui-button-text-icon-primary",t.className+=" ui-button-icon-primary ui-icon-primary",i.appendChild(t)):i.className+=" ui-button-text-only";var r=document.createElement("span");return r.className="ui-button-text",r.textContent=e||n||".",i.appendChild(r),i.setAttribute("title",n),i},setButtonText:function(e,t,n,i){e.innerHTML="",e.className="ui-button ui-widget ui-state-default ui-corner-all",n&&!t?(e.className+=" ui-button-icon-only",n.className+=" ui-button-icon-primary ui-icon-primary",e.appendChild(n)):n?(e.className+=" ui-button-text-icon-primary",n.className+=" ui-button-icon-primary ui-icon-primary",e.appendChild(n)):e.className+=" ui-button-text-only";var r=document.createElement("span");r.className="ui-button-text",r.textContent=t||i||".",e.appendChild(r),e.setAttribute("title",i)},getIndentedPanel:function(){var e=document.createElement("div");return e.className="ui-widget-content ui-corner-all",e.style.padding="1em 1.4em",e.style.marginBottom="20px",e},afterInputReady:function(e){e.controls||(e.controls=this.closest(e,".form-control"))},addInputError:function(e,t){e.controls&&(e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("div"),e.errmsg.className="ui-state-error",e.controls.appendChild(e.errmsg)),e.errmsg.textContent=t)},removeInputError:function(e){e.errmsg&&(e.errmsg.style.display="none")},markTabActive:function(e){e.className=e.className.replace(/\s*ui-widget-header/g,"")+" ui-state-active"},markTabInactive:function(e){e.className=e.className.replace(/\s*ui-state-active/g,"")+" ui-widget-header"}}),a.AbstractIconLib=e.extend({mapping:{collapse:"",expand:"","delete":"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""},icon_prefix:"",getIconClass:function(e){return this.mapping[e]?this.icon_prefix+this.mapping[e]:null},getIcon:function(e){var t=this.getIconClass(e);if(!t)return null;var n=document.createElement("i");return n.className=t,n}}),a.defaults.iconlibs.bootstrap2=a.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-up","delete":"trash",edit:"pencil",add:"plus",cancel:"ban-circle",save:"ok",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"}),a.defaults.iconlibs.bootstrap3=a.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"floppy-remove",save:"floppy-saved",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"glyphicon glyphicon-"}),a.defaults.iconlibs.fontawesome3=a.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"ban-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"}),a.defaults.iconlibs.fontawesome4=a.AbstractIconLib.extend({mapping:{collapse:"caret-square-o-down",expand:"caret-square-o-right","delete":"times",edit:"pencil",add:"plus",cancel:"ban",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fa fa-"}),a.defaults.iconlibs.foundation2=a.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"remove",edit:"edit",add:"add-doc",cancel:"error",save:"checkmark",moveup:"up-arrow",movedown:"down-arrow"},icon_prefix:"foundicon-"}),a.defaults.iconlibs.foundation3=a.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"x",edit:"pencil",add:"page-add",cancel:"x-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fi-"}),a.defaults.iconlibs.jqueryui=a.AbstractIconLib.extend({mapping:{collapse:"triangle-1-s",expand:"triangle-1-e","delete":"trash",edit:"pencil",add:"plusthick",cancel:"closethick",save:"disk",moveup:"arrowthick-1-n",movedown:"arrowthick-1-s"},icon_prefix:"ui-icon ui-icon-"}),a.defaults.templates["default"]=function(){return{compile:function(e){var t=e.match(/{{\s*([a-zA-Z0-9\-_\.]+)\s*}}/g),n=t.length;if(!n)return function(){return e};for(var i=[],r=function(e){var n,r=t[e].replace(/[{}\s]+/g,"").split("."),a=r.length;if(a>1){var o;n=function(t){for(o=t,e=0;a>e&&(o=o[r[e]],o);e++);return o}}else r=r[0],n=function(e){return e[r]};i.push({s:t[e],r:n})},a=0;n>a;a++)r(a);return function(t){var r,o=e+"";for(a=0;n>a;a++)r=i[a],o=o.replace(r.s,r.r(t));return o}}}},a.defaults.templates.ejs=function(){return window.EJS?{compile:function(e){var t=new window.EJS({text:e});return function(e){return t.render(e)}}}:!1},a.defaults.templates.handlebars=function(){return window.Handlebars},a.defaults.templates.hogan=function(){return window.Hogan?{compile:function(e){var t=window.Hogan.compile(e);return function(e){return t.render(e)}}}:!1},a.defaults.templates.markup=function(){return window.Mark&&window.Mark.up?{compile:function(e){return function(t){return window.Mark.up(e,t)}}}:!1},a.defaults.templates.mustache=function(){return window.Mustache?{compile:function(e){return function(t){return window.Mustache.render(e,t)}}}:!1},a.defaults.templates.swig=function(){return window.swig},a.defaults.templates.underscore=function(){return window._?{compile:function(e){return function(t){return window._.template(e,t)}}}:!1},a.defaults.theme="html",
a.defaults.template="default",a.defaults.options={},a.defaults.translate=function(e,t){var n=a.defaults.languages[a.defaults.language];if(!n)throw"Unknown language "+a.defaults.language;var i=n[e]||a.defaults.languages[a.defaults.default_language][e];if("undefined"==typeof i)throw"Unknown translate string "+e;if(t)for(var r=0;r<t.length;r++)i=i.replace(new RegExp("\\{\\{"+r+"}}","g"),t[r]);return i},a.defaults.default_language="en",a.defaults.language=a.defaults.default_language,a.defaults.languages.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the provided pattern",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_dependency:"Must have property {{0}}"},a.plugins={ace:{theme:""},epiceditor:{},sceditor:{},select2:{}};for(var o in a.defaults.editors)a.defaults.editors.hasOwnProperty(o)&&(a.defaults.editors[o].options=a.defaults.editors.options||{});a.defaults.resolvers.unshift(function(e){return"string"!=typeof e.type?"multiple":void 0}),a.defaults.resolvers.unshift(function(e){return"string"==typeof e.type?e.type:void 0}),a.defaults.resolvers.unshift(function(e){return"boolean"===e.type?"checkbox"===e.format||e.options&&e.options.checkbox?"checkbox":"select":void 0}),a.defaults.resolvers.unshift(function(e){return"any"===e.type?"multiple":void 0}),a.defaults.resolvers.unshift(function(e){return"string"===e.type&&e.media&&"base64"===e.media.binaryEncoding?"base64":void 0}),a.defaults.resolvers.unshift(function(e){return"string"===e.type&&"url"===e.format&&e.options&&e.options.upload===!0&&window.FileReader?"upload":void 0}),a.defaults.resolvers.unshift(function(e){return"array"==e.type&&"table"==e.format?"table":void 0}),a.defaults.resolvers.unshift(function(e){return e.enumSource?"select":void 0}),a.defaults.resolvers.unshift(function(e){if(e["enum"]){if("array"===e.type||"object"===e.type)return"enum";if("number"===e.type||"integer"===e.type||"string"===e.type)return"select"}}),a.defaults.resolvers.unshift(function(e){return"array"===e.type&&e.items&&!Array.isArray(e.items)&&e.uniqueItems&&e.items["enum"]&&["string","number","integer"].indexOf(e.items.type)>=0?"multiselect":void 0}),a.defaults.resolvers.unshift(function(e){return e.oneOf?"multiple":void 0}),function(){if(window.jQuery||window.Zepto){var e=window.jQuery||window.Zepto;e.jsoneditor=a.defaults,e.fn.jsoneditor=function(e){var t=this,n=this.data("jsoneditor");if("value"===e){if(!n)throw"Must initialize jsoneditor before getting/setting the value";if(!(arguments.length>1))return n.getValue();n.setValue(arguments[1])}else{if("validate"===e){if(!n)throw"Must initialize jsoneditor before validating";return arguments.length>1?n.validate(arguments[1]):n.validate()}"destroy"===e?n&&(n.destroy(),this.data("jsoneditor",null)):(n&&n.destroy(),n=new a(this.get(0),e),this.data("jsoneditor",n),n.on("change",function(){t.trigger("change")}),n.on("ready",function(){t.trigger("ready")}))}return this}}}(),window.JSONEditor=a}(),function(){"use strict";angular.module("ui.sortable",[]).constant("sortableConfig",{itemClass:"as-sortable-item",handleClass:"as-sortable-item-handle",placeHolderClass:"as-sortable-placeholder",dragClass:"as-sortable-drag",hiddenClass:"as-sortable-hidden",dragging:"as-sortable-dragging"})}(),function(){"use strict";var e=angular.module("ui.sortable");e.factory("$helper",["$document","$window",function(e,t){return{height:function(e){return e[0].getBoundingClientRect().height},width:function(e){return e[0].getBoundingClientRect().width},offset:function(n,i){var r=n[0].getBoundingClientRect();return i||(i=e[0].documentElement),{width:r.width||n.prop("offsetWidth"),height:r.height||n.prop("offsetHeight"),top:r.top+(t.pageYOffset||i.scrollTop-i.offsetTop),left:r.left+(t.pageXOffset||i.scrollLeft-i.offsetLeft)}},eventObj:function(e){var t=e;return void 0!==e.targetTouches?t=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(t=e.originalEvent.targetTouches.item(0)),t},isTouchInvalid:function(e){var t=!1;return void 0!==e.touches&&e.touches.length>1?t=!0:void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&e.originalEvent.touches.length>1&&(t=!0),t},positionStarted:function(e,t,n){var i={};return i.offsetX=e.pageX-this.offset(t,n).left,i.offsetY=e.pageY-this.offset(t,n).top,i.startX=i.lastX=e.pageX,i.startY=i.lastY=e.pageY,i.nowX=i.nowY=i.distX=i.distY=i.dirAx=0,i.dirX=i.dirY=i.lastDirX=i.lastDirY=i.distAxX=i.distAxY=0,i},calculatePosition:function(e,t){e.lastX=e.nowX,e.lastY=e.nowY,e.nowX=t.pageX,e.nowY=t.pageY,e.distX=e.nowX-e.lastX,e.distY=e.nowY-e.lastY,e.lastDirX=e.dirX,e.lastDirY=e.dirY,e.dirX=0===e.distX?0:e.distX>0?1:-1,e.dirY=0===e.distY?0:e.distY>0?1:-1;var n=Math.abs(e.distX)>Math.abs(e.distY)?1:0;e.dirAx!==n?(e.distAxX=0,e.distAxY=0):(e.distAxX+=Math.abs(e.distX),0!==e.dirX&&e.dirX!==e.lastDirX&&(e.distAxX=0),e.distAxY+=Math.abs(e.distY),0!==e.dirY&&e.dirY!==e.lastDirY&&(e.distAxY=0)),e.dirAx=n},movePosition:function(e,t,n,i,r,a){var o,s="relative"===r;t.x=e.pageX-n.offsetX,t.y=e.pageY-n.offsetY,i&&(o=this.offset(i,a),s&&(t.x-=o.left,t.y-=o.top,o.left=0,o.top=0),t.x<o.left?t.x=o.left:t.x>=o.width+o.left-this.offset(t).width&&(t.x=o.width+o.left-this.offset(t).width),t.y<o.top?t.y=o.top:t.y>=o.height+o.top-this.offset(t).height&&(t.y=o.height+o.top-this.offset(t).height)),t.css({left:t.x+"px",top:t.y+"px"}),this.calculatePosition(n,e)},dragItem:function(e){return{index:e.index(),parent:e.sortableScope,source:e,sourceInfo:{index:e.index(),itemScope:e.itemScope,sortableScope:e.sortableScope},moveTo:function(e,t){this.parent=e,this.isSameParent()&&this.source.index()<t&&(t-=1),this.index=t},isSameParent:function(){return this.parent.element===this.sourceInfo.sortableScope.element},isOrderChanged:function(){return this.index!==this.sourceInfo.index},eventArgs:function(){return{source:this.sourceInfo,dest:{index:this.index,sortableScope:this.parent}}},apply:function(){this.sourceInfo.sortableScope.removeItem(this.sourceInfo.index),this.parent.insertItem(this.index,this.source.modelValue)}}},noDrag:function(e){return void 0!==e.attr("no-drag")||void 0!==e.attr("data-no-drag")}}}])}(),function(){"use strict";var e=angular.module("ui.sortable");e.controller("ui.sortable.sortableController",["$scope",function(e){this.scope=e,e.modelValue=null,e.callbacks=null,e.type="sortable",e.options={},e.isDisabled=!1,e.insertItem=function(t,n){e.modelValue.splice(t,0,n)},e.removeItem=function(t){var n=null;return t>-1&&(n=e.modelValue.splice(t,1)[0]),n},e.isEmpty=function(){return e.modelValue&&0===e.modelValue.length},e.accept=function(t,n,i){return e.callbacks.accept(t,n,i)}}]),e.directive("asSortable",function(){return{require:"ngModel",restrict:"A",scope:!0,controller:"ui.sortable.sortableController",link:function(e,t,n,i){var r,a;r=i,r&&(r.$render=function(){r.$modelValue&&angular.isArray(r.$modelValue)||r.$setViewValue([]),e.modelValue=r.$modelValue},e.element=t,t.data("_scope",e),a={accept:null,orderChanged:null,itemMoved:null,dragStart:null,dragMove:null,dragCancel:null,dragEnd:null},a.accept=function(e,t,n){return!0},a.orderChanged=function(e){},a.itemMoved=function(e){},a.dragStart=function(e){},a.dragMove=function(e){},a.dragCancel=function(e){},a.dragEnd=function(e){},e.$watch(n.asSortable,function(t,n){angular.forEach(t,function(t,n){a[n]?"function"==typeof t&&(a[n]=t):e.options[n]=t}),e.callbacks=a},!0),angular.isDefined(n.isDisabled)&&e.$watch(n.isDisabled,function(t,n){angular.isUndefined(t)||(e.isDisabled=t)},!0))}}})}(),function(){"use strict";var e=angular.module("ui.sortable");e.controller("ui.sortable.sortableItemHandleController",["$scope",function(e){this.scope=e,e.itemScope=null,e.type="handle"}]),e.directive("asSortableItemHandle",["sortableConfig","$helper","$window","$document",function(e,t,n,i){return{require:"^asSortableItem",scope:!0,restrict:"A",controller:"ui.sortable.sortableItemHandleController",link:function(r,a,o,s){function l(e,t){e[0].parentNode.insertBefore(h[0],e[0]),m.moveTo(t.sortableScope,t.index())}function c(e,t){e.after(h),m.moveTo(t.sortableScope,t.index()+1)}function u(e){for(var t;!t&&e.length;)t=e.data("_scope"),t||(e=e.parent());return t}function d(){f.replaceWith(r.itemScope.element),h.remove(),p.remove(),p=null,D=!1,v.css("cursor",""),v.removeClass("as-sortable-un-selectable")}var p,h,f,g,m,v,y,b,w,x,k,C,S,_,T,$,A,E,P,I,D,M,N=!1;I=n.hasOwnProperty("ontouchstart"),e.handleClass&&a.addClass(e.handleClass),r.itemScope=s.scope,a.data("_scope",r),r.$watch("sortableScope.isDisabled",function(e){N!==e&&(N=e,N?A():$())}),M=function(e){return angular.element("function"==typeof r.sortableScope.options.placeholder?r.sortableScope.options.placeholder(e):"string"==typeof r.sortableScope.options.placeholder?r.sortableScope.options.placeholder:i[0].createElement(e.element.prop("tagName")))},b=function(e){var n,r=function(){angular.element(i).unbind("mousemove",o),angular.element(i).unbind("touchmove",o),a.unbind("mouseup",r),a.unbind("touchend",r),a.unbind("touchcancel",r)},o=function(i){i.preventDefault();var a=t.eventObj(i);n||(n={clientX:a.clientX,clientY:a.clientY}),Math.abs(a.clientX-n.clientX)+Math.abs(a.clientY-n.clientY)>10&&(r(),x(e))};angular.element(i).bind("mousemove",o),angular.element(i).bind("touchmove",o),a.bind("mouseup",r),a.bind("touchend",r),a.bind("touchcancel",r)},x=function(n){var a,o;(I||2!==n.button&&3!==n.which)&&(I&&t.isTouchInvalid(n)||!D&&_(n)&&(D=!0,n.preventDefault(),a=t.eventObj(n),w=angular.element(i[0].querySelector(r.sortableScope.options.scrollableContainer)).length>0?i[0].querySelector(r.sortableScope.options.scrollableContainer):i[0].documentElement,v=angular.element(angular.element(i[0].querySelector(r.sortableScope.options.containment)).length>0?i[0].querySelector(r.sortableScope.options.containment):i[0].body),v.css("cursor","move"),v.addClass("as-sortable-un-selectable"),y=r.sortableScope.options.containerPositioning||"absolute",m=t.dragItem(r),o=r.itemScope.element.prop("tagName"),p=angular.element(i[0].createElement(r.sortableScope.element.prop("tagName"))).addClass(r.sortableScope.element.attr("class")).addClass(e.dragClass),p.css("width",t.width(r.itemScope.element)+"px"),p.css("height",t.height(r.itemScope.element)+"px"),h=M(r.itemScope).addClass(e.placeHolderClass).addClass(r.sortableScope.options.additionalPlaceholderClass),h.css("width",t.width(r.itemScope.element)+"px"),h.css("height",t.height(r.itemScope.element)+"px"),f=angular.element(i[0].createElement(o)),e.hiddenClass&&f.addClass(e.hiddenClass),g=t.positionStarted(a,r.itemScope.element,w),r.itemScope.element.after(h),r.itemScope.element.after(f),p.append(r.itemScope.element),v.append(p),t.movePosition(a,p,g,v,y,w),r.sortableScope.$apply(function(){r.callbacks.dragStart(m.eventArgs())}),E()))},_=function(e){var n,i,r;for(n=angular.element(e.target),i=u(n),r=i&&"handle"===i.type;r&&n[0]!==a[0];)t.noDrag(n)&&(r=!1),n=n.parent();return r},k=function(a){var o,s,d,f,b;if((!I||!t.isTouchInvalid(a))&&D&&p){if(a.preventDefault(),o=t.eventObj(a),r.sortableScope.$apply(function(){r.callbacks.dragMove(g,v)}),t.movePosition(o,p,g,v,y,w),s=o.pageX-i[0].documentElement.scrollLeft,d=o.pageY-(n.pageYOffset||i[0].documentElement.scrollTop),p.addClass(e.hiddenClass),i[0].elementFromPoint(s,d),b=angular.element(i[0].elementFromPoint(s,d)),p.removeClass(e.hiddenClass),p.addClass(e.dragging),f=u(b),!f||!f.type)return;if("handle"===f.type&&(f=f.itemScope),"item"!==f.type&&"sortable"!==f.type)return;if("item"===f.type&&f.accept(r,f.sortableScope,f)){b=f.element;var x=T(f.sortableScope.element);0>x?l(b,f):x<=f.index()?c(b,f):l(b,f)}"sortable"===f.type&&f.accept(r,f)&&b[0].parentNode!==f.element[0]&&(b[0].appendChild(h[0]),m.moveTo(f,f.modelValue.length))}},T=function(t){var n,i;for(n=t.children(),i=0;i<n.length;i+=1)if(angular.element(n[i]).hasClass(e.placeHolderClass))return i;return-1},C=function(e){D&&(e.preventDefault(),p&&(d(),m.apply(),r.sortableScope.$apply(function(){m.isSameParent()?m.isOrderChanged()&&r.callbacks.orderChanged(m.eventArgs()):r.callbacks.itemMoved(m.eventArgs())}),r.sortableScope.$apply(function(){r.callbacks.dragEnd(m.eventArgs())}),m=null),P())},S=function(e){D&&(e.preventDefault(),p&&(d(),r.sortableScope.$apply(function(){r.callbacks.dragCancel(m.eventArgs())}),m=null),P())},$=function(){a.bind("touchstart",b),a.bind("mousedown",b)},A=function(){a.unbind("touchstart",b),a.unbind("mousedown",b)},$(),angular.element(i[0].body).bind("keydown",function(e){27===e.keyCode&&S(e)}),E=function(){angular.element(i).bind("touchmove",k),angular.element(i).bind("touchend",C),angular.element(i).bind("touchcancel",S),angular.element(i).bind("mousemove",k),angular.element(i).bind("mouseup",C)},P=function(){angular.element(i).unbind("touchend",C),angular.element(i).unbind("touchcancel",S),angular.element(i).unbind("touchmove",k),angular.element(i).unbind("mouseup",C),angular.element(i).unbind("mousemove",k)}}}}])}(),function(){"use strict";var e=angular.module("ui.sortable");e.controller("ui.sortable.sortableItemController",["$scope",function(e){this.scope=e,e.sortableScope=null,e.modelValue=null,e.type="item",e.index=function(){return e.$index},e.itemData=function(){return e.sortableScope.modelValue[e.$index]}}]),e.directive("asSortableItem",["sortableConfig",function(e){return{require:["^asSortable","?ngModel"],restrict:"A",controller:"ui.sortable.sortableItemController",link:function(t,n,i,r){var a=r[0],o=r[1];e.itemClass&&n.addClass(e.itemClass),t.sortableScope=a.scope,o?o.$render=function(){t.modelValue=o.$modelValue}:t.modelValue=a.scope.modelValue[t.$index],t.element=n,n.data("_scope",t)}}}])}(),!function(){function e(e,t){return t>e?-1:e>t?1:e>=t?0:0/0}function t(e){return null===e?0/0:+e}function n(e){return!isNaN(e)}function i(e){return{left:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);r>i;){var a=i+r>>>1;e(t[a],n)<0?i=a+1:r=a}return i},right:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);r>i;){var a=i+r>>>1;e(t[a],n)>0?r=a:i=a+1}return i}}}function r(e){return e.length}function a(e){for(var t=1;e*t%1;)t*=10;return t}function o(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function s(){this._=Object.create(null)}function l(e){return(e+="")===vo||e[0]===yo?yo+e:e}function c(e){return(e+="")[0]===yo?e.slice(1):e}function u(e){return l(e)in this._}function d(e){return(e=l(e))in this._&&delete this._[e]}function p(){var e=[];for(var t in this._)e.push(c(t));return e}function h(){var e=0;for(var t in this._)++e;return e}function f(){for(var e in this._)return!1;return!0}function g(){this._=Object.create(null)}function m(e,t,n){return function(){var i=n.apply(t,arguments);return i===t?e:i}}function v(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,i=bo.length;i>n;++n){var r=bo[n]+t;if(r in e)return r}}function y(){}function b(){}function w(e){function t(){for(var t,i=n,r=-1,a=i.length;++r<a;)(t=i[r].on)&&t.apply(this,arguments);return e}var n=[],i=new s;return t.on=function(t,r){var a,o=i.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),i.remove(t)),r&&n.push(i.set(t,{on:r})),e)},t}function x(){to.event.preventDefault()}function k(){for(var e,t=to.event;e=t.sourceEvent;)t=e;return t}function C(e){for(var t=new b,n=0,i=arguments.length;++n<i;)t[arguments[n]]=w(t);return t.of=function(n,i){return function(r){try{var a=r.sourceEvent=to.event;r.target=e,to.event=r,t[r.type].apply(n,i)}finally{to.event=a}}},t}function S(e){return xo(e,To),e}function _(e){return"function"==typeof e?e:function(){return ko(e,this)}}function T(e){return"function"==typeof e?e:function(){return Co(e,this)}}function $(e,t){function n(){this.removeAttribute(e)}function i(){this.removeAttributeNS(e.space,e.local)}function r(){this.setAttribute(e,t)}function a(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=to.ns.qualify(e),null==t?e.local?i:n:"function"==typeof t?e.local?s:o:e.local?a:r}function A(e){return e.trim().replace(/\s+/g," ")}function E(e){return new RegExp("(?:^|\\s+)"+to.requote(e)+"(?:\\s+|$)","g")}function P(e){return(e+"").trim().split(/^|\s+/)}function I(e,t){function n(){for(var n=-1;++n<r;)e[n](this,t)}function i(){for(var n=-1,i=t.apply(this,arguments);++n<r;)e[n](this,i)}e=P(e).map(D);var r=e.length;return"function"==typeof t?i:n}function D(e){var t=E(e);return function(n,i){if(r=n.classList)return i?r.add(e):r.remove(e);var r=n.getAttribute("class")||"";i?(t.lastIndex=0,t.test(r)||n.setAttribute("class",A(r+" "+e))):n.setAttribute("class",A(r.replace(t," ")))}}function M(e,t,n){function i(){this.style.removeProperty(e)}function r(){this.style.setProperty(e,t,n)}function a(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}return null==t?i:"function"==typeof t?a:r}function N(e,t){function n(){delete this[e]}function i(){this[e]=t}function r(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?r:i}function j(e){return"function"==typeof e?e:(e=to.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}function O(){var e=this.parentNode;e&&e.removeChild(this)}function L(e){return{__data__:e}}function R(e){return function(){return _o(this,e)}}function F(t){return arguments.length||(t=e),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function U(e,t){for(var n=0,i=e.length;i>n;n++)for(var r,a=e[n],o=0,s=a.length;s>o;o++)(r=a[o])&&t(r,o,n);return e}function z(e){return xo(e,Ao),e}function q(e){var t,n;return function(i,r,a){var o,s=e[a].update,l=s.length;for(a!=n&&(n=a,t=0),r>=t&&(t=r+1);!(o=s[t])&&++t<l;);return o}}function B(e){var t=e.__transition__;t&&++t.active}function H(e,t,n){function i(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function r(){var r=l(t,io(arguments));i.call(this),this.addEventListener(e,this[o]=r,r.$=n),r._=t}function a(){var t,n=new RegExp("^__on([^.]+)"+to.requote(e)+"$");for(var i in this)if(t=i.match(n)){var r=this[i];this.removeEventListener(t[1],r,r.$),delete this[i]}}var o="__on"+e,s=e.indexOf("."),l=V;s>0&&(e=e.slice(0,s));var c=Po.get(e);return c&&(e=c,l=W),s?t?r:i:t?y:a}function V(e,t){return function(n){var i=to.event;to.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{to.event=i}}}function W(e,t){var n=V(e,t);return function(e){var t=this,i=e.relatedTarget;i&&(i===t||8&i.compareDocumentPosition(t))||n.call(t,e)}}function G(){var e=".dragsuppress-"+ ++Do,t="click"+e,n=to.select(oo).on("touchmove"+e,x).on("dragstart"+e,x).on("selectstart"+e,x);if(Io){var i=ao.style,r=i[Io];i[Io]="none"}return function(a){if(n.on(e,null),Io&&(i[Io]=r),a){var o=function(){n.on(t,null)};n.on(t,function(){x(),o()},!0),setTimeout(o,0)}}}function K(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>Mo&&(oo.scrollX||oo.scrollY)){n=to.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var r=n[0][0].getScreenCTM();Mo=!(r.f||r.e),n.remove()}return Mo?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}function X(){return to.event.changedTouches[0].identifier}function Y(){return to.event.target}function J(){return oo}function Q(e){return e>0?1:0>e?-1:0}function Z(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ee(e){return e>1?0:-1>e?Oo:Math.acos(e)}function te(e){return e>1?Fo:-1>e?-Fo:Math.asin(e)}function ne(e){return((e=Math.exp(e))-1/e)/2}function ie(e){return((e=Math.exp(e))+1/e)/2}function re(e){return((e=Math.exp(2*e))-1)/(e+1)}function ae(e){return(e=Math.sin(e/2))*e}function oe(){}function se(e,t,n){return this instanceof se?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof se?new se(e.h,e.s,e.l):xe(""+e,ke,se):new se(e,t,n)}function le(e,t,n){function i(e){return e>360?e-=360:0>e&&(e+=360),60>e?a+(o-a)*e/60:180>e?o:240>e?a+(o-a)*(240-e)/60:a}function r(e){return Math.round(255*i(e))}var a,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,a=2*n-o,new ve(r(e+120),r(e),r(e-120))}function ce(e,t,n){return this instanceof ce?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof ce?new ce(e.h,e.c,e.l):e instanceof de?he(e.l,e.a,e.b):he((e=Ce((e=to.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new ce(e,t,n)}function ue(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new de(n,Math.cos(e*=Uo)*t,Math.sin(e)*t)}function de(e,t,n){return this instanceof de?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof de?new de(e.l,e.a,e.b):e instanceof ce?ue(e.h,e.c,e.l):Ce((e=ve(e)).r,e.g,e.b):new de(e,t,n)}function pe(e,t,n){var i=(e+16)/116,r=i+t/500,a=i-n/200;return r=fe(r)*Jo,i=fe(i)*Qo,a=fe(a)*Zo,new ve(me(3.2404542*r-1.5371385*i-.4985314*a),me(-.969266*r+1.8760108*i+.041556*a),me(.0556434*r-.2040259*i+1.0572252*a))}function he(e,t,n){return e>0?new ce(Math.atan2(n,t)*zo,Math.sqrt(t*t+n*n),e):new ce(0/0,0/0,e)}function fe(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ge(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function me(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function ve(e,t,n){return this instanceof ve?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof ve?new ve(e.r,e.g,e.b):xe(""+e,ve,le):new ve(e,t,n)}function ye(e){return new ve(e>>16,e>>8&255,255&e)}function be(e){return ye(e)+""}function we(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function xe(e,t,n){var i,r,a,o=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(e))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(_e(r[0]),_e(r[1]),_e(r[2]))}return(a=ns.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o=o>>4|o,s=240&a,s=s>>4|s,l=15&a,l=l<<4|l):7===e.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),t(o,s,l))}function ke(e,t,n){var i,r,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,l=(o+a)/2;return s?(r=.5>l?s/(o+a):s/(2-o-a),i=e==o?(t-n)/s+(n>t?6:0):t==o?(n-e)/s+2:(e-t)/s+4,i*=60):(i=0/0,r=l>0&&1>l?0:i),new se(i,r,l)}function Ce(e,t,n){e=Se(e),t=Se(t),n=Se(n);var i=ge((.4124564*e+.3575761*t+.1804375*n)/Jo),r=ge((.2126729*e+.7151522*t+.072175*n)/Qo),a=ge((.0193339*e+.119192*t+.9503041*n)/Zo);return de(116*r-16,500*(i-r),200*(r-a))}function Se(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function _e(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Te(e){return"function"==typeof e?e:function(){return e}}function $e(e){return e}function Ae(e){return function(t,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),Ee(t,n,e,i)}}function Ee(e,t,n,i){function r(){var e,t=l.status;if(!t&&Ie(l)||t>=200&&300>t||304===t){try{e=n.call(a,l)}catch(i){return void o.error.call(a,i)}o.load.call(a,e)}else o.error.call(a,l)}var a={},o=to.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,c=null;return!oo.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(e){var t=to.event;to.event=e;try{o.progress.call(a,l)}finally{to.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",a):t},a.responseType=function(e){return arguments.length?(c=e,a):c},a.response=function(e){return n=e,a},["get","post"].forEach(function(e){a[e]=function(){return a.send.apply(a,[e].concat(io(arguments)))}}),a.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),l.setRequestHeader)for(var u in s)l.setRequestHeader(u,s[u]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=r&&a.on("error",r).on("load",function(e){r(null,e)}),o.beforesend.call(a,l),l.send(null==i?null:i),a},a.abort=function(){return l.abort(),a},to.rebind(a,o,"on"),null==i?a:a.get(Pe(i))}function Pe(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Ie(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function De(){var e=Me(),t=Ne()-e;t>24?(isFinite(t)&&(clearTimeout(os),os=setTimeout(De,t)),as=0):(as=1,ls(De))}function Me(){var e=Date.now();for(ss=is;ss;)e>=ss.t&&(ss.f=ss.c(e-ss.t)),ss=ss.n;return e}function Ne(){for(var e,t=is,n=1/0;t;)t.f?t=e?e.n=t.n:is=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return rs=e,n}function je(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Oe(e,t){var n=Math.pow(10,3*mo(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Le(e){var t=e.decimal,n=e.thousands,i=e.grouping,r=e.currency,a=i&&n?function(e,t){for(var r=e.length,a=[],o=0,s=i[0],l=0;r>0&&s>0&&(l+s+1>t&&(s=Math.max(1,t-l)),a.push(e.substring(r-=s,r+s)),!((l+=s+1)>t));)s=i[o=(o+1)%i.length];return a.reverse().join(n)}:$e;return function(e){var n=us.exec(e),i=n[1]||" ",o=n[2]||">",s=n[3]||"-",l=n[4]||"",c=n[5],u=+n[6],d=n[7],p=n[8],h=n[9],f=1,g="",m="",v=!1,y=!0;switch(p&&(p=+p.substring(1)),(c||"0"===i&&"="===o)&&(c=i="0",o="="),h){case"n":d=!0,h="g";break;case"%":f=100,m="%",h="f";break;case"p":f=100,m="%",h="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+h.toLowerCase());case"c":y=!1;case"d":v=!0,p=0;break;case"s":f=-1,h="r"}"$"===l&&(g=r[0],m=r[1]),"r"!=h||p||(h="g"),null!=p&&("g"==h?p=Math.max(1,Math.min(21,p)):("e"==h||"f"==h)&&(p=Math.max(0,Math.min(20,p)))),h=ds.get(h)||Re;var b=c&&d;return function(e){var n=m;if(v&&e%1)return"";var r=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===s?"":s;if(0>f){var l=to.formatPrefix(e,p);e=l.scale(e),n=l.symbol+m}else e*=f;e=h(e,p);var w,x,k=e.lastIndexOf(".");if(0>k){var C=y?e.lastIndexOf("e"):-1;0>C?(w=e,x=""):(w=e.substring(0,C),x=e.substring(C))}else w=e.substring(0,k),x=t+e.substring(k+1);!c&&d&&(w=a(w,1/0));var S=g.length+w.length+x.length+(b?0:r.length),_=u>S?new Array(S=u-S+1).join(i):"";return b&&(w=a(_+w,_.length?u-x.length:1/0)),r+=g,e=w+x,("<"===o?r+e+_:">"===o?_+r+e:"^"===o?_.substring(0,S>>=1)+r+e+_.substring(S):r+(b?e:_+e))+n}}}function Re(e){return e+""}function Fe(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ue(e,t,n){function i(t){var n=e(t),i=a(n,1);return i-t>t-n?n:i}function r(n){return t(n=e(new hs(n-1)),1),n}function a(e,n){return t(e=new hs(+e),n),e}function o(e,i,a){var o=r(e),s=[];if(a>1)for(;i>o;)n(o)%a||s.push(new Date(+o)),t(o,1);else for(;i>o;)s.push(new Date(+o)),t(o,1);return s}function s(e,t,n){try{hs=Fe;var i=new Fe;return i._=e,o(i,t,n)}finally{hs=Date}}e.floor=e,e.round=i,e.ceil=r,e.offset=a,e.range=o;var l=e.utc=ze(e);return l.floor=l,l.round=ze(i),l.ceil=ze(r),l.offset=ze(a),l.range=s,e}function ze(e){return function(t,n){try{hs=Fe;var i=new Fe;return i._=t,e(i,n)._}finally{hs=Date}}}function qe(e){function t(e){function t(t){for(var n,r,a,o=[],s=-1,l=0;++s<i;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(r=gs[n=e.charAt(++s)])&&(n=e.charAt(++s)),(a=A[n])&&(n=a(t,null==r?"e"===n?" ":"0":r)),o.push(n),l=s+1);return o.push(e.slice(l,s)),o.join("")}var i=e.length;return t.parse=function(t){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=n(i,e,t,0);if(r!=t.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var a=null!=i.Z&&hs!==Fe,o=new(a?Fe:hs);return"j"in i?o.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(o.setFullYear(i.y,0,1),o.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(o.getDay()+5)%7:i.w+7*i.U-(o.getDay()+6)%7)):o.setFullYear(i.y,i.m,i.d),o.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),a?o._:o},t.toString=function(){return e},t}function n(e,t,n,i){for(var r,a,o,s=0,l=t.length,c=n.length;l>s;){if(i>=c)return-1;if(r=t.charCodeAt(s++),37===r){if(o=t.charAt(s++),a=E[o in gs?t.charAt(s++):o],!a||(i=a(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function i(e,t,n){k.lastIndex=0;var i=k.exec(t.slice(n));return i?(e.w=C.get(i[0].toLowerCase()),n+i[0].length):-1}function r(e,t,n){w.lastIndex=0;var i=w.exec(t.slice(n));return i?(e.w=x.get(i[0].toLowerCase()),n+i[0].length):-1}function a(e,t,n){T.lastIndex=0;var i=T.exec(t.slice(n));return i?(e.m=$.get(i[0].toLowerCase()),n+i[0].length):-1}function o(e,t,n){S.lastIndex=0;var i=S.exec(t.slice(n));return i?(e.m=_.get(i[0].toLowerCase()),n+i[0].length):-1}function s(e,t,i){return n(e,A.c.toString(),t,i)}function l(e,t,i){return n(e,A.x.toString(),t,i)}function c(e,t,i){return n(e,A.X.toString(),t,i)}function u(e,t,n){var i=b.get(t.slice(n,n+=2).toLowerCase());return null==i?-1:(e.p=i,n)}var d=e.dateTime,p=e.date,h=e.time,f=e.periods,g=e.days,m=e.shortDays,v=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{hs=Fe;var t=new hs;return t._=e,i(t)}finally{hs=Date}}var i=t(e);return n.parse=function(e){try{hs=Fe;var t=i.parse(e);return t&&t._}finally{hs=Date}},n.toString=i.toString,n},t.multi=t.utc.multi=lt;var b=to.map(),w=He(g),x=Ve(g),k=He(m),C=Ve(m),S=He(v),_=Ve(v),T=He(y),$=Ve(y);f.forEach(function(e,t){b.set(e.toLowerCase(),t)});var A={a:function(e){return m[e.getDay()]},A:function(e){return g[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return v[e.getMonth()]},c:t(d),d:function(e,t){return Be(e.getDate(),t,2)},e:function(e,t){return Be(e.getDate(),t,2)},H:function(e,t){return Be(e.getHours(),t,2)},I:function(e,t){return Be(e.getHours()%12||12,t,2)},j:function(e,t){return Be(1+ps.dayOfYear(e),t,3)},L:function(e,t){return Be(e.getMilliseconds(),t,3)},m:function(e,t){return Be(e.getMonth()+1,t,2)},M:function(e,t){return Be(e.getMinutes(),t,2)},p:function(e){return f[+(e.getHours()>=12)]},S:function(e,t){return Be(e.getSeconds(),t,2)},U:function(e,t){return Be(ps.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Be(ps.mondayOfYear(e),t,2)},x:t(p),
X:t(h),y:function(e,t){return Be(e.getFullYear()%100,t,2)},Y:function(e,t){return Be(e.getFullYear()%1e4,t,4)},Z:ot,"%":function(){return"%"}},E={a:i,A:r,b:a,B:o,c:s,d:et,e:et,H:nt,I:nt,j:tt,L:at,m:Ze,M:it,p:u,S:rt,U:Ge,w:We,W:Ke,x:l,X:c,y:Ye,Y:Xe,Z:Je,"%":st};return t}function Be(e,t,n){var i=0>e?"-":"",r=(i?-e:e)+"",a=r.length;return i+(n>a?new Array(n-a+1).join(t)+r:r)}function He(e){return new RegExp("^(?:"+e.map(to.requote).join("|")+")","i")}function Ve(e){for(var t=new s,n=-1,i=e.length;++n<i;)t.set(e[n].toLowerCase(),n);return t}function We(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Ge(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n));return i?(e.U=+i[0],n+i[0].length):-1}function Ke(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n));return i?(e.W=+i[0],n+i[0].length):-1}function Xe(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Ye(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.y=Qe(+i[0]),n+i[0].length):-1}function Je(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Qe(e){return e+(e>68?1900:2e3)}function Ze(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function et(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function tt(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+3));return i?(e.j=+i[0],n+i[0].length):-1}function nt(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function it(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function rt(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function at(e,t,n){ms.lastIndex=0;var i=ms.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function ot(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",i=mo(t)/60|0,r=mo(t)%60;return n+Be(i,"0",2)+Be(r,"0",2)}function st(e,t,n){vs.lastIndex=0;var i=vs.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function lt(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,i=e[n];!i[1](t);)i=e[++n];return i[0](t)}}function ct(){}function ut(e,t,n){var i=n.s=e+t,r=i-e,a=i-r;n.t=e-a+(t-r)}function dt(e,t){e&&xs.hasOwnProperty(e.type)&&xs[e.type](e,t)}function pt(e,t,n){var i,r=-1,a=e.length-n;for(t.lineStart();++r<a;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function ht(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)pt(e[n],t,1);t.polygonEnd()}function ft(){function e(e,t){e*=Uo,t=t*Uo/2+Oo/4;var n=e-i,o=n>=0?1:-1,s=o*n,l=Math.cos(t),c=Math.sin(t),u=a*c,d=r*l+u*Math.cos(s),p=u*o*Math.sin(s);Cs.add(Math.atan2(p,d)),i=e,r=l,a=c}var t,n,i,r,a;Ss.point=function(o,s){Ss.point=e,i=(t=o)*Uo,r=Math.cos(s=(n=s)*Uo/2+Oo/4),a=Math.sin(s)},Ss.lineEnd=function(){e(t,n)}}function gt(e){var t=e[0],n=e[1],i=Math.cos(n);return[i*Math.cos(t),i*Math.sin(t),Math.sin(n)]}function mt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function yt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function bt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function wt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function xt(e){return[Math.atan2(e[1],e[0]),te(e[2])]}function kt(e,t){return mo(e[0]-t[0])<No&&mo(e[1]-t[1])<No}function Ct(e,t){e*=Uo;var n=Math.cos(t*=Uo);St(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function St(e,t,n){++_s,$s+=(e-$s)/_s,As+=(t-As)/_s,Es+=(n-Es)/_s}function _t(){function e(e,r){e*=Uo;var a=Math.cos(r*=Uo),o=a*Math.cos(e),s=a*Math.sin(e),l=Math.sin(r),c=Math.atan2(Math.sqrt((c=n*l-i*s)*c+(c=i*o-t*l)*c+(c=t*s-n*o)*c),t*o+n*s+i*l);Ts+=c,Ps+=c*(t+(t=o)),Is+=c*(n+(n=s)),Ds+=c*(i+(i=l)),St(t,n,i)}var t,n,i;Os.point=function(r,a){r*=Uo;var o=Math.cos(a*=Uo);t=o*Math.cos(r),n=o*Math.sin(r),i=Math.sin(a),Os.point=e,St(t,n,i)}}function Tt(){Os.point=Ct}function $t(){function e(e,t){e*=Uo;var n=Math.cos(t*=Uo),o=n*Math.cos(e),s=n*Math.sin(e),l=Math.sin(t),c=r*l-a*s,u=a*o-i*l,d=i*s-r*o,p=Math.sqrt(c*c+u*u+d*d),h=i*o+r*s+a*l,f=p&&-ee(h)/p,g=Math.atan2(p,h);Ms+=f*c,Ns+=f*u,js+=f*d,Ts+=g,Ps+=g*(i+(i=o)),Is+=g*(r+(r=s)),Ds+=g*(a+(a=l)),St(i,r,a)}var t,n,i,r,a;Os.point=function(o,s){t=o,n=s,Os.point=e,o*=Uo;var l=Math.cos(s*=Uo);i=l*Math.cos(o),r=l*Math.sin(o),a=Math.sin(s),St(i,r,a)},Os.lineEnd=function(){e(t,n),Os.lineEnd=Tt,Os.point=Ct}}function At(e,t){function n(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),n}function Et(){return!0}function Pt(e,t,n,i,r){var a=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],i=e[t];if(kt(n,i)){r.lineStart();for(var s=0;t>s;++s)r.point((n=e[s])[0],n[1]);return void r.lineEnd()}var l=new Dt(n,e,null,!0),c=new Dt(n,null,l,!1);l.o=c,a.push(l),o.push(c),l=new Dt(i,e,null,!1),c=new Dt(i,null,l,!0),l.o=c,a.push(l),o.push(c)}}),o.sort(t),It(a),It(o),a.length){for(var s=0,l=n,c=o.length;c>s;++s)o[s].e=l=!l;for(var u,d,p=a[0];;){for(var h=p,f=!0;h.v;)if((h=h.n)===p)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(var s=0,c=u.length;c>s;++s)r.point((d=u[s])[0],d[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(f){u=h.p.z;for(var s=u.length-1;s>=0;--s)r.point((d=u[s])[0],d[1])}else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,u=h.z,f=!f}while(!h.v);r.lineEnd()}}}function It(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}function Dt(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Mt(e,t,n,i){return function(r,a){function o(t,n){var i=r(t,n);e(t=i[0],n=i[1])&&a.point(t,n)}function s(e,t){var n=r(e,t);m.point(n[0],n[1])}function l(){y.point=s,m.lineStart()}function c(){y.point=o,m.lineEnd()}function u(e,t){g.push([e,t]);var n=r(e,t);w.point(n[0],n[1])}function d(){w.lineStart(),g=[]}function p(){u(g[0][0],g[0][1]),w.lineEnd();var e,t=w.clean(),n=b.buffer(),i=n.length;if(g.pop(),f.push(g),g=null,i)if(1&t){e=n[0];var r,i=e.length-1,o=-1;if(i>0){for(x||(a.polygonStart(),x=!0),a.lineStart();++o<i;)a.point((r=e[o])[0],r[1]);a.lineEnd()}}else i>1&&2&t&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Nt))}var h,f,g,m=t(a),v=r.invert(i[0],i[1]),y={point:o,lineStart:l,lineEnd:c,polygonStart:function(){y.point=u,y.lineStart=d,y.lineEnd=p,h=[],f=[]},polygonEnd:function(){y.point=o,y.lineStart=l,y.lineEnd=c,h=to.merge(h);var e=Ut(v,f);h.length?(x||(a.polygonStart(),x=!0),Pt(h,Ot,e,n,a)):e&&(x||(a.polygonStart(),x=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),x&&(a.polygonEnd(),x=!1),h=f=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},b=jt(),w=t(b),x=!1;return y}}function Nt(e){return e.length>1}function jt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:y,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Ot(e,t){return((e=e.x)[0]<0?e[1]-Fo-No:Fo-e[1])-((t=t.x)[0]<0?t[1]-Fo-No:Fo-t[1])}function Lt(e){var t,n=0/0,i=0/0,r=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s=a>0?Oo:-Oo,l=mo(a-n);mo(l-Oo)<No?(e.point(n,i=(i+o)/2>0?Fo:-Fo),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),e.point(a,i),t=0):r!==s&&l>=Oo&&(mo(n-r)<No&&(n-=r*No),mo(a-s)<No&&(a-=s*No),i=Rt(n,i,a,o),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),t=0),e.point(n=a,i=o),r=s},lineEnd:function(){e.lineEnd(),n=i=0/0},clean:function(){return 2-t}}}function Rt(e,t,n,i){var r,a,o=Math.sin(e-n);return mo(o)>No?Math.atan((Math.sin(t)*(a=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(t))*Math.sin(e))/(r*a*o)):(t+i)/2}function Ft(e,t,n,i){var r;if(null==e)r=n*Fo,i.point(-Oo,r),i.point(0,r),i.point(Oo,r),i.point(Oo,0),i.point(Oo,-r),i.point(0,-r),i.point(-Oo,-r),i.point(-Oo,0),i.point(-Oo,r);else if(mo(e[0]-t[0])>No){var a=e[0]<t[0]?Oo:-Oo;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Ut(e,t){var n=e[0],i=e[1],r=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Cs.reset();for(var s=0,l=t.length;l>s;++s){var c=t[s],u=c.length;if(u)for(var d=c[0],p=d[0],h=d[1]/2+Oo/4,f=Math.sin(h),g=Math.cos(h),m=1;;){m===u&&(m=0),e=c[m];var v=e[0],y=e[1]/2+Oo/4,b=Math.sin(y),w=Math.cos(y),x=v-p,k=x>=0?1:-1,C=k*x,S=C>Oo,_=f*b;if(Cs.add(Math.atan2(_*k*Math.sin(C),g*w+_*Math.cos(C))),a+=S?x+k*Lo:x,S^p>=n^v>=n){var T=vt(gt(d),gt(e));wt(T);var $=vt(r,T);wt($);var A=(S^x>=0?-1:1)*te($[2]);(i>A||i===A&&(T[0]||T[1]))&&(o+=S^x>=0?1:-1)}if(!m++)break;p=v,f=b,g=w,d=e}}return(-No>a||No>a&&0>Cs)^1&o}function zt(e){function t(e,t){return Math.cos(e)*Math.cos(t)>a}function n(e){var n,a,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(d,p){var h,f=[d,p],g=t(d,p),m=o?g?0:r(d,p):g?r(d+(0>d?Oo:-Oo),p):0;if(!n&&(c=l=g)&&e.lineStart(),g!==l&&(h=i(n,f),(kt(n,h)||kt(f,h))&&(f[0]+=No,f[1]+=No,g=t(f[0],f[1]))),g!==l)u=0,g?(e.lineStart(),h=i(f,n),e.point(h[0],h[1])):(h=i(n,f),e.point(h[0],h[1]),e.lineEnd()),n=h;else if(s&&n&&o^g){var v;m&a||!(v=i(f,n,!0))||(u=0,o?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||n&&kt(n,f)||e.point(f[0],f[1]),n=f,l=g,a=m},lineEnd:function(){l&&e.lineEnd(),n=null},clean:function(){return u|(c&&l)<<1}}}function i(e,t,n){var i=gt(e),r=gt(t),o=[1,0,0],s=vt(i,r),l=mt(s,s),c=s[0],u=l-c*c;if(!u)return!n&&e;var d=a*l/u,p=-a*c/u,h=vt(o,s),f=bt(o,d),g=bt(s,p);yt(f,g);var m=h,v=mt(f,m),y=mt(m,m),b=v*v-y*(mt(f,f)-1);if(!(0>b)){var w=Math.sqrt(b),x=bt(m,(-v-w)/y);if(yt(x,f),x=xt(x),!n)return x;var k,C=e[0],S=t[0],_=e[1],T=t[1];C>S&&(k=C,C=S,S=k);var $=S-C,A=mo($-Oo)<No,E=A||No>$;if(!A&&_>T&&(k=_,_=T,T=k),E?A?_+T>0^x[1]<(mo(x[0]-C)<No?_:T):_<=x[1]&&x[1]<=T:$>Oo^(C<=x[0]&&x[0]<=S)){var P=bt(m,(-v+w)/y);return yt(P,f),[x,xt(P)]}}}function r(t,n){var i=o?e:Oo-e,r=0;return-i>t?r|=1:t>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var a=Math.cos(e),o=a>0,s=mo(a)>No,l=gn(e,6*Uo);return Mt(t,n,l,o?[0,-e]:[-Oo,e-Oo])}function qt(e,t,n,i){return function(r){var a,o=r.a,s=r.b,l=o.x,c=o.y,u=s.x,d=s.y,p=0,h=1,f=u-l,g=d-c;if(a=e-l,f||!(a>0)){if(a/=f,0>f){if(p>a)return;h>a&&(h=a)}else if(f>0){if(a>h)return;a>p&&(p=a)}if(a=n-l,f||!(0>a)){if(a/=f,0>f){if(a>h)return;a>p&&(p=a)}else if(f>0){if(p>a)return;h>a&&(h=a)}if(a=t-c,g||!(a>0)){if(a/=g,0>g){if(p>a)return;h>a&&(h=a)}else if(g>0){if(a>h)return;a>p&&(p=a)}if(a=i-c,g||!(0>a)){if(a/=g,0>g){if(a>h)return;a>p&&(p=a)}else if(g>0){if(p>a)return;h>a&&(h=a)}return p>0&&(r.a={x:l+p*f,y:c+p*g}),1>h&&(r.b={x:l+h*f,y:c+h*g}),r}}}}}}function Bt(e,t,n,i){function r(i,r){return mo(i[0]-e)<No?r>0?0:3:mo(i[0]-n)<No?r>0?2:1:mo(i[1]-t)<No?r>0?1:0:r>0?3:2}function a(e,t){return o(e.x,t.x)}function o(e,t){var n=r(e,1),i=r(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function l(e){for(var t=0,n=m.length,i=e[1],r=0;n>r;++r)for(var a,o=1,s=m[r],l=s.length,c=s[0];l>o;++o)a=s[o],c[1]<=i?a[1]>i&&Z(c,a,e)>0&&++t:a[1]<=i&&Z(c,a,e)<0&&--t,c=a;return 0!==t}function c(a,s,l,c){var u=0,d=0;if(null==a||(u=r(a,l))!==(d=r(s,l))||o(a,s)<0^l>0){do c.point(0===u||3===u?e:n,u>1?i:t);while((u=(u+l+4)%4)!==d)}else c.point(s[0],s[1])}function u(r,a){return r>=e&&n>=r&&a>=t&&i>=a}function d(e,t){u(e,t)&&s.point(e,t)}function p(){E.point=f,m&&m.push(v=[]),S=!0,C=!1,x=k=0/0}function h(){g&&(f(y,b),w&&C&&$.rejoin(),g.push($.buffer())),E.point=d,C&&s.lineEnd()}function f(e,t){e=Math.max(-Rs,Math.min(Rs,e)),t=Math.max(-Rs,Math.min(Rs,t));var n=u(e,t);if(m&&v.push([e,t]),S)y=e,b=t,w=n,S=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&C)s.point(e,t);else{var i={a:{x:x,y:k},b:{x:e,y:t}};A(i)?(C||(s.lineStart(),s.point(i.a.x,i.a.y)),s.point(i.b.x,i.b.y),n||s.lineEnd(),_=!1):n&&(s.lineStart(),s.point(e,t),_=!1)}x=e,k=t,C=n}var g,m,v,y,b,w,x,k,C,S,_,T=s,$=jt(),A=qt(e,t,n,i),E={point:d,lineStart:p,lineEnd:h,polygonStart:function(){s=$,g=[],m=[],_=!0},polygonEnd:function(){s=T,g=to.merge(g);var t=l([e,i]),n=_&&t,r=g.length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),c(null,null,1,s),s.lineEnd()),r&&Pt(g,a,t,c,s),s.polygonEnd()),g=m=v=null}};return E}}function Ht(e){var t=0,n=Oo/3,i=sn(e),r=i(t,n);return r.parallels=function(e){return arguments.length?i(t=e[0]*Oo/180,n=e[1]*Oo/180):[t/Oo*180,n/Oo*180]},r}function Vt(e,t){function n(e,t){var n=Math.sqrt(a-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),o-n*Math.cos(e)]}var i=Math.sin(e),r=(i+Math.sin(t))/2,a=1+i*(2*r-i),o=Math.sqrt(a)/r;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/r,te((a-(e*e+n*n)*r*r)/(2*r))]},n}function Wt(){function e(e,t){Us+=r*e-i*t,i=e,r=t}var t,n,i,r;Vs.point=function(a,o){Vs.point=e,t=i=a,n=r=o},Vs.lineEnd=function(){e(t,n)}}function Gt(e,t){zs>e&&(zs=e),e>Bs&&(Bs=e),qs>t&&(qs=t),t>Hs&&(Hs=t)}function Kt(){function e(e,t){o.push("M",e,",",t,a)}function t(e,t){o.push("M",e,",",t),s.point=n}function n(e,t){o.push("L",e,",",t)}function i(){s.point=e}function r(){o.push("Z")}var a=Xt(4.5),o=[],s={point:e,lineStart:function(){s.point=t},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(e){return a=Xt(e),s},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return s}function Xt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Yt(e,t){$s+=e,As+=t,++Es}function Jt(){function e(e,i){var r=e-t,a=i-n,o=Math.sqrt(r*r+a*a);Ps+=o*(t+e)/2,Is+=o*(n+i)/2,Ds+=o,Yt(t=e,n=i)}var t,n;Gs.point=function(i,r){Gs.point=e,Yt(t=i,n=r)}}function Qt(){Gs.point=Yt}function Zt(){function e(e,t){var n=e-i,a=t-r,o=Math.sqrt(n*n+a*a);Ps+=o*(i+e)/2,Is+=o*(r+t)/2,Ds+=o,o=r*e-i*t,Ms+=o*(i+e),Ns+=o*(r+t),js+=3*o,Yt(i=e,r=t)}var t,n,i,r;Gs.point=function(a,o){Gs.point=e,Yt(t=i=a,n=r=o)},Gs.lineEnd=function(){e(t,n)}}function en(e){function t(t,n){e.moveTo(t+o,n),e.arc(t,n,o,0,Lo)}function n(t,n){e.moveTo(t,n),s.point=i}function i(t,n){e.lineTo(t,n)}function r(){s.point=t}function a(){e.closePath()}var o=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(e){return o=e,s},result:y};return s}function tn(e){function t(e){return(s?i:n)(e)}function n(t){return an(t,function(n,i){n=e(n,i),t.point(n[0],n[1])})}function i(t){function n(n,i){n=e(n,i),t.point(n[0],n[1])}function i(){b=0/0,S.point=a,t.lineStart()}function a(n,i){var a=gt([n,i]),o=e(n,i);r(b,w,y,x,k,C,b=o[0],w=o[1],y=n,x=a[0],k=a[1],C=a[2],s,t),t.point(b,w)}function o(){S.point=n,t.lineEnd()}function l(){i(),S.point=c,S.lineEnd=u}function c(e,t){a(d=e,p=t),h=b,f=w,g=x,m=k,v=C,S.point=a}function u(){r(b,w,y,x,k,C,h,f,d,g,m,v,s,t),S.lineEnd=o,o()}var d,p,h,f,g,m,v,y,b,w,x,k,C,S={point:n,lineStart:i,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=l},polygonEnd:function(){t.polygonEnd(),S.lineStart=i}};return S}function r(t,n,i,s,l,c,u,d,p,h,f,g,m,v){var y=u-t,b=d-n,w=y*y+b*b;if(w>4*a&&m--){var x=s+h,k=l+f,C=c+g,S=Math.sqrt(x*x+k*k+C*C),_=Math.asin(C/=S),T=mo(mo(C)-1)<No||mo(i-p)<No?(i+p)/2:Math.atan2(k,x),$=e(T,_),A=$[0],E=$[1],P=A-t,I=E-n,D=b*P-y*I;(D*D/w>a||mo((y*P+b*I)/w-.5)>.3||o>s*h+l*f+c*g)&&(r(t,n,i,s,l,c,A,E,T,x/=S,k/=S,C,m,v),v.point(A,E),r(A,E,T,x,k,C,u,d,p,h,f,g,m,v))}}var a=.5,o=Math.cos(30*Uo),s=16;return t.precision=function(e){return arguments.length?(s=(a=e*e)>0&&16,t):Math.sqrt(a)},t}function nn(e){var t=tn(function(t,n){return e([t*zo,n*zo])});return function(e){return ln(t(e))}}function rn(e){this.stream=e}function an(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function on(e){return sn(function(){return e})()}function sn(e){function t(e){return e=s(e[0]*Uo,e[1]*Uo),[e[0]*p+l,c-e[1]*p]}function n(e){return e=s.invert((e[0]-l)/p,(c-e[1])/p),e&&[e[0]*zo,e[1]*zo]}function i(){s=At(o=dn(v,y,b),a);var e=a(g,m);return l=h-e[0]*p,c=f+e[1]*p,r()}function r(){return u&&(u.valid=!1,u=null),t}var a,o,s,l,c,u,d=tn(function(e,t){return e=a(e,t),[e[0]*p+l,c-e[1]*p]}),p=150,h=480,f=250,g=0,m=0,v=0,y=0,b=0,w=Ls,x=$e,k=null,C=null;return t.stream=function(e){return u&&(u.valid=!1),u=ln(w(o,d(x(e)))),u.valid=!0,u},t.clipAngle=function(e){return arguments.length?(w=null==e?(k=e,Ls):zt((k=+e)*Uo),r()):k},t.clipExtent=function(e){return arguments.length?(C=e,x=e?Bt(e[0][0],e[0][1],e[1][0],e[1][1]):$e,r()):C},t.scale=function(e){return arguments.length?(p=+e,i()):p},t.translate=function(e){return arguments.length?(h=+e[0],f=+e[1],i()):[h,f]},t.center=function(e){return arguments.length?(g=e[0]%360*Uo,m=e[1]%360*Uo,i()):[g*zo,m*zo]},t.rotate=function(e){return arguments.length?(v=e[0]%360*Uo,y=e[1]%360*Uo,b=e.length>2?e[2]%360*Uo:0,i()):[v*zo,y*zo,b*zo]},to.rebind(t,d,"precision"),function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,i()}}function ln(e){return an(e,function(t,n){e.point(t*Uo,n*Uo)})}function cn(e,t){return[e,t]}function un(e,t){return[e>Oo?e-Lo:-Oo>e?e+Lo:e,t]}function dn(e,t,n){return e?t||n?At(hn(e),fn(t,n)):hn(e):t||n?fn(t,n):un}function pn(e){return function(t,n){return t+=e,[t>Oo?t-Lo:-Oo>t?t+Lo:t,n]}}function hn(e){var t=pn(e);return t.invert=pn(-e),t}function fn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,c=Math.sin(t),u=c*i+s*r;return[Math.atan2(l*a-u*o,s*i-c*r),te(u*a+l*o)]}var i=Math.cos(e),r=Math.sin(e),a=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,c=Math.sin(t),u=c*a-l*o;return[Math.atan2(l*a+c*o,s*i+u*r),te(u*i-s*r)]},n}function gn(e,t){var n=Math.cos(e),i=Math.sin(e);return function(r,a,o,s){var l=o*t;null!=r?(r=mn(n,r),a=mn(n,a),(o>0?a>r:r>a)&&(r+=o*Lo)):(r=e+o*Lo,a=e-.5*l);for(var c,u=r;o>0?u>a:a>u;u-=l)s.point((c=xt([n,-i*Math.cos(u),-i*Math.sin(u)]))[0],c[1])}}function mn(e,t){var n=gt(t);n[0]-=e,wt(n);var i=ee(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-No)%(2*Math.PI)}function vn(e,t,n){var i=to.range(e,t-No,n).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function yn(e,t,n){var i=to.range(e,t-No,n).concat(t);return function(e){return i.map(function(t){return[t,e]})}}function bn(e){return e.source}function wn(e){return e.target}function xn(e,t,n,i){var r=Math.cos(t),a=Math.sin(t),o=Math.cos(i),s=Math.sin(i),l=r*Math.cos(e),c=r*Math.sin(e),u=o*Math.cos(n),d=o*Math.sin(n),p=2*Math.asin(Math.sqrt(ae(i-t)+r*o*ae(n-e))),h=1/Math.sin(p),f=p?function(e){var t=Math.sin(e*=p)*h,n=Math.sin(p-e)*h,i=n*l+t*u,r=n*c+t*d,o=n*a+t*s;return[Math.atan2(r,i)*zo,Math.atan2(o,Math.sqrt(i*i+r*r))*zo]}:function(){return[e*zo,t*zo]};return f.distance=p,f}function kn(){function e(e,r){var a=Math.sin(r*=Uo),o=Math.cos(r),s=mo((e*=Uo)-t),l=Math.cos(s);Ks+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=i*a-n*o*l)*s),n*a+i*o*l),t=e,n=a,i=o}var t,n,i;Xs.point=function(r,a){t=r*Uo,n=Math.sin(a*=Uo),i=Math.cos(a),Xs.point=e},Xs.lineEnd=function(){Xs.point=Xs.lineEnd=y}}function Cn(e,t){function n(t,n){var i=Math.cos(t),r=Math.cos(n),a=e(i*r);return[a*r*Math.sin(t),a*Math.sin(n)]}return n.invert=function(e,n){var i=Math.sqrt(e*e+n*n),r=t(i),a=Math.sin(r),o=Math.cos(r);return[Math.atan2(e*a,i*o),Math.asin(i&&n*a/i)]},n}function Sn(e,t){function n(e,t){o>0?-Fo+No>t&&(t=-Fo+No):t>Fo-No&&(t=Fo-No);var n=o/Math.pow(r(t),a);return[n*Math.sin(a*e),o-n*Math.cos(a*e)]}var i=Math.cos(e),r=function(e){return Math.tan(Oo/4+e/2)},a=e===t?Math.sin(e):Math.log(i/Math.cos(t))/Math.log(r(t)/r(e)),o=i*Math.pow(r(e),a)/a;return a?(n.invert=function(e,t){var n=o-t,i=Q(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(o/i,1/a))-Fo]},n):Tn}function _n(e,t){function n(e,t){var n=a-t;return[n*Math.sin(r*e),a-n*Math.cos(r*e)]}var i=Math.cos(e),r=e===t?Math.sin(e):(i-Math.cos(t))/(t-e),a=i/r+e;return mo(r)<No?cn:(n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,a-Q(r)*Math.sqrt(e*e+n*n)]},n)}function Tn(e,t){return[e,Math.log(Math.tan(Oo/4+t/2))]}function $n(e){var t,n=on(e),i=n.scale,r=n.translate,a=n.clipExtent;return n.scale=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=a.apply(n,arguments);if(o===n){if(t=null==e){var s=Oo*i(),l=r();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}function An(e,t){return[Math.log(Math.tan(Oo/4+t/2)),-e]}function En(e){return e[0]}function Pn(e){return e[1]}function In(e){for(var t=e.length,n=[0,1],i=2,r=2;t>r;r++){for(;i>1&&Z(e[n[i-2]],e[n[i-1]],e[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Dn(e,t){return e[0]-t[0]||e[1]-t[1]}function Mn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Nn(e,t,n,i){var r=e[0],a=n[0],o=t[0]-r,s=i[0]-a,l=e[1],c=n[1],u=t[1]-l,d=i[1]-c,p=(s*(l-c)-d*(r-a))/(d*o-s*u);return[r+p*o,l+p*u]}function jn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function On(){ii(this),this.edge=this.site=this.circle=null}function Ln(e){var t=sl.pop()||new On;return t.site=e,t}function Rn(e){Kn(e),rl.remove(e),sl.push(e),ii(e)}function Fn(e){var t=e.circle,n=t.x,i=t.cy,r={x:n,y:i},a=e.P,o=e.N,s=[e];Rn(e);for(var l=a;l.circle&&mo(n-l.circle.x)<No&&mo(i-l.circle.cy)<No;)a=l.P,s.unshift(l),Rn(l),l=a;s.unshift(l),Kn(l);for(var c=o;c.circle&&mo(n-c.circle.x)<No&&mo(i-c.circle.cy)<No;)o=c.N,s.push(c),Rn(c),c=o;s.push(c),Kn(c);var u,d=s.length;for(u=1;d>u;++u)c=s[u],l=s[u-1],ei(c.edge,l.site,c.site,r);l=s[0],c=s[d-1],c.edge=Qn(l.site,c.site,null,r),Gn(l),Gn(c)}function Un(e){for(var t,n,i,r,a=e.x,o=e.y,s=rl._;s;)if(i=zn(s,o)-a,i>No)s=s.L;else{if(r=a-qn(s,o),!(r>No)){i>-No?(t=s.P,n=s):r>-No?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=Ln(e);if(rl.insert(t,l),t||n){if(t===n)return Kn(t),n=Ln(t.site),rl.insert(l,n),l.edge=n.edge=Qn(t.site,l.site),Gn(t),void Gn(n);if(!n)return void(l.edge=Qn(t.site,l.site));Kn(t),Kn(n);var c=t.site,u=c.x,d=c.y,p=e.x-u,h=e.y-d,f=n.site,g=f.x-u,m=f.y-d,v=2*(p*m-h*g),y=p*p+h*h,b=g*g+m*m,w={x:(m*y-h*b)/v+u,y:(p*b-g*y)/v+d};ei(n.edge,c,f,w),l.edge=Qn(c,e,null,w),n.edge=Qn(e,f,null,w),Gn(t),Gn(n)}}function zn(e,t){var n=e.site,i=n.x,r=n.y,a=r-t;if(!a)return i;var o=e.P;if(!o)return-(1/0);n=o.site;var s=n.x,l=n.y,c=l-t;if(!c)return s;var u=s-i,d=1/a-1/c,p=u/c;return d?(-p+Math.sqrt(p*p-2*d*(u*u/(-2*c)-l+c/2+r-a/2)))/d+i:(i+s)/2}function qn(e,t){var n=e.N;if(n)return zn(n,t);var i=e.site;return i.y===t?i.x:1/0}function Bn(e){this.site=e,this.edges=[]}function Hn(e){for(var t,n,i,r,a,o,s,l,c,u,d=e[0][0],p=e[1][0],h=e[0][1],f=e[1][1],g=il,m=g.length;m--;)if(a=g[m],a&&a.prepare())for(s=a.edges,l=s.length,o=0;l>o;)u=s[o].end(),i=u.x,r=u.y,c=s[++o%l].start(),t=c.x,n=c.y,(mo(i-t)>No||mo(r-n)>No)&&(s.splice(o,0,new ti(Zn(a.site,u,mo(i-d)<No&&f-r>No?{x:d,y:mo(t-d)<No?n:f}:mo(r-f)<No&&p-i>No?{x:mo(n-f)<No?t:p,y:f}:mo(i-p)<No&&r-h>No?{x:p,y:mo(t-p)<No?n:h}:mo(r-h)<No&&i-d>No?{x:mo(n-h)<No?t:d,y:h}:null),a.site,null)),++l)}function Vn(e,t){return t.angle-e.angle}function Wn(){ii(this),this.x=this.y=this.arc=this.site=this.cy=null}function Gn(e){var t=e.P,n=e.N;if(t&&n){var i=t.site,r=e.site,a=n.site;if(i!==a){var o=r.x,s=r.y,l=i.x-o,c=i.y-s,u=a.x-o,d=a.y-s,p=2*(l*d-c*u);if(!(p>=-jo)){var h=l*l+c*c,f=u*u+d*d,g=(d*h-c*f)/p,m=(l*f-u*h)/p,d=m+s,v=ll.pop()||new Wn;v.arc=e,v.site=r,v.x=g+o,v.y=d+Math.sqrt(g*g+m*m),v.cy=d,e.circle=v;for(var y=null,b=ol._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}ol.insert(y,v),y||(al=v)}}}}function Kn(e){var t=e.circle;t&&(t.P||(al=t.N),ol.remove(t),ll.push(t),ii(t),e.circle=null)}function Xn(e){for(var t,n=nl,i=qt(e[0][0],e[0][1],e[1][0],e[1][1]),r=n.length;r--;)t=n[r],(!Yn(t,e)||!i(t)||mo(t.a.x-t.b.x)<No&&mo(t.a.y-t.b.y)<No)&&(t.a=t.b=null,n.splice(r,1))}function Yn(e,t){var n=e.b;if(n)return!0;var i,r,a=e.a,o=t[0][0],s=t[1][0],l=t[0][1],c=t[1][1],u=e.l,d=e.r,p=u.x,h=u.y,f=d.x,g=d.y,m=(p+f)/2,v=(h+g)/2;if(g===h){if(o>m||m>=s)return;if(p>f){if(a){if(a.y>=c)return}else a={x:m,y:l};n={x:m,y:c}}else{if(a){if(a.y<l)return}else a={x:m,y:c};n={x:m,y:l}}}else if(i=(p-f)/(g-h),r=v-i*m,-1>i||i>1)if(p>f){if(a){if(a.y>=c)return}else a={x:(l-r)/i,y:l};n={x:(c-r)/i,y:c}}else{if(a){if(a.y<l)return}else a={x:(c-r)/i,y:c};n={x:(l-r)/i,y:l}}else if(g>h){if(a){if(a.x>=s)return}else a={x:o,y:i*o+r};n={x:s,y:i*s+r}}else{if(a){if(a.x<o)return}else a={x:s,y:i*s+r};n={x:o,y:i*o+r}}return e.a=a,e.b=n,!0}function Jn(e,t){this.l=e,this.r=t,this.a=this.b=null}function Qn(e,t,n,i){var r=new Jn(e,t);return nl.push(r),n&&ei(r,e,t,n),i&&ei(r,t,e,i),il[e.i].edges.push(new ti(r,e,t)),il[t.i].edges.push(new ti(r,t,e)),r}function Zn(e,t,n){var i=new Jn(e,null);return i.a=t,i.b=n,nl.push(i),i}function ei(e,t,n,i){e.a||e.b?e.l===n?e.b=i:e.a=i:(e.a=i,e.l=t,e.r=n)}function ti(e,t,n){var i=e.a,r=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function ni(){this._=null}function ii(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ri(e,t){var n=t,i=t.R,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function ai(e,t){var n=t,i=t.L,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function oi(e){for(;e.L;)e=e.L;return e}function si(e,t){var n,i,r,a=e.sort(li).pop();for(nl=[],il=new Array(e.length),rl=new ni,ol=new ni;;)if(r=al,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x))(a.x!==n||a.y!==i)&&(il[a.i]=new Bn(a),Un(a),n=a.x,i=a.y),a=e.pop();else{if(!r)break;Fn(r.arc)}t&&(Xn(t),Hn(t));var o={cells:il,edges:nl};return rl=ol=nl=il=null,o}function li(e,t){return t.y-e.y||t.x-e.x}function ci(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function ui(e){return e.x}function di(e){return e.y}function pi(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hi(e,t,n,i,r,a){if(!e(t,n,i,r,a)){var o=.5*(n+r),s=.5*(i+a),l=t.nodes;l[0]&&hi(e,l[0],n,i,o,s),l[1]&&hi(e,l[1],o,i,r,s),l[2]&&hi(e,l[2],n,s,o,a),l[3]&&hi(e,l[3],o,s,r,a)}}function fi(e,t,n,i,r,a,o){var s,l=1/0;return function c(e,u,d,p,h){if(!(u>a||d>o||i>p||r>h)){if(f=e.point){var f,g=t-f[0],m=n-f[1],v=g*g+m*m;if(l>v){var y=Math.sqrt(l=v);i=t-y,r=n-y,a=t+y,o=n+y,s=f}}for(var b=e.nodes,w=.5*(u+p),x=.5*(d+h),k=t>=w,C=n>=x,S=C<<1|k,_=S+4;_>S;++S)if(e=b[3&S])switch(3&S){case 0:c(e,u,d,w,x);break;case 1:c(e,w,d,p,x);break;case 2:c(e,u,x,w,h);break;case 3:c(e,w,x,p,h)}}}(e,i,r,a,o),s}function gi(e,t){e=to.rgb(e),t=to.rgb(t);var n=e.r,i=e.g,r=e.b,a=t.r-n,o=t.g-i,s=t.b-r;return function(e){return"#"+we(Math.round(n+a*e))+we(Math.round(i+o*e))+we(Math.round(r+s*e))}}function mi(e,t){var n,i={},r={};for(n in e)n in t?i[n]=bi(e[n],t[n]):r[n]=e[n];for(n in t)n in e||(r[n]=t[n]);return function(e){for(n in i)r[n]=i[n](e);return r}}function vi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function yi(e,t){var n,i,r,a=ul.lastIndex=dl.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=ul.exec(e))&&(i=dl.exec(t));)(r=i.index)>a&&(r=t.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:vi(n,i)})),a=dl.lastIndex;return a<t.length&&(r=t.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,i=0;t>i;++i)s[(n=l[i]).i]=n.x(e);return s.join("")})}function bi(e,t){for(var n,i=to.interpolators.length;--i>=0&&!(n=to.interpolators[i](e,t)););return n}function wi(e,t){var n,i=[],r=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)i.push(bi(e[n],t[n]));for(;a>n;++n)r[n]=e[n];for(;o>n;++n)r[n]=t[n];return function(e){for(n=0;s>n;++n)r[n]=i[n](e);return r}}function xi(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function ki(e){return function(t){return 1-e(1-t)}}function Ci(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Si(e){return e*e}function _i(e){return e*e*e}function Ti(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function $i(e){return function(t){return Math.pow(t,e)}}function Ai(e){return 1-Math.cos(e*Fo)}function Ei(e){return Math.pow(2,10*(e-1))}function Pi(e){return 1-Math.sqrt(1-e*e)}function Ii(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Lo*Math.asin(1/e):(e=1,n=t/4),function(i){return 1+e*Math.pow(2,-10*i)*Math.sin((i-n)*Lo/t)}}function Di(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Mi(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Ni(e,t){e=to.hcl(e),t=to.hcl(t);var n=e.h,i=e.c,r=e.l,a=t.h-n,o=t.c-i,s=t.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?t.c:i),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return ue(n+a*e,i+o*e,r+s*e)+""}}function ji(e,t){e=to.hsl(e),t=to.hsl(t);var n=e.h,i=e.s,r=e.l,a=t.h-n,o=t.s-i,s=t.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?t.s:i),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return le(n+a*e,i+o*e,r+s*e)+""}}function Oi(e,t){e=to.lab(e),t=to.lab(t);var n=e.l,i=e.a,r=e.b,a=t.l-n,o=t.a-i,s=t.b-r;return function(e){return pe(n+a*e,i+o*e,r+s*e)+""}}function Li(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Ri(e){var t=[e.a,e.b],n=[e.c,e.d],i=Ui(t),r=Fi(t,n),a=Ui(zi(n,t,-r))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*zo,this.translate=[e.e,e.f],this.scale=[i,a],this.skew=a?Math.atan2(r,a)*zo:0}function Fi(e,t){return e[0]*t[0]+e[1]*t[1]}function Ui(e){var t=Math.sqrt(Fi(e,e));return t&&(e[0]/=t,e[1]/=t),t}function zi(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function qi(e,t){var n,i=[],r=[],a=to.transform(e),o=to.transform(t),s=a.translate,l=o.translate,c=a.rotate,u=o.rotate,d=a.skew,p=o.skew,h=a.scale,f=o.scale;return s[0]!=l[0]||s[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:vi(s[0],l[0])},{i:3,x:vi(s[1],l[1])})):i.push(l[0]||l[1]?"translate("+l+")":""),c!=u?(c-u>180?u+=360:u-c>180&&(c+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:vi(c,u)})):u&&i.push(i.pop()+"rotate("+u+")"),d!=p?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:vi(d,p)}):p&&i.push(i.pop()+"skewX("+p+")"),h[0]!=f[0]||h[1]!=f[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:vi(h[0],f[0])},{i:n-2,x:vi(h[1],f[1])})):(1!=f[0]||1!=f[1])&&i.push(i.pop()+"scale("+f+")"),n=r.length,function(e){for(var t,a=-1;++a<n;)i[(t=r[a]).i]=t.x(e);return i.join("")}}function Bi(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Hi(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Vi(e){for(var t=e.source,n=e.target,i=Gi(t,n),r=[t];t!==i;)t=t.parent,r.push(t);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function Wi(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Gi(e,t){if(e===t)return e;for(var n=Wi(e),i=Wi(t),r=n.pop(),a=i.pop(),o=null;r===a;)o=r,r=n.pop(),a=i.pop();return o}function Ki(e){e.fixed|=2}function Xi(e){e.fixed&=-7}function Yi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Ji(e){e.fixed&=-5}function Qi(e,t,n){var i=0,r=0;if(e.charge=0,!e.leaf)for(var a,o=e.nodes,s=o.length,l=-1;++l<s;)a=o[l],null!=a&&(Qi(a,t,n),e.charge+=a.charge,i+=a.charge*a.cx,r+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=t*n[e.point.index];e.charge+=e.pointCharge=c,i+=c*e.point.x,r+=c*e.point.y}e.cx=i/e.charge,e.cy=r/e.charge}function Zi(e,t){return to.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=ar,e}function er(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(r=e.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function tr(e,t){for(var n=[e],i=[];null!=(e=n.pop());)if(i.push(e),(a=e.children)&&(r=a.length))for(var r,a,o=-1;++o<r;)n.push(a[o]);for(;null!=(e=i.pop());)t(e)}function nr(e){return e.children}function ir(e){
return e.value}function rr(e,t){return t.value-e.value}function ar(e){return to.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function or(e){return e.x}function sr(e){return e.y}function lr(e,t,n){e.y0=t,e.y=n}function cr(e){return to.range(e.length)}function ur(e){for(var t=-1,n=e[0].length,i=[];++t<n;)i[t]=0;return i}function dr(e){for(var t,n=1,i=0,r=e[0][1],a=e.length;a>n;++n)(t=e[n][1])>r&&(i=n,r=t);return i}function pr(e){return e.reduce(hr,0)}function hr(e,t){return e+t[1]}function fr(e,t){return gr(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function gr(e,t){for(var n=-1,i=+e[0],r=(e[1]-i)/t,a=[];++n<=t;)a[n]=r*n+i;return a}function mr(e){return[to.min(e),to.max(e)]}function vr(e,t){return e.value-t.value}function yr(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function br(e,t){e._pack_next=t,t._pack_prev=e}function wr(e,t){var n=t.x-e.x,i=t.y-e.y,r=e.r+t.r;return.999*r*r>n*n+i*i}function xr(e){function t(e){u=Math.min(e.x-e.r,u),d=Math.max(e.x+e.r,d),p=Math.min(e.y-e.r,p),h=Math.max(e.y+e.r,h)}if((n=e.children)&&(c=n.length)){var n,i,r,a,o,s,l,c,u=1/0,d=-(1/0),p=1/0,h=-(1/0);if(n.forEach(kr),i=n[0],i.x=-i.r,i.y=0,t(i),c>1&&(r=n[1],r.x=r.r,r.y=0,t(r),c>2))for(a=n[2],_r(i,r,a),t(a),yr(i,a),i._pack_prev=a,yr(a,r),r=i._pack_next,o=3;c>o;o++){_r(i,r,a=n[o]);var f=0,g=1,m=1;for(s=r._pack_next;s!==r;s=s._pack_next,g++)if(wr(s,a)){f=1;break}if(1==f)for(l=i._pack_prev;l!==s._pack_prev&&!wr(l,a);l=l._pack_prev,m++);f?(m>g||g==m&&r.r<i.r?br(i,r=s):br(i=l,r),o--):(yr(i,a),r=a,t(a))}var v=(u+d)/2,y=(p+h)/2,b=0;for(o=0;c>o;o++)a=n[o],a.x-=v,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=b,n.forEach(Cr)}}function kr(e){e._pack_next=e._pack_prev=e}function Cr(e){delete e._pack_next,delete e._pack_prev}function Sr(e,t,n,i){var r=e.children;if(e.x=t+=i*e.x,e.y=n+=i*e.y,e.r*=i,r)for(var a=-1,o=r.length;++a<o;)Sr(r[a],t,n,i)}function _r(e,t,n){var i=e.r+n.r,r=t.x-e.x,a=t.y-e.y;if(i&&(r||a)){var o=t.r+n.r,s=r*r+a*a;o*=o,i*=i;var l=.5+(i-o)/(2*s),c=Math.sqrt(Math.max(0,2*o*(i+s)-(i-=s)*i-o*o))/(2*s);n.x=e.x+l*r+c*a,n.y=e.y+l*a-c*r}else n.x=e.x+i,n.y=e.y}function Tr(e,t){return e.parent==t.parent?1:2}function $r(e){var t=e.children;return t.length?t[0]:e.t}function Ar(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Er(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Pr(e){for(var t,n=0,i=0,r=e.children,a=r.length;--a>=0;)t=r[a],t.z+=n,t.m+=n,n+=t.s+(i+=t.c)}function Ir(e,t,n){return e.a.parent===t.parent?e.a:n}function Dr(e){return 1+to.max(e,function(e){return e.y})}function Mr(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Nr(e){var t=e.children;return t&&t.length?Nr(t[0]):e}function jr(e){var t,n=e.children;return n&&(t=n.length)?jr(n[t-1]):e}function Or(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Lr(e,t){var n=e.x+t[3],i=e.y+t[0],r=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return 0>r&&(n+=r/2,r=0),0>a&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function Rr(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Fr(e){return e.rangeExtent?e.rangeExtent():Rr(e.range())}function Ur(e,t,n,i){var r=n(e[0],e[1]),a=i(t[0],t[1]);return function(e){return a(r(e))}}function zr(e,t){var n,i=0,r=e.length-1,a=e[i],o=e[r];return a>o&&(n=i,i=r,r=n,n=a,a=o,o=n),e[i]=t.floor(a),e[r]=t.ceil(o),e}function qr(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:kl}function Br(e,t,n,i){var r=[],a=[],o=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=s;)r.push(n(e[o-1],e[o])),a.push(i(t[o-1],t[o]));return function(t){var n=to.bisect(e,t,1,s)-1;return a[n](r[n](t))}}function Hr(e,t,n,i){function r(){var r=Math.min(e.length,t.length)>2?Br:Ur,l=i?Hi:Bi;return o=r(e,t,l,n),s=r(t,e,l,bi),a}function a(e){return o(e)}var o,s;return a.invert=function(e){return s(e)},a.domain=function(t){return arguments.length?(e=t.map(Number),r()):e},a.range=function(e){return arguments.length?(t=e,r()):t},a.rangeRound=function(e){return a.range(e).interpolate(Li)},a.clamp=function(e){return arguments.length?(i=e,r()):i},a.interpolate=function(e){return arguments.length?(n=e,r()):n},a.ticks=function(t){return Kr(e,t)},a.tickFormat=function(t,n){return Xr(e,t,n)},a.nice=function(t){return Wr(e,t),r()},a.copy=function(){return Hr(e,t,n,i)},r()}function Vr(e,t){return to.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Wr(e,t){return zr(e,qr(Gr(e,t)[2]))}function Gr(e,t){null==t&&(t=10);var n=Rr(e),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),a=t/i*r;return.15>=a?r*=10:.35>=a?r*=5:.75>=a&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Kr(e,t){return to.range.apply(to,Gr(e,t))}function Xr(e,t,n){var i=Gr(e,t);if(n){var r=us.exec(n);if(r.shift(),"s"===r[8]){var a=to.formatPrefix(Math.max(mo(i[0]),mo(i[1])));return r[7]||(r[7]="."+Yr(a.scale(i[2]))),r[8]="f",n=to.format(r.join("")),function(e){return n(a.scale(e))+a.symbol}}r[7]||(r[7]="."+Jr(r[8],i)),n=r.join("")}else n=",."+Yr(i[2])+"f";return to.format(n)}function Yr(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Jr(e,t){var n=Yr(t[2]);return e in Cl?Math.abs(n-Yr(Math.max(mo(t[0]),mo(t[1]))))+ +("e"!==e):n-2*("%"===e)}function Qr(e,t,n,i){function r(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(r(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((i=t.map(Number)).map(r)),o):i},o.base=function(n){return arguments.length?(t=+n,e.domain(i.map(r)),o):t},o.nice=function(){var t=zr(i.map(r),n?Math:_l);return e.domain(t),i=t.map(a),o},o.ticks=function(){var e=Rr(i),o=[],s=e[0],l=e[1],c=Math.floor(r(s)),u=Math.ceil(r(l)),d=t%1?2:t;if(isFinite(u-c)){if(n){for(;u>c;c++)for(var p=1;d>p;p++)o.push(a(c)*p);o.push(a(c))}else for(o.push(a(c));c++<u;)for(var p=d-1;p>0;p--)o.push(a(c)*p);for(c=0;o[c]<s;c++);for(u=o.length;o[u-1]>l;u--);o=o.slice(c,u)}return o},o.tickFormat=function(e,t){if(!arguments.length)return Sl;arguments.length<2?t=Sl:"function"!=typeof t&&(t=to.format(t));var i,s=Math.max(.1,e/o.ticks().length),l=n?(i=1e-12,Math.ceil):(i=-1e-12,Math.floor);return function(e){return e/a(l(r(e)+i))<=s?t(e):""}},o.copy=function(){return Qr(e.copy(),t,n,i)},Vr(o,e)}function Zr(e,t,n){function i(t){return e(r(t))}var r=ea(t),a=ea(1/t);return i.invert=function(t){return a(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),i):n},i.ticks=function(e){return Kr(n,e)},i.tickFormat=function(e,t){return Xr(n,e,t)},i.nice=function(e){return i.domain(Wr(n,e))},i.exponent=function(o){return arguments.length?(r=ea(t=o),a=ea(1/t),e.domain(n.map(r)),i):t},i.copy=function(){return Zr(e.copy(),t,n)},Vr(i,e)}function ea(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function ta(e,t){function n(n){return a[((r.get(n)||("range"===t.t?r.set(n,e.push(n)):0/0))-1)%a.length]}function i(t,n){return to.range(e.length).map(function(e){return t+n*e})}var r,a,o;return n.domain=function(i){if(!arguments.length)return e;e=[],r=new s;for(var a,o=-1,l=i.length;++o<l;)r.has(a=i[o])||r.set(a,e.push(a));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(a=e,o=0,t={t:"range",a:arguments},n):a},n.rangePoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],c=r[1],u=e.length<2?(l=(l+c)/2,0):(c-l)/(e.length-1+s);return a=i(l+u*s/2,u),o=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],c=r[1],u=e.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(e.length-1+s)|0;return a=i(l+Math.round(u*s/2+(c-l-(e.length-1+s)*u)/2),u),o=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var c=r[1]<r[0],u=r[c-0],d=r[1-c],p=(d-u)/(e.length-s+2*l);return a=i(u+p*l,p),c&&a.reverse(),o=p*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var c=r[1]<r[0],u=r[c-0],d=r[1-c],p=Math.floor((d-u)/(e.length-s+2*l));return a=i(u+Math.round((d-u-(e.length-s)*p)/2),p),c&&a.reverse(),o=Math.round(p*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Rr(t.a[0])},n.copy=function(){return ta(e,t)},n.domain(e)}function na(i,r){function a(){var e=0,t=r.length;for(s=[];++e<t;)s[e-1]=to.quantile(i,e/t);return o}function o(e){return isNaN(e=+e)?void 0:r[to.bisect(s,e)]}var s;return o.domain=function(r){return arguments.length?(i=r.map(t).filter(n).sort(e),a()):i},o.range=function(e){return arguments.length?(r=e,a()):r},o.quantiles=function(){return s},o.invertExtent=function(e){return e=r.indexOf(e),0>e?[0/0,0/0]:[e>0?s[e-1]:i[0],e<s.length?s[e]:i[i.length-1]]},o.copy=function(){return na(i,r)},a()}function ia(e,t,n){function i(t){return n[Math.max(0,Math.min(o,Math.floor(a*(t-e))))]}function r(){return a=n.length/(t-e),o=n.length-1,i}var a,o;return i.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],r()):[e,t]},i.range=function(e){return arguments.length?(n=e,r()):n},i.invertExtent=function(t){return t=n.indexOf(t),t=0>t?0/0:t/a+e,[t,t+1/a]},i.copy=function(){return ia(e,t,n)},r()}function ra(e,t){function n(n){return n>=n?t[to.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return ra(e,t)},n}function aa(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Kr(e,t)},t.tickFormat=function(t,n){return Xr(e,t,n)},t.copy=function(){return aa(e)},t}function oa(){return 0}function sa(e){return e.innerRadius}function la(e){return e.outerRadius}function ca(e){return e.startAngle}function ua(e){return e.endAngle}function da(e){return e&&e.padAngle}function pa(e,t,n,i){return(e-n)*t-(t-i)*e>0?0:1}function ha(e,t,n,i,r){var a=e[0]-t[0],o=e[1]-t[1],s=(r?i:-i)/Math.sqrt(a*a+o*o),l=s*o,c=-s*a,u=e[0]+l,d=e[1]+c,p=t[0]+l,h=t[1]+c,f=(u+p)/2,g=(d+h)/2,m=p-u,v=h-d,y=m*m+v*v,b=n-i,w=u*h-p*d,x=(0>v?-1:1)*Math.sqrt(b*b*y-w*w),k=(w*v-m*x)/y,C=(-w*m-v*x)/y,S=(w*v+m*x)/y,_=(-w*m+v*x)/y,T=k-f,$=C-g,A=S-f,E=_-g;return T*T+$*$>A*A+E*E&&(k=S,C=_),[[k-l,C-c],[k*n/b,C*n/b]]}function fa(e){function t(t){function o(){c.push("M",a(e(u),s))}for(var l,c=[],u=[],d=-1,p=t.length,h=Te(n),f=Te(i);++d<p;)r.call(this,l=t[d],d)?u.push([+h.call(this,l,d),+f.call(this,l,d)]):u.length&&(o(),u=[]);return u.length&&o(),c.length?c.join(""):null}var n=En,i=Pn,r=Et,a=ga,o=a.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(r=e,t):r},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?a=e:(a=Il.get(e)||ga).key,t):o},t.tension=function(e){return arguments.length?(s=e,t):s},t}function ga(e){return e.join("L")}function ma(e){return ga(e)+"Z"}function va(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("H",(i[0]+(i=e[t])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")}function ya(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("V",(i=e[t])[1],"H",i[0]);return r.join("")}function ba(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("H",(i=e[t])[0],"V",i[1]);return r.join("")}function wa(e,t){return e.length<4?ga(e):e[1]+Ca(e.slice(1,-1),Sa(e,t))}function xa(e,t){return e.length<3?ga(e):e[0]+Ca((e.push(e[0]),e),Sa([e[e.length-2]].concat(e,[e[1]]),t))}function ka(e,t){return e.length<3?ga(e):e[0]+Ca(e,Sa(e,t))}function Ca(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return ga(e);var n=e.length!=t.length,i="",r=e[0],a=e[1],o=t[0],s=o,l=1;if(n&&(i+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],r=e[1],l=2),t.length>1){s=t[1],a=e[l],l++,i+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<t.length;c++,l++)a=e[l],s=t[c],i+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var u=e[l];i+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+u[0]+","+u[1]}return i}function Sa(e,t){for(var n,i=[],r=(1-t)/2,a=e[0],o=e[1],s=1,l=e.length;++s<l;)n=a,a=o,o=e[s],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function _a(e){if(e.length<3)return ga(e);var t=1,n=e.length,i=e[0],r=i[0],a=i[1],o=[r,r,r,(i=e[1])[0]],s=[a,a,a,i[1]],l=[r,",",a,"L",Ea(Nl,o),",",Ea(Nl,s)];for(e.push(e[n-1]);++t<=n;)i=e[t],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),Pa(l,o,s);return e.pop(),l.push("L",i),l.join("")}function Ta(e){if(e.length<4)return ga(e);for(var t,n=[],i=-1,r=e.length,a=[0],o=[0];++i<3;)t=e[i],a.push(t[0]),o.push(t[1]);for(n.push(Ea(Nl,a)+","+Ea(Nl,o)),--i;++i<r;)t=e[i],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),Pa(n,a,o);return n.join("")}function $a(e){for(var t,n,i=-1,r=e.length,a=r+4,o=[],s=[];++i<4;)n=e[i%r],o.push(n[0]),s.push(n[1]);for(t=[Ea(Nl,o),",",Ea(Nl,s)],--i;++i<a;)n=e[i%r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Pa(t,o,s);return t.join("")}function Aa(e,t){var n=e.length-1;if(n)for(var i,r,a=e[0][0],o=e[0][1],s=e[n][0]-a,l=e[n][1]-o,c=-1;++c<=n;)i=e[c],r=c/n,i[0]=t*i[0]+(1-t)*(a+r*s),i[1]=t*i[1]+(1-t)*(o+r*l);return _a(e)}function Ea(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Pa(e,t,n){e.push("C",Ea(Dl,t),",",Ea(Dl,n),",",Ea(Ml,t),",",Ea(Ml,n),",",Ea(Nl,t),",",Ea(Nl,n))}function Ia(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Da(e){for(var t=0,n=e.length-1,i=[],r=e[0],a=e[1],o=i[0]=Ia(r,a);++t<n;)i[t]=(o+(o=Ia(r=a,a=e[t+1])))/2;return i[t]=o,i}function Ma(e){for(var t,n,i,r,a=[],o=Da(e),s=-1,l=e.length-1;++s<l;)t=Ia(e[s],e[s+1]),mo(t)<No?o[s]=o[s+1]=0:(n=o[s]/t,i=o[s+1]/t,r=n*n+i*i,r>9&&(r=3*t/Math.sqrt(r),o[s]=r*n,o[s+1]=r*i));for(s=-1;++s<=l;)r=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([r||0,o[s]*r||0]);return a}function Na(e){return e.length<3?ga(e):e[0]+Ca(e,Ma(e))}function ja(e){for(var t,n,i,r=-1,a=e.length;++r<a;)t=e[r],n=t[0],i=t[1]-Fo,t[0]=n*Math.cos(i),t[1]=n*Math.sin(i);return e}function Oa(e){function t(t){function l(){g.push("M",s(e(v),d),u,c(e(m.reverse()),d),"Z")}for(var p,h,f,g=[],m=[],v=[],y=-1,b=t.length,w=Te(n),x=Te(r),k=n===i?function(){return h}:Te(i),C=r===a?function(){return f}:Te(a);++y<b;)o.call(this,p=t[y],y)?(m.push([h=+w.call(this,p,y),f=+x.call(this,p,y)]),v.push([+k.call(this,p,y),+C.call(this,p,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=En,i=En,r=0,a=Pn,o=Et,s=ga,l=s.key,c=s,u="L",d=.7;return t.x=function(e){return arguments.length?(n=i=e,t):i},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(r=a=e,t):a},t.y0=function(e){return arguments.length?(r=e,t):r},t.y1=function(e){return arguments.length?(a=e,t):a},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?s=e:(s=Il.get(e)||ga).key,c=s.reverse||s,u=s.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(d=e,t):d},t}function La(e){return e.radius}function Ra(e){return[e.x,e.y]}function Fa(e){return function(){var t=e.apply(this,arguments),n=t[0],i=t[1]-Fo;return[n*Math.cos(i),n*Math.sin(i)]}}function Ua(){return 64}function za(){return"circle"}function qa(e){var t=Math.sqrt(e/Oo);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Ba(e,t,n){return xo(e,Ul),e.namespace=t,e.id=n,e}function Ha(e,t,n,i){var r=e.id,a=e.namespace;return U(e,"function"==typeof n?function(e,o,s){e[a][r].tween.set(t,i(n.call(e,e.__data__,o,s)))}:(n=i(n),function(e){e[a][r].tween.set(t,n)}))}function Va(e){return null==e&&(e=""),function(){this.textContent=e}}function Wa(e){return null==e?"__transition__":"__transition_"+e+"__"}function Ga(e,t,n,i,r){var a=e[n]||(e[n]={active:0,count:0}),o=a[i];if(!o){var l=r.time;o=a[i]={tween:new s,time:l,delay:r.delay,duration:r.duration,ease:r.ease},r=null,++a.count,to.timer(function(r){function s(n){return a.active>i?u(!1):(a.active=i,o.event&&o.event.start.call(e,h,t),o.tween.forEach(function(n,i){(i=i.call(e,h,t))&&m.push(i)}),p=o.ease,d=o.duration,void to.timer(function(){return g.c=c(n||1)?Et:c,1},0,l))}function c(t){if(a.active!==i)return u(!1);for(var n=t/d,r=p(n),o=m.length;o>0;)m[--o].call(e,r);return n>=1?u(!0):void 0}function u(r){return o.event&&o.event[r?"end":"interrupt"].call(e,h,t),--a.count?delete a[i]:delete e[n],1}var d,p,h=e.__data__,f=o.delay,g=ss,m=[];return g.t=f+l,r>=f?s(r-f):void(g.c=s)},0,l)}}function Ka(e,t,n){e.attr("transform",function(e){var i=t(e);return"translate("+(isFinite(i)?i:n(e))+",0)"})}function Xa(e,t,n){e.attr("transform",function(e){var i=t(e);return"translate(0,"+(isFinite(i)?i:n(e))+")"})}function Ya(e){return e.toISOString()}function Ja(e,t,n){function i(t){return e(t)}function r(e,n){var i=e[1]-e[0],r=i/n,a=to.bisect(Xl,r);return a==Xl.length?[t.year,Gr(e.map(function(e){return e/31536e6}),n)[2]]:a?t[r/Xl[a-1]<Xl[a]/r?a-1:a]:[Ql,Gr(e,n)[2]]}return i.invert=function(t){return Qa(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(Qa)},i.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,Qa(+n+1),t).length}var a=i.domain(),o=Rr(a),s=null==e?r(o,10):"number"==typeof e&&r(o,e);return s&&(e=s[0],t=s[1]),i.domain(zr(a,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=Qa(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=Qa(+t+1);return t}}:e))},i.ticks=function(e,t){var n=Rr(i.domain()),a=null==e?r(n,10):"number"==typeof e?r(n,e):!e.range&&[{range:e},t];return a&&(e=a[0],t=a[1]),e.range(n[0],Qa(+n[1]+1),1>t?1:t)},i.tickFormat=function(){return n},i.copy=function(){return Ja(e.copy(),t,n)},Vr(i,e)}function Qa(e){return new Date(e)}function Za(e){return JSON.parse(e.responseText)}function eo(e){var t=ro.createRange();return t.selectNode(ro.body),t.createContextualFragment(e.responseText)}var to={version:"3.5.0"};Date.now||(Date.now=function(){return+new Date});var no=[].slice,io=function(e){return no.call(e)},ro=document,ao=ro.documentElement,oo=window;try{io(ao.childNodes)[0].nodeType}catch(so){io=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}try{ro.createElement("div").style.setProperty("opacity",0,"")}catch(lo){var co=oo.Element.prototype,uo=co.setAttribute,po=co.setAttributeNS,ho=oo.CSSStyleDeclaration.prototype,fo=ho.setProperty;co.setAttribute=function(e,t){uo.call(this,e,t+"")},co.setAttributeNS=function(e,t,n){po.call(this,e,t,n+"")},ho.setProperty=function(e,t,n){fo.call(this,e,t+"",n)}}to.ascending=e,to.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},to.min=function(e,t){var n,i,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=e[r])&&n>i&&(n=i)}else{for(;++r<a;)if(null!=(i=t.call(e,e[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=t.call(e,e[r],r))&&n>i&&(n=i)}return n},to.max=function(e,t){var n,i,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=e[r])&&i>n&&(n=i)}else{for(;++r<a;)if(null!=(i=t.call(e,e[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=t.call(e,e[r],r))&&i>n&&(n=i)}return n},to.extent=function(e,t){var n,i,r,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(i=e[a])&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=e[a])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++a<o;)if(null!=(i=t.call(e,e[a],a))&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=t.call(e,e[a],a))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},to.sum=function(e,t){var i,r=0,a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)n(i=+e[o])&&(r+=i);else for(;++o<a;)n(i=+t.call(e,e[o],o))&&(r+=i);return r},to.mean=function(e,i){var r,a=0,o=e.length,s=-1,l=o;if(1===arguments.length)for(;++s<o;)n(r=t(e[s]))?a+=r:--l;else for(;++s<o;)n(r=t(i.call(e,e[s],s)))?a+=r:--l;return l?a/l:void 0},to.quantile=function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),r=+e[i-1],a=n-i;return a?r+a*(e[i]-r):r},to.median=function(i,r){var a,o=[],s=i.length,l=-1;if(1===arguments.length)for(;++l<s;)n(a=t(i[l]))&&o.push(a);else for(;++l<s;)n(a=t(r.call(i,i[l],l)))&&o.push(a);return o.length?to.quantile(o.sort(e),.5):void 0};var go=i(e);to.bisectLeft=go.left,to.bisect=to.bisectRight=go.right,to.bisector=function(t){return i(1===t.length?function(n,i){return e(t(n),i)}:t)},to.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,2>a&&(t=0));for(var i,r,a=n-t;a;)r=Math.random()*a--|0,i=e[a+t],e[a+t]=e[r+t],e[r+t]=i;return e},to.permute=function(e,t){for(var n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i},to.pairs=function(e){for(var t,n=0,i=e.length-1,r=e[0],a=new Array(0>i?0:i);i>n;)a[n]=[t=r,r=e[++n]];return a},to.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,t=to.min(arguments,r),n=new Array(t);++e<t;)for(var i,a=-1,o=n[e]=new Array(i);++a<i;)o[a]=arguments[a][e];return n},to.transpose=function(e){return to.zip.apply(to,e)},to.keys=function(e){var t=[];for(var n in e)t.push(n);return t},to.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},to.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},to.merge=function(e){for(var t,n,i,r=e.length,a=-1,o=0;++a<r;)o+=e[a].length;for(n=new Array(o);--r>=0;)for(i=e[r],t=i.length;--t>=0;)n[--o]=i[t];return n};var mo=Math.abs;to.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var i,r=[],o=a(mo(n)),s=-1;if(e*=o,t*=o,n*=o,0>n)for(;(i=e+n*++s)>t;)r.push(i/o);else for(;(i=e+n*++s)<t;)r.push(i/o);return r},to.map=function(e,t){var n=new s;if(e instanceof s)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var i,r=-1,a=e.length;if(1===arguments.length)for(;++r<a;)n.set(r,e[r]);else for(;++r<a;)n.set(t.call(e,i=e[r],r),i)}else for(var o in e)n.set(o,e[o]);return n};var vo="__proto__",yo="\x00";o(s,{has:u,get:function(e){return this._[l(e)]},set:function(e,t){return this._[l(e)]=t},remove:d,keys:p,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:c(t),value:this._[t]});return e},size:h,empty:f,forEach:function(e){for(var t in this._)e.call(this,c(t),this._[t])}}),to.nest=function(){function e(t,o,l){if(l>=a.length)return i?i.call(r,o):n?o.sort(n):o;for(var c,u,d,p,h=-1,f=o.length,g=a[l++],m=new s;++h<f;)(p=m.get(c=g(u=o[h])))?p.push(u):m.set(c,[u]);return t?(u=t(),d=function(n,i){u.set(n,e(t,i,l))}):(u={},d=function(n,i){u[n]=e(t,i,l)}),m.forEach(d),u}function t(e,n){if(n>=a.length)return e;var i=[],r=o[n++];return e.forEach(function(e,r){i.push({key:e,values:t(r,n)})}),r?i.sort(function(e,t){return r(e.key,t.key)}):i}var n,i,r={},a=[],o=[];return r.map=function(t,n){return e(n,t,0)},r.entries=function(n){return t(e(to.map,n,0),0)},r.key=function(e){return a.push(e),r},r.sortKeys=function(e){return o[a.length-1]=e,r},r.sortValues=function(e){return n=e,r},r.rollup=function(e){return i=e,r},r},to.set=function(e){var t=new g;if(e)for(var n=0,i=e.length;i>n;++n)t.add(e[n]);return t},o(g,{has:u,add:function(e){return this._[l(e+="")]=!0,e},remove:d,values:p,size:h,empty:f,forEach:function(e){for(var t in this._)e.call(this,c(t))}}),to.behavior={},to.rebind=function(e,t){for(var n,i=1,r=arguments.length;++i<r;)e[n=arguments[i]]=m(e,t,t[n]);return e};var bo=["webkit","ms","moz","Moz","o","O"];to.dispatch=function(){for(var e=new b,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=w(e);return e},b.prototype.on=function(e,t){var n=e.indexOf("."),i="";if(n>=0&&(i=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(i):this[e].on(i,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(i,null);return this}},to.event=null,to.requote=function(e){return e.replace(wo,"\\$&")};var wo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,xo={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},ko=function(e,t){return t.querySelector(e)},Co=function(e,t){return t.querySelectorAll(e)},So=ao.matches||ao[v(ao,"matchesSelector")],_o=function(e,t){return So.call(e,t)};"function"==typeof Sizzle&&(ko=function(e,t){return Sizzle(e,t)[0]||null},Co=Sizzle,_o=Sizzle.matchesSelector),to.selection=function(){return Eo};var To=to.selection.prototype=[];To.select=function(e){var t,n,i,r,a=[];e=_(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(i=this[o]).parentNode;for(var l=-1,c=i.length;++l<c;)(r=i[l])?(t.push(n=e.call(r,r.__data__,l,o)),n&&"__data__"in r&&(n.__data__=r.__data__)):t.push(null)}return S(a)},To.selectAll=function(e){var t,n,i=[];e=T(e);for(var r=-1,a=this.length;++r<a;)for(var o=this[r],s=-1,l=o.length;++s<l;)(n=o[s])&&(i.push(t=io(e.call(n,n.__data__,s,r))),t.parentNode=n);return S(i)};var $o={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};to.ns={prefix:$o,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.slice(0,t),e=e.slice(t+1)),$o.hasOwnProperty(n)?{space:$o[n],local:e}:e}},To.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=to.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each($(t,e[t]));return this}return this.each($(e,t))},To.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),i=(e=P(e)).length,r=-1;if(t=n.classList){for(;++r<i;)if(!t.contains(e[r]))return!1}else for(t=n.getAttribute("class");++r<i;)if(!E(e[r]).test(t))return!1;return!0}for(t in e)this.each(I(t,e[t]));return this}return this.each(I(e,t))},To.style=function(e,t,n){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(t="");for(n in e)this.each(M(n,e[n],t));return this}if(2>i)return oo.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(M(e,t,n))},To.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(N(t,e[t]));return this}return this.each(N(e,t))},To.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},To.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},To.append=function(e){return e=j(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},To.insert=function(e,t){return e=j(e),t=_(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},To.remove=function(){return this.each(O)},To.data=function(e,t){function n(e,n){var i,r,a,o=e.length,d=n.length,p=Math.min(o,d),h=new Array(d),f=new Array(d),g=new Array(o);if(t){var m,v=new s,y=new Array(o);for(i=-1;++i<o;)v.has(m=t.call(r=e[i],r.__data__,i))?g[i]=r:v.set(m,r),y[i]=m;for(i=-1;++i<d;)(r=v.get(m=t.call(n,a=n[i],i)))?r!==!0&&(h[i]=r,r.__data__=a):f[i]=L(a),v.set(m,!0);for(i=-1;++i<o;)v.get(y[i])!==!0&&(g[i]=e[i])}else{for(i=-1;++i<p;)r=e[i],a=n[i],r?(r.__data__=a,h[i]=r):f[i]=L(a);for(;d>i;++i)f[i]=L(n[i]);for(;o>i;++i)g[i]=e[i]}f.update=h,f.parentNode=h.parentNode=g.parentNode=e.parentNode,l.push(f),c.push(h),u.push(g)}var i,r,a=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(i=this[0]).length);++a<o;)(r=i[a])&&(e[a]=r.__data__);return e}var l=z([]),c=S([]),u=S([]);if("function"==typeof e)for(;++a<o;)n(i=this[a],e.call(i,i.parentNode.__data__,a));else for(;++a<o;)n(i=this[a],e);return c.enter=function(){return l},c.exit=function(){return u},c},To.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},To.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=R(e));for(var a=0,o=this.length;o>a;a++){r.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;l>s;s++)(i=n[s])&&e.call(i,i.__data__,s,a)&&t.push(i)}return S(r)},To.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,i=this[e],r=i.length-1,a=i[r];--r>=0;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},To.sort=function(e){e=F.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},To.each=function(e){return U(this,function(t,n,i){e.call(t,t.__data__,n,i)})},To.call=function(e){var t=io(arguments);return e.apply(t[0]=this,t),this},To.empty=function(){return!this.node()},To.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],i=0,r=n.length;r>i;i++){var a=n[i];if(a)return a}return null},To.size=function(){var e=0;return U(this,function(){++e}),e};var Ao=[];to.selection.enter=z,to.selection.enter.prototype=Ao,Ao.append=To.append,Ao.empty=To.empty,Ao.node=To.node,Ao.call=To.call,Ao.size=To.size,Ao.select=function(e){for(var t,n,i,r,a,o=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,o.push(t=[]),t.parentNode=r.parentNode;for(var c=-1,u=r.length;++c<u;)(a=r[c])?(t.push(i[c]=n=e.call(r.parentNode,a.__data__,c,s)),n.__data__=a.__data__):t.push(null)}return S(o)},Ao.insert=function(e,t){return arguments.length<2&&(t=q(this)),To.insert.call(this,e,t)},To.transition=function(e){for(var t,n,i=Ol||++zl,r=Wa(e),a=[],o=Ll||{time:Date.now(),ease:Ti,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&Ga(n,u,r,i,o),t.push(n)}return Ba(a,r,i)},To.interrupt=function(e){var t=Wa(e);return this.each(function(){var e=this[t];e&&++e.active})},to.select=function(e){var t=["string"==typeof e?ko(e,ro):e];return t.parentNode=ao,S([t])},to.selectAll=function(e){var t=io("string"==typeof e?Co(e,ro):e);return t.parentNode=ao,S([t])};var Eo=to.select(ao);To.on=function(e,t,n){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(t=!1);for(n in e)this.each(H(n,e[n],t));return this}if(2>i)return(i=this.node()["__on"+e])&&i._;n=!1}return this.each(H(e,t,n))};var Po=to.map({mouseenter:"mouseover",mouseleave:"mouseout"});Po.forEach(function(e){"on"+e in ro&&Po.remove(e)});var Io="onselectstart"in ro?null:v(ao.style,"userSelect"),Do=0;to.mouse=function(e){return K(e,k())};var Mo=/WebKit/.test(oo.navigator.userAgent)?-1:0;to.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=k().changedTouches),t)for(var i,r=0,a=t.length;a>r;++r)if((i=t[r]).identifier===n)return K(e,i)},to.behavior.drag=function(){function e(){this.on("mousedown.drag",r).on("touchstart.drag",a)}function t(e,t,r,a,o){return function(){function s(){var e,n,i=t(p,g);i&&(e=i[0]-b[0],n=i[1]-b[1],f|=e|n,b=i,h({type:"drag",x:i[0]+c[0],y:i[1]+c[1],dx:e,dy:n}))}function l(){t(p,g)&&(v.on(a+m,null).on(o+m,null),y(f&&to.event.target===d),h({type:"dragend"}))}var c,u=this,d=to.event.target,p=u.parentNode,h=n.of(u,arguments),f=0,g=e(),m=".drag"+(null==g?"":"-"+g),v=to.select(r()).on(a+m,s).on(o+m,l),y=G(),b=t(p,g);i?(c=i.apply(u,arguments),c=[c.x-b[0],c.y-b[1]]):c=[0,0],h({type:"dragstart"})}}var n=C(e,"drag","dragstart","dragend"),i=null,r=t(y,to.mouse,J,"mousemove","mouseup"),a=t(X,to.touch,Y,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},to.rebind(e,n,"on")},to.touches=function(e,t){return arguments.length<2&&(t=k().touches),t?io(t).map(function(t){var n=K(e,t);return n.identifier=t.identifier,n}):[]};var No=1e-6,jo=No*No,Oo=Math.PI,Lo=2*Oo,Ro=Lo-No,Fo=Oo/2,Uo=Oo/180,zo=180/Oo,qo=Math.SQRT2,Bo=2,Ho=4;to.interpolateZoom=function(e,t){function n(e){var t=e*y;if(v){var n=ie(g),o=a/(Bo*p)*(n*re(qo*t+g)-ne(g));return[i+o*c,r+o*u,a*n/ie(qo*t+g)]}return[i+e*c,r+e*u,a*Math.exp(qo*t)];

}var i=e[0],r=e[1],a=e[2],o=t[0],s=t[1],l=t[2],c=o-i,u=s-r,d=c*c+u*u,p=Math.sqrt(d),h=(l*l-a*a+Ho*d)/(2*a*Bo*p),f=(l*l-a*a-Ho*d)/(2*l*Bo*p),g=Math.log(Math.sqrt(h*h+1)-h),m=Math.log(Math.sqrt(f*f+1)-f),v=m-g,y=(v||Math.log(l/a))/qo;return n.duration=1e3*y,n},to.behavior.zoom=function(){function e(e){e.on(P,u).on(Go+".zoom",p).on("dblclick.zoom",h).on(M,d)}function t(e){return[(e[0]-_.x)/_.k,(e[1]-_.y)/_.k]}function n(e){return[e[0]*_.k+_.x,e[1]*_.k+_.y]}function i(e){_.k=Math.max($[0],Math.min($[1],e))}function r(e,t){t=n(t),_.x+=e[0]-t[0],_.y+=e[1]-t[1]}function a(t,n,a,o){t.__chart__={x:_.x,y:_.y,k:_.k},i(Math.pow(2,o)),r(g=n,a),t=to.select(t),A>0&&(t=t.transition().duration(A)),t.call(e.event)}function o(){w&&w.domain(b.range().map(function(e){return(e-_.x)/_.k}).map(b.invert)),S&&S.domain(k.range().map(function(e){return(e-_.y)/_.k}).map(k.invert))}function s(e){E++||e({type:"zoomstart"})}function l(e){o(),e({type:"zoom",scale:_.k,translate:[_.x,_.y]})}function c(e){--E||e({type:"zoomend"}),g=null}function u(){function e(){u=1,r(to.mouse(i),p),l(o)}function n(){d.on(I,null).on(D,null),h(u&&to.event.target===a),c(o)}var i=this,a=to.event.target,o=N.of(i,arguments),u=0,d=to.select(oo).on(I,e).on(D,n),p=t(to.mouse(i)),h=G();B(i),s(o)}function d(){function e(){var e=to.touches(f);return h=_.k,e.forEach(function(e){e.identifier in m&&(m[e.identifier]=t(e))}),e}function n(){var t=to.event.target;to.select(t).on(w,o).on(k,p),C.push(t);for(var n=to.event.changedTouches,i=0,r=n.length;r>i;++i)m[n[i].identifier]=null;var s=e(),l=Date.now();if(1===s.length){if(500>l-y){var c=s[0];a(f,c,m[c.identifier],Math.floor(Math.log(_.k)/Math.LN2)+1),x()}y=l}else if(s.length>1){var c=s[0],u=s[1],d=c[0]-u[0],h=c[1]-u[1];v=d*d+h*h}}function o(){var e,t,n,a,o=to.touches(f);B(f);for(var s=0,c=o.length;c>s;++s,a=null)if(n=o[s],a=m[n.identifier]){if(t)break;e=n,t=a}if(a){var u=(u=n[0]-e[0])*u+(u=n[1]-e[1])*u,d=v&&Math.sqrt(u/v);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+a[0])/2,(t[1]+a[1])/2],i(d*h)}y=null,r(e,t),l(g)}function p(){if(to.event.touches.length){for(var t=to.event.changedTouches,n=0,i=t.length;i>n;++n)delete m[t[n].identifier];for(var r in m)return void e()}to.selectAll(C).on(b,null),S.on(P,u).on(M,d),T(),c(g)}var h,f=this,g=N.of(f,arguments),m={},v=0,b=".zoom-"+to.event.changedTouches[0].identifier,w="touchmove"+b,k="touchend"+b,C=[],S=to.select(f),T=G();n(),s(g),S.on(P,null).on(M,n)}function p(){var e=N.of(this,arguments);v?clearTimeout(v):(f=t(g=m||to.mouse(this)),B(this),s(e)),v=setTimeout(function(){v=null,c(e)},50),x(),i(Math.pow(2,.002*Vo())*_.k),r(g,f),l(e)}function h(){var e=to.mouse(this),n=Math.log(_.k)/Math.LN2;a(this,e,t(e),to.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var f,g,m,v,y,b,w,k,S,_={x:0,y:0,k:1},T=[960,500],$=Wo,A=250,E=0,P="mousedown.zoom",I="mousemove.zoom",D="mouseup.zoom",M="touchstart.zoom",N=C(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=N.of(this,arguments),t=_;Ol?to.select(this).transition().each("start.zoom",function(){_=this.__chart__||{x:0,y:0,k:1},s(e)}).tween("zoom:zoom",function(){var n=T[0],i=T[1],r=g?g[0]:n/2,a=g?g[1]:i/2,o=to.interpolateZoom([(r-_.x)/_.k,(a-_.y)/_.k,n/_.k],[(r-t.x)/t.k,(a-t.y)/t.k,n/t.k]);return function(t){var i=o(t),s=n/i[2];this.__chart__=_={x:r-i[0]*s,y:a-i[1]*s,k:s},l(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=_,s(e),l(e),c(e))})},e.translate=function(t){return arguments.length?(_={x:+t[0],y:+t[1],k:_.k},o(),e):[_.x,_.y]},e.scale=function(t){return arguments.length?(_={x:_.x,y:_.y,k:+t},o(),e):_.k},e.scaleExtent=function(t){return arguments.length?($=null==t?Wo:[+t[0],+t[1]],e):$},e.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],e):m},e.size=function(t){return arguments.length?(T=t&&[+t[0],+t[1]],e):T},e.duration=function(t){return arguments.length?(A=+t,e):A},e.x=function(t){return arguments.length?(w=t,b=t.copy(),_={x:0,y:0,k:1},e):w},e.y=function(t){return arguments.length?(S=t,k=t.copy(),_={x:0,y:0,k:1},e):S},to.rebind(e,N,"on")};var Vo,Wo=[0,1/0],Go="onwheel"in ro?(Vo=function(){return-to.event.deltaY*(to.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ro?(Vo=function(){return to.event.wheelDelta},"mousewheel"):(Vo=function(){return-to.event.detail},"MozMousePixelScroll");to.color=oe,oe.prototype.toString=function(){return this.rgb()+""},to.hsl=se;var Ko=se.prototype=new oe;Ko.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,this.l/e)},Ko.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,e*this.l)},Ko.rgb=function(){return le(this.h,this.s,this.l)},to.hcl=ce;var Xo=ce.prototype=new oe;Xo.brighter=function(e){return new ce(this.h,this.c,Math.min(100,this.l+Yo*(arguments.length?e:1)))},Xo.darker=function(e){return new ce(this.h,this.c,Math.max(0,this.l-Yo*(arguments.length?e:1)))},Xo.rgb=function(){return ue(this.h,this.c,this.l).rgb()},to.lab=de;var Yo=18,Jo=.95047,Qo=1,Zo=1.08883,es=de.prototype=new oe;es.brighter=function(e){return new de(Math.min(100,this.l+Yo*(arguments.length?e:1)),this.a,this.b)},es.darker=function(e){return new de(Math.max(0,this.l-Yo*(arguments.length?e:1)),this.a,this.b)},es.rgb=function(){return pe(this.l,this.a,this.b)},to.rgb=ve;var ts=ve.prototype=new oe;ts.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,i=this.b,r=30;return t||n||i?(t&&r>t&&(t=r),n&&r>n&&(n=r),i&&r>i&&(i=r),new ve(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,i/e))):new ve(r,r,r)},ts.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new ve(e*this.r,e*this.g,e*this.b)},ts.hsl=function(){return ke(this.r,this.g,this.b)},ts.toString=function(){return"#"+we(this.r)+we(this.g)+we(this.b)};var ns=to.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ns.forEach(function(e,t){ns.set(e,ye(t))}),to.functor=Te,to.xhr=Ae($e),to.dsv=function(e,t){function n(e,n,a){arguments.length<3&&(a=n,n=null);var o=Ee(e,t,null==n?i:r(n),a);return o.row=function(e){return arguments.length?o.response(null==(n=e)?i:r(e)):n},o}function i(e){return n.parse(e.responseText)}function r(e){return function(t){return n.parse(t.responseText,e)}}function a(t){return t.map(o).join(e)}function o(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return n.parse=function(e,t){var i;return n.parseRows(e,function(e,n){if(i)return i(e,n-1);var r=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");i=t?function(e,n){return t(r(e),n)}:r})},n.parseRows=function(e,t){function n(){if(u>=c)return o;if(r)return r=!1,a;var t=u;if(34===e.charCodeAt(t)){for(var n=t;n++<c;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}u=n+2;var i=e.charCodeAt(n+1);return 13===i?(r=!0,10===e.charCodeAt(n+2)&&++u):10===i&&(r=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;c>u;){var i=e.charCodeAt(u++),s=1;if(10===i)r=!0;else if(13===i)r=!0,10===e.charCodeAt(u)&&(++u,++s);else if(i!==l)continue;return e.slice(t,u-s)}return e.slice(t)}for(var i,r,a={},o={},s=[],c=e.length,u=0,d=0;(i=n())!==o;){for(var p=[];i!==a&&i!==o;)p.push(i),i=n();t&&null==(p=t(p,d++))||s.push(p)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var i=new g,r=[];return t.forEach(function(e){for(var t in e)i.has(t)||r.push(i.add(t))}),[r.map(o).join(e)].concat(t.map(function(t){return r.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(a).join("\n")},n},to.csv=to.dsv(",","text/csv"),to.tsv=to.dsv("	","text/tab-separated-values");var is,rs,as,os,ss,ls=oo[v(oo,"requestAnimationFrame")]||function(e){setTimeout(e,17)};to.timer=function(e,t,n){var i=arguments.length;2>i&&(t=0),3>i&&(n=Date.now());var r=n+t,a={c:e,t:r,f:!1,n:null};rs?rs.n=a:is=a,rs=a,as||(os=clearTimeout(os),as=1,ls(De))},to.timer.flush=function(){Me(),Ne()},to.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var cs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Oe);to.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=to.round(e,je(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),cs[8+n/3]};var us=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ds=to.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=to.round(e,je(e,t))).toFixed(Math.max(0,Math.min(20,je(e*(1+1e-15),t))))}}),ps=to.time={},hs=Date;Fe.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){fs.setUTCDate.apply(this._,arguments)},setDay:function(){fs.setUTCDay.apply(this._,arguments)},setFullYear:function(){fs.setUTCFullYear.apply(this._,arguments)},setHours:function(){fs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){fs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){fs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){fs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){fs.setUTCSeconds.apply(this._,arguments)},setTime:function(){fs.setTime.apply(this._,arguments)}};var fs=Date.prototype;ps.year=Ue(function(e){return e=ps.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),ps.years=ps.year.range,ps.years.utc=ps.year.utc.range,ps.day=Ue(function(e){var t=new hs(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),ps.days=ps.day.range,ps.days.utc=ps.day.utc.range,ps.dayOfYear=function(e){var t=ps.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=ps[e]=Ue(function(e){return(e=ps.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=ps.year(e).getDay();return Math.floor((ps.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});ps[e+"s"]=n.range,ps[e+"s"].utc=n.utc.range,ps[e+"OfYear"]=function(e){var n=ps.year(e).getDay();return Math.floor((ps.dayOfYear(e)+(n+t)%7)/7)}}),ps.week=ps.sunday,ps.weeks=ps.sunday.range,ps.weeks.utc=ps.sunday.utc.range,ps.weekOfYear=ps.sundayOfYear;var gs={"-":"",_:" ",0:"0"},ms=/^\s*\d+/,vs=/^%/;to.locale=function(e){return{numberFormat:Le(e),timeFormat:qe(e)}};var ys=to.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});to.format=ys.numberFormat,to.geo={},ct.prototype={s:0,t:0,add:function(e){ut(e,this.t,bs),ut(bs.s,this.s,this),this.s?this.t+=bs.t:this.s=bs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var bs=new ct;to.geo.stream=function(e,t){e&&ws.hasOwnProperty(e.type)?ws[e.type](e,t):dt(e,t)};var ws={Feature:function(e,t){dt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)dt(n[i].geometry,t)}},xs={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){pt(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)pt(n[i],t,0)},Polygon:function(e,t){ht(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)ht(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)dt(n[i],t)}};to.geo.area=function(e){return ks=0,to.geo.stream(e,Ss),ks};var ks,Cs=new ct,Ss={sphere:function(){ks+=4*Oo},point:y,lineStart:y,lineEnd:y,polygonStart:function(){Cs.reset(),Ss.lineStart=ft},polygonEnd:function(){var e=2*Cs;ks+=0>e?4*Oo+e:e,Ss.lineStart=Ss.lineEnd=Ss.point=y}};to.geo.bounds=function(){function e(e,t){b.push(w=[u=e,p=e]),d>t&&(d=t),t>h&&(h=t)}function t(t,n){var i=gt([t*Uo,n*Uo]);if(v){var r=vt(v,i),a=[r[1],-r[0],0],o=vt(a,r);wt(o),o=xt(o);var l=t-f,c=l>0?1:-1,g=o[0]*zo*c,m=mo(l)>180;if(m^(g>c*f&&c*t>g)){var y=o[1]*zo;y>h&&(h=y)}else if(g=(g+360)%360-180,m^(g>c*f&&c*t>g)){var y=-o[1]*zo;d>y&&(d=y)}else d>n&&(d=n),n>h&&(h=n);m?f>t?s(u,t)>s(u,p)&&(p=t):s(t,p)>s(u,p)&&(u=t):p>=u?(u>t&&(u=t),t>p&&(p=t)):t>f?s(u,t)>s(u,p)&&(p=t):s(t,p)>s(u,p)&&(u=t)}else e(t,n);v=i,f=t}function n(){x.point=t}function i(){w[0]=u,w[1]=p,x.point=e,v=null}function r(e,n){if(v){var i=e-f;y+=mo(i)>180?i+(i>0?360:-360):i}else g=e,m=n;Ss.point(e,n),t(e,n)}function a(){Ss.lineStart()}function o(){r(g,m),Ss.lineEnd(),mo(y)>No&&(u=-(p=180)),w[0]=u,w[1]=p,v=null}function s(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function c(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var u,d,p,h,f,g,m,v,y,b,w,x={point:e,lineStart:n,lineEnd:i,polygonStart:function(){x.point=r,x.lineStart=a,x.lineEnd=o,y=0,Ss.polygonStart()},polygonEnd:function(){Ss.polygonEnd(),x.point=e,x.lineStart=n,x.lineEnd=i,0>Cs?(u=-(p=180),d=-(h=90)):y>No?h=90:-No>y&&(d=-90),w[0]=u,w[1]=p}};return function(e){h=p=-(u=d=1/0),b=[],to.geo.stream(e,x);var t=b.length;if(t){b.sort(l);for(var n,i=1,r=b[0],a=[r];t>i;++i)n=b[i],c(n[0],r)||c(n[1],r)?(s(r[0],n[1])>s(r[0],r[1])&&(r[1]=n[1]),s(n[0],r[1])>s(r[0],r[1])&&(r[0]=n[0])):a.push(r=n);for(var o,n,f=-(1/0),t=a.length-1,i=0,r=a[t];t>=i;r=n,++i)n=a[i],(o=s(r[1],n[0]))>f&&(f=o,u=n[0],p=r[1])}return b=w=null,u===1/0||d===1/0?[[0/0,0/0],[0/0,0/0]]:[[u,d],[p,h]]}}(),to.geo.centroid=function(e){_s=Ts=$s=As=Es=Ps=Is=Ds=Ms=Ns=js=0,to.geo.stream(e,Os);var t=Ms,n=Ns,i=js,r=t*t+n*n+i*i;return jo>r&&(t=Ps,n=Is,i=Ds,No>Ts&&(t=$s,n=As,i=Es),r=t*t+n*n+i*i,jo>r)?[0/0,0/0]:[Math.atan2(n,t)*zo,te(i/Math.sqrt(r))*zo]};var _s,Ts,$s,As,Es,Ps,Is,Ds,Ms,Ns,js,Os={sphere:y,point:Ct,lineStart:_t,lineEnd:Tt,polygonStart:function(){Os.lineStart=$t},polygonEnd:function(){Os.lineStart=_t}},Ls=Mt(Et,Lt,Ft,[-Oo,-Oo/2]),Rs=1e9;to.geo.clipExtent=function(){var e,t,n,i,r,a,o={stream:function(e){return r&&(r.valid=!1),r=a(e),r.valid=!0,r},extent:function(s){return arguments.length?(a=Bt(e=+s[0][0],t=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),o):[[e,t],[n,i]]}};return o.extent([[0,0],[960,500]])},(to.geo.conicEqualArea=function(){return Ht(Vt)}).raw=Vt,to.geo.albers=function(){return to.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},to.geo.albersUsa=function(){function e(e){var a=e[0],o=e[1];return t=null,n(a,o),t||(i(a,o),t)||r(a,o),t}var t,n,i,r,a=to.geo.albers(),o=to.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=to.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=a.scale(),n=a.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?o:r>=.166&&.234>r&&i>=-.214&&-.115>i?s:a).invert(e)},e.stream=function(e){var t=a.stream(e),n=o.stream(e),i=s.stream(e);return{point:function(e,r){t.point(e,r),n.point(e,r),i.point(e,r)},sphere:function(){t.sphere(),n.sphere(),i.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},e.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),s.precision(t),e):a.precision()},e.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),s.scale(t),e.translate(a.translate())):a.scale()},e.translate=function(t){if(!arguments.length)return a.translate();var c=a.scale(),u=+t[0],d=+t[1];return n=a.translate(t).clipExtent([[u-.455*c,d-.238*c],[u+.455*c,d+.238*c]]).stream(l).point,i=o.translate([u-.307*c,d+.201*c]).clipExtent([[u-.425*c+No,d+.12*c+No],[u-.214*c-No,d+.234*c-No]]).stream(l).point,r=s.translate([u-.205*c,d+.212*c]).clipExtent([[u-.214*c+No,d+.166*c+No],[u-.115*c-No,d+.234*c-No]]).stream(l).point,e},e.scale(1070)};var Fs,Us,zs,qs,Bs,Hs,Vs={point:y,lineStart:y,lineEnd:y,polygonStart:function(){Us=0,Vs.lineStart=Wt},polygonEnd:function(){Vs.lineStart=Vs.lineEnd=Vs.point=y,Fs+=mo(Us/2)}},Ws={point:Gt,lineStart:y,lineEnd:y,polygonStart:y,polygonEnd:y},Gs={point:Yt,lineStart:Jt,lineEnd:Qt,polygonStart:function(){Gs.lineStart=Zt},polygonEnd:function(){Gs.point=Yt,Gs.lineStart=Jt,Gs.lineEnd=Qt}};to.geo.path=function(){function e(e){return e&&("function"==typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=r(a)),to.geo.stream(e,o)),a.result()}function t(){return o=null,e}var n,i,r,a,o,s=4.5;return e.area=function(e){return Fs=0,to.geo.stream(e,r(Vs)),Fs},e.centroid=function(e){return $s=As=Es=Ps=Is=Ds=Ms=Ns=js=0,to.geo.stream(e,r(Gs)),js?[Ms/js,Ns/js]:Ds?[Ps/Ds,Is/Ds]:Es?[$s/Es,As/Es]:[0/0,0/0]},e.bounds=function(e){return Bs=Hs=-(zs=qs=1/0),to.geo.stream(e,r(Ws)),[[zs,qs],[Bs,Hs]]},e.projection=function(e){return arguments.length?(r=(n=e)?e.stream||nn(e):$e,t()):n},e.context=function(e){return arguments.length?(a=null==(i=e)?new Kt:new en(e),"function"!=typeof s&&a.pointRadius(s),t()):i},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(a.pointRadius(+t),+t),e):s},e.projection(to.geo.albersUsa()).context(null)},to.geo.transform=function(e){return{stream:function(t){var n=new rn(t);for(var i in e)n[i]=e[i];return n}}},rn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},to.geo.projection=on,to.geo.projectionMutator=sn,(to.geo.equirectangular=function(){return on(cn)}).raw=cn.invert=cn,to.geo.rotation=function(e){function t(t){return t=e(t[0]*Uo,t[1]*Uo),t[0]*=zo,t[1]*=zo,t}return e=dn(e[0]%360*Uo,e[1]*Uo,e.length>2?e[2]*Uo:0),t.invert=function(t){return t=e.invert(t[0]*Uo,t[1]*Uo),t[0]*=zo,t[1]*=zo,t},t},un.invert=cn,to.geo.circle=function(){function e(){var e="function"==typeof i?i.apply(this,arguments):i,t=dn(-e[0]*Uo,-e[1]*Uo,0).invert,r=[];return n(null,null,1,{point:function(e,n){r.push(e=t(e,n)),e[0]*=zo,e[1]*=zo}}),{type:"Polygon",coordinates:[r]}}var t,n,i=[0,0],r=6;return e.origin=function(t){return arguments.length?(i=t,e):i},e.angle=function(i){return arguments.length?(n=gn((t=+i)*Uo,r*Uo),e):t},e.precision=function(i){return arguments.length?(n=gn(t*Uo,(r=+i)*Uo),e):r},e.angle(90)},to.geo.distance=function(e,t){var n,i=(t[0]-e[0])*Uo,r=e[1]*Uo,a=t[1]*Uo,o=Math.sin(i),s=Math.cos(i),l=Math.sin(r),c=Math.cos(r),u=Math.sin(a),d=Math.cos(a);return Math.atan2(Math.sqrt((n=d*o)*n+(n=c*u-l*d*s)*n),l*u+c*d*s)},to.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return to.range(Math.ceil(a/m)*m,r,m).map(p).concat(to.range(Math.ceil(c/v)*v,l,v).map(h)).concat(to.range(Math.ceil(i/f)*f,n,f).filter(function(e){return mo(e%m)>No}).map(u)).concat(to.range(Math.ceil(s/g)*g,o,g).filter(function(e){return mo(e%v)>No}).map(d))}var n,i,r,a,o,s,l,c,u,d,p,h,f=10,g=f,m=90,v=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[p(a).concat(h(l).slice(1),p(r).reverse().slice(1),h(c).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],r=+t[1][0],c=+t[0][1],l=+t[1][1],a>r&&(t=a,a=r,r=t),c>l&&(t=c,c=l,l=t),e.precision(y)):[[a,c],[r,l]]},e.minorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],i>n&&(t=i,i=n,n=t),s>o&&(t=s,s=o,o=t),e.precision(y)):[[i,s],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],v=+t[1],e):[m,v]},e.minorStep=function(t){return arguments.length?(f=+t[0],g=+t[1],e):[f,g]},e.precision=function(t){return arguments.length?(y=+t,u=vn(s,o,90),d=yn(i,n,y),p=vn(c,l,90),h=yn(a,r,y),e):y},e.majorExtent([[-180,-90+No],[180,90-No]]).minorExtent([[-180,-80-No],[180,80+No]])},to.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||i.apply(this,arguments),n||r.apply(this,arguments)]}}var t,n,i=bn,r=wn;return e.distance=function(){return to.geo.distance(t||i.apply(this,arguments),n||r.apply(this,arguments))},e.source=function(n){return arguments.length?(i=n,t="function"==typeof n?null:n,e):i},e.target=function(t){return arguments.length?(r=t,n="function"==typeof t?null:t,e):r},e.precision=function(){return arguments.length?e:0},e},to.geo.interpolate=function(e,t){return xn(e[0]*Uo,e[1]*Uo,t[0]*Uo,t[1]*Uo)},to.geo.length=function(e){return Ks=0,to.geo.stream(e,Xs),Ks};var Ks,Xs={sphere:y,point:y,lineStart:kn,lineEnd:y,polygonStart:y,polygonEnd:y},Ys=Cn(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(to.geo.azimuthalEqualArea=function(){return on(Ys)}).raw=Ys;var Js=Cn(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},$e);(to.geo.azimuthalEquidistant=function(){return on(Js)}).raw=Js,(to.geo.conicConformal=function(){return Ht(Sn)}).raw=Sn,(to.geo.conicEquidistant=function(){return Ht(_n)}).raw=_n;var Qs=Cn(function(e){return 1/e},Math.atan);(to.geo.gnomonic=function(){return on(Qs)}).raw=Qs,Tn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Fo]},(to.geo.mercator=function(){return $n(Tn)}).raw=Tn;var Zs=Cn(function(){return 1},Math.asin);(to.geo.orthographic=function(){return on(Zs)}).raw=Zs;var el=Cn(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(to.geo.stereographic=function(){return on(el)}).raw=el,An.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Fo]},(to.geo.transverseMercator=function(){var e=$n(An),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=An,to.geom={},to.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,r=Te(n),a=Te(i),o=e.length,s=[],l=[];for(t=0;o>t;t++)s.push([+r.call(this,e[t],t),+a.call(this,e[t],t),t]);for(s.sort(Dn),t=0;o>t;t++)l.push([s[t][0],-s[t][1]]);var c=In(s),u=In(l),d=u[0]===c[0],p=u[u.length-1]===c[c.length-1],h=[];for(t=c.length-1;t>=0;--t)h.push(e[s[c[t]][2]]);for(t=+d;t<u.length-p;++t)h.push(e[s[u[t]][2]]);return h}var n=En,i=Pn;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t)},to.geom.polygon=function(e){return xo(e,tl),e};var tl=to.geom.polygon.prototype=[];tl.area=function(){for(var e,t=-1,n=this.length,i=this[n-1],r=0;++t<n;)e=i,i=this[t],r+=e[1]*i[0]-e[0]*i[1];return.5*r},tl.centroid=function(e){var t,n,i=-1,r=this.length,a=0,o=0,s=this[r-1];for(arguments.length||(e=-1/(6*this.area()));++i<r;)t=s,s=this[i],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},tl.clip=function(e){for(var t,n,i,r,a,o,s=jn(e),l=-1,c=this.length-jn(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,r=this[l],a=t[(i=t.length-s)-1],n=-1;++n<i;)o=t[n],Mn(o,u,r)?(Mn(a,u,r)||e.push(Nn(a,o,u,r)),e.push(o)):Mn(a,u,r)&&e.push(Nn(a,o,u,r)),a=o;s&&e.push(e[0]),u=r}return e};var nl,il,rl,al,ol,sl=[],ll=[];Bn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Vn),t.length},ti.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ni.prototype={insert:function(e,t){var n,i,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=oi(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.R&&(ri(this,n),e=n,n=e.U),n.C=!1,i.C=!0,ai(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.L&&(ai(this,n),e=n,n=e.U),n.C=!1,i.C=!0,ri(this,i))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,i,r=e.U,a=e.L,o=e.R;if(n=a?o?oi(o):a:o,r?r.L===e?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(r=n.U,n.U=e.U,e=n.R,r.L=e,n.R=o,o.U=n):(n.U=r,r=n,e=n.R)):(i=e.C,e=n),e&&(e.U=r),!i){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===r.L){if(t=r.R,t.C&&(t.C=!1,r.C=!0,ri(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ai(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,ri(this,r),e=this._;break}}else if(t=r.L,t.C&&(t.C=!1,r.C=!0,ai(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ri(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,ai(this,r),e=this._;break}t.C=!0,e=r,r=r.U}while(!e.C);e&&(e.C=!1)}}},to.geom.voronoi=function(e){function t(e){var t=new Array(e.length),i=s[0][0],r=s[0][1],a=s[1][0],o=s[1][1];return si(n(e),s).cells.forEach(function(n,s){var l=n.edges,c=n.site,u=t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):c.x>=i&&c.x<=a&&c.y>=r&&c.y<=o?[[i,o],[a,o],[a,r],[i,r]]:[];u.point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/No)*No,y:Math.round(o(e,t)/No)*No,i:t}})}var i=En,r=Pn,a=i,o=r,s=cl;return e?t(e):(t.links=function(e){return si(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return si(n(e)).cells.forEach(function(n,i){for(var r,a,o=n.site,s=n.edges.sort(Vn),l=-1,c=s.length,u=s[c-1].edge,d=u.l===o?u.r:u.l;++l<c;)r=u,a=d,u=s[l].edge,d=u.l===o?u.r:u.l,i<a.i&&i<d.i&&ci(o,a,d)<0&&t.push([e[i],e[a.i],e[d.i]])}),t},t.x=function(e){return arguments.length?(a=Te(i=e),t):i},t.y=function(e){return arguments.length?(o=Te(r=e),t):r},t.clipExtent=function(e){return arguments.length?(s=null==e?cl:e,t):s===cl?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===cl?null:s&&s[1]},t)};var cl=[[-1e6,-1e6],[1e6,1e6]];to.geom.delaunay=function(e){return to.geom.voronoi().triangles(e)},to.geom.quadtree=function(e,t,n,i,r){function a(e){function a(e,t,n,i,r,a,o,s){if(!isNaN(n)&&!isNaN(i))if(e.leaf){var l=e.x,u=e.y;if(null!=l)if(mo(l-n)+mo(u-i)<.01)c(e,t,n,i,r,a,o,s);else{var d=e.point;e.x=e.y=e.point=null,c(e,d,l,u,r,a,o,s),c(e,t,n,i,r,a,o,s)}else e.x=n,e.y=i,e.point=t}else c(e,t,n,i,r,a,o,s)}function c(e,t,n,i,r,o,s,l){var c=.5*(r+s),u=.5*(o+l),d=n>=c,p=i>=u,h=p<<1|d;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=pi()),d?r=c:s=c,p?o=u:l=u,a(e,t,n,i,r,o,s,l)}var u,d,p,h,f,g,m,v,y,b=Te(s),w=Te(l);if(null!=t)g=t,m=n,v=i,y=r;else if(v=y=-(g=m=1/0),d=[],p=[],f=e.length,o)for(h=0;f>h;++h)u=e[h],u.x<g&&(g=u.x),u.y<m&&(m=u.y),u.x>v&&(v=u.x),u.y>y&&(y=u.y),d.push(u.x),p.push(u.y);else for(h=0;f>h;++h){var x=+b(u=e[h],h),k=+w(u,h);g>x&&(g=x),m>k&&(m=k),x>v&&(v=x),k>y&&(y=k),d.push(x),p.push(k)}var C=v-g,S=y-m;C>S?y=m+C:v=g+S;var _=pi();if(_.add=function(e){a(_,e,+b(e,++h),+w(e,h),g,m,v,y)},_.visit=function(e){hi(e,_,g,m,v,y)},_.find=function(e){return fi(_,e[0],e[1],g,m,v,y)},h=-1,null==t){for(;++h<f;)a(_,e[h],d[h],p[h],g,m,v,y);--h}else e.forEach(_.add);return d=p=e=u=null,_}var o,s=En,l=Pn;return(o=arguments.length)?(s=ui,l=di,3===o&&(r=n,i=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(l=e,a):l},a.extent=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=+e[0][0],n=+e[0][1],i=+e[1][0],r=+e[1][1]),a):null==t?null:[[t,n],[i,r]]},a.size=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=n=0,i=+e[0],r=+e[1]),a):null==t?null:[i-t,r-n]},a)},to.interpolateRgb=gi,to.interpolateObject=mi,to.interpolateNumber=vi,to.interpolateString=yi;var ul=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dl=new RegExp(ul.source,"g");to.interpolate=bi,to.interpolators=[function(e,t){var n=typeof t;return("string"===n?ns.has(t)||/^(#|rgb\(|hsl\()/.test(t)?gi:yi:t instanceof oe?gi:Array.isArray(t)?wi:"object"===n&&isNaN(t)?mi:vi)(e,t)}],to.interpolateArray=wi;var pl=function(){return $e},hl=to.map({linear:pl,poly:$i,quad:function(){return Si},cubic:function(){
return _i},sin:function(){return Ai},exp:function(){return Ei},circle:function(){return Pi},elastic:Ii,back:Di,bounce:function(){return Mi}}),fl=to.map({"in":$e,out:ki,"in-out":Ci,"out-in":function(e){return Ci(ki(e))}});to.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,i=t>=0?e.slice(t+1):"in";return n=hl.get(n)||pl,i=fl.get(i)||$e,xi(i(n.apply(null,no.call(arguments,1))))},to.interpolateHcl=Ni,to.interpolateHsl=ji,to.interpolateLab=Oi,to.interpolateRound=Li,to.transform=function(e){var t=ro.createElementNS(to.ns.prefix.svg,"g");return(to.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Ri(n?n.matrix:gl)})(e)},Ri.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var gl={a:1,b:0,c:0,d:1,e:0,f:0};to.interpolateTransform=qi,to.layout={},to.layout.bundle=function(){return function(e){for(var t=[],n=-1,i=e.length;++n<i;)t.push(Vi(e[n]));return t}},to.layout.chord=function(){function e(){var e,c,d,p,h,f={},g=[],m=to.range(a),v=[];for(n=[],i=[],e=0,p=-1;++p<a;){for(c=0,h=-1;++h<a;)c+=r[p][h];g.push(c),v.push(to.range(a)),e+=c}for(o&&m.sort(function(e,t){return o(g[e],g[t])}),s&&v.forEach(function(e,t){e.sort(function(e,n){return s(r[t][e],r[t][n])})}),e=(Lo-u*a)/e,c=0,p=-1;++p<a;){for(d=c,h=-1;++h<a;){var y=m[p],b=v[y][h],w=r[y][b],x=c,k=c+=w*e;f[y+"-"+b]={index:y,subindex:b,startAngle:x,endAngle:k,value:w}}i[y]={index:y,startAngle:d,endAngle:c,value:(c-d)/e},c+=u}for(p=-1;++p<a;)for(h=p-1;++h<a;){var C=f[p+"-"+h],S=f[h+"-"+p];(C.value||S.value)&&n.push(C.value<S.value?{source:S,target:C}:{source:C,target:S})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,i,r,a,o,s,l,c={},u=0;return c.matrix=function(e){return arguments.length?(a=(r=e)&&r.length,n=i=null,c):r},c.padding=function(e){return arguments.length?(u=e,n=i=null,c):u},c.sortGroups=function(e){return arguments.length?(o=e,n=i=null,c):o},c.sortSubgroups=function(e){return arguments.length?(s=e,n=null,c):s},c.sortChords=function(e){return arguments.length?(l=e,n&&t(),c):l},c.chords=function(){return n||e(),n},c.groups=function(){return i||e(),i},c},to.layout.force=function(){function e(e){return function(t,n,i,r){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=r-n,l=a*a+o*o;if(l>s*s/m){if(f>l){var c=t.charge/l;e.px-=a*c,e.py-=o*c}return!0}if(t.point&&l&&f>l){var c=t.pointCharge/l;e.px-=a*c,e.py-=o*c}}return!t.charge}}function t(e){e.px=to.event.x,e.py=to.event.y,s.resume()}var n,i,r,a,o,s={},l=to.dispatch("start","tick","end"),c=[1,1],u=.9,d=ml,p=vl,h=-30,f=yl,g=.1,m=.64,v=[],y=[];return s.tick=function(){if((i*=.99)<.005)return l.end({type:"end",alpha:i=0}),!0;var t,n,s,d,p,f,m,b,w,x=v.length,k=y.length;for(n=0;k>n;++n)s=y[n],d=s.source,p=s.target,b=p.x-d.x,w=p.y-d.y,(f=b*b+w*w)&&(f=i*a[n]*((f=Math.sqrt(f))-r[n])/f,b*=f,w*=f,p.x-=b*(m=d.weight/(p.weight+d.weight)),p.y-=w*m,d.x+=b*(m=1-m),d.y+=w*m);if((m=i*g)&&(b=c[0]/2,w=c[1]/2,n=-1,m))for(;++n<x;)s=v[n],s.x+=(b-s.x)*m,s.y+=(w-s.y)*m;if(h)for(Qi(t=to.geom.quadtree(v),i,o),n=-1;++n<x;)(s=v[n]).fixed||t.visit(e(s));for(n=-1;++n<x;)s=v[n],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*u,s.y-=(s.py-(s.py=s.y))*u);l.tick({type:"tick",alpha:i})},s.nodes=function(e){return arguments.length?(v=e,s):v},s.links=function(e){return arguments.length?(y=e,s):y},s.size=function(e){return arguments.length?(c=e,s):c},s.linkDistance=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(p="function"==typeof e?e:+e,s):p},s.friction=function(e){return arguments.length?(u=+e,s):u},s.charge=function(e){return arguments.length?(h="function"==typeof e?e:+e,s):h},s.chargeDistance=function(e){return arguments.length?(f=e*e,s):Math.sqrt(f)},s.gravity=function(e){return arguments.length?(g=+e,s):g},s.theta=function(e){return arguments.length?(m=e*e,s):Math.sqrt(m)},s.alpha=function(e){return arguments.length?(e=+e,i?i=e>0?e:0:e>0&&(l.start({type:"start",alpha:i=e}),to.timer(s.tick)),s):i},s.start=function(){function e(e,i){if(!n){for(n=new Array(l),s=0;l>s;++s)n[s]=[];for(s=0;c>s;++s){var r=y[s];n[r.source.index].push(r.target),n[r.target.index].push(r.source)}}for(var a,o=n[t],s=-1,c=o.length;++s<c;)if(!isNaN(a=o[s][e]))return a;return Math.random()*i}var t,n,i,l=v.length,u=y.length,f=c[0],g=c[1];for(t=0;l>t;++t)(i=v[t]).index=t,i.weight=0;for(t=0;u>t;++t)i=y[t],"number"==typeof i.source&&(i.source=v[i.source]),"number"==typeof i.target&&(i.target=v[i.target]),++i.source.weight,++i.target.weight;for(t=0;l>t;++t)i=v[t],isNaN(i.x)&&(i.x=e("x",f)),isNaN(i.y)&&(i.y=e("y",g)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(r=[],"function"==typeof d)for(t=0;u>t;++t)r[t]=+d.call(this,y[t],t);else for(t=0;u>t;++t)r[t]=d;if(a=[],"function"==typeof p)for(t=0;u>t;++t)a[t]=+p.call(this,y[t],t);else for(t=0;u>t;++t)a[t]=p;if(o=[],"function"==typeof h)for(t=0;l>t;++t)o[t]=+h.call(this,v[t],t);else for(t=0;l>t;++t)o[t]=h;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=to.behavior.drag().origin($e).on("dragstart.force",Ki).on("drag.force",t).on("dragend.force",Xi)),arguments.length?void this.on("mouseover.force",Yi).on("mouseout.force",Ji).call(n):n},to.rebind(s,l,"on")};var ml=20,vl=1,yl=1/0;to.layout.hierarchy=function(){function e(r){var a,o=[r],s=[];for(r.depth=0;null!=(a=o.pop());)if(s.push(a),(c=n.call(e,a,a.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)o.push(u=c[l]),u.parent=a,u.depth=a.depth+1;i&&(a.value=0),a.children=c}else i&&(a.value=+i.call(e,a,a.depth)||0),delete a.children;return tr(r,function(e){var n,r;t&&(n=e.children)&&n.sort(t),i&&(r=e.parent)&&(r.value+=e.value)}),s}var t=rr,n=nr,i=ir;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(i=t,e):i},e.revalue=function(t){return i&&(er(t,function(e){e.children&&(e.value=0)}),tr(t,function(t){var n;t.children||(t.value=+i.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},to.layout.partition=function(){function e(t,n,i,r){var a=t.children;if(t.x=n,t.y=t.depth*r,t.dx=i,t.dy=r,a&&(o=a.length)){var o,s,l,c=-1;for(i=t.value?i/t.value:0;++c<o;)e(s=a[c],n,l=s.value*i,r),n+=l}}function t(e){var n=e.children,i=0;if(n&&(r=n.length))for(var r,a=-1;++a<r;)i=Math.max(i,t(n[a]));return 1+i}function n(n,a){var o=i.call(this,n,a);return e(o[0],0,r[0],r[1]/t(o[0])),o}var i=to.layout.hierarchy(),r=[1,1];return n.size=function(e){return arguments.length?(r=e,n):r},Zi(n,i)},to.layout.pie=function(){function e(o){var s,l=o.length,c=o.map(function(n,i){return+t.call(e,n,i)}),u=+("function"==typeof i?i.apply(this,arguments):i),d=("function"==typeof r?r.apply(this,arguments):r)-u,p=Math.min(Math.abs(d)/l,+("function"==typeof a?a.apply(this,arguments):a)),h=p*(0>d?-1:1),f=(d-l*h)/to.sum(c),g=to.range(l),m=[];return null!=n&&g.sort(n===bl?function(e,t){return c[t]-c[e]}:function(e,t){return n(o[e],o[t])}),g.forEach(function(e){m[e]={data:o[e],value:s=c[e],startAngle:u,endAngle:u+=s*f+h,padAngle:p}}),m}var t=Number,n=bl,i=0,r=Lo,a=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(i=t,e):i},e.endAngle=function(t){return arguments.length?(r=t,e):r},e.padAngle=function(t){return arguments.length?(a=t,e):a},e};var bl={};to.layout.stack=function(){function e(s,l){if(!(p=s.length))return s;var c=s.map(function(n,i){return t.call(e,n,i)}),u=c.map(function(t){return t.map(function(t,n){return[a.call(e,t,n),o.call(e,t,n)]})}),d=n.call(e,u,l);c=to.permute(c,d),u=to.permute(u,d);var p,h,f,g,m=i.call(e,u,l),v=c[0].length;for(f=0;v>f;++f)for(r.call(e,c[0][f],g=m[f],u[0][f][1]),h=1;p>h;++h)r.call(e,c[h][f],g+=u[h-1][f][1],u[h][f][1]);return s}var t=$e,n=cr,i=ur,r=lr,a=or,o=sr;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:wl.get(t)||cr,e):n},e.offset=function(t){return arguments.length?(i="function"==typeof t?t:xl.get(t)||ur,e):i},e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(r=t,e):r},e};var wl=to.map({"inside-out":function(e){var t,n,i=e.length,r=e.map(dr),a=e.map(pr),o=to.range(i).sort(function(e,t){return r[e]-r[t]}),s=0,l=0,c=[],u=[];for(t=0;i>t;++t)n=o[t],l>s?(s+=a[n],c.push(n)):(l+=a[n],u.push(n));return u.reverse().concat(c)},reverse:function(e){return to.range(e.length).reverse()},"default":cr}),xl=to.map({silhouette:function(e){var t,n,i,r=e.length,a=e[0].length,o=[],s=0,l=[];for(n=0;a>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];i>s&&(s=i),o.push(i)}for(n=0;a>n;++n)l[n]=(s-o[n])/2;return l},wiggle:function(e){var t,n,i,r,a,o,s,l,c,u=e.length,d=e[0],p=d.length,h=[];for(h[0]=l=c=0,n=1;p>n;++n){for(t=0,r=0;u>t;++t)r+=e[t][n][1];for(t=0,a=0,s=d[n][0]-d[n-1][0];u>t;++t){for(i=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);t>i;++i)o+=(e[i][n][1]-e[i][n-1][1])/s;a+=o*e[t][n][1]}h[n]=l-=r?a/r*s:0,c>l&&(c=l)}for(n=0;p>n;++n)h[n]-=c;return h},expand:function(e){var t,n,i,r=e.length,a=e[0].length,o=1/r,s=[];for(n=0;a>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];if(i)for(t=0;r>t;t++)e[t][n][1]/=i;else for(t=0;r>t;t++)e[t][n][1]=o}for(n=0;a>n;++n)s[n]=0;return s},zero:ur});to.layout.histogram=function(){function e(e,a){for(var o,s,l=[],c=e.map(n,this),u=i.call(this,c,a),d=r.call(this,u,c,a),a=-1,p=c.length,h=d.length-1,f=t?1:1/p;++a<h;)o=l[a]=[],o.dx=d[a+1]-(o.x=d[a]),o.y=0;if(h>0)for(a=-1;++a<p;)s=c[a],s>=u[0]&&s<=u[1]&&(o=l[to.bisect(d,s,1,h)-1],o.y+=f,o.push(e[a]));return l}var t=!0,n=Number,i=mr,r=fr;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(i=Te(t),e):i},e.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return gr(e,t)}:Te(t),e):r},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},to.layout.pack=function(){function e(e,a){var o=n.call(this,e,a),s=o[0],l=r[0],c=r[1],u=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,tr(s,function(e){e.r=+u(e.value)}),tr(s,xr),i){var d=i*(t?1:Math.max(2*s.r/l,2*s.r/c))/2;tr(s,function(e){e.r+=d}),tr(s,xr),tr(s,function(e){e.r-=d})}return Sr(s,l/2,c/2,t?1:1/Math.max(2*s.r/l,2*s.r/c)),o}var t,n=to.layout.hierarchy().sort(vr),i=0,r=[1,1];return e.size=function(t){return arguments.length?(r=t,e):r},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(i=+t,e):i},Zi(e,n)},to.layout.tree=function(){function e(e,r){var u=o.call(this,e,r),d=u[0],p=t(d);if(tr(p,n),p.parent.m=-p.z,er(p,i),c)er(d,a);else{var h=d,f=d,g=d;er(d,function(e){e.x<h.x&&(h=e),e.x>f.x&&(f=e),e.depth>g.depth&&(g=e)});var m=s(h,f)/2-h.x,v=l[0]/(f.x+s(f,h)/2+m),y=l[1]/(g.depth||1);er(d,function(e){e.x=(e.x+m)*v,e.y=e.depth*y})}return u}function t(e){for(var t,n={A:null,children:[e]},i=[n];null!=(t=i.pop());)for(var r,a=t.children,o=0,s=a.length;s>o;++o)i.push((a[o]=r={_:a[o],parent:t,children:(r=a[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,i=e.i?n[e.i-1]:null;if(t.length){Pr(e);var a=(t[0].z+t[t.length-1].z)/2;i?(e.z=i.z+s(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+s(e._,i._));e.parent.A=r(e,i,e.parent.A||n[0])}function i(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e,t,n){if(t){for(var i,r=e,a=e,o=t,l=r.parent.children[0],c=r.m,u=a.m,d=o.m,p=l.m;o=Ar(o),r=$r(r),o&&r;)l=$r(l),a=Ar(a),a.a=e,i=o.z+d-r.z-c+s(o._,r._),i>0&&(Er(Ir(o,e,n),e,i),c+=i,u+=i),d+=o.m,c+=r.m,p+=l.m,u+=a.m;o&&!Ar(a)&&(a.t=o,a.m+=d-u),r&&!$r(l)&&(l.t=r,l.m+=c-p,n=e)}return n}function a(e){e.x*=l[0],e.y=e.depth*l[1]}var o=to.layout.hierarchy().sort(null).value(null),s=Tr,l=[1,1],c=null;return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(c=null==(l=t)?a:null,e):c?null:l},e.nodeSize=function(t){return arguments.length?(c=null==(l=t)?null:a,e):c?l:null},Zi(e,o)},to.layout.cluster=function(){function e(e,a){var o,s=t.call(this,e,a),l=s[0],c=0;tr(l,function(e){var t=e.children;t&&t.length?(e.x=Mr(t),e.y=Dr(t)):(e.x=o?c+=n(e,o):0,e.y=0,o=e)});var u=Nr(l),d=jr(l),p=u.x-n(u,d)/2,h=d.x+n(d,u)/2;return tr(l,r?function(e){e.x=(e.x-l.x)*i[0],e.y=(l.y-e.y)*i[1]}:function(e){e.x=(e.x-p)/(h-p)*i[0],e.y=(1-(l.y?e.y/l.y:1))*i[1]}),s}var t=to.layout.hierarchy().sort(null).value(null),n=Tr,i=[1,1],r=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(r=null==(i=t),e):r?null:i},e.nodeSize=function(t){return arguments.length?(r=null!=(i=t),e):r?i:null},Zi(e,t)},to.layout.treemap=function(){function e(e,t){for(var n,i,r=-1,a=e.length;++r<a;)i=(n=e[r]).value*(0>t?0:t),n.area=isNaN(i)||0>=i?0:i}function t(n){var a=n.children;if(a&&a.length){var o,s,l,c=d(n),u=[],p=a.slice(),f=1/0,g="slice"===h?c.dx:"dice"===h?c.dy:"slice-dice"===h?1&n.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(e(p,c.dx*c.dy/n.value),u.area=0;(l=p.length)>0;)u.push(o=p[l-1]),u.area+=o.area,"squarify"!==h||(s=i(u,g))<=f?(p.pop(),f=s):(u.area-=u.pop().area,r(u,g,c,!1),g=Math.min(c.dx,c.dy),u.length=u.area=0,f=1/0);u.length&&(r(u,g,c,!0),u.length=u.area=0),a.forEach(t)}}function n(t){var i=t.children;if(i&&i.length){var a,o=d(t),s=i.slice(),l=[];for(e(s,o.dx*o.dy/t.value),l.area=0;a=s.pop();)l.push(a),l.area+=a.area,null!=a.z&&(r(l,a.z?o.dx:o.dy,o,!s.length),l.length=l.area=0);i.forEach(n)}}function i(e,t){for(var n,i=e.area,r=0,a=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(a>n&&(a=n),n>r&&(r=n));return i*=i,t*=t,i?Math.max(t*r*f/i,i/(t*a*f)):1/0}function r(e,t,n,i){var r,a=-1,o=e.length,s=n.x,c=n.y,u=t?l(e.area/t):0;if(t==n.dx){for((i||u>n.dy)&&(u=n.dy);++a<o;)r=e[a],r.x=s,r.y=c,r.dy=u,s+=r.dx=Math.min(n.x+n.dx-s,u?l(r.area/u):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=n.dx);++a<o;)r=e[a],r.x=s,r.y=c,r.dx=u,c+=r.dy=Math.min(n.y+n.dy-c,u?l(r.area/u):0);r.z=!1,r.dy+=n.y+n.dy-c,n.x+=u,n.dx-=u}}function a(i){var r=o||s(i),a=r[0];return a.x=0,a.y=0,a.dx=c[0],a.dy=c[1],o&&s.revalue(a),e([a],a.dx*a.dy/a.value),(o?n:t)(a),p&&(o=r),r}var o,s=to.layout.hierarchy(),l=Math.round,c=[1,1],u=null,d=Or,p=!1,h="squarify",f=.5*(1+Math.sqrt(5));return a.size=function(e){return arguments.length?(c=e,a):c},a.padding=function(e){function t(t){var n=e.call(a,t,t.depth);return null==n?Or(t):Lr(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Lr(t,e)}if(!arguments.length)return u;var i;return d=null==(u=e)?Or:"function"==(i=typeof e)?t:"number"===i?(e=[e,e,e,e],n):n,a},a.round=function(e){return arguments.length?(l=e?Math.round:Number,a):l!=Number},a.sticky=function(e){return arguments.length?(p=e,o=null,a):p},a.ratio=function(e){return arguments.length?(f=e,a):f},a.mode=function(e){return arguments.length?(h=e+"",a):h},Zi(a,s)},to.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return e+t*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=to.random.normal.apply(to,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=to.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},to.scale={};var kl={floor:$e,ceil:$e};to.scale.linear=function(){return Hr([0,1],[0,1],bi,!1)};var Cl={s:1,g:1,p:1,r:1,e:1};to.scale.log=function(){return Qr(to.scale.linear().domain([0,1]),10,!0,[1,10])};var Sl=to.format(".0e"),_l={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};to.scale.pow=function(){return Zr(to.scale.linear(),1,[0,1])},to.scale.sqrt=function(){return to.scale.pow().exponent(.5)},to.scale.ordinal=function(){return ta([],{t:"range",a:[[]]})},to.scale.category10=function(){return to.scale.ordinal().range(Tl)},to.scale.category20=function(){return to.scale.ordinal().range($l)},to.scale.category20b=function(){return to.scale.ordinal().range(Al)},to.scale.category20c=function(){return to.scale.ordinal().range(El)};var Tl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(be),$l=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(be),Al=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(be),El=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(be);to.scale.quantile=function(){return na([],[])},to.scale.quantize=function(){return ia(0,1,[0,1])},to.scale.threshold=function(){return ra([.5],[0,1])},to.scale.identity=function(){return aa([0,1])},to.svg={},to.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),c=Math.max(0,+i.apply(this,arguments)),u=o.apply(this,arguments)-Fo,d=s.apply(this,arguments)-Fo,p=Math.abs(d-u),h=u>d?0:1;if(e>c&&(f=c,c=e,e=f),p>=Ro)return t(c,h)+(e?t(e,1-h):"")+"Z";var f,g,m,v,y,b,w,x,k,C,S,_,T=0,$=0,A=[];if((v=(+l.apply(this,arguments)||0)/2)&&(m=a===Pl?Math.sqrt(e*e+c*c):+a.apply(this,arguments),h||($*=-1),c&&($=te(m/c*Math.sin(v))),e&&(T=te(m/e*Math.sin(v)))),c){y=c*Math.cos(u+$),b=c*Math.sin(u+$),w=c*Math.cos(d-$),x=c*Math.sin(d-$);var E=Math.abs(d-u-2*$)<=Oo?0:1;if($&&pa(y,b,w,x)===h^E){var P=(u+d)/2;y=c*Math.cos(P),b=c*Math.sin(P),w=x=null}}else y=b=0;if(e){k=e*Math.cos(d-T),C=e*Math.sin(d-T),S=e*Math.cos(u+T),_=e*Math.sin(u+T);var I=Math.abs(u-d+2*T)<=Oo?0:1;if(T&&pa(k,C,S,_)===1-h^I){var D=(u+d)/2;k=e*Math.cos(D),C=e*Math.sin(D),S=_=null}}else k=C=0;if((f=Math.min(Math.abs(c-e)/2,+r.apply(this,arguments)))>.001){g=c>e^h?0:1;var M=null==S?[k,C]:null==w?[y,b]:Nn([y,b],[S,_],[w,x],[k,C]),N=y-M[0],j=b-M[1],O=w-M[0],L=x-M[1],R=1/Math.sin(Math.acos((N*O+j*L)/(Math.sqrt(N*N+j*j)*Math.sqrt(O*O+L*L)))/2),F=Math.sqrt(M[0]*M[0]+M[1]*M[1]);if(null!=w){var U=Math.min(f,(c-F)/(R+1)),z=ha(null==S?[k,C]:[S,_],[y,b],c,U,h),q=ha([w,x],[k,C],c,U,h);f===U?A.push("M",z[0],"A",U,",",U," 0 0,",g," ",z[1],"A",c,",",c," 0 ",1-h^pa(z[1][0],z[1][1],q[1][0],q[1][1]),",",h," ",q[1],"A",U,",",U," 0 0,",g," ",q[0]):A.push("M",z[0],"A",U,",",U," 0 1,",g," ",q[0])}else A.push("M",y,",",b);if(null!=S){var B=Math.min(f,(e-F)/(R-1)),H=ha([y,b],[S,_],e,-B,h),V=ha([k,C],null==w?[y,b]:[w,x],e,-B,h);f===B?A.push("L",V[0],"A",B,",",B," 0 0,",g," ",V[1],"A",e,",",e," 0 ",h^pa(V[1][0],V[1][1],H[1][0],H[1][1]),",",1-h," ",H[1],"A",B,",",B," 0 0,",g," ",H[0]):A.push("L",V[0],"A",B,",",B," 0 0,",g," ",H[0])}else A.push("L",k,",",C)}else A.push("M",y,",",b),null!=w&&A.push("A",c,",",c," 0 ",E,",",h," ",w,",",x),A.push("L",k,",",C),null!=S&&A.push("A",e,",",e," 0 ",I,",",1-h," ",S,",",_);return A.push("Z"),A.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=sa,i=la,r=oa,a=Pl,o=ca,s=ua,l=da;return e.innerRadius=function(t){return arguments.length?(n=Te(t),e):n},e.outerRadius=function(t){return arguments.length?(i=Te(t),e):i},e.cornerRadius=function(t){return arguments.length?(r=Te(t),e):r},e.padRadius=function(t){return arguments.length?(a=t==Pl?Pl:Te(t),e):a},e.startAngle=function(t){return arguments.length?(o=Te(t),e):o},e.endAngle=function(t){return arguments.length?(s=Te(t),e):s},e.padAngle=function(t){return arguments.length?(l=Te(t),e):l},e.centroid=function(){var e=(+n.apply(this,arguments)+ +i.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-Fo;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Pl="auto";to.svg.line=function(){return fa($e)};var Il=to.map({linear:ga,"linear-closed":ma,step:va,"step-before":ya,"step-after":ba,basis:_a,"basis-open":Ta,"basis-closed":$a,bundle:Aa,cardinal:ka,"cardinal-open":wa,"cardinal-closed":xa,monotone:Na});Il.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Dl=[0,2/3,1/3,0],Ml=[0,1/3,2/3,0],Nl=[0,1/6,2/3,1/6];to.svg.line.radial=function(){var e=fa(ja);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},ya.reverse=ba,ba.reverse=ya,to.svg.area=function(){return Oa($e)},to.svg.area.radial=function(){var e=Oa(ja);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},to.svg.chord=function(){function e(e,s){var l=t(this,a,e,s),c=t(this,o,e,s);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,c)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,c.r,c.p0)+i(c.r,c.p1,c.a1-c.a0)+r(c.r,c.p1,l.r,l.p0))+"Z"}function t(e,t,n,i){var r=t.call(e,n,i),a=s.call(e,r,i),o=l.call(e,r,i)-Fo,u=c.call(e,r,i)-Fo;return{r:a,a0:o,a1:u,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(u),a*Math.sin(u)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function i(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Oo)+",1 "+t}function r(e,t,n,i){return"Q 0,0 "+i}var a=bn,o=wn,s=La,l=ca,c=ua;return e.radius=function(t){return arguments.length?(s=Te(t),e):s},e.source=function(t){return arguments.length?(a=Te(t),e):a},e.target=function(t){return arguments.length?(o=Te(t),e):o},e.startAngle=function(t){return arguments.length?(l=Te(t),e):l},e.endAngle=function(t){return arguments.length?(c=Te(t),e):c},e},to.svg.diagonal=function(){function e(e,r){var a=t.call(this,e,r),o=n.call(this,e,r),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=bn,n=wn,i=Ra;return e.source=function(n){return arguments.length?(t=Te(n),e):t},e.target=function(t){return arguments.length?(n=Te(t),e):n},e.projection=function(t){return arguments.length?(i=t,e):i},e},to.svg.diagonal.radial=function(){var e=to.svg.diagonal(),t=Ra,n=e.projection;return e.projection=function(e){return arguments.length?n(Fa(t=e)):t},e},to.svg.symbol=function(){function e(e,i){return(jl.get(t.call(this,e,i))||qa)(n.call(this,e,i))}var t=za,n=Ua;return e.type=function(n){return arguments.length?(t=Te(n),e):t},e.size=function(t){return arguments.length?(n=Te(t),e):n},e};var jl=to.map({circle:qa,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Fl)),n=t*Fl;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Rl),n=t*Rl/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Rl),n=t*Rl/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});to.svg.symbolTypes=jl.keys();var Ol,Ll,Rl=Math.sqrt(3),Fl=Math.tan(30*Uo),Ul=[],zl=0;Ul.call=To.call,Ul.empty=To.empty,Ul.node=To.node,Ul.size=To.size,to.transition=function(e){return arguments.length?Ol?e.transition():e:Eo.transition()},to.transition.prototype=Ul,Ul.select=function(e){var t,n,i,r=this.id,a=this.namespace,o=[];e=_(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(i=c[u])&&(n=e.call(i,i.__data__,u,s))?("__data__"in i&&(n.__data__=i.__data__),Ga(n,u,a,r,i[a][r]),t.push(n)):t.push(null)}return Ba(o,a,r)},Ul.selectAll=function(e){var t,n,i,r,a,o=this.id,s=this.namespace,l=[];e=T(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],p=-1,h=d.length;++p<h;)if(i=d[p]){a=i[s][o],n=e.call(i,i.__data__,p,c),l.push(t=[]);for(var f=-1,g=n.length;++f<g;)(r=n[f])&&Ga(r,f,s,o,a),t.push(r)}return Ba(l,s,o)},Ul.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=R(e));for(var a=0,o=this.length;o>a;a++){r.push(t=[]);for(var n=this[a],s=0,l=n.length;l>s;s++)(i=n[s])&&e.call(i,i.__data__,s,a)&&t.push(i)}return Ba(r,this.namespace,this.id)},Ul.tween=function(e,t){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(e):U(this,null==t?function(t){t[i][n].tween.remove(e)}:function(r){r[i][n].tween.set(e,t)})},Ul.attr=function(e,t){function n(){this.removeAttribute(s)}function i(){this.removeAttributeNS(s.space,s.local)}function r(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=o(n,e),function(e){this.setAttribute(s,t(e))})})}function a(e){return null==e?i:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?qi:bi,s=to.ns.qualify(e);return Ha(this,"attr."+e,t,s.local?a:r)},Ul.attrTween=function(e,t){function n(e,n){var i=t.call(this,e,n,this.getAttribute(r));return i&&function(e){this.setAttribute(r,i(e))}}function i(e,n){var i=t.call(this,e,n,this.getAttributeNS(r.space,r.local));return i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}var r=to.ns.qualify(e);return this.tween("attr."+e,r.local?i:n)},Ul.style=function(e,t,n){function i(){this.style.removeProperty(e)}function r(t){return null==t?i:(t+="",function(){var i,r=oo.getComputedStyle(this,null).getPropertyValue(e);return r!==t&&(i=bi(r,t),function(t){this.style.setProperty(e,i(t),n)})})}var a=arguments.length;if(3>a){if("string"!=typeof e){2>a&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Ha(this,"style."+e,t,r)},Ul.styleTween=function(e,t,n){function i(i,r){var a=t.call(this,i,r,oo.getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,i)},Ul.text=function(e){return Ha(this,"text",e,Va)},Ul.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Ul.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=to.ease.apply(to,arguments)),U(this,function(i){i[n][t].ease=e}))},Ul.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:U(this,"function"==typeof e?function(i,r,a){i[n][t].delay=+e.call(i,i.__data__,r,a)}:(e=+e,function(i){i[n][t].delay=e}))},Ul.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:U(this,"function"==typeof e?function(i,r,a){i[n][t].duration=Math.max(1,e.call(i,i.__data__,r,a))}:(e=Math.max(1,e),function(i){i[n][t].duration=e}))},Ul.each=function(e,t){var n=this.id,i=this.namespace;if(arguments.length<2){var r=Ll,a=Ol;Ol=n,U(this,function(t,r,a){Ll=t[i][n],e.call(t,t.__data__,r,a)}),Ll=r,Ol=a}else U(this,function(r){var a=r[i][n];(a.event||(a.event=to.dispatch("start","end","interrupt"))).on(e,t)});return this},Ul.transition=function(){for(var e,t,n,i,r=this.id,a=++zl,o=this.namespace,s=[],l=0,c=this.length;c>l;l++){s.push(e=[]);for(var t=this[l],u=0,d=t.length;d>u;u++)(n=t[u])&&(i=n[o][r],Ga(n,u,o,a,{time:i.time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration})),e.push(n)}return Ba(s,o,a)},to.svg.axis=function(){function e(e){e.each(function(){var e,c=to.select(this),u=this.__chart__||n,d=this.__chart__=n.copy(),p=null==l?d.ticks?d.ticks.apply(d,s):d.domain():l,h=null==t?d.tickFormat?d.tickFormat.apply(d,s):$e:t,f=c.selectAll(".tick").data(p,d),g=f.enter().insert("g",".domain").attr("class","tick").style("opacity",No),m=to.transition(f.exit()).style("opacity",No).remove(),v=to.transition(f.order()).style("opacity",1),y=Math.max(r,0)+o,b=Fr(d),w=c.selectAll(".domain").data([0]),x=(w.enter().append("path").attr("class","domain"),to.transition(w));g.append("line"),g.append("text");var k,C,S,_,T=g.select("line"),$=v.select("line"),A=f.select("text").text(h),E=g.select("text"),P=v.select("text"),I="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(e=Ka,k="x",S="y",C="x2",_="y2",A.attr("dy",0>I?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+b[0]+","+I*a+"V0H"+b[1]+"V"+I*a)):(e=Xa,k="y",S="x",C="y2",_="x2",A.attr("dy",".32em").style("text-anchor",0>I?"end":"start"),x.attr("d","M"+I*a+","+b[0]+"H0V"+b[1]+"H"+I*a)),T.attr(_,I*r),E.attr(S,I*y),$.attr(C,0).attr(_,I*r),P.attr(k,0).attr(S,I*y),d.rangeBand){var D=d,M=D.rangeBand()/2;u=d=function(e){return D(e)+M}}else u.rangeBand?u=d:m.call(e,d,u);g.call(e,u,d),v.call(e,d,d)})}var t,n=to.scale.linear(),i=ql,r=6,a=6,o=3,s=[10],l=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(i=t in Bl?t+"":ql,e):i},e.ticks=function(){return arguments.length?(s=arguments,e):s},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(r=+t,a=+arguments[n-1],e):r},e.innerTickSize=function(t){return arguments.length?(r=+t,e):r},e.outerTickSize=function(t){return arguments.length?(a=+t,e):a},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var ql="bottom",Bl={top:1,right:1,bottom:1,left:1};to.svg.brush=function(){function e(a){a.each(function(){var a=to.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),o=a.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),a.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=a.selectAll(".resize").data(f,$e);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Hl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var u,d=to.transition(a),p=to.transition(o);l&&(u=Fr(l),p.attr("x",u[0]).attr("width",u[1]-u[0]),n(d)),c&&(u=Fr(c),p.attr("y",u[0]).attr("height",u[1]-u[0]),i(d)),t(d)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+u[+/e$/.test(e)]+","+d[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",u[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",u[1]-u[0])}function i(e){e.select(".extent").attr("y",d[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function r(){function r(){32==to.event.keyCode&&(A||(y=null,P[0]-=u[1],P[1]-=d[1],A=2),x())}function f(){32==to.event.keyCode&&2==A&&(P[0]+=u[1],P[1]+=d[1],A=0,x())}function g(){var e=to.mouse(w),r=!1;b&&(e[0]+=b[0],e[1]+=b[1]),A||(to.event.altKey?(y||(y=[(u[0]+u[1])/2,(d[0]+d[1])/2]),P[0]=u[+(e[0]<y[0])],P[1]=d[+(e[1]<y[1])]):y=null),T&&m(e,l,0)&&(n(S),r=!0),$&&m(e,c,1)&&(i(S),r=!0),r&&(t(S),C({type:"brush",mode:A?"move":"resize"}))}function m(e,t,n){var i,r,s=Fr(t),l=s[0],c=s[1],f=P[n],g=n?d:u,m=g[1]-g[0];return A&&(l-=f,c-=m+f),i=(n?h:p)?Math.max(l,Math.min(c,e[n])):e[n],A?r=(i+=f)+m:(y&&(f=Math.max(l,Math.min(c,2*y[n]-i))),i>f?(r=i,i=f):r=f),g[0]!=i||g[1]!=r?(n?o=null:a=null,g[0]=i,g[1]=r,!0):void 0}function v(){g(),S.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),to.select("body").style("cursor",null),I.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),C({type:"brushend"})}var y,b,w=this,k=to.select(to.event.target),C=s.of(w,arguments),S=to.select(w),_=k.datum(),T=!/^(n|s)$/.test(_)&&l,$=!/^(e|w)$/.test(_)&&c,A=k.classed("extent"),E=G(),P=to.mouse(w),I=to.select(oo).on("keydown.brush",r).on("keyup.brush",f);

if(to.event.changedTouches?I.on("touchmove.brush",g).on("touchend.brush",v):I.on("mousemove.brush",g).on("mouseup.brush",v),S.interrupt().selectAll("*").interrupt(),A)P[0]=u[0]-P[0],P[1]=d[0]-P[1];else if(_){var D=+/w$/.test(_),M=+/^n/.test(_);b=[u[1-D]-P[0],d[1-M]-P[1]],P[0]=u[D],P[1]=d[M]}else to.event.altKey&&(y=P.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),to.select("body").style("cursor",k.style("cursor")),C({type:"brushstart"}),g()}var a,o,s=C(e,"brushstart","brush","brushend"),l=null,c=null,u=[0,0],d=[0,0],p=!0,h=!0,f=Vl[0];return e.event=function(e){e.each(function(){var e=s.of(this,arguments),t={x:u,y:d,i:a,j:o},n=this.__chart__||t;this.__chart__=t,Ol?to.select(this).transition().each("start.brush",function(){a=n.i,o=n.j,u=n.x,d=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=wi(u,t.x),i=wi(d,t.y);return a=o=null,function(r){u=t.x=n(r),d=t.y=i(r),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,o=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(l=t,f=Vl[!l<<1|!c],e):l},e.y=function(t){return arguments.length?(c=t,f=Vl[!l<<1|!c],e):c},e.clamp=function(t){return arguments.length?(l&&c?(p=!!t[0],h=!!t[1]):l?p=!!t:c&&(h=!!t),e):l&&c?[p,h]:l?p:c?h:null},e.extent=function(t){var n,i,r,s,p;return arguments.length?(l&&(n=t[0],i=t[1],c&&(n=n[0],i=i[0]),a=[n,i],l.invert&&(n=l(n),i=l(i)),n>i&&(p=n,n=i,i=p),(n!=u[0]||i!=u[1])&&(u=[n,i])),c&&(r=t[0],s=t[1],l&&(r=r[1],s=s[1]),o=[r,s],c.invert&&(r=c(r),s=c(s)),r>s&&(p=r,r=s,s=p),(r!=d[0]||s!=d[1])&&(d=[r,s])),e):(l&&(a?(n=a[0],i=a[1]):(n=u[0],i=u[1],l.invert&&(n=l.invert(n),i=l.invert(i)),n>i&&(p=n,n=i,i=p))),c&&(o?(r=o[0],s=o[1]):(r=d[0],s=d[1],c.invert&&(r=c.invert(r),s=c.invert(s)),r>s&&(p=r,r=s,s=p))),l&&c?[[n,r],[i,s]]:l?[n,i]:c&&[r,s])},e.clear=function(){return e.empty()||(u=[0,0],d=[0,0],a=o=null),e},e.empty=function(){return!!l&&u[0]==u[1]||!!c&&d[0]==d[1]},to.rebind(e,s,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Wl=ps.format=ys.timeFormat,Gl=Wl.utc,Kl=Gl("%Y-%m-%dT%H:%M:%S.%LZ");Wl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ya:Kl,Ya.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Ya.toString=Kl.toString,ps.second=Ue(function(e){return new hs(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),ps.seconds=ps.second.range,ps.seconds.utc=ps.second.utc.range,ps.minute=Ue(function(e){return new hs(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),ps.minutes=ps.minute.range,ps.minutes.utc=ps.minute.utc.range,ps.hour=Ue(function(e){var t=e.getTimezoneOffset()/60;return new hs(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),ps.hours=ps.hour.range,ps.hours.utc=ps.hour.utc.range,ps.month=Ue(function(e){return e=ps.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),ps.months=ps.month.range,ps.months.utc=ps.month.utc.range;var Xl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Yl=[[ps.second,1],[ps.second,5],[ps.second,15],[ps.second,30],[ps.minute,1],[ps.minute,5],[ps.minute,15],[ps.minute,30],[ps.hour,1],[ps.hour,3],[ps.hour,6],[ps.hour,12],[ps.day,1],[ps.day,2],[ps.week,1],[ps.month,1],[ps.month,3],[ps.year,1]],Jl=Wl.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Et]]),Ql={range:function(e,t,n){return to.range(Math.ceil(e/n)*n,+t,n).map(Qa)},floor:$e,ceil:$e};Yl.year=ps.year,ps.scale=function(){return Ja(to.scale.linear(),Yl,Jl)};var Zl=Yl.map(function(e){return[e[0].utc,e[1]]}),ec=Gl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Et]]);Zl.year=ps.year.utc,ps.scale.utc=function(){return Ja(to.scale.linear(),Zl,ec)},to.text=Ae(function(e){return e.responseText}),to.json=function(e,t){return Ee(e,"application/json",Za,t)},to.html=function(e,t){return Ee(e,"text/html",eo,t)},to.xml=Ae(function(e){return e.responseXML}),"function"==typeof define&&define.amd?define(to):"object"==typeof module&&module.exports&&(module.exports=to),this.d3=to}(),function(e){"use strict";function t(e){this.owner=e}function n(e,t){if(Object.create)t.prototype=Object.create(e.prototype);else{var n=function(){};n.prototype=e.prototype,t.prototype=new n}return t.prototype.constructor=t,t}function i(e){var t=this.internal=new r(this);t.loadConfig(e),t.init(),function n(e,t,i){Object.keys(e).forEach(function(r){t[r]=e[r].bind(i),Object.keys(e[r]).length>0&&n(e[r],t[r],i)})}(s,this,this)}function r(t){var n=this;n.d3=e.d3?e.d3:"undefined"!=typeof require?require("d3"):void 0,n.api=t,n.config=n.getDefaultConfig(),n.data={},n.cache={},n.axes={}}function a(e){t.call(this,e)}function o(e,t){function n(e,t){e.attr("transform",function(e){return"translate("+Math.ceil(t(e)+w)+", 0)"})}function i(e,t){e.attr("transform",function(e){return"translate(0,"+Math.ceil(t(e))+")"})}function r(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function a(e){var t,n,i=[];if(e.ticks)return e.ticks.apply(e,h);for(n=e.domain(),t=Math.ceil(n[0]);t<n[1];t++)i.push(t);return i.length>0&&i[0]>0&&i.unshift(i[0]-(i[1]-i[0])),i}function o(){var e,n=g.copy();return t.isCategory&&(e=g.domain(),n.domain([e[0],e[1]-1])),n}function s(e){var t=p?p(e):e;return"undefined"!=typeof t?t:""}function l(e){if(_)return _;var t={h:11.5,w:5.5};return e.select("text").text(s).each(function(e){var n=this.getBoundingClientRect(),i=s(e),r=n.height,a=i?n.width/i.length:void 0;r&&a&&(t.h=r,t.w=a)}).text(""),_=t,t}function c(n){return t.withoutTransition?n:e.transition(n)}function u(p){p.each(function(){function p(e,n){function i(e,t){a=void 0;for(var s=1;s<t.length;s++)if(" "===t.charAt(s)&&(a=s),r=t.substr(0,s+1),o=W.w*r.length,o>n)return i(e.concat(t.substr(0,a?a:s)),t.slice(a?a+1:s));return e.concat(t)}var r,a,o,l=s(e),c=[];return"[object Array]"===Object.prototype.toString.call(l)?l:((!n||0>=n)&&(n=X?95:t.isCategory?Math.ceil(I(D[1])-I(D[0]))-12:110),i(c,l+""))}function h(e,t){var n=W.h;return 0===t&&(n="left"===m||"right"===m?-((G[e.index]-1)*(W.h/2)-3):".71em"),n}function x(e){var t=g(e)+(f?0:w);return L[0]<t&&t<L[1]?v:0}function k(e){return e?e>0?"start":"end":"middle"}function C(e){return e?"rotate("+e+")":""}function S(e){return e?8*Math.sin(Math.PI*(e/180)):0}function _(e){return e?11.5-2.5*(e/15)*(e>0?1:-1):K}var T,$,A,E=u.g=e.select(this),P=this.__chart__||g,I=this.__chart__=o(),D=b?b:a(I),M=E.selectAll(".tick").data(D,I),N=M.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),j=M.exit().remove(),O=c(M).style("opacity",1),L=g.rangeExtent?g.rangeExtent():r(g.range()),R=E.selectAll(".domain").data([0]),F=(R.enter().append("path").attr("class","domain"),c(R));N.append("line"),N.append("text");var U=N.select("line"),z=O.select("line"),q=N.select("text"),B=O.select("text");t.isCategory?(w=Math.ceil((I(1)-I(0))/2),$=f?0:w,A=f?w:0):w=$=0;var H,V,W=l(E.select(".tick")),G=[],K=Math.max(v,0)+y,X="left"===m||"right"===m;H=M.select("text"),V=H.selectAll("tspan").data(function(e,n){var i=t.tickMultiline?p(e,t.tickWidth):[].concat(s(e));return G[n]=i.length,i.map(function(e){return{index:n,splitted:e}})}),V.enter().append("tspan"),V.exit().remove(),V.text(function(e){return e.splitted});var Y=t.tickTextRotate;switch(m){case"bottom":T=n,U.attr("y2",v),q.attr("y",K),z.attr("x1",$).attr("x2",$).attr("y2",x),B.attr("x",0).attr("y",_(Y)).style("text-anchor",k(Y)).attr("transform",C(Y)),V.attr("x",0).attr("dy",h).attr("dx",S(Y)),F.attr("d","M"+L[0]+","+d+"V0H"+L[1]+"V"+d);break;case"top":T=n,U.attr("y2",-v),q.attr("y",-K),z.attr("x2",0).attr("y2",-v),B.attr("x",0).attr("y",-K),H.style("text-anchor","middle"),V.attr("x",0).attr("dy","0em"),F.attr("d","M"+L[0]+","+-d+"V0H"+L[1]+"V"+-d);break;case"left":T=i,U.attr("x2",-v),q.attr("x",-K),z.attr("x2",-v).attr("y1",A).attr("y2",A),B.attr("x",-K).attr("y",w),H.style("text-anchor","end"),V.attr("x",-K).attr("dy",h),F.attr("d","M"+-d+","+L[0]+"H0V"+L[1]+"H"+-d);break;case"right":T=i,U.attr("x2",v),q.attr("x",K),z.attr("x2",v).attr("y2",0),B.attr("x",K).attr("y",0),H.style("text-anchor","start"),V.attr("x",K).attr("dy",h),F.attr("d","M"+d+","+L[0]+"H0V"+L[1]+"H"+d)}if(I.rangeBand){var J=I,Q=J.rangeBand()/2;P=I=function(e){return J(e)+Q}}else P.rangeBand?P=I:j.call(T,I);N.call(T,P),O.call(T,I)})}var d,p,h,f,g=e.scale.linear(),m="bottom",v=6,y=3,b=null,w=0,x=!0;return t=t||{},d=t.withOuterTick?6:0,u.scale=function(e){return arguments.length?(g=e,u):g},u.orient=function(e){return arguments.length?(m=e in{top:1,right:1,bottom:1,left:1}?e+"":"bottom",u):m},u.tickFormat=function(e){return arguments.length?(p=e,u):p},u.tickCentered=function(e){return arguments.length?(f=e,u):f},u.tickOffset=function(){return w},u.tickInterval=function(){var e,n;return t.isCategory?e=2*w:(n=u.g.select("path.domain").node().getTotalLength()-2*d,e=n/u.g.selectAll("line").size()),e===1/0?0:e},u.ticks=function(){return arguments.length?(h=arguments,u):h},u.tickCulling=function(e){return arguments.length?(x=e,u):x},u.tickValues=function(e){if("function"==typeof e)b=function(){return e(g.domain())};else{if(!arguments.length)return b;b=e}return u},u}var s,l,c,u={version:"0.4.10"};u.generate=function(e){return new i(e)},u.chart={fn:i.prototype,internal:{fn:r.prototype,axis:{fn:a.prototype}}},s=u.chart.fn,l=u.chart.internal.fn,c=u.chart.internal.axis.fn,l.init=function(){var e=this,t=e.config;if(e.initParams(),t.data_url)e.convertUrlToData(t.data_url,t.data_mimeType,t.data_keys,e.initWithData);else if(t.data_json)e.initWithData(e.convertJsonToData(t.data_json,t.data_keys));else if(t.data_rows)e.initWithData(e.convertRowsToData(t.data_rows));else{if(!t.data_columns)throw Error("url or json or rows or columns is required.");e.initWithData(e.convertColumnsToData(t.data_columns))}},l.initParams=function(){var e=this,t=e.d3,n=e.config;e.clipId="c3-"+ +new Date+"-clip",e.clipIdForXAxis=e.clipId+"-xaxis",e.clipIdForYAxis=e.clipId+"-yaxis",e.clipIdForGrid=e.clipId+"-grid",e.clipIdForSubchart=e.clipId+"-subchart",e.clipPath=e.getClipPath(e.clipId),e.clipPathForXAxis=e.getClipPath(e.clipIdForXAxis),e.clipPathForYAxis=e.getClipPath(e.clipIdForYAxis),e.clipPathForGrid=e.getClipPath(e.clipIdForGrid),e.clipPathForSubchart=e.getClipPath(e.clipIdForSubchart),e.dragStart=null,e.dragging=!1,e.flowing=!1,e.cancelClick=!1,e.mouseover=!1,e.transiting=!1,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.dataTimeFormat=n.data_xLocaltime?t.time.format:t.time.format.utc,e.axisTimeFormat=n.axis_x_localtime?t.time.format:t.time.format.utc,e.defaultAxisTimeFormat=e.axisTimeFormat.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%-m/%-d",function(e){return e.getDay()&&1!==e.getDate()}],["%-m/%-d",function(e){return 1!==e.getDate()}],["%-m/%-d",function(e){return e.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),e.hiddenTargetIds=[],e.hiddenLegendIds=[],e.focusedTargetIds=[],e.defocusedTargetIds=[],e.xOrient=n.axis_rotated?"left":"bottom",e.yOrient=n.axis_rotated?n.axis_y_inner?"top":"bottom":n.axis_y_inner?"right":"left",e.y2Orient=n.axis_rotated?n.axis_y2_inner?"bottom":"top":n.axis_y2_inner?"left":"right",e.subXOrient=n.axis_rotated?"left":"bottom",e.isLegendRight="right"===n.legend_position,e.isLegendInset="inset"===n.legend_position,e.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor,e.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor,e.legendStep=0,e.legendItemWidth=0,e.legendItemHeight=0,e.currentMaxTickWidths={x:0,y:0,y2:0},e.rotated_padding_left=30,e.rotated_padding_right=n.axis_rotated&&!n.axis_x_show?0:30,e.rotated_padding_top=5,e.withoutFadeIn={},e.intervalForObserveInserted=void 0,e.axes.subx=t.selectAll([])},l.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},l.initWithData=function(t){var n,i,r=this,o=r.d3,s=r.config,l=!0;r.axis=new a(r),r.initPie&&r.initPie(),r.initBrush&&r.initBrush(),r.initZoom&&r.initZoom(),r.selectChart=s.bindto?"function"==typeof s.bindto.node?s.bindto:o.select(s.bindto):o.selectAll([]),r.selectChart.empty()&&(r.selectChart=o.select(document.createElement("div")).style("opacity",0),r.observeInserted(r.selectChart),l=!1),r.selectChart.html("").classed("c3",!0),r.data.xs={},r.data.targets=r.convertDataToTargets(t),s.data_filter&&(r.data.targets=r.data.targets.filter(s.data_filter)),s.data_hide&&r.addHiddenTargetIds(s.data_hide===!0?r.mapToIds(r.data.targets):s.data_hide),s.legend_hide&&r.addHiddenLegendIds(s.legend_hide===!0?r.mapToIds(r.data.targets):s.legend_hide),r.hasType("gauge")&&(s.legend_show=!1),r.updateSizes(),r.updateScales(),r.x.domain(o.extent(r.getXDomain(r.data.targets))),r.y.domain(r.getYDomain(r.data.targets,"y")),r.y2.domain(r.getYDomain(r.data.targets,"y2")),r.subX.domain(r.x.domain()),r.subY.domain(r.y.domain()),r.subY2.domain(r.y2.domain()),r.orgXDomain=r.x.domain(),r.brush&&r.brush.scale(r.subX),s.zoom_enabled&&r.zoom.scale(r.x),r.svg=r.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return s.onmouseover.call(r)}).on("mouseleave",function(){return s.onmouseout.call(r)}),n=r.svg.append("defs"),r.clipChart=r.appendClip(n,r.clipId),r.clipXAxis=r.appendClip(n,r.clipIdForXAxis),r.clipYAxis=r.appendClip(n,r.clipIdForYAxis),r.clipGrid=r.appendClip(n,r.clipIdForGrid),r.clipSubchart=r.appendClip(n,r.clipIdForSubchart),r.updateSvgSize(),i=r.main=r.svg.append("g").attr("transform",r.getTranslate("main")),r.initSubchart&&r.initSubchart(),r.initTooltip&&r.initTooltip(),r.initLegend&&r.initLegend(),i.append("text").attr("class",d.text+" "+d.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),r.initRegion(),r.initGrid(),i.append("g").attr("clip-path",r.clipPath).attr("class",d.chart),s.grid_lines_front&&r.initGridLines(),r.initEventRect(),r.initChartElements(),i.insert("rect",s.zoom_privileged?null:"g."+d.regions).attr("class",d.zoomRect).attr("width",r.width).attr("height",r.height).style("opacity",0).on("dblclick.zoom",null),s.axis_x_extent&&r.brush.extent(r.getDefaultExtent()),r.axis.init(),r.updateTargets(r.data.targets),l&&(r.updateDimension(),r.config.oninit.call(r),r.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),null==e.onresize&&(e.onresize=r.generateResize()),e.onresize.add&&(e.onresize.add(function(){s.onresize.call(r)}),e.onresize.add(function(){r.api.flush()}),e.onresize.add(function(){s.onresized.call(r)})),r.api.element=r.selectChart.node()},l.smoothLines=function(e,t){var n=this;"grid"===t&&e.each(function(){var e=n.d3.select(this),t=e.attr("x1"),i=e.attr("x2"),r=e.attr("y1"),a=e.attr("y2");e.attr({x1:Math.ceil(t),x2:Math.ceil(i),y1:Math.ceil(r),y2:Math.ceil(a)})})},l.updateSizes=function(){var e=this,t=e.config,n=e.legend?e.getLegendHeight():0,i=e.legend?e.getLegendWidth():0,r=e.isLegendRight||e.isLegendInset?0:n,a=e.hasArcType(),o=t.axis_rotated||a?0:e.getHorizontalAxisHeight("x"),s=t.subchart_show&&!a?t.subchart_size_height+o:0;e.currentWidth=e.getCurrentWidth(),e.currentHeight=e.getCurrentHeight(),e.margin=t.axis_rotated?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:a?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight("y")+r+e.getCurrentPaddingBottom(),left:s+(a?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:a?0:e.getCurrentPaddingRight(),bottom:o+s+r+e.getCurrentPaddingBottom(),left:a?0:e.getCurrentPaddingLeft()},e.margin2=t.axis_rotated?{top:e.margin.top,right:0/0,bottom:20+r,left:e.rotated_padding_left}:{top:e.currentHeight-s-r,right:0/0,bottom:o+r,left:e.margin.left},e.margin3={top:0,right:0/0,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(n,i),e.width=e.currentWidth-e.margin.left-e.margin.right,e.height=e.currentHeight-e.margin.top-e.margin.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0),e.width2=t.axis_rotated?e.margin.left-e.rotated_padding_left-e.rotated_padding_right:e.width,e.height2=t.axis_rotated?e.height:e.currentHeight-e.margin2.top-e.margin2.bottom,e.width2<0&&(e.width2=0),e.height2<0&&(e.height2=0),e.arcWidth=e.width-(e.isLegendRight?i+10:0),e.arcHeight=e.height-(e.isLegendRight?0:10),e.hasType("gauge")&&(e.arcHeight+=e.height-e.getGaugeLabelHeight()),e.updateRadius&&e.updateRadius(),e.isLegendRight&&a&&(e.margin3.left=e.arcWidth/2+1.1*e.radiusExpanded)},l.updateTargets=function(e){var t=this;t.updateTargetsForText(e),t.updateTargetsForBar(e),t.updateTargetsForLine(e),t.hasArcType()&&t.updateTargetsForArc&&t.updateTargetsForArc(e),t.updateTargetsForSubchart&&t.updateTargetsForSubchart(e),t.showTargets()},l.showTargets=function(){var e=this;e.svg.selectAll("."+d.target).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity",1)},l.redraw=function(e,t){var n,i,r,a,o,s,l,c,u,p,h,f,g,m,v,y,b,w,x,C,S,_,T,$,A,E,P,I,D,M=this,N=M.main,j=M.d3,O=M.config,L=M.getShapeIndices(M.isAreaType),R=M.getShapeIndices(M.isBarType),F=M.getShapeIndices(M.isLineType),U=M.hasArcType(),z=M.filterTargetsToShow(M.data.targets),q=M.xv.bind(M);if(e=e||{},n=k(e,"withY",!0),i=k(e,"withSubchart",!0),r=k(e,"withTransition",!0),s=k(e,"withTransform",!1),l=k(e,"withUpdateXDomain",!1),c=k(e,"withUpdateOrgXDomain",!1),u=k(e,"withTrimXDomain",!0),g=k(e,"withUpdateXAxis",l),p=k(e,"withLegend",!1),h=k(e,"withEventRect",!0),f=k(e,"withDimension",!0),a=k(e,"withTransitionForExit",r),o=k(e,"withTransitionForAxis",r),x=r?O.transition_duration:0,C=a?x:0,S=o?x:0,t=t||M.axis.generateTransitions(S),p&&O.legend_show?M.updateLegend(M.mapToIds(M.data.targets),e,t):f&&M.updateDimension(!0),M.isCategorized()&&0===z.length&&M.x.domain([0,M.axes.x.selectAll(".tick").size()]),z.length?(M.updateXDomain(z,l,c,u),O.axis_x_tick_values||($=M.axis.updateXAxisTickValues(z))):(M.xAxis.tickValues([]),M.subXAxis.tickValues([])),O.zoom_rescale&&!e.flow&&(P=M.x.orgDomain()),M.y.domain(M.getYDomain(z,"y",P)),M.y2.domain(M.getYDomain(z,"y2",P)),!O.axis_y_tick_values&&O.axis_y_tick_count&&M.yAxis.tickValues(M.axis.generateTickValues(M.y.domain(),O.axis_y_tick_count)),!O.axis_y2_tick_values&&O.axis_y2_tick_count&&M.y2Axis.tickValues(M.axis.generateTickValues(M.y2.domain(),O.axis_y2_tick_count)),M.axis.redraw(t,U),M.axis.updateLabels(r),(l||g)&&z.length)if(O.axis_x_tick_culling&&$){for(A=1;A<$.length;A++)if($.length/A<O.axis_x_tick_culling_max){E=A;break}M.svg.selectAll("."+d.axisX+" .tick text").each(function(e){var t=$.indexOf(e);t>=0&&j.select(this).style("display",t%E?"none":"block")})}else M.svg.selectAll("."+d.axisX+" .tick text").style("display","block");m=M.generateDrawArea?M.generateDrawArea(L,!1):void 0,v=M.generateDrawBar?M.generateDrawBar(R):void 0,y=M.generateDrawLine?M.generateDrawLine(F,!1):void 0,b=M.generateXYForText(L,R,F,!0),w=M.generateXYForText(L,R,F,!1),n&&(M.subY.domain(M.getYDomain(z,"y")),M.subY2.domain(M.getYDomain(z,"y2"))),M.tooltip.style("display","none"),M.updateXgridFocus(),N.select("text."+d.text+"."+d.empty).attr("x",M.width/2).attr("y",M.height/2).text(O.data_empty_label_text).transition().style("opacity",z.length?0:1),M.updateGrid(x),M.updateRegion(x),M.updateBar(C),M.updateLine(C),M.updateArea(C),M.updateCircle(),M.hasDataLabel()&&M.updateText(C),M.redrawArc&&M.redrawArc(x,C,s),M.redrawSubchart&&M.redrawSubchart(i,t,x,C,L,R,F),N.selectAll("."+d.selectedCircles).filter(M.isBarType.bind(M)).selectAll("circle").remove(),O.interaction_enabled&&!e.flow&&h&&(M.redrawEventRect(),M.updateZoom&&M.updateZoom()),M.updateCircleY(),I=(M.config.axis_rotated?M.circleY:M.circleX).bind(M),D=(M.config.axis_rotated?M.circleX:M.circleY).bind(M),e.flow&&(T=M.generateFlow({targets:z,flow:e.flow,duration:e.flow.duration,drawBar:v,drawLine:y,drawArea:m,cx:I,cy:D,xv:q,xForText:b,yForText:w})),(x||T)&&M.isTabVisible()?j.transition().duration(x).each(function(){var t=[];[M.redrawBar(v,!0),M.redrawLine(y,!0),M.redrawArea(m,!0),M.redrawCircle(I,D,!0),M.redrawText(b,w,e.flow,!0),M.redrawRegion(!0),M.redrawGrid(!0)].forEach(function(e){e.forEach(function(e){t.push(e)})}),_=M.generateWait(),t.forEach(function(e){_.add(e)})}).call(_,function(){T&&T(),O.onrendered&&O.onrendered.call(M)}):(M.redrawBar(v),M.redrawLine(y),M.redrawArea(m),M.redrawCircle(I,D),M.redrawText(b,w,e.flow),M.redrawRegion(),M.redrawGrid(),O.onrendered&&O.onrendered.call(M)),M.mapToIds(M.data.targets).forEach(function(e){M.withoutFadeIn[e]=!0})},l.updateAndRedraw=function(e){var t,n=this,i=n.config;e=e||{},e.withTransition=k(e,"withTransition",!0),e.withTransform=k(e,"withTransform",!1),e.withLegend=k(e,"withLegend",!1),e.withUpdateXDomain=!0,e.withUpdateOrgXDomain=!0,e.withTransitionForExit=!1,e.withTransitionForTransform=k(e,"withTransitionForTransform",e.withTransition),n.updateSizes(),e.withLegend&&i.legend_show||(t=n.axis.generateTransitions(e.withTransitionForAxis?i.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(e.withTransitionForTransform,t)),n.redraw(e,t)},l.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},l.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},l.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},l.isCustomX=function(){var e=this,t=e.config;return!e.isTimeSeries()&&(t.data_x||x(t.data_xs))},l.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},l.getTranslate=function(e){var t,n,i=this,r=i.config;return"main"===e?(t=y(i.margin.left),n=y(i.margin.top)):"context"===e?(t=y(i.margin2.left),n=y(i.margin2.top)):"legend"===e?(t=i.margin3.left,n=i.margin3.top):"x"===e?(t=0,n=r.axis_rotated?0:i.height):"y"===e?(t=0,n=r.axis_rotated?i.height:0):"y2"===e?(t=r.axis_rotated?0:i.width,n=r.axis_rotated?1:0):"subx"===e?(t=0,n=r.axis_rotated?0:i.height2):"arc"===e&&(t=i.arcWidth/2,n=i.arcHeight/2),"translate("+t+","+n+")"},l.initialOpacity=function(e){return null!==e.value&&this.withoutFadeIn[e.id]?1:0},l.initialOpacityForCircle=function(e){return null!==e.value&&this.withoutFadeIn[e.id]?this.opacityForCircle(e):0},l.opacityForCircle=function(e){var t=this.config.point_show?1:0;return p(e.value)?this.isScatterType(e)?.5:t:0},l.opacityForText=function(){return this.hasDataLabel()?1:0},l.xx=function(e){return e?this.x(e.x):null},l.xv=function(e){var t=this,n=e.value;return t.isTimeSeries()?n=t.parseDate(e.value):t.isCategorized()&&"string"==typeof e.value&&(n=t.config.axis_x_categories.indexOf(e.value)),Math.ceil(t.x(n))},l.yv=function(e){var t=this,n=e.axis&&"y2"===e.axis?t.y2:t.y;return Math.ceil(n(e.value))},l.subxx=function(e){return e?this.subX(e.x):null},l.transformMain=function(e,t){var n,i,r,a=this;t&&t.axisX?n=t.axisX:(n=a.main.select("."+d.axisX),e&&(n=n.transition())),t&&t.axisY?i=t.axisY:(i=a.main.select("."+d.axisY),e&&(i=i.transition())),t&&t.axisY2?r=t.axisY2:(r=a.main.select("."+d.axisY2),e&&(r=r.transition())),(e?a.main.transition():a.main).attr("transform",a.getTranslate("main")),n.attr("transform",a.getTranslate("x")),i.attr("transform",a.getTranslate("y")),r.attr("transform",a.getTranslate("y2")),a.main.select("."+d.chartArcs).attr("transform",a.getTranslate("arc"))},l.transformAll=function(e,t){var n=this;n.transformMain(e,t),n.config.subchart_show&&n.transformContext(e,t),n.legend&&n.transformLegend(e)},l.updateSvgSize=function(){var e=this,t=e.svg.select(".c3-brush .background");e.svg.attr("width",e.currentWidth).attr("height",e.currentHeight),e.svg.selectAll(["#"+e.clipId,"#"+e.clipIdForGrid]).select("rect").attr("width",e.width).attr("height",e.height),e.svg.select("#"+e.clipIdForXAxis).select("rect").attr("x",e.getXAxisClipX.bind(e)).attr("y",e.getXAxisClipY.bind(e)).attr("width",e.getXAxisClipWidth.bind(e)).attr("height",e.getXAxisClipHeight.bind(e)),e.svg.select("#"+e.clipIdForYAxis).select("rect").attr("x",e.getYAxisClipX.bind(e)).attr("y",e.getYAxisClipY.bind(e)).attr("width",e.getYAxisClipWidth.bind(e)).attr("height",e.getYAxisClipHeight.bind(e)),e.svg.select("#"+e.clipIdForSubchart).select("rect").attr("width",e.width).attr("height",t.size()?t.attr("height"):0),e.svg.select("."+d.zoomRect).attr("width",e.width).attr("height",e.height),e.selectChart.style("max-height",e.currentHeight+"px")},l.updateDimension=function(e){var t=this;e||(t.config.axis_rotated?(t.axes.x.call(t.xAxis),t.axes.subx.call(t.subXAxis)):(t.axes.y.call(t.yAxis),t.axes.y2.call(t.y2Axis))),t.updateSizes(),t.updateScales(),t.updateSvgSize(),t.transformAll(!1)},l.observeInserted=function(t){var n,i=this;return"undefined"==typeof MutationObserver?void e.console.error("MutationObserver not defined."):(n=new MutationObserver(function(r){r.forEach(function(r){"childList"===r.type&&r.previousSibling&&(n.disconnect(),i.intervalForObserveInserted=e.setInterval(function(){t.node().parentNode&&(e.clearInterval(i.intervalForObserveInserted),i.updateDimension(),i.config.oninit.call(i),i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.transition().style("opacity",1))},10))})}),void n.observe(t.node(),{attributes:!0,childList:!0,characterData:!0}))},l.generateResize=function(){function e(){t.forEach(function(e){e()})}var t=[];return e.add=function(e){t.push(e)},e},l.endall=function(e,t){var n=0;e.each(function(){++n}).each("end",function(){--n||t.apply(this,arguments)})},l.generateWait=function(){var e=[],t=function(t,n){var i=setInterval(function(){var t=0;e.forEach(function(e){if(e.empty())return void(t+=1);try{e.transition()}catch(n){t+=1}}),t===e.length&&(clearInterval(i),n&&n())},10)};return t.add=function(t){e.push(t)},t},l.parseDate=function(t){var n,i=this;return t instanceof Date?n=t:"string"==typeof t?n=i.dataTimeFormat(i.config.data_xFormat).parse(t):"number"!=typeof t&&isNaN(t)||(n=new Date(+t)),(!n||isNaN(+n))&&e.console.error("Failed to parse x '"+t+"' to Date object"),n},l.isTabVisible=function(){var e;return"undefined"!=typeof document.hidden?e="hidden":"undefined"!=typeof document.mozHidden?e="mozHidden":"undefined"!=typeof document.msHidden?e="msHidden":"undefined"!=typeof document.webkitHidden&&(e="webkitHidden"),document[e]?!1:!0},l.getDefaultConfig=function(){var e={bindto:"#chart",size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(e){return e},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_expand:!0,gauge_label_show:!0,gauge_label_format:void 0,gauge_expand:!0,gauge_min:0,gauge_max:100,gauge_units:void 0,gauge_width:void 0,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_width:void 0,donut_expand:!0,donut_title:"",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(e,t,n,i){return this.getTooltipContent?this.getTooltipContent(e,t,n,i):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"}};return Object.keys(this.additionalConfig).forEach(function(t){e[t]=this.additionalConfig[t]},this),e},l.additionalConfig={},l.loadConfig=function(e){function t(){var e=i.shift();return e&&n&&"object"==typeof n&&e in n?(n=n[e],t()):e?void 0:n}var n,i,r,a=this.config;Object.keys(a).forEach(function(o){n=e,i=o.split("_"),r=t(),m(r)&&(a[o]=r)})},l.getScale=function(e,t,n){return(n?this.d3.time.scale():this.d3.scale.linear()).range([e,t])},l.getX=function(e,t,n,i){var r,a=this,o=a.getScale(e,t,a.isTimeSeries()),s=n?o.domain(n):o;a.isCategorized()?(i=i||function(){return 0},o=function(e,t){var n=s(e)+i(e);return t?n:Math.ceil(n)}):o=function(e,t){var n=s(e);return t?n:Math.ceil(n)};for(r in s)o[r]=s[r];return o.orgDomain=function(){return s.domain()},a.isCategorized()&&(o.domain=function(e){return arguments.length?(s.domain(e),o):(e=this.orgDomain(),[e[0],e[1]+1])}),o},l.getY=function(e,t,n){var i=this.getScale(e,t,this.isTimeSeriesY());

return n&&i.domain(n),i},l.getYScale=function(e){return"y2"===this.axis.getId(e)?this.y2:this.y},l.getSubYScale=function(e){return"y2"===this.axis.getId(e)?this.subY2:this.subY},l.updateScales=function(){var e=this,t=e.config,n=!e.x;e.xMin=t.axis_rotated?1:0,e.xMax=t.axis_rotated?e.height:e.width,e.yMin=t.axis_rotated?0:e.height,e.yMax=t.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=t.axis_rotated?0:e.height2,e.subYMax=t.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,n?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,n?t.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,n?t.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,n?t.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,n?t.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,t.axis_y_tick_format,e.yAxisTickValues,t.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,t.axis_y2_tick_format,e.y2AxisTickValues,t.axis_y2_tick_outer),n||(e.brush&&e.brush.scale(e.subX),t.zoom_enabled&&e.zoom.scale(e.x)),e.updateArc&&e.updateArc()},l.getYDomainMin=function(e){var t,n,i,r,a,o,s=this,l=s.config,c=s.mapToIds(e),u=s.getValuesAsIdKeyed(e);if(l.data_groups.length>0)for(o=s.hasNegativeValueInTargets(e),t=0;t<l.data_groups.length;t++)if(r=l.data_groups[t].filter(function(e){return c.indexOf(e)>=0}),0!==r.length)for(i=r[0],o&&u[i]&&u[i].forEach(function(e,t){u[i][t]=0>e?e:0}),n=1;n<r.length;n++)a=r[n],u[a]&&u[a].forEach(function(e,t){s.axis.getId(a)!==s.axis.getId(i)||!u[i]||o&&+e>0||(u[i][t]+=+e)});return s.d3.min(Object.keys(u).map(function(e){return s.d3.min(u[e])}))},l.getYDomainMax=function(e){var t,n,i,r,a,o,s=this,l=s.config,c=s.mapToIds(e),u=s.getValuesAsIdKeyed(e);if(l.data_groups.length>0)for(o=s.hasPositiveValueInTargets(e),t=0;t<l.data_groups.length;t++)if(r=l.data_groups[t].filter(function(e){return c.indexOf(e)>=0}),0!==r.length)for(i=r[0],o&&u[i]&&u[i].forEach(function(e,t){u[i][t]=e>0?e:0}),n=1;n<r.length;n++)a=r[n],u[a]&&u[a].forEach(function(e,t){s.axis.getId(a)!==s.axis.getId(i)||!u[i]||o&&0>+e||(u[i][t]+=+e)});return s.d3.max(Object.keys(u).map(function(e){return s.d3.max(u[e])}))},l.getYDomain=function(e,t,n){var i,r,a,o,s,l,c,u,d,h,f,g=this,m=g.config,v=e.filter(function(e){return g.axis.getId(e.id)===t}),y=n?g.filterByXDomain(v,n):v,w="y2"===t?m.axis_y2_min:m.axis_y_min,k="y2"===t?m.axis_y2_max:m.axis_y_max,C=g.getYDomainMin(y),S=g.getYDomainMax(y),_="y2"===t?m.axis_y2_center:m.axis_y_center,T=g.hasType("bar",y)&&m.bar_zerobased||g.hasType("area",y)&&m.area_zerobased,$="y2"===t?m.axis_y2_inverted:m.axis_y_inverted,A=g.hasDataLabel()&&m.axis_rotated,E=g.hasDataLabel()&&!m.axis_rotated;return C=p(w)?w:p(k)?k>C?C:k-10:C,S=p(k)?k:p(w)?S>w?S:w+10:S,0===y.length?"y2"===t?g.y2.domain():g.y.domain():(isNaN(C)&&(C=0),isNaN(S)&&(S=C),C===S&&(0>C?S=0:C=0),h=C>=0&&S>=0,f=0>=C&&0>=S,(p(w)&&h||p(k)&&f)&&(T=!1),T&&(h&&(C=0),f&&(S=0)),r=Math.abs(S-C),a=o=s=.1*r,"undefined"!=typeof _&&(l=Math.max(Math.abs(C),Math.abs(S)),S=_+l,C=_-l),A?(c=g.getDataLabelLength(C,S,"width"),u=b(g.y.range()),d=[c[0]/u,c[1]/u],o+=r*(d[1]/(1-d[0]-d[1])),s+=r*(d[0]/(1-d[0]-d[1]))):E&&(c=g.getDataLabelLength(C,S,"height"),o+=g.axis.convertPixelsToAxisPadding(c[1],r),s+=g.axis.convertPixelsToAxisPadding(c[0],r)),"y"===t&&x(m.axis_y_padding)&&(o=g.axis.getPadding(m.axis_y_padding,"top",o,r),s=g.axis.getPadding(m.axis_y_padding,"bottom",s,r)),"y2"===t&&x(m.axis_y2_padding)&&(o=g.axis.getPadding(m.axis_y2_padding,"top",o,r),s=g.axis.getPadding(m.axis_y2_padding,"bottom",s,r)),T&&(h&&(s=C),f&&(o=-S)),i=[C-s,S+o],$?i.reverse():i)},l.getXDomainMin=function(e){var t=this,n=t.config;return m(n.axis_x_min)?t.isTimeSeries()?this.parseDate(n.axis_x_min):n.axis_x_min:t.d3.min(e,function(e){return t.d3.min(e.values,function(e){return e.x})})},l.getXDomainMax=function(e){var t=this,n=t.config;return m(n.axis_x_max)?t.isTimeSeries()?this.parseDate(n.axis_x_max):n.axis_x_max:t.d3.max(e,function(e){return t.d3.max(e.values,function(e){return e.x})})},l.getXDomainPadding=function(e){var t,n,i,r,a=this,o=a.config,s=e[1]-e[0];return a.isCategorized()?n=0:a.hasType("bar")?(t=a.getMaxDataCount(),n=t>1?s/(t-1)/2:.5):n=.01*s,"object"==typeof o.axis_x_padding&&x(o.axis_x_padding)?(i=p(o.axis_x_padding.left)?o.axis_x_padding.left:n,r=p(o.axis_x_padding.right)?o.axis_x_padding.right:n):i=r="number"==typeof o.axis_x_padding?o.axis_x_padding:n,{left:i,right:r}},l.getXDomain=function(e){var t=this,n=[t.getXDomainMin(e),t.getXDomainMax(e)],i=n[0],r=n[1],a=t.getXDomainPadding(n),o=0,s=0;return i-r!==0||t.isCategorized()||(t.isTimeSeries()?(i=new Date(.5*i.getTime()),r=new Date(1.5*r.getTime())):(i=0===i?1:.5*i,r=0===r?-1:1.5*r)),(i||0===i)&&(o=t.isTimeSeries()?new Date(i.getTime()-a.left):i-a.left),(r||0===r)&&(s=t.isTimeSeries()?new Date(r.getTime()+a.right):r+a.right),[o,s]},l.updateXDomain=function(e,t,n,i,r){var a=this,o=a.config;return n&&(a.x.domain(r?r:a.d3.extent(a.getXDomain(e))),a.orgXDomain=a.x.domain(),o.zoom_enabled&&a.zoom.scale(a.x).updateScaleExtent(),a.subX.domain(a.x.domain()),a.brush&&a.brush.scale(a.subX)),t&&(a.x.domain(r?r:!a.brush||a.brush.empty()?a.orgXDomain:a.brush.extent()),o.zoom_enabled&&a.zoom.scale(a.x).updateScaleExtent()),i&&a.x.domain(a.trimXDomain(a.x.orgDomain())),a.x.domain()},l.trimXDomain=function(e){var t=this;return e[0]<=t.orgXDomain[0]&&(e[1]=+e[1]+(t.orgXDomain[0]-e[0]),e[0]=t.orgXDomain[0]),t.orgXDomain[1]<=e[1]&&(e[0]=+e[0]-(e[1]-t.orgXDomain[1]),e[1]=t.orgXDomain[1]),e},l.isX=function(e){var t=this,n=t.config;return n.data_x&&e===n.data_x||x(n.data_xs)&&C(n.data_xs,e)},l.isNotX=function(e){return!this.isX(e)},l.getXKey=function(e){var t=this,n=t.config;return n.data_x?n.data_x:x(n.data_xs)?n.data_xs[e]:null},l.getXValuesOfXKey=function(e,t){var n,i=this,r=t&&x(t)?i.mapToIds(t):[];return r.forEach(function(t){i.getXKey(t)===e&&(n=i.data.xs[t])}),n},l.getIndexByX=function(e){var t=this,n=t.filterByX(t.data.targets,e);return n.length?n[0].index:null},l.getXValue=function(e,t){var n=this;return e in n.data.xs&&n.data.xs[e]&&p(n.data.xs[e][t])?n.data.xs[e][t]:t},l.getOtherTargetXs=function(){var e=this,t=Object.keys(e.data.xs);return t.length?e.data.xs[t[0]]:null},l.getOtherTargetX=function(e){var t=this.getOtherTargetXs();return t&&e<t.length?t[e]:null},l.addXs=function(e){var t=this;Object.keys(e).forEach(function(n){t.config.data_xs[n]=e[n]})},l.hasMultipleX=function(e){return this.d3.set(Object.keys(e).map(function(t){return e[t]})).size()>1},l.isMultipleX=function(){return x(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},l.addName=function(e){var t,n=this;return e&&(t=n.config.data_names[e.id],e.name=t?t:e.id),e},l.getValueOnIndex=function(e,t){var n=e.filter(function(e){return e.index===t});return n.length?n[0]:null},l.updateTargetX=function(e,t){var n=this;e.forEach(function(e){e.values.forEach(function(i,r){i.x=n.generateTargetX(t[r],e.id,r)}),n.data.xs[e.id]=t})},l.updateTargetXs=function(e,t){var n=this;e.forEach(function(e){t[e.id]&&n.updateTargetX([e],t[e.id])})},l.generateTargetX=function(e,t,n){var i,r=this;return i=r.isTimeSeries()?r.parseDate(e?e:r.getXValue(t,n)):r.isCustomX()&&!r.isCategorized()?p(e)?+e:r.getXValue(t,n):n},l.cloneTarget=function(e){return{id:e.id,id_org:e.id_org,values:e.values.map(function(e){return{x:e.x,value:e.value,id:e.id}})}},l.updateXs=function(){var e=this;e.data.targets.length&&(e.xs=[],e.data.targets[0].values.forEach(function(t){e.xs[t.index]=t.x}))},l.getPrevX=function(e){var t=this.xs[e-1];return"undefined"!=typeof t?t:null},l.getNextX=function(e){var t=this.xs[e+1];return"undefined"!=typeof t?t:null},l.getMaxDataCount=function(){var e=this;return e.d3.max(e.data.targets,function(e){return e.values.length})},l.getMaxDataCountTarget=function(e){var t,n=e.length,i=0;return n>1?e.forEach(function(e){e.values.length>i&&(t=e,i=e.values.length)}):t=n?e[0]:null,t},l.getEdgeX=function(e){var t=this;return e.length?[t.d3.min(e,function(e){return e.values[0].x}),t.d3.max(e,function(e){return e.values[e.values.length-1].x})]:[0,0]},l.mapToIds=function(e){return e.map(function(e){return e.id})},l.mapToTargetIds=function(e){var t=this;return e?f(e)?[e]:e:t.mapToIds(t.data.targets)},l.hasTarget=function(e,t){var n,i=this.mapToIds(e);for(n=0;n<i.length;n++)if(i[n]===t)return!0;return!1},l.isTargetToShow=function(e){return this.hiddenTargetIds.indexOf(e)<0},l.isLegendToShow=function(e){return this.hiddenLegendIds.indexOf(e)<0},l.filterTargetsToShow=function(e){var t=this;return e.filter(function(e){return t.isTargetToShow(e.id)})},l.mapTargetsToUniqueXs=function(e){var t=this,n=t.d3.set(t.d3.merge(e.map(function(e){return e.values.map(function(e){return+e.x})}))).values();return n.map(t.isTimeSeries()?function(e){return new Date(+e)}:function(e){return+e})},l.addHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.concat(e)},l.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return e.indexOf(t)<0})},l.addHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.concat(e)},l.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return e.indexOf(t)<0})},l.getValuesAsIdKeyed=function(e){var t={};return e.forEach(function(e){t[e.id]=[],e.values.forEach(function(n){t[e.id].push(n.value)})}),t},l.checkValueInTargets=function(e,t){var n,i,r,a=Object.keys(e);for(n=0;n<a.length;n++)for(r=e[a[n]].values,i=0;i<r.length;i++)if(t(r[i].value))return!0;return!1},l.hasNegativeValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return 0>e})},l.hasPositiveValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return e>0})},l.isOrderDesc=function(){var e=this.config;return"string"==typeof e.data_order&&"desc"===e.data_order.toLowerCase()},l.isOrderAsc=function(){var e=this.config;return"string"==typeof e.data_order&&"asc"===e.data_order.toLowerCase()},l.orderTargets=function(e){var t=this,n=t.config,i=t.isOrderAsc(),r=t.isOrderDesc();return i||r?e.sort(function(e,t){var n=function(e,t){return e+Math.abs(t.value)},r=e.values.reduce(n,0),a=t.values.reduce(n,0);return i?a-r:r-a}):h(n.data_order)&&e.sort(n.data_order),e},l.filterByX=function(e,t){return this.d3.merge(e.map(function(e){return e.values})).filter(function(e){return e.x-t===0})},l.filterRemoveNull=function(e){return e.filter(function(e){return p(e.value)})},l.filterByXDomain=function(e,t){return e.map(function(e){return{id:e.id,id_org:e.id_org,values:e.values.filter(function(e){return t[0]<=e.x&&e.x<=t[1]})}})},l.hasDataLabel=function(){var e=this.config;return"boolean"==typeof e.data_labels&&e.data_labels?!0:"object"==typeof e.data_labels&&x(e.data_labels)?!0:!1},l.getDataLabelLength=function(e,t,n){var i=this,r=[0,0],a=1.3;return i.selectChart.select("svg").selectAll(".dummy").data([e,t]).enter().append("text").text(function(e){return i.dataLabelFormat(e.id)(e)}).each(function(e,t){r[t]=this.getBoundingClientRect()[n]*a}).remove(),r},l.isNoneArc=function(e){return this.hasTarget(this.data.targets,e.id)},l.isArc=function(e){return"data"in e&&this.hasTarget(this.data.targets,e.data.id)},l.findSameXOfValues=function(e,t){var n,i=e[t].x,r=[];for(n=t-1;n>=0&&i===e[n].x;n--)r.push(e[n]);for(n=t;n<e.length&&i===e[n].x;n++)r.push(e[n]);return r},l.findClosestFromTargets=function(e,t){var n,i=this;return n=e.map(function(e){return i.findClosest(e.values,t)}),i.findClosest(n,t)},l.findClosest=function(e,t){var n,i=this,r=100;return e.filter(function(e){return e&&i.isBarType(e.id)}).forEach(function(e){var t=i.main.select("."+d.bars+i.getTargetSelectorSuffix(e.id)+" ."+d.bar+"-"+e.index).node();!n&&i.isWithinBar(t)&&(n=e)}),e.filter(function(e){return e&&!i.isBarType(e.id)}).forEach(function(e){var a=i.dist(e,t);r>a&&(r=a,n=e)}),n},l.dist=function(e,t){var n=this,i=n.config,r=i.axis_rotated?1:0,a=i.axis_rotated?0:1,o=n.circleY(e,e.index),s=n.x(e.x);return Math.pow(s-t[r],2)+Math.pow(o-t[a],2)},l.convertValuesToStep=function(e){var t,n=[].concat(e);if(!this.isCategorized())return e;for(t=e.length+1;t>0;t--)n[t]=n[t-1];return n[0]={x:n[0].x-1,value:n[0].value,id:n[0].id},n[e.length+1]={x:n[e.length].x+1,value:n[e.length].value,id:n[e.length].id},n},l.updateDataAttributes=function(e,t){var n=this,i=n.config,r=i["data_"+e];return"undefined"==typeof t?r:(Object.keys(t).forEach(function(e){r[e]=t[e]}),n.redraw({withLegend:!0}),r)},l.convertUrlToData=function(e,t,n,i){var r=this,a=t?t:"csv";r.d3.xhr(e,function(e,t){var o;if(!t)throw new Error(e.responseURL+" "+e.status+" ("+e.statusText+")");o="json"===a?r.convertJsonToData(JSON.parse(t.response),n):"tsv"===a?r.convertTsvToData(t.response):r.convertCsvToData(t.response),i.call(r,o)})},l.convertXsvToData=function(e,t){var n,i=t.parseRows(e);return 1===i.length?(n=[{}],i[0].forEach(function(e){n[0][e]=null})):n=t.parse(e),n},l.convertCsvToData=function(e){return this.convertXsvToData(e,this.d3.csv)},l.convertTsvToData=function(e){return this.convertXsvToData(e,this.d3.tsv)},l.convertJsonToData=function(e,t){var n,i,r=this,a=[];return t?(t.x?(n=t.value.concat(t.x),r.config.data_x=t.x):n=t.value,a.push(n),e.forEach(function(e){var t=[];n.forEach(function(n){var i=g(e[n])?null:e[n];t.push(i)}),a.push(t)}),i=r.convertRowsToData(a)):(Object.keys(e).forEach(function(t){a.push([t].concat(e[t]))}),i=r.convertColumnsToData(a)),i},l.convertRowsToData=function(e){var t,n,i=e[0],r={},a=[];for(t=1;t<e.length;t++){for(r={},n=0;n<e[t].length;n++){if(g(e[t][n]))throw new Error("Source data is missing a component at ("+t+","+n+")!");r[i[n]]=e[t][n]}a.push(r)}return a},l.convertColumnsToData=function(e){var t,n,i,r=[];for(t=0;t<e.length;t++)for(i=e[t][0],n=1;n<e[t].length;n++){if(g(r[n-1])&&(r[n-1]={}),g(e[t][n]))throw new Error("Source data is missing a component at ("+t+","+n+")!");r[n-1][i]=e[t][n]}return r},l.convertDataToTargets=function(e,t){var n,i=this,r=i.config,a=i.d3.keys(e[0]).filter(i.isNotX,i),o=i.d3.keys(e[0]).filter(i.isX,i);return a.forEach(function(n){var a=i.getXKey(n);i.isCustomX()||i.isTimeSeries()?o.indexOf(a)>=0?i.data.xs[n]=(t&&i.data.xs[n]?i.data.xs[n]:[]).concat(e.map(function(e){return e[a]}).filter(p).map(function(e,t){return i.generateTargetX(e,n,t)})):r.data_x?i.data.xs[n]=i.getOtherTargetXs():x(r.data_xs)&&(i.data.xs[n]=i.getXValuesOfXKey(a,i.data.targets)):i.data.xs[n]=e.map(function(e,t){return t})}),a.forEach(function(e){if(!i.data.xs[e])throw new Error('x is not defined for id = "'+e+'".')}),n=a.map(function(t,n){var a=r.data_idConverter(t);return{id:a,id_org:t,values:e.map(function(e,o){var s=i.getXKey(t),l=e[s],c=i.generateTargetX(l,t,o);return i.isCustomX()&&i.isCategorized()&&0===n&&l&&(0===o&&(r.axis_x_categories=[]),r.axis_x_categories.push(l)),(g(e[t])||i.data.xs[t].length<=o)&&(c=void 0),{x:c,value:null===e[t]||isNaN(e[t])?null:+e[t],id:a}}).filter(function(e){return m(e.x)})}}),n.forEach(function(e){var t;r.data_xSort&&(e.values=e.values.sort(function(e,t){var n=e.x||0===e.x?e.x:1/0,i=t.x||0===t.x?t.x:1/0;return n-i})),t=0,e.values.forEach(function(e){e.index=t++}),i.data.xs[e.id].sort(function(e,t){return e-t})}),r.data_type&&i.setTargetType(i.mapToIds(n).filter(function(e){return!(e in r.data_types)}),r.data_type),n.forEach(function(e){i.addCache(e.id_org,e)}),n},l.load=function(e,t){var n=this;e&&(t.filter&&(e=e.filter(t.filter)),(t.type||t.types)&&e.forEach(function(e){var i=t.types&&t.types[e.id]?t.types[e.id]:t.type;n.setTargetType(e.id,i)}),n.data.targets.forEach(function(t){for(var n=0;n<e.length;n++)if(t.id===e[n].id){t.values=e[n].values,e.splice(n,1);break}}),n.data.targets=n.data.targets.concat(e)),n.updateTargets(n.data.targets),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()},l.loadFromArgs=function(e){var t=this;e.data?t.load(t.convertDataToTargets(e.data),e):e.url?t.convertUrlToData(e.url,e.mimeType,e.keys,function(n){t.load(t.convertDataToTargets(n),e)}):e.json?t.load(t.convertDataToTargets(t.convertJsonToData(e.json,e.keys)),e):e.rows?t.load(t.convertDataToTargets(t.convertRowsToData(e.rows)),e):e.columns?t.load(t.convertDataToTargets(t.convertColumnsToData(e.columns)),e):t.load(null,e)},l.unload=function(e,t){var n=this;return t||(t=function(){}),e=e.filter(function(e){return n.hasTarget(n.data.targets,e)}),e&&0!==e.length?(n.svg.selectAll(e.map(function(e){return n.selectorTarget(e)})).transition().style("opacity",0).remove().call(n.endall,t),void e.forEach(function(e){n.withoutFadeIn[e]=!1,n.legend&&n.legend.selectAll("."+d.legendItem+n.getTargetSelectorSuffix(e)).remove(),n.data.targets=n.data.targets.filter(function(t){return t.id!==e})})):void t()},l.categoryName=function(e){var t=this.config;return e<t.axis_x_categories.length?t.axis_x_categories[e]:e},l.initEventRect=function(){var e=this;e.main.select("."+d.chart).append("g").attr("class",d.eventRects).style("fill-opacity",0)},l.redrawEventRect=function(){var e,t,n=this,i=n.config,r=n.isMultipleX(),a=n.main.select("."+d.eventRects).style("cursor",i.zoom_enabled?i.axis_rotated?"ns-resize":"ew-resize":null).classed(d.eventRectsMultiple,r).classed(d.eventRectsSingle,!r);a.selectAll("."+d.eventRect).remove(),n.eventRect=a.selectAll("."+d.eventRect),r?(e=n.eventRect.data([0]),n.generateEventRectsForMultipleXs(e.enter()),n.updateEventRect(e)):(t=n.getMaxDataCountTarget(n.data.targets),a.datum(t?t.values:[]),n.eventRect=a.selectAll("."+d.eventRect),e=n.eventRect.data(function(e){return e}),n.generateEventRectsForSingleX(e.enter()),n.updateEventRect(e),e.exit().remove())},l.updateEventRect=function(e){var t,n,i,r,a,o,s=this,l=s.config;e=e||s.eventRect.data(function(e){return e}),s.isMultipleX()?(t=0,n=0,i=s.width,r=s.height):(!s.isCustomX()&&!s.isTimeSeries()||s.isCategorized()?(a=s.getEventRectWidth(),o=function(e){return s.x(e.x)-a/2}):(s.updateXs(),a=function(e){var t=s.getPrevX(e.index),n=s.getNextX(e.index);return null===t&&null===n?l.axis_rotated?s.height:s.width:(null===t&&(t=s.x.domain()[0]),null===n&&(n=s.x.domain()[1]),Math.max(0,(s.x(n)-s.x(t))/2))},o=function(e){var t=s.getPrevX(e.index),n=s.getNextX(e.index),i=s.data.xs[e.id][e.index];return null===t&&null===n?0:(null===t&&(t=s.x.domain()[0]),(s.x(i)+s.x(t))/2)}),t=l.axis_rotated?0:o,n=l.axis_rotated?o:0,i=l.axis_rotated?s.width:a,r=l.axis_rotated?a:s.height),e.attr("class",s.classEvent.bind(s)).attr("x",t).attr("y",n).attr("width",i).attr("height",r)},l.generateEventRectsForSingleX=function(e){var t=this,n=t.d3,i=t.config;e.append("rect").attr("class",t.classEvent.bind(t)).style("cursor",i.data_selection_enabled&&i.data_selection_grouped?"pointer":null).on("mouseover",function(e){var n=e.index;t.dragging||t.flowing||t.hasArcType()||(i.point_focus_expand_enabled&&t.expandCircles(n,null,!0),t.expandBars(n,null,!0),t.main.selectAll("."+d.shape+"-"+n).each(function(e){i.data_onmouseover.call(t.api,e)}))}).on("mouseout",function(e){var n=e.index;t.config&&(t.hasArcType()||(t.hideXGridFocus(),t.hideTooltip(),t.unexpandCircles(),t.unexpandBars(),t.main.selectAll("."+d.shape+"-"+n).each(function(e){i.data_onmouseout.call(t.api,e)})))}).on("mousemove",function(e){var r,a=e.index,o=t.svg.select("."+d.eventRect+"-"+a);t.dragging||t.flowing||t.hasArcType()||(t.isStepType(e)&&"step-after"===t.config.line_step_type&&n.mouse(this)[0]<t.x(t.getXValue(e.id,a))&&(a-=1),r=t.filterTargetsToShow(t.data.targets).map(function(e){return t.addName(t.getValueOnIndex(e.values,a))}),i.tooltip_grouped&&(t.showTooltip(r,this),t.showXGridFocus(r)),(!i.tooltip_grouped||i.data_selection_enabled&&!i.data_selection_grouped)&&t.main.selectAll("."+d.shape+"-"+a).each(function(){n.select(this).classed(d.EXPANDED,!0),i.data_selection_enabled&&o.style("cursor",i.data_selection_grouped?"pointer":null),i.tooltip_grouped||(t.hideXGridFocus(),t.hideTooltip(),i.data_selection_grouped||(t.unexpandCircles(a),t.unexpandBars(a)))}).filter(function(e){return t.isWithinShape(this,e)}).each(function(e){i.data_selection_enabled&&(i.data_selection_grouped||i.data_selection_isselectable(e))&&o.style("cursor","pointer"),i.tooltip_grouped||(t.showTooltip([e],this),t.showXGridFocus([e]),i.point_focus_expand_enabled&&t.expandCircles(a,e.id,!0),t.expandBars(a,e.id,!0))}))}).on("click",function(e){var r=e.index;if(!t.hasArcType()&&t.toggleShape){if(t.cancelClick)return void(t.cancelClick=!1);t.isStepType(e)&&"step-after"===i.line_step_type&&n.mouse(this)[0]<t.x(t.getXValue(e.id,r))&&(r-=1),t.main.selectAll("."+d.shape+"-"+r).each(function(e){(i.data_selection_grouped||t.isWithinShape(this,e))&&(t.toggleShape(this,e,r),t.config.data_onclick.call(t.api,e,this))})}}).call(i.data_selection_draggable&&t.drag?n.behavior.drag().origin(Object).on("drag",function(){t.drag(n.mouse(this))}).on("dragstart",function(){t.dragstart(n.mouse(this))}).on("dragend",function(){t.dragend()}):function(){})},l.generateEventRectsForMultipleXs=function(e){function t(){n.svg.select("."+d.eventRect).style("cursor",null),n.hideXGridFocus(),n.hideTooltip(),n.unexpandCircles(),n.unexpandBars()}var n=this,i=n.d3,r=n.config;e.append("rect").attr("x",0).attr("y",0).attr("width",n.width).attr("height",n.height).attr("class",d.eventRect).on("mouseout",function(){n.config&&(n.hasArcType()||t())}).on("mousemove",function(){var e,a,o,s,l=n.filterTargetsToShow(n.data.targets);if(!n.dragging&&!n.hasArcType(l)){if(e=i.mouse(this),a=n.findClosestFromTargets(l,e),!n.mouseover||a&&a.id===n.mouseover.id||(r.data_onmouseout.call(n.api,n.mouseover),n.mouseover=void 0),!a)return void t();o=n.isScatterType(a)||!r.tooltip_grouped?[a]:n.filterByX(l,a.x),s=o.map(function(e){return n.addName(e)}),n.showTooltip(s,this),r.point_focus_expand_enabled&&n.expandCircles(a.index,a.id,!0),n.expandBars(a.index,a.id,!0),n.showXGridFocus(s),(n.isBarType(a.id)||n.dist(a,e)<100)&&(n.svg.select("."+d.eventRect).style("cursor","pointer"),n.mouseover||(r.data_onmouseover.call(n.api,a),n.mouseover=a))}}).on("click",function(){var e,t,a=n.filterTargetsToShow(n.data.targets);n.hasArcType(a)||(e=i.mouse(this),t=n.findClosestFromTargets(a,e),t&&(n.isBarType(t.id)||n.dist(t,e)<100)&&n.main.selectAll("."+d.shapes+n.getTargetSelectorSuffix(t.id)).selectAll("."+d.shape+"-"+t.index).each(function(){(r.data_selection_grouped||n.isWithinShape(this,t))&&(n.toggleShape(this,t,t.index),n.config.data_onclick.call(n.api,t,this))}))}).call(r.data_selection_draggable&&n.drag?i.behavior.drag().origin(Object).on("drag",function(){n.drag(i.mouse(this))}).on("dragstart",function(){n.dragstart(i.mouse(this))}).on("dragend",function(){n.dragend()}):function(){})},l.dispatchEvent=function(t,n,i){var r=this,a="."+d.eventRect+(r.isMultipleX()?"":"-"+n),o=r.main.select(a).node(),s=o.getBoundingClientRect(),l=s.left+(i?i[0]:0),c=s.top+(i?i[1]:0),u=document.createEvent("MouseEvents");u.initMouseEvent(t,!0,!0,e,0,l,c,l,c,!1,!1,!1,!1,0,null),o.dispatchEvent(u)},l.getCurrentWidth=function(){var e=this,t=e.config;return t.size_width?t.size_width:e.getParentWidth()},l.getCurrentHeight=function(){var e=this,t=e.config,n=t.size_height?t.size_height:e.getParentHeight();return n>0?n:320/(e.hasType("gauge")?2:1)},l.getCurrentPaddingTop=function(){var e=this.config;return p(e.padding_top)?e.padding_top:0},l.getCurrentPaddingBottom=function(){var e=this.config;return p(e.padding_bottom)?e.padding_bottom:0},l.getCurrentPaddingLeft=function(e){var t=this,n=t.config;return p(n.padding_left)?n.padding_left:n.axis_rotated?n.axis_x_show?Math.max(v(t.getAxisWidthByAxisId("x",e)),40):1:!n.axis_y_show||n.axis_y_inner?t.axis.getYAxisLabelPosition().isOuter?30:1:v(t.getAxisWidthByAxisId("y",e))},l.getCurrentPaddingRight=function(){var e=this,t=e.config,n=10,i=e.isLegendRight?e.getLegendWidth()+20:0;return p(t.padding_right)?t.padding_right+1:t.axis_rotated?n+i:!t.axis_y2_show||t.axis_y2_inner?2+i+(e.axis.getY2AxisLabelPosition().isOuter?20:0):v(e.getAxisWidthByAxisId("y2"))+i},l.getParentRectValue=function(e){for(var t,n=this.selectChart.node();n&&"BODY"!==n.tagName;){try{t=n.getBoundingClientRect()[e]}catch(i){"width"===e&&(t=n.offsetWidth)}if(t)break;n=n.parentNode}return t},l.getParentWidth=function(){return this.getParentRectValue("width")},l.getParentHeight=function(){var e=this.selectChart.style("height");return e.indexOf("px")>0?+e.replace("px",""):0},l.getSvgLeft=function(e){var t=this,n=t.config,i=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,r=n.axis_rotated?d.axisX:d.axisY,a=t.main.select("."+r).node(),o=a&&i?a.getBoundingClientRect():{right:0},s=t.selectChart.node().getBoundingClientRect(),l=t.hasArcType(),c=o.right-s.left-(l?0:t.getCurrentPaddingLeft(e));return c>0?c:0},l.getAxisWidthByAxisId=function(e,t){var n=this,i=n.axis.getLabelPositionById(e);return n.axis.getMaxTickWidth(e,t)+(i.isInner?20:40)},l.getHorizontalAxisHeight=function(e){var t=this,n=t.config,i=30;return"x"!==e||n.axis_x_show?"x"===e&&n.axis_x_height?n.axis_x_height:"y"!==e||n.axis_y_show?"y2"!==e||n.axis_y2_show?("x"===e&&!n.axis_rotated&&n.axis_x_tick_rotate&&(i=30+t.axis.getMaxTickWidth(e)*Math.cos(Math.PI*(90-n.axis_x_tick_rotate)/180)),i+(t.axis.getLabelPositionById(e).isInner?0:10)+("y2"===e?-10:0)):t.rotated_padding_top:!n.legend_show||t.isLegendRight||t.isLegendInset?1:10:8},l.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},l.getShapeIndices=function(e){var t,n,i=this,r=i.config,a={},o=0;return i.filterTargetsToShow(i.data.targets.filter(e,i)).forEach(function(e){for(t=0;t<r.data_groups.length;t++)if(!(r.data_groups[t].indexOf(e.id)<0))for(n=0;n<r.data_groups[t].length;n++)if(r.data_groups[t][n]in a){a[e.id]=a[r.data_groups[t][n]];break}g(a[e.id])&&(a[e.id]=o++)}),a.__max__=o-1,a},l.getShapeX=function(e,t,n,i){var r=this,a=i?r.subX:r.x;return function(i){var r=i.id in n?n[i.id]:0;return i.x||0===i.x?a(i.x)-e*(t/2-r):0}},l.getShapeY=function(e){var t=this;return function(n){var i=e?t.getSubYScale(n.id):t.getYScale(n.id);return i(n.value)}},l.getShapeOffset=function(e,t,n){var i=this,r=i.orderTargets(i.filterTargetsToShow(i.data.targets.filter(e,i))),a=r.map(function(e){return e.id});return function(e,o){var s=n?i.getSubYScale(e.id):i.getYScale(e.id),l=s(0),c=l;return r.forEach(function(n){var r=i.isStepType(e)?i.convertValuesToStep(n.values):n.values;n.id!==e.id&&t[n.id]===t[e.id]&&a.indexOf(n.id)<a.indexOf(e.id)&&r[o].value*e.value>=0&&(c+=s(r[o].value)-l)}),c}},l.isWithinShape=function(e,t){var n,i=this,r=i.d3.select(e);return i.isTargetToShow(t.id)?"circle"===e.nodeName?n=i.isStepType(t)?i.isWithinStep(e,i.getYScale(t.id)(t.value)):i.isWithinCircle(e,1.5*i.pointSelectR(t)):"path"===e.nodeName&&(n=r.classed(d.bar)?i.isWithinBar(e):!0):n=!1,n},l.getInterpolate=function(e){var t=this;return t.isSplineType(e)?"cardinal":t.isStepType(e)?t.config.line_step_type:"linear"},l.initLine=function(){var e=this;e.main.select("."+d.chart).append("g").attr("class",d.chartLines)},l.updateTargetsForLine=function(e){var t,n,i=this,r=i.config,a=i.classChartLine.bind(i),o=i.classLines.bind(i),s=i.classAreas.bind(i),l=i.classCircles.bind(i),c=i.classFocus.bind(i);t=i.main.select("."+d.chartLines).selectAll("."+d.chartLine).data(e).attr("class",function(e){return a(e)+c(e)}),n=t.enter().append("g").attr("class",a).style("opacity",0).style("pointer-events","none"),n.append("g").attr("class",o),n.append("g").attr("class",s),n.append("g").attr("class",function(e){return i.generateClass(d.selectedCircles,e.id)}),n.append("g").attr("class",l).style("cursor",function(e){return r.data_selection_isselectable(e)?"pointer":null}),e.forEach(function(e){i.main.selectAll("."+d.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll("."+d.selectedCircle).each(function(t){t.value=e.values[t.index].value})})},l.updateLine=function(e){var t=this;t.mainLine=t.main.selectAll("."+d.lines).selectAll("."+d.line).data(t.lineData.bind(t)),t.mainLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color),t.mainLine.style("opacity",t.initialOpacity.bind(t)).style("shape-rendering",function(e){return t.isStepType(e)?"crispEdges":""}).attr("transform",null),t.mainLine.exit().transition().duration(e).style("opacity",0).remove()},l.redrawLine=function(e,t){return[(t?this.mainLine.transition():this.mainLine).attr("d",e).style("stroke",this.color).style("opacity",1)]},l.generateDrawLine=function(e,t){var n=this,i=n.config,r=n.d3.svg.line(),a=n.generateGetLinePoints(e,t),o=t?n.getSubYScale:n.getYScale,s=function(e){return(t?n.subxx:n.xx).call(n,e)},l=function(e,t){return i.data_groups.length>0?a(e,t)[0][1]:o.call(n,e.id)(e.value)};return r=i.axis_rotated?r.x(l).y(s):r.x(s).y(l),i.line_connectNull||(r=r.defined(function(e){return null!=e.value})),function(e){var a,s=i.line_connectNull?n.filterRemoveNull(e.values):e.values,l=t?n.x:n.subX,c=o.call(n,e.id),u=0,d=0;return n.isLineType(e)?i.data_regions[e.id]?a=n.lineWithRegions(s,l,c,i.data_regions[e.id]):(n.isStepType(e)&&(s=n.convertValuesToStep(s)),a=r.interpolate(n.getInterpolate(e))(s)):(s[0]&&(u=l(s[0].x),d=c(s[0].value)),a=i.axis_rotated?"M "+d+" "+u:"M "+u+" "+d),a?a:"M 0 0"}},l.generateGetLinePoints=function(e,t){var n=this,i=n.config,r=e.__max__+1,a=n.getShapeX(0,r,e,!!t),o=n.getShapeY(!!t),s=n.getShapeOffset(n.isLineType,e,!!t),l=t?n.getSubYScale:n.getYScale;return function(e,t){var r=l.call(n,e.id)(0),c=s(e,t)||r,u=a(e),d=o(e);return i.axis_rotated&&(0<e.value&&r>d||e.value<0&&d>r)&&(d=r),[[u,d-(r-c)],[u,d-(r-c)],[u,d-(r-c)],[u,d-(r-c)]]}},l.lineWithRegions=function(e,t,n,i){function r(e,t){var n;for(n=0;n<t.length;n++)if(t[n].start<e&&e<=t[n].end)return!0;return!1}function a(e){return"M"+e[0][0]+" "+e[0][1]+" "+e[1][0]+" "+e[1][1]}var o,s,l,c,u,d,p,h,f,v,y,b,w=this,x=w.config,k=-1,C="M",S=w.isCategorized()?.5:0,_=[];if(m(i))for(o=0;o<i.length;o++)_[o]={},_[o].start=g(i[o].start)?e[0].x:w.isTimeSeries()?w.parseDate(i[o].start):i[o].start,_[o].end=g(i[o].end)?e[e.length-1].x:w.isTimeSeries()?w.parseDate(i[o].end):i[o].end;for(y=x.axis_rotated?function(e){return n(e.value)}:function(e){return t(e.x)},b=x.axis_rotated?function(e){return t(e.x)}:function(e){return n(e.value)},l=w.isTimeSeries()?function(e,i,r,o){var s,l=e.x.getTime(),c=i.x-e.x,d=new Date(l+c*r),p=new Date(l+c*(r+o));return s=x.axis_rotated?[[n(u(r)),t(d)],[n(u(r+o)),t(p)]]:[[t(d),n(u(r))],[t(p),n(u(r+o))]],a(s)}:function(e,i,r,o){var s;return s=x.axis_rotated?[[n(u(r),!0),t(c(r))],[n(u(r+o),!0),t(c(r+o))]]:[[t(c(r),!0),n(u(r))],[t(c(r+o),!0),n(u(r+o))]],a(s)},o=0;o<e.length;o++){if(g(_)||!r(e[o].x,_))C+=" "+y(e[o])+" "+b(e[o]);else for(c=w.getScale(e[o-1].x+S,e[o].x+S,w.isTimeSeries()),u=w.getScale(e[o-1].value,e[o].value),d=t(e[o].x)-t(e[o-1].x),p=n(e[o].value)-n(e[o-1].value),h=Math.sqrt(Math.pow(d,2)+Math.pow(p,2)),f=2/h,v=2*f,s=f;1>=s;s+=v)C+=l(e[o-1],e[o],s,f);k=e[o].x}return C},l.updateArea=function(e){var t=this,n=t.d3;t.mainArea=t.main.selectAll("."+d.areas).selectAll("."+d.area).data(t.lineData.bind(t)),t.mainArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+n.select(this).style("opacity"),0}),t.mainArea.style("opacity",t.orgAreaOpacity),t.mainArea.exit().transition().duration(e).style("opacity",0).remove()},l.redrawArea=function(e,t){return[(t?this.mainArea.transition():this.mainArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},l.generateDrawArea=function(e,t){var n=this,i=n.config,r=n.d3.svg.area(),a=n.generateGetAreaPoints(e,t),o=t?n.getSubYScale:n.getYScale,s=function(e){return(t?n.subxx:n.xx).call(n,e)},l=function(e,t){
return i.data_groups.length>0?a(e,t)[0][1]:o.call(n,e.id)(n.getAreaBaseValue(e.id))},c=function(e,t){return i.data_groups.length>0?a(e,t)[1][1]:o.call(n,e.id)(e.value)};return r=i.axis_rotated?r.x0(l).x1(c).y(s):r.x(s).y0(l).y1(c),i.line_connectNull||(r=r.defined(function(e){return null!==e.value})),function(e){var t,a=i.line_connectNull?n.filterRemoveNull(e.values):e.values,o=0,s=0;return n.isAreaType(e)?(n.isStepType(e)&&(a=n.convertValuesToStep(a)),t=r.interpolate(n.getInterpolate(e))(a)):(a[0]&&(o=n.x(a[0].x),s=n.getYScale(e.id)(a[0].value)),t=i.axis_rotated?"M "+s+" "+o:"M "+o+" "+s),t?t:"M 0 0"}},l.getAreaBaseValue=function(){return 0},l.generateGetAreaPoints=function(e,t){var n=this,i=n.config,r=e.__max__+1,a=n.getShapeX(0,r,e,!!t),o=n.getShapeY(!!t),s=n.getShapeOffset(n.isAreaType,e,!!t),l=t?n.getSubYScale:n.getYScale;return function(e,t){var r=l.call(n,e.id)(0),c=s(e,t)||r,u=a(e),d=o(e);return i.axis_rotated&&(0<e.value&&r>d||e.value<0&&d>r)&&(d=r),[[u,c],[u,d-(r-c)],[u,d-(r-c)],[u,c]]}},l.updateCircle=function(){var e=this;e.mainCircle=e.main.selectAll("."+d.circles).selectAll("."+d.circle).data(e.lineOrScatterData.bind(e)),e.mainCircle.enter().append("circle").attr("class",e.classCircle.bind(e)).attr("r",e.pointR.bind(e)).style("fill",e.color),e.mainCircle.style("opacity",e.initialOpacityForCircle.bind(e)),e.mainCircle.exit().remove()},l.redrawCircle=function(e,t,n){var i=this.main.selectAll("."+d.selectedCircle);return[(n?this.mainCircle.transition():this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",e).attr("cy",t),(n?i.transition():i).attr("cx",e).attr("cy",t)]},l.circleX=function(e){return e.x||0===e.x?this.x(e.x):null},l.updateCircleY=function(){var e,t,n=this;n.config.data_groups.length>0?(e=n.getShapeIndices(n.isLineType),t=n.generateGetLinePoints(e),n.circleY=function(e,n){return t(e,n)[0][1]}):n.circleY=function(e){return n.getYScale(e.id)(e.value)}},l.getCircles=function(e,t){var n=this;return(t?n.main.selectAll("."+d.circles+n.getTargetSelectorSuffix(t)):n.main).selectAll("."+d.circle+(p(e)?"-"+e:""))},l.expandCircles=function(e,t,n){var i=this,r=i.pointExpandedR.bind(i);n&&i.unexpandCircles(),i.getCircles(e,t).classed(d.EXPANDED,!0).attr("r",r)},l.unexpandCircles=function(e){var t=this,n=t.pointR.bind(t);t.getCircles(e).filter(function(){return t.d3.select(this).classed(d.EXPANDED)}).classed(d.EXPANDED,!1).attr("r",n)},l.pointR=function(e){var t=this,n=t.config;return t.isStepType(e)?0:h(n.point_r)?n.point_r(e):n.point_r},l.pointExpandedR=function(e){var t=this,n=t.config;return n.point_focus_expand_enabled?n.point_focus_expand_r?n.point_focus_expand_r:1.75*t.pointR(e):t.pointR(e)},l.pointSelectR=function(e){var t=this,n=t.config;return n.point_select_r?n.point_select_r:4*t.pointR(e)},l.isWithinCircle=function(e,t){var n=this.d3,i=n.mouse(e),r=n.select(e),a=+r.attr("cx"),o=+r.attr("cy");return Math.sqrt(Math.pow(a-i[0],2)+Math.pow(o-i[1],2))<t},l.isWithinStep=function(e,t){return Math.abs(t-this.d3.mouse(e)[1])<30},l.initBar=function(){var e=this;e.main.select("."+d.chart).append("g").attr("class",d.chartBars)},l.updateTargetsForBar=function(e){var t,n,i=this,r=i.config,a=i.classChartBar.bind(i),o=i.classBars.bind(i),s=i.classFocus.bind(i);t=i.main.select("."+d.chartBars).selectAll("."+d.chartBar).data(e).attr("class",function(e){return a(e)+s(e)}),n=t.enter().append("g").attr("class",a).style("opacity",0).style("pointer-events","none"),n.append("g").attr("class",o).style("cursor",function(e){return r.data_selection_isselectable(e)?"pointer":null})},l.updateBar=function(e){var t=this,n=t.barData.bind(t),i=t.classBar.bind(t),r=t.initialOpacity.bind(t),a=function(e){return t.color(e.id)};t.mainBar=t.main.selectAll("."+d.bars).selectAll("."+d.bar).data(n),t.mainBar.enter().append("path").attr("class",i).style("stroke",a).style("fill",a),t.mainBar.style("opacity",r),t.mainBar.exit().transition().duration(e).style("opacity",0).remove()},l.redrawBar=function(e,t){return[(t?this.mainBar.transition():this.mainBar).attr("d",e).style("fill",this.color).style("opacity",1)]},l.getBarW=function(e,t){var n=this,i=n.config,r="number"==typeof i.bar_width?i.bar_width:t?e.tickInterval()*i.bar_width_ratio/t:0;return i.bar_width_max&&r>i.bar_width_max?i.bar_width_max:r},l.getBars=function(e,t){var n=this;return(t?n.main.selectAll("."+d.bars+n.getTargetSelectorSuffix(t)):n.main).selectAll("."+d.bar+(p(e)?"-"+e:""))},l.expandBars=function(e,t,n){var i=this;n&&i.unexpandBars(),i.getBars(e,t).classed(d.EXPANDED,!0)},l.unexpandBars=function(e){var t=this;t.getBars(e).classed(d.EXPANDED,!1)},l.generateDrawBar=function(e,t){var n=this,i=n.config,r=n.generateGetBarPoints(e,t);return function(e,t){var n=r(e,t),a=i.axis_rotated?1:0,o=i.axis_rotated?0:1,s="M "+n[0][a]+","+n[0][o]+" L"+n[1][a]+","+n[1][o]+" L"+n[2][a]+","+n[2][o]+" L"+n[3][a]+","+n[3][o]+" z";return s}},l.generateGetBarPoints=function(e,t){var n=this,i=t?n.subXAxis:n.xAxis,r=e.__max__+1,a=n.getBarW(i,r),o=n.getShapeX(a,r,e,!!t),s=n.getShapeY(!!t),l=n.getShapeOffset(n.isBarType,e,!!t),c=t?n.getSubYScale:n.getYScale;return function(e,t){var i=c.call(n,e.id)(0),r=l(e,t)||i,u=o(e),d=s(e);return n.config.axis_rotated&&(0<e.value&&i>d||e.value<0&&d>i)&&(d=i),[[u,r],[u,d-(i-r)],[u+a,d-(i-r)],[u+a,r]]}},l.isWithinBar=function(e){var t=this.d3.mouse(e),n=e.getBoundingClientRect(),i=e.pathSegList.getItem(0),r=e.pathSegList.getItem(1),a=Math.min(i.x,r.x),o=Math.min(i.y,r.y),s=n.width,l=n.height,c=2,u=a-c,d=a+s+c,p=o+l+c,h=o-c;return u<t[0]&&t[0]<d&&h<t[1]&&t[1]<p},l.initText=function(){var e=this;e.main.select("."+d.chart).append("g").attr("class",d.chartTexts),e.mainText=e.d3.selectAll([])},l.updateTargetsForText=function(e){var t,n,i=this,r=i.classChartText.bind(i),a=i.classTexts.bind(i),o=i.classFocus.bind(i);t=i.main.select("."+d.chartTexts).selectAll("."+d.chartText).data(e).attr("class",function(e){return r(e)+o(e)}),n=t.enter().append("g").attr("class",r).style("opacity",0).style("pointer-events","none"),n.append("g").attr("class",a)},l.updateText=function(e){var t=this,n=t.config,i=t.barOrLineData.bind(t),r=t.classText.bind(t);t.mainText=t.main.selectAll("."+d.texts).selectAll("."+d.text).data(i),t.mainText.enter().append("text").attr("class",r).attr("text-anchor",function(e){return n.axis_rotated?e.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(e){return t.color(e)}).style("fill-opacity",0),t.mainText.text(function(e,n,i){return t.dataLabelFormat(e.id)(e.value,e.id,n,i)}),t.mainText.exit().transition().duration(e).style("fill-opacity",0).remove()},l.redrawText=function(e,t,n,i){return[(i?this.mainText.transition():this.mainText).attr("x",e).attr("y",t).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]},l.getTextRect=function(e,t){var n,i=this.d3.select("body").append("div").classed("c3",!0),r=i.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0);return r.selectAll(".dummy").data([e]).enter().append("text").classed(t?t:"",!0).text(e).each(function(){n=this.getBoundingClientRect()}),i.remove(),n},l.generateXYForText=function(e,t,n,i){var r=this,a=r.generateGetAreaPoints(e,!1),o=r.generateGetBarPoints(t,!1),s=r.generateGetLinePoints(n,!1),l=i?r.getXForText:r.getYForText;return function(e,t){var n=r.isAreaType(e)?a:r.isBarType(e)?o:s;return l.call(r,n(e,t),e,this)}},l.getXForText=function(e,t,n){var i,r,a=this,o=n.getBoundingClientRect();return a.config.axis_rotated?(r=a.isBarType(t)?4:6,i=e[2][1]+r*(t.value<0?-1:1)):i=a.hasType("bar")?(e[2][0]+e[0][0])/2:e[0][0],null===t.value&&(i>a.width?i=a.width-o.width:0>i&&(i=4)),i},l.getYForText=function(e,t,n){var i,r=this,a=n.getBoundingClientRect();return r.config.axis_rotated?i=(e[0][0]+e[2][0]+.6*a.height)/2:(i=e[2][1],t.value<0?(i+=a.height,r.isBarType(t)&&r.isSafari()?i-=3:!r.isBarType(t)&&r.isChrome()&&(i+=3)):i+=r.isBarType(t)?-3:-6),null!==t.value||r.config.axis_rotated||(i<a.height?i=a.height:i>this.height&&(i=this.height-4)),i},l.setTargetType=function(e,t){var n=this,i=n.config;n.mapToTargetIds(e).forEach(function(e){n.withoutFadeIn[e]=t===i.data_types[e],i.data_types[e]=t}),e||(i.data_type=t)},l.hasType=function(e,t){var n=this,i=n.config.data_types,r=!1;return t=t||n.data.targets,t&&t.length?t.forEach(function(t){var n=i[t.id];(n&&n.indexOf(e)>=0||!n&&"line"===e)&&(r=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(t){i[t]===e&&(r=!0)}):r=n.config.data_type===e,r},l.hasArcType=function(e){return this.hasType("pie",e)||this.hasType("donut",e)||this.hasType("gauge",e)},l.isLineType=function(e){var t=this.config,n=f(e)?e:e.id;return!t.data_types[n]||["line","spline","area","area-spline","step","area-step"].indexOf(t.data_types[n])>=0},l.isStepType=function(e){var t=f(e)?e:e.id;return["step","area-step"].indexOf(this.config.data_types[t])>=0},l.isSplineType=function(e){var t=f(e)?e:e.id;return["spline","area-spline"].indexOf(this.config.data_types[t])>=0},l.isAreaType=function(e){var t=f(e)?e:e.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[t])>=0},l.isBarType=function(e){var t=f(e)?e:e.id;return"bar"===this.config.data_types[t]},l.isScatterType=function(e){var t=f(e)?e:e.id;return"scatter"===this.config.data_types[t]},l.isPieType=function(e){var t=f(e)?e:e.id;return"pie"===this.config.data_types[t]},l.isGaugeType=function(e){var t=f(e)?e:e.id;return"gauge"===this.config.data_types[t]},l.isDonutType=function(e){var t=f(e)?e:e.id;return"donut"===this.config.data_types[t]},l.isArcType=function(e){return this.isPieType(e)||this.isDonutType(e)||this.isGaugeType(e)},l.lineData=function(e){return this.isLineType(e)?[e]:[]},l.arcData=function(e){return this.isArcType(e.data)?[e]:[]},l.barData=function(e){return this.isBarType(e)?e.values:[]},l.lineOrScatterData=function(e){return this.isLineType(e)||this.isScatterType(e)?e.values:[]},l.barOrLineData=function(e){return this.isBarType(e)||this.isLineType(e)?e.values:[]},l.initGrid=function(){var e=this,t=e.config,n=e.d3;e.grid=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",d.grid),t.grid_x_show&&e.grid.append("g").attr("class",d.xgrids),t.grid_y_show&&e.grid.append("g").attr("class",d.ygrids),t.grid_focus_show&&e.grid.append("g").attr("class",d.xgridFocus).append("line").attr("class",d.xgridFocus),e.xgrid=n.selectAll([]),t.grid_lines_front||e.initGridLines()},l.initGridLines=function(){var e=this,t=e.d3;e.gridLines=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",d.grid+" "+d.gridLines),e.gridLines.append("g").attr("class",d.xgridLines),e.gridLines.append("g").attr("class",d.ygridLines),e.xgridLines=t.selectAll([])},l.updateXGrid=function(e){var t=this,n=t.config,i=t.d3,r=t.generateGridData(n.grid_x_type,t.x),a=t.isCategorized()?t.xAxis.tickOffset():0;t.xgridAttr=n.axis_rotated?{x1:0,x2:t.width,y1:function(e){return t.x(e)-a},y2:function(e){return t.x(e)-a}}:{x1:function(e){return t.x(e)+a},x2:function(e){return t.x(e)+a},y1:0,y2:t.height},t.xgrid=t.main.select("."+d.xgrids).selectAll("."+d.xgrid).data(r),t.xgrid.enter().append("line").attr("class",d.xgrid),e||t.xgrid.attr(t.xgridAttr).style("opacity",function(){return+i.select(this).attr(n.axis_rotated?"y1":"x1")===(n.axis_rotated?t.height:0)?0:1}),t.xgrid.exit().remove()},l.updateYGrid=function(){var e=this,t=e.config,n=e.yAxis.tickValues()||e.y.ticks(t.grid_y_ticks);e.ygrid=e.main.select("."+d.ygrids).selectAll("."+d.ygrid).data(n),e.ygrid.enter().append("line").attr("class",d.ygrid),e.ygrid.attr("x1",t.axis_rotated?e.y:0).attr("x2",t.axis_rotated?e.y:e.width).attr("y1",t.axis_rotated?0:e.y).attr("y2",t.axis_rotated?e.height:e.y),e.ygrid.exit().remove(),e.smoothLines(e.ygrid,"grid")},l.gridTextAnchor=function(e){return e.position?e.position:"end"},l.gridTextDx=function(e){return"start"===e.position?4:"middle"===e.position?0:-4},l.xGridTextX=function(e){return"start"===e.position?-this.height:"middle"===e.position?-this.height/2:0},l.yGridTextX=function(e){return"start"===e.position?0:"middle"===e.position?this.width/2:this.width},l.updateGrid=function(e){var t,n,i,r=this,a=r.main,o=r.config;r.grid.style("visibility",r.hasArcType()?"hidden":"visible"),a.select("line."+d.xgridFocus).style("visibility","hidden"),o.grid_x_show&&r.updateXGrid(),r.xgridLines=a.select("."+d.xgridLines).selectAll("."+d.xgridLine).data(o.grid_x_lines),t=r.xgridLines.enter().append("g").attr("class",function(e){return d.xgridLine+(e["class"]?" "+e["class"]:"")}),t.append("line").style("opacity",0),t.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",o.axis_rotated?"":"rotate(-90)").attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),r.xgridLines.exit().transition().duration(e).style("opacity",0).remove(),o.grid_y_show&&r.updateYGrid(),r.ygridLines=a.select("."+d.ygridLines).selectAll("."+d.ygridLine).data(o.grid_y_lines),n=r.ygridLines.enter().append("g").attr("class",function(e){return d.ygridLine+(e["class"]?" "+e["class"]:"")}),n.append("line").style("opacity",0),n.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",o.axis_rotated?"rotate(-90)":"").attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),i=r.yv.bind(r),r.ygridLines.select("line").transition().duration(e).attr("x1",o.axis_rotated?i:0).attr("x2",o.axis_rotated?i:r.width).attr("y1",o.axis_rotated?0:i).attr("y2",o.axis_rotated?r.height:i).style("opacity",1),r.ygridLines.select("text").transition().duration(e).attr("x",o.axis_rotated?r.xGridTextX.bind(r):r.yGridTextX.bind(r)).attr("y",i).text(function(e){return e.text}).style("opacity",1),r.ygridLines.exit().transition().duration(e).style("opacity",0).remove()},l.redrawGrid=function(e){var t=this,n=t.config,i=t.xv.bind(t),r=t.xgridLines.select("line"),a=t.xgridLines.select("text");return[(e?r.transition():r).attr("x1",n.axis_rotated?0:i).attr("x2",n.axis_rotated?t.width:i).attr("y1",n.axis_rotated?i:0).attr("y2",n.axis_rotated?i:t.height).style("opacity",1),(e?a.transition():a).attr("x",n.axis_rotated?t.yGridTextX.bind(t):t.xGridTextX.bind(t)).attr("y",i).text(function(e){return e.text}).style("opacity",1)]},l.showXGridFocus=function(e){var t=this,n=t.config,i=e.filter(function(e){return e&&p(e.value)}),r=t.main.selectAll("line."+d.xgridFocus),a=t.xx.bind(t);n.tooltip_show&&(t.hasType("scatter")||t.hasArcType()||(r.style("visibility","visible").data([i[0]]).attr(n.axis_rotated?"y1":"x1",a).attr(n.axis_rotated?"y2":"x2",a),t.smoothLines(r,"grid")))},l.hideXGridFocus=function(){this.main.select("line."+d.xgridFocus).style("visibility","hidden")},l.updateXgridFocus=function(){var e=this,t=e.config;e.main.select("line."+d.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?e.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:e.height)},l.generateGridData=function(e,t){var n,i,r,a,o=this,s=[],l=o.main.select("."+d.axisX).selectAll(".tick").size();if("year"===e)for(n=o.getXDomain(),i=n[0].getFullYear(),r=n[1].getFullYear(),a=i;r>=a;a++)s.push(new Date(a+"-01-01 00:00:00"));else s=t.ticks(10),s.length>l&&(s=s.filter(function(e){return(""+e).indexOf(".")<0}));return s},l.getGridFilterToRemove=function(e){return e?function(t){var n=!1;return[].concat(e).forEach(function(e){("value"in e&&t.value===e.value||"class"in e&&t["class"]===e["class"])&&(n=!0)}),n}:function(){return!0}},l.removeGridLines=function(e,t){var n=this,i=n.config,r=n.getGridFilterToRemove(e),a=function(e){return!r(e)},o=t?d.xgridLines:d.ygridLines,s=t?d.xgridLine:d.ygridLine;n.main.select("."+o).selectAll("."+s).filter(r).transition().duration(i.transition_duration).style("opacity",0).remove(),t?i.grid_x_lines=i.grid_x_lines.filter(a):i.grid_y_lines=i.grid_y_lines.filter(a)},l.initTooltip=function(){var e,t=this,n=t.config;if(t.tooltip=t.selectChart.style("position","relative").append("div").attr("class",d.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),n.tooltip_init_show){if(t.isTimeSeries()&&f(n.tooltip_init_x)){for(n.tooltip_init_x=t.parseDate(n.tooltip_init_x),e=0;e<t.data.targets[0].values.length&&t.data.targets[0].values[e].x-n.tooltip_init_x!==0;e++);n.tooltip_init_x=e}t.tooltip.html(n.tooltip_contents.call(t,t.data.targets.map(function(e){return t.addName(e.values[n.tooltip_init_x])}),t.axis.getXAxisTickFormat(),t.getYFormat(t.hasArcType()),t.color)),t.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}},l.getTooltipContent=function(e,t,n,i){var r,a,o,s,l,c,u=this,p=u.config,h=p.tooltip_format_title||t,f=p.tooltip_format_name||function(e){return e},g=p.tooltip_format_value||n;for(a=0;a<e.length;a++)e[a]&&(e[a].value||0===e[a].value)&&(r||(o=h?h(e[a].x):e[a].x,r="<table class='"+d.tooltip+"'>"+(o||0===o?"<tr><th colspan='2'>"+o+"</th></tr>":"")),s=g(e[a].value,e[a].ratio,e[a].id,e[a].index),void 0!==s&&(l=f(e[a].name,e[a].ratio,e[a].id,e[a].index),c=u.levelColor?u.levelColor(e[a].value):i(e[a].id),r+="<tr class='"+d.tooltipName+"-"+e[a].id+"'>",r+="<td class='name'><span style='background-color:"+c+"'></span>"+l+"</td>",r+="<td class='value'>"+s+"</td>",r+="</tr>"));return r+"</table>"},l.tooltipPosition=function(e,t,n,i){var r,a,o,s,l,c=this,u=c.config,d=c.d3,p=c.hasArcType(),h=d.mouse(i);return p?(a=(c.width-(c.isLegendRight?c.getLegendWidth():0))/2+h[0],s=c.height/2+h[1]+20):(r=c.getSvgLeft(!0),u.axis_rotated?(a=r+h[0]+100,o=a+t,l=c.currentWidth-c.getCurrentPaddingRight(),s=c.x(e[0].x)+20):(a=r+c.getCurrentPaddingLeft(!0)+c.x(e[0].x)+20,o=a+t,l=r+c.currentWidth-c.getCurrentPaddingRight(),s=h[1]+15),o>l&&(a-=o-l+20),s+n>c.currentHeight&&(s-=n+30)),0>s&&(s=0),{top:s,left:a}},l.showTooltip=function(e,t){var n,i,r,a=this,o=a.config,s=a.hasArcType(),c=e.filter(function(e){return e&&p(e.value)}),u=o.tooltip_position||l.tooltipPosition;0!==c.length&&o.tooltip_show&&(a.tooltip.html(o.tooltip_contents.call(a,e,a.axis.getXAxisTickFormat(),a.getYFormat(s),a.color)).style("display","block"),n=a.tooltip.property("offsetWidth"),i=a.tooltip.property("offsetHeight"),r=u.call(this,c,n,i,t),a.tooltip.style("top",r.top+"px").style("left",r.left+"px"))},l.hideTooltip=function(){this.tooltip.style("display","none")},l.initLegend=function(){var e=this;return e.legendItemTextBox={},e.legendHasRendered=!1,e.legend=e.svg.append("g").attr("transform",e.getTranslate("legend")),e.config.legend_show?void e.updateLegendWithDefaults():(e.legend.style("visibility","hidden"),void(e.hiddenLegendIds=e.mapToIds(e.data.targets)))},l.updateLegendWithDefaults=function(){var e=this;e.updateLegend(e.mapToIds(e.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},l.updateSizeForLegend=function(e,t){var n=this,i=n.config,r={top:n.isLegendTop?n.getCurrentPaddingTop()+i.legend_inset_y+5.5:n.currentHeight-e-n.getCurrentPaddingBottom()-i.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+i.legend_inset_x+.5:n.currentWidth-t-n.getCurrentPaddingRight()-i.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?r.top:n.currentHeight-e,right:0/0,bottom:0,left:n.isLegendRight?n.currentWidth-t:n.isLegendInset?r.left:0}},l.transformLegend=function(e){var t=this;(e?t.legend.transition():t.legend).attr("transform",t.getTranslate("legend"))},l.updateLegendStep=function(e){this.legendStep=e},l.updateLegendItemWidth=function(e){this.legendItemWidth=e},l.updateLegendItemHeight=function(e){this.legendItemHeight=e},l.getLegendWidth=function(){var e=this;return e.config.legend_show?e.isLegendRight||e.isLegendInset?e.legendItemWidth*(e.legendStep+1):e.currentWidth:0},l.getLegendHeight=function(){var e=this,t=0;return e.config.legend_show&&(t=e.isLegendRight?e.currentHeight:Math.max(20,e.legendItemHeight)*(e.legendStep+1)),t},l.opacityForLegend=function(e){return e.classed(d.legendItemHidden)?null:1},l.opacityForUnfocusedLegend=function(e){return e.classed(d.legendItemHidden)?null:.3},l.toggleFocusLegend=function(e,t){var n=this;e=n.mapToTargetIds(e),n.legend.selectAll("."+d.legendItem).filter(function(t){return e.indexOf(t)>=0}).classed(d.legendItemFocused,t).transition().duration(100).style("opacity",function(){var e=t?n.opacityForLegend:n.opacityForUnfocusedLegend;return e.call(n,n.d3.select(this))})},l.revertLegend=function(){var e=this,t=e.d3;e.legend.selectAll("."+d.legendItem).classed(d.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return e.opacityForLegend(t.select(this))})},l.showLegend=function(e){var t=this,n=t.config;n.legend_show||(n.legend_show=!0,t.legend.style("visibility","visible"),t.legendHasRendered||t.updateLegendWithDefaults()),t.removeHiddenLegendIds(e),t.legend.selectAll(t.selectorLegends(e)).style("visibility","visible").transition().style("opacity",function(){return t.opacityForLegend(t.d3.select(this))})},l.hideLegend=function(e){var t=this,n=t.config;n.legend_show&&w(e)&&(n.legend_show=!1,t.legend.style("visibility","hidden")),t.addHiddenLegendIds(e),t.legend.selectAll(t.selectorLegends(e)).style("opacity",0).style("visibility","hidden")},l.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},l.updateLegend=function(e,t,n){function i(e,t){return w.legendItemTextBox[t]||(w.legendItemTextBox[t]=w.getTextRect(e.textContent,d.legendItem)),w.legendItemTextBox[t]}function r(t,n,r){function a(e,t){t||(o=(f-E-h)/2,$>o&&(o=(f-h)/2,E=0,j++)),N[e]=j,M[j]=w.isLegendInset?10:o,P[e]=E,E+=h}var o,s,l=0===r,c=r===e.length-1,u=i(t,n),d=u.width+A+(!c||w.isLegendRight||w.isLegendInset?S:0),p=u.height+C,h=w.isLegendRight||w.isLegendInset?p:d,f=w.isLegendRight||w.isLegendInset?w.getLegendHeight():w.getLegendWidth();return l&&(E=0,j=0,_=0,T=0),x.legend_show&&!w.isLegendToShow(n)?void(I[n]=D[n]=N[n]=P[n]=0):(I[n]=d,D[n]=p,(!_||d>=_)&&(_=d),(!T||p>=T)&&(T=p),s=w.isLegendRight||w.isLegendInset?T:_,void(x.legend_equally?(Object.keys(I).forEach(function(e){I[e]=_}),Object.keys(D).forEach(function(e){D[e]=T}),o=(f-s*e.length)/2,$>o?(E=0,j=0,e.forEach(function(e){a(e)})):a(n,!0)):a(n)))}var a,o,s,l,c,u,p,h,f,g,v,y,b,w=this,x=w.config,C=4,S=10,_=0,T=0,$=10,A=15,E=0,P={},I={},D={},M=[0],N={},j=0;t=t||{},h=k(t,"withTransition",!0),f=k(t,"withTransitionForTransform",!0),w.isLegendInset&&(j=x.legend_inset_step?x.legend_inset_step:e.length,w.updateLegendStep(j)),w.isLegendRight?(a=function(e){return _*N[e]},l=function(e){return M[N[e]]+P[e]}):w.isLegendInset?(a=function(e){return _*N[e]+10},l=function(e){return M[N[e]]+P[e]}):(a=function(e){return M[N[e]]+P[e]},l=function(e){return T*N[e]}),o=function(e,t){return a(e,t)+14},c=function(e,t){return l(e,t)+9},s=function(e,t){return a(e,t)},u=function(e,t){return l(e,t)-5},p=w.legend.selectAll("."+d.legendItem).data(e).enter().append("g").attr("class",function(e){return w.generateClass(d.legendItem,e)}).style("visibility",function(e){return w.isLegendToShow(e)?"visible":"hidden"}).style("cursor","pointer").on("click",function(e){x.legend_item_onclick?x.legend_item_onclick.call(w,e):w.d3.event.altKey?(w.api.hide(),w.api.show(e)):(w.api.toggle(e),w.isTargetToShow(e)?w.api.focus(e):w.api.revert())}).on("mouseover",function(e){w.d3.select(this).classed(d.legendItemFocused,!0),!w.transiting&&w.isTargetToShow(e)&&w.api.focus(e),x.legend_item_onmouseover&&x.legend_item_onmouseover.call(w,e)}).on("mouseout",function(e){w.d3.select(this).classed(d.legendItemFocused,!1),w.api.revert(),x.legend_item_onmouseout&&x.legend_item_onmouseout.call(w,e)}),p.append("text").text(function(e){return m(x.data_names[e])?x.data_names[e]:e}).each(function(e,t){r(this,e,t)}).style("pointer-events","none").attr("x",w.isLegendRight||w.isLegendInset?o:-200).attr("y",w.isLegendRight||w.isLegendInset?-200:c),p.append("rect").attr("class",d.legendItemEvent).style("fill-opacity",0).attr("x",w.isLegendRight||w.isLegendInset?s:-200).attr("y",w.isLegendRight||w.isLegendInset?-200:u),p.append("rect").attr("class",d.legendItemTile).style("pointer-events","none").style("fill",w.color).attr("x",w.isLegendRight||w.isLegendInset?o:-200).attr("y",w.isLegendRight||w.isLegendInset?-200:l).attr("width",10).attr("height",10),b=w.legend.select("."+d.legendBackground+" rect"),w.isLegendInset&&_>0&&0===b.size()&&(b=w.legend.insert("g","."+d.legendItem).attr("class",d.legendBackground).append("rect")),g=w.legend.selectAll("text").data(e).text(function(e){return m(x.data_names[e])?x.data_names[e]:e}).each(function(e,t){r(this,e,t)}),(h?g.transition():g).attr("x",o).attr("y",c),v=w.legend.selectAll("rect."+d.legendItemEvent).data(e),(h?v.transition():v).attr("width",function(e){return I[e]}).attr("height",function(e){return D[e]}).attr("x",s).attr("y",u),y=w.legend.selectAll("rect."+d.legendItemTile).data(e),(h?y.transition():y).style("fill",w.color).attr("x",a).attr("y",l),b&&(h?b.transition():b).attr("height",w.getLegendHeight()-12).attr("width",_*(j+1)+10),w.legend.selectAll("."+d.legendItem).classed(d.legendItemHidden,function(e){return!w.isTargetToShow(e)}),w.updateLegendItemWidth(_),w.updateLegendItemHeight(T),w.updateLegendStep(j),w.updateSizes(),w.updateScales(),w.updateSvgSize(),w.transformAll(f,n),w.legendHasRendered=!0},n(t,a),a.prototype.init=function(){var e=this.owner,t=e.config,n=e.main;e.axes.x=n.append("g").attr("class",d.axis+" "+d.axisX).attr("clip-path",e.clipPathForXAxis).attr("transform",e.getTranslate("x")).style("visibility",t.axis_x_show?"visible":"hidden"),e.axes.x.append("text").attr("class",d.axisXLabel).attr("transform",t.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),e.axes.y=n.append("g").attr("class",d.axis+" "+d.axisY).attr("clip-path",t.axis_y_inner?"":e.clipPathForYAxis).attr("transform",e.getTranslate("y")).style("visibility",t.axis_y_show?"visible":"hidden"),e.axes.y.append("text").attr("class",d.axisYLabel).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),e.axes.y2=n.append("g").attr("class",d.axis+" "+d.axisY2).attr("transform",e.getTranslate("y2")).style("visibility",t.axis_y2_show?"visible":"hidden"),e.axes.y2.append("text").attr("class",d.axisY2Label).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},a.prototype.getXAxis=function(e,t,n,i,r,a,s){var l=this.owner,c=l.config,u={isCategory:l.isCategorized(),withOuterTick:r,tickMultiline:c.axis_x_tick_multiline,tickWidth:c.axis_x_tick_width,tickTextRotate:s?0:c.axis_x_tick_rotate,withoutTransition:a},d=o(l.d3,u).scale(e).orient(t);return l.isTimeSeries()&&i&&(i=i.map(function(e){return l.parseDate(e)})),d.tickFormat(n).tickValues(i),l.isCategorized()&&(d.tickCentered(c.axis_x_tick_centered),w(c.axis_x_tick_culling)&&(c.axis_x_tick_culling=!1)),d},a.prototype.updateXAxisTickValues=function(e,t){var n,i=this.owner,r=i.config;return(r.axis_x_tick_fit||r.axis_x_tick_count)&&(n=this.generateTickValues(i.mapTargetsToUniqueXs(e),r.axis_x_tick_count,i.isTimeSeries())),t?t.tickValues(n):(i.xAxis.tickValues(n),i.subXAxis.tickValues(n)),n},a.prototype.getYAxis=function(e,t,n,i,r,a){var s={withOuterTick:r,withoutTransition:a},l=this.owner,c=l.d3,u=l.config,d=o(c,s).scale(e).orient(t).tickFormat(n);return l.isTimeSeriesY()?d.ticks(c.time[u.axis_y_tick_time_value],u.axis_y_tick_time_interval):d.tickValues(i),d},a.prototype.getId=function(e){var t=this.owner.config;return e in t.data_axes?t.data_axes[e]:"y"},a.prototype.getXAxisTickFormat=function(){var e=this.owner,t=e.config,n=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(e){return 0>e?e.toFixed(0):e};return t.axis_x_tick_format&&(h(t.axis_x_tick_format)?n=t.axis_x_tick_format:e.isTimeSeries()&&(n=function(n){return n?e.axisTimeFormat(t.axis_x_tick_format)(n):""})),h(n)?function(t){return n.call(e,t)}:n},a.prototype.getTickValues=function(e,t){return e?e:t?t.tickValues():void 0},a.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},a.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},a.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},a.prototype.getLabelOptionByAxisId=function(e){var t,n=this.owner,i=n.config;return"y"===e?t=i.axis_y_label:"y2"===e?t=i.axis_y2_label:"x"===e&&(t=i.axis_x_label),t},a.prototype.getLabelText=function(e){var t=this.getLabelOptionByAxisId(e);return f(t)?t:t?t.text:null},a.prototype.setLabelText=function(e,t){var n=this.owner,i=n.config,r=this.getLabelOptionByAxisId(e);f(r)?"y"===e?i.axis_y_label=t:"y2"===e?i.axis_y2_label=t:"x"===e&&(i.axis_x_label=t):r&&(r.text=t)},a.prototype.getLabelPosition=function(e,t){var n=this.getLabelOptionByAxisId(e),i=n&&"object"==typeof n&&n.position?n.position:t;return{isInner:i.indexOf("inner")>=0,isOuter:i.indexOf("outer")>=0,isLeft:i.indexOf("left")>=0,isCenter:i.indexOf("center")>=0,isRight:i.indexOf("right")>=0,isTop:i.indexOf("top")>=0,isMiddle:i.indexOf("middle")>=0,isBottom:i.indexOf("bottom")>=0}},a.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},a.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},a.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},a.prototype.getLabelPositionById=function(e){return"y2"===e?this.getY2AxisLabelPosition():"y"===e?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},a.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},a.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},a.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},a.prototype.xForAxisLabel=function(e,t){var n=this.owner;return e?t.isLeft?0:t.isCenter?n.width/2:n.width:t.isBottom?-n.height:t.isMiddle?-n.height/2:0},a.prototype.dxForAxisLabel=function(e,t){return e?t.isLeft?"0.5em":t.isRight?"-0.5em":"0":t.isTop?"-0.5em":t.isBottom?"0.5em":"0"},a.prototype.textAnchorForAxisLabel=function(e,t){return e?t.isLeft?"start":t.isCenter?"middle":"end":t.isBottom?"start":t.isMiddle?"middle":"end"},a.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},a.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},a.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},a.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},a.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},a.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},a.prototype.dyForXAxisLabel=function(){var e=this.owner,t=e.config,n=this.getXAxisLabelPosition();return t.axis_rotated?n.isInner?"1.2em":-25-this.getMaxTickWidth("x"):n.isInner?"-0.5em":t.axis_x_height?t.axis_x_height-10:"3em"},a.prototype.dyForYAxisLabel=function(){var e=this.owner,t=this.getYAxisLabelPosition();return e.config.axis_rotated?t.isInner?"-0.5em":"3em":t.isInner?"1.2em":-10-(e.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},a.prototype.dyForY2AxisLabel=function(){var e=this.owner,t=this.getY2AxisLabelPosition();return e.config.axis_rotated?t.isInner?"1.2em":"-2.2em":t.isInner?"-0.5em":15+(e.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},a.prototype.textAnchorForXAxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(!e.config.axis_rotated,this.getXAxisLabelPosition())},a.prototype.textAnchorForYAxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getYAxisLabelPosition());

},a.prototype.textAnchorForY2AxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getY2AxisLabelPosition())},a.prototype.getMaxTickWidth=function(e,t){var n,i,r,a,o,s=this.owner,l=s.config,c=0;return t&&s.currentMaxTickWidths[e]?s.currentMaxTickWidths[e]:(s.svg&&(n=s.filterTargetsToShow(s.data.targets),"y"===e?(i=s.y.copy().domain(s.getYDomain(n,"y")),r=this.getYAxis(i,s.yOrient,l.axis_y_tick_format,s.yAxisTickValues,!1,!0)):"y2"===e?(i=s.y2.copy().domain(s.getYDomain(n,"y2")),r=this.getYAxis(i,s.y2Orient,l.axis_y2_tick_format,s.y2AxisTickValues,!1,!0)):(i=s.x.copy().domain(s.getXDomain(n)),r=this.getXAxis(i,s.xOrient,s.xAxisTickFormat,s.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(n,r)),a=s.d3.select("body").append("div").classed("c3",!0),o=a.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),o.append("g").call(r).each(function(){s.d3.select(this).selectAll("text").each(function(){var e=this.getBoundingClientRect();c<e.width&&(c=e.width)}),a.remove()})),s.currentMaxTickWidths[e]=0>=c?s.currentMaxTickWidths[e]:c,s.currentMaxTickWidths[e])},a.prototype.updateLabels=function(e){var t=this.owner,n=t.main.select("."+d.axisX+" ."+d.axisXLabel),i=t.main.select("."+d.axisY+" ."+d.axisYLabel),r=t.main.select("."+d.axisY2+" ."+d.axisY2Label);(e?n.transition():n).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(e?i.transition():i).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(e?r.transition():r).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},a.prototype.getPadding=function(e,t,n,i){return p(e[t])?"ratio"===e.unit?e[t]*i:this.convertPixelsToAxisPadding(e[t],i):n},a.prototype.convertPixelsToAxisPadding=function(e,t){var n=this.owner,i=n.config.axis_rotated?n.width:n.height;return t*(e/i)},a.prototype.generateTickValues=function(e,t,n){var i,r,a,o,s,l,c,u=e;if(t)if(i=h(t)?t():t,1===i)u=[e[0]];else if(2===i)u=[e[0],e[e.length-1]];else if(i>2){for(o=i-2,r=e[0],a=e[e.length-1],s=(a-r)/(o+1),u=[r],l=0;o>l;l++)c=+r+s*(l+1),u.push(n?new Date(c):c);u.push(a)}return n||(u=u.sort(function(e,t){return e-t})),u},a.prototype.generateTransitions=function(e){var t=this.owner,n=t.axes;return{axisX:e?n.x.transition().duration(e):n.x,axisY:e?n.y.transition().duration(e):n.y,axisY2:e?n.y2.transition().duration(e):n.y2,axisSubX:e?n.subx.transition().duration(e):n.subx}},a.prototype.redraw=function(e,t){var n=this.owner;n.axes.x.style("opacity",t?0:1),n.axes.y.style("opacity",t?0:1),n.axes.y2.style("opacity",t?0:1),n.axes.subx.style("opacity",t?0:1),e.axisX.call(n.xAxis),e.axisY.call(n.yAxis),e.axisY2.call(n.y2Axis),e.axisSubX.call(n.subXAxis)},l.getClipPath=function(t){var n=e.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(n?"":document.URL.split("#")[0])+"#"+t+")"},l.appendClip=function(e,t){return e.append("clipPath").attr("id",t).append("rect")},l.getAxisClipX=function(e){var t=Math.max(30,this.margin.left);return e?-(1+t):-(t-1)},l.getAxisClipY=function(e){return e?-20:-this.margin.top},l.getXAxisClipX=function(){var e=this;return e.getAxisClipX(!e.config.axis_rotated)},l.getXAxisClipY=function(){var e=this;return e.getAxisClipY(!e.config.axis_rotated)},l.getYAxisClipX=function(){var e=this;return e.config.axis_y_inner?-1:e.getAxisClipX(e.config.axis_rotated)},l.getYAxisClipY=function(){var e=this;return e.getAxisClipY(e.config.axis_rotated)},l.getAxisClipWidth=function(e){var t=this,n=Math.max(30,t.margin.left),i=Math.max(30,t.margin.right);return e?t.width+2+n+i:t.margin.left+20},l.getAxisClipHeight=function(e){return(e?this.margin.bottom:this.margin.top+this.height)+20},l.getXAxisClipWidth=function(){var e=this;return e.getAxisClipWidth(!e.config.axis_rotated)},l.getXAxisClipHeight=function(){var e=this;return e.getAxisClipHeight(!e.config.axis_rotated)},l.getYAxisClipWidth=function(){var e=this;return e.getAxisClipWidth(e.config.axis_rotated)+(e.config.axis_y_inner?20:0)},l.getYAxisClipHeight=function(){var e=this;return e.getAxisClipHeight(e.config.axis_rotated)},l.initPie=function(){var e=this,t=e.d3,n=e.config;e.pie=t.layout.pie().value(function(e){return e.values.reduce(function(e,t){return e+t.value},0)}),n.data_order||e.pie.sort(null)},l.updateRadius=function(){var e=this,t=e.config,n=t.gauge_width||t.donut_width;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2,e.radius=.95*e.radiusExpanded,e.innerRadiusRatio=n?(e.radius-n)/e.radius:.6,e.innerRadius=e.hasType("donut")||e.hasType("gauge")?e.radius*e.innerRadiusRatio:0},l.updateArc=function(){var e=this;e.svgArc=e.getSvgArc(),e.svgArcExpanded=e.getSvgArcExpanded(),e.svgArcExpandedSub=e.getSvgArcExpanded(.98)},l.updateAngle=function(e){var t,n,i=this,r=i.config,a=!1,o=0,s=r.gauge_min,l=r.gauge_max;return i.pie(i.filterTargetsToShow(i.data.targets)).forEach(function(t){a||t.data.id!==e.data.id||(a=!0,e=t,e.index=o),o++}),isNaN(e.startAngle)&&(e.startAngle=0),isNaN(e.endAngle)&&(e.endAngle=e.startAngle),i.isGaugeType(e.data)&&(t=Math.PI/(l-s),n=e.value<s?0:e.value<l?e.value-s:l-s,e.startAngle=-1*(Math.PI/2),e.endAngle=e.startAngle+t*n),a?e:null},l.getSvgArc=function(){var e=this,t=e.d3.svg.arc().outerRadius(e.radius).innerRadius(e.innerRadius),n=function(n,i){var r;return i?t(n):(r=e.updateAngle(n),r?t(r):"M 0 0")};return n.centroid=t.centroid,n},l.getSvgArcExpanded=function(e){var t=this,n=t.d3.svg.arc().outerRadius(t.radiusExpanded*(e?e:1)).innerRadius(t.innerRadius);return function(e){var i=t.updateAngle(e);return i?n(i):"M 0 0"}},l.getArc=function(e,t,n){return n||this.isArcType(e.data)?this.svgArc(e,t):"M 0 0"},l.transformForArcLabel=function(e){var t,n,i,r,a,o=this,s=o.updateAngle(e),l="";return s&&!o.hasType("gauge")&&(t=this.svgArc.centroid(s),n=isNaN(t[0])?0:t[0],i=isNaN(t[1])?0:t[1],r=Math.sqrt(n*n+i*i),a=o.radius&&r?(36/o.radius>.375?1.175-36/o.radius:.8)*o.radius/r:0,l="translate("+n*a+","+i*a+")"),l},l.getArcRatio=function(e){var t=this,n=t.hasType("gauge")?Math.PI:2*Math.PI;return e?(e.endAngle-e.startAngle)/n:null},l.convertToArcData=function(e){return this.addName({id:e.data.id,value:e.value,ratio:this.getArcRatio(e),index:e.index})},l.textForArcLabel=function(e){var t,n,i,r,a,o=this;return o.shouldShowArcLabel()?(t=o.updateAngle(e),n=t?t.value:null,i=o.getArcRatio(t),r=e.data.id,o.hasType("gauge")||o.meetsArcLabelThreshold(i)?(a=o.getArcLabelFormat(),a?a(n,i,r):o.defaultArcValueFormat(n,i)):""):""},l.expandArc=function(t){var n,i=this;return i.transiting?void(n=e.setInterval(function(){i.transiting||(e.clearInterval(n),i.legend.selectAll(".c3-legend-item-focused").size()>0&&i.expandArc(t))},10)):(t=i.mapToTargetIds(t),void i.svg.selectAll(i.selectorTargets(t,"."+d.chartArc)).each(function(e){i.shouldExpand(e.data.id)&&i.d3.select(this).selectAll("path").transition().duration(50).attr("d",i.svgArcExpanded).transition().duration(100).attr("d",i.svgArcExpandedSub).each(function(e){i.isDonutType(e.data)})}))},l.unexpandArc=function(e){var t=this;t.transiting||(e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e,"."+d.chartArc)).selectAll("path").transition().duration(50).attr("d",t.svgArc),t.svg.selectAll("."+d.arc).style("opacity",1))},l.shouldExpand=function(e){var t=this,n=t.config;return t.isDonutType(e)&&n.donut_expand||t.isGaugeType(e)&&n.gauge_expand||t.isPieType(e)&&n.pie_expand},l.shouldShowArcLabel=function(){var e=this,t=e.config,n=!0;return e.hasType("donut")?n=t.donut_label_show:e.hasType("pie")&&(n=t.pie_label_show),n},l.meetsArcLabelThreshold=function(e){var t=this,n=t.config,i=t.hasType("donut")?n.donut_label_threshold:n.pie_label_threshold;return e>=i},l.getArcLabelFormat=function(){var e=this,t=e.config,n=t.pie_label_format;return e.hasType("gauge")?n=t.gauge_label_format:e.hasType("donut")&&(n=t.donut_label_format),n},l.getArcTitle=function(){var e=this;return e.hasType("donut")?e.config.donut_title:""},l.updateTargetsForArc=function(e){var t,n,i=this,r=i.main,a=i.classChartArc.bind(i),o=i.classArcs.bind(i),s=i.classFocus.bind(i);t=r.select("."+d.chartArcs).selectAll("."+d.chartArc).data(i.pie(e)).attr("class",function(e){return a(e)+s(e.data)}),n=t.enter().append("g").attr("class",a),n.append("g").attr("class",o),n.append("text").attr("dy",i.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},l.initArc=function(){var e=this;e.arcs=e.main.select("."+d.chart).append("g").attr("class",d.chartArcs).attr("transform",e.getTranslate("arc")),e.arcs.append("text").attr("class",d.chartArcsTitle).style("text-anchor","middle").text(e.getArcTitle())},l.redrawArc=function(e,t,n){var i,r=this,a=r.d3,o=r.config,s=r.main;i=s.selectAll("."+d.arcs).selectAll("."+d.arc).data(r.arcData.bind(r)),i.enter().append("path").attr("class",r.classArc.bind(r)).style("fill",function(e){return r.color(e.data)}).style("cursor",function(e){return o.interaction_enabled&&o.data_selection_isselectable(e)?"pointer":null}).style("opacity",0).each(function(e){r.isGaugeType(e.data)&&(e.startAngle=e.endAngle=-1*(Math.PI/2)),this._current=e}),i.attr("transform",function(e){return!r.isGaugeType(e.data)&&n?"scale(0)":""}).style("opacity",function(e){return e===this._current?0:1}).on("mouseover",o.interaction_enabled?function(e){var t,n;r.transiting||(t=r.updateAngle(e),n=r.convertToArcData(t),r.expandArc(t.data.id),r.api.focus(t.data.id),r.toggleFocusLegend(t.data.id,!0),r.config.data_onmouseover(n,this))}:null).on("mousemove",o.interaction_enabled?function(e){var t=r.updateAngle(e),n=r.convertToArcData(t),i=[n];r.showTooltip(i,this)}:null).on("mouseout",o.interaction_enabled?function(e){var t,n;r.transiting||(t=r.updateAngle(e),n=r.convertToArcData(t),r.unexpandArc(t.data.id),r.api.revert(),r.revertLegend(),r.hideTooltip(),r.config.data_onmouseout(n,this))}:null).on("click",o.interaction_enabled?function(e,t){var n=r.updateAngle(e),i=r.convertToArcData(n);r.toggleShape&&r.toggleShape(this,i,t),r.config.data_onclick.call(r.api,i,this)}:null).each(function(){r.transiting=!0}).transition().duration(e).attrTween("d",function(e){var t,n=r.updateAngle(e);return n?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),t=a.interpolate(this._current,n),this._current=t(0),function(n){var i=t(n);return i.data=e.data,r.getArc(i,!0)}):function(){return"M 0 0"}}).attr("transform",n?"scale(1)":"").style("fill",function(e){return r.levelColor?r.levelColor(e.data.values[0].value):r.color(e.data.id)}).style("opacity",1).call(r.endall,function(){r.transiting=!1}),i.exit().transition().duration(t).style("opacity",0).remove(),s.selectAll("."+d.chartArc).select("text").style("opacity",0).attr("class",function(e){return r.isGaugeType(e.data)?d.gaugeValue:""}).text(r.textForArcLabel.bind(r)).attr("transform",r.transformForArcLabel.bind(r)).style("font-size",function(e){return r.isGaugeType(e.data)?Math.round(r.radius/5)+"px":""}).transition().duration(e).style("opacity",function(e){return r.isTargetToShow(e.data.id)&&r.isArcType(e.data)?1:0}),s.select("."+d.chartArcsTitle).style("opacity",r.hasType("donut")||r.hasType("gauge")?1:0),r.hasType("gauge")&&(r.arcs.select("."+d.chartArcsBackground).attr("d",function(){var e={data:[{value:o.gauge_max}],startAngle:-1*(Math.PI/2),endAngle:Math.PI/2};return r.getArc(e,!0,!0)}),r.arcs.select("."+d.chartArcsGaugeUnit).attr("dy",".75em").text(o.gauge_label_show?o.gauge_units:""),r.arcs.select("."+d.chartArcsGaugeMin).attr("dx",-1*(r.innerRadius+(r.radius-r.innerRadius)/2)+"px").attr("dy","1.2em").text(o.gauge_label_show?o.gauge_min:""),r.arcs.select("."+d.chartArcsGaugeMax).attr("dx",r.innerRadius+(r.radius-r.innerRadius)/2+"px").attr("dy","1.2em").text(o.gauge_label_show?o.gauge_max:""))},l.initGauge=function(){var e=this.arcs;this.hasType("gauge")&&(e.append("path").attr("class",d.chartArcsBackground),e.append("text").attr("class",d.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",d.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",d.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},l.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},l.initRegion=function(){var e=this;e.region=e.main.append("g").attr("clip-path",e.clipPath).attr("class",d.regions)},l.updateRegion=function(e){var t=this,n=t.config;t.region.style("visibility",t.hasArcType()?"hidden":"visible"),t.mainRegion=t.main.select("."+d.regions).selectAll("."+d.region).data(n.regions),t.mainRegion.enter().append("g").attr("class",t.classRegion.bind(t)).append("rect").style("fill-opacity",0),t.mainRegion.exit().transition().duration(e).style("opacity",0).remove()},l.redrawRegion=function(e){var t=this,n=t.mainRegion.selectAll("rect"),i=t.regionX.bind(t),r=t.regionY.bind(t),a=t.regionWidth.bind(t),o=t.regionHeight.bind(t);return[(e?n.transition():n).attr("x",i).attr("y",r).attr("width",a).attr("height",o).style("fill-opacity",function(e){return p(e.opacity)?e.opacity:.1})]},l.regionX=function(e){var t,n=this,i=n.config,r="y"===e.axis?n.y:n.y2;return t="y"===e.axis||"y2"===e.axis?i.axis_rotated&&"start"in e?r(e.start):0:i.axis_rotated?0:"start"in e?n.x(n.isTimeSeries()?n.parseDate(e.start):e.start):0},l.regionY=function(e){var t,n=this,i=n.config,r="y"===e.axis?n.y:n.y2;return t="y"===e.axis||"y2"===e.axis?i.axis_rotated?0:"end"in e?r(e.end):0:i.axis_rotated&&"start"in e?n.x(n.isTimeSeries()?n.parseDate(e.start):e.start):0},l.regionWidth=function(e){var t,n=this,i=n.config,r=n.regionX(e),a="y"===e.axis?n.y:n.y2;return t="y"===e.axis||"y2"===e.axis?i.axis_rotated&&"end"in e?a(e.end):n.width:i.axis_rotated?n.width:"end"in e?n.x(n.isTimeSeries()?n.parseDate(e.end):e.end):n.width,r>t?0:t-r},l.regionHeight=function(e){var t,n=this,i=n.config,r=this.regionY(e),a="y"===e.axis?n.y:n.y2;return t="y"===e.axis||"y2"===e.axis?i.axis_rotated?n.height:"start"in e?a(e.start):n.height:i.axis_rotated&&"end"in e?n.x(n.isTimeSeries()?n.parseDate(e.end):e.end):n.height,r>t?0:t-r},l.isRegionOnX=function(e){return!e.axis||"x"===e.axis},l.drag=function(e){var t,n,i,r,a,o,s,l,c=this,u=c.config,p=c.main,h=c.d3;c.hasArcType()||u.data_selection_enabled&&(!u.zoom_enabled||c.zoom.altDomain)&&u.data_selection_multiple&&(t=c.dragStart[0],n=c.dragStart[1],i=e[0],r=e[1],a=Math.min(t,i),o=Math.max(t,i),s=u.data_selection_grouped?c.margin.top:Math.min(n,r),l=u.data_selection_grouped?c.height:Math.max(n,r),p.select("."+d.dragarea).attr("x",a).attr("y",s).attr("width",o-a).attr("height",l-s),p.selectAll("."+d.shapes).selectAll("."+d.shape).filter(function(e){return u.data_selection_isselectable(e)}).each(function(e,t){var n,i,r,u,p,f,g=h.select(this),m=g.classed(d.SELECTED),v=g.classed(d.INCLUDED),y=!1;if(g.classed(d.circle))n=1*g.attr("cx"),i=1*g.attr("cy"),p=c.togglePoint,y=n>a&&o>n&&i>s&&l>i;else{if(!g.classed(d.bar))return;f=S(this),n=f.x,i=f.y,r=f.width,u=f.height,p=c.togglePath,y=!(n>o||a>n+r||i>l||s>i+u)}y^v&&(g.classed(d.INCLUDED,!v),g.classed(d.SELECTED,!m),p.call(c,!m,g,e,t))}))},l.dragstart=function(e){var t=this,n=t.config;t.hasArcType()||n.data_selection_enabled&&(t.dragStart=e,t.main.select("."+d.chart).append("rect").attr("class",d.dragarea).style("opacity",.1),t.dragging=!0)},l.dragend=function(){var e=this,t=e.config;e.hasArcType()||t.data_selection_enabled&&(e.main.select("."+d.dragarea).transition().duration(100).style("opacity",0).remove(),e.main.selectAll("."+d.shape).classed(d.INCLUDED,!1),e.dragging=!1)},l.selectPoint=function(e,t,n){var i=this,r=i.config,a=(r.axis_rotated?i.circleY:i.circleX).bind(i),o=(r.axis_rotated?i.circleX:i.circleY).bind(i),s=i.pointSelectR.bind(i);r.data_onselected.call(i.api,t,e.node()),i.main.select("."+d.selectedCircles+i.getTargetSelectorSuffix(t.id)).selectAll("."+d.selectedCircle+"-"+n).data([t]).enter().append("circle").attr("class",function(){return i.generateClass(d.selectedCircle,n)}).attr("cx",a).attr("cy",o).attr("stroke",function(){return i.color(t)}).attr("r",function(e){return 1.4*i.pointSelectR(e)}).transition().duration(100).attr("r",s)},l.unselectPoint=function(e,t,n){var i=this;i.config.data_onunselected(t,e.node()),i.main.select("."+d.selectedCircles+i.getTargetSelectorSuffix(t.id)).selectAll("."+d.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},l.togglePoint=function(e,t,n,i){e?this.selectPoint(t,n,i):this.unselectPoint(t,n,i)},l.selectPath=function(e,t){var n=this;n.config.data_onselected.call(n,t,e.node()),e.transition().duration(100).style("fill",function(){return n.d3.rgb(n.color(t)).brighter(.75)})},l.unselectPath=function(e,t){var n=this;n.config.data_onunselected.call(n,t,e.node()),e.transition().duration(100).style("fill",function(){return n.color(t)})},l.togglePath=function(e,t,n,i){e?this.selectPath(t,n,i):this.unselectPath(t,n,i)},l.getToggle=function(e,t){var n,i=this;return"circle"===e.nodeName?n=i.isStepType(t)?function(){}:i.togglePoint:"path"===e.nodeName&&(n=i.togglePath),n},l.toggleShape=function(e,t,n){var i=this,r=i.d3,a=i.config,o=r.select(e),s=o.classed(d.SELECTED),l=i.getToggle(e,t).bind(i);a.data_selection_enabled&&a.data_selection_isselectable(t)&&(a.data_selection_multiple||i.main.selectAll("."+d.shapes+(a.data_selection_grouped?i.getTargetSelectorSuffix(t.id):"")).selectAll("."+d.shape).each(function(e,t){var n=r.select(this);n.classed(d.SELECTED)&&l(!1,n.classed(d.SELECTED,!1),e,t)}),o.classed(d.SELECTED,!s),l(!s,o,t,n))},l.initBrush=function(){var e=this,t=e.d3;e.brush=t.svg.brush().on("brush",function(){e.redrawForBrush()}),e.brush.update=function(){return e.context&&e.context.select("."+d.brush).call(this),this},e.brush.scale=function(t){return e.config.axis_rotated?this.y(t):this.x(t)}},l.initSubchart=function(){var e=this,t=e.config,n=e.context=e.svg.append("g").attr("transform",e.getTranslate("context"));n.style("visibility",t.subchart_show?"visible":"hidden"),n.append("g").attr("clip-path",e.clipPathForSubchart).attr("class",d.chart),n.select("."+d.chart).append("g").attr("class",d.chartBars),n.select("."+d.chart).append("g").attr("class",d.chartLines),n.append("g").attr("clip-path",e.clipPath).attr("class",d.brush).call(e.brush),e.axes.subx=n.append("g").attr("class",d.axisX).attr("transform",e.getTranslate("subx")).attr("clip-path",t.axis_rotated?"":e.clipPathForXAxis)},l.updateTargetsForSubchart=function(e){var t,n,i,r,a=this,o=a.context,s=a.config,l=a.classChartBar.bind(a),c=a.classBars.bind(a),u=a.classChartLine.bind(a),p=a.classLines.bind(a),h=a.classAreas.bind(a);s.subchart_show&&(r=o.select("."+d.chartBars).selectAll("."+d.chartBar).data(e).attr("class",l),i=r.enter().append("g").style("opacity",0).attr("class",l),i.append("g").attr("class",c),n=o.select("."+d.chartLines).selectAll("."+d.chartLine).data(e).attr("class",u),t=n.enter().append("g").style("opacity",0).attr("class",u),t.append("g").attr("class",p),t.append("g").attr("class",h),o.selectAll("."+d.brush+" rect").attr(s.axis_rotated?"width":"height",s.axis_rotated?a.width2:a.height2))},l.updateBarForSubchart=function(e){var t=this;t.contextBar=t.context.selectAll("."+d.bars).selectAll("."+d.bar).data(t.barData.bind(t)),t.contextBar.enter().append("path").attr("class",t.classBar.bind(t)).style("stroke","none").style("fill",t.color),t.contextBar.style("opacity",t.initialOpacity.bind(t)),t.contextBar.exit().transition().duration(e).style("opacity",0).remove()},l.redrawBarForSubchart=function(e,t,n){(t?this.contextBar.transition().duration(n):this.contextBar).attr("d",e).style("opacity",1)},l.updateLineForSubchart=function(e){var t=this;t.contextLine=t.context.selectAll("."+d.lines).selectAll("."+d.line).data(t.lineData.bind(t)),t.contextLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color),t.contextLine.style("opacity",t.initialOpacity.bind(t)),t.contextLine.exit().transition().duration(e).style("opacity",0).remove()},l.redrawLineForSubchart=function(e,t,n){(t?this.contextLine.transition().duration(n):this.contextLine).attr("d",e).style("opacity",1)},l.updateAreaForSubchart=function(e){var t=this,n=t.d3;t.contextArea=t.context.selectAll("."+d.areas).selectAll("."+d.area).data(t.lineData.bind(t)),t.contextArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+n.select(this).style("opacity"),0}),t.contextArea.style("opacity",0),t.contextArea.exit().transition().duration(e).style("opacity",0).remove()},l.redrawAreaForSubchart=function(e,t,n){(t?this.contextArea.transition().duration(n):this.contextArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)},l.redrawSubchart=function(e,t,n,i,r,a,o){var s,l,c,u=this,d=u.d3,p=u.config;u.context.style("visibility",p.subchart_show?"visible":"hidden"),p.subchart_show&&(d.event&&"zoom"===d.event.type&&u.brush.extent(u.x.orgDomain()).update(),e&&(u.brush.empty()||u.brush.extent(u.x.orgDomain()).update(),s=u.generateDrawArea(r,!0),l=u.generateDrawBar(a,!0),c=u.generateDrawLine(o,!0),u.updateBarForSubchart(n),u.updateLineForSubchart(n),u.updateAreaForSubchart(n),u.redrawBarForSubchart(l,n,n),u.redrawLineForSubchart(c,n,n),u.redrawAreaForSubchart(s,n,n)))},l.redrawForBrush=function(){var e=this,t=e.x;e.redraw({withTransition:!1,withY:e.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),e.config.subchart_onbrush.call(e.api,t.orgDomain())},l.transformContext=function(e,t){var n,i=this;t&&t.axisSubX?n=t.axisSubX:(n=i.context.select("."+d.axisX),e&&(n=n.transition())),i.context.attr("transform",i.getTranslate("context")),n.attr("transform",i.getTranslate("subx"))},l.getDefaultExtent=function(){var e=this,t=e.config,n=h(t.axis_x_extent)?t.axis_x_extent(e.getXDomain(e.data.targets)):t.axis_x_extent;return e.isTimeSeries()&&(n=[e.parseDate(n[0]),e.parseDate(n[1])]),n},l.initZoom=function(){var e,t=this,n=t.d3,i=t.config;t.zoom=n.behavior.zoom().on("zoomstart",function(){e=n.event.sourceEvent,t.zoom.altDomain=n.event.sourceEvent.altKey?t.x.orgDomain():null,i.zoom_onzoomstart.call(t.api,n.event.sourceEvent)}).on("zoom",function(){t.redrawForZoom.call(t)}).on("zoomend",function(){var r=n.event.sourceEvent;r&&e.clientX===r.clientX&&e.clientY===r.clientY||(t.redrawEventRect(),t.updateZoom(),i.zoom_onzoomend.call(t.api,t.x.orgDomain()))}),t.zoom.scale=function(e){return i.axis_rotated?this.y(e):this.x(e)},t.zoom.orgScaleExtent=function(){var e=i.zoom_extent?i.zoom_extent:[1,10];return[e[0],Math.max(t.getMaxDataCount()/e[1],e[1])]},t.zoom.updateScaleExtent=function(){var e=b(t.x.orgDomain())/b(t.orgXDomain),n=this.orgScaleExtent();return this.scaleExtent([n[0]*e,n[1]*e]),this}},l.updateZoom=function(){var e=this,t=e.config.zoom_enabled?e.zoom:function(){};e.main.select("."+d.zoomRect).call(t).on("dblclick.zoom",null),e.main.selectAll("."+d.eventRect).call(t).on("dblclick.zoom",null)},l.redrawForZoom=function(){var e=this,t=e.d3,n=e.config,i=e.zoom,r=e.x;if(n.zoom_enabled&&0!==e.filterTargetsToShow(e.data.targets).length){if("mousemove"===t.event.sourceEvent.type&&i.altDomain)return r.domain(i.altDomain),void i.scale(r).updateScaleExtent();e.isCategorized()&&r.orgDomain()[0]===e.orgXDomain[0]&&r.domain([e.orgXDomain[0]-1e-10,r.orgDomain()[1]]),e.redraw({withTransition:!1,withY:n.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===t.event.sourceEvent.type&&(e.cancelClick=!0),n.zoom_onzoom.call(e.api,r.orgDomain())}},l.generateColor=function(){var e=this,t=e.config,n=e.d3,i=t.data_colors,r=x(t.color_pattern)?t.color_pattern:n.scale.category10().range(),a=t.data_color,o=[];return function(e){var t,n=e.id||e.data&&e.data.id||e;return i[n]instanceof Function?t=i[n](e):i[n]?t=i[n]:(o.indexOf(n)<0&&o.push(n),t=r[o.indexOf(n)%r.length],i[n]=t),a instanceof Function?a(t,e):t}},l.generateLevelColor=function(){var e=this,t=e.config,n=t.color_pattern,i=t.color_threshold,r="value"===i.unit,a=i.values&&i.values.length?i.values:[],o=i.max||100;return x(t.color_threshold)?function(e){var t,i,s=n[n.length-1];for(t=0;t<a.length;t++)if(i=r?e:100*e/o,i<a[t]){s=n[t];break}return s}:null},l.getYFormat=function(e){var t=this,n=e&&!t.hasType("gauge")?t.defaultArcValueFormat:t.yFormat,i=e&&!t.hasType("gauge")?t.defaultArcValueFormat:t.y2Format;return function(e,r,a){var o="y2"===t.axis.getId(a)?i:n;return o.call(t,e,r)}},l.yFormat=function(e){var t=this,n=t.config,i=n.axis_y_tick_format?n.axis_y_tick_format:t.defaultValueFormat;return i(e)},l.y2Format=function(e){var t=this,n=t.config,i=n.axis_y2_tick_format?n.axis_y2_tick_format:t.defaultValueFormat;return i(e)},l.defaultValueFormat=function(e){return p(e)?+e:""},l.defaultArcValueFormat=function(e,t){return(100*t).toFixed(1)+"%"},l.dataLabelFormat=function(e){var t,n=this,i=n.config.data_labels,r=function(e){return p(e)?+e:""};return t="function"==typeof i.format?i.format:"object"==typeof i.format?i.format[e]?i.format[e]===!0?r:i.format[e]:function(){return""}:r},l.hasCaches=function(e){for(var t=0;t<e.length;t++)if(!(e[t]in this.cache))return!1;return!0},l.addCache=function(e,t){this.cache[e]=this.cloneTarget(t)},l.getCaches=function(e){var t,n=[];for(t=0;t<e.length;t++)e[t]in this.cache&&n.push(this.cloneTarget(this.cache[e[t]]));return n};var d=l.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};l.generateClass=function(e,t){return" "+e+" "+e+this.getTargetSelectorSuffix(t)},l.classText=function(e){return this.generateClass(d.text,e.index)},l.classTexts=function(e){return this.generateClass(d.texts,e.id)},l.classShape=function(e){return this.generateClass(d.shape,e.index)},l.classShapes=function(e){return this.generateClass(d.shapes,e.id)},l.classLine=function(e){return this.classShape(e)+this.generateClass(d.line,e.id)},l.classLines=function(e){return this.classShapes(e)+this.generateClass(d.lines,e.id)},l.classCircle=function(e){return this.classShape(e)+this.generateClass(d.circle,e.index)},l.classCircles=function(e){return this.classShapes(e)+this.generateClass(d.circles,e.id)},l.classBar=function(e){return this.classShape(e)+this.generateClass(d.bar,e.index)},l.classBars=function(e){return this.classShapes(e)+this.generateClass(d.bars,e.id)},l.classArc=function(e){return this.classShape(e.data)+this.generateClass(d.arc,e.data.id)},l.classArcs=function(e){return this.classShapes(e.data)+this.generateClass(d.arcs,e.data.id)},l.classArea=function(e){return this.classShape(e)+this.generateClass(d.area,e.id)},l.classAreas=function(e){return this.classShapes(e)+this.generateClass(d.areas,e.id)},l.classRegion=function(e,t){return this.generateClass(d.region,t)+" "+("class"in e?e["class"]:"")},l.classEvent=function(e){return this.generateClass(d.eventRect,e.index)},l.classTarget=function(e){var t=this,n=t.config.data_classes[e],i="";return n&&(i=" "+d.target+"-"+n),t.generateClass(d.target,e)+i},l.classFocus=function(e){return this.classFocused(e)+this.classDefocused(e)},l.classFocused=function(e){return" "+(this.focusedTargetIds.indexOf(e.id)>=0?d.focused:"")},l.classDefocused=function(e){return" "+(this.defocusedTargetIds.indexOf(e.id)>=0?d.defocused:"")},l.classChartText=function(e){return d.chartText+this.classTarget(e.id)},l.classChartLine=function(e){return d.chartLine+this.classTarget(e.id)},l.classChartBar=function(e){return d.chartBar+this.classTarget(e.id)},l.classChartArc=function(e){return d.chartArc+this.classTarget(e.data.id)},l.getTargetSelectorSuffix=function(e){return e||0===e?("-"+e).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},l.selectorTarget=function(e,t){return(t||"")+"."+d.target+this.getTargetSelectorSuffix(e)},l.selectorTargets=function(e,t){var n=this;return e=e||[],e.length?e.map(function(e){return n.selectorTarget(e,t)}):null},l.selectorLegend=function(e){return"."+d.legendItem+this.getTargetSelectorSuffix(e)},l.selectorLegends=function(e){var t=this;return e&&e.length?e.map(function(e){return t.selectorLegend(e)}):null};var p=l.isValue=function(e){return e||0===e},h=l.isFunction=function(e){return"function"==typeof e},f=l.isString=function(e){return"string"==typeof e},g=l.isUndefined=function(e){return"undefined"==typeof e},m=l.isDefined=function(e){return"undefined"!=typeof e},v=l.ceil10=function(e){return 10*Math.ceil(e/10)},y=l.asHalfPixel=function(e){return Math.ceil(e)+.5},b=l.diffDomain=function(e){return e[1]-e[0]},w=l.isEmpty=function(e){return!e||f(e)&&0===e.length||"object"==typeof e&&0===Object.keys(e).length},x=l.notEmpty=function(e){return Object.keys(e).length>0},k=l.getOption=function(e,t,n){return m(e[t])?e[t]:n},C=l.hasValue=function(e,t){var n=!1;return Object.keys(e).forEach(function(i){e[i]===t&&(n=!0)}),n},S=l.getPathBox=function(e){var t=e.getBoundingClientRect(),n=[e.pathSegList.getItem(0),e.pathSegList.getItem(1)],i=n[0].x,r=Math.min(n[0].y,n[1].y);return{x:i,y:r,width:t.width,height:t.height}};s.focus=function(e){var t,n=this.internal;e=n.mapToTargetIds(e),t=n.svg.selectAll(n.selectorTargets(e.filter(n.isTargetToShow,n))),this.revert(),this.defocus(),t.classed(d.focused,!0).classed(d.defocused,!1),n.hasArcType()&&n.expandArc(e),n.toggleFocusLegend(e,!0),n.focusedTargetIds=e,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(t){return e.indexOf(t)<0})},s.defocus=function(e){var t,n=this.internal;e=n.mapToTargetIds(e),t=n.svg.selectAll(n.selectorTargets(e.filter(n.isTargetToShow,n))),t.classed(d.focused,!1).classed(d.defocused,!0),n.hasArcType()&&n.unexpandArc(e),n.toggleFocusLegend(e,!1),n.focusedTargetIds=n.focusedTargetIds.filter(function(t){return e.indexOf(t)<0}),n.defocusedTargetIds=e},s.revert=function(e){var t,n=this.internal;e=n.mapToTargetIds(e),t=n.svg.selectAll(n.selectorTargets(e)),t.classed(d.focused,!1).classed(d.defocused,!1),n.hasArcType()&&n.unexpandArc(e),n.config.legend_show&&(n.showLegend(e.filter(n.isLegendToShow.bind(n))),
n.legend.selectAll(n.selectorLegends(e)).filter(function(){return n.d3.select(this).classed(d.legendItemFocused)}).classed(d.legendItemFocused,!1)),n.focusedTargetIds=[],n.defocusedTargetIds=[]},s.show=function(e,t){var n,i=this.internal;e=i.mapToTargetIds(e),t=t||{},i.removeHiddenTargetIds(e),n=i.svg.selectAll(i.selectorTargets(e)),n.transition().style("opacity",1,"important").call(i.endall,function(){n.style("opacity",null).style("opacity",1)}),t.withLegend&&i.showLegend(e),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},s.hide=function(e,t){var n,i=this.internal;e=i.mapToTargetIds(e),t=t||{},i.addHiddenTargetIds(e),n=i.svg.selectAll(i.selectorTargets(e)),n.transition().style("opacity",0,"important").call(i.endall,function(){n.style("opacity",null).style("opacity",0)}),t.withLegend&&i.hideLegend(e),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},s.toggle=function(e,t){var n=this,i=this.internal;i.mapToTargetIds(e).forEach(function(e){i.isTargetToShow(e)?n.hide(e,t):n.show(e,t)})},s.zoom=function(e){var t=this.internal;return e&&(t.isTimeSeries()&&(e=e.map(function(e){return t.parseDate(e)})),t.brush.extent(e),t.redraw({withUpdateXDomain:!0,withY:t.config.zoom_rescale}),t.config.zoom_onzoom.call(this,t.x.orgDomain())),t.brush.extent()},s.zoom.enable=function(e){var t=this.internal;t.config.zoom_enabled=e,t.updateAndRedraw()},s.unzoom=function(){var e=this.internal;e.brush.clear().update(),e.redraw({withUpdateXDomain:!0})},s.load=function(e){var t=this.internal,n=t.config;return e.xs&&t.addXs(e.xs),"classes"in e&&Object.keys(e.classes).forEach(function(t){n.data_classes[t]=e.classes[t]}),"categories"in e&&t.isCategorized()&&(n.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){n.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){n.data_colors[t]=e.colors[t]}),"cacheIds"in e&&t.hasCaches(e.cacheIds)?void t.load(t.getCaches(e.cacheIds),e.done):void("unload"in e?t.unload(t.mapToTargetIds("boolean"==typeof e.unload&&e.unload?null:e.unload),function(){t.loadFromArgs(e)}):t.loadFromArgs(e))},s.unload=function(e){var t=this.internal;e=e||{},e instanceof Array?e={ids:e}:"string"==typeof e&&(e={ids:[e]}),t.unload(t.mapToTargetIds(e.ids),function(){t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()})},s.flow=function(e){var t,n,i,r,a,o,s,l,c=this.internal,u=[],d=c.getMaxDataCount(),h=0,f=0;if(e.json)n=c.convertJsonToData(e.json,e.keys);else if(e.rows)n=c.convertRowsToData(e.rows);else{if(!e.columns)return;n=c.convertColumnsToData(e.columns)}t=c.convertDataToTargets(n,!0),c.data.targets.forEach(function(e){var n,i,r=!1;for(n=0;n<t.length;n++)if(e.id===t[n].id){for(r=!0,e.values[e.values.length-1]&&(f=e.values[e.values.length-1].index+1),h=t[n].values.length,i=0;h>i;i++)t[n].values[i].index=f+i,c.isTimeSeries()||(t[n].values[i].x=f+i);e.values=e.values.concat(t[n].values),t.splice(n,1);break}r||u.push(e.id)}),c.data.targets.forEach(function(e){var t,n;for(t=0;t<u.length;t++)if(e.id===u[t])for(f=e.values[e.values.length-1].index+1,n=0;h>n;n++)e.values.push({id:e.id,index:f+n,x:c.isTimeSeries()?c.getOtherTargetX(f+n):f+n,value:null})}),c.data.targets.length&&t.forEach(function(e){var t,n=[];for(t=c.data.targets[0].values[0].index;f>t;t++)n.push({id:e.id,index:t,x:c.isTimeSeries()?c.getOtherTargetX(t):t,value:null});e.values.forEach(function(e){e.index+=f,c.isTimeSeries()||(e.x+=f)}),e.values=n.concat(e.values)}),c.data.targets=c.data.targets.concat(t),i=c.getMaxDataCount(),a=c.data.targets[0],o=a.values[0],m(e.to)?(h=0,l=c.isTimeSeries()?c.parseDate(e.to):e.to,a.values.forEach(function(e){e.x<l&&h++})):m(e.length)&&(h=e.length),d?1===d&&c.isTimeSeries()&&(s=(a.values[a.values.length-1].x-o.x)/2,r=[new Date(+o.x-s),new Date(+o.x+s)],c.updateXDomain(null,!0,!0,!1,r)):(s=c.isTimeSeries()?a.values.length>1?a.values[a.values.length-1].x-o.x:o.x-c.getXDomain(c.data.targets)[0]:1,r=[o.x-s,o.x],c.updateXDomain(null,!0,!0,!1,r)),c.updateTargets(c.data.targets),c.redraw({flow:{index:o.index,length:h,duration:p(e.duration)?e.duration:c.config.transition_duration,done:e.done,orgDataCount:d},withLegend:!0,withTransition:d>1,withTrimXDomain:!1,withUpdateXAxis:!0})},l.generateFlow=function(e){var t=this,n=t.config,i=t.d3;return function(){var r,a,o,s=e.targets,l=e.flow,c=e.drawBar,u=e.drawLine,p=e.drawArea,h=e.cx,f=e.cy,g=e.xv,m=e.xForText,v=e.yForText,y=e.duration,w=1,x=l.index,k=l.length,C=t.getValueOnIndex(t.data.targets[0].values,x),S=t.getValueOnIndex(t.data.targets[0].values,x+k),_=t.x.domain(),T=l.duration||y,$=l.done||function(){},A=t.generateWait(),E=t.xgrid||i.selectAll([]),P=t.xgridLines||i.selectAll([]),I=t.mainRegion||i.selectAll([]),D=t.mainText||i.selectAll([]),M=t.mainBar||i.selectAll([]),N=t.mainLine||i.selectAll([]),j=t.mainArea||i.selectAll([]),O=t.mainCircle||i.selectAll([]);t.flowing=!0,t.data.targets.forEach(function(e){e.values.splice(0,k)}),o=t.updateXDomain(s,!0,!0),t.updateXGrid&&t.updateXGrid(!0),l.orgDataCount?r=1===l.orgDataCount||C.x===S.x?t.x(_[0])-t.x(o[0]):t.isTimeSeries()?t.x(_[0])-t.x(o[0]):t.x(C.x)-t.x(S.x):1!==t.data.targets[0].values.length?r=t.x(_[0])-t.x(o[0]):t.isTimeSeries()?(C=t.getValueOnIndex(t.data.targets[0].values,0),S=t.getValueOnIndex(t.data.targets[0].values,t.data.targets[0].values.length-1),r=t.x(C.x)-t.x(S.x)):r=b(o)/2,w=b(_)/b(o),a="translate("+r+",0) scale("+w+",1)",t.hideXGridFocus(),t.hideTooltip(),i.transition().ease("linear").duration(T).each(function(){A.add(t.axes.x.transition().call(t.xAxis)),A.add(M.transition().attr("transform",a)),A.add(N.transition().attr("transform",a)),A.add(j.transition().attr("transform",a)),A.add(O.transition().attr("transform",a)),A.add(D.transition().attr("transform",a)),A.add(I.filter(t.isRegionOnX).transition().attr("transform",a)),A.add(E.transition().attr("transform",a)),A.add(P.transition().attr("transform",a))}).call(A,function(){var e,i=[],r=[],a=[];if(k){for(e=0;k>e;e++)i.push("."+d.shape+"-"+(x+e)),r.push("."+d.text+"-"+(x+e)),a.push("."+d.eventRect+"-"+(x+e));t.svg.selectAll("."+d.shapes).selectAll(i).remove(),t.svg.selectAll("."+d.texts).selectAll(r).remove(),t.svg.selectAll("."+d.eventRects).selectAll(a).remove(),t.svg.select("."+d.xgrid).remove()}E.attr("transform",null).attr(t.xgridAttr),P.attr("transform",null),P.select("line").attr("x1",n.axis_rotated?0:g).attr("x2",n.axis_rotated?t.width:g),P.select("text").attr("x",n.axis_rotated?t.width:0).attr("y",g),M.attr("transform",null).attr("d",c),N.attr("transform",null).attr("d",u),j.attr("transform",null).attr("d",p),O.attr("transform",null).attr("cx",h).attr("cy",f),D.attr("transform",null).attr("x",m).attr("y",v).style("fill-opacity",t.opacityForText.bind(t)),I.attr("transform",null),I.select("rect").filter(t.isRegionOnX).attr("x",t.regionX.bind(t)).attr("width",t.regionWidth.bind(t)),n.interaction_enabled&&t.redrawEventRect(),$(),t.flowing=!1})}},s.selected=function(e){var t=this.internal,n=t.d3;return n.merge(t.main.selectAll("."+d.shapes+t.getTargetSelectorSuffix(e)).selectAll("."+d.shape).filter(function(){return n.select(this).classed(d.SELECTED)}).map(function(e){return e.map(function(e){var t=e.__data__;return t.data?t.data:t})}))},s.select=function(e,t,n){var i=this.internal,r=i.d3,a=i.config;a.data_selection_enabled&&i.main.selectAll("."+d.shapes).selectAll("."+d.shape).each(function(o,s){var l=r.select(this),c=o.data?o.data.id:o.id,u=i.getToggle(this,o).bind(i),p=a.data_selection_grouped||!e||e.indexOf(c)>=0,h=!t||t.indexOf(s)>=0,f=l.classed(d.SELECTED);l.classed(d.line)||l.classed(d.area)||(p&&h?a.data_selection_isselectable(o)&&!f&&u(!0,l.classed(d.SELECTED,!0),o,s):m(n)&&n&&f&&u(!1,l.classed(d.SELECTED,!1),o,s))})},s.unselect=function(e,t){var n=this.internal,i=n.d3,r=n.config;r.data_selection_enabled&&n.main.selectAll("."+d.shapes).selectAll("."+d.shape).each(function(a,o){var s=i.select(this),l=a.data?a.data.id:a.id,c=n.getToggle(this,a).bind(n),u=r.data_selection_grouped||!e||e.indexOf(l)>=0,p=!t||t.indexOf(o)>=0,h=s.classed(d.SELECTED);s.classed(d.line)||s.classed(d.area)||u&&p&&r.data_selection_isselectable(a)&&h&&c(!1,s.classed(d.SELECTED,!1),a,o)})},s.transform=function(e,t){var n=this.internal,i=["pie","donut"].indexOf(e)>=0?{withTransform:!0}:null;n.transformTo(t,e,i)},l.transformTo=function(e,t,n){var i=this,r=!i.hasArcType(),a=n||{withTransitionForAxis:r};a.withTransitionForTransform=!1,i.transiting=!1,i.setTargetType(e,t),i.updateTargets(i.data.targets),i.updateAndRedraw(a)},s.groups=function(e){var t=this.internal,n=t.config;return g(e)?n.data_groups:(n.data_groups=e,t.redraw(),n.data_groups)},s.xgrids=function(e){var t=this.internal,n=t.config;return e?(n.grid_x_lines=e,t.redrawWithoutRescale(),n.grid_x_lines):n.grid_x_lines},s.xgrids.add=function(e){var t=this.internal;return this.xgrids(t.config.grid_x_lines.concat(e?e:[]))},s.xgrids.remove=function(e){var t=this.internal;t.removeGridLines(e,!0)},s.ygrids=function(e){var t=this.internal,n=t.config;return e?(n.grid_y_lines=e,t.redrawWithoutRescale(),n.grid_y_lines):n.grid_y_lines},s.ygrids.add=function(e){var t=this.internal;return this.ygrids(t.config.grid_y_lines.concat(e?e:[]))},s.ygrids.remove=function(e){var t=this.internal;t.removeGridLines(e,!1)},s.regions=function(e){var t=this.internal,n=t.config;return e?(n.regions=e,t.redrawWithoutRescale(),n.regions):n.regions},s.regions.add=function(e){var t=this.internal,n=t.config;return e?(n.regions=n.regions.concat(e),t.redrawWithoutRescale(),n.regions):n.regions},s.regions.remove=function(e){var t,n,i,r=this.internal,a=r.config;return e=e||{},t=r.getOption(e,"duration",a.transition_duration),n=r.getOption(e,"classes",[d.region]),i=r.main.select("."+d.regions).selectAll(n.map(function(e){return"."+e})),(t?i.transition().duration(t):i).style("opacity",0).remove(),a.regions=a.regions.filter(function(e){var t=!1;return e["class"]?(e["class"].split(" ").forEach(function(e){n.indexOf(e)>=0&&(t=!0)}),!t):!0}),a.regions},s.data=function(e){var t=this.internal.data.targets;return"undefined"==typeof e?t:t.filter(function(t){return[].concat(e).indexOf(t.id)>=0})},s.data.shown=function(e){return this.internal.filterTargetsToShow(this.data(e))},s.data.values=function(e){var t,n=null;return e&&(t=this.data(e),n=t[0]?t[0].values.map(function(e){return e.value}):null),n},s.data.names=function(e){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",e)},s.data.colors=function(e){return this.internal.updateDataAttributes("colors",e)},s.data.axes=function(e){return this.internal.updateDataAttributes("axes",e)},s.category=function(e,t){var n=this.internal,i=n.config;return arguments.length>1&&(i.axis_x_categories[e]=t,n.redraw()),i.axis_x_categories[e]},s.categories=function(e){var t=this.internal,n=t.config;return arguments.length?(n.axis_x_categories=e,t.redraw(),n.axis_x_categories):n.axis_x_categories},s.color=function(e){var t=this.internal;return t.color(e)},s.x=function(e){var t=this.internal;return arguments.length&&(t.updateTargetX(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},s.xs=function(e){var t=this.internal;return arguments.length&&(t.updateTargetXs(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},s.axis=function(){},s.axis.labels=function(e){var t=this.internal;arguments.length&&(Object.keys(e).forEach(function(n){t.axis.setLabelText(n,e[n])}),t.axis.updateLabels())},s.axis.max=function(e){var t=this.internal,n=t.config;return arguments.length?("object"==typeof e?(p(e.x)&&(n.axis_x_max=e.x),p(e.y)&&(n.axis_y_max=e.y),p(e.y2)&&(n.axis_y2_max=e.y2)):n.axis_y_max=n.axis_y2_max=e,void t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:n.axis_x_max,y:n.axis_y_max,y2:n.axis_y2_max}},s.axis.min=function(e){var t=this.internal,n=t.config;return arguments.length?("object"==typeof e?(p(e.x)&&(n.axis_x_min=e.x),p(e.y)&&(n.axis_y_min=e.y),p(e.y2)&&(n.axis_y2_min=e.y2)):n.axis_y_min=n.axis_y2_min=e,void t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:n.axis_x_min,y:n.axis_y_min,y2:n.axis_y2_min}},s.axis.range=function(e){return arguments.length?(m(e.max)&&this.axis.max(e.max),void(m(e.min)&&this.axis.min(e.min))):{max:this.axis.max(),min:this.axis.min()}},s.legend=function(){},s.legend.show=function(e){var t=this.internal;t.showLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},s.legend.hide=function(e){var t=this.internal;t.hideLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},s.resize=function(e){var t=this.internal,n=t.config;n.size_width=e?e.width:null,n.size_height=e?e.height:null,this.flush()},s.flush=function(){var e=this.internal;e.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},s.destroy=function(){var t=this.internal;return e.clearInterval(t.intervalForObserveInserted),e.onresize=null,t.selectChart.classed("c3",!1).html(""),Object.keys(t).forEach(function(e){t[e]=null}),null},s.tooltip=function(){},s.tooltip.show=function(e){var t,n,i=this.internal;e.mouse&&(n=e.mouse),e.data?i.isMultipleX()?(n=[i.x(e.data.x),i.getYScale(e.data.id)(e.data.value)],t=null):t=p(e.data.index)?e.data.index:i.getIndexByX(e.data.x):"undefined"!=typeof e.x?t=i.getIndexByX(e.x):"undefined"!=typeof e.index&&(t=e.index),i.dispatchEvent("mouseover",t,n),i.dispatchEvent("mousemove",t,n)},s.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0)};var _;l.isSafari=function(){var t=e.navigator.userAgent;return t.indexOf("Safari")>=0&&t.indexOf("Chrome")<0},l.isChrome=function(){var t=e.navigator.userAgent;return t.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r}),"function"==typeof define&&define.amd?define("c3",["d3"],u):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=u:e.c3=u}(window),angular.module("xeditable",[]).value("editableOptions",{theme:"default",icon_set:"default",buttons:"right",blurElem:"cancel",blurForm:"ignore",activate:"focus",isDisabled:!1,activationEvent:"click"}),angular.module("xeditable").directive("editableBsdate",["editableDirectiveFactory",function(e){return e({directiveName:"editableBsdate",inputTpl:"<div></div>",render:function(){this.parent.render.call(this);var e=angular.element('<input type="text" class="form-control" ng-model="$data"/>'),t=angular.element('<button type="button" class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button>'),n=angular.element('<span class="input-group-btn"></span>');e.attr("datepicker-popup",this.attrs.eDatepickerPopupXEditable||"yyyy/MM/dd"),e.attr("is-open",this.attrs.eIsOpen),e.attr("date-disabled",this.attrs.eDateDisabled),e.attr("datepicker-popup",this.attrs.eDatepickerPopup),e.attr("datepicker-mode",this.attrs.eDatepickerMode||"day"),e.attr("min-date",this.attrs.eMinDate),e.attr("max-date",this.attrs.eMaxDate),e.attr("show-weeks",this.attrs.eShowWeeks||!0),e.attr("starting-day",this.attrs.eStartingDay||0),e.attr("init-date",this.attrs.eInitDate||new Date),e.attr("min-mode",this.attrs.eMinMode||"day"),e.attr("max-mode",this.attrs.eMaxMode||"year"),e.attr("format-day",this.attrs.eFormatDay||"dd"),e.attr("format-month",this.attrs.eFormatMonth||"MMMM"),e.attr("format-year",this.attrs.eFormatYear||"yyyy"),e.attr("format-day-header",this.attrs.eFormatDayHeader||"EEE"),e.attr("format-day-title",this.attrs.eFormatDayTitle||"MMMM yyyy"),e.attr("format-month-title",this.attrs.eFormatMonthTitle||"yyyy"),e.attr("year-range",this.attrs.eYearRange||20),e.attr("show-button-bar",this.attrs.eShowButtonBar||!0),e.attr("current-text",this.attrs.eCurrentText||"Today"),e.attr("clear-text",this.attrs.eClearText||"Clear"),e.attr("close-text",this.attrs.eCloseText||"Done"),e.attr("close-on-date-selection",this.attrs.eCloseOnDateSelection||!0),e.attr("date-picker-append-to-body",this.attrs.eDatePickerAppendToBody||!1),e.attr("date-disabled",this.attrs.eDateDisabled),t.attr("ng-click",this.attrs.eNgClick),n.append(t),this.inputEl.prepend(e),this.inputEl.append(n),this.inputEl.removeAttr("class"),this.inputEl.attr("class","input-group")}})}]),angular.module("xeditable").directive("editableBstime",["editableDirectiveFactory",function(e){return e({directiveName:"editableBstime",inputTpl:"<timepicker></timepicker>",render:function(){this.parent.render.call(this);var e=angular.element('<div class="well well-small" style="display:inline-block;"></div>');e.attr("ng-model",this.inputEl.attr("ng-model")),this.inputEl.removeAttr("ng-model"),this.attrs.eNgChange&&(e.attr("ng-change",this.inputEl.attr("ng-change")),this.inputEl.removeAttr("ng-change")),this.inputEl.wrap(e)}})}]),angular.module("xeditable").directive("editableCheckbox",["editableDirectiveFactory",function(e){return e({directiveName:"editableCheckbox",inputTpl:'<input type="checkbox">',render:function(){this.parent.render.call(this),this.attrs.eTitle&&(this.inputEl.wrap("<label></label>"),this.inputEl.parent().append(this.attrs.eTitle))},autosubmit:function(){var e=this;e.inputEl.bind("change",function(){setTimeout(function(){e.scope.$apply(function(){e.scope.$form.$submit()})},500)})}})}]),angular.module("xeditable").directive("editableChecklist",["editableDirectiveFactory","editableNgOptionsParser",function(e,t){return e({directiveName:"editableChecklist",inputTpl:"<span></span>",useCopy:!0,render:function(){this.parent.render.call(this);var e=t(this.attrs.eNgOptions),n='<label ng-repeat="'+e.ngRepeat+'"><input type="checkbox" checklist-model="$parent.$data" checklist-value="'+e.locals.valueFn+'"><span ng-bind="'+e.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.html(n)}})}]),angular.module("xeditable").directive("editableCombodate",["editableDirectiveFactory","editableCombodate",function(e,t){return e({directiveName:"editableCombodate",inputTpl:'<input type="text">',render:function(){this.parent.render.call(this);var e=t.getInstance(this.inputEl,{value:new Date(this.scope.$data)}),n=this;e.$widget.find("select").bind("change",function(t){n.scope.$data=new Date(e.getValue()).toISOString()})}})}]),function(){var e="text|password|email|tel|number|url|search|color|date|datetime|time|month|week|file".split("|");angular.forEach(e,function(e){var t="editable"+e.charAt(0).toUpperCase()+e.slice(1);angular.module("xeditable").directive(t,["editableDirectiveFactory",function(n){return n({directiveName:t,inputTpl:'<input type="'+e+'">'})}])}),angular.module("xeditable").directive("editableRange",["editableDirectiveFactory",function(e){return e({directiveName:"editableRange",inputTpl:'<input type="range" id="range" name="range">',render:function(){this.parent.render.call(this),this.inputEl.after("<output>{{$data}}</output>")}})}])}(),angular.module("xeditable").directive("editableRadiolist",["editableDirectiveFactory","editableNgOptionsParser",function(e,t){return e({directiveName:"editableRadiolist",inputTpl:"<span></span>",render:function(){this.parent.render.call(this);var e=t(this.attrs.eNgOptions),n='<label ng-repeat="'+e.ngRepeat+'"><input type="radio" ng-disabled="'+this.attrs.eNgDisabled+'" ng-model="$parent.$data" value="{{'+e.locals.valueFn+'}}"><span ng-bind="'+e.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.html(n)},autosubmit:function(){var e=this;e.inputEl.bind("change",function(){setTimeout(function(){e.scope.$apply(function(){e.scope.$form.$submit()})},500)})}})}]),angular.module("xeditable").directive("editableSelect",["editableDirectiveFactory",function(e){return e({directiveName:"editableSelect",inputTpl:"<select></select>",autosubmit:function(){var e=this;e.inputEl.bind("change",function(){e.scope.$apply(function(){e.scope.$form.$submit()})})}})}]),angular.module("xeditable").directive("editableTextarea",["editableDirectiveFactory",function(e){return e({directiveName:"editableTextarea",inputTpl:"<textarea></textarea>",addListeners:function(){var e=this;e.parent.addListeners.call(e),e.single&&"no"!==e.buttons&&e.autosubmit()},autosubmit:function(){var e=this;e.inputEl.bind("keydown",function(t){(t.ctrlKey||t.metaKey)&&13===t.keyCode&&e.scope.$apply(function(){e.scope.$form.$submit()})})}})}]),angular.module("xeditable").factory("editableController",["$q","editableUtils",function(e,t){function n(e,n,i,r,a,o,s,l,c,u){var d,p,h=this;h.scope=e,h.elem=i,h.attrs=n,h.inputEl=null,h.editorEl=null,h.single=!0,h.error="",h.theme=a[s.theme]||a["default"],h.parent={},h.icon_set="default"===s.icon_set?o["default"][s.theme]:o.external[s.icon_set],h.inputTpl="",h.directiveName="",h.useCopy=!1,h.single=null,h.buttons="right",h.init=function(t){if(h.single=t,h.name=n.eName||n[h.directiveName],!n[h.directiveName])throw"You should provide value for `"+h.directiveName+"` in editable element!";d=r(n[h.directiveName]),h.buttons=h.single?h.attrs.buttons||s.buttons:"no",n.eName&&h.scope.$watch("$data",function(e){h.scope.$form.$data[n.eName]=e}),n.onshow&&(h.onshow=function(){return h.catchError(r(n.onshow)(e))}),n.onhide&&(h.onhide=function(){return r(n.onhide)(e)}),n.oncancel&&(h.oncancel=function(){return r(n.oncancel)(e)}),n.onbeforesave&&(h.onbeforesave=function(){return h.catchError(r(n.onbeforesave)(e))}),n.onaftersave&&(h.onaftersave=function(){return h.catchError(r(n.onaftersave)(e))}),e.$parent.$watch(n[h.directiveName],function(e,t){h.setLocalValue(),h.handleEmpty()})},h.render=function(){var e=h.theme;h.inputEl=angular.element(h.inputTpl),h.controlsEl=angular.element(e.controlsTpl),h.controlsEl.append(h.inputEl),"no"!==h.buttons&&(h.buttonsEl=angular.element(e.buttonsTpl),h.submitEl=angular.element(e.submitTpl),h.cancelEl=angular.element(e.cancelTpl),h.icon_set&&(h.submitEl.find("span").addClass(h.icon_set.ok),h.cancelEl.find("span").addClass(h.icon_set.cancel)),h.buttonsEl.append(h.submitEl).append(h.cancelEl),h.controlsEl.append(h.buttonsEl),h.inputEl.addClass("editable-has-buttons")),h.errorEl=angular.element(e.errorTpl),h.controlsEl.append(h.errorEl),h.editorEl=angular.element(h.single?e.formTpl:e.noformTpl),h.editorEl.append(h.controlsEl);for(var i in n.$attr)if(!(i.length<=1)){var r=!1,a=i.substring(1,2);if("e"===i.substring(0,1)&&a===a.toUpperCase()&&(r=i.substring(1),"Form"!==r&&"NgSubmit"!==r)){r=r.substring(0,1).toLowerCase()+t.camelToDash(r.substring(1));var o="value"!==r&&""===n[i]?r:n[i];h.inputEl.attr(r,o)}}h.inputEl.addClass("editable-input"),h.inputEl.attr("ng-model","$data"),h.editorEl.addClass(t.camelToDash(h.directiveName)),h.single&&(h.editorEl.attr("editable-form","$form"),h.editorEl.attr("blur",h.attrs.blur||("no"===h.buttons?"cancel":s.blurElem))),angular.isFunction(e.postrender)&&e.postrender.call(h)},h.setLocalValue=function(){h.scope.$data=h.useCopy?angular.copy(d(e.$parent)):d(e.$parent)},h.show=function(){return h.setLocalValue(),h.render(),i.after(h.editorEl),c(h.editorEl)(e),h.addListeners(),i.addClass("editable-hide"),h.onshow()},h.hide=function(){return h.editorEl.remove(),i.removeClass("editable-hide"),h.onhide()},h.cancel=function(){h.oncancel()},h.addListeners=function(){h.inputEl.bind("keyup",function(e){if(h.single)switch(e.keyCode){case 27:h.scope.$apply(function(){h.scope.$form.$cancel()})}}),h.single&&"no"===h.buttons&&h.autosubmit(),h.editorEl.bind("click",function(e){e.which&&1!==e.which||h.scope.$form.$visible&&(h.scope.$form._clicked=!0)})},h.setWaiting=function(e){e?(p=!h.inputEl.attr("disabled")&&!h.inputEl.attr("ng-disabled")&&!h.inputEl.attr("ng-enabled"),p&&(h.inputEl.attr("disabled","disabled"),h.buttonsEl&&h.buttonsEl.find("button").attr("disabled","disabled"))):p&&(h.inputEl.removeAttr("disabled"),h.buttonsEl&&h.buttonsEl.find("button").removeAttr("disabled"))},h.activate=function(e,t){setTimeout(function(){var n=h.inputEl[0];"focus"===s.activate&&n.focus&&(e&&(t=t||e,n.onfocus=function(){var n=this;setTimeout(function(){n.setSelectionRange(e,t)})}),n.focus()),"select"===s.activate&&n.select&&n.select()},0)},h.setError=function(t){angular.isObject(t)||(e.$error=t,h.error=t)},h.catchError=function(e,t){return angular.isObject(e)&&t!==!0?u.when(e).then(angular.bind(this,function(e){this.catchError(e,!0)}),angular.bind(this,function(e){this.catchError(e,!0)})):t&&angular.isObject(e)&&e.status&&200!==e.status&&e.data&&angular.isString(e.data)?(this.setError(e.data),e=e.data):angular.isString(e)&&this.setError(e),e},h.save=function(){d.assign(e.$parent,h.useCopy?angular.copy(h.scope.$data):h.scope.$data)},h.handleEmpty=function(){var t=d(e.$parent),n=null===t||void 0===t||""===t||angular.isArray(t)&&0===t.length;i.toggleClass("editable-empty",n)},h.autosubmit=angular.noop,h.onshow=angular.noop,h.onhide=angular.noop,h.oncancel=angular.noop,h.onbeforesave=angular.noop,h.onaftersave=angular.noop}return n.$inject=["$scope","$attrs","$element","$parse","editableThemes","editableIcons","editableOptions","$rootScope","$compile","$q"],n}]),angular.module("xeditable").factory("editableDirectiveFactory",["$parse","$compile","editableThemes","$rootScope","$document","editableController","editableFormController","editableOptions",function(e,t,n,i,r,a,o,s){return function(t){return{restrict:"A",scope:!0,require:[t.directiveName,"?^form"],controller:a,link:function(n,a,l,c){var u,d=c[0],p=!1;if(c[1])u=c[1],p=!0;else if(l.eForm){var h=e(l.eForm)(n);if(h)u=h,p=!0;else for(var f=0;f<r[0].forms.length;f++)if(r[0].forms[f].name===l.eForm){u=null,p=!0;break}}angular.forEach(t,function(e,t){void 0!==d[t]&&(d.parent[t]=d[t])}),angular.extend(d,t);var g=angular.isDefined(l.editDisabled)?n.$eval(l.editDisabled):s.isDisabled;if(!g)if(d.init(!p),n.$editable=d,a.addClass("editable"),p)if(u){if(n.$form=u,!n.$form.$addEditable)throw"Form with editable elements should have `editable-form` attribute.";n.$form.$addEditable(d)}else i.$$editableBuffer=i.$$editableBuffer||{},i.$$editableBuffer[l.eForm]=i.$$editableBuffer[l.eForm]||[],i.$$editableBuffer[l.eForm].push(d),n.$form=null;else n.$form=o(),n.$form.$addEditable(d),l.eForm&&(n.$parent[l.eForm]=n.$form),(!l.eForm||l.eClickable)&&(a.addClass("editable-click"),a.bind(s.activationEvent,function(e){e.preventDefault(),e.editable=d,n.$apply(function(){n.$form.$show()})}))}}}}]),angular.module("xeditable").factory("editableFormController",["$parse","$document","$rootScope","editablePromiseCollection","editableUtils",function(e,t,n,i,r){var a=[],o=function(e,t){if(t==e)return!0;for(var n=t.parentNode;null!==n;){if(n==e)return!0;n=n.parentNode}return!1},s=function(e,t){var n=!0,i=e.$editables;return angular.forEach(i,function(e){var i=e.editorEl[0];o(i,t.target)&&(n=!1)}),n};t.bind("click",function(e){if(!(e.which&&1!==e.which||e.isDefaultPrevented())){for(var t=[],i=[],r=0;r<a.length;r++)a[r]._clicked?a[r]._clicked=!1:a[r].$waiting||("cancel"===a[r]._blur&&s(a[r],e)&&t.push(a[r]),"submit"===a[r]._blur&&s(a[r],e)&&i.push(a[r]));(t.length||i.length)&&n.$apply(function(){angular.forEach(t,function(e){e.$cancel()}),angular.forEach(i,function(e){e.$submit()})})}});var l={$addEditable:function(e){this.$editables.push(e),e.elem.bind("$destroy",angular.bind(this,this.$removeEditable,e)),e.scope.$form||(e.scope.$form=this),this.$visible&&e.catchError(e.show())},$removeEditable:function(e){for(var t=0;t<this.$editables.length;t++)if(this.$editables[t]===e)return void this.$editables.splice(t,1)},$show:function(){if(!this.$visible){this.$visible=!0;var e=i();e.when(this.$onshow()),this.$setError(null,""),angular.forEach(this.$editables,function(t){e.when(t.show())}),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$activate),onFalse:angular.bind(this,this.$activate),onString:angular.bind(this,this.$activate)}),setTimeout(angular.bind(this,function(){this._clicked=!1,-1===r.indexOf(a,this)&&a.push(this)}),0)}},$activate:function(e){var t;if(this.$editables.length){if(angular.isString(e))for(t=0;t<this.$editables.length;t++)if(this.$editables[t].name===e)return void this.$editables[t].activate();for(t=0;t<this.$editables.length;t++)if(this.$editables[t].error)return void this.$editables[t].activate();this.$editables[0].activate(this.$editables[0].elem[0].selectionStart,this.$editables[0].elem[0].selectionEnd)}},$hide:function(){this.$visible&&(this.$visible=!1,this.$onhide(),angular.forEach(this.$editables,function(e){e.hide()}),r.arrayRemove(a,this))},$cancel:function(){this.$visible&&(this.$oncancel(),angular.forEach(this.$editables,function(e){e.cancel()}),this.$hide())},$setWaiting:function(e){this.$waiting=!!e,angular.forEach(this.$editables,function(t){t.setWaiting(!!e)})},$setError:function(e,t){angular.forEach(this.$editables,function(n){e&&n.name!==e||n.setError(t)})},$submit:function(){function e(e){var t=i();t.when(this.$onbeforesave()),t.then({onWait:angular.bind(this,this.$setWaiting),onTrue:e?angular.bind(this,this.$save):angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})}if(!this.$waiting){this.$setError(null,"");var t=i();angular.forEach(this.$editables,function(e){t.when(e.onbeforesave())}),t.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,e,!0),onFalse:angular.bind(this,e,!1),onString:angular.bind(this,this.$activate)})}},$save:function(){angular.forEach(this.$editables,function(e){e.save()});var e=i();e.when(this.$onaftersave()),angular.forEach(this.$editables,function(t){e.when(t.onaftersave())}),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})},$onshow:angular.noop,$oncancel:angular.noop,$onhide:angular.noop,$onbeforesave:angular.noop,$onaftersave:angular.noop};return function(){return angular.extend({$editables:[],$visible:!1,$waiting:!1,$data:{},_clicked:!1,_blur:null},l)}}]),angular.module("xeditable").directive("editableForm",["$rootScope","$parse","editableFormController","editableOptions",function(e,t,n,i){return{restrict:"A",require:["form"],compile:function(){return{pre:function(t,i,r,a){var o,s=a[0];r.editableForm?t[r.editableForm]&&t[r.editableForm].$show?(o=t[r.editableForm],angular.extend(s,o)):(o=n(),t[r.editableForm]=o,angular.extend(o,s)):(o=n(),angular.extend(s,o));var l=e.$$editableBuffer,c=s.$name;c&&l&&l[c]&&(angular.forEach(l[c],function(e){o.$addEditable(e)}),delete l[c])},post:function(e,n,r,a){var o;o=r.editableForm&&e[r.editableForm]&&e[r.editableForm].$show?e[r.editableForm]:a[0],r.onshow&&(o.$onshow=angular.bind(o,t(r.onshow),e)),r.onhide&&(o.$onhide=angular.bind(o,t(r.onhide),e)),r.oncancel&&(o.$oncancel=angular.bind(o,t(r.oncancel),e)),r.shown&&t(r.shown)(e)&&o.$show(),o._blur=r.blur||i.blurForm,r.ngSubmit||r.submit||(r.onbeforesave&&(o.$onbeforesave=function(){return t(r.onbeforesave)(e,{$data:o.$data})}),r.onaftersave&&(o.$onaftersave=function(){return t(r.onaftersave)(e,{$data:o.$data})}),n.bind("submit",function(t){t.preventDefault(),e.$apply(function(){o.$submit()})})),n.bind("click",function(e){e.which&&1!==e.which||o.$visible&&(o._clicked=!0)})}}}}}]),angular.module("xeditable").factory("editablePromiseCollection",["$q",function(e){function t(){return{promises:[],hasFalse:!1,hasString:!1,when:function(t,n){if(t===!1)this.hasFalse=!0;else if(!n&&angular.isObject(t))this.promises.push(e.when(t));else{if(!angular.isString(t))return;this.hasString=!0}},then:function(t){function n(){s.hasString||s.hasFalse?!s.hasString&&s.hasFalse?r():a():i()}t=t||{};var i=t.onTrue||angular.noop,r=t.onFalse||angular.noop,a=t.onString||angular.noop,o=t.onWait||angular.noop,s=this;this.promises.length?(o(!0),e.all(this.promises).then(function(e){
o(!1),angular.forEach(e,function(e){s.when(e,!0)}),n()},function(e){o(!1),a()})):n()}}}return t}]),angular.module("xeditable").factory("editableUtils",[function(){return{indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1},arrayRemove:function(e,t){var n=this.indexOf(e,t);return n>=0&&e.splice(n,1),t},camelToDash:function(e){var t=/[A-Z]/g;return e.replace(t,function(e,t){return(t?"-":"")+e.toLowerCase()})},dashToCamel:function(e){var t=/([\:\-\_]+(.))/g,n=/^moz([A-Z])/;return e.replace(t,function(e,t,n,i){return i?n.toUpperCase():n}).replace(n,"Moz$1")}}}]),angular.module("xeditable").factory("editableNgOptionsParser",[function(){function e(e){var n;if(!(n=e.match(t)))throw"ng-options parse error";var i,r=n[2]||n[1],a=n[4]||n[6],o=n[5],s=(n[3]||"",n[2]?n[1]:a),l=n[7],c=n[8],u=c?n[8]:null;return void 0===o?(i=a+" in "+l,void 0!==c&&(i+=" track by "+u)):i="("+o+", "+a+") in "+l,{ngRepeat:i,locals:{valueName:a,keyName:o,valueFn:s,displayFn:r}}}var t=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/;return e}]),angular.module("xeditable").factory("editableCombodate",[function(){function e(e,t){if(this.$element=angular.element(e),"INPUT"!=this.$element[0].nodeName)throw"Combodate should be applied to INPUT element";this.defaults={format:"YYYY-MM-DD HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,customClass:"",roundTime:!0,smartDays:!0},this.options=angular.extend({},this.defaults,t),this.init()}return e.prototype={constructor:e,init:function(){if(this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=angular.element('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.options.smartDays){var e=this;this.$widget.find("select").bind("change",function(t){(angular.element(t.target).hasClass("month")||angular.element(t.target).hasClass("year"))&&e.fillCombo("day")})}this.$widget.find("select").css("width","auto"),this.$element.css("display","none").after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var e=this.options.template,t=this.options.customClass;return angular.forEach(this.map,function(t,n){t=t[0];var i=new RegExp(t+"+"),r=t.length>1?t.substring(1,2):t;e=e.replace(i,"{"+r+"}")}),e=e.replace(/ /g,"&nbsp;"),angular.forEach(this.map,function(n,i){n=n[0];var r=n.length>1?n.substring(1,2):n;e=e.replace("{"+r+"}",'<select class="'+i+" "+t+'"></select>')}),e},initCombos:function(){for(var e in this.map){var t=this.$widget[0].querySelectorAll("."+e);this["$"+e]=t.length?angular.element(t):null,this.fillCombo(e)}},fillCombo:function(e){var t=this["$"+e];if(t){var n="fill"+e.charAt(0).toUpperCase()+e.slice(1),i=this[n](),r=t.val();t.html("");for(var a=0;a<i.length;a++)t.append('<option value="'+i[a][0]+'">'+i[a][1]+"</option>");t.val(r)}},fillCommon:function(e){var t,n=[];if("name"===this.options.firstItem){t=moment.relativeTime||moment.langData()._relativeTime;var i="function"==typeof t[e]?t[e](1,!0,e,!1):t[e];i=i.split(" ").reverse()[0],n.push(["",i])}else"empty"===this.options.firstItem&&n.push(["",""]);return n},fillDay:function(){var e,t,n=this.fillCommon("d"),i=-1!==this.options.template.indexOf("DD"),r=31;if(this.options.smartDays&&this.$month&&this.$year){var a=parseInt(this.$month.val(),10),o=parseInt(this.$year.val(),10);isNaN(a)||isNaN(o)||(r=moment([o,a]).daysInMonth())}for(t=1;r>=t;t++)e=i?this.leadZero(t):t,n.push([t,e]);return n},fillMonth:function(){var e,t,n=this.fillCommon("M"),i=-1!==this.options.template.indexOf("MMMM"),r=-1!==this.options.template.indexOf("MMM"),a=-1!==this.options.template.indexOf("MM");for(t=0;11>=t;t++)e=i?moment().date(1).month(t).format("MMMM"):r?moment().date(1).month(t).format("MMM"):a?this.leadZero(t+1):t+1,n.push([t,e]);return n},fillYear:function(){var e,t,n=[],i=-1!==this.options.template.indexOf("YYYY");for(t=this.options.maxYear;t>=this.options.minYear;t--)e=i?t:(t+"").substring(2),n[this.options.yearDescending?"push":"unshift"]([t,e]);return n=this.fillCommon("y").concat(n)},fillHour:function(){var e,t,n=this.fillCommon("h"),i=-1!==this.options.template.indexOf("h"),r=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),a=i?1:0,o=i?12:23;for(t=a;o>=t;t++)e=r?this.leadZero(t):t,n.push([t,e]);return n},fillMinute:function(){var e,t,n=this.fillCommon("m"),i=-1!==this.options.template.indexOf("mm");for(t=0;59>=t;t+=this.options.minuteStep)e=i?this.leadZero(t):t,n.push([t,e]);return n},fillSecond:function(){var e,t,n=this.fillCommon("s"),i=-1!==this.options.template.indexOf("ss");for(t=0;59>=t;t+=this.options.secondStep)e=i?this.leadZero(t):t,n.push([t,e]);return n},fillAmpm:function(){var e=-1!==this.options.template.indexOf("a"),t=(-1!==this.options.template.indexOf("A"),[["am",e?"am":"AM"],["pm",e?"pm":"PM"]]);return t},getValue:function(e){var t,n={},i=this,r=!1;return angular.forEach(this.map,function(e,t){if("ampm"!==t){var a="day"===t?1:0;return n[t]=i["$"+t]?parseInt(i["$"+t].val(),10):a,isNaN(n[t])?(r=!0,!1):void 0}}),r?"":(this.$ampm&&(n.hour=12===n.hour?"am"===this.$ampm.val()?0:12:"am"===this.$ampm.val()?n.hour:n.hour+12),t=moment([n.year,n.month,n.day,n.hour,n.minute,n.second]),this.highlight(t),e=void 0===e?this.options.format:e,null===e?t.isValid()?t:null:t.isValid()?t.format(e):"")},setValue:function(e){function t(e,t){var n={};return angular.forEach(e.children("option"),function(e,i){var r=angular.element(e).attr("value");if(""!==r){var a=Math.abs(r-t);("undefined"==typeof n.distance||a<n.distance)&&(n={value:r,distance:a})}}),n.value}if(e){var n="string"==typeof e?moment(e,this.options.format,!0):moment(e),i=this,r={};n.isValid()&&(angular.forEach(this.map,function(e,t){"ampm"!==t&&(r[t]=n[e[1]]())}),this.$ampm&&(r.hour>=12?(r.ampm="pm",r.hour>12&&(r.hour-=12)):(r.ampm="am",0===r.hour&&(r.hour=12))),angular.forEach(r,function(e,n){i["$"+n]&&("minute"===n&&i.options.minuteStep>1&&i.options.roundTime&&(e=t(i["$"+n],e)),"second"===n&&i.options.secondStep>1&&i.options.roundTime&&(e=t(i["$"+n],e)),i["$"+n].val(e))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(n.format(this.options.format)).triggerHandler("change"))}},highlight:function(e){e.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(e){return 9>=e?"0"+e:e},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},{getInstance:function(t,n){return new e(t,n)}}}]),angular.module("xeditable").factory("editableIcons",function(){var e={"default":{bs2:{ok:"icon-ok icon-white",cancel:"icon-remove"},bs3:{ok:"glyphicon glyphicon-ok",cancel:"glyphicon glyphicon-remove"}},external:{"font-awesome":{ok:"fa fa-check",cancel:"fa fa-times"}}};return e}),angular.module("xeditable").factory("editableThemes",function(){var e={"default":{formTpl:'<form class="editable-wrap"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<span class="editable-controls"></span>',inputTpl:"",errorTpl:'<div class="editable-error" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit">save</button>',cancelTpl:'<button type="button" ng-click="$form.$cancel()">cancel</button>'},bs2:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls controls control-group" ng-class="{\'error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span></span></button>',cancelTpl:'<button type="button" class="btn" ng-click="$form.$cancel()"><span></span></button>'},bs3:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls form-group" ng-class="{\'has-error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span></span></button>',cancelTpl:'<button type="button" class="btn btn-default" ng-click="$form.$cancel()"><span></span></button>',buttonsClass:"",inputClass:"",postrender:function(){switch(this.directiveName){case"editableText":case"editableSelect":case"editableTextarea":case"editableEmail":case"editableTel":case"editableNumber":case"editableUrl":case"editableSearch":case"editableDate":case"editableDatetime":case"editableBsdate":case"editableTime":case"editableMonth":case"editableWeek":if(this.inputEl.addClass("form-control"),this.theme.inputClass){if(this.inputEl.attr("multiple")&&("input-sm"===this.theme.inputClass||"input-lg"===this.theme.inputClass))break;this.inputEl.addClass(this.theme.inputClass)}break;case"editableCheckbox":this.editorEl.addClass("checkbox")}this.buttonsEl&&this.theme.buttonsClass&&this.buttonsEl.find("button").addClass(this.theme.buttonsClass)}}};return e});var Apiman;!function(e){e.pluginName="api-manager",e.log=Logger.get(e.pluginName),e.templatePath="plugins/api-manager/html"}(Apiman||(Apiman={}));var Apiman;!function(e){e._module=angular.module(e.pluginName,["ApimanServices","ApimanLogger","ApimanConfiguration","ApimanTranslation","ApimanPageLifecycle","ApimanCurrentUser","ApimanDialogs","ui.sortable","xeditable"]);var t=void 0,n={"/about":{templateUrl:"about.html"},"/dash":{templateUrl:"dash.html"},"/profile":{templateUrl:"profile.html"},"/admin/gateways":{templateUrl:"admin/admin-gateways.html"},"/admin/plugins":{templateUrl:"admin/admin-plugins.html"},"/admin/policyDefs":{templateUrl:"admin/admin-policyDefs.html"},"/admin/roles":{templateUrl:"admin/admin-roles.html"},"/admin/gateways/:gateway":{templateUrl:"forms/edit-gateway.html"},"/admin/plugins/:plugin":{templateUrl:"forms/edit-plugin.html"},"/admin/policyDefs/:policyDef":{templateUrl:"forms/edit-policyDef.html"},"/admin/roles/:role":{templateUrl:"forms/edit-role.html"},"/orgs/:org/:type/:id/:ver/policies/:policy":{templateUrl:"forms/edit-policy.html"},"/orgs/:org/:type/:id/:ver/new-policy":{templateUrl:"forms/new-policy.html"},"/orgs/:org/apps/:app":{templateUrl:"app/app.html"},"/orgs/:org/apps/:app/:version":{templateUrl:"app/app-overview.html"},"/orgs/:org/apps/:app/:version/contracts":{templateUrl:"app/app-contracts.html"},"/orgs/:org/apps/:app/:version/apis":{templateUrl:"app/app-apis.html"},"/orgs/:org/apps/:app/:version/policies":{templateUrl:"app/app-policies.html"},"/orgs/:org/apps/:app/:version/activity":{templateUrl:"app/app-activity.html"},"/orgs/:org/apps/:app/:version/new-version":{templateUrl:"forms/new-appversion.html"},"/orgs/:org/plans/:plan":{templateUrl:"plan/plan.html"},"/orgs/:org/plans/:plan/:version":{templateUrl:"plan/plan-overview.html"},"/orgs/:org/plans/:plan/:version/policies":{templateUrl:"plan/plan-policies.html"},"/orgs/:org/plans/:plan/:version/activity":{templateUrl:"plan/plan-activity.html"},"/orgs/:org/plans/:plan/:version/new-version":{templateUrl:"forms/new-planversion.html"},"/orgs/:org/services/:service":{templateUrl:"service/service.html"},"/orgs/:org/services/:service/:version":{templateUrl:"service/service-overview.html"},"/orgs/:org/services/:service/:version/impl":{templateUrl:"service/service-impl.html"},"/orgs/:org/services/:service/:version/def":{templateUrl:"service/service-def.html"},"/orgs/:org/services/:service/:version/plans":{templateUrl:"service/service-plans.html"},"/orgs/:org/services/:service/:version/policies":{templateUrl:"service/service-policies.html"},"/orgs/:org/services/:service/:version/endpoint":{templateUrl:"service/service-endpoint.html"},"/orgs/:org/services/:service/:version/contracts":{templateUrl:"service/service-contracts.html"},"/orgs/:org/services/:service/:version/metrics":{templateUrl:"service/service-metrics.html"},"/orgs/:org/services/:service/:version/activity":{templateUrl:"service/service-activity.html"},"/orgs/:org/services/:service/:version/new-version":{templateUrl:"forms/new-serviceversion.html"},"/browse/orgs":{templateUrl:"consumer/consumer-orgs.html"},"/browse/services":{templateUrl:"consumer/consumer-services.html"},"/browse/orgs/:org":{templateUrl:"consumer/consumer-org.html"},"/browse/orgs/:org/:service":{templateUrl:"consumer/consumer-service-redirect.html"},"/browse/orgs/:org/:service/:version":{templateUrl:"consumer/consumer-service.html"},"/browse/orgs/:org/:service/:version/def":{templateUrl:"consumer/consumer-service-def.html"},"/new-app":{templateUrl:"forms/new-app.html"},"/new-contract":{templateUrl:"forms/new-contract.html"},"/new-gateway":{templateUrl:"forms/new-gateway.html"},"/new-org":{templateUrl:"forms/new-org.html"},"/new-plan":{templateUrl:"forms/new-plan.html"},"/new-plugin":{templateUrl:"forms/new-plugin.html"},"/new-role":{templateUrl:"forms/new-role.html"},"/new-service":{templateUrl:"forms/new-service.html"},"/import-policyDefs":{templateUrl:"forms/import-policyDefs.html"},"/orgs/:org":{templateUrl:"org/org.html"},"/orgs/:org/plans":{templateUrl:"org/org-plans.html"},"/orgs/:org/services":{templateUrl:"org/org-services.html"},"/orgs/:org/apps":{templateUrl:"org/org-apps.html"},"/orgs/:org/members":{templateUrl:"org/org-members.html"},"/orgs/:org/manage-members":{templateUrl:"org/org-manage-members.html"},"/orgs/:org/activity":{templateUrl:"org/org-activity.html"},"/orgs/:org/new-member":{templateUrl:"org/org-new-member.html"},"/users/:user":{templateUrl:"user/user.html"},"/users/:user/activity":{templateUrl:"user/user-activity.html"},"/users/:user/apps":{templateUrl:"user/user-apps.html"},"/users/:user/orgs":{templateUrl:"user/user-orgs.html"},"/users/:user/services":{templateUrl:"user/user-services.html"},"/errors/invalid_server":{templateUrl:"errors/invalid_server.html"},"/errors/400":{templateUrl:"errors/400.html"},"/errors/403":{templateUrl:"errors/403.html"},"/errors/404":{templateUrl:"errors/404.html"},"/errors/409":{templateUrl:"errors/409.html"},"/errors/500":{templateUrl:"errors/500.html"}};e._module.config(["$locationProvider","$routeProvider","HawtioNavBuilderProvider",function(i,r,a){t=a.create().id(e.pluginName).title(function(){return"API Management"}).href(function(){return"/api-manager"}).page(function(){return a.join(e.templatePath,"dash.html")}).build(),a.configureRouting(r,t),angular.forEach(n,function(t,n){t.templateUrl=a.join(e.templatePath,t.templateUrl),this.when("/"+e.pluginName+n,t)},r),i.html5Mode(!0)}]),e._module.factory("authInterceptor",["$q","$timeout","Configuration","Logger",function(e,t,n,i){var r=function(){i.info("Refreshing bearer token now."),$.get("rest/tokenRefresh",function(e){i.info("Bearer token successfully refreshed: {0}",e),n.api.auth.bearerToken.token=e.token;var a=e.refreshPeriod;(!a||1>a)&&(i.info("Refresh period was invalid! (using 60s)"),a=60),t(r,1e3*a)}).fail(function(e){i.error("Failed to refresh bearer token: {0}",e)})};if("bearerToken"==n.api.auth.type){var a=n.api.auth.bearerToken.refreshPeriod;t(r,1e3*a)}var o={request:function(e){var t=n.getAuthorizationHeader();return t&&(e.headers.Authorization=t),e}};return o}]),e._module.config(["$httpProvider",function(e){e.interceptors.push("authInterceptor")}]),e._module.run(["$rootScope","SystemSvcs","HawtioNav",function(n,i,r){i.getStatus(function(n){n&&n.up?r.add(t):e.log.error("apiman reports that it is not running.")},function(t){e.log.error("Error getting apiman system status: "+JSON.stringify(t))}),n.pluginName=e.pluginName}]),hawtioPluginLoader.registerPreBootstrapTask(function(t){$.getScript("apiman/config.js").done(function(t,n){e.log.info("Loaded the config.js config!")}).fail(function(t){e.log.debug("Error fetching configuration: ",t)}).always(function(){$.getScript("apiman/translations.js").done(function(t,n){e.log.info("Loaded the translations.js bundle!")}).fail(function(t){e.log.debug("Error fetching translations: ",t)}).always(function(){t()})})},!0),hawtioPluginLoader.addModule(e.pluginName)}(Apiman||(Apiman={}));var Apiman;!function(e){e.DashController=e._module.controller("Apiman.AboutController",["$scope","PageLifecycle","CurrentUser","Configuration",function(e,t,n,i){t.loadPage("About",void 0,e,function(){e.github="http://github.com/apiman/apiman",e.site="http://apiman.io/",e.userGuide="http://www.apiman.io/latest/user-guide.html",e.tutorials="http://www.apiman.io/latest/tutorials.html",e.version=i.apiman.version,e.builtOn=i.apiman.builtOn,e.apiEndpoint=i.api.endpoint,t.setPageTitle("about")})}])}(Apiman||(Apiman={}));var ApimanConfiguration;!function(e){e._module=angular.module("ApimanConfiguration",[]),e.Configuration=e._module.factory("Configuration",["$window",function(e){var t={};return e.APIMAN_CONFIG_DATA&&(t=angular.copy(e.APIMAN_CONFIG_DATA),delete e.APIMAN_CONFIG_DATA),t.getAuthorizationHeader=function(){var e=null;if("basic"==t.api.auth.type){var n=t.api.auth.basic.username,i=t.api.auth.basic.password,r=btoa(n+":"+i);e="Basic "+r}else if("bearerToken"==t.api.auth.type){var a=t.api.auth.bearerToken.token;e="Bearer "+a}else if("authToken"==t.api.auth.type){var a=t.api.auth.bearerToken.token;e="AUTH-TOKEN "+a}return e},t}])}(ApimanConfiguration||(ApimanConfiguration={}));var ApimanCurrentUser;!function(e){e._module=angular.module("ApimanCurrentUser",["ApimanServices"]),e.CurrentUser=e._module.factory("CurrentUser",["$q","$rootScope","CurrentUserSvcs","Logger",function(e,t,n,i){return{getCurrentUser:function(){return t.currentUser},getCurrentUserOrgs:function(){for(var e={},n=t.currentUser.permissions,i=0;i<n.length;i++){var r=n[i];e[r.organizationId]=!0}var a=[];return angular.forEach(e,function(e,t){this.push(t)},a),a},hasPermission:function(e,n){if(e&&t.permissions){var i=e+"||"+n;return t.permissions[i]}return!1},isMember:function(e){return e?t.memberships[e]:!1},clear:function(){t.currentUser=void 0}}}])}(ApimanCurrentUser||(ApimanCurrentUser={}));var Apiman;!function(e){e.DashController=e._module.controller("Apiman.DashController",["$scope","PageLifecycle","CurrentUser",function(e,t,n){t.loadPage("Dash",void 0,e,function(){e.isAdmin=n.getCurrentUser().admin,e.currentUser=n.getCurrentUser(),t.setPageTitle("dashboard")})}])}(Apiman||(Apiman={}));var ApimanDialogs;!function(e){e._module=angular.module("ApimanDialogs",["ApimanLogger","ApimanServices"]),e.Dialogs=e._module.factory("Dialogs",["Logger","$compile","$rootScope","$timeout","ApimanSvcs","OrgSvcs",function(e,t,n,i,r,a){return{confirm:function(e,r,a,o){var s=n.$new(!0);s.onYes=function(){a&&a()},s.onNo=function(){o&&o()},s.title=e,s.message=r,$("body").append(t('<apiman-confirm-modal modal-title="{{ title }}">{{ message }}</apiman-confirm-modal>')(s)),i(function(){$("#confirmModal").modal({keyboard:!0,backdrop:"static"})},1)},selectService:function(o,s,l){var c=n.$new(!0);c.selectedService=void 0,c.selectedServiceVersion=void 0,c.search=function(){if(c.selectedService=void 0,c.searchText){c.searchButton.state="in-progress";var t={};t.filters=[],t.filters.push({name:"name",value:"%"+c.searchText+"%",operator:"like"});var n=angular.toJson(t);e.log("Searching for services: {0}",c.searchText),r.save({entityType:"search",secondaryType:"services"},n,function(t){c.services=t.beans.length>0?t.beans:void 0,c.criteria=c.searchText,e.log("Found {0} services.",t.beans.length),c.searchButton.state="complete"},function(t){e.error(t),c.services=void 0,c.criteria=c.searchText,c.searchButton.state="error"})}else c.criteria=void 0,c.services=void 0},c.onServiceSelected=function(e){c.selectedService&&(c.selectedService.selected=!1),c.selectedService=e,e.selected=!0,c.selectedServiceVersion=void 0,a.query({organizationId:e.organizationId,entityType:"services",entityId:e.id,versionsOrActivity:"versions"},function(e){if(l){var t=[];angular.forEach(e,function(e){"Published"==e.status&&t.push(e)}),c.serviceVersions=t}else c.serviceVersions=e;c.serviceVersions.length>0&&(c.selectedServiceVersion=c.serviceVersions[0])},function(e){c.serviceVersions=[],c.selectedServiceVersion=void 0})},c.onOK=function(){s&&s(c.selectedServiceVersion)},c.title=o,$("body").append(t('<apiman-select-service-modal modal-title="{{ title }}"></apiman-confirm-modal>')(c)),i(function(){$("#selectServiceModal").modal({keyboard:!0,backdrop:"static"}),$("#selectServiceModal").on("shown.bs.modal",function(){$("#selectServiceModal .input-search").focus()})},1)}}}])}(ApimanDialogs||(ApimanDialogs={}));var Apiman;!function(e){e._module.directive("apimanActionBtn",["Logger",function(e){return{restrict:"A",link:function(t,n,i){var r=i.field,a=i.placeholder,o=i.icon;e.debug("Action button initializing state variable [{0}].",r),t[r]={state:"ready",html:$(n).html(),actionHtml:'<i class="fa fa-spin '+o+'"></i> '+a},t.$watch(r+".state",function(){var e=t[r];"in-progress"==e.state?($(n).prop("disabled",!0),$(n).html(e.actionHtml)):($(n).prop("disabled",!1),$(n).html(e.html))})}}}]),e._module.directive("apimanSelectPicker",["Logger","$timeout","$parse","TranslationService",function(e,t,n,i){return{restrict:"A",link:function(n,i,r){function a(e){n.$applyAsync(function(){$(i).selectpicker("refresh")})}if(t(function(){$(i).selectpicker(),$(i).selectpicker("refresh")}),r.ngOptions&&/ in /.test(r.ngOptions)){var o=r.ngOptions.split(" in ")[1].split(" ")[0];e.debug("Watching model {0} for {1}.",o,r.ngModel),n.$watch(o,function(){n.$applyAsync(function(){e.debug("Refreshing {0} due to watch model update.",r.ngModel),$(i).selectpicker("refresh")})},!0)}r.apimanSelectPicker&&(e.debug("Watching {0}.",r.apimanSelectPicker),n.$watch(r.apimanSelectPicker+".length",a,!0)),r.ngModel&&n.$watch(r.ngModel,a,!0),r.ngDisabled&&n.$watch(r.ngDisabled,a,!0),n.$on("$destroy",function(){t(function(){$(i).selectpicker("destroy")})}),t(function(){$(i).selectpicker("refresh")},200)}}}]),e._module.directive("apimanPermission",["Logger","CurrentUser",function(e,t){return{restrict:"A",link:function(n,i,r){var a=function(a){var o=n.organizationId;if(o){var s=r.apimanPermission;$(i).removeClass("apiman-not-permitted"),t.hasPermission(o,s)||$(i).addClass("apiman-not-permitted")}else e.error("Missing organizationId from $scope - authorization disabled.")};n.$watch("organizationId",a),n.$watch("permissions",a)}}}]),e._module.directive("apimanStatus",["Logger","EntityStatusService",function(e,t){return{restrict:"A",link:function(n,i,r){n.$watch(function(e){return t.getEntityStatus()},function(t,n){var a=t;if(a){var o=r.apimanStatus.split(","),s=!1;e.debug("Checking status {0} against valid statuses {1}:  {2}",a,""+o,i[0].outerHTML);for(var l=0;l<o.length;l++)if(o[l]==a){s=!0;break}$(i).removeClass("apiman-wrong-status"),s||$(i).addClass("apiman-wrong-status")}else e.error("Missing entityStatus from $scope - hide/show based on entity status feature is disabled.")})}}}]),e._module.factory("EntityStatusService",["$rootScope",function(e){var t=null;return{setEntityStatus:function(e){t=e},getEntityStatus:function(){return t}}}]),e._module.directive("apimanEntityStatus",["Logger","EntityStatusService",function(e,t){return{restrict:"A",link:function(e,n,i){e.$watch(function(e){return t.getEntityStatus()},function(e,t){var i=e;i&&($(n).html(i),$(n).removeClass(),$(n).addClass("apiman-label"),$(n).addClass("Created"==i||"Ready"==i?"apiman-label-warning":"Retired"==i?"apiman-label-default":"apiman-label-success"))})}}}]),e.sb_counter=0,e._module.directive("apimanSearchBox",["Logger","TranslationService",function(t,n){return{restrict:"E",replace:!0,templateUrl:"plugins/api-manager/html/directives/searchBox.html",scope:{searchFunction:"=function"},link:function(t,i,r){if(t.placeholder=r.placeholder,r.id)t.filterId=r.id+"-f",t.buttonId=r.id+"-b";else{var a="search-box-"+e.sb_counter;e.sb_counter=e.sb_counter+1,t.filterId=a+"-filter",t.buttonId=a+"-button"}if(r.apimanI18nKey){var o=r.apimanI18nKey+".placeholder",s=t.placeholder,l=n.translate(o,s);t.placeholder=l}t.doSearch=function(){$(i).find("button i").removeClass("fa-search"),$(i).find("button i").removeClass("fa-close"),$(i).find("button i").addClass(t.value?"fa-close":"fa-search"),t.searchFunction(t.value)},t.onClick=function(){t.value&&(t.value="",$(i).find("button i").removeClass("fa-search"),$(i).find("button i").removeClass("fa-close"),$(i).find("button i").addClass("fa-search")),t.searchFunction(t.value)}}}}]),e._module.directive("apimanConfirmModal",["Logger",function(e){return{templateUrl:"plugins/api-manager/html/directives/confirmModal.html",replace:!0,restrict:"E",transclude:!0,link:function(e,t,n){e.title=n.modalTitle,$(t).on("hidden.bs.modal",function(){$(t).remove()})}}}]),e._module.directive("apimanSelectServiceModal",["Logger",function(e){return{templateUrl:"plugins/api-manager/html/directives/selectServiceModal.html",replace:!0,restrict:"E",link:function(e,t,n){e.title=n.modalTitle,$(t).on("hidden.bs.modal",function(){$(t).remove()})}}}]);var t={Organization:"fa-shield",Application:"fa-gears",Plan:"fa-bar-chart-o",Service:"fa-puzzle-piece"};e._module.directive("apimanActivity",["Logger","$rootScope","PageLifecycle",function(e,n,i){return{templateUrl:"plugins/api-manager/html/directives/activity.html",restrict:"E",replace:!0,scope:{auditEntries:"=model",next:"=next"},link:function(e,r,a){e.pluginName=n.pluginName,e.hasMore=!0,e.getEntryIcon=function(e){return t[e.entityType]},e.getMore=function(){e.getMoreButton.state="in-progress",e.next(function(t){e.auditEntries=e.auditEntries.concat(t),e.hasMore=t.length>=20,e.getMoreButton.state="complete"},i.handleError)}}}}]),e._module.directive("apimanAuditEntry",["Logger","$rootScope",function(e,t){return{restrict:"E",scope:{entry:"=model"},link:function(e,n,i){e.pluginName=t.pluginName,e.template="plugins/api-manager/html/directives/audit/"+e.entry.entityType+"/audit"+e.entry.what+".html",e.entry.data&&(e.data=JSON.parse(e.entry.data))},template:'<div ng-include="template"></div>'}}]),e._module.directive("apimanDropText",["Logger",function(e){return{restrict:"A",require:"ngModel",scope:{ngModel:"="},link:function(e,t,n,i){t.on("dragover",function(e){return e.preventDefault(),e.dataTransfer&&(e.dataTransfer.effectAllowed="copy"),t.hasClass("dropping")||t.addClass("dropping"),!1}),t.on("dragenter",function(e){return e.preventDefault(),e.dataTransfer&&(e.dataTransfer.effectAllowed="copy"),t.addClass("dropping"),!1}),t.on("dragleave",function(e){return e.preventDefault(),t.removeClass("dropping"),!1}),t.on("drop",function(n){if(n.preventDefault(),t.removeClass("dropping"),n.originalEvent.dataTransfer&&n.originalEvent.dataTransfer.files.length){n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation();var r=n.originalEvent.dataTransfer.files[0],a=new FileReader;a.onload=function(n){return function(n){t.val(n.target.result),i.$setViewValue(n.target.result),e.$emit("afterdrop",{element:t,value:n.target.result})}}(r),a.readAsText(r)}})}}}]),e._module.directive("apimanPolicyList",["Logger",function(e){return{restrict:"E",scope:{policies:"=ngModel",remove:"=removeFunction",reorder:"=reorderFunction",type:"@",org:"@orgId",id:"@pageId",version:"@"},controller:function(t){t.policyListOptions={containerPositioning:"relative",orderChanged:function(n){e.debug("Reordered as: {0}",t.ctrl.policies),t.ctrl.reorder(t.ctrl.policies)}},t.pluginName=t.$parent.pluginName},controllerAs:"ctrl",bindToController:!0,templateUrl:"plugins/api-manager/html/directives/policyList.html"}}]),e._module.directive("apimanEditableDescription",["Logger",function(e){return{restrict:"E",scope:{descr:"=description",callback:"="},controller:function(e){},link:function(e,t,n){e.defaultValue=n.defaultValue;var i=null;e.topPosition=0,e.leftPosition=0,e.height=60,e.$watch(function(){return e.descr},function(t,n){n!==t&&"undefined"!=typeof n&&e.callback(t||"")}),e.focusOnDescription=function(t){i=t.target,i.value=e.descr||"",$(i).css("height","auto"),$(i).height(i.scrollHeight)},e.changeOnDescription=function(){$(i).css("height","auto"),$(i).height(i.scrollHeight)},e.descriptionMouseOver=function(t){e.showPencil=!0;var n=t.target,i=n.getBoundingClientRect();0!=i.right&&(e.leftPosition=i.right-i.left-15,e.height=i.bottom-i.top)},e.descriptionMouseOut=function(t){e.showPencil=!1}},templateUrl:"plugins/api-manager/html/directives/editDescription.html"}}]),e._module.run(["editableOptions","editableThemes",function(e,t){e.theme="default",t["default"].submitTpl='<button class="btn btn-default inline-save-btn" type="submit"><i class="fa fa-check fa-fw"></i></button>',t["default"].cancelTpl='<button class="btn btn-default" type="button" ng-click="$form.$cancel()"><i class="fa fa-times fa-fw"></i></button>',t["default"].buttonsTpl="<div></div>",t["default"].formTpl='<form class="editable-wrap apiman-inline-edit"></form>'}]),e._module.directive("apimanI18nKey",["Logger","TranslationService",function(e,t){return{restrict:"A",link:function(n,i,r){if(r.apimanI18nKey){var a,o,s;0==$(i).children().length&&(a=r.apimanI18nKey,o=$(i).text(),s=t.translate(a,o),$(i).text(s)),$(i).attr("placeholder")&&(a=r.apimanI18nKey+".placeholder",o=$(i).attr("placeholder"),s=t.translate(a,o),e.debug("Translating placeholder attr.  Key: {2}  default value: {0}  translated: {1}",o,s,a),$(i).prop("placeholder",s),$(i).attr("placeholder",s)),$(i).attr("title")&&(a=r.apimanI18nKey+".title",o=$(i).attr("title"),s=t.translate(a,o),e.debug("Translating title attr.  Key: {2}  default value: {0}  translated: {1}",o,s,a),$(i).prop("title",s),$(i).attr("title",s))}}}}])}(Apiman||(Apiman={}));var Apiman;!function(e){e._module.controller("Apiman.Error400Controller",["$scope","$rootScope","PageLifecycle",function(e,t,n){n.loadErrorPage("Error",e,function(){n.setPageTitle("error",400)})}]),e._module.controller("Apiman.Error403Controller",["$scope","$rootScope","PageLifecycle",function(e,t,n){n.loadErrorPage("Error",e,function(){n.setPageTitle("error",403)})}]),e._module.controller("Apiman.Error404Controller",["$scope","$rootScope","PageLifecycle",function(e,t,n){n.loadErrorPage("Error",e,function(){n.setPageTitle("error",404)})}]),e._module.controller("Apiman.Error409Controller",["$scope","$rootScope","PageLifecycle",function(e,t,n){n.loadErrorPage("Error",e,function(){n.setPageTitle("error",409)})}]),e._module.controller("Apiman.Error500Controller",["$scope","$rootScope","PageLifecycle","Logger",function(e,t,n,i){e.error=t.pageError,n.loadErrorPage("Error",e,function(){n.setPageTitle("error",500)})}]),e._module.controller("Apiman.ErrorInvalidServerController",["$scope","$rootScope","PageLifecycle","Logger","Configuration",function(e,t,n,i,r){e.error=t.pageError,n.loadErrorPage("Error",e,function(){e.installGuide="http://www.apiman.io/latest/installation-guide.html",e.version=r.apiman.version,e.builtOn=r.apiman.builtOn,e.apiEndpoint=r.api.endpoint,e.cors="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS",n.setPageTitle("error","Invalid Server")})}])}(Apiman||(Apiman={}));var ApimanPageLifecycle;!function(e){e.pageTitles={"page.title.admin-gateways":"apiman - Admin - Gateways","page.title.admin-plugins":"apiman - Admin - Plugins","page.title.admin-roles":"apiman - Admin - Roles","page.title.admin-policyDefs":"apiman - Admin - Policy Definitions","page.title.app-activity":"apiman - {0} (Activity)","page.title.app-apis":"apiman - {0} (APIs)","page.title.app-contracts":"apiman - {0} (Contracts)",
"page.title.app-overview":"apiman - {0} (Overview)","page.title.app-policies":"apiman - {0} (Policies)","page.title.consumer-org":"apiman - Organization {0}","page.title.consumer-orgs":"apiman - Organizations","page.title.consumer-service":"apiman - Service {0}","page.title.consumer-service-def":"apiman - Service {0} - Definition","page.title.consumer-services":"apiman - Services","page.title.dashboard":"apiman - Home","page.title.about":"apiman - About","page.title.edit-gateway":"apiman - Edit Gateway","page.title.edit-policy":"apiman - Edit Policy","page.title.edit-policyDef":"apiman - Edit Policy Definition","page.title.edit-role":"apiman - Edit Role","page.title.import-policyDefs":"apiman - Import Policy Definition(s)","page.title.import-services":"apiman - Import Service(s)","page.title.new-app":"apiman - New Application","page.title.new-app-version":"apiman - New Application Version","page.title.new-contract":"apiman - New Contract","page.title.new-gateway":"apiman - New Gateway","page.title.new-member":"apiman - Add Member","page.title.new-org":"apiman - New Organization","page.title.new-plan":"apiman - New Plan","page.title.new-plan-version":"apiman - New Plan Version","page.title.new-plugin":"apiman - Add Plugin","page.title.new-policy":"apiman - Add Policy","page.title.new-role":"apiman - New Role","page.title.new-service":"apiman - New Service","page.title.new-service-version":"apiman - New Service Version","page.title.org-activity":"apiman - {0} (Activity)","page.title.org-apps":"apiman - {0} (Applications)","page.title.org-manage-members":"apiman - {0} (Manage Members)","page.title.org-members":"apiman - {0} (Members)","page.title.org-plans":"apiman - {0} (Plans)","page.title.org-services":"apiman - {0} (Services)","page.title.plan-activity":"apiman - {0} (Activity)","page.title.plan-overview":"apiman - {0} (Overview)","page.title.plan-policies":"apiman - {0} (Policies)","page.title.plugin-details":"apiman - Plugin Details","page.title.policy-defs":"apiman - Admin - Policy Definitions","page.title.service-activity":"apiman - {0} (Activity)","page.title.service-contracts":"apiman - {0} (Contracts)","page.title.service-endpoint":"apiman - {0} (Endpoint)","page.title.service-metrics":"apiman - {0} (Metrics)","page.title.service-impl":"apiman - {0} (Implementation)","page.title.service-def":"apiman - {0} (Definition)","page.title.service-overview":"apiman - {0} (Overview)","page.title.service-plans":"apiman - {0} (Plans)","page.title.service-policies":"apiman - {0} (Policies)","page.title.user-activity":"apiman - {0} (Activity)","page.title.user-apps":"apiman - {0} (Applications)","page.title.user-orgs":"apiman - {0} (Organizations)","page.title.user-profile":"apiman - User Profile","page.title.user-services":"apiman - {0} (Services)","page.title.error":"apiman - {0} Error"};var t=function(e){var t=(new Date,e[0]);if(e.length>1)for(var n=1;n<e.length;n++)t=t.replace("{"+(n-1)+"}",e[n]);return t};e._module=angular.module("ApimanPageLifecycle",[]),e.PageLifecycle=e._module.factory("PageLifecycle",["$q","Logger","$rootScope","$location","CurrentUserSvcs","Configuration","TranslationService","$window",function(n,i,r,a,o,s,l,c){r.showHeader=!0,s.ui&&0==s.ui.header&&(r.showHeader=!1);var u=function(e){r.currentUser=e;var t={},n={};if(e.permissions)for(var a=0;a<e.permissions.length;a++){var o=e.permissions[a],s=o.organizationId+"||"+o.name;t[s]=!0,n[o.organizationId]=!0}i.info("Updating permissions now {0}",t),r.permissions=t,r.memberships=n},d=function(e){r.pageState="error",r.pageError=e,400==e.status?(i.info("Detected an error {0}, redirecting to 400.",e.status),a.url(Apiman.pluginName+"/errors/400").replace()):401==e.status?(i.info("Detected an error 401, reloading the page."),c.location.reload()):403==e.status?(i.info("Detected an error {0}, redirecting to 403.",e.status),a.url(Apiman.pluginName+"/errors/403").replace()):404==e.status?(i.info("Detected an error {0}, redirecting to 404.",e.status),a.url(Apiman.pluginName+"/errors/404").replace()):409==e.status?(i.info("Detected an error {0}, redirecting to 409.",e.status),a.url(Apiman.pluginName+"/errors/409").replace()):0==e.status?(i.info("Detected an error {0}, redirecting to CORS error page.",e.status),a.url(Apiman.pluginName+"/errors/invalid_server").replace()):(i.info("Detected an error {0}, redirecting to 500.",e.status),a.url(Apiman.pluginName+"/errors/500").replace())};return{setPageTitle:function(n,i){var r="page.title."+n,a=e.pageTitles[r];if(a=l.translate(r,a)){var o=[];o.push(a),o=o.concat(i);var s=t(o);document.title=s}else document.title=a},handleError:d,forwardTo:function(){var e="/"+Apiman.pluginName+t(arguments);i.info("Forwarding to page {0}",e),a.url(e).replace()},redirectTo:function(){var e="/"+Apiman.pluginName+t(arguments);i.info("Redirecting to page {0}",e),a.url(e)},loadPage:function(e,t,a,s){i.log("|{0}| >> Loading page.",e),r.pageState="loading";var l=void 0,c={currentUser:n(function(e,t){r.currentUser?(i.log("|{0}| >> Using cached current user from $rootScope."),e(r.currentUser)):o.get({what:"info"},function(t){u(t),e(t)},t)})};l=t?angular.extend({},c,t):c;var p=n.all(l);p.then(function(t){var n=0;angular.forEach(t,function(t,r){i.debug("|{0}| >> Binding {1} to $scope.",e,r),this[r]=t,n++},a),r.pageState="loaded",s&&s(),i.log("|{0}| >> Page successfully loaded: {1} data packets loaded",e,n)},function(t){i.error("|{0}| >> Page load failed: {1}",e,t),d(t)})},loadErrorPage:function(e,t,n){i.log("|{0}| >> Loading error page.",e),r.pageState="loading",r.pageState="loaded",n&&n(),i.log("|{0}| >> Error page successfully loaded",e)}}}])}(ApimanPageLifecycle||(ApimanPageLifecycle={}));var ApimanLogger;!function(e){e._module=angular.module("ApimanLogger",[]);var t=function(e){return"object"==typeof e?angular.toJson(e,!0):e},n=function(e){var n=new Date,i=e[0];if(e.length>1)for(var r=1;r<e.length;r++)i=i.replace("{"+(r-1)+"}",t(e[r]));else i=t(i);return"apiman ["+n.toLocaleTimeString()+"]>>  "+i};e.Logger=e._module.factory("Logger",[function(){return{info:function(){console.info(n(arguments))},log:function(){console.info(n(arguments))},debug:function(){console.warn(n(arguments))},error:function(){console.error(n(arguments))}}}])}(ApimanLogger||(ApimanLogger={}));var Apiman;!function(e){e.NavbarController=e._module.controller("Apiman.NavbarController",["$scope","Logger","Configuration",function(e,t,n){t.log("Current user is {0}.",n.user.username),e.username=n.user.username,e.logoutUrl=n.apiman.logoutUrl}])}(Apiman||(Apiman={}));var ApimanServices;!function(e){e._module=angular.module("ApimanServices",["ngResource","ApimanConfiguration"]);var t=function(e,t){return e.replace(/:(\w+)/g,function(e,n){return t[n]?t[n]:":"+n})};e.ApimanServices=e._module.factory("ApimanSvcs",["$resource","Configuration",function(e,t){var n=t.api.endpoint+"/:entityType/:secondaryType";return e(n,{entityType:"@entityType",secondaryType:"@secondaryType"},{update:{method:"PUT"}})}]),e.UserServices=e._module.factory("UserSvcs",["$resource","Configuration",function(e,t){var n=t.api.endpoint+"/users/:user/:entityType";return e(n,{user:"@user",entityType:"@entityType"})}]),e.OrganizationServices=e._module.factory("OrgSvcs",["$resource","Configuration",function(e,t){var n=t.api.endpoint+"/organizations/:organizationId/:entityType/:entityId/:versionsOrActivity/:version/:policiesOrActivity/:policyId/:policyChain";return e(n,{organizationId:"@organizationId",entityType:"@entityType",entityId:"@entityId",versionsOrActivity:"@versionsOrActivity",version:"@version",policiesOrActivity:"@policiesOrActivity",policyId:"@policyId",chain:"@policyChain",page:"@page",count:"@count"},{update:{method:"PUT"}})}]),e.CurrentUserServices=e._module.factory("CurrentUserSvcs",["$resource","Configuration",function(e,t){var n=t.api.endpoint+"/currentuser/:what";return e(n,{entityType:"@what"},{update:{method:"PUT"}})}]),e.ActionServices=e._module.factory("ActionSvcs",["$resource","Configuration",function(e,t){var n=t.api.endpoint+"/actions";return e(n)}]),e.AuditServices=e._module.factory("AuditSvcs",["$resource","Configuration",function(e,t){var n=t.api.endpoint+"/organizations/:organizationId/:entityType/:entityId/activity";return e(n,{organizationId:"@organizationId",entityType:"@entityType",entityId:"@entityId",page:"@page",count:"@count"})}]),e.UserAuditServices=e._module.factory("UserAuditSvcs",["$resource","Configuration",function(e,t){var n=t.api.endpoint+"/users/:user/activity";return e(n,{user:"@user",page:"@page",count:"@count"})}]),e.PluginServices=e._module.factory("PluginSvcs",["$resource","Configuration",function(e,t){return{getPolicyForm:function(n,i,r,a){var o=t.api.endpoint+"/plugins/:pluginId/policyDefs/:policyDefId/form";e(o,{pluginId:"@pluginId",policyDefId:"@policyDefId"}).get({pluginId:n,policyDefId:i},r,a)}}}]),e.ServiceDefinitionServices=e._module.factory("ServiceDefinitionSvcs",["$resource","$http","Configuration",function(e,n,i){return{getServiceDefinitionUrl:function(e,n,r){var a=t(i.api.endpoint+"/organizations/:organizationId/services/:serviceId/versions/:version/definition",{organizationId:e,serviceId:n,version:r});return a},getServiceDefinition:function(e,r,a,o,s){var l=t(i.api.endpoint+"/organizations/:organizationId/services/:serviceId/versions/:version/definition",{organizationId:e,serviceId:r,version:a});n({method:"GET",url:l,transformResponse:function(e){return e}}).success(o).error(s)},updateServiceDefinition:function(e,r,a,o,s,l,c){var u="application/json";"SwaggerYAML"==s&&(u="application/x-yaml");var d=t(i.api.endpoint+"/organizations/:organizationId/services/:serviceId/versions/:version/definition",{organizationId:e,serviceId:r,version:a});n({method:"PUT",url:d,headers:{"Content-Type":u},data:o}).success(l).error(c)}}}]),e.MetricsServices=e._module.factory("MetricsSvcs",["$resource","Configuration",function(e,n){return{getUsage:function(i,r,a,o,s,l,c,u){var d=t(n.api.endpoint+"/organizations/:organizationId/services/:serviceId/versions/:version/metrics/usage",{organizationId:i,serviceId:r,version:a});e(d,{interval:o,from:s,to:l}).get({},c,u)},getUsagePerApp:function(i,r,a,o,s,l,c){var u=t(n.api.endpoint+"/organizations/:organizationId/services/:serviceId/versions/:version/metrics/appUsage",{organizationId:i,serviceId:r,version:a});e(u,{from:o,to:s}).get({},l,c)},getUsagePerPlan:function(i,r,a,o,s,l,c){var u=t(n.api.endpoint+"/organizations/:organizationId/services/:serviceId/versions/:version/metrics/planUsage",{organizationId:i,serviceId:r,version:a});e(u,{from:o,to:s}).get({},l,c)},getResponseStats:function(i,r,a,o,s,l,c,u){var d=t(n.api.endpoint+"/organizations/:organizationId/services/:serviceId/versions/:version/metrics/responseStats",{organizationId:i,serviceId:r,version:a});e(d,{interval:o,from:s,to:l}).get({},c,u)},getResponseStatsSummary:function(i,r,a,o,s,l,c){var u=t(n.api.endpoint+"/organizations/:organizationId/services/:serviceId/versions/:version/metrics/summaryResponseStats",{organizationId:i,serviceId:r,version:a});e(u,{from:o,to:s}).get({},l,c)},getResponseStatsPerApp:function(i,r,a,o,s,l,c){var u=t(n.api.endpoint+"/organizations/:organizationId/services/:serviceId/versions/:version/metrics/appResponseStats",{organizationId:i,serviceId:r,version:a});e(u,{from:o,to:s}).get({},l,c)},getResponseStatsPerPlan:function(i,r,a,o,s,l,c){var u=t(n.api.endpoint+"/organizations/:organizationId/services/:serviceId/versions/:version/metrics/planResponseStats",{organizationId:i,serviceId:r,version:a});e(u,{from:o,to:s}).get({},l,c)}}}]),e.SystemServices=e._module.factory("SystemSvcs",["$resource","Configuration",function(e,n){return{getStatus:function(i,r){var a=t(n.api.endpoint+"/system/status",{});e(a).get({},i,r)}}}])}(ApimanServices||(ApimanServices={}));var Apiman;!function(e){e._module.controller("Apiman.DefaultPolicyConfigFormController",["$scope","Logger",function(e,t){var n=function(t){var n=!0;try{var i=JSON.parse(t);e.config=i}catch(r){n=!1}e.setValid(n)};e.$watch("rawConfig",n)}]),e._module.controller("Apiman.JsonSchemaPolicyConfigFormController",["$scope","Logger","PluginSvcs",function(e,t,n){var i=function(t){var n=document.getElementById("json-editor-holder"),i=new window.JSONEditor(n,{ajax:!1,schema:t,no_additional_properties:!0,required_by_default:!0,disable_edit_json:!0,disable_properties:!0,iconlib:"fontawesome4",theme:"bootstrap3"});i.on("change",function(){e.$apply(function(){var t=i.validate();t.length?e.setValid(!1):(e.setValid(!0),e.setConfig(e.editor.getValue()))})}),e.editor=i},r=function(){e.editor.destroy()};e.$on("$destroy",function(){t.debug("Destroying the json-editor!"),r()}),e.schemaState="loading";var a=e.selectedDef.pluginId,o=e.selectedDef.id;n.getPolicyForm(a,o,function(n){t.debug("Schema: {0}",n),i(n),e.editor.setValue(e.config),e.schemaState="loaded"},function(n){t.error(n),e.schemaState="loaded"})}]),e._module.controller("Apiman.RateLimitingFormController",["$scope","Logger",function(e,t){var n=function(t){var n=!0;(!t.limit||t.limit<1)&&(n=!1),t.granularity||(n=!1),t.period||(n=!1),"User"!=t.granularity||t.userHeader||(n=!1),e.setValid(n)};e.$watch("config",n,!0)}]),e._module.controller("Apiman.IPListFormController",["$scope","Logger",function(e,t){var n=function(t){var n=!0;e.setValid(n)};e.$watch("config",n,!0),e.config.ipList||(e.config.ipList=[]),e.config.responseCode||(e.config.responseCode=500),e.add=function(t){e.remove(t),e.config.ipList.push(t),e.selectedIP=[t],e.ipAddress=void 0,$("#ip-address").focus()},e.remove=function(t){angular.forEach(t,function(t){var n=-1;angular.forEach(e.config.ipList,function(e,i){e==t&&(n=i)}),-1!=n&&e.config.ipList.splice(n,1)}),e.selectedIP=void 0},e.clear=function(){e.config.ipList=[],e.selectedIP=void 0}}]),e._module.controller("Apiman.IgnoredResourcesFormController",["$scope","Logger",function(e,t){var n=function(t){var n=!0;e.setValid(n)};e.$watch("config",n,!0),e.add=function(t){e.config.pathsToIgnore||(e.config.pathsToIgnore=[]),e.remove(t),e.config.pathsToIgnore.push(t),e.selectedPath=[t],e.path=void 0,$("#path").focus()},e.remove=function(t){angular.forEach(t,function(t){var n=-1;angular.forEach(e.config.pathsToIgnore,function(e,i){e==t&&(n=i)}),-1!=n&&e.config.pathsToIgnore.splice(n,1)}),e.selectedPath=void 0},e.clear=function(){e.config.pathsToIgnore=[],e.selectedPath=void 0}}]),e._module.controller("Apiman.BasicAuthFormController",["$scope","Logger",function(e,t){var n=function(t){if(t){var n=!0;t.realm||(n=!1),t.staticIdentity||t.ldapIdentity||t.jdbcIdentity||(n=!1),t.staticIdentity&&(t.staticIdentity.identities||(n=!1)),t.ldapIdentity&&(t.ldapIdentity.url||(n=!1),t.ldapIdentity.dnPattern||(n=!1),"ServiceAccount"==t.ldapIdentity.bindAs&&(t.ldapIdentity.credentials&&t.ldapIdentity.credentials.username&&t.ldapIdentity.credentials.password||(n=!1),t.ldapIdentity.credentials&&t.ldapIdentity.credentials.password!=e.repeatPassword&&(n=!1),t.ldapIdentity.userSearch&&t.ldapIdentity.userSearch.baseDn&&t.ldapIdentity.userSearch.expression||(n=!1)),t.ldapIdentity.extractRoles&&(t.ldapIdentity.membershipAttribute||(n=!1),t.ldapIdentity.rolenameAttribute||(n=!1))),t.jdbcIdentity&&(t.jdbcIdentity.datasourcePath||(n=!1),t.jdbcIdentity.query||(n=!1),t.jdbcIdentity.extractRoles&&!t.jdbcIdentity.roleQuery&&(n=!1)),e.setValid(n)}};e.$watch("config",n,!0),e.$watch("repeatPassword",function(){n(e.config)}),e.config&&(e.config.staticIdentity?e.identitySourceType="static":e.config.ldapIdentity?(e.identitySourceType="ldap",e.repeatPassword=e.config.ldapIdentity.credentials.password):e.config.jdbcIdentity&&(e.identitySourceType="jdbc")),e.$watch("identitySourceType",function(t){t&&("static"!=t||e.config.staticIdentity?"jdbc"!=t||e.config.jdbcIdentity?"ldap"!=t||e.config.ldapIdentity||(e.config.ldapIdentity=new Object,e.config.ldapIdentity.bindAs="UserAccount",delete e.config.staticIdentity,delete e.config.jdbcIdentity):(e.config.jdbcIdentity=new Object,e.config.jdbcIdentity.hashAlgorithm="SHA1",delete e.config.staticIdentity,delete e.config.ldapIdentity):(e.config.staticIdentity=new Object,delete e.config.ldapIdentity,delete e.config.jdbcIdentity))}),e.add=function(t,n){var i={username:t,password:n};e.config.staticIdentity.identities||(e.config.staticIdentity.identities=[]),e.remove([i]),e.config.staticIdentity.identities.push(i),e.selectedIdentity=[i],e.username=void 0,e.password=void 0,$("#username").focus()},e.remove=function(t){angular.forEach(t,function(t){var n=-1;angular.forEach(e.config.staticIdentity.identities,function(e,i){e.username==t.username&&(n=i)}),-1!=n&&e.config.staticIdentity.identities.splice(n,1)}),e.selectedIdentity=void 0},e.clear=function(){e.config.staticIdentity.identities=[],e.selectedIdentity=void 0}}]),e._module.controller("Apiman.AuthorizationFormController",["$scope","Logger",function(e,t){var n=function(t){var n=t.rules&&t.rules.length>0;t.requestUnmatched||(t.requestUnmatched="fail"),e.setValid(n)};e.$watch("config",n,!0),e.add=function(t,n,i){e.config.rules||(e.config.rules=[]);var r={verb:n,pathPattern:t,role:i};e.config.rules.push(r),e.path=void 0,e.verb=void 0,e.role=void 0,$("#path").focus()},e.remove=function(t){var n=-1;angular.forEach(e.config.rules,function(e,i){e==t&&(n=i)}),-1!=n&&e.config.rules.splice(n,1)},e.clear=function(){e.config.rules=[]}}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.UserProfileController=e._module.controller("Apiman.UserProfileController",["$q","$scope","$location","CurrentUserSvcs","PageLifecycle",function(e,t,n,i,r){var a={user:e(function(e,t){i.get({what:"info"},e,t)})};t.isDirty=!1,t.isValid=!0,t.updatedUser={fullName:void 0,email:void 0},t.$watch("updatedUser",function(e){var n=!1,i=!0;e.fullName||(i=!1),e.email||(i=!1),e.fullName!=t.user.fullName&&(n=!0),e.email!=t.user.email&&(n=!0),t.isDirty=n,t.isValid=i},!0),t.save=function(){t.updateButton.state="in-progress",i.update({what:"info"},t.updatedUser,function(){t.updateButton.state="complete",t.user.fullName=t.updatedUser.fullName,t.user.email=t.updatedUser.email,t.isValid=!0,t.isDirty=!1},r.handleError)},r.loadPage("UserProfile",a,t,function(){t.updatedUser.fullName=t.user.fullName,t.updatedUser.email=t.user.email,r.setPageTitle("user-profile")})}])}(Apiman||(Apiman={}));var ApimanTranslation;!function(e){e._module=angular.module("ApimanTranslation",[]),e.Translation=e._module.factory("TranslationService",["$window",function(e){return{translate:function(t,n){var i=void 0;return i=e.APIMAN_TRANSLATION_DATA&&e.APIMAN_TRANSLATION_DATA[t]?e.APIMAN_TRANSLATION_DATA[t]:n}}}])}(ApimanTranslation||(ApimanTranslation={}));var Apiman;!function(e){e.AdminGatewaysController=e._module.controller("Apiman.AdminGatewaysController",["$q","$scope","ApimanSvcs","PageLifecycle",function(e,t,n,i){t.tab="gateways";var r={gateways:e(function(e,t){n.query({entityType:"gateways"},function(t){e(t)},t)})};i.loadPage("AdminGateways",r,t,function(){i.setPageTitle("admin-gateways")})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.AdminPluginsController=e._module.controller("Apiman.AdminPluginsController",["$q","$scope","ApimanSvcs","PageLifecycle",function(e,t,n,i){t.tab="plugins";var r={plugins:e(function(e,t){n.query({entityType:"plugins"},function(t){e(t)},t)})};i.loadPage("AdminPlugins",r,t,function(){i.setPageTitle("admin-plugins")})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.AdminPolicyDefsController=e._module.controller("Apiman.AdminPolicyDefsController",["$q","$scope","ApimanSvcs","PageLifecycle",function(e,t,n,i){t.tab="policyDefs",t.filterPolicies=function(e){if(e){var n=[];angular.forEach(t.policyDefs,function(t){t.name.toLowerCase().indexOf(e.toLowerCase())>-1&&n.push(t)}),t.filteredPolicyDefs=n}else t.filteredPolicyDefs=t.policyDefs};var r={policyDefs:e(function(e,i){n.query({entityType:"policyDefs"},function(n){t.filteredPolicyDefs=n,e(n)},i)})};i.loadPage("AdminPolicyDefs",r,t,function(){i.setPageTitle("admin-policyDefs")})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.AdminRolesController=e._module.controller("Apiman.AdminRolesController",["$q","$scope","ApimanSvcs","PageLifecycle",function(e,t,n,i){t.tab="roles",t.filterRoles=function(e){if(e){var n=[];angular.forEach(t.roles,function(t){t.name.toLowerCase().indexOf(e.toLowerCase())>-1&&n.push(t)}),t.filteredRoles=n}else t.filteredRoles=t.roles};var r={roles:e(function(e,i){n.query({entityType:"roles"},function(n){t.filteredRoles=n,e(n)},i)})};i.loadPage("AdminRoles",r,t,function(){i.setPageTitle("admin-roles")})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.AppActivityController=e._module.controller("Apiman.AppActivityController",["$q","$scope","$location","Logger","PageLifecycle","AppEntityLoader","AuditSvcs","$routeParams",function(e,t,n,i,r,a,o,s){var l=s;t.organizationId=l.org,t.tab="activity",t.version=l.version;var c=function(e,n){t.currentPage=t.currentPage+1,o.get({organizationId:l.org,entityType:"applications",entityId:l.app,page:t.currentPage,count:20},function(t){var n=t.beans;e(n)},n)},u=a.getCommonData(t,n);u=angular.extend(u,{auditEntries:e(function(e,n){t.currentPage=0,c(e,n)})}),t.getNextPage=c,r.loadPage("AppActivity",u,t,function(){r.setPageTitle("app-activity",[t.app.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.AppApisController=e._module.controller("Apiman.AppApisController",["$q","$scope","$location","PageLifecycle","AppEntityLoader","Logger","OrgSvcs","$rootScope","$compile","$timeout","$routeParams",function(e,t,n,i,r,a,o,s,l,c,u){var d=u;t.organizationId=d.org,t.tab="apis",t.version=d.version,t.downloadAsJson="proxies/apiman/organizations/"+d.org+"/applications/"+d.app+"/versions/"+d.version+"/apiregistry/json",t.downloadAsXml="proxies/apiman/organizations/"+d.org+"/applications/"+d.app+"/versions/"+d.version+"/apiregistry/xml",t.toggle=function(e){e.expanded=!e.expanded},t.howToInvoke=function(e){var t=s.$new(!0);t.asQueryParam=e.httpEndpoint+"?apikey="+e.apiKey,e.httpEndpoint.indexOf("?")>-1&&(t.asQueryParam=e.httpEndpoint+"&apikey="+e.apiKey),t.asRequestHeader="X-API-Key: "+e.apiKey,$("body").append(l("<apiman-api-modal></apiman-api-modal>")(t)),c(function(){$("#apiModal").modal({keyboard:!0,backdrop:"static"})},1)};var p=r.getCommonData(t,n);p=angular.extend(p,{apiRegistry:e(function(e,t){o.get({organizationId:d.org,entityType:"applications",entityId:d.app,versionsOrActivity:"versions",version:d.version,policiesOrActivity:"apiregistry",policyId:"json"},e,t)})}),i.loadPage("AppApis",p,t,function(){a.info("API Registry: {0}",t.apiRegistry),i.setPageTitle("app-apis",[t.app.name])})}]),e._module.directive("apimanApiModal",["Logger",function(e){return{templateUrl:"plugins/api-manager/html/app/apiModal.html",replace:!0,restrict:"E",link:function(e,t,n){$(t).on("hidden.bs.modal",function(){$(t).remove()})}}}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.AppContractsController=e._module.controller("Apiman.AppContractsController",["$q","$scope","$location","PageLifecycle","AppEntityLoader","OrgSvcs","Logger","Dialogs","$routeParams",function(e,t,n,i,r,a,o,s,l){function c(e,t){for(var n=-1,i=0;i<t.length;i++)if(t[i].contractId==e.contractId){n=i;break}n>-1&&t.splice(n,1)}var u=l;t.organizationId=u.org,t.tab="contracts",t.version=u.version;var d=r.getCommonData(t,n);d=angular.extend(d,{contracts:e(function(e,n){a.query({organizationId:u.org,entityType:"applications",entityId:u.app,versionsOrActivity:"versions",version:u.version,policiesOrActivity:"contracts"},function(n){t.filteredContracts=n,e(n)},n)})}),t.filterContracts=function(e){if(o.debug("Called filterContracts!"),e){var n=[];angular.forEach(t.contracts,function(t){(t.serviceOrganizationName.toLowerCase().indexOf(e.toLowerCase())>-1||t.serviceName.toLowerCase().indexOf(e.toLowerCase())>-1)&&n.push(t)}),t.filteredContracts=n}else t.filteredContracts=t.contracts},t.breakAll=function(){s.confirm("Break All Contracts?","Do you really want to break all contracts with all services?",function(){a["delete"]({organizationId:u.org,entityType:"applications",entityId:u.app,versionsOrActivity:"versions",version:u.version,policiesOrActivity:"contracts"},function(){t.contracts=[],t.filteredContracts=[]},i.handleError)})},t["break"]=function(e){o.debug("Called break() with {0}.",e),s.confirm("Break Contract","Do you really want to break this contract?",function(){a["delete"]({organizationId:u.org,entityType:"applications",entityId:u.app,versionsOrActivity:"versions",version:u.version,policiesOrActivity:"contracts",policyId:e.contractId},function(){c(e,t.contracts),c(e,t.filteredContracts)},i.handleError)})},i.loadPage("AppContracts",d,t,function(){i.setPageTitle("app-contracts",[t.app.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.AppOverviewController=e._module.controller("Apiman.AppOverviewController",["$q","$scope","$location","PageLifecycle","AppEntityLoader","$routeParams",function(e,t,n,i,r,a){var o=a;t.organizationId=o.org,t.tab="overview",t.version=o.version;var s=r.getCommonData(t,n);i.loadPage("AppOverview",s,t,function(){i.setPageTitle("app-overview",[t.app.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.AppPoliciesController=e._module.controller("Apiman.AppPoliciesController",["$q","$scope","$location","PageLifecycle","AppEntityLoader","OrgSvcs","Dialogs","$routeParams",function(e,t,n,i,r,a,o,s){var l=s;t.organizationId=l.org,t.tab="policies",t.version=l.version;var c=function(e){angular.forEach(t.policies,function(n,i){e===n&&t.policies.splice(i,1)})};t.removePolicy=function(e){o.confirm("Confirm Remove Policy","Do you really want to remove this policy from the application?",function(){a["delete"]({organizationId:l.org,entityType:"applications",entityId:l.app,versionsOrActivity:"versions",version:l.version,policiesOrActivity:"policies",policyId:e.id},function(t){c(e)},i.handleError)})},t.reorderPolicies=function(e){var t={policies:e};a.save({organizationId:l.org,entityType:"applications",entityId:l.app,versionsOrActivity:"versions",version:l.version,policiesOrActivity:"reorderPolicies"},t,function(){Logger.debug("Reordering POSTed successfully")},function(){Logger.debug("Reordering POST failed.")})};var u=r.getCommonData(t,n);u=angular.extend(u,{policies:e(function(e,t){a.query({organizationId:l.org,entityType:"applications",entityId:l.app,versionsOrActivity:"versions",version:l.version,policiesOrActivity:"policies"},function(t){e(t)},t)})}),i.loadPage("AppPolicies",u,t,function(){i.setPageTitle("app-policies",[t.app.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.AppRedirectController=e._module.controller("Apiman.AppRedirectController",["$q","$scope","$location","OrgSvcs","PageLifecycle","$rootScope","$routeParams",function(e,t,n,i,r,a,o){var s=o.org,l=o.app,c={versions:e(function(e,t){i.query({organizationId:s,entityType:"applications",entityId:l,versionsOrActivity:"versions"},e,t)})};r.loadPage("AppRedirect",c,t,function(){var e=t.versions[0].version;e?r.forwardTo("/orgs/{0}/apps/{1}/{2}",s,l,e):r.handleError({status:404})})}]),e.AppEntityLoader=e._module.factory("AppEntityLoader",["$q","OrgSvcs","Logger","$rootScope","$routeParams","EntityStatusService",function(e,t,n,i,r,a){return{getCommonData:function(n,o){var s=r;return{version:e(function(e,r){t.get({organizationId:s.org,entityType:"applications",entityId:s.app,versionsOrActivity:"versions",version:s.version},function(t){n.org=t.application.organization,n.app=t.application,i.mruApp=t,a.setEntityStatus(t.status),e(t)},r)}),versions:e(function(e,n){t.query({organizationId:s.org,entityType:"applications",entityId:s.app,versionsOrActivity:"versions"},e,n)})}}}}]),e.AppEntityController=e._module.controller("Apiman.AppEntityController",["$q","$scope","$location","ActionSvcs","Logger","Dialogs","PageLifecycle","$routeParams","OrgSvcs","EntityStatusService",function(e,t,n,i,r,a,o,s,l,c){var u=s;t.setEntityStatus=function(e){c.setEntityStatus(e)},t.getEntityStatus=function(){return c.getEntityStatus()},t.setVersion=function(e){o.redirectTo("/orgs/{0}/apps/{1}/{2}",u.org,u.app,e.version)},t.registerApp=function(){t.registerButton.state="in-progress";var e={type:"registerApplication",entityId:u.app,organizationId:u.org,entityVersion:u.version};i.save(e,function(e){t.version.status="Registered",t.registerButton.state="complete",t.setEntityStatus(t.version.status)},o.handleError)},t.unregisterApp=function(){t.unregisterButton.state="in-progress",a.confirm("Confirm Unregister App","Do you really want to unregister the application?  This cannot be undone.",function(){var e={type:"unregisterApplication",entityId:u.app,organizationId:u.org,entityVersion:u.version};i.save(e,function(e){t.version.status="Retired",t.unregisterButton.state="complete",t.setEntityStatus(t.version.status)},o.handleError)},function(){t.unregisterButton.state="complete"})},t.updateAppDescription=function(e){var n={description:e};l.update({organizationId:t.organizationId,entityType:"applications",entityId:t.app.id},n,function(e){},function(e){r.error("Unable to update app description: {0}",e)})}}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ConsumerOrgController=e._module.controller("Apiman.ConsumerOrgController",["$q","$scope","$location","OrgSvcs","PageLifecycle","CurrentUser","$routeParams",function(e,t,n,i,r,a,o){t.filterServices=function(e){if(e){var n=[];angular.forEach(t.services,function(t){t.name.toLowerCase().indexOf(e.toLowerCase())>-1&&n.push(t)}),t.filteredServices=n}else t.filteredServices=t.services};var s={org:e(function(e,t){i.get({organizationId:o.org,entityType:""},e,t)}),members:e(function(e,t){i.query({organizationId:o.org,entityType:"members"},e,t)}),services:e(function(e,t){i.query({organizationId:o.org,entityType:"services"},e,t)})};r.loadPage("ConsumerOrg",s,t,function(){t.org.isMember=a.isMember(t.org.id),t.filteredServices=t.services,r.setPageTitle("consumer-org",[t.org.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ConsumerOrgsController=e._module.controller("Apiman.ConsumerOrgsController",["$q","$location","$scope","ApimanSvcs","PageLifecycle","Logger","CurrentUser",function(e,t,n,i,r,a,o){var s=t.search();s.q&&(n.orgName=s.q),n.searchOrg=function(e){t.search("q",e)};var l={orgs:e(function(e,t){if(s.q){var n={};n.filters=[],n.filters.push({name:"name",value:"*"+s.q+"*",operator:"like"});var r=angular.toJson(n);i.save({entityType:"search",secondaryType:"organizations"},r,function(t){e(t.beans)},t)}else e([])})};r.loadPage("ConsumerOrgs",l,n,function(){r.setPageTitle("consumer-orgs"),n.$applyAsync(function(){angular.forEach(n.orgs,function(e){e.isMember=o.isMember(e.id)}),$("#apiman-search").focus()})})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ConsumerServiceRedirectController=e._module.controller("Apiman.ConsumerServiceRedirectController",["$q","$scope","OrgSvcs","PageLifecycle","$routeParams",function(e,t,n,i,r){var a=r.org,o=r.service,s={versions:e(function(e,t){n.query({organizationId:a,entityType:"services",entityId:o,versionsOrActivity:"versions"},e,t)})};i.loadPage("ConsumerServiceRedirect",s,t,function(){var e=t.versions[0].version;i.forwardTo("/browse/orgs/{0}/{1}/{2}",a,o,e)})}]),e.ConsumerSvcController=e._module.controller("Apiman.ConsumerSvcController",["$q","$scope","OrgSvcs","PageLifecycle","$routeParams",function(e,t,n,i,r){t.params=r,t.chains={},t.hasSwagger=!1;try{{SwaggerUi}t.hasSwagger=!0}catch(a){}t.getPolicyChain=function(e){var i=e.planId;t.chains[i]||n.get({organizationId:r.org,entityType:"services",entityId:r.service,versionsOrActivity:"versions",version:r.version,policiesOrActivity:"plans",policyId:e.planId,policyChain:"policyChain"},function(e){t.chains[i]=e.policies},function(e){t.chains[i]=[]})};var o={version:e(function(e,t){n.get({organizationId:r.org,entityType:"services",entityId:r.service,versionsOrActivity:"versions",version:r.version},e,t)}),versions:e(function(e,i){n.query({organizationId:r.org,entityType:"services",entityId:r.service,versionsOrActivity:"versions"},function(n){angular.forEach(n,function(e){e.version==r.version&&(t.selectedServiceVersion=e)}),e(n)},i)}),publicEndpoint:e(function(e,t){n.get({organizationId:r.org,entityType:"services",
entityId:r.service,versionsOrActivity:"versions",version:r.version,policiesOrActivity:"endpoint"},e,function(t){e({managedEndpoint:"Not available."})})}),plans:e(function(e,t){n.query({organizationId:r.org,entityType:"services",entityId:r.service,versionsOrActivity:"versions",version:r.version,policiesOrActivity:"plans"},e,t)})};t.setVersion=function(e){i.redirectTo("/browse/orgs/{0}/{1}/{2}",r.org,r.service,e.version)},i.loadPage("ConsumerService",o,t,function(){t.service=t.version.service,t.org=t.service.organization,i.setPageTitle("consumer-service",[t.service.name])})}]),e.ConsumerSvcDefController=e._module.controller("Apiman.ConsumerSvcDefController",["$q","$scope","OrgSvcs","PageLifecycle","$routeParams","$window","Logger","ServiceDefinitionSvcs","Configuration",function(e,t,n,i,r,a,o,s,l){t.params=r,t.chains={};var c={version:e(function(e,t){n.get({organizationId:r.org,entityType:"services",entityId:r.service,versionsOrActivity:"versions",version:r.version},e,t)})};i.loadPage("ConsumerServiceDef",c,t,function(){t.service=t.version.service,t.org=t.service.organization,t.hasError=!1,i.setPageTitle("consumer-service-def",[t.service.name]);var e=!1;try{{SwaggerUi}e=!0}catch(n){}if("SwaggerJSON"==t.version.definitionType&&e){var r=s.getServiceDefinitionUrl(t.params.org,t.params.service,t.params.version);o.debug("!!!!! Using definition URL: {0}",r);var c=l.getAuthorizationHeader();t.definitionStatus="loading";var u={url:r,dom_id:"swagger-ui-container",validatorUrl:null,sorter:"alpha",onComplete:function(){$("#swagger-ui-container a").each(function(e,t){var n=$(t).attr("href");"#"==n[0]&&$(t).removeAttr("href")}),$("#swagger-ui-container div.sandbox_header").each(function(e,t){$(t).remove()}),$("#swagger-ui-container li.operation div.auth").each(function(e,t){$(t).remove()}),$("#swagger-ui-container li.operation div.access").each(function(e,t){$(t).remove()}),t.$apply(function(e){t.definitionStatus="complete"})},onFailure:function(){t.$apply(function(e){t.definitionStatus="error",t.hasError=!0,t.error=e})}};a.authorizations.add("apimanauth",new ApiKeyAuthorization("Authorization",c,"header")),a.swaggerUi=new SwaggerUi(u),a.swaggerUi.load(),t.hasDefinition=!0}else t.hasDefinition=!1})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ConsumerSvcsController=e._module.controller("Apiman.ConsumerSvcsController",["$q","$location","$scope","ApimanSvcs","PageLifecycle","Logger",function(e,t,n,i,r,a){var o=t.search();o.q&&(n.serviceName=o.q),n.searchSvcs=function(e){t.search("q",e)};var s={services:e(function(e,t){if(o.q){var n={};n.filters=[],n.filters.push({name:"name",value:"*"+o.q+"*",operator:"like"});var r=angular.toJson(n);i.save({entityType:"search",secondaryType:"services"},r,function(t){e(t.beans)},t)}else e([])})};r.loadPage("ConsumerSvcs",s,n,function(){r.setPageTitle("consumer-services"),n.$applyAsync(function(){$("#apiman-search").focus()})})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.EditGatewayController=e._module.controller("Apiman.EditGatewayController",["$q","$scope","$location","ApimanSvcs","PageLifecycle","Dialogs","$routeParams",function(e,t,n,i,r,a,o){t.isValid=!1;var s=o,l=function(){t.testResult="none";var e=!0;t.configuration.endpoint||(e=!1),t.configuration.username||(e=!1),t.configuration.password||(e=!1),t.configuration.password!=t.passwordConfirm&&(e=!1),t.isValid=e;var n=!1;t.gateway.description!=t.originalGateway.description&&(n=!0),t.configuration.endpoint!=t.originalConfig.endpoint&&(n=!0),t.configuration.username!=t.originalConfig.username&&(n=!0),t.configuration.password!=t.originalConfig.password&&(n=!0),t.isDirty=n},c=function(){return{description:t.gateway.description,type:t.gateway.type,configuration:angular.toJson(t.configuration)}},u={gateway:e(function(e,n){i.get({entityType:"gateways",secondaryType:s.gateway},function(n){t.gateway=n,t.configuration=JSON.parse(n.configuration),t.passwordConfirm=t.configuration.password,t.originalGateway=angular.copy(n),t.originalConfig=angular.copy(t.configuration),t.isDirty=!1,e(n)},n)})},d=function(){t.testButton.state="in-progress";var e=c();i.update({entityType:"gateways"},e,function(e){t.testButton.state="complete",1==e.success?(Logger.info("Connected successfully to Gateway: {0}",e.detail),t.testResult="success"):(Logger.info("Failed to connect to Gateway: {0}",e.detail),t.testResult="error",t.testErrorMessage=e.detail)},function(e){t.testButton.state="error",t.testResult="error",t.testErrorMessage=e})};t.updateGateway=function(){t.updateButton.state="in-progress";var e=c();i.update({entityType:"gateways",secondaryType:t.gateway.id},e,function(){r.redirectTo("/admin/gateways")},r.handleError)},t.deleteGateway=function(){t.deleteButton.state="in-progress",a.confirm("Confirm Delete Gateway","Do you really want to permanently delete this gateway?  This can be very destructive to any Service published to it.",function(){i["delete"]({entityType:"gateways",secondaryType:t.gateway.id},function(e){r.redirectTo("/admin/gateways")},r.handleError)},function(){t.deleteButton.state="complete"})},t.testGateway=d,r.loadPage("EditGateway",u,t,function(){r.setPageTitle("edit-gateway"),t.$watch("gateway",l,!0),t.$watch("configuration",l,!0),t.$watch("passwordConfirm",l),$("#apiman-gateway-description").focus()})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.EditPluginController=e._module.controller("Apiman.EditPluginController",["$q","$scope","$location","ApimanSvcs","PageLifecycle","Dialogs","$routeParams",function(e,t,n,i,r,a,o){var s=o,l={plugin:e(function(e,t){i.get({entityType:"plugins",secondaryType:s.plugin},function(t){e(t)},t)})};t.deletePlugin=function(){t.deleteButton.state="in-progress",a.confirm("Confirm Delete Plugin","Do you really want to delete this plugin?",function(){i["delete"]({entityType:"plugins",secondaryType:t.plugin.id},function(e){r.redirectTo("/admin/plugins")},r.handleError)},function(){t.deleteButton.state="complete"})},r.loadPage("EditPlugin",l,t,function(){r.setPageTitle("plugin-details")})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.EditPolicyController=e._module.controller("Apiman.EditPolicyController",["$q","$location","$scope","OrgSvcs","ApimanSvcs","PageLifecycle","Logger","$routeParams","EntityStatusService","CurrentUser",function(t,n,i,r,a,o,s,l,c,u){var d=l;i.organizationId=d.org;var p={applications:"appEdit",services:"svcEdit",plans:"planEdit"},h=d.type;"apps"==h&&(h="applications");var f={version:t(function(e,t){r.get({organizationId:d.org,entityType:h,entityId:d.id,versionsOrActivity:"versions",version:d.ver},e,t)}),policy:t(function(t,n){r.get({organizationId:d.org,entityType:h,entityId:d.id,versionsOrActivity:"versions",version:d.ver,policiesOrActivity:"policies",policyId:d.policy},function(n){var r=new Object;try{r=JSON.parse(n.configuration)}catch(a){}if(i.config=r,"JsonSchema"==n.definition.formType)i.include="plugins/api-manager/html/policyForms/JsonSchema.include";else{var o=e.ConfigForms[n.definition.id];o||(o="Default.include"),i.include="plugins/api-manager/html/policyForms/"+o}i.selectedDef=n.definition,t(n)},n)})};i.setValid=function(e){i.isValid=e},i.setConfig=function(e){i.config=e},i.updatePolicy=function(){i.updateButton.state="in-progress";var e={configuration:angular.toJson(i.config)},t=d.type;"apps"==t&&(t="applications"),r.update({organizationId:d.org,entityType:t,entityId:d.id,versionsOrActivity:"versions",version:d.ver,policiesOrActivity:"policies",policyId:d.policy},e,function(){o.redirectTo("/orgs/{0}/{1}/{2}/{3}/policies",d.org,d.type,d.id,d.ver)},o.handleError)},o.loadPage("EditPolicy",f,i,function(){c.setEntityStatus(i.version.status),i.hasPermission=u.hasPermission(d.org,p[h]),o.setPageTitle("edit-policy"),$("#apiman-description").focus()})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.EditPolicyDefController=e._module.controller("Apiman.EditPolicyDefController",["$q","$scope","$location","ApimanSvcs","PageLifecycle","$routeParams",function(e,t,n,i,r,a){var o=a,s={policyDef:e(function(e,n){i.get({entityType:"policyDefs",secondaryType:o.policyDef},function(n){e(n),t.policyDefJSON=angular.toJson(n,!0)},n)})};t.updatePolicyDef=function(){var e={},n=JSON.parse(t.policyDefJSON);e.name=n.name,e.description=n.description,e.icon=n.icon,i.update({entityType:"policyDefs",secondaryType:t.policyDef.id},e,function(e){r.redirectTo("/admin/policyDefs")},r.handleError)},r.loadPage("EditPolicyDef",s,t,function(){r.setPageTitle("edit-policyDef")})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.EditRoleController=e._module.controller("Apiman.EditRoleController",["$q","$scope","$location","ApimanSvcs","PageLifecycle","Logger","Dialogs","$routeParams",function(e,t,n,i,r,a,o,s){var l=s,c=["orgView","orgEdit","orgAdmin","planView","planEdit","planAdmin","svcView","svcEdit","svcAdmin","appView","appEdit","appAdmin"];t.isValid=!0,t.rolePermissions={},angular.forEach(c,function(e){t.rolePermissions[e]=!1});var u=function(){var e=!1;return angular.forEach(t.rolePermissions,function(t,n){1==t&&(e=!0)}),e};t.$watch("rolePermissions",function(e){t.isValid=u()},!0);var d={role:e(function(e,n){i.get({entityType:"roles",secondaryType:l.role},function(n){angular.forEach(n.permissions,function(e){t.rolePermissions[e]=!0}),e(n)},n)})};t.updateRole=function(){t.updateButton.state="in-progress";var e=[];angular.forEach(t.rolePermissions,function(t,n){1==t&&e.push(n)});var n={};n.name=t.role.name,n.description=t.role.description,n.permissions=e,n.autoGrant=t.role.autoGrant,i.update({entityType:"roles",secondaryType:t.role.id},n,function(e){r.redirectTo("/admin/roles")},r.handleError)},t.deleteRole=function(){t.deleteButton.state="in-progress",o.confirm("Confirm Delete Role","Do you really want to delete this role?",function(){i["delete"]({entityType:"roles",secondaryType:t.role.id},function(e){r.redirectTo("/admin/roles")},r.handleError)},function(){t.deleteButton.state="complete"})},r.loadPage("EditRole",d,t,function(){r.setPageTitle("edit-role"),$("#apiman-description").focus()})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ImportPolicyDefsController=e._module.controller("Apiman.ImportPolicyDefsController",["$q","$scope","$location","ApimanSvcs","PageLifecycle",function(e,t,n,i,r){t.isData=!0,t.isConfirm=!1,t.isValid=!1,t.parseJSON=function(){var e=JSON.parse(t.policyDefsJSON),n=[];e.constructor===Array?n=e:n.push(e),t.policyDefs=n,t.isData=!1,t.isConfirm=!0},t.$watch("policyDefsJSON",function(e){try{JSON.parse(t.policyDefsJSON),t.isValid=!0}catch(n){t.isValid=!1}}),t.importPolicyDefs=function(){t.yesButton.state="in-progress";var n=[];angular.forEach(t.policyDefs,function(t){n.push(e(function(e,n){i.save({entityType:"policyDefs"},t,e,n)}))}),e.all(n).then(function(){r.redirectTo("/admin/policyDefs")},r.handleError)},r.loadPage("ImportPolicyDefs",void 0,t,function(){r.setPageTitle("import-policyDefs")})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.NewAppController=e._module.controller("Apiman.NewAppController",["$q","$location","$scope","CurrentUserSvcs","OrgSvcs","PageLifecycle","$rootScope",function(e,t,n,i,r,a,o){var s=o.mruOrg,l={organizations:e(function(e,t){i.query({what:"apporgs"},function(t){s?n.selectedOrg=s:t.length>0&&(n.selectedOrg=t[0]),e(t)},t)})};n.setOrg=function(e){n.selectedOrg=e},n.saveNewApp=function(){n.createButton.state="in-progress",r.save({organizationId:n.selectedOrg.id,entityType:"applications"},n.app,function(e){a.redirectTo("/orgs/{0}/apps/{1}/{2}",e.organization.id,e.id,n.app.initialVersion)},a.handleError)},n.app={initialVersion:"1.0"},a.loadPage("NewApp",l,n,function(){a.setPageTitle("new-app"),n.$applyAsync(function(){$("#apiman-entityname").focus()})})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.NewAppVersionController=e._module.controller("Apiman.NewAppVersionController",["$q","$location","$scope","OrgSvcs","PageLifecycle","$routeParams",function(e,t,n,i,r,a){var o=a;n.appversion={clone:!0,cloneVersion:o.version},n.saveNewAppVersion=function(){n.createButton.state="in-progress",i.save({organizationId:o.org,entityType:"applications",entityId:o.app,versionsOrActivity:"versions",version:""},n.appversion,function(e){r.redirectTo("/orgs/{0}/apps/{1}/{2}",o.org,o.app,e.version)},r.handleError)},r.loadPage("NewAppVersion",void 0,n,function(){r.setPageTitle("new-app-version"),n.$applyAsync(function(){$("#apiman-version").focus()})})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.NewContractController=e._module.controller("Apiman.NewContractController",["$q","$location","$scope","OrgSvcs","CurrentUserSvcs","PageLifecycle","Logger","$rootScope","Dialogs",function(e,t,n,i,r,a,o,s,l){var c=t.search(),u=c.svc,d=c.svcorg,p=c.svcv,h=c.planid;n.refreshAppVersions=function(e,t,r,o){i.query({organizationId:e,entityType:"applications",entityId:t,versionsOrActivity:"versions"},function(e){var t=[];angular.forEach(e,function(e){("Created"==e.status||"Ready"==e.status)&&t.push(e.version)}),n.appVersions=t,r&&r(t)},a.handleError)};var f={apps:e(function(e,t){r.query({what:"applications"},function(t){if(s.mruApp)for(var i=0;i<t.length;i++){var r=t[i];r.organizationId==s.mruApp.application.organization.id&&r.id==s.mruApp.application.id&&(n.selectedApp=r)}else n.selectedApp=void 0;e(t)},t)}),selectedService:e(function(e,t){u&&d&&p?(o.debug("Loading service {0}/{1} version {2}.",d,u,p),i.get({organizationId:d,entityType:"services",entityId:u,versionsOrActivity:"versions",version:p},function(t){t.organizationName=t.service.organization.name,t.organizationId=t.service.organization.id,t.name=t.service.name,t.id=t.service.id,e(t)},t)):e(void 0)})};n.$watch("selectedApp",function(e){o.debug("App selected: {0}",e),n.selectedAppVersion=void 0,n.appVersions=[],e&&n.refreshAppVersions(e.organizationId,e.id,function(t){o.debug("Versions: {0}",t),s.mruApp?s.mruApp.application.organization.id==e.organizationId&&s.mruApp.application.id==e.id&&(n.selectedAppVersion=s.mruApp.version):t.length>0&&(n.selectedAppVersion=t[0])})}),n.selectService=function(){l.selectService("Select a Service",function(e){n.selectedService=e},!0)},n.$watch("selectedService",function(e){return e?(o.debug("Service selection made, fetching plans."),void i.query({organizationId:e.organizationId,entityType:"services",entityId:e.id,versionsOrActivity:"versions",version:e.version,policiesOrActivity:"plans"},function(e){if(n.plans=e,o.debug("Found {0} plans: {1}.",e.length,e),e.length>0)if(h)for(var t=0;t<e.length;t++)e[t].planId==h&&(n.selectedPlan=e[t]);else n.selectedPlan=void 0;else n.plans=void 0},a.handleError)):(n.plans=void 0,void(n.selectedPlan=void 0))}),n.createContract=function(){o.log("Creating new contract from {0}/{1} ({2}) to {3}/{4} ({5}) through the {6} plan!",n.selectedApp.organizationName,n.selectedApp.name,n.selectedAppVersion,n.selectedService.organizationName,n.selectedService.name,n.selectedService.version,n.selectedPlan.planName),n.createButton.state="in-progress";var e={serviceOrgId:n.selectedService.organizationId,serviceId:n.selectedService.id,serviceVersion:n.selectedService.version,planId:n.selectedPlan.planId};i.save({organizationId:n.selectedApp.organizationId,entityType:"applications",entityId:n.selectedApp.id,versionsOrActivity:"versions",version:n.selectedAppVersion,policiesOrActivity:"contracts"},e,function(e){a.redirectTo("/orgs/{0}/apps/{1}/{2}/contracts",n.selectedApp.organizationId,n.selectedApp.id,n.selectedAppVersion)},a.handleError)},a.loadPage("NewContract",f,n,function(){a.setPageTitle("new-contract")})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.NewGatewayController=e._module.controller("Apiman.NewGatewayController",["$q","$location","$scope","ApimanSvcs","PageLifecycle","CurrentUser","Logger",function(e,t,n,i,r,a,o){n.isValid=!1,n.gateway={},n.configuration={endpoint:"http://localhost:8080/apiman-gateway-api/"};var s=function(){n.testResult="none";var e=!0;n.gateway.name||(e=!1),n.configuration.endpoint||(e=!1),n.configuration.username||(e=!1),n.configuration.password||(e=!1),n.configuration.password!=n.passwordConfirm&&(e=!1),n.isValid=e};n.$watch("gateway",s,!0),n.$watch("configuration",s,!0),n.$watch("passwordConfirm",s);var l=function(){var e=n.gateway;return e.configuration=angular.toJson(n.configuration),e.type="REST",e},c=function(){n.testButton.state="in-progress";var e=l();i.update({entityType:"gateways"},e,function(e){n.testButton.state="complete",1==e.success?(o.info("Connected successfully to Gateway: {0}",e.detail),n.testResult="success"):(o.info("Failed to connect to Gateway: {0}",e.detail),n.testResult="error",n.testErrorMessage=e.detail)},function(e){n.testButton.state="error",n.testResult="error",n.testErrorMessage=e})};n.createGateway=function(){n.createButton.state="in-progress";var e=l();i.save({entityType:"gateways"},e,function(e){r.redirectTo("/admin/gateways")},r.handleError)},n.testGateway=c,r.loadPage("NewGateway",void 0,n,function(){r.setPageTitle("new-gateway"),$("#apiman-gateway-name").focus()})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.NewOrgController=e._module.controller("Apiman.NewOrgController",["$q","$location","$scope","OrgSvcs","PageLifecycle","CurrentUser",function(e,t,n,i,r,a){n.saveNewOrg=function(){n.createButton.state="in-progress",i.save(n.org,function(e){a.clear(),r.redirectTo("/orgs/{0}/plans",e.id)},r.handleError)},r.loadPage("NewOrg",void 0,n,function(){r.setPageTitle("new-org"),n.$applyAsync(function(){$("#apiman-entityname").focus()})})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.NewPlanController=e._module.controller("Apiman.NewPlanController",["$q","$location","$scope","CurrentUserSvcs","OrgSvcs","PageLifecycle","$rootScope",function(e,t,n,i,r,a,o){var s=o.mruOrg,l={organizations:e(function(e,t){i.query({what:"planorgs"},function(t){s?n.selectedOrg=s:t.length>0&&(n.selectedOrg=t[0]),e(t)},t)})};n.setOrg=function(e){n.selectedOrg=e},n.saveNewPlan=function(){n.createButton.state="in-progress",r.save({organizationId:n.selectedOrg.id,entityType:"plans"},n.plan,function(e){a.redirectTo("/orgs/{0}/plans/{1}/{2}",e.organization.id,e.id,n.plan.initialVersion)},a.handleError)},n.plan={initialVersion:"1.0"},a.loadPage("NewPlan",l,n,function(){a.setPageTitle("new-plan"),n.$applyAsync(function(){$("#apiman-entityname").focus()})})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.NewPlanVersionController=e._module.controller("Apiman.NewPlanVersionController",["$q","$location","$scope","OrgSvcs","PageLifecycle","$routeParams",function(e,t,n,i,r,a){var o=a;n.planversion={clone:!0,cloneVersion:o.version},n.saveNewPlanVersion=function(){n.createButton.state="in-progress",i.save({organizationId:o.org,entityType:"plans",entityId:o.plan,versionsOrActivity:"versions",version:""},n.planversion,function(e){r.redirectTo("/orgs/{0}/plans/{1}/{2}",o.org,o.plan,e.version)},r.handleError)},r.loadPage("NewPlanVersion",void 0,n,function(){r.setPageTitle("new-plan-version"),n.$applyAsync(function(){$("#apiman-version").focus()})})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.NewPluginController=e._module.controller("Apiman.NewPluginController",["$q","$scope","$location","ApimanSvcs","PageLifecycle","Dialogs",function(e,t,n,i,r,a){t.plugin={};var o=function(){var e=!0;t.plugin.groupId||(e=!1),t.plugin.artifactId||(e=!1),t.plugin.version||(e=!1),t.isValid=e};t.$watch("plugin",function(e){o()},!0),t.addPlugin=function(){t.addButton.state="in-progress",i.save({entityType:"plugins"},t.plugin,function(e){r.redirectTo("/admin/plugins")},r.handleError)},r.loadPage("NewPlugin",void 0,t,function(){r.setPageTitle("new-plugin"),$("#apiman-group-id").focus()})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ConfigForms={BASICAuthenticationPolicy:"basic-auth.include",IgnoredResourcesPolicy:"ignored-resources.include",IPBlacklistPolicy:"ip-list.include",IPWhitelistPolicy:"ip-list.include",RateLimitingPolicy:"rate-limiting.include",AuthorizationPolicy:"authorization.include"},e.NewPolicyController=e._module.controller("Apiman.NewPolicyController",["$q","$location","$scope","OrgSvcs","ApimanSvcs","PageLifecycle","Logger","$routeParams",function(t,n,i,r,a,o,s,l){var c=l,u={policyDefs:t(function(e,t){a.query({entityType:"policyDefs"},function(t){i.selectedDefId="__null__",e(t)},t)})};i.$watch("selectedDefId",function(e){if(e){var t=void 0;angular.forEach(i.policyDefs,function(n){n.id==e&&(t=n)}),i.selectedDef=t}}),i.$watch("selectedDef",function(t){if(t)if(i.config=new Object,"JsonSchema"==i.selectedDef.formType)i.include="plugins/api-manager/html/policyForms/JsonSchema.include";else{var n=e.ConfigForms[i.selectedDef.id];n||(n="Default.include"),i.include="plugins/api-manager/html/policyForms/"+n}else i.include=void 0}),i.setValid=function(e){i.isValid=e},i.setConfig=function(e){i.config=e},i.addPolicy=function(){i.createButton.state="in-progress";var e={definitionId:i.selectedDefId,configuration:angular.toJson(i.config)},t=c.type;"apps"==t&&(t="applications"),r.save({organizationId:c.org,entityType:t,entityId:c.id,versionsOrActivity:"versions",version:c.ver,policiesOrActivity:"policies"},e,function(e){o.redirectTo("/orgs/{0}/{1}/{2}/{3}/policies",c.org,c.type,c.id,c.ver)},o.handleError)},o.loadPage("NewPolicy",u,i,function(){o.setPageTitle("new-policy")})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.NewRoleController=e._module.controller("Apiman.NewRoleController",["$q","$location","$scope","OrgSvcs","PageLifecycle","CurrentUser","Logger","ApimanSvcs",function(e,t,n,i,r,a,o,s){n.role={},n.rolePermissions={},n.isValid=!1;var l=function(){var e=!0;n.role.name||(e=!1);var t=!1;angular.forEach(n.rolePermissions,function(e,n){1==e&&(t=!0)}),t||(e=!1),n.isValid=e};n.$watch("role",function(e){l()},!0),n.$watch("rolePermissions",function(e){l()},!0),n.addRole=function(){n.createButton.state="in-progress";var e=[];angular.forEach(n.rolePermissions,function(t,n){1==t&&e.push(n)});var t={};t.name=n.role.name,t.description=n.role.description,t.permissions=e,t.autoGrant=n.role.autoGrant,s.save({entityType:"roles"},t,function(e){r.redirectTo("/admin/roles")},r.handleError)},r.loadPage("NewRole",void 0,n,function(){r.setPageTitle("new-role"),$("#apiman-entityname").focus()})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.NewServiceController=e._module.controller("Apiman.NewServiceController",["$q","$location","$scope","CurrentUserSvcs","OrgSvcs","PageLifecycle","$rootScope",function(e,t,n,i,r,a,o){var s=o.mruOrg,l={organizations:e(function(e,t){i.query({what:"svcorgs"},function(t){s?n.selectedOrg=s:t.length>0&&(n.selectedOrg=t[0]),e(t)},t)})};n.setOrg=function(e){n.selectedOrg=e},n.saveNewService=function(){n.createButton.state="in-progress",r.save({organizationId:n.selectedOrg.id,entityType:"services"},n.service,function(e){a.redirectTo("/orgs/{0}/services/{1}/{2}",e.organization.id,e.id,n.service.initialVersion)},a.handleError)},n.service={initialVersion:"1.0"},a.loadPage("NewService",l,n,function(){a.setPageTitle("new-service"),n.$applyAsync(function(){$("#apiman-entityname").focus()})})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.NewServiceVersionController=e._module.controller("Apiman.NewServiceVersionController",["$q","$location","$scope","OrgSvcs","PageLifecycle","Logger","$routeParams",function(e,t,n,i,r,a,o){var s=o;n.svcversion={clone:!0,cloneVersion:s.version},n.saveNewServiceVersion=function(){n.createButton.state="in-progress",a.info("Creating new version {0} of service {1} / {2}",n.svcversion.version,s.service,s.org),i.save({organizationId:s.org,entityType:"services",entityId:s.service,versionsOrActivity:"versions",version:""},n.svcversion,function(e){r.redirectTo("/orgs/{0}/services/{1}/{2}",s.org,s.service,e.version)},r.handleError)},r.loadPage("NewServiceVersion",void 0,n,function(){r.setPageTitle("new-service-version"),n.$applyAsync(function(){$("#apiman-version").focus()})})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.OrgActivityController=e._module.controller("Apiman.OrgActivityController",["$q","$scope","$location","OrgSvcs","PageLifecycle","$rootScope","AuditSvcs","$routeParams",function(e,t,n,i,r,a,o,s){t.tab="activity";var l=s;t.organizationId=l.org;var c=function(e,n){t.currentPage=t.currentPage+1,o.get({organizationId:l.org,page:t.currentPage,count:20},function(t){var n=t.beans;e(n)},n)},u={org:e(function(e,t){i.get({organizationId:l.org,entityType:""},function(t){a.mruOrg=t,e(t)},t)}),members:e(function(e,t){i.query({organizationId:l.org,entityType:"members"},function(t){e(t)},t)}),auditEntries:e(function(e,n){t.currentPage=0,c(e,n)})};t.getNextPage=c,r.loadPage("OrgActivity",u,t,function(){r.setPageTitle("org-activity",[t.org.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.OrgAppsController=e._module.controller("Apiman.OrgAppsController",["$q","$scope","$location","OrgSvcs","PageLifecycle","$rootScope","$routeParams",function(e,t,n,i,r,a,o){t.tab="applications";var s=o;t.organizationId=s.org,t.filterApps=function(e){if(e){var n=[];angular.forEach(t.apps,function(t){t.name.toLowerCase().indexOf(e.toLowerCase())>-1&&n.push(t)}),t.filteredApps=n}else t.filteredApps=t.apps};var l={org:e(function(e,t){i.get({organizationId:s.org,entityType:""},function(t){a.mruOrg=t,e(t)},t)}),members:e(function(e,t){i.query({organizationId:s.org,entityType:"members"},function(t){e(t)},t)}),apps:e(function(e,n){i.query({organizationId:s.org,entityType:"applications"},function(n){t.filteredApps=n,e(n)},n)})};r.loadPage("OrgApps",l,t,function(){r.setPageTitle("org-apps",[t.org.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.getRoleIds=function(e){return e.roles.map(function(e){return e.roleId})},e.OrgManageMembersController=e._module.controller("Apiman.OrgManageMembersController",["$q","$scope","$location","ApimanSvcs","OrgSvcs","PageLifecycle","$rootScope","Logger","$routeParams",function(t,n,i,r,a,o,s,l,c){var u=c;n.organizationId=u.org,n.filteredMembers=[],n.filterValue="",n.selectedRoles="";var d=function(e){if(0===n.selectedRoles.length)return!0;var t=!1;return jQuery.each(n.selectedRoles,function(n,i){return jQuery.inArray(i,e)>-1?t=!0:void 0}),t};n.filterMembers=function(t){n.filterValue=t,n.filteredMembers=t?jQuery.grep(n.members,function(n,i){return(n.userName.toLowerCase().indexOf(t.toLowerCase())>-1||n.userId.toLowerCase().indexOf(t.toLowerCase())>-1)&&d(e.getRoleIds(n))}):0===n.selectedRoles.length?n.members:jQuery.grep(n.members,function(t,n){return d(e.getRoleIds(t))})};var p={org:t(function(e,t){a.get({organizationId:u.org,entityType:""},function(t){s.mruOrg=t,e(t)},t)}),members:t(function(e,t){a.query({organizationId:u.org,entityType:"members"},function(t){n.filteredMembers=t,e(t)},t)}),roles:t(function(e,t){r.query({entityType:"roles"},function(t){n.filteredRoles=t,e(t)},t)})};o.loadPage("OrgManageMembers",p,n,function(){o.setPageTitle("org-manage-members",[n.org.name])})}]),e.OrgManageMembersController.directive("apimanUserCard",["OrgSvcs","Dialogs","Logger","PageLifecycle",function(t,n,i,r){return{restrict:"E",scope:{member:"=",roles:"=",orgId:"@"},template:'<div ng-include="currentTemplate()" ng-show="isCardVisible"></div>',link:function(a,o,s){a.updatedRoles=e.getRoleIds(a.member),a.front="apiman-user-card-front",a.back="apiman-user-card-back",a.cardFace=a.front,a.isCardVisible=!0,a.flipCard=function(e){a.cardFace=e},a.currentTemplate=function(){return"plugins/api-manager/html/org/"+a.cardFace+".html"},a.joinRoles=function(e){return e.map(function(e){return e.roleName}).join(", ")},a.updateRoles=function(e){if(!e)return a.flipCard(a.front);var n={userId:a.member.userId,roleIds:e};l(a.orgId,a.member.userId),t.save({organizationId:a.orgId,entityType:"roles"},n,function(){i.info("Successfully Saved: "+angular.toJson(n)),a.flipCard(a.front)},r.handleError),c(e)},a.revokeAll=function(){n.confirm("Confirm Revoke All","This will remove "+a.member.userName+" from all roles in the Organization. Really do this?",function(){l(a.orgId,a.member.userId),a.isCardVisible=!1})};var l=function(e,n){t["delete"]({organizationId:e,entityType:"members",entityId:n},function(){i.debug("Successfully revoked all roles for "+n)},r.handleError)},c=function(t){var n=jQuery.grep(a.roles,function(e,n){return jQuery.inArray(e.id,t)>=0}),i=n.map(function(e){return{roleId:e.id,roleName:e.name}});a.member.roles=i,a.updatedRoles=e.getRoleIds(a.member)}}}}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.OrgMembersController=e._module.controller("Apiman.OrgMembersController",["$q","$scope","$location","OrgSvcs","PageLifecycle","$rootScope","$routeParams",function(e,t,n,i,r,a,o){t.tab="members";var s=o;t.organizationId=s.org,t.filterMembers=function(e){if(e){var n=[];angular.forEach(t.members,function(t){(t.userName.toLowerCase().indexOf(e.toLowerCase())>-1||t.userId.toLowerCase().indexOf(e.toLowerCase())>-1)&&n.push(t)}),t.filteredMembers=n}else t.filteredMembers=t.members};var l={org:e(function(e,t){i.get({organizationId:s.org,entityType:""},function(t){a.mruOrg=t,e(t)},t)}),members:e(function(e,n){i.query({organizationId:s.org,entityType:"members"},function(n){t.filteredMembers=n,e(n)},n)})};r.loadPage("OrgMembers",l,t,function(){r.setPageTitle("org-members",[t.org.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.OrgNewMemberController=e._module.controller("Apiman.OrgNewMemberController",["$q","$scope","$location","OrgSvcs","PageLifecycle","$rootScope","ApimanSvcs","Logger","$routeParams",function(e,t,n,i,r,a,o,s,l){var c=l;t.organizationId=c.org,t.selectedUsers={},t.selectedRoles=[],t.queriedUsers=[],t.searchBoxValue="",t.addMembers=function(){t.selectedRoles&&(t.addMembersButton.state="in-progress",jQuery.each(t.selectedUsers,function(e,n){s.debug("Adding user: {0}",n);var a={userId:n.username,roleIds:t.selectedRoles};i.save({organizationId:t.organizationId,entityType:"roles"},a,function(){s.debug("Successfully Saved: {0}",a),t.addMembersButton.state="complete",r.redirectTo("/orgs/{0}/manage-members",c.org)},r.handleError)}))},t.findUsers=function(e){if(t.searchButton.state="in-progress",t.searchBoxValue=e,!e||0==e.length)return t.queriedUsers=[],void(t.searchButton.state="complete");var n={filters:[{name:"username",value:"*"+e+"*",operator:"like"}],orderBy:{name:"fullName",ascending:!0},paging:{page:1,pageSize:50}};s.debug("Query: {0}",n),o.save({entityType:"users",secondaryType:"search"},n,function(e){t.searchButton.state="complete",s.debug("Reply: {0}",e),t.queriedUsers=e.beans},function(){t.searchButton.state="error"})},t.countObjectKeys=function(e){return Object.keys(e).length};var u={org:e(function(e,t){i.get({organizationId:c.org,entityType:""},function(t){a.mruOrg=t,e(t)},t)}),members:e(function(e,n){i.query({organizationId:c.org,entityType:"members"},function(n){t.filteredMembers=n,e(n)},n)}),roles:e(function(e,n){o.query({entityType:"roles"},function(n){t.filteredRoles=n,e(n)},n)})};r.loadPage("OrgNewMember",u,t,function(){r.setPageTitle("new-member")})}]),e.OrgNewMemberController.directive("apimanUserEntry",["Logger",function(e){return{scope:{user:"=",selectedUsers:"="},replace:!0,templateUrl:"plugins/api-manager/html/org/apiman-user-entry.html",link:function(t){t.isSelectedUser=!1,t.selectThisUser=function(){t.isSelectedUser=!t.isSelectedUser,t.isSelectedUser?t.selectedUsers[t.user.username]=t.user:delete t.selectedUsers[t.user.username],e.debug("Selected {0}",t.user.username),e.debug("Global $scope.selectedUsers {0}",t.selectedUsers)}}}}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.OrgPlansController=e._module.controller("Apiman.OrgPlansController",["$q","$scope","$location","OrgSvcs","PageLifecycle","$rootScope","$routeParams",function(e,t,n,i,r,a,o){t.tab="plans";var s=o;t.organizationId=s.org,t.filterPlans=function(e){if(e){var n=[];angular.forEach(t.plans,function(t){t.name.toLowerCase().indexOf(e.toLowerCase())>-1&&n.push(t)}),t.filteredPlans=n}else t.filteredPlans=t.plans};var l={org:e(function(e,t){i.get({organizationId:s.org,entityType:""},function(t){a.mruOrg=t,e(t)},t)}),members:e(function(e,t){i.query({organizationId:s.org,entityType:"members"},function(t){e(t)},t)}),plans:e(function(e,n){i.query({organizationId:s.org,entityType:"plans"
},function(n){t.filteredPlans=n,e(n)},n)})};r.loadPage("OrgPlans",l,t,function(){r.setPageTitle("org-plans",[t.org.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.OrgServicesController=e._module.controller("Apiman.OrgServicesController",["$q","$scope","$location","OrgSvcs","PageLifecycle","$rootScope","$routeParams",function(e,t,n,i,r,a,o){t.tab="services";var s=o;t.organizationId=s.org,t.filterServices=function(e){if(e){var n=[];angular.forEach(t.services,function(t){t.name.toLowerCase().indexOf(e.toLowerCase())>-1&&n.push(t)}),t.filteredServices=n}else t.filteredServices=t.services};var l={org:e(function(e,t){i.get({organizationId:s.org,entityType:""},function(t){a.mruOrg=t,e(t)},t)}),members:e(function(e,t){i.query({organizationId:s.org,entityType:"members"},function(t){e(t)},t)}),services:e(function(e,n){i.query({organizationId:s.org,entityType:"services"},function(n){t.filteredServices=n,e(n)},n)})};r.loadPage("OrgSvcs",l,t,function(){r.setPageTitle("org-services",[t.org.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.OrgSidebarController=e._module.controller("Apiman.OrgSidebarController",["Logger","$scope","OrgSvcs",function(e,t,n){t.updateOrgDescription=function(i){var r={description:i};n.update({organizationId:t.organizationId},r,function(e){},function(t){e.error("Unable to update org description: {0}",t)})}}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.OrgRedirectController=e._module.controller("Apiman.OrgRedirectController",["$q","$scope","$location","OrgSvcs","PageLifecycle","$rootScope","CurrentUser","$routeParams",function(e,t,n,i,r,a,o,s){r.loadPage("OrgRedirect",void 0,t,function(){var e=s.org,t="members";o.hasPermission(e,"planEdit")?t="plans":o.hasPermission(e,"svcEdit")?t="services":o.hasPermission(e,"appEdit")&&(t="apps"),r.forwardTo("/orgs/{0}/{1}",e,t)})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.PlanActivityController=e._module.controller("Apiman.PlanActivityController",["$q","$scope","$location","OrgSvcs","AuditSvcs","Logger","PageLifecycle","PlanEntityLoader","$routeParams",function(e,t,n,i,r,a,o,s,l){var c=l;t.organizationId=c.org,t.tab="activity",t.version=c.version;var u=function(e,n){t.currentPage=t.currentPage+1,r.get({organizationId:c.org,entityType:"plans",entityId:c.plan,page:t.currentPage,count:20},function(t){var n=t.beans;e(n)},n)},d=s.getCommonData(t,n);d=angular.extend(d,{auditEntries:e(function(e,n){t.currentPage=0,u(e,n)})}),t.getNextPage=u,o.loadPage("PlanActivity",d,t,function(){o.setPageTitle("plan-activity",[t.plan.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.PlanOverviewController=e._module.controller("Apiman.PlanOverviewController",["$q","$scope","$location","PageLifecycle","PlanEntityLoader","$routeParams",function(e,t,n,i,r,a){var o=a;t.organizationId=o.org,t.tab="overview";var s=r.getCommonData(t,n);i.loadPage("PlanOverview",s,t,function(){i.setPageTitle("plan-overview",[t.plan.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.PlanPoliciesController=e._module.controller("Apiman.PlanPoliciesController",["$q","$scope","$location","OrgSvcs","ApimanSvcs","Logger","PageLifecycle","PlanEntityLoader","Dialogs","$routeParams",function(e,t,n,i,r,a,o,s,l,c){var u=c;t.organizationId=u.org,t.tab="policies",t.version=u.version;var d=function(e){angular.forEach(t.policies,function(n,i){e===n&&t.policies.splice(i,1)})};t.removePolicy=function(e){l.confirm("Confirm Remove Policy","Do you really want to remove this policy from the plan?",function(){i["delete"]({organizationId:u.org,entityType:"plans",entityId:u.plan,versionsOrActivity:"versions",version:u.version,policiesOrActivity:"policies",policyId:e.id},function(t){d(e)},o.handleError)})},t.reorderPolicies=function(e){var t={policies:e};i.save({organizationId:u.org,entityType:"plans",entityId:u.plan,versionsOrActivity:"versions",version:u.version,policiesOrActivity:"reorderPolicies"},t,function(){a.debug("Reordering POSTed successfully")},function(){a.debug("Reordering POST failed.")})};var p=s.getCommonData(t,n);angular.extend(p,{policies:e(function(e,t){i.query({organizationId:u.org,entityType:"plans",entityId:u.plan,versionsOrActivity:"versions",version:u.version,policiesOrActivity:"policies"},function(t){e(t)},t)})}),o.loadPage("PlanPolicies",p,t,function(){o.setPageTitle("plan-policies",[t.plan.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.PlanRedirectController=e._module.controller("Apiman.PlanRedirectController",["$q","$scope","$location","OrgSvcs","PageLifecycle","$rootScope","CurrentUser","$routeParams",function(e,t,n,i,r,a,o,s){var l=s.org,c=s.plan,u={versions:e(function(e,t){i.query({organizationId:l,entityType:"plans",entityId:c,versionsOrActivity:"versions"},e,t)})};r.loadPage("PlanRedirect",u,t,function(){var e=t.versions[0].version;e?r.forwardTo("/orgs/{0}/plans/{1}/{2}",l,c,e):r.handleError({status:404})})}]),e.PlanEntityLoader=e._module.factory("PlanEntityLoader",["$q","OrgSvcs","Logger","$rootScope","$routeParams","EntityStatusService",function(e,t,n,i,r,a){return{getCommonData:function(n,i){var o=r;return{version:e(function(e,i){t.get({organizationId:o.org,entityType:"plans",entityId:o.plan,versionsOrActivity:"versions",version:o.version},function(t){n.org=t.plan.organization,n.plan=t.plan,a.setEntityStatus(t.status),e(t)},i)}),versions:e(function(e,n){t.query({organizationId:o.org,entityType:"plans",entityId:o.plan,versionsOrActivity:"versions"},e,n)})}}}}]),e.PlanEntityController=e._module.controller("Apiman.PlanEntityController",["$q","$scope","$location","ActionSvcs","Logger","PageLifecycle","$routeParams","OrgSvcs","EntityStatusService",function(e,t,n,i,r,a,o,s,l){var c=o;t.setEntityStatus=function(e){l.setEntityStatus(e)},t.getEntityStatus=function(){return l.getEntityStatus()},t.setVersion=function(e){a.redirectTo("/orgs/{0}/plans/{1}/{2}",c.org,c.plan,e.version)},t.lockPlan=function(){t.lockButton.state="in-progress";var e={type:"lockPlan",entityId:c.plan,organizationId:c.org,entityVersion:c.version};i.save(e,function(e){t.version.status="Locked",t.lockButton.state="complete",t.setEntityStatus(t.version.status)},a.handleError)},t.updatePlanDescription=function(e){var n={description:e};s.update({organizationId:t.organizationId,entityType:"plans",entityId:t.plan.id},n,function(e){},function(e){r.error("Unable to update plan description:  {0}",e)})}}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ServiceActivityController=e._module.controller("Apiman.ServiceActivityController",["$q","$scope","$location","PageLifecycle","ServiceEntityLoader","AuditSvcs","$routeParams",function(e,t,n,i,r,a,o){var s=o;t.organizationId=s.org,t.tab="activity",t.version=s.version;var l=function(e,n){t.currentPage=t.currentPage+1,a.get({organizationId:s.org,entityType:"services",entityId:s.service,page:t.currentPage,count:20},function(t){var n=t.beans;e(n)},n)},c=r.getCommonData(t,n);c=angular.extend(c,{auditEntries:e(function(e,n){t.currentPage=0,l(e,n)})}),t.getNextPage=l,i.loadPage("ServiceActivity",c,t,function(){i.setPageTitle("service-activity",[t.service.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ServiceContractsController=e._module.controller("Apiman.ServiceContractsController",["$q","$scope","$location","PageLifecycle","ServiceEntityLoader","OrgSvcs","Logger","$routeParams",function(e,t,n,i,r,a,o,s){var l=s;t.organizationId=l.org,t.tab="contracts",t.version=l.version;var c=function(e,n){var i=10;t.currentPage=t.currentPage+1,a.query({organizationId:l.org,entityType:"services",entityId:l.service,versionsOrActivity:"versions",version:l.version,policiesOrActivity:"contracts",page:t.currentPage,count:i},function(n){t.hasMore=n.length==i?!0:!1,e(n)},n)},u=r.getCommonData(t,n);u=angular.extend(u,{contracts:e(function(e,n){t.currentPage=0,c(e,n)})}),t.getNextPage=c,i.loadPage("ServiceContracts",u,t,function(){o.debug("::: is public: {0}",t.version.publicService),t.version.publicService&&(o.debug("::: num plans: {0}",t.version.plans.length),0==t.version.plans.length&&(t.isPublicOnly=!0)),i.setPageTitle("service-contracts",[t.service.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ServiceDefController=e._module.controller("Apiman.ServiceDefController",["$q","$scope","$location","PageLifecycle","ServiceEntityLoader","OrgSvcs","Logger","$routeParams","ServiceDefinitionSvcs",function(e,t,n,i,r,a,o,s,l){var c=s;t.organizationId=c.org,t.tab="def",t.version=c.version,t.typeOptions=[{label:"No Service Definition",value:"None"},{label:"Swagger (JSON)",value:"SwaggerJSON"},{label:"Swagger (YAML)",value:"SwaggerYAML"}];var u=function(e){angular.forEach(t.typeOptions,function(n){n.value==e&&(t.selectedDefinitionType=n)})};u("None"),jQuery("#service-definition").height(100),jQuery("#service-definition").focus(function(){jQuery("#service-definition").height(450)}),jQuery("#service-definition").blur(function(){jQuery("#service-definition").height(100)}),t.$on("afterdrop",function(e,n){var i=n.value;i&&(0===i.lastIndexOf("{",0)&&t.$apply(function(){u("SwaggerJSON")}),0===i.lastIndexOf("swagger:",0)&&t.$apply(function(){u("SwaggerYAML")}))});var d=r.getCommonData(t,n),p=function(){l.getServiceDefinition(c.org,c.service,c.version,function(e){t.serviceDefinition=e,t.updatedServiceDefinition=e},function(e){o.error("Error loading definition: {0}",e)})},h=function(){if(t.version){var e=!1;t.serviceDefinition!=t.updatedServiceDefinition&&(o.debug("**** dirty because of service def"),e=!0),t.selectedDefinitionType.value!=t.definitionType&&(o.debug("**** dirty because of def type: {0} != {1}",t.selectedDefinitionType.value,t.definitionType),e=!0),t.isDirty=e}};t.$watch("updatedService",h,!0),t.$watch("updatedServiceDefinition",function(e,t){e&&h()}),t.$watch("selectedDefinitionType",h,!0),t.reset=function(){u(t.definitionType),t.updatedServiceDefinition=t.serviceDefinition,t.isDirty=!1},t.saveService=function(){t.saveButton.state="in-progress";var e=a.updateJSON;"SwaggerJSON"==t.selectedDefinitionType.value&&(e=a.updateYAML),l.updateServiceDefinition(c.org,c.service,c.version,t.updatedServiceDefinition,t.selectedDefinitionType.value,function(e){o.debug("Updated the service definition!"),t.serviceDefinition=t.updatedServiceDefinition,t.isDirty=!1,t.saveButton.state="complete"},function(e){o.error("Error updating definition: {0}",e),t.saveButton.state="error"})},i.loadPage("ServiceDef",d,t,function(){t.definitionType=t.version.definitionType,t.definitionType||(t.definitionType="None"),t.version.definitionType&&"None"!=t.version.definitionType?p():o.debug("Skipped loading service definition - None defined."),t.reset(),i.setPageTitle("service-def",[t.service.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ServiceEndpointController=e._module.controller("Apiman.ServiceEndpointController",["$q","$scope","$location","PageLifecycle","ServiceEntityLoader","OrgSvcs","ApimanSvcs","$routeParams",function(e,t,n,i,r,a,o,s){var l=s;t.organizationId=l.org,t.tab="endpoint",t.version=l.version;var c=r.getCommonData(t,n);c=angular.extend(c,{managedEndpoint:e(function(e,t){a.get({organizationId:l.org,entityType:"services",entityId:l.service,versionsOrActivity:"versions",version:l.version,policiesOrActivity:"endpoint"},e,t)})}),i.loadPage("ServiceEndpoint",c,t,function(){i.setPageTitle("service-endpoint",[t.service.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ServiceImplController=e._module.controller("Apiman.ServiceImplController",["$q","$scope","$location","PageLifecycle","ServiceEntityLoader","OrgSvcs","ApimanSvcs","$routeParams","EntityStatusService","Logger",function(e,t,n,i,r,a,o,s,l,c){var u=s;t.organizationId=u.org,t.tab="impl",t.version=u.version,t.typeOptions=["rest","soap"],t.updatedService=new Object,t.apiSecurity=new Object;var d=r.getCommonData(t,n);null!=u.version&&(d=angular.extend(d,{gateways:e(function(e,t){o.query({entityType:"gateways"},e,t)})}));var p=function(e,t){return e&&e[t]?e[t]:null},h=function(e){var t={};return t.type=e.endpointProperties["authorization.type"],t.type||(t.type="none"),"mssl"==t.type&&(t.type="mtls"),"basic"==t.type&&(t.basic={username:p(e.endpointProperties,"basic-auth.username"),password:p(e.endpointProperties,"basic-auth.password"),confirmPassword:p(e.endpointProperties,"basic-auth.password"),requireSSL:"true"===p(e.endpointProperties,"basic-auth.requireSSL")}),t},f=function(e){var t={};return"none"==e.type?t:(t["authorization.type"]=e.type,"basic"==e.type&&e.basic&&(t["basic-auth.username"]=e.basic.username,t["basic-auth.password"]=e.basic.password,t["basic-auth.requireSSL"]=e.basic.requireSSL?"true":"false"),t)};t.$watch("updatedService",function(e){if(t.version){var n=!1;e.endpoint!=t.version.endpoint||e.endpointType!=t.version.endpointType?n=!0:e.gateways&&e.gateways.length>0&&(n=!0),t.version.endpointProperties&&e.endpointProperties&&(angular.equals(t.version.endpointProperties,e.endpointProperties)||(c.debug("Dirty due to EP:"),c.debug("    $scope.version:    {0}",t.version),c.debug("    $scope.version.EP: {0}",t.version.endpointProperties),c.debug("    newValue.EP:       {0}",e.endpointProperties),n=!0)),t.isDirty=n}},!0),t.$watch("apiSecurity",function(e){if(e){t.updatedService.endpointProperties=f(e);var n=!0;"basic"==e.type&&e.basic&&(e.basic.password||(n=!1),e.basic.password!=e.basic.confirmPassword&&(n=!1)),t.isValid=n}},!0),t.$watch("selectedGateway",function(e){if(e){var n=!1;t.version.gateways[0].gatewayId==e.id&&(n=!0),n?delete t.updatedService.gateways:t.updatedService.gateways=[{gatewayId:e.id}]}}),t.reset=function(){t.apiSecurity=h(t.version),t.updatedService.endpoint=t.version.endpoint,t.updatedService.endpointType=t.version.endpointType,t.updatedService.endpointProperties=angular.copy(t.version.endpointProperties),delete t.updatedService.gateways,t.version.gateways&&angular.forEach(t.gateways,function(e){e.id==t.version.gateways[0].gatewayId&&(t.selectedGateway=e)}),t.isDirty=!1},t.saveService=function(){t.saveButton.state="in-progress",a.update({organizationId:u.org,entityType:"services",entityId:u.service,versionsOrActivity:"versions",version:u.version},t.updatedService,function(e){t.isDirty=!1,t.saveButton.state="complete",t.version=e,l.setEntityStatus(e.status)},i.handleError)},i.loadPage("ServiceImpl",d,t,function(){t.reset(),i.setPageTitle("service-impl",[t.service.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){var t=7776e6,n=2592e6,i=6048e5,r=864e5,a=36e5;e.ServiceMetricsController=e._module.controller("Apiman.ServiceMetricsController",["$q","Logger","$scope","$location","PageLifecycle","ServiceEntityLoader","OrgSvcs","MetricsSvcs","$routeParams","$timeout",function(e,o,s,l,c,u,d,p,h,f){var g=h;s.organizationId=g.org,s.tab="metrics",s.version=g.version,s.metricsRange="7days",s.metricsType="usage";var m,v,y,b,w,x,k,C=function(){var e="%Y-%m-%d";return("7days"==s.metricsRange||"24hours"==s.metricsRange||"hour"==s.metricsRange)&&(e="%H:%M"),e},S=function(e){var t=[];t.push("x");var n=["# Requests"];angular.forEach(e.data,function(e){t.push(Date.parse(e.label)),n.push(e.count)}),1==t.length?s.usageChartNoData=!0:(o.log("======= xcol: "+JSON.stringify(t)),o.log("======= reqs: "+JSON.stringify(n)),m=c3.generate({size:{height:200},data:{x:"x",columns:[t,n],types:{"# Requests":"bar"}},bindto:"#usage-chart",legend:{hide:!0},axis:{x:{type:"timeseries",tick:{format:C()}},y:{label:"Total Requests"}}}))},_=function(e){var t=[];angular.forEach(e.data,function(e,n){t.push([n,e])}),0==t.length?s.appUsageChartNoData=!0:v=c3.generate({size:{height:250},data:{columns:t,type:"pie"},bindto:"#app-usage-chart"})},T=function(e){var t=[];angular.forEach(e.data,function(e,n){t.push([n,e])}),0==t.length?s.planUsageChartNoData=!0:y=c3.generate({size:{height:250},data:{columns:t,type:"pie"},bindto:"#plan-usage-chart"})},$=function(e){var t=[];t.push("x");var n=["Success"],i=["Fail"],r=["Error"];angular.forEach(e.data,function(e){t.push(Date.parse(e.label)),n.push((e.total-e.failures-e.errors).toString()),i.push(e.failures),r.push(e.errors)}),1==t.length?s.responseTypeChartNoData=!0:(o.log("======= xcol: "+JSON.stringify(t)),o.log("======= successCol: "+JSON.stringify(n)),o.log("======= failureCol: "+JSON.stringify(i)),o.log("======= errorCol: "+JSON.stringify(r)),b=c3.generate({size:{height:200},data:{x:"x",columns:[t,n,i,r],colors:{Success:"#71B56E",Fail:"#E37B4F",Error:"#E34F4F"},types:{Success:"bar",Fail:"bar",Error:"bar"},groups:[["Success","Fail","Error"]]},bindto:"#responseType-chart",axis:{x:{type:"timeseries",tick:{format:C()}},y:{label:"Responses"}}}))},A=function(e){var t=e.total,n=e.total-e.failures-e.errors,i=e.failures,r=e.errors;w=c3.generate({size:{height:150},data:{columns:[["data",n]],colors:{data:"#71B56E"},type:"gauge"},gauge:{max:t},bindto:"#responseType-chart-success"}),x=c3.generate({size:{height:150},data:{columns:[["data",i]],colors:{data:"#E37B4F"},type:"gauge"},gauge:{max:t},bindto:"#responseType-chart-failed"}),k=c3.generate({size:{height:150},data:{columns:[["data",r]],colors:{data:"#E34F4F"},type:"gauge"},gauge:{max:t},bindto:"#responseType-chart-error"})},E=function(e){return P(e),e.setHours(0),e},P=function(e){return e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},I=function(){var e=new Date,o=new Date;return"90days"==s.metricsRange?(e=new Date(e.getTime()-t),E(e)):"30days"==s.metricsRange?(e=new Date(e.getTime()-n),E(e)):"7days"==s.metricsRange?(e=new Date(e.getTime()-i),E(e)):"24hours"==s.metricsRange?(e=new Date(e.getTime()-r),P(e)):"hour"==s.metricsRange&&(e=new Date(e.getTime()-a)),{from:e,to:o}},D=function(){s.usageChartLoading=!0,s.appUsageChartLoading=!0,s.planUsageChartLoading=!0;var e=I(),t=e.from,n=e.to,i="day";("7days"==s.metricsRange||"24hours"==s.metricsRange)&&(i="hour"),"hour"==s.metricsRange&&(i="minute"),m&&(m.destroy(),m=null),p.getUsage(g.org,g.service,g.version,i,t,n,function(e){s.usageChartLoading=!1,S(e)},function(e){o.error("Error loading usage chart data: {0}",JSON.stringify(e)),s.usageChartLoading=!1,s.usageChartNoData=!0}),v&&(v.destroy(),v=null),p.getUsagePerApp(g.org,g.service,g.version,t,n,function(e){s.appUsageChartLoading=!1,_(e)},function(e){o.error("Error loading app usage chart data: {0}",JSON.stringify(e)),s.appUsageChartLoading=!1,s.appUsageChartNoData=!0}),y&&(y.destroy(),y=null),p.getUsagePerPlan(g.org,g.service,g.version,t,n,function(e){s.planUsageChartLoading=!1,T(e)},function(e){o.error("Error loading plan usage chart data: {0}",JSON.stringify(e)),s.planUsageChartLoading=!1,s.planUsageChartNoData=!0})},M=function(){s.responseTypeChartLoading=!0,s.responseTypeSuccessChartLoading=!0,s.responseTypeFailedChartLoading=!0,s.responseTypeErrorChartLoading=!0;var e=I(),t=e.from,n=e.to,i="day";("7days"==s.metricsRange||"24hours"==s.metricsRange)&&(i="hour"),"hour"==s.metricsRange&&(i="minute"),b&&(b.destroy(),b=null),p.getResponseStats(g.org,g.service,g.version,i,t,n,function(e){s.responseTypeChartLoading=!1,$(e)},function(e){o.error("Error loading response type stats histogram data: {0}",JSON.stringify(e)),s.responseTypeChartLoading=!1,s.responseTypeChartNoData=!0}),w&&(w.destroy(),w=null),x&&(x.destroy(),x=null),k&&(k.destroy(),k=null),p.getResponseStatsSummary(g.org,g.service,g.version,t,n,function(e){s.responseTypeSuccessChartLoading=!1,s.responseTypeFailedChartLoading=!1,s.responseTypeErrorChartLoading=!1,A(e)},function(e){o.error("Error loading response type summary stats chart data: {0}",JSON.stringify(e)),s.responseTypeSuccessChartLoading=!1,s.responseTypeFailedChartLoading=!1,s.responseTypeErrorChartLoading=!1,s.responseTypeSuccessChartNoData=!0,s.responseTypeFailedChartNoData=!0,s.responseTypeErrorChartNoData=!0})},N=function(){"usage"==s.metricsType&&D(),"responseType"==s.metricsType&&M()};s.$watch("metricsRange",function(e,t){e&&e!=t&&N()}),s.$watch("metricsType",function(e,t){e&&e!=t&&N()});var j=u.getCommonData(s,l);c.loadPage("ServiceMetrics",j,s,function(){c.setPageTitle("service-metrics",[s.service.name]),N()})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ServiceOverviewController=e._module.controller("Apiman.ServiceOverviewController",["$q","$scope","$location","PageLifecycle","ServiceEntityLoader","$routeParams",function(e,t,n,i,r,a){var o=a;t.organizationId=o.org,t.tab="overview",t.version=o.version;var s=r.getCommonData(t,n);i.loadPage("ServiceOverview",s,t,function(){i.setPageTitle("service-overview",[t.service.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ServicePlansController=e._module.controller("Apiman.ServicePlansController",["$q","$scope","$location","PageLifecycle","ServiceEntityLoader","OrgSvcs","ApimanSvcs","$routeParams","EntityStatusService",function(e,t,n,i,r,a,o,s,l){var c=s;t.organizationId=c.org,t.tab="plans",t.version=c.version,t.updatedService=new Object;var u=[],d=function(){for(var e=[],t=0;t<u.length;t++){var n=u[t];if(n.checked){var i={};i.planId=n.id,i.version=n.selectedVersion,e.push(i)}}return e},p=r.getCommonData(t,n);null!=c.version&&(p=angular.extend(p,{plans:e(function(t,n){a.query({organizationId:c.org,entityType:"plans"},function(n){var i=[];angular.forEach(n,function(t){i.push(e(function(e,n){a.query({organizationId:c.org,entityType:"plans",entityId:t.id,versionsOrActivity:"versions"},function(n){for(var i=[],r=0;r<n.length;r++){var a=n[r];"Locked"==a.status&&i.push(a.version)}i.length>0&&(t.lockedVersions=i,u.push(t)),e(n)},n)}))}),e.all(i).then(function(){u.sort(function(e,t){return e.id.toLowerCase()<t.id.toLowerCase()?-1:t.id<e.id?1:0}),t(u)})},n)})})),t.$watch("updatedService",function(e){var n=!1;if(e.publicService!=t.version.publicService&&(n=!0),e.plans&&t.version.plans&&e.plans.length!=t.version.plans.length)n=!0;else if(e.plans&&t.version.plans)for(var i=0;i<e.plans.length;i++){var r=e.plans[i],a=t.version.plans[i];(r.planId!=a.planId||r.version!=a.version)&&(n=!0)}t.isDirty=n},!0),t.$watch("plans",function(e){t.updatedService.plans=d()},!0),t.reset=function(){t.updatedService.publicService=t.version.publicService;for(var e=0;e<u.length;e++){u[e].selectedVersion=u[e].lockedVersions[0];for(var n=0;n<t.version.plans.length;n++)if(u[e].id==t.version.plans[n].planId){u[e].checked=!0,u[e].selectedVersion=t.version.plans[n].version;break}}t.updatedService.plans=d(),t.isDirty=!1},t.saveService=function(){t.saveButton.state="in-progress",a.update({organizationId:c.org,entityType:"services",entityId:c.service,versionsOrActivity:"versions",version:c.version},t.updatedService,function(e){t.version.publicService=t.updatedService.publicService,t.isDirty=!1,t.saveButton.state="complete",t.version=e,l.setEntityStatus(e.status)},i.handleError)},i.loadPage("ServicePlans",p,t,function(){t.reset(),i.setPageTitle("service-plans",[t.service.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ServicePoliciesController=e._module.controller("Apiman.ServicePoliciesController",["$q","$scope","$location","PageLifecycle","ServiceEntityLoader","OrgSvcs","Dialogs","$routeParams",function(e,t,n,i,r,a,o,s){var l=s;t.organizationId=l.org,t.tab="policies",t.version=l.version;var c=function(e){angular.forEach(t.policies,function(n,i){e===n&&t.policies.splice(i,1)})};t.removePolicy=function(e){o.confirm("Confirm Remove Policy","Do you really want to remove this policy from the service?",function(){a["delete"]({organizationId:l.org,entityType:"services",entityId:l.service,versionsOrActivity:"versions",version:l.version,policiesOrActivity:"policies",policyId:e.id},function(t){c(e)},i.handleError)})},t.reorderPolicies=function(e){var t={policies:e};a.save({organizationId:l.org,entityType:"services",entityId:l.service,versionsOrActivity:"versions",version:l.version,policiesOrActivity:"reorderPolicies"},t,function(){Logger.debug("Reordering POSTed successfully")},function(){Logger.debug("Reordering POST failed.")})};var u=r.getCommonData(t,n);u=angular.extend(u,{policies:e(function(e,t){a.query({organizationId:l.org,entityType:"services",entityId:l.service,versionsOrActivity:"versions",version:l.version,policiesOrActivity:"policies"},e,t)})}),i.loadPage("ServicePolicies",u,t,function(){i.setPageTitle("service-policies",[t.service.name])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.ServiceRedirectController=e._module.controller("Apiman.ServiceRedirectController",["$q","$scope","$location","OrgSvcs","PageLifecycle","$rootScope","CurrentUser","$routeParams",function(e,t,n,i,r,a,o,s){var l=s.org,c=s.service,u={versions:e(function(e,t){i.query({organizationId:l,entityType:"services",entityId:c,versionsOrActivity:"versions"},e,t)})};r.loadPage("ServiceRedirect",u,t,function(){var e=t.versions[0].version;e?r.forwardTo("/orgs/{0}/services/{1}/{2}",l,c,e):r.handleError({status:404})})}]),e.ServiceEntityLoader=e._module.factory("ServiceEntityLoader",["$q","OrgSvcs","Logger","$rootScope","$routeParams","EntityStatusService",function(e,t,n,i,r,a){return{getCommonData:function(n,o){var s=r;return{version:e(function(e,r){t.get({organizationId:s.org,entityType:"services",entityId:s.service,versionsOrActivity:"versions",version:s.version},function(t){n.org=t.service.organization,n.service=t.service,i.mruService=t,a.setEntityStatus(t.status),e(t)},r)}),versions:e(function(e,n){t.query({organizationId:s.org,entityType:"services",entityId:s.service,versionsOrActivity:"versions"},e,n)})}}}}]),e.ServiceEntityController=e._module.controller("Apiman.ServiceEntityController",["$q","$scope","$location","ActionSvcs","Logger","Dialogs","PageLifecycle","$routeParams","OrgSvcs","EntityStatusService",function(e,t,n,i,r,a,o,s,l,c){var u=s;t.params=u,t.setEntityStatus=function(e){c.setEntityStatus(e)},t.getEntityStatus=function(){return c.getEntityStatus()},t.setVersion=function(e){o.redirectTo("/orgs/{0}/services/{1}/{2}",u.org,u.service,e.version)},t.publishService=function(){t.publishButton.state="in-progress";var e={type:"publishService",entityId:u.service,organizationId:u.org,entityVersion:u.version};i.save(e,function(e){t.version.status="Published",t.publishButton.state="complete",t.setEntityStatus(t.version.status)},o.handleError)},t.retireService=function(){t.retireButton.state="in-progress",a.confirm("Confirm Retire Service","Do you really want to retire this service?  This action cannot be undone.",function(){var e={type:"retireService",entityId:u.service,organizationId:u.org,entityVersion:u.version};i.save(e,function(e){t.version.status="Retired",t.retireButton.state="complete",t.setEntityStatus(t.version.status)},o.handleError)},function(){t.retireButton.state="complete"})},t.updateServiceDescription=function(e){var n={description:e};l.update({organizationId:t.organizationId,entityType:"services",entityId:t.service.id},n,function(e){r.info("Updated sucessfully")},function(e){r.error("Unable to update service description:  {0}",e)})}}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.UserActivityController=e._module.controller("Apiman.UserActivityController",["$q","$scope","$location","UserSvcs","UserAuditSvcs","PageLifecycle","$routeParams",function(e,t,n,i,r,a,o){t.tab="activity";var s=function(e,n){t.currentPage=t.currentPage+1,r.get({user:o.user,page:t.currentPage,count:20},function(t){var n=t.beans;e(n)},n)},l={user:e(function(e,t){i.get({user:o.user},function(t){t.fullName||(t.fullName=t.username),e(t)},t)}),auditEntries:e(function(e,n){t.currentPage=0,s(e,n)})};t.getNextPage=s,a.loadPage("UserActivity",l,t,function(){a.setPageTitle("user-activity",[t.user.fullName])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.UserAppsController=e._module.controller("Apiman.UserAppsController",["$q","$scope","$location","UserSvcs","PageLifecycle","Logger","$routeParams",function(e,t,n,i,r,a,o){t.tab="applications",t.filterApps=function(e){if(e){var n=[];angular.forEach(t.applications,function(t){(t.name.toLowerCase().indexOf(e.toLowerCase())>-1||t.organizationName.toLowerCase().indexOf(e.toLowerCase())>-1)&&n.push(t)}),t.filteredApps=n}else t.filteredApps=t.applications};var s={user:e(function(e,t){i.get({user:o.user},function(t){t.fullName||(t.fullName=t.username),e(t)},t)}),applications:e(function(e,n){i.query({user:o.user,entityType:"applications"},function(n){t.filteredApps=n,e(n)},n)})};r.loadPage("UserApps",s,t,function(){r.setPageTitle("user-apps",[t.user.fullName])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.UserOrgsController=e._module.controller("Apiman.UserOrgsController",["$q","$scope","$location","UserSvcs","PageLifecycle","$routeParams",function(e,t,n,i,r,a){t.tab="organizations",t.filterOrgs=function(e){if(e){var n=[];angular.forEach(t.organizations,function(t){t.name.toLowerCase().indexOf(e.toLowerCase())>-1&&n.push(t)}),t.filteredOrgs=n}else t.filteredOrgs=t.organizations};var o={user:e(function(e,t){i.get({user:a.user},function(t){t.fullName||(t.fullName=t.username),e(t)},t)}),organizations:e(function(e,n){i.query({user:a.user,entityType:"organizations"},function(n){t.filteredOrgs=n,e(n)},n)})};r.loadPage("UserOrgs",o,t,function(){r.setPageTitle("user-orgs",[t.user.fullName])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.UserServicesController=e._module.controller("Apiman.UserServicesController",["$q","$scope","$location","UserSvcs","PageLifecycle","$routeParams",function(e,t,n,i,r,a){t.tab="services",t.filterServices=function(e){if(e){var n=[];angular.forEach(t.services,function(t){(t.name.toLowerCase().indexOf(e.toLowerCase())>-1||t.organizationName.toLowerCase().indexOf(e.toLowerCase())>-1)&&n.push(t)}),t.filteredServices=n}else t.filteredServices=t.services};var o={user:e(function(e,t){i.get({user:a.user},function(t){t.fullName||(t.fullName=t.username),e(t)},t)}),services:e(function(e,n){i.query({user:a.user,entityType:"services"},function(n){t.filteredServices=n,e(n)},n)})};r.loadPage("UserServices",o,t,function(){r.setPageTitle("user-services",[t.user.fullName])})}])}(Apiman||(Apiman={}));var Apiman;!function(e){e.UserRedirectController=e._module.controller("Apiman.UserRedirectController",["$q","$scope","$location","PageLifecycle","$routeParams",function(e,t,n,i,r){i.loadPage("UserRedirect",void 0,t,function(){i.forwardTo("/users/{0}/orgs",r.user)})}])}(Apiman||(Apiman={})),angular.module("apiman-manager-templates",[]).run(["$templateCache",function(e){e.put("plugins/api-manager/html/about.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.AboutController" class="page container apiman-about-page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <div class="col-md-12">\n          <h2 apiman-i18n-key="about.page-heading">About apiman</h2>\n          <hr />\n        </div>\n        <div class="col-md-3">\n          <div class="about-logo"></div>\n        </div>\n        <div class="col-md-9">\n          <h1 class="about-title" apiman-i18n-key="about.page-title">Open Source API Management</h1>\n          <span class="about-description" apiman-i18n-key="about.page-description">\n            The apiman project brings an open source development methodology to API Management, \n            coupling a rich API design & configuration layer with a blazingly fast runtime.\n          </span>\n          <hr />\n          <table class="table table-bordered">\n            <tbody>\n              <tr>\n                <td width="1%" nowrap="nowrap"><span class="about-label" apiman-i18n-key="about.version">Version:</span></td>\n                <td>{{ version }}</td>\n              </tr>\n              <tr>\n                <td width="1%" nowrap="nowrap"><span class="about-label" apiman-i18n-key="about.built-on">Built On:</span></td>\n                <td>{{ builtOn }}</td>\n              </tr>\n              <tr>\n                <td width="1%" nowrap="nowrap"><span class="about-label" apiman-i18n-key="about.api-endpoint">API Endpoint:</span></td>\n                <td><a href="{{ apiEndpoint }}">{{ apiEndpoint }}</a></td>\n              </tr>\n            </tbody>\n          </table>\n          <table class="table table-bordered">\n            <tbody>\n              <tr>\n                <td width="1%" nowrap="nowrap"><span class="about-label" apiman-i18n-key="about.project-site">Project Site:</span></td>\n                <td><a href="{{ site }}">{{ site }}</a></td>\n              </tr>\n              <tr>\n                <td width="1%" nowrap="nowrap"><span class="about-label" apiman-i18n-key="about.source-code">Source Code:</span></td>\n                <td><a href="{{ github }}">{{ github }}</a></td>\n              </tr>\n              <tr>\n                <td width="1%" nowrap="nowrap"><span class="about-label" apiman-i18n-key="about.user-guide">User Guide:</span></td>\n                <td><a href="{{ userGuide }}">{{ userGuide }}</a></td>\n              </tr>\n              <tr>\n                <td width="1%" nowrap="nowrap"><span class="about-label" apiman-i18n-key="about.tutorials">Tutorials:</span></td>\n                <td><a href="{{ tutorials }}">{{ tutorials }}</a></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),
e.put("plugins/api-manager/html/dash.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.DashController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <div class="col-md-12">\n          <h1 apiman-i18n-key="dash.page-heading">API Management</h1>\n          <hr />\n        </div>\n        <div class="col-md-12 no-phone">\n          <span class="description" apiman-i18n-key="dash.page-description">\n            Welcome to apiman, open source API management.  Use this software to provide\n            various APIs (Services) to your users (Applications) through a secure, scalable,\n            and governed Gateway layer.  API Management allows Service Developers to centralize\n            control and analysis of their Services.  It also provides a central location for\n            Application Developers to find and consume available APIs.\n          </span>\n          <hr />\n        </div>\n      </div>\n      <div class="row">\n        <div class="col-md-12">\n        \n          <div class="dash-group">\n            <div class="title">\n              <i class="fa fa-shield"></i>\n              <span apiman-i18n-key="organizations">Organizations</span>\n            </div>\n            <div class="description" apiman-i18n-key="dash.orgs-description">\n              All services and applications must be managed within the context of an \n              Organization.  You can be a member of multiple Organizations at the same\n              time, with different roles in each:  you can be an Application\n              Developer in one organization and a Service Developer in another.\n            </div>\n            <div class="actions">\n              <ul>\n                <li><a id="org-new" href="{{ pluginName }}/new-org" apiman-i18n-key="actions.create-new-org" data-field="createOrg">Create a New Organization</a></li>\n                <li><a id="org-browse" href="{{ pluginName }}/browse/orgs" apiman-i18n-key="actions.browse-orgs" data-field="browseOrgs">Browse/Find an Organization</a></li>\n                <li><a id="org-my-orgs" href="{{ pluginName }}/users/{{ currentUser.username }}/orgs" apiman-i18n-key="actions.my-orgs" data-field="myOrgs">Go to My Organizations</a></li>\n              </ul>\n            </div>\n          </div>\n          \n          <div class="dash-group pull-right">\n            <div class="title">\n              <i class="fa fa-puzzle-piece"></i>\n              <span apiman-i18n-key="services">Services</span>\n            </div>\n            <div class="description" apiman-i18n-key="dash.services-description">\n              Create, find, or manage Services.  A Service is also known as an API - anything\n              that can be invoked remotely by some sort of client (Application).  This platform\n              simply provides a way to expose existing APIs by defining them as Services and\n              attaching value-added policies to them.\n            </div>\n            <div class="actions">\n              <ul>\n                <li><a id="services-consume" href="{{ pluginName }}/browse/services" apiman-i18n-key="actions.find-service" data-field="browseServices">Find/Consume a Service</a></li>\n                <li><a id="services-manage" href="{{ pluginName }}/users/{{ currentUser.username }}/services" apiman-i18n-key="actions.my-services" data-field="myServices">Manage My Services</a></li>\n                <li><a id="service-new" href="{{ pluginName }}/new-service" apiman-i18n-key="actions.create-service" data-field="createService">Create a New Service</a></li>\n              </ul>\n            </div>\n          </div>\n\n          <div class="dash-group">\n            <div class="title">\n              <i class="fa fa-gears"></i>\n              <span apiman-i18n-key="applications">Applications</span>\n            </div>\n            <div class="description" apiman-i18n-key="dash.applications-description">\n              Create and manage your Applications.  An Application is the thing that consumes\n              APIs (Services).  These consumers must be defined in this platform so that \n              contracts can be created between them and the Services they wish to consume.\n            </div>\n            <div class="actions">\n              <ul>\n                <li><a id="apps-manage" href="{{ pluginName }}/users/{{ currentUser.username }}/apps" apiman-i18n-key="actions.my-apps" data-field="myApps">Manage My Applications</a></li>\n                <li><a id="apps-new" href="{{ pluginName }}/new-app" apiman-i18n-key="actions.new-app" data-field="createApp">Create a New Application</a></li>\n              </ul>\n            </div>\n          </div>\n\n          <div class="dash-group dash-admin-group pull-right" data-field="adminDashPanel" ng-show="isAdmin">\n            <div class="title">\n              <i class="fa fa-gavel"></i>\n              <span apiman-i18n-key="system-administration">System Administration</span>\n            </div>\n            <div class="description" apiman-i18n-key="dash.system-description">\n              Hey it looks like you\'re an administrator!  Here are some things only you can do.\n              These are system-wide settings you\'re thinking about modifying, so please proceed\n              with caution.\n            </div>\n            <div class="actions">\n              <ul>\n                <li><a id="admin-roles" href="{{ pluginName }}/admin/roles" apiman-i18n-key="actions.manage-roles" data-field="manageRoles">Manage Roles/Permissions</a></li>\n                <li><a id="admin-policyDefs" href="{{ pluginName }}/admin/policyDefs" apiman-i18n-key="actions.manage-policyDefs" data-field="managePolicyDefs">Manage Policy Definitions</a></li>\n                <li><a id="admin-gateways" href="{{ pluginName }}/admin/gateways" apiman-i18n-key="actions.manage-gateways" data-field="manageGateways">Manage Gateways</a></li>\n                <li><a id="admin-plugins" href="{{ pluginName }}/admin/plugins" apiman-i18n-key="actions.manage-plugins" data-field="managePlugins">Manage Plugins</a></li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/profile.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.UserProfileController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <div class="col-md-12">\n          <h1><i class="fa fa-user fa-fw"></i> <span apiman-i18n-key="user-profile">User Profile</span></h1>\n          <hr />\n        </div>\n      </div>\n      <div class="row apiman-settings">\n        <div class="col-md-6">\n          <div class="settings-detail">\n            <form role="form">\n              <div class="form-group">\n                <label apiman-i18n-key="profile.username" for="usernameInput">Username</label>\n                <input ng-model="user.username" type="text" class="apiman-form-control form-control" id="apiman-username" disabled="disabled">\n              </div>\n              <div class="form-group">\n                <label apiman-i18n-key="profile.full-name" for="nameInput">Full Name</label>\n                <input ng-model="updatedUser.fullName" type="text" class="apiman-form-control form-control" id="apiman-name" apiman-i18n-key="profile.enter-full-name" placeholder="Enter your full name...">\n              </div>\n              <div class="form-group">\n                <label apiman-i18n-key="profile.email" for="emailInput">Email</label>\n                <input ng-model="updatedUser.email" type="email" class="apiman-form-control form-control" id="apiman-email" apiman-i18n-key="profile.enter-email" placeholder="Email address...">\n              </div>\n              <button id="update-profile" ng-disabled="!isDirty || !isValid" apiman-action-btn="" class="btn btn-primary" data-field="updateButton" apiman-i18n-key="update-profile" placeholder="Updating..." data-icon="fa-cog" ng-click="save()">Update Profile</button>\n              <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" apiman-i18n-key="cancel">Cancel</a>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div> <!-- /container -->\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/app/apiModal.html",'<div class="modal fade" id="apiModal" tabindex="-1" role="dialog" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button data-dismiss="modal" aria-hidden="true" class="close" type="button">\n          <span class="pficon pficon-close"></span>\n        </button>\n        <h4 class="modal-title" id="apiCopyModalLabel">\n          <span apiman-i18n-key="modal-title">Copy API Endpoint</span>\n        </h4>\n      </div>\n      <div class="modal-body">\n        <p class="explanation" apiman-i18n-key="api-dialog-explanation">To successfully invoke the managed service for this service contract, you must provide the appropriate API Key with each request. The API Key can be provided either by sending it as an HTTP Request Header named X-API-Key, or you can send it as a URL query parameter.</p>\n        <hr style="margin-left: -25px; margin-right: -25px">\n        <div class="apiman-form-label" apiman-i18n-key="as-query-param">As Query Parameter</div>\n        <textarea readonly style="width: 100%">{{ asQueryParam }}</textarea>\n        <p apiman-i18n-skip>&nbsp;</p>\n        <div class="apiman-form-label" apiman-i18n-key="as-request-header">As HTTP Request Header</div>\n        <textarea readonly style="width: 100%">{{ asRequestHeader }}</textarea>\n      </div>\n      <div class="modal-footer">\n        <button data-dismiss="modal" apiman-i18n-key="done" class="btn btn-default" type="button">Done</button>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/api-manager/html/app/app-activity.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.AppActivityController" class="container page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/app/app_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/app/app_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/app/app_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content apiman-entity-overview">\n          <!-- Title and help text -->\n          <div class="title" apiman-i18n-key="app-activity">Application Activity</div>\n          <div class="description" apiman-i18n-key="app-activity-help">The list below is all of the activity (configuration changes made by apiman users) associated with this Application.</div>\n          <hr />\n          <apiman-activity model="auditEntries" next="getNextPage"/>\n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/app/app-apis.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.AppApisController" class="container page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/app/app_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/app/app_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/app/app_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content apiman-entity-overview">\n          <div class="col-md-11">\n            <!-- Title and help text -->\n            <div class="title" apiman-i18n-key="application-apis">Application APIs</div>\n            <div class="description" apiman-i18n-key="apis-help">Below is a list of all the APIs this application consumes.  This information is derived from the set of Service Contracts the Application has entered into.  Manage these Contracts by switching to the "Contracts" tab.</div>\n            <hr />\n            <!-- The list of apis (filterable) -->\n            <div>\n              <div class="clearfix"></div>\n              <div class="actions">\n                <a href="{{ downloadAsJson }}" class="btn btn-default" target="_self" apiman-i18n-key="download-as-json">Download as JSON</a>\n                <a href="{{ downloadAsXml }}" class="btn btn-default" target="_self" apiman-i18n-key="download-as-xml">Download as XML</a>\n              </div>\n              <div class="clearfix"></div>\n              <!-- The list of apis -->\n              <div class="table-responsive">\n                <table class="table table-striped table-bordered table-hover table-with-details" data-field="apis">\n                  <thead>\n                    <tr>\n                      <th nowrap="nowrap" width="1%"></th>\n                      <th apiman-i18n-key="service" nowrap="nowrap">Service</th>\n                      <th apiman-i18n-key="version" width="1%" nowrap="nowrap">Version</th>\n                      <th apiman-i18n-key="plan" nowrap="nowrap">Plan</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr ng-repeat-start="api in apiRegistry.apis">\n                      <td><a ng-click="toggle(api)" href="javascript:return false;"><i class="fa fa-fw {{ api.expanded ? \'fa-chevron-down\' : \'fa-chevron-right\' }}"></i></a></td>\n                      <td>\n                        <span><a href="{{ pluginName }}/browse/orgs/{{ api.serviceOrgId }}">{{ api.serviceOrgName }}</a>\n                        <span apiman-i18n-skip>/</span>\n                        <a href="{{ pluginName }}/browse/orgs/{{ api.serviceOrgId }}/{{ api.serviceName }}/{{ api.serviceVersion }}"><span class="emphasis">{{ api.serviceName }}</span></a></span>\n                      </td>\n                      <td><span>{{ api.serviceVersion }}</span></td>\n                      <td>{{ api.planName }}</td>\n                    </tr>\n                    <tr ng-repeat-end ng-show="api.expanded">\n                      <td colspan="4">\n                        <form role="form">\n                          <div class="form-group">\n                            <label apiman-i18n-key="api-key">API Key</label>\n                            <input readonly type="text" class="apiman-form-control form-control readonly apiman-readonly" value="{{ api.apiKey }}">\n                          </div>\n                          <div class="form-group">\n                            <div>\n                              <button title="Click for details on how to invoke this managed service." data-field="detailsButton" class="btn btn-default" apiman-i18n-key="how-to-invoke" ng-click="howToInvoke(api)">How to invoke...</button>\n                            </div>\n                          </div>\n                        </form>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            <!-- /Contract List -->\n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/app/app-contracts.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.AppContractsController" class="container page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/app/app_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/app/app_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/app/app_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content apiman-entity-overview">\n          <div class="col-md-9">\n            <!-- Title and help text -->\n            <div class="title" apiman-i18n-key="service-contracts">Service Contracts</div>\n            <div class="description" apiman-i18n-key="contracts-help">Here is a list of all Services that this Application is currently contracted to utilize.  This provides a list of all Services that Application can potentially invoke.</div>\n            <hr />\n            <!-- The list of contracts (filterable) -->\n            <div>\n              <div class="apiman-filters apiman-contracts-filters">\n                <div>\n                  <apiman-search-box id="contracts-filter" apiman-i18n-key="filter-app-contracts" function="filterContracts" placeholder="Filter by org or service name..." />\n                </div>\n                <a apiman-permission="appEdit" apiman-status="Created,Ready" data-field="toNewContract" apiman-i18n-key="new-contract" href="{{ pluginName }}/new-contract" class="btn btn-primary pull-right">New Contract</a>\n                <button ng-click="breakAll()" apiman-action-btn="" ng-disabled="!contracts.length" apiman-permission="appEdit" apiman-status="Created,Ready" data-field="breakAllContracts" apiman-i18n-key="break-all-contracts" placeholder="Breaking..." data-icon="fa-cog" class="btn btn-default pull-right">Break All</button>\n              </div>\n              <div class="clearfix"></div>\n              <!-- The list of contracts -->\n              <div class="apiman-contracts" data-field="contracts" ng-repeat="contract in filteredContracts">\n                <div class="container-fluid apiman-summaryrow">\n                  <div class="row">\n                    <div class="col-md-10 col-no-padding">\n                      <a href="{{ pluginName }}/browse/orgs/{{ contract.serviceOrganizationId }}">{{ contract.serviceOrganizationName }}</a> / <span class="title"><a href="{{ pluginName }}/browse/orgs/{{ contract.serviceOrganizationId }}/{{ contract.serviceId }}/{{ contract.serviceVersion }}">{{ contract.serviceName }}</a></span>\n                      <div class="versionAndPlan">\n                        <span apiman-i18n-key="app-contract.detail.service-version">Service version</span>\n                        <span><a href="{{ pluginName }}/browse/orgs/{{ contract.serviceOrganizationId }}/{{ contract.serviceId }}/{{ contract.serviceVersion }}">{{ contract.serviceVersion }}</a></span>\n                        <span apiman-i18n-key="app-contract.detail.via-plan">via plan</span>\n                        <span><a>{{ contract.planName }}</a></span>\n                        <span apiman-i18n-key="app-contract.detail.entered-into">entered into on</span>\n                        <i class="fa fa-clock-o fa-fw fa-inline"></i>\n                        <span>{{ contract.createdOn | date: \'yyyy-MM-dd\' }}</span>\n                      </div>\n                      <div class="description apiman-label-faded">\n                        {{ contract.serviceDescription }}\n                      </div>\n                    </div>\n                    <div class="col-md-2 col-no-padding">\n                      <span class="actions"><button apiman-i18n-key="break-contract" apiman-status="Created,Ready" apiman-permission="appEdit" ng-click="break(contract)" class="btn btn-default">Break Contract</button></span>\n                    </div>\n                  </div>\n                  <hr />\n                </div>\n              </div>\n              \n              <div class="apiman-no-content container-fluid" ng-show="filteredContracts.length == 0">\n                <p class="apiman-no-entities-description" apiman-i18n-key="no-app-service-contracts.message">This application doesn\'t appear to have any service contracts (or perhaps none that match your filter above).  Try creating a new Contract to a Service - if you do it will get listed here!</p>\n              </div>              \n              \n            </div>\n          </div>\n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/app/app-overview.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.AppOverviewController" class="container page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/app/app_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/app/app_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/app/app_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content apiman-entity-overview">\n          <!-- Content Summary -->\n          <div class="col-md-12">\n            <h1 apiman-i18n-key="app-details">Application Details</h1>\n            <p apiman-i18n-key="app-overview.app-description">\n              This is the application details page.  Use this page to modify the Application\'s meta-data,\n              policies, and contracts.  There is no need to follow the tabs in order, but note that\n              you will need to fill out a minimum amount of data before the Application can be registered\n              with the Gateway.  In particular, the Application must have at least one Service Contract\n              (see the "Contracts" tab).\n            </p>\n            \n            <h2 apiman-i18n-key="contracts">Contracts</h2>\n            <p apiman-i18n-key="app-overview.contracts-description">\n              The \'Contracts\' tab is where you can manage all of the Service Contracts for this \n              Application.  A Service Contract is simply a link between this Application and a provided\n              Service the the Application consumes.\n            </p>\n\n            <h2 apiman-i18n-key="policies">Policies</h2>\n            <p apiman-i18n-key="app-overview.policies-description">\n              The \'Policies\' tab allows you to manage the Application-level policies that should\n              be applied whenever a request is made to any Service consumed by this Application.\n            </p>\n\n            <h2 apiman-i18n-key="apis" apiman-status="Registered">APIs</h2>\n            <p apiman-i18n-key="app-overview.apis-description" apiman-status="Registered">\n              The \'APIs\' tab lists all of the Services consumed by this Application, including \n              showing the API Key and live endpoint for each.  Go here if you want to figure out\n              how to invoke a Service once you have a Contract for it.\n            </p>\n\n            <h2 apiman-i18n-key="activity">Activity</h2>\n            <p apiman-i18n-key="app-overview.activity-description">\n              The \'Activity\' tab shows a history of all the changes made to the Application.  Essentially\n              it is an audit log.\n            </p>\n          </div>\n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/app/app-policies.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.AppPoliciesController" class="container page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/app/app_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/app/app_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/app/app_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content">\n          <div class="col-md-9">\n            <!-- Title and help text -->\n            <div class="title" apiman-i18n-key="app-policies">Application Policies</div>\n            <div class="description" apiman-i18n-key="app-policies-help">Here is a list of all Policies defined for this Application.  These Policies will be applied to all Service invocations made by the Application, in addition to whatever Policies are defined by the Service itself.</div>\n            <hr />\n            <!-- The list of policies -->\n            <div apiman-permission="appEdit" apiman-status="Created,Ready" class="apiman-filters apiman-policies-filters">\n              <a apiman-i18n-key="add-policy" href="{{ pluginName }}/orgs/{{ org.id }}/apps/{{ app.id }}/{{ version.version }}/new-policy" class="btn btn-primary pull-right">Add Policy</a>\n            </div>\n            <div class="clearfix"></div>\n            <div class="apiman-policies" data-field="policies">\n\n              <div class="apiman-no-content container-fluid" ng-hide="policies.length > 0">\n                <div class="row">\n                  <div class="col-md-9">\n                    <p class="apiman-no-entities-description" apiman-i18n-key="no-policies-for-app">It looks like there aren\'t any policies defined! That may be exactly what you want (of course) but if not, you may try defining one using the Add Policy button above...</p>\n                  </div>\n                  <div apiman-permission="svcEdit" apiman-status="Created,Ready" class="col-md-3">\n                    <div class="apiman-no-entities-arrow"></div>\n                  </div>\n                </div>\n              </div>\n              <div class="clearfix"></div>\n              <apiman-policy-list ng-model="policies" remove-function="removePolicy" reorder-function="reorderPolicies" type="applications" org-id="{{ org.id }}" page-id="{{ app.id }}" version="{{ version.version }}"></policy-list>\n            </div>\n          </div>\n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/app/app.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.AppRedirectController" class="container page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/admin/admin-gateways.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.AdminGatewaysController" class="page container admin-page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <div class="col-md-12">\n          <div ng-include="\'plugins/api-manager/html/admin/admin_bc.include\'"></div>\n        </div>\n      </div>\n      <div class="row">\n        <!-- Side Navigation -->\n        <div class="col-md-3">\n          <div ng-include="\'plugins/api-manager/html/admin/admin_tabs.include\'"></div>\n        </div>\n        <!-- Admin Content -->\n        <div class="col-md-9 admin-content">\n          <div class="container-fluid">\n            <div class="row">\n              <h2 class="title" data-field="heading" apiman-i18n-key="gateways">Gateways</h2>\n            </div>\n            <!-- Helpful hint -->\n            <div class="row">\n              <p class="col-md-10 apiman-label-faded" apiman-i18n-key="gateways-help-text" class="apiman-label-faded">Configure the gateways on which the services may be published.  If no gateways are configured, then users will not be able to publish their services!</p>\n            </div>\n            <!-- HR -->\n            <div class="row hr-row">\n              <hr/>\n            </div>\n            <!-- Filter and Actions -->\n            <div class="row">\n              <div class="apiman-filters apiman-gateways-filters">\n                <a apiman-i18n-key="new-gateway" data-field="toNewGateway" href="{{pluginName }}/new-gateway" class="btn btn-primary pull-right">New Gateway</a>\n              </div>\n            </div>\n            <!-- Table of Gateways -->\n            <div class="row">\n              <div class="table-responsive">\n                <table class="table table-striped table-bordered table-hover" data-field="gateways">\n                  <thead>\n                    <tr>\n                      <th apiman-i18n-key="name">Name</th>\n                      <th apiman-i18n-key="type">Configuration Type</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr ng-hide="gateways.length > 0">\n                      <td colspan="2">\n                        <div class="apiman-no-content">\n                          <p class="apiman-no-entities-description" apiman-i18n-key="no-gateways-found">No gateways have been added! Try adding a Gateway by clicking \'New Gateway\' above - you\'ll need at least one, otherwise users will not be able to publish their Services.</p>\n                        </div>\n                      </td>\n                    </tr>\n                    <tr ng-repeat="gateway in gateways">\n                      <td><a href="{{ pluginName}}/admin/gateways/{{ gateway.id }}"><span>{{ gateway.name}}</span></a></td>\n                      <td>{{ gateway.type}}</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  </body>\n</html>\n'),
e.put("plugins/api-manager/html/admin/admin-plugins.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.AdminPluginsController" class="page container admin-page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <div class="col-md-12">\n          <div ng-include="\'plugins/api-manager/html/admin/admin_bc.include\'"></div>\n        </div>\n      </div>\n      <div class="row">\n        <!-- Side Navigation -->\n        <div class="col-md-3">\n          <div ng-include="\'plugins/api-manager/html/admin/admin_tabs.include\'"></div>\n        </div>\n        <!-- Admin Content -->\n        <div class="col-md-9 admin-content">\n          <div class="container-fluid">\n            <div class="row">\n              <h2 class="title" data-field="heading" apiman-i18n-key="plugins">Plugins</h2>\n            </div>\n            <!-- Helpful hint -->\n            <div class="row">\n              <p class="col-md-10 apiman-label-faded" apiman-i18n-key="plugins-help-text" class="apiman-label-faded">Manage the plugins known to this installation of apiman.  Plugins allow additional functionality to be included in the system after it has been installed and configured.</p>\n            </div>\n            <!-- HR -->\n            <div class="row hr-row">\n              <hr/>\n            </div>\n            <!-- Filter and Actions -->\n            <div class="row">\n              <div class="apiman-filters apiman-plugins-filters">\n                <a apiman-i18n-key="add-plugin" data-field="toNewPlugin" href="{{ pluginName }}/new-plugin" class="btn btn-primary pull-right">Add Plugin</a>\n              </div>\n            </div>\n            <!-- Table of Plugins -->\n            <div class="row">\n              <div class="table-responsive">\n                <table class="table table-striped table-bordered table-hover" data-field="plugins">\n                  <thead>\n                    <tr>\n                      <th apiman-i18n-key="name">Name</th>\n                      <th apiman-i18n-key="coordinates">Coordinates</th>\n                    </tr>\n                  </thead>\n                  <tbody >\n                    <tr ng-hide="plugins.length > 0">\n                      <td colspan="2">\n                        <div class="apiman-no-content container-fluid">\n                          <div class="row">\n                            <div class="col-md-12">\n                              <p class="apiman-no-entities-description" apiman-i18n-key="no-plugins-found">No plugins have been added! Try adding some plugins by clicking Add Plugin above.</p>\n                            </div>\n                          </div>\n                        </div>\n                      </td>\n                    </tr>\n                    <tr ng-repeat="plugin in plugins">\n                      <td>{{ plugin.name }}</td>\n                      <td><a href="{{ pluginName }}/admin/plugins/{{ plugin.id }}"><span>{{ plugin.groupId }}:{{ plugin.artifactId }}:{{ plugin.version}}:{{ plugin.type }}</span></a></td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/admin/admin-policyDefs.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.AdminPolicyDefsController" class="page container admin-page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <div class="col-md-12">\n          <div ng-include="\'plugins/api-manager/html/admin/admin_bc.include\'"></div>\n        </div>\n      </div>\n      <div class="row">\n        <!-- Side Navigation -->\n        <div class="col-md-3">\n          <div ng-include="\'plugins/api-manager/html/admin/admin_tabs.include\'"></div>\n        </div>\n        <!-- Admin Content -->\n        <div class="col-md-9 admin-content">\n          <div class="container-fluid">\n            <div class="row">\n              <h2 class="title" data-field="heading" apiman-i18n-key="policy-definitions">Policy Definitions</h2>\n            </div>\n            <!-- Helpful hint -->\n            <div class="row">\n              <p class="col-md-10 apiman-label-faded" apiman-i18n-key="policy-definitions-help-text" class="apiman-label-faded">Configure the available policy definitions.  These will be the policies made available to users when configuring applications, services, and plans.</p>\n            </div>\n            <!-- HR -->\n            <div class="row hr-row">\n              <hr/>\n            </div>\n            <!-- Filter and Actions -->\n            <div class="row">\n              <div class="apiman-filters apiman-policyDefs-filters">\n                <div>\n                  <apiman-search-box id="policy-name-filter" apiman-i18n-key="filter-policies" function="filterPolicies" placeholder="Filter by policy name..." />\n                </div>\n                </table>\n                <a apiman-i18n-key="import-policy" href="{{ pluginName }}/import-policyDefs" class="btn btn-primary pull-right">Import Policy</a>\n              </div>\n            </div>\n            <!-- Table of Policy Definitions -->\n            <div class="row">\n\n              <div ng-hide="policyDefs.length > 0">\n                <div class="apiman-no-content container-fluid">\n                  <div class="row">\n                    <div class="col-md-12">\n                      <p class="apiman-no-entities-description" apiman-i18n-key="no-policy-defs-found">No policy definitions have been added!  Without at least one policy definition users will not be able to add policies to their Services, Plans, and Applications.</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div ng-show="policyDefs.length > 0 && filteredPolicyDefs.length == 0">\n                <div class="apiman-no-content container-fluid">\n                  <div class="row">\n                    <div class="col-md-12">\n                      <p class="apiman-no-entities-description" apiman-i18n-key="no-policy-defs-for-filter">No policy definitions matched your filter criteria.  Try something different!</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class="apiman-summaryrow" ng-repeat="policyDef in filteredPolicyDefs">\n                <a href="{{ pluginName }}/admin/policyDefs/{{policyDef.id}}"><i style="font-size: 18px; margin-top: 2px" class="fa fa-{{ policyDef.icon}} fa-fw"></i><span>{{ policyDef.name }}</span></a>\n                <div style="padding-left: 24px">\n	                <div class="description apiman-label-faded">{{ policyDef.description}}</div>\n	                <div>\n	                  <div class="emphasis" apiman-i18n-key="implementation">Implementation:</div>\n	                  <div>{{ policyDef.policyImpl}}</div>\n	                </div>\n                </div>\n                <hr/>\n              </div>\n              \n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/admin/admin-roles.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.AdminRolesController" class="page container admin-page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <div class="col-md-12">\n          <div ng-include="\'plugins/api-manager/html/admin/admin_bc.include\'"></div>\n        </div>\n      </div>\n      <div class="row">\n        <!-- Side Navigation -->\n        <div class="col-md-3">\n          <div ng-include="\'plugins/api-manager/html/admin/admin_tabs.include\'"></div>\n        </div>\n        <!-- Admin Content -->\n        <div class="col-md-9 admin-content">\n          <div class="container-fluid">\n            <div class="row">\n              <h2 class="title" apiman-i18n-key="role-management" apiman-i18n-key="role-management">Role Management</h2>\n            </div>\n            <!-- Helpful hint -->\n            <div class="row">\n              <p class="col-md-10 apiman-label-faded" apiman-i18n-key="role-management-help-text" class="apiman-label-faded">Create and modify roles that users can be granted membership in for any organization.  Each role grants the user a set of permissions, allowing her to do specific things within the organization.</p>\n            </div>\n            <!-- HR -->\n            <div class="row hr-row">\n              <hr/>\n            </div>\n            <!-- Filter and Actions -->\n            <div class="row">\n              <div class="apiman-filters apiman-roles-filters">\n                <div>\n                  <apiman-search-box id="role-name-filter" apiman-i18n-key="filter-roles" function="filterRoles" placeholder="Filter by role name..." />\n                </div>\n                <a apiman-i18n-key="new-role" href="{{ pluginName }}/new-role" class="btn btn-primary pull-right">New Role</a>\n              </div>\n            </div>\n            <!-- The Roles -->\n            <div class="row">\n              <div class="apiman-roles">\n\n                  <div class="apiman-no-content container-fluid" ng-hide="roles.length > 0">\n                    <div class="row">\n                      <div class="col-md-8">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-roles-found">No roles have been created.  Until at least one "auto-grant" role is created, users will not be able to use apiman.</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="apiman-no-content container-fluid" ng-show="roles.length > 0 && filteredRoles.length == 0">\n                    <div class="row">\n                      <div class="col-md-12">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-roles-found-for-filter">No roles found matching your filter criteria - please try searching for something different.</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="container-fluid apiman-summaryrow" ng-repeat="role in filteredRoles">\n                    <div class="row">\n                      <span class="title"><a href="{{ pluginName }}/admin/roles/{{ role.id }}">{{ role.name }}</a></span>\n                      \n                      <a ng-show="role.autoGrant" class="apiman-summaryrow-icon">\n                        <i class="fa fa-check fa-fw"></i>\n                        <span class="title-summary-item" apiman-i18n-key="auto-grant-to-creator">Auto-granted to org creator</span>\n                      </a>\n                    </div>\n                    <div class="row" style="margin-bottom: 8px;">\n                      <span class="description apiman-label-faded">\n                        {{ role.description }}\n                      </span>\n                    </div>\n                    <div class="row">\n                      <div class="permissions">\n                        <span class="emphasis" apiman-i18n-key="grants-permissions">Grants Permissions:</span>\n                        <span class="description" ng-repeat="permission in role.permissions">\n                        	{{ permission }}{{$last ? \'\' : \', \'}}\n                        </span>\n                      </div>\n                    </div>\n                    <hr/>\n                  </div>\n                </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/consumer/consumer-org.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.ConsumerOrgController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <div class="col-md-12">\n          <ol class="breadcrumb" data-field="breadcrumb">\n            <li><a id="bc-home" href="{{ pluginName }}/dash"><i class="fa fa-home fa-fw"></i><span apiman-i18n-key="home">Home</span></a></li>\n            <li><a id="bc-orgs" href="{{ pluginName }}/browse/orgs"><i class="fa fa-search fa-fw"></i><span apiman-i18n-key="organizations">Organizations</span></a></li>\n            <li class="active"><span><i class="fa fa-shield fa-fw"></i><span>{{ org.name }}</span></span></li>\n          </ol>\n        </div>\n      </div>\n      <div class="row">\n        <div class="col-md-12">\n          <h1 class="consumer-top-header" apiman-i18n-key="organization-details">Organization Details</h1>\n        </div>\n        <div class="col-md-12">\n          <div class="vspacer-10" />\n        </div>\n      </div>\n      \n      <div class="row">\n\n        <!-- Left column -->\n        <div class="col-md-4 browse-items">\n          <div class="item" style="width: 100%; margin-bottom: 20px;" data-field="organizationCard">\n            <div class="title"><i class="fa fa-shield icon"></i><span data-field="title">{{ org.name }}</span></div>\n            <div class="description" data-field="description">{{ org.description }}</div>\n            <div class="actions" style="display:none">\n              <button class="btn btn-default" style="display:none" data-field="requestMembership" apiman-i18n-key="request-membership">Request Membership</button>\n            </div>\n            <a ng-show="org.isMember" class="ismember" title="You are already a member of this Organization." href="{{ pluginName }}/orgs/{{ org.id }}" data-field="isMemberLink" apiman-i18n-key="is-member"></a>\n          </div>\n          \n          <div class="consumer-section">\n            <h3 apiman-i18n-key="current-members" class="consumer-header">Current Members</h3>\n            <div class="apiman-members" data-field="members">\n              <div class="container-fluid apiman-summaryrow" ng-repeat="member in members">\n                <div class="row">\n                  <span class="title">\n                    <i class="fa fa-fw fa-user icon"></i>\n                    <a href="{{ pluginName }}/users/{{ member.userId }}/orgs">{{ member.userName }}</a>\n                    <span class="secondary">({{ member.userId }})</span>\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <!-- Right column -->\n        <div class="col-md-8">\n          <div class="consumer-section">\n            <h3 apiman-i18n-key="services-offered" class="consumer-header">Services Offered</h3>\n            <div class="apiman-filters apiman-services-filters">\n              <apiman-search-box id="service-filter" apiman-i18n-key="filter-consumer-services" function="filterServices" placeholder="Filter by service name..." />\n            </div>\n            <div class="apiman-services consumer-section" data-field="services">\n\n              <div class="apiman-no-content" ng-hide="services.length > 0">\n                <p class="apiman-no-entities-description" apiman-i18n-key="consumer-no-services-found-for-org">No services are currently offered by this organization.</p>\n              </div>\n\n              <div class="apiman-no-content" ng-show="services.length > 0 && filteredServices.length == 0">\n                <p class="apiman-no-entities-description" apiman-i18n-key="consumer-no-services-found-for-filter">No services matched the current filter criteria.</p>\n              </div>\n\n              <div class="container-fluid apiman-summaryrow" ng-repeat="service in filteredServices">\n                <div class="row">\n                  <i class="fa fa-fw fa-puzzle-piece icon"></i>\n                  <span class="title"><a href="{{ pluginName }}/browse/orgs/{{ org.id }}/{{ service.id }}">{{ service.name }}</a></span>\n                </div>\n                <div class="row">\n                  <span class="description">\n                    {{ service.description }}\n                  </span>\n                </div>\n                <hr/>\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/consumer/consumer-orgs.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.ConsumerOrgsController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <div class="col-md-12">\n          <ol class="breadcrumb" data-field="breadcrumb">\n            <li><a id="bc-home" href="{{ pluginName }}/dash"><i class="fa fa-home fa-fw"></i><span apiman-i18n-key="home">Home</span></a></li>\n            <li class="active"><i class="fa fa-search fa-fw"></i><span apiman-i18n-key="organizations">Organizations</span></li>\n          </ol>\n        </div>\n      </div>\n      <div class="row">\n        <div class="col-md-12">\n          <h1 class="consumer-top-header" apiman-i18n-key="find-org">Find an Organization</h1>\n        </div>\n        <div class="col-md-6 no-phone">\n          <p class="description" apiman-i18n-key="find-org-description">Use this page to find Organizations you may wish to join.</p>\n        </div>\n        <div class="col-md-6">\n          <form ng-submit="searchOrg(orgName)">\n            <input id="apiman-search" ng-model="orgName" type="text" class="apiman-form-control form-control input-search" apiman-i18n-key="searchfor-orgs" placeholder="Enter a word or phrase to search by..."></input>\n            <button id="search-btn" type="submit" class="btn btn-default btn-search" apiman-i18n-key="search" data-field="searchButton"">Search</input>\n          </form>\n        </div>\n        <div class="col-md-12">\n          <hr />\n        </div>\n      </div>\n      \n      <!-- Search results -->\n      <div class="row browse-items">\n        <div class="col-md-12" data-field="orgs">\n\n          <div class="apiman-no-content container-fluid" ng-hide="orgs.length > 0">\n            <div class="row">\n              <div class="col-md-9">\n                <p apiman-i18n-key="consumer-no-orgs-found" class="apiman-no-entities-description">No organizations found. Either no organizations matched the query or you haven\'t queried yet!</p>\n              </div>\n              <div class="col-md-3"></div>\n            </div>\n          </div>\n\n          <div ng-show="orgs.length > 0">\n	        <div class="count">\n	          Found {{ orgs.length }} matching organizations.\n	        </div>\n	        <div class="item" ng-repeat="org in orgs">\n	          <div class="title"><i class="fa fa-shield icon"></i><a href="{{ pluginName }}/browse/orgs/{{ org.id }}">{{ org.name }}</a></div>\n	          <div class="description" title="{{ org.description }}">{{ org.description }}</div>\n<!-- 	          <div class="actions"> -->\n<!-- 	            <button class="btn btn-default">Request Membership</button> -->\n<!-- 	          </div> -->\n	          <a apiman-i18n-key="is-member-badge" ng-show="org.isMember" href="{{ pluginName }}/orgs/{{ org.id }}" class="ismember" title="You are already a member of this Organization."></a>\n	        </div>\n          </div>\n        </div>\n      </div>\n      \n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/consumer/consumer-service-def.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.ConsumerSvcDefController" class="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n    \n      <div class="container">\n        <div class="row">\n          <div class="col-md-12">\n            <ol class="breadcrumb" data-field="breadcrumb">\n              <li><a id="bc-home" href="{{ pluginName }}/dash"><i class="fa fa-home fa-fw"></i><span apiman-i18n-key="home">Home</span></a></li>\n              <li><a id="bc-orgs" href="{{ pluginName }}/browse/orgs"><i class="fa fa-search fa-fw"></i><span apiman-i18n-key="organizations">Organizations</span></a></li>\n              <li><a id="bc-org" href="{{ pluginName }}/browse/orgs/{{params.org}}"><i class="fa fa-shield fa-fw"></i><span>{{ org.name }}</span></a></li>\n              <li><a id="bc-service" href="{{ pluginName }}/browse/orgs/{{params.org}}/{{params.service}}/{{params.version}}"><i class="fa fa-puzzle-piece fa-fw"></i><span>{{ service.name }}</span></a></li>\n              <li class="active"><i class="fa fa-sitemap fa-fw"></i><span apiman-i18n-key="definition">Definition</span></li>\n            </ol>\n          </div>\n        </div>\n        <div class="row">\n          <div class="col-md-12">\n            <h1 class="consumer-top-header" apiman-i18n-key="service-definition">Service Definition</h1>\n            <hr />\n          </div>\n        </div>\n        \n        <div class="row" ng-show="hasError">\n          <div class="col-md-12">\n            <div class="alert alert-danger" style="margin-top: 15px">\n               <span class="pficon pficon-info"></span>\n               <span apiman-i18n-key="consumer-service-def.error-loading-definition">An error occured while loading the service definition file.  Please try again later.</span>\n            </div>\n          </div>\n        </div>\n        \n        <div class="row" ng-hide="hasDefinition">\n          <div class="col-md-12">\n            <div class="alert alert-warning" style="margin-top: 15px">\n               <span class="pficon pficon-info"></span>\n               <span apiman-i18n-key="consumer-service-def.no-service-definition">This service does not have a service definition file.  Contact the service provider and ask them to supply a valid service definition!</span>\n            </div>\n          </div>\n        </div>\n        \n        <div class="row" ng-show="definitionStatus == \'loading\'">\n          <div class="col-md-12">\n            <div style="margin-top: 15px; padding: 20px" class="alert alert-info">\n              <div style="float:left; margin-right: 6px" class="spinner spinner-sm"></div>\n              <span apiman-i18n-key="loading-service-def">Loading Service Definition, please wait...</span>\n            </div>\n          </div>\n        </div>\n        \n        <div id="apiman-swagger" class="row swagger-section" ng-show="hasDefinition">\n          <div class="col-md-12">\n            <div id="swagger-ui-container" class="swagger-ui-wrap" />\n          </div>\n        </div>\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/consumer/consumer-service-redirect.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.ConsumerServiceRedirectController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/consumer/consumer-service.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.ConsumerSvcController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <div class="col-md-12">\n          <ol class="breadcrumb" data-field="breadcrumb">\n            <li><a id="bc-home" href="{{ pluginName }}/dash"><i class="fa fa-home fa-fw"></i><span apiman-i18n-key="home">Home</span></a></li>\n            <li><a id="bc-orgs" href="{{ pluginName }}/browse/orgs"><i class="fa fa-search fa-fw"></i><span apiman-i18n-key="organizations">Organizations</span></a></li>\n            <li><a id="bc-org" href="{{ pluginName }}/browse/orgs/{{params.org}}"><i class="fa fa-shield fa-fw"></i><span>{{ org.name }}</span></a></li>\n            <li class="active"><i class="fa fa-puzzle-piece fa-fw"></i><span>{{ service.name }}</span></li>\n          </ol>\n        </div>\n      </div>\n      <div class="row">\n        <div class="col-md-12">\n          <h1 class="consumer-top-header" apiman-i18n-key="service-details">Service Details</h1>\n        </div>\n        <div class="col-md-12">\n          <div class="vspacer-10" />\n        </div>\n      </div>\n      <div class="row">\n\n        <!-- Left column -->\n        <div class="col-md-4 browse-items">\n          <div class="item" style="width: 100%; margin-bottom: 20px;" data-field="serviceCard">\n            <div class="title">\n              <i class="fa fa-puzzle-piece icon"></i><a href="{{ pluginName }}/browse/orgs/{{ service.organization.id }}" data-field="titleOrg">{{ service.organization.name }}</a>\n              <span apiman-i18n-skip> / </span>\n              <span class="emphasis" data-field="titleService">{{ service.name }}</span>\n            </div>\n            <div class="description" data-field="description" style="margin-bottom: 10px;">{{ service.description }}</div>\n            <span class="apiman-form-label" apiman-i18n-key="choose-version">Choose Version:</span>\n            <div class="btn-group apiman-entity-action" ng-show="versions.length > 0">\n              <select id="version" apiman-select-picker="" ng-model="selectedServiceVersion" ng-change="setVersion( selectedServiceVersion )" \n                title="" class="selectpicker" data-live-search="false" apiman-i18n-skip\n                data-field="versionSelector" data-ng-options="version as version.version for version in versions">\n              </select>\n            </div>\n            <div apiman-i18n-key="no-published-service-versions-found" class="apiman-label-faded" ng-hide="versions.length > 0">\n              No versions of this service have been published.  You will not be able to\n              consume this service until it has been published by its owner!\n            </div>\n            <div ng-show="version.definitionType == \'SwaggerJSON\' && hasSwagger">\n              <div class="vspacer-10" />\n              <a href="{{ pluginName }}/browse/orgs/{{params.org}}/{{params.service}}/{{params.version}}/def">\n                <i class="fa fa-fw fa-sitemap"></i>\n                <span apiman-i18n-key="view-service-def">View Service Definition</span>\n              </a>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Right column -->\n        <div class="col-md-8">\n          <div class="consumer-section">\n            <div id="managed-endpoint-wrap" ng-show="version.publicService">\n              <h3 apiman-i18n-key="public-endpoint" class="consumer-header">Public Endpoint</h3>\n              <p class="apiman-label-faded" apiman-i18n-key="consumer-service.public-service-warning">\n                Because this is a Public Service, it is possible to invoke it directly, without\n                the need for a Service Contract with an Application.  To directly invoke the\n                Service, send requests to the API Gateway endpoint below.\n              </p>\n              <div style="margin-bottom: 20px;">\n                <textarea readonly="readonly" class="apiman-endpoint" style="width:100%">{{ publicEndpoint.managedEndpoint }}</textarea>\n              </div>\n            </div>\n\n            <div id="available-plans-wrap">\n              <h3 apiman-i18n-key="available-plans" class="consumer-header">Available Plans</h3>\n              <div class="apiman-plans consumer-section" data-field="plans">\n\n                <div class="apiman-no-content" ng-hide="plans.length > 0">\n                  <p class="apiman-no-entities-description" apiman-i18n-key="no-plans-offered-by-service">No plans are currently offered by this service.</p>\n                </div>\n\n                <div class="container-fluid apiman-summaryrow" ng-repeat="plan in plans">\n                  <div class="row">\n                    <div class="col-md-10 col-no-padding">\n                      <i class="fa fa-fw fa-bar-chart-o icon"></i>\n                      <span class="title"><a data-toggle="collapse" ng-click="getPolicyChain(plan)" href="#collapse{{ $index }}">{{ plan.planName }}</a></span>\n                      <div class="description">\n                        {{ plan.planDescription }}\n                      </div>\n                    </div>\n                    <div class="col-md-2 col-no-padding">\n                      <span class="actions"><a apiman-i18n-key="create-contract" href="{{ pluginName }}/new-contract?svc={{ params.service }}&amp;svcorg={{ params.org }}&amp;svcv={{ params.version }}&amp;planid={{ plan.planId }}" class="btn btn-default">Create Contract</a></span>\n                    </div>\n                  </div>\n                  <!-- Sub-section - policy chain -->\n                  <div class="panel-collapse collapse apiman-policy-chain" id="collapse{{ $index }}" style="margin-top: 15px" >\n                  \n                    <div ng-hide="chains[plan.planId]">\n                      <div class="spinner spinner-sm pull-left"></div>\n                      <span apiman-i18n-key="loading-policy-chain" style="margin-left: 5px">Loading policy chain...</span>\n                    </div>\n                  \n                    <div class="apiman-policies" ng-show="chains[plan.planId]">\n                      <div class="container-fluid apiman-summaryrow" ng-repeat="policy in chains[plan.planId]">\n                        <div class="row">\n                          <div class="col-md-1 col-no-padding">\n                            <i class="fa fa-{{ policy.icon }} fa-fw apiman-policy-icon"></i>\n                          </div>\n                          <div class="col-md-11 col-no-padding">\n                            <div class="">\n                              <span class="title apiman-label-faded">{{ policy.name }}</span>\n                            </div>\n                            <div class="description apiman-label-faded">{{ policy.description }}</div>\n                          </div>\n                        </div>\n                        <div>\n                          <hr>\n                        </div>\n                      </div>\n                    </div> <!-- /policy chain -->\n                    \n                  </div>\n                  <hr />\n                </div>\n              \n              </div>\n            </div>\n          </div>\n        </div> <!-- /right-column -->\n        \n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),
e.put("plugins/api-manager/html/consumer/consumer-services.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.ConsumerSvcsController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <div class="col-md-12">\n          <ol class="breadcrumb" data-field="breadcrumb">\n            <li><a id="bc-home" href="{{ pluginName }}/dash"><i class="fa fa-home fa-fw"></i><span apiman-i18n-key="home">Home</span></a></li>\n            <li class="active"><i class="fa fa-search fa-fw"></i><span apiman-i18n-key="services">Services</span></li>\n          </ol>\n        </div>\n      </div>\n      <div class="row">\n        <div class="col-md-12">\n          <h1 class="consumer-top-header" apiman-i18n-key="find-service">Find a Service</h1>\n        </div>\n        <div class="col-md-6 no-phone">\n          <p class="description" apiman-i18n-key="find-service-description">Use this page to find Services you wish to consume.  Use the various search options to find Services, then review them and eventually create Contracts to them.</p>\n        </div>\n        <div class="col-md-6">\n          <form ng-submit="searchSvcs(serviceName)">\n            <input id="apiman-search" ng-model="serviceName" type="text" class="apiman-form-control form-control input-search" apiman-i18n-key="searchfor-svcs" placeholder="Search by service name or keyword..."></input>\n            <button id="search-btn" type="submit" class="btn btn-default btn-search" apiman-i18n-key="search" data-field="searchButton">Search</input>\n          </form>\n        </div>\n        <div class="col-md-12">\n          <hr />\n        </div>\n      </div>\n      \n      <!-- Search results -->\n      <div class="row browse-items">\n        <div class="col-md-12" data-field="services">\n\n          <div class="apiman-no-content container-fluid" ng-hide="services.length > 0">\n            <div class="row">\n              <div class="col-md-9">\n                <p apiman-i18n-key="consumer-no-services-found" class="apiman-no-entities-description">No services found. Either no services matched the query or you haven\'t queried yet!</p>\n              </div>\n              <div class="col-md-3"></div>\n            </div>\n          </div>\n\n          <div ng-show="services.length > 0">\n            <div class="count">\n              Found {{ services.length}} matching services.\n            </div>\n\n            <div class="item" ng-repeat="service in services">\n              <div class="title">\n                <i class="fa fa-puzzle-piece icon"></i><a href="{{ pluginName }}/browse/orgs/{{service.organizationId}}">{{ service.organizationName }}</a>\n                <span apiman-i18n-skip> / </span>\n                <b><a href="{{ pluginName }}/browse/orgs/{{service.organizationId}}/{{service.id}}">{{ service.name }}</a></b>\n              </div>\n              <div class="description" title="{{ service.description }}">{{ service.description }}</div>\n            </div>\n          </div>\n\n        </div>\n      </div>\n\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/directives/activity.html",'<div class="apiman-activity">\n\n  <div class="apiman-no-content container-fluid" ng-hide="auditEntries.length > 0">\n    <div class="row">\n      <div class="col-md-12">\n        <p class="apiman-no-entities-description" apiman-i18n-key="no-activity-found-for-user">No activity was found.  I guess someone should do something first!</p>\n      </div>\n    </div>\n  </div>\n\n  <div class="container-fluid apiman-summaryrow" ng-repeat="entry in auditEntries">\n    <div>\n      <apiman-audit-entry model="entry" entity-type="{{ entry.what }}" data-entry-type="{{ entry.entityType }}" />\n    </div>\n    <div class="row">\n      <i class="fa fa-fw {{ getEntryIcon(entry) }}"></i>\n      <div class="apiman-timestamp">{{ entry.createdOn | date : "yyyy-MM-dd \'@\' h:mm:ss a" }}</div>\n    </div>\n    <hr/>\n  </div>\n  <div class="container-fluid" style="text-align: center" ng-hide="auditEntries.length == 0">\n    <button ng-show="hasMore && auditEntries.length >= 20" apiman-action-btn="" data-field="getMoreButton" apiman-i18n-key="activity.show-more" placeholder="Loading More..." data-icon="fa-cog" ng-click="getMore()" class="btn btn-default">Show Next 20 Items</button>\n  </div>\n</div>'),e.put("plugins/api-manager/html/directives/confirmModal.html",'      <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-hidden="true">\n        <div class="modal-dialog">\n          <div class="modal-content">\n            <div class="modal-header">\n              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\n                <span class="pficon pficon-close"></span>\n              </button>\n              <h4 class="modal-title"><span>{{ title }}</span></h4>\n            </div>\n            <div class="modal-body" ng-transclude=""></div>\n            <div class="modal-footer">\n              <button ng-click="onNo()" data-dismiss="modal" type="button" class="btn btn-default" apiman-i18n-key="no">No</button>\n              <button ng-click="onYes()" data-dismiss="modal" type="button" class="btn btn-primary"  apiman-i18n-key="yes">Yes</button>\n            </div>\n          </div>\n        </div>\n      </div>\n'),e.put("plugins/api-manager/html/directives/editDescription.html",'<div style="position: relative;" class="description">\n    <div editable-textarea="descr" e-ng-focus="focusOnDescription($event)" e-ng-change="changeOnDescription()"\n        e-class="autoExpand" ng-mouseover="descriptionMouseOver($event)" ng-mouseout="descriptionMouseOut($event)"\n        id="descriptionWrapper">\n            {{ descr || "&lt;" + defaultValue + "&gt;" }}\n            <a href="#" class="apiman-inline-edit-overlay-edit" ng-show="showPencil" style="position:absolute"\n                ng-style="{ left: leftPosition, top: topPosition, height: height }">\n                <i class="fa fa-pencil fa-fw"></i>\n            </a>\n    </div>\n</div>\n'),e.put("plugins/api-manager/html/directives/policyList.html",'<div class="apiman-policies" id=\'draggable-ctr\' as-sortable="policyListOptions" ng-model="ctrl.policies">\n    <div class="container-fluid apiman-summaryrow" ng-repeat="policy in ctrl.policies" as-sortable-item>\n        <div class="row" >\n            <div as-sortable-item-handle apiman-permission="svcEdit" apiman-status="Created,Ready" class="policy-grabber" style="height: 48px"></div>\n            <div class="col-md-1 col-no-padding">\n                <i class="apiman-policy-icon fa fa-{{ policy.icon }} fa-fw"></i>\n            </div>\n            <div class="col-md-9 col-no-padding">\n                <div>\n                    <span class="title"><a href="{{ pluginName }}/orgs/{{ ctrl.org }}/{{ ctrl.type == \'applications\' ? \'apps\' : ctrl.type }}/{{ ctrl.id }}/{{ ctrl.version }}/policies/{{ policy.id }}">{{ policy.name }}</a></span>\n                </div>\n                <div class="metaData">\n                    <span apiman-i18n-key="policyList.policy-created-by">Policy created by </span>\n                    <span><a href="{{ pluginName }}/users/{{ policy.createdBy }}">{{ policy.createdBy }}</a></span>\n                    <span apiman-i18n-key="on">on</span>\n                    <i class="fa fa-clock-o fa-inline"></i>\n                    <span>{{ policy.createdOn | date:\'yyyy-MM-dd\' }}</span>\n                </div>\n                <div class="description apiman-label-faded">\n                    {{ policy.description }}\n                </div>\n            </div>\n            <div class="col pull-right">\n                <button apiman-i18n-key="remove" class="btn btn-default" apiman-status="Created,Ready" ng-click="ctrl.remove( policy )">Remove</button>\n            </div>\n        </div>\n        <hr />\n    </div>\n</div>\n'),e.put("plugins/api-manager/html/directives/searchBox.html",'<table class="apiman-search-box input-search" data-field="contractFilter">\n    <tbody>\n      <tr>\n        <td width="99%">\n          <input id="{{ filterId }}" ng-model="value" ng-change="doSearch()" value="" type="text" placeholder="{{ placeholder }}">\n        </td>\n        <td width="1%">\n          <button id="{{ buttonId }}" ng-click="onClick()" class="btn btn-default"><i class="fa fa-fw fa-search"></i></button>\n        </td>\n      </tr>\n    </tbody>\n</table>\n'),e.put("plugins/api-manager/html/directives/selectServiceModal.html",'      <div class="modal fade" id="selectServiceModal" tabindex="-1" role="dialog" aria-hidden="true">\n        <div class="modal-dialog">\n          <div class="modal-content">\n            <div class="modal-header">\n              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\n                <span class="pficon pficon-close"></span>\n              </button>\n              <h4 class="modal-title"><span>{{ title }}</span></h4>\n            </div>\n            <div class="modal-body modal-select-service">\n              <p apiman-i18n-key="select-service-help">\n                Select a service by searching for a service by name (or part of a name) and choosing one of the\n                matches.\n              </p>\n              <form ng-submit="search()">\n                <input apiman-i18n-key="search-service-name" ng-model="searchText" type="text" class="apiman-form-control form-control input-search" placeholder="Search by service name..."></input>\n                <button type="submit" apiman-action-btn="" class="btn btn-default btn-search" data-field="searchButton" apiman-i18n-key="search" data-icon="fa-cog" placeholder="Searching">Search</button>\n              </form>\n              <div class="clearfix"></div>\n              <div class="panel panel-default input-search-results">\n                <div class="panel-body container-fluid" data-field="services">\n                  <a ng-click="onServiceSelected(service)" href="#" class="item" ng-repeat="service in services" ng-class="{ selected : service.selected }">\n                    <i class="fa fa-puzzle-piece fa-fw"></i>\n                    <span class="">{{ service.organizationName }}</span>\n                    <span apiman-i18n-skip> / </span>\n                    <span class="emphasis">{{ service.name }}</span>\n                  </a>\n                  <div class="alert alert-info" ng-show="!services && criteria">\n                     <span class="pficon pficon-info"></span>\n                     <span apiman-i18n-key="no-services-matched">No services found matching your search.  Please try a different search.</span>\n                  </div>\n                  <div class="alert alert-info" ng-show="!services && !criteria">\n                     <span class="pficon pficon-info"></span>\n                     <span apiman-i18n-key="no-service-search-criteria">Enter some search criteria above and click Search to find a Service.</span>\n                  </div>\n                </div>\n              </div>\n              <div class="clearfix"></div>\n              <table ng-show="serviceVersions">\n                <tr>\n                  <td><span apiman-i18n-key="choose-svc-version" class="apiman-form-label">Choose Service Version:</span></td>\n                  <td>\n                    <select apiman-i18n-key="choose-svc-version-select" ng-model="selectedServiceVersion" apiman-select-picker="" class="selectpicker version" title="[no versions found]" ng-options="svcVersion.version for svcVersion in serviceVersions">\n                  </td>\n                </tr>\n              </table>\n              <div class="alert alert-warning" ng-show="serviceVersions && serviceVersions.length == 0" style="margin-top: 15px">\n                 <span class="pficon pficon-info"></span>\n                 <span apiman-i18n-key="no-valid-service-versions">No valid versions of the selected Service were found.</span>\n              </div>\n              \n            </div>\n            <div class="modal-footer">\n              <button data-dismiss="modal" type="button" class="btn btn-default" apiman-i18n-key="cancel">Cancel</button>\n              <button ng-disabled="!selectedServiceVersion" ng-click="onOK()" data-dismiss="modal" type="button" class="btn btn-primary" apiman-i18n-key="ok">OK</button>\n            </div>\n          </div>\n        </div>\n      </div>\n'),e.put("plugins/api-manager/html/errors/400.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.Error400Controller" class="container error-page" data-field="error-page">\n      <div class="row">\n        <div class="col-md-3">\n          <div class="error-icon error-403 pull-right"></div>\n        </div>\n        <div class="col-md-8">\n          <div class="title" apiman-i18n-key="error-400-title">Bad Request!</div>\n          <div class="description" apiman-i18n-key="error-400-description">\n           Bad request!\n          </div>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/errors/403.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.Error403Controller" class="container error-page" data-field="error-page">\n      <div class="row">\n        <div class="col-md-3">\n          <div class="error-icon error-403 pull-right"></div>\n        </div>\n        <div class="col-md-8">\n          <div class="title" apiman-i18n-key="error-403-title">Not Allowed!</div>\n          <div class="description" apiman-i18n-key="error-403-description">Uh oh, it looks like you tried to access something you aren\'t allowed to see.  Since you aren\'t that kind of person it was probably our fault. Maybe you should let someone know?</div>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/errors/404.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.Error404Controller" class="container error-page" data-field="error-page">\n      <div class="row">\n        <div class="col-md-3">\n          <div class="error-icon error-404 pull-right"></div>\n        </div>\n        <div class="col-md-8">\n          <div class="title" apiman-i18n-key="error-404-title">Oops, Not Found</div>\n          <div class="description" apiman-i18n-key="error-404-description">Oh...well, we couldn\'t find the page you were looking for.  Perhaps it no longer exists?  Or maybe you just got the name wrong?  I doubt it was stolen by badgers, but that\'s not impossible either.</div>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/errors/409.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.Error409Controller" class="container error-page" data-field="error-page">\n      <div class="row">\n        <div class="col-md-3">\n          <div class="error-icon error-409 pull-right"></div>\n        </div>\n        <div class="col-md-8">\n          <div class="title" apiman-i18n-key="error-409-title">Already Exists</div>\n          <div apiman-i18n-key="error-409-message" class="description" apiman-i18n-key="error-409-description">You\'ve just tried to create something that already exists!  Maybe try again with a different name?</div>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/errors/500.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.Error500Controller" class="container error-page" data-field="error-page">\n      <div class="row">\n        <div class="col-md-3">\n          <div class="error-icon error-500 pull-right"></div>\n        </div>\n        <div class="col-md-8">\n          <div class="title" apiman-i18n-key="error-500-title">Server Error!</div>\n          <div class="description" apiman-i18n-key="error-500-message">Oh boy.  This one is totally on us.  Something really unexpected happened on the server and caused an error.  It\'s not you, it\'s me.  Really.  You could probably just try it again and see what happens.  If it keeps on happening you may need to contact someone about it.</div>\n        </div>\n      </div>\n      <div class="row" ng-show="error.data" style="margin-top: 20px">\n        <div class="col-md-3"></div>\n        <div class="col-md-8">\n          <div class="header" apiman-i18n-key="error-message">Error Message</div>\n          <div>\n            <input data-field="errorMessage" class="apiman-form-control form-control errorMessage" readonly="readonly" value="{{ error.data.message }}" type="text"></input>\n          </div>\n        </div>\n      </div>\n      <div class="row" style="margin-top: 15px" ng-show="error.data">\n        <div class="col-md-3"></div>\n        <div class="col-md-8">\n          <div class="header" apiman-i18n-key="error-details">Error Details</div>\n          <div>\n            <pre data-field="errorDetail">{{ error.data.stacktrace }}</pre>\n          </div>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/errors/invalid_server.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.ErrorInvalidServerController" class="container error-page" data-field="error-page">\n      <div class="row">\n        <div class="col-md-3">\n          <div class="error-icon error-0 pull-right"></div>\n        </div>\n        <div class="col-md-8">\n          <div class="title" apiman-i18n-key="error-0-title">Error Communicating With Server</div>\n          <div class="description" apiman-i18n-key="error-0-message">We received an error 0 from the server.  This either means that the server was down, or that CORS was not properly configured.  If this error persists, please contact the system administrator.</div>\n        </div>\n      </div>\n      <div class="row">\n        <hr />\n      </div>\n      <div class="row">\n        <div class="col-md-3"></div>\n        <div class="col-md-8">\n          <h2>More Information</h2>\n          <table class="table table-bordered">\n            <tbody>\n              <tr>\n                <td width="1%" nowrap="nowrap"><span class="about-label" apiman-i18n-key="version-label">Version:</span></td>\n                <td>{{ version }}</td>\n              </tr>\n              <tr>\n                <td width="1%" nowrap="nowrap"><span class="about-label" apiman-i18n-key="build-date-label">Build Date:</span></td>\n                <td>{{ builtOn }}</td>\n              </tr>\n              <tr>\n                <td width="1%" nowrap="nowrap"><span class="about-label" apiman-i18n-key="server-label">Server:</span></td>\n                <td><a href="{{ apiEndpoint }}">{{ apiEndpoint }}</a></td>\n              </tr>\n              <tr>\n                <td width="1%" nowrap="nowrap"><span class="about-label" apiman-i18n-key="installation-guide-label">Install Guide:</span></td>\n                <td><a href="{{ installGuide }}">{{ installGuide }}</a></td>\n              </tr>\n              <tr>\n                <td width="1%" nowrap="nowrap"><span class="about-label" apiman-i18n-key="cors-label">CORS Information:</span></td>\n                <td><a href="{{ cors }}">{{ cors }}</a></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/edit-gateway.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.EditGatewayController" id="form-page" class="container apiman-edit-gateway apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <fieldset>\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="edit-gateway">Edit Gateway</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p apiman-i18n-key="edit-gateway-help-text" class="col-md-6 apiman-label-faded">Update this gateway\'s details, useful when a Gateway\'s endpoint or authentication information is changed.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Choose gateway name -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="gateway-name">Gateway Name</dt>\n          <dd>\n            <input id="apiman-gateway-name" ng-model="gateway.name" data-field="name" type="text" class="apiman-form-control form-control name entityname" placeholder="Enter gateway name..." apiman-i18n-key="enter-gateway-name" disabled="disabled"></input>\n          </dd>\n        </dl>\n      </div>\n      <!-- Description of gateway -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="description">Description</dt>\n          <dd>\n            <textarea ng-model="gateway.description" data-field="description" type="text" class="apiman-form-control form-control description" id="apiman-gateway-description" apiman-i18n-key="enter-gateway-description" placeholder="Enter gateway description (optional)..."></textarea>\n          </dd>\n        </dl>\n      </div>\n      <!-- Configuration Endpoint -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="config-endpoint">Configuration Endpoint</dt>\n          <dd>\n            <input ng-model="configuration.endpoint" data-field="configEndpoint" type="text" class="apiman-form-control form-control description" id="config-endpoint" apiman-i18n-key="enter-gateway-config-endpoint" placeholder="Enter configuration endpoint..."></input>\n          </dd>\n        </dl>\n      </div>\n      <!-- Authentication Credentials -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="credentials">Configuration Endpoint Credentials</dt>\n          <dd>\n            <table class="form-table">\n              <tr>\n                <td class="td-label">\n                  <span apiman-i18n-key="username">Username:</span>\n                </td>\n                <td>\n                  <input id="endpoint-username" ng-model="configuration.username" name="username" type="text" class="apiman-form-control form-control name entityname" apiman-i18n-key="gateway-auth-username" placeholder="Username..."></input>\n                </td>\n              </tr>\n              <tr>\n                <td class="td-label">\n                  <span apiman-i18n-key="password">Password:</span>\n                </td>\n                <td>\n                  <input id="endpoint-password" ng-model="configuration.password" name="password" type="password" class="apiman-form-control form-control name entityname" apiman-i18n-key="gateway-auth-password" placeholder="Password..."></input>\n                </td>\n              </tr>\n              <tr>\n                <td></td>\n                <td>\n                  <input id="endpoint-password-confirm" ng-model="passwordConfirm" name="passwordConfirm" type="password" class="apiman-form-control form-control name entityname" apiman-i18n-key="gateway-auth-confirm-pass" placeholder="Confirm Password..."></input>\n                </td>\n              </tr>\n            </table>\n          </dd>\n        </dl>\n      </div>\n      <div class="row">\n        <button id="test-gateway" ng-disabled="!isValid" ng-click="testGateway()" apiman-action-btn="" class="btn btn-default" data-field="testButton" apiman-i18n-key="test-gateway" placeholder="Testing..." data-icon="fa-cog">Test Gateway</button>\n      </div>\n      <div class="row" ng-show="testResult == \'success\'">\n        <div class="alert alert-success description" style="margin-top: 10px">\n          <span class="pficon pficon-ok"></span>\n          <strong apiman-i18n-key="gateway-configuration-valid.title">Gateway Configuration Valid</strong> \n          <div apiman-i18n-key="gateway-configuration-valid.msg">Your Gateway configuration is correct.  Great job!</div>\n        </div>\n      </div>\n      <div class="row" ng-show="testResult == \'error\'">\n        <div class="alert alert-danger description" style="margin-top: 10px">\n          <span class="pficon-layered">\n            <span class="pficon pficon-error-octagon"></span>\n            <span class="pficon pficon-error-exclamation"></span>\n          </span>\n          <strong apiman-i18n-key="gateway-configuration-invalid.title">Gateway Configuration Invalid</strong>\n          <div apiman-i18n-key="gateway-configuration-invalid.msg">Something has gone wrong when testing the Gateway.  Hopefully the details (below) will help you figure out what.</div>\n          <div style="margin-top: 8px">\n            <pre>{{ testErrorMessage }}</pre>\n          </div>\n        </div>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Update Button -->\n      <div class="row">\n        <button id="update-gateway" ng-disabled="!isValid || !isDirty" apiman-action-btn="" class="btn btn-primary" data-field="updateButton" apiman-i18n-key="update-gateway" placeholder="Updating..." data-icon="fa-cog" ng-click="updateGateway()">Update Gateway</button>\n        <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n        <button id="delete-gateway" apiman-action-btn="" class="btn btn-danger" style="margin-left: 100px;" data-field="deleteButton" apiman-i18n-key="delete-gateway" placeholder="Deleting..." data-icon="fa-cog" ng-click="deleteGateway()">Delete Gateway</button>\n      </div>\n  	  </fieldset>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/edit-plugin.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.EditPluginController" id="form-page" class="container apiman-edit-plugin apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="plugin-details">Plugin Details</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p apiman-i18n-key="plugin-details-help-text" class="col-md-6 apiman-label-faded">Plugins cannot be edited, but details about the plugin can be viewed on this page.  Additionally, the plugin can be deleted via the Delete button below.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <div class="row container">\n        <!-- Left column -->\n        <div class="col-md-6 container">\n          <div class="row">\n            <h3 class="" apiman-i18n-key="plugin-coordinates">Plugin Coordinates</h3>\n          </div>\n          <div class="row">\n            <dl>\n              <dt apiman-i18n-key="group-id">Group Id</dt>\n              <dd>\n                <span data-field="groupId">{{ plugin.groupId }}</span>\n              </dd>\n            </dl>\n          </div>\n          <div class="row">\n            <dl>\n              <dt apiman-i18n-key="artifact-id">Artifact Id</dt>\n              <dd>\n                <span data-field="artifactId">{{ plugin.artifactId }}</span>\n              </dd>\n            </dl>\n          </div>\n          <div class="row">\n            <dl>\n              <dt apiman-i18n-key="version">Version</dt>\n              <dd>\n                <span data-field="version">{{ plugin.version }}</span>\n              </dd>\n            </dl>\n          </div>\n          <div class="row">\n            <dl>\n              <dt apiman-i18n-key="classifier.optional">Classifier (optional)</dt>\n              <dd>\n                <span data-field="classifier">{{ plugin.classifier }}</span>\n              </dd>\n            </dl>\n          </div>\n          <div class="row">\n            <dl>\n              <dt apiman-i18n-key="type.optional">Type (optional)</dt>\n              <dd>\n                <span data-field="type">{{ plugin.type }}</span>\n              </dd>\n            </dl>\n          </div>\n        </div>\n        <!-- Right column -->\n        <div class="col-md-6 container">\n          <div class="row">\n            <h3 class="" apiman-i18n-key="plugin-info">Plugin Info</h3>\n          </div>\n          <div class="row">\n            <dl>\n              <dt apiman-i18n-key="name">Name</dt>\n              <dd>\n                <span data-field="name">{{ plugin.name }}</span>\n              </dd>\n            </dl>\n          </div>\n          <div class="row">\n            <dl>\n              <dt apiman-i18n-key="description">Description</dt>\n              <dd>\n                <span data-field="description">{{ plugin.description }}</span>\n              </dd>\n            </dl>\n          </div>\n        </div>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Create Button -->\n      <div class="row">\n        <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n        <button id="delete-plugin" apiman-action-btn="" class="btn btn-danger" style="margin-left: 100px;" data-field="deleteButton" apiman-i18n-key="delete-plugin" placeholder="Deleting..." data-icon="fa-cog" ng-click="deletePlugin()">Delete Plugin</button>\n      </div>\n    </div> <!-- /container -->\n  </body>\n</html>\n'),
e.put("plugins/api-manager/html/forms/edit-policy.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.EditPolicyController" id="form-page" class="container apiman-edit-policy apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <h2 class="title" data-field="heading" apiman-i18n-key="edit-policy">Edit Policy</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p class="col-md-6 apiman-label-faded" apiman-i18n-key="edit-policy-help-text" class="apiman-label-faded">Update this policy\'s configuration settings using the form below.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n\n      <!-- Policy Type-specific config -->\n      <div class="row" ng-show="include">\n        <h3 data-field="policyHeading">{{ policy.definition.name }} Configuration</h3>\n        <div class="apiman-box col-md-9 container">\n          <div ng-include="include"></div>\n        </div>\n      </div>\n\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Update Button -->\n      <div class="row">\n        <button id="update-policy" apiman-status="Created,Ready" ng-show="hasPermission" apiman-action-btn="" ng-click="updatePolicy()" ng-disabled="!isValid" class="btn btn-primary" data-field="updateButton" apiman-i18n-key="update-policy" placeholder="Updating..." data-icon="fa-cog">Update Policy</button>\n        <a id="cancel" data-field="cancelButton" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n    </div> <!-- /container -->\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/edit-policyDef.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.EditPolicyDefController" id="form-page" class="container apiman-edit-policy apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n\n      <div class="row">\n        <h2 class="title" data-field="heading" apiman-i18n-key="edit-policy-def">Edit Policy Definition</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p class="col-md-6 apiman-label-faded" apiman-i18n-key="edit-policy-def-help-text" class="apiman-label-faded">Update this policy definition\'s configuration settings using the form below.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Policy Type-specific config -->\n      <div class="row">\n        <h3 data-field="policyHeading">Policy Configuration<i> </i></h3>\n        <div class="apiman-box col-md-9 container" data-field="policyFormWrapper">\n          <div class="form policy-config default">\n            <span apiman-i18n-key="manually-configure-policy-json">Please manually configure your policy\'s JSON configuration below.</span>\n            <textarea id="json" ng-model="policyDefJSON">{{ policyDefJSON }}</textarea>\n          </div>\n        </div>\n      </div>\n\n      <!-- HR -->\n      <div class="row hr-row" apiman-status="Created,Ready">\n        <hr/>\n      </div>\n      <!-- Update Button -->\n      <div class="row" apiman-status="Created,Ready">\n        <button id="update-policy" class="btn btn-primary" data-field="updateButton" apiman-i18n-key="update-policy" placeholder="Updating..." data-icon="fa-cog" ng-click="updatePolicyDef()">Update Policy</button>\n        <a id="cancel" data-field="cancelButton" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/edit-role.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.EditRoleController" id="form-page" class="container apiman-edit-role apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="edit-role">Edit Role</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p apiman-i18n-key="edit-role-help-text" class="col-md-6 apiman-label-faded">Update this role\'s definition, including description and assigned permissions.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Description of role -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="description">Description</dt>\n          <dd>\n            <textarea ng-model="role.description" class="apiman-form-control form-control description" id="apiman-description" apiman-i18n-key="enter-role-description" placeholder="Enter role description (optional)..."></textarea>\n          </dd>\n        </dl>\n      </div>\n      <!-- Auto-grant this role -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="auto-grant">Auto-Grant Role</dt>\n          <dd>\n             <div class="checkbox">\n               <label>\n                 <input id="auto-grant" ng-model="role.autoGrant" data-field="autoGrant" type="checkbox"></input> \n                 <span apiman-i18n-key="grant-role-automatically">Grant this role automatically when creating a new Organization</span>\n               </label>\n             </div>\n          </dd>\n        </dl>\n      </div>\n      <!-- Permissions -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="permissions">Permissions</dt>\n          <dd>\n            <div class="container">\n              <div class="row" data-field="permissions">\n                <div class="col-md-3">\n                  <div class="checkbox">\n                    <label>\n                      <input id="org-view" ng-model="rolePermissions[\'orgView\']" data-field="orgView" type="checkbox"></input> <span apiman-i18n-key="permission.orgView">Organization View</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="org-edit" ng-model="rolePermissions[\'orgEdit\']" data-field="orgEdit" type="checkbox"></input> <span apiman-i18n-key="permission.orgEdit">Organization Edit</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="org-admin" ng-model="rolePermissions[\'orgAdmin\']" data-field="orgAdmin" type="checkbox"></input> <span apiman-i18n-key="permission.orgAdmin">Organization Admin</span>\n                    </label>\n                  </div>\n                </div>\n                <div class="col-md-2">\n                  <div class="checkbox">\n                    <label>\n                      <input id="plan-view" ng-model="rolePermissions[\'planView\']" data-field="planView" type="checkbox"></input> <span apiman-i18n-key="permission.planView">Plan View</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="plan-edit" ng-model="rolePermissions[\'planEdit\']" data-field="planEdit" type="checkbox"></input> <span apiman-i18n-key="permission.planEdit">Plan Edit</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="plan-admin" ng-model="rolePermissions[\'planAdmin\']" data-field="planAdmin" type="checkbox"></input> <span apiman-i18n-key="permission.planAdmin">Plan Admin</span>\n                    </label>\n                  </div>\n                </div>\n                <div class="col-md-2">\n                  <div class="checkbox">\n                    <label>\n                      <input id="svc-view" ng-model="rolePermissions[\'svcView\']" data-field="svcView" type="checkbox"></input> <span apiman-i18n-key="permission.svcView">Service View</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="svc-edit" ng-model="rolePermissions[\'svcEdit\']" data-field="svcEdit" type="checkbox"></input> <span apiman-i18n-key="permission.svcEdit">Service Edit</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="svc-admin" ng-model="rolePermissions[\'svcAdmin\']" data-field="svcAdmin" type="checkbox"></input> <span apiman-i18n-key="permission.svcAdmin">Service Admin</span>\n                    </label>\n                  </div>\n                </div>\n                <div class="col-md-2">\n                  <div class="checkbox">\n                    <label>\n                      <input id="app-view" ng-model="rolePermissions[\'appView\']" data-field="appView" type="checkbox"></input> <span apiman-i18n-key="permission.appView">Application View</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="app-edit" ng-model="rolePermissions[\'appEdit\']" data-field="appEdit" type="checkbox"></input> <span apiman-i18n-key="permission.appEdit">Application Edit</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="app-admin" ng-model="rolePermissions[\'appAdmin\']" data-field="appAdmin" type="checkbox"></input> <span apiman-i18n-key="permission.appAdmin">Application Admin</span>\n                    </label>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </dd>\n        </dl>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Create Button -->\n      <div class="row">\n        <button id="update-role" ng-disabled="!isValid" apiman-action-btn="" class="btn btn-primary" data-field="updateButton" apiman-i18n-key="update-role" placeholder="Updating..." data-icon="fa-cog" ng-click="updateRole()">Update Role</button>\n        <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n        <button id="delete-role" apiman-action-btn="" class="btn btn-danger" style="margin-left: 100px;" data-field="deleteButton" apiman-i18n-key="delete-role" placeholder="Deleting..." data-icon="fa-cog" ng-click="deleteRole()">Delete Role</button>\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/import-policyDefs.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.ImportPolicyDefsController" id="form-page" class="container apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="import-policy-defs">Import Policy Definition(s)</h2>\n      </div>\n      <div id="dataPage" ng-show="isData">\n        <!-- Helpful hint -->\n        <div class="row">\n          <p apiman-i18n-key="import-policy-defs-help-text" class="col-md-6 apiman-label-faded">Import one or more policy definition.  Simply copy/paste (or drag and drop!) the policy definition data into the text area below and click Import - we\'ll do the rest!  Make sure the data is properly formatted JSON.</p>\n        </div>\n        <!-- HR -->\n        <div class="row hr-row">\n          <hr/>\n        </div>\n        <!-- Choose policyDef name -->\n        <div class="row">\n          <dl>\n            <dt apiman-i18n-key="policyDef-data">Policy Definition Data</dt>\n            <dd>\n              <textarea id="data" apiman-drop-text ng-model="policyDefsJSON" data-field="data" class="apiman-form-control form-control apiman-form-data" width="100%"></textarea>\n              <div class="alert alert-warning" ng-show="!isValid && policyDefsJSON" style="margin-top: 15px">\n                 <span class="pficon pficon-info"></span>\n                 <span apiman-i18n-key="invalid-policy-def-data-message">The policy definition data above is not valid.  Please make sure to type/copy a valid Policy Definition JSON document.</span>\n              </div>\n            </dd>\n          </dl>\n        </div>\n        <!-- HR -->\n        <div class="row hr-row">\n          <hr/>\n        </div>\n        <!-- Import Button -->\n        <div class="row">\n          <button id="import" ng-disabled="!isValid" class="btn btn-primary" apiman-i18n-key="import" placeholder="Importing..." data-icon="fa-cog"  ng-click="parseJSON()">Import</button>\n          <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n        </div>\n      </div>\n\n      <div id="confirmPage" ng-show="isConfirm">\n        <div class="row">\n          <table class="table table-striped table-bordered table-hover table-responsive" data-field="policyDefs">\n            <thead>\n              <tr>\n                <th apiman-i18n-key="policy">Policy</th>\n                <th class="no-phone" apiman-i18n-key="implementation.header">Implementation</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr ng-repeat="policyDef in policyDefs">\n                <td><i class="fa fa-{{policyDef.icon}} fa-fw"></i><span>{{ policyDef.name }}</span></td>\n                <td class="no-phone">{{ policyDef.policyImpl }}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <div class="row">\n          <p apiman-i18n-key="confirm-import-policyDefs">Really import the policy definition(s) listed above?</p>\n        </div>\n        <!-- Confirm Button  -->\n        <div class="row">\n          <button id="yes" apiman-action-btn="" class="btn btn-primary" data-field="yesButton" apiman-i18n-key="yes" placeholder="Importing..." data-icon="fa-cog" ng-click="importPolicyDefs()">Yes</button>\n          <a id="no" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="noButton" apiman-i18n-key="no">No</a>\n        </div>\n\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/new-app.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.NewAppController" id="form-page" class="container apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="new-application">New Application</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p apiman-i18n-key="new-app-help-text" class="col-md-6 apiman-label-faded">Create a new Application within the specified Organization, allowing you to begin connecting provided Services with your Application.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Choose org and app name -->\n      <div ng-show="organizations.length > 0">\n        <div class="row">\n          <dl class="org">\n            <dt apiman-i18n-key="organization">Organization</dt>\n            <dd>\n              <div class="btn-group" data-field="orgSelector">\n                <button type="button" id="selector-org" class="btn btn-default dropdown-toggle" data-toggle="dropdown" data-field="button">\n                  <span id="selector-org-value">{{selectedOrg.name}}</span> &nbsp;&nbsp;<span class="caret"></span>\n                </button>\n                <ul class="dropdown-menu" data-field="organizations">\n                   <li ng-repeat="org in organizations"><a href="#" ng-click="setOrg( org )">{{ org.name }}</a></li>\n                </ul>\n              </div>\n            </dd>\n          </dl>\n          <dl class="slash">\n            <dt apiman-i18n-skip>&nbsp;</dt>\n            <dd>\n              <span class="divider" apiman-i18n-skip>/</span>\n            </dd>\n          </dl>\n          <dl class="name">\n            <dt apiman-i18n-key="application-name">Application Name</dt>\n            <dd>\n              <input ng-model="app.name" data-field="name" type="text" class="apiman-form-control form-control entityname" id="apiman-entityname" apiman-i18n-key="enter-app-name" placeholder="Enter application name..."></input>\n            </dd>\n          </dl>\n        </div>\n        <!-- Initial Application Version -->\n        <div class="row">\n          <dl>\n            <dt apiman-i18n-key="initial-version">Initial Version</dt>\n            <dd>\n              <input ng-model="app.initialVersion" data-field="version" type="text" class="apiman-form-control form-control version" id="apiman-version"></input>\n            </dd>\n          </dl>\n        </div>\n        <!-- Description of app -->\n        <div class="row">\n          <dl>\n            <dt apiman-i18n-key="description">Description</dt>\n            <dd>\n              <textarea ng-model="app.description" class="apiman-form-control form-control description" id="apiman-description" apiman-i18n-key="enter-app-description" placeholder="Enter application description (optional)..."></textarea>\n            </dd>\n          </dl>\n        </div>\n      </div>\n      <div ng-hide="organizations.length > 0" class="apiman-no-content container-fluid">\n        <div class="row">\n          <div class="col-md-12">\n            <p class="apiman-no-entities-description" apiman-i18n-key="missing-create-app-permission">You don\'t have permission to create an Application in any of your Organizations (or you aren\'t in any orgs)!  Please become a member of an existing Organization or create a new one before trying to create an Application.</p>\n          </div>\n        </div>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Create Button -->\n      <div class="row">\n        <button id="create-app" ng-disabled="!app.name || !app.initialVersion || !selectedOrg" apiman-action-btn="" class="btn btn-primary" data-field="createButton" apiman-i18n-key="create-application" placeholder="Creating..." data-icon="fa-cog" ng-click="saveNewApp()">Create Application</button>\n        <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/new-appversion.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.NewAppVersionController" id="form-page" class="container apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="new-app-version">New Application Version</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p apiman-i18n-key="new-appversion-help-text" class="col-md-6 apiman-label-faded">Create a new version of this Application, allowing multiple different versions of the Application to be managed at the same time.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Application Version -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="version">Version</dt>\n          <dd>\n            <input ng-model="appversion.version" type="text" class="apiman-form-control form-control version" id="apiman-version" apiman-i18n-key="enter-app-version" placeholder="Enter version..."></input>\n          </dd>\n        </dl>\n      </div>\n      <div class="row">\n        <dl>\n          <dd>\n            <table>\n              <tr>\n                <td><input ng-model="appversion.clone" type="checkbox" id="cloneCB" data-field="cloneCB"></input></td>\n                <td><label style="margin-left: 4px; padding-top: 2px" for="cloneCB" apiman-i18n-key="make-clone">Make a clone of the previously selected version (copy all policies and settings)</label></td>\n              </tr>\n            </table>\n          </dd>\n        </dl>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Create Button -->\n      <div class="row">\n        <button id="create-version" ng-disabled="!appversion.version" apiman-action-btn="" class="btn btn-primary" data-field="createButton" apiman-i18n-key="create-version" placeholder="Creating..." data-icon="fa-cog" ng-click="saveNewAppVersion()">Create Version</button>\n        <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n    </div> <!-- /container -->\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/new-contract.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.NewContractController" id="form-page" class="container apiman-new-contract apiman-entity-new page" data-field="page">\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="new-contract">New Contract</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p class="col-md-6 apiman-label-faded" apiman-i18n-key="new-contract-help-text" class="apiman-label-faded">Creating a Contract allows you to connect an Application to a Service via a particular Plan offered by the Service.  You would want to do this so that your Application can invoke the Service successfully.  Note that this is not necessary if the Service is public.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n\n      <div id="new-contract-form" class="row">\n        <div class="col-md-6">\n          <div class="application" ng-class="{ selected : selectedAppVersion }">\n            <div class="title"><i class="fa fa-gears fa-fw"></i> <span apiman-i18n-key="from-app">From Application</span></div>\n            <div class="body">\n              <p apiman-i18n-key="new-contract.app-description">\n                The Application that will be used as the source of the new Service Contract.  Choose one \n                of your available Applications below, and then choose an application version.\n              </p>\n              <div class="center-content" ng-show="apps.length > 0">\n                <select id="app" ng-model="selectedApp" apiman-select-picker="" class="selectpicker" data-live-search="true" apiman-i18n-key="select-app" title="Select an Application" ng-options="(app.organizationName + \' / \' + app.name) for app in apps"></select>\n                <span class="slash" apiman-i18n-skip>&#8680;</span>\n                <select id="app-version" ng-model="selectedAppVersion" apiman-select-picker="appVersions" class="selectpicker" apiman-i18n-key="select-app-version" title="Select a Version" ng-options="version for version in appVersions">\n                </select>\n              </div>\n              <div class="alert alert-warning" ng-show="apps.length > 0 && selectedApp && appVersions.length == 0">\n                 <span class="pficon pficon-info"></span>\n                 <span apiman-i18n-key="new-contract.no-unregistered-app-versions">\n                   There are no (unregistered) versions of the selected application.  Note: you may only create\n                   Contracts in Applications that have not yet been registered.\n                 </span>\n              </div>\n              <div class="alert alert-warning" ng-show="apps.length == 0">\n                 <span class="pficon pficon-info"></span>\n                 <span apiman-i18n-key="new-contract.no-apps-found">\n                   We couldn\'t find any Applications for you - you must have at least one (not yet registered)\n                   Application in order to create a Contract.\n                 </span>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <div class="clearfix"></div>\n\n        <div class="col-md-6">\n          <div class="arrow to-plan-arrow" apiman-i18n-skip>&nbsp;</div>\n        </div>\n\n        <div class="clearfix"></div>\n      \n        <div class="col-md-6">\n          <div class="plan" ng-class="{ selected : selectedPlan }">\n            <div class="title"><i class="fa fa-bar-chart-o fa-fw"></i> <span apiman-i18n-key="using-plan">Using Plan</span></div>\n            <div class="body">\n              <p ng-show="!plans" apiman-i18n-key="new-contract.choose-valid-service-msg">\n                 Please choose a valid Service below before selecting the Plan you wish to use for\n                 this Contract (either you have not selected a Service or the Service has no \n                 available plans).\n              </p>\n              <p apiman-i18n-key="new-contract.plan-description" ng-show="plans" apiman-i18n-key="new-contract.choose-plan-msg">\n                Use the drop-down below to choose one of the Plans made available by the selected Service.\n              </p>\n              <div class="center-content" ng-show="plans">\n                <select id="plan" ng-model="selectedPlan" apiman-select-picker="" class="selectpicker" apiman-i18n-key="select-plan" title="Select a Plan" ng-options="plan.planName for plan in plans">\n                </select>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="clearfix"></div>\n\n        <div class="col-md-6">\n          <div class="arrow to-service-arrow" apiman-i18n-skip>&nbsp;</div>\n        </div>\n\n        <div class="clearfix"></div>\n\n        <div class="col-md-6">\n          <div class="service" ng-class="{ selected : selectedService }">\n            <div class="title"><i class="fa fa-puzzle-piece fa-fw"></i> <span apiman-i18n-key="to-service">To Service</span></div>\n            <div class="body">\n              <p apiman-i18n-key="new-contract.service-description">\n                Use this section to choose what Service the Application will be consuming (aka the\n                "target" of this Service Contract).\n              </p>\n              <div class="center-content">\n                <button ng-click="selectService()" class="btn btn-default btn-svc" ng-show="selectedService">\n                  <span>{{ selectedService.organizationName }}</span>\n                  <span apiman-i18n-skip> / </span>\n                  <span class="emphasis">{{ selectedService.name }}</span>\n                  <span apiman-i18n-skip>&#8680;</span>\n                  <span>{{ selectedService.version }}</span>\n                </button>\n                <button id="service" ng-click="selectService()" class="btn btn-default btn-svc btn-primary" ng-show="!selectedService">\n                  <span apiman-i18n-key="select-service">Select a Service</span>\n                </button>\n                <div class="clearfix" />\n                <span style="font-size: 10px" ng-show="selectedService" apiman-i18n-key="new-contract.click-to-change">(click to change)</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div> <!-- /new-contract-form -->\n      \n      <div class="row hr-row">\n        <hr/>\n      </div>\n\n      <div class="row">\n        <button id="create-contract" ng-click="createContract()" apiman-action-btn="" ng-disabled="!selectedApp || !selectedAppVersion || !selectedPlan || !selectedService" class="btn btn-primary" data-field="createButton" apiman-i18n-key="create-contract" placeholder="Creating..." data-icon="fa-cog">Create Contract</button>\n        <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n\n    </div> <!-- /container -->\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/new-gateway.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.NewGatewayController" id="form-page" class="container apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <fieldset>\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="new-gateway">New Gateway</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p apiman-i18n-key="new-gateway-help-text" class="col-md-6 apiman-label-faded">Create a new API Gateway for use by Services.  When publishing a Service, at least one Gateway must be specified so that service configuration details can be published to the appropriate place.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Choose gateway name -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="gateway-name">Gateway Name</dt>\n          <dd>\n            <input id="apiman-gateway-name" ng-model="gateway.name" name="name" type="text" class="apiman-form-control form-control name entityname" apiman-i18n-key="enter-gateway-name" placeholder="Enter gateway name..."></input>\n          </dd>\n        </dl>\n      </div>\n      <!-- Description of gateway -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="description">Description</dt>\n          <dd>\n            <textarea ng-model="gateway.description" data-field="description" type="text" class="apiman-form-control form-control description" id="apiman-description" apiman-i18n-key="enter-gateway-description" placeholder="Enter gateway description (optional)..."></textarea>\n          </dd>\n        </dl>\n      </div>\n      <!-- Configuration Endpoint -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="config-endpoint">Configuration Endpoint</dt>\n          <dd>\n            <input ng-model="configuration.endpoint" type="url" name="configEndpoint" type="text" class="apiman-form-control form-control description" id="config-endpoint" apiman-i18n-key="enter-gateway-config-endpoint" placeholder="Enter configuration endpoint..."></input>\n          </dd>\n        </dl>\n      </div>\n      <!-- Authentication Credentials -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="credentials">Configuration Endpoint Credentials</dt>\n          <dd>\n            <table class="form-table">\n              <tr>\n                <td class="td-label">\n                  <span apiman-i18n-key="username">Username:</span>\n                </td>\n                <td>\n                  <input id="endpoint-username" ng-model="configuration.username" name="username" type="text" class="apiman-form-control form-control name entityname" apiman-i18n-key="enter-gateway-username" placeholder="Username..."></input>\n                </td>\n              </tr>\n              <tr>\n                <td class="td-label">\n                  <span apiman-i18n-key="password">Password:</span>\n                </td>\n                <td>\n                  <input id="endpoint-password" ng-model="configuration.password" data-field="password" type="password" class="apiman-form-control form-control name entityname" apiman-i18n-key="enter-gateway-password" placeholder="Password..."></input>\n                </td>\n              </tr>\n              <tr>\n                <td></td>\n                <td>\n                  <input id="endpoint-password-confirm" ng-model="passwordConfirm" data-field="passwordConfirm" type="password" class="apiman-form-control form-control name entityname" apiman-i18n-key="enter-gateway-password-confirm" placeholder="Confirm Password..."></input>\n                </td>\n              </tr>\n            </table>\n          </dd>\n        </dl>\n      </div>\n      <div class="row">\n        <button id="test-gateway" ng-disabled="!isValid" apiman-action-btn="" data-field="testButton" ng-click="testGateway()" class="btn btn-default" name="testButton" apiman-i18n-key="test-gateway" placeholder="Testing..." data-icon="fa-cog">Test Gateway</button>\n      </div>\n      <div class="row" ng-show="testResult == \'success\'">\n        <div class="alert alert-success description" style="margin-top: 10px">\n          <span class="pficon pficon-ok"></span>\n          <strong apiman-i18n-key="gateway-config-valid.title">Gateway Configuration Valid</strong> \n          <div apiman-i18n-key="gateway-config-valid.msg">Your Gateway configuration is correct.  Great job!</div>\n        </div>\n      </div>\n      <div class="row" ng-show="testResult == \'error\'">\n        <div class="alert alert-danger description" style="margin-top: 10px">\n          <span class="pficon-layered">\n            <span class="pficon pficon-error-octagon"></span>\n            <span class="pficon pficon-error-exclamation"></span>\n          </span>\n          <strong apiman-i18n-key="gateway-config-invalid.title">Gateway Configuration Invalid</strong>\n          <div apiman-i18n-key="gateway-config-invalid.msg">Something has gone wrong when testing the Gateway.  Hopefully the details (below) will help you figure out what.</div>\n          <div style="margin-top: 8px">\n            <pre>{{ testErrorMessage }}</pre>\n          </div>\n        </div>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Create Button -->\n      <div class="row">\n        <button id="create-gateway" ng-disabled="!isValid" apiman-action-btn="" class="btn btn-primary" data-field="createButton" name="createButton" apiman-i18n-key="create-gateway" placeholder="Creating..." data-icon="fa-cog" ng-click="createGateway()">Create Gateway</button>\n        <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n      </fieldset>\n    </div> <!-- /container -->\n  </body>\n</html>\n'),
e.put("plugins/api-manager/html/forms/new-org.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.NewOrgController" class="container apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="new-organization">New Organization</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p apiman-i18n-key="new-org-help-text" class="col-md-6 apiman-label-faded">Create a new Organization within which to manage your Services and Applications.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Choose org and app name -->\n      <div class="row">\n        <dl class="name">\n          <dt apiman-i18n-key="organization-name">Organization Name</dt>\n          <dd>\n            <input ng-model="org.name" data-field="name" type="text" class="apiman-form-control form-control entityname" id="apiman-entityname" apiman-i18n-key="enter-org-name" placeholder="Enter organization name..."></input>\n          </dd>\n        </dl>\n      </div>\n      <!-- Description of app -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="description">Description</dt>\n          <dd>\n            <input ng-model="org.description" data-field="description" type="text" class="apiman-form-control form-control description" id="apiman-description" apiman-i18n-key="enter-org-description" placeholder="Enter description (optional)..."></input>\n          </dd>\n        </dl>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Add Button -->\n      <div class="row">\n        <button ng-disabled="!org.name" apiman-action-btn="" class="btn btn-primary" data-field="createButton" apiman-i18n-key="create-organization" placeholder="Creating..." data-icon="fa-cog"  ng-click="saveNewOrg()">Create Organization</button>\n        <a href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/new-plan.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.NewPlanController" id="form-page" class="container apiman-entity-new page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="new-plan">New Plan</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p apiman-i18n-key="new-plan-help-text" class="col-md-6 apiman-label-faded">Create a new Plan within the specified Organization, allowing you to assign groups of Policies to Services.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Choose org and plan name -->\n      <div class="row">\n        <dl class="org">\n          <dt apiman-i18n-key="organization">Organization</dt>\n          <dd>\n            <div class="btn-group">\n              <button type="button" id="selector-org" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n                <span id="selector-org-value">{{selectedOrg.name}}</span> &nbsp;&nbsp;<span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu">\n                <li ng-repeat="org in organizations"><a href="#" ng-click="setOrg( org )">{{ org.name }}</a></li>\n              </ul>\n            </div>\n          </dd>\n        </dl>\n        <dl class="slash">\n          <dt apiman-i18n-skip>&nbsp;</dt>\n          <dd>\n            <span class="divider" apiman-i18n-skip>/</span>\n          </dd>\n        </dl>\n        <dl class="name">\n          <dt apiman-i18n-key="plan-name">Plan Name</dt>\n          <dd>\n            <input ng-model="plan.name" type="text" class="apiman-form-control form-control entityname" id="apiman-entityname" apiman-i18n-key="enter-plan-name" placeholder="Enter plan name..."></input>\n          </dd>\n        </dl>\n      </div>\n      <!-- Initial Plan Version -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="initial-version">Initial Version</dt>\n          <dd>\n            <input ng-model="plan.initialVersion" type="text" class="apiman-form-control form-control version" id="apiman-version" value="1.0"></input>\n          </dd>\n        </dl>\n      </div>\n      <!-- Description of plan -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="description">Description</dt>\n          <dd>\n            <textarea ng-model="plan.description" class="apiman-form-control form-control description" id="apiman-description" apiman-i18n-key="enter-plan-description" placeholder="Enter plan description (optional)..."></textarea>\n          </dd>\n        </dl>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Create Button -->\n      <div class="row">\n        <button id="create-plan" apiman-action-btn="" class="btn btn-primary" data-field="createButton" apiman-i18n-key="create-plan" placeholder="Creating..." data-icon="fa-cog"  ng-click="saveNewPlan()">Create Plan</button>\n        <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n    </div> <!-- /container -->\n    </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/new-planversion.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.NewPlanVersionController" id="form-page" class="container apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="new-plan-version">New Plan Version</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p apiman-i18n-key="new-planversion-help-text" class="col-md-6 apiman-label-faded">Create a new version of this Plan, allowing multiple different versions of the Plan to be managed at the same time.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Plan Version -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="version">Version</dt>\n          <dd>\n            <input ng-model="planversion.version" type="text" class="apiman-form-control form-control version" id="apiman-version" apiman-i18n-key="enter-plan-version" placeholder="Enter version..."></input>\n          </dd>\n        </dl>\n      </div>\n      <div class="row">\n        <dl>\n          <dd>\n            <table>\n              <tr>\n                <td><input ng-model="planversion.clone" type="checkbox" id="cloneCB" data-field="cloneCB"></input></td>\n                <td><label style="margin-left: 4px; padding-top: 2px" for="cloneCB" apiman-i18n-key="make-clone">Make a clone of the previously selected version (copy all policies and settings)</label></td>\n              </tr>\n            </table>\n          </dd>\n        </dl>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Create Button -->\n      <div class="row">\n        <button id="create-version" ng-disabled="!planversion.version" apiman-action-btn="" class="btn btn-primary" data-field="createButton" apiman-i18n-key="create-version" placeholder="Creating..." data-icon="fa-cog" ng-click="saveNewPlanVersion()">Create Version</button>\n        <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n    </div> <!-- /container -->\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/new-plugin.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.NewPluginController" id="form-page" class="container apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n    <div id="form-page" class="" data-field="page">\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="new-plugin">Add Plugin</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p apiman-i18n-key="new-plugin-help-text" class="col-md-6 apiman-label-faded">Adds a plugin to the API Manager.  A plugin is identified by its "coordinates", which are its maven artifact details (groupId, artifactId, version, classifier, type).  Enter valid values below and click add!</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <div class="row">\n        <h3 class="" apiman-i18n-key="plugin-coordinates">Plugin Coordinates</h3>\n      </div>\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="group-id">Group Id</dt>\n          <dd>\n            <input ng-model="plugin.groupId" id="apiman-group-id" data-field="groupId" type="text" class="apiman-form-control form-control entityname" apiman-i18n-key="enter-gav-groupid" placeholder="Enter groupId..."></input>\n          </dd>\n        </dl>\n      </div>\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="artifact-id">Artifact Id</dt>\n          <dd>\n            <input id="artifact-id" ng-model="plugin.artifactId" type="text" class="apiman-form-control form-control entityname" apiman-i18n-key="enter-gav-artifactid" placeholder="Enter artifactId..."></input>\n          </dd>\n        </dl>\n      </div>\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="version">Version</dt>\n          <dd>\n            <input id="version" ng-model="plugin.version" type="text" class="apiman-form-control form-control entityname" apiman-i18n-key="enter-gav-version" placeholder="Enter version (e.g. 1.0)..." style="width: 175px"></input>\n          </dd>\n        </dl>\n      </div>\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="classifier.optional">Classifier (optional)</dt>\n          <dd>\n            <input id="classifier" ng-model="plugin.classifier" type="text" class="apiman-form-control form-control entityname" apiman-i18n-key="enter-gav-classifier" placeholder="Enter classifier..."></input>\n          </dd>\n        </dl>\n      </div>\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="type.optional">Type (optional)</dt>\n          <dd>\n            <input id="type" ng-model="plugin.type" type="text" class="apiman-form-control form-control entityname" apiman-i18n-key="enter-gav-type" placeholder="Enter type (e.g. jar)..." style="width: 175px"></input>\n          </dd>\n        </dl>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Create Button -->\n      <div class="row">\n        <button id="add-plugin" ng-disabled="!isValid" apiman-action-btn="" class="btn btn-primary" data-field="addButton" apiman-i18n-key="add-plugin" placeholder="Adding..." data-icon="fa-cog" ng-click="addPlugin()">Add Plugin</button>\n        <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n    </div> <!-- /container -->\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/new-policy.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.NewPolicyController" id="form-page" class="container apiman-new-policy apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <h2 class="title" data-field="heading" apiman-i18n-key="add-policy">Add Policy</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p class="col-md-6 apiman-label-faded" apiman-i18n-key="new-policy-help-text" class="apiman-label-faded">Adding a policy will allow its specific functionality to be applied to the service invocation as part of the overall Policy Chain.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Policy Type -->\n      <div class="row policy-type-row">\n        <dl>\n          <dt apiman-i18n-key="policy-type">Policy Type</dt>\n          <dd>\n            <select id="policy-type" ng-model="selectedDefId" apiman-select-picker="" class="selectpicker" data-live-search="true" apiman-i18n-key="new-policy.choose-policy-type" title="Choose a policy type...">\n              <option value="__null__" data-content="<i class=\'fa fa-inline fa-fw\'></i> <span class=\'apiman-label-faded\'>Choose a policy type...</span>" apiman-i18n-key="new-policy.choose-policy-type">Choose a policy type...</option>\n              <option value="{{ def.id }}" ng-repeat="def in policyDefs | orderBy : \'name.toLowerCase()\'" data-content="<i class=\'fa fa-inline fa-fw fa-{{ def.icon }}\'></i> <span>{{ def.name }}</span>">{{ def.name }}</option>\n            </select>\n          </dd>\n        </dl>\n      </div>\n\n      <!-- Policy Type-specific config -->\n      <div class="row" ng-show="include">\n        <h3 data-field="policyHeading">{{ selectedDef.name }} <span apiman-i18n-key="configuration">Configuration</span></h3>\n        <div class="apiman-box col-md-9 container">\n          <div ng-include="include"></div>\n        </div>\n      </div>\n\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n\n      <!-- Create Button -->\n      <div class="row">\n        <button id="add-policy" ng-disabled="!isValid" apiman-action-btn="" class="btn btn-primary" data-field="createButton" apiman-i18n-key="create-policy" placeholder="Adding..." data-icon="fa-cog" ng-click="addPolicy()">Add Policy</button>\n        <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n    </div> <!-- /container -->\n    </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/new-role.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.NewRoleController" id="form-page" class="container apiman-entity-new page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="new-role">New Role</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p apiman-i18n-key="new-role-help-text" class="col-md-6 apiman-label-faded">Create a new Role Definition that may be used to grant specific sets of permissions to users within Organizations.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Choose role name -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="role-name">Role Name</dt>\n          <dd>\n            <input id="apiman-entityname" ng-model="role.name" type="text" class="apiman-form-control form-control name entityname" apiman-i18n-key="enter-role-name" placeholder="Enter role name..."></input>\n          </dd>\n        </dl>\n      </div>\n      <!-- Description of role -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="description">Description</dt>\n          <dd>\n            <input data-field="description" ng-model="role.description" type="text" class="apiman-form-control form-control description" id="apiman-description" apiman-i18n-key="enter-role-description" placeholder="Enter role description (optional)..."></input>\n          </dd>\n        </dl>\n      </div>\n      <!-- Auto-grant this role -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="auto-grant">Auto-Grant Role</dt>\n          <dd>\n             <div class="checkbox">\n               <label>\n                 <input id="auto-grant" ng-model="role.autoGrant" data-field="autoGrant" type="checkbox"></input> \n                 <span apiman-i18n-key="grant-role-automatically">Grant this role automatically when creating a new Organization</span>\n               </label>\n             </div>\n          </dd>\n        </dl>\n      </div>\n      <!-- Permissions -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="permissions">Permissions</dt>\n          <dd>\n            <div class="container">\n              <div class="row" data-field="permissions">\n                <div class="col-md-3">\n                  <div class="checkbox">\n                    <label>\n                      <input id="org-view" ng-model="rolePermissions[\'orgView\']" data-field="orgView" type="checkbox"></input> <span apiman-i18n-key="permission.orgView">Organization View</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="org-edit" ng-model="rolePermissions[\'orgEdit\']" data-field="orgEdit" type="checkbox"></input> <span apiman-i18n-key="permission.orgEdit">Organization Edit</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="org-admin" ng-model="rolePermissions[\'orgAdmin\']" data-field="orgAdmin" type="checkbox"></input> <span apiman-i18n-key="permission.orgAdmin">Organization Admin</span>\n                    </label>\n                  </div>\n                </div>\n                <div class="col-md-2">\n                  <div class="checkbox">\n                    <label>\n                      <input id="plan-view" ng-model="rolePermissions[\'planView\']" data-field="planView" type="checkbox"></input> <span apiman-i18n-key="permission.planView">Plan View</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="plan-edit" ng-model="rolePermissions[\'planEdit\']" data-field="planEdit" type="checkbox"></input> <span apiman-i18n-key="permission.planEdit">Plan Edit</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="plan-admin" ng-model="rolePermissions[\'planAdmin\']" data-field="planAdmin" type="checkbox"></input> <span apiman-i18n-key="permission.planAdmin">Plan Admin</span>\n                    </label>\n                  </div>\n                </div>\n                <div class="col-md-2">\n                  <div class="checkbox">\n                    <label>\n                      <input id="svc-view" ng-model="rolePermissions[\'svcView\']" data-field="svcView" type="checkbox"></input> <span apiman-i18n-key="permission.svcView">Service View</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="svc-edit" ng-model="rolePermissions[\'svcEdit\']" data-field="svcEdit" type="checkbox"></input> <span apiman-i18n-key="permission.svcEdit">Service Edit</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="svc-admin" ng-model="rolePermissions[\'svcAdmin\']" data-field="svcAdmin" type="checkbox"></input> <span apiman-i18n-key="permission.svcAdmin">Service Admin</span>\n                    </label>\n                  </div>\n                </div>\n                <div class="col-md-2">\n                  <div class="checkbox">\n                    <label>\n                      <input id="app-view" ng-model="rolePermissions[\'appView\']" data-field="appView" type="checkbox"></input> <span apiman-i18n-key="permission.appView">Application View</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="app-edit" ng-model="rolePermissions[\'appEdit\']" data-field="appEdit" type="checkbox"></input> <span apiman-i18n-key="permission.appEdit">Application Edit</span>\n                    </label>\n                  </div>\n                  <div class="checkbox">\n                    <label>\n                      <input id="app-admin" ng-model="rolePermissions[\'appAdmin\']" data-field="appAdmin" type="checkbox"></input> <span apiman-i18n-key="permission.appAdmin">Application Admin</span>\n                    </label>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </dd>\n        </dl>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Create Button -->\n      <div class="row">\n        <button id="create-role" ng-disabled="!isValid" apiman-action-btn="" class="btn btn-primary" data-field="createButton" apiman-i18n-key="create-role" placeholder="Creating..." data-icon="fa-cog" ng-click="addRole()">Create Role</button>\n        <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n    </div> <!-- /container -->\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/new-service.html",'    <!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.NewServiceController" class="container apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="new-service">New Service</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p apiman-i18n-key="new-service-help-text" class="col-md-6 apiman-label-faded">Create a new Service within the specified Organization, allowing Applications to begin consuming it.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Choose org and service name -->\n      <div ng-show="organizations.length > 0">\n        <div class="row">\n          <dl class="org">\n            <dt apiman-i18n-key="organization">Organization</dt>\n            <dd>\n              <div class="btn-group" data-field="orgSelector">\n                <button type="button" id="selector-org" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n                  <span data-field="selectorLabel" id="selector-org-value">{{selectedOrg.name}}</span> &nbsp;&nbsp;<span class="caret"></span>\n                </button>\n                <ul class="dropdown-menu" data-field="organizations">\n                   <li ng-repeat="org in organizations"><a href="#" ng-click="setOrg( org )">{{ org.name }}</a></li>\n                </ul>\n              </div>\n            </dd>\n          </dl>\n          <dl class="slash">\n            <dt apiman-i18n-skip>&nbsp;</dt>\n            <dd>\n              <span class="divider" apiman-i18n-skip>/</span>\n            </dd>\n          </dl>\n          <dl class="name">\n            <dt apiman-i18n-key="service-name">Service Name</dt>\n            <dd>\n              <input ng-model="service.name" data-field="name" type="text" class="apiman-form-control form-control entityname" id="apiman-entityname" apiman-i18n-key="enter-service-name" placeholder="Enter service name..."></input>\n            </dd>\n          </dl>\n        </div>\n        <!-- Initial Service Version -->\n        <div class="row">\n          <dl>\n            <dt apiman-i18n-key="initial-version">Initial Version</dt>\n            <dd>\n              <input ng-model="service.initialVersion" data-field="version" type="text" class="apiman-form-control form-control version" id="apiman-version" value="1.0"></input>\n            </dd>\n          </dl>\n        </div>\n        <!-- Description of service -->\n        <div class="row">\n          <dl>\n            <dt apiman-i18n-key="description">Description</dt>\n            <dd>\n              <textarea ng-model="service.description" class="apiman-form-control form-control description" id="apiman-description" apiman-i18n-key="enter-service-description" placeholder="Enter service description (optional)..."></textarea>\n            </dd>\n          </dl>\n        </div>\n      </div>\n      <div ng-hide="organizations.length > 0" class="apiman-no-content container-fluid">\n        <div class="row">\n          <div class="col-md-12">\n            <p class="apiman-no-entities-description" apiman-i18n-key="missing-create-service-permission">You don\'t have permission to create a Service in any of your Organizations (or you aren\'t in any orgs)!  Please become a member of an existing Organization or create a new one before trying to create a Service.</p>\n          </div>\n        </div>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Create Button -->\n      <div class="row">\n        <button id="create-service" ng-disabled="!service.name || !service.initialVersion || !selectedOrg" apiman-action-btn="" class="btn btn-primary" data-field="createButton" apiman-i18n-key="create-service" placeholder="Creating..." data-icon="fa-cog" ng-click="saveNewService()">Create Service</button>\n        <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n    </div> <!-- /container -->\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/forms/new-serviceversion.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.NewServiceVersionController" class="container apiman-entity-new page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="new-service-version">New Service Version</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p apiman-i18n-key="new-serviceversion-help-text" class="col-md-6 apiman-label-faded">Create a new version of this Service, allowing multiple different versions of the Service to be managed at the same time.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Service Version -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="version">Version</dt>\n          <dd>\n            <input ng-model="svcversion.version" data-field="version" type="text" class="apiman-form-control form-control version" id="apiman-version" apiman-i18n-key="enter-service-version" placeholder="Enter version..."></input>\n          </dd>\n        </dl>\n      </div>\n      <div class="row">\n        <dl>\n          <dd>\n            <input ng-model="svcversion.clone" type="checkbox" id="cloneCB" data-field="cloneCB"></input>\n            <label for="cloneCB" apiman-i18n-key="make-clone">Make a clone of the previously selected version (copy all policies and settings)</label>\n          </dd>\n        </dl>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Create Button -->\n      <div class="row">\n        <button id="create-version" ng-disabled="!svcversion.version" apiman-action-btn="" class="btn btn-primary" data-field="createButton" apiman-i18n-key="create-version" placeholder="Creating..." data-icon="fa-cog" ng-click="saveNewServiceVersion()">Create Version</button>\n        <a id="cancel" href="javascript:window.history.back()" class="btn btn-default btn-cancel" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n    </div> <!-- /container -->\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/org/apiman-user-card-back.html",'<div class="apiman-card" data-field="card">\n  <div class="back active">\n    <div class="title">\n      <div class="explanation" data-field="editExplanation">Assign roles to {{member.userId}}</div>\n    </div>\n    <div class="body">\n      <div class="card-edit-details">\n        <div class="roles">\n          <select class="selectpicker" ng-model="updatedRoles" apiman-i18n-key="select-member-role" title="Select at least one role..."\n                  apiman-select-picker="" multiple ng-options="role.id as role.name for role in roles"\n                  ng-select="member.roles">\n          </select>\n        </div>\n        <div class="actions">\n          <button class="btn btn-primary btn-xs btn-apply" apiman-i18n-key="apply" placeholder="Applying..." data-icon="fa-cog" ng-click="updateRoles(updatedRoles) && flipCard(front)">Apply</button>\n\n          <button class="btn btn-default btn-xs btn-cancel" ng-click="flipCard(front)" apiman-i18n-key="cancel">Cancel</button>\n\n          <button class="btn btn-danger btn-xs btn-revoke-all" apiman-i18n-key="revoke-all" placeholder="Revoking..." ng-click="revokeAll()" data-icon="fa-cog">Revoke All</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/api-manager/html/org/apiman-user-card-front.html",'<!-- One card per member -->\n<div class="apiman-card" data-field="card">\n  <div class="front active">\n    <div class="title">\n      <div class="name" data-field="fullName" data-role="dummy">{{member.userName}}</div>\n      <div class="name" data-field="userId" data-role="dummy">({{member.userId}})</div>\n      <div class="actions">\n        <a href="#" data-field="editButton" ng-click="flipCard(back)" apiman-i18n-key="edit">Edit</a>\n      </div>\n    </div>\n    <div class="body">\n      <div class="card-icon">\n        <i class="fa fa-user"></i>\n      </div>\n      <div class="card-details">\n        <div class="card-details-item">\n          <div class="card-label" apiman-i18n-key="email-label">Email:</div>\n          <div class="card-value"><a href="mailto:{{member.email}}" data-field="email">{{member.email}}</a></div>\n        </div>\n        <div class="card-details-item">\n          <div class="card-label" apiman-i18n-key="roles-label">Role(s):</div>\n          <div class="card-value" data-field="roles">\n            {{ joinRoles(member.roles) }}\n          </div>\n        </div>\n        <div class="card-details-item">\n          <i class="fa fa-clock-o"></i>\n          <div class="apiman-label-faded card-value" apiman-i18n-key="joined-on">Joined on</div>\n          <div class="card-value" data-field="joinedOn" data-role="dummy">{{ member.joinedOn | date:\'yyyy-MM-dd\' }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),
e.put("plugins/api-manager/html/org/apiman-user-entry.html",'<a href="#" class="item" ng-class="{selected: isSelectedUser == true}" ng-click="selectThisUser()">\n  <i class="fa fa-user fa-fw"></i>\n  <span class="">{{ user.fullName }}</span>\n  <span apiman-i18n-skip>(</span><span class="">{{ user.username }}</span><span apiman-i18n-skip>)</span>\n</a>\n'),e.put("plugins/api-manager/html/org/org-activity.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.OrgActivityController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/org/org_bc.include\'"></div>\n      <div class="row">\n        <div ng-include="\'plugins/api-manager/html/org/org_entity.include\'"></div>\n        <!-- Center Content -->\n        <div class="col-md-8">\n          <div class="apiman-entitytabs">\n            <div ng-include="\'plugins/api-manager/html/org/org_tabs.include\'"></div>\n            <div id="entitytabsContent" class="tab-content">\n\n              <!-- Activity Tab Content -->\n              <div class="tab-pane active" id="tab-activity">\n                <!-- The org\'s activity stream -->\n                <apiman-activity model="auditEntries" next="getNextPage"/>\n              </div>\n              <!-- End Activity Tab Content -->\n              \n            </div>\n          </div>\n        </div>\n        <!-- /Center Content -->\n        \n      </div>\n    </div> <!-- /container -->\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/org/org-apps.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.OrgAppsController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/org/org_bc.include\'"></div>\n      <div class="row">\n        <div ng-include="\'plugins/api-manager/html/org/org_entity.include\'"></div>\n        <!-- Center Content -->\n        <div class="col-md-8">\n          <div class="apiman-entitytabs">\n            <div ng-include="\'plugins/api-manager/html/org/org_tabs.include\'"></div>\n            <div id="entitytabsContent" class="tab-content">\n\n              <!-- Applications Tab Content -->\n              <div class="tab-pane active" id="tab-apps">\n                <div class="apiman-filters apiman-applications-filters">\n                  <div>\n                    <apiman-search-box id="apps-filter" apiman-i18n-key="filter-org-apps" function="filterApps" placeholder="Filter by application name..." />\n                  </div>\n                  <a apiman-permission="appEdit" data-field="toNewApp" href="{{ pluginName }}/new-app" class="btn btn-primary pull-right" apiman-i18n-key="new-app">New App</a>\n                </div>\n                <div class="clearfix"></div>\n                <!-- The list of applications in the org -->\n                <div class="apiman-applications" data-field="applications">\n\n                  <div class="apiman-no-content container-fluid" ng-hide="apps.length > 0">\n                    <div class="row">\n                      <div class="col-md-9">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-apps-found-for-org">It looks like there aren\'t (yet) any applications in this organization! Now might be a good time to click the New App button up above...</p>\n                      </div>\n                      <div class="col-md-3">\n                        <div class="apiman-no-entities-arrow"></div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="apiman-no-content container-fluid" ng-show="apps.length > 0 && filteredApps.length == 0">\n                    <div class="row">\n                      <div class="col-md-12">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-apps-found-for-filter">No applications found matching your filter criteria - please try searching for something different.</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="container-fluid apiman-summaryrow" ng-repeat="app in filteredApps">\n                    <div class="row">\n                      <span class="title"><a href="{{ pluginName }}/orgs/{{org.id}}/apps/{{app.id}}">{{ app.name }}</a></span>\n                    </div>\n                    <div class="row">\n                      <span class="description">{{ app.description }}\n                      </span>\n                    </div>\n                    <hr/>\n                  </div>\n                </div>\n              </div>\n              <!-- End Applications Tab Content -->\n              \n            </div>\n          </div>\n        </div>\n        <!-- /Center Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/org/org-manage-members.html",'<!DOCTYPE html>\n<html lang="en">\n\n<head>\n  <meta charset="utf-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n</head>\n\n<body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.OrgManageMembersController as membersCtrl" class="container page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/org/org-manage-members_bc.include\'"></div>\n      <div class="row">\n        <div class="col-md-12">\n          <div class="apiman-filters apiman-members-filters">\n            <div>\n              <!-- Search for Members by name -->\n              <apiman-search-box id="members-filter" apiman-i18n-key="filter-members" function="filterMembers" placeholder="Filter by member name or id..."></api-manager-search-box>\n            </div>\n            <select apiman-i18n-key="manage-members.filter-by-roles" title="Filter by role(s)..." ng-options="role.id as role.name for role in roles" ng-model="selectedRoles" class="selectpicker" apiman-select-picker="" multiple ng-change="filterMembers(filterValue)">\n            </select>\n            <a href="{{ pluginName }}/orgs/{{ organizationId }}/new-member" class="btn btn-primary pull-right" apiman-i18n-key="add-member">Add Member</a>\n          </div>\n        </div>\n      </div>\n      <!-- Member list (cards) -->\n      <div class="row">\n        <div class="col-md-12 apiman-manage-members">\n          <div class="container-fluid apiman-cards" data-field="cards">\n            <div ng-repeat="member in filteredMembers">\n              <apiman-user-card member="member" roles="roles" org-id="{{ organizationId }}"></api-manager-user-card>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</body>\n\n</html>\n'),e.put("plugins/api-manager/html/org/org-members.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.OrgMembersController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/org/org_bc.include\'"></div>\n      <div class="row">\n        <div ng-include="\'plugins/api-manager/html/org/org_entity.include\'"></div>\n        <!-- Center Content -->\n        <div class="col-md-8">\n          <div class="apiman-entitytabs">\n            <ul id="entitytabs" class="nav nav-tabs">\n              <li apiman-permission="planView"><a href="{{ pluginName }}/orgs/{{org.id}}/plans" data-field="toOrgPlans" apiman-i18n-key="plans">Plans</a></li>\n              <li apiman-permission="svcView"><a href="{{ pluginName }}/orgs/{{org.id}}/services" data-field="toOrgServices" apiman-i18n-key="services">Services</a></li>\n              <li apiman-permission="appView"><a href="{{ pluginName }}/orgs/{{org.id}}/apps" data-field="toOrgApps" apiman-i18n-key="applications">Applications</a></li>\n              <li class="active"><a href="{{ pluginName }}/orgs/{{org.id}}/members" data-field="toOrgMembers" apiman-i18n-key="members">Members</a></li>\n              <li class="pull-right"><a href="{{ pluginName }}/orgs/{{org.id}}/activity" data-field="toOrgActivity" apiman-i18n-key="activity">Activity</a></li>\n            </ul>\n            <div id="entitytabsContent" class="tab-content">\n\n              <!-- Members Tab Content -->\n              <div class="tab-pane active" id="tab-members">\n                <div class="apiman-filters apiman-members-filters">\n                  <div>\n                    <apiman-search-box id="members-filter" apiman-i18n-key="filter-members" function="filterMembers" apiman-i18n-key="org-members.filter-by-member-name" placeholder="Filter by member name..." />\n                  </div>\n                  <a apiman-permission="orgAdmin" href="{{ pluginName }}/orgs/{{org.id}}/manage-members" class="btn btn-default pull-right" data-field="toManageMembers" apiman-i18n-key="manage-members">Manage Members</a>\n                </div>\n                <div class="clearfix"></div>\n                <!-- The organization\'s list of members -->\n                <div class="apiman-members" data-field="members">\n\n                  <div class="apiman-no-content container-fluid" ng-hide="members.length > 0">\n                    <div class="row">\n                      <div class="col-md-12">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-members-found-for-org">This is very strange, but apparently this Organization has no members!  Highly irregular!</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="apiman-no-content container-fluid" ng-show="members.length > 0 && filteredMembers.length == 0">\n                    <div class="row">\n                      <div class="col-md-12">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-members-found-for-filter">No members found matching your filter criteria - please try searching for something different.</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="container-fluid apiman-summaryrow" ng-repeat="member in filteredMembers">\n                    <div class="row">\n                      <span class="title">\n                        <a href="{{ pluginName }}/users/{{ member.userId }}/orgs">{{ member.userName }}</a>\n                        <span class="secondary">({{ member.userId}})</span>\n                      </span>\n                      <a class="apiman-summaryrow-icon">\n                        <i class="fa fa-clock-o fa-fw"></i>\n                        <span apiman-i18n-key="joined-on" class="title-summary-item">Joined on</span>\n                        <span class="title-summary-item">{{ member.joinedOn | date:\'yyyy-MM-dd\' }}</span>\n                      </a>\n                    </div>\n                    <div class="row">\n                      <span class="description" ng-repeat="role in member.roles">\n                        {{ role.roleName}} {{ $last ? \'\' : ($index==member.roles.length-2) ? \' and \' : \', \' }}\n                      </span>\n                    </div>\n                    <hr/>\n                  </div>\n                </div>\n              </div>\n              <!-- End Members Tab Content -->\n\n            </div>\n          </div>\n        </div>\n        <!-- /Center Content -->\n\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/org/org-new-member.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    <script type="text/javascript" src="site.js"></script>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div id="form-page" class="container apiman-entity-new page" ng-controller="Apiman.OrgNewMemberController as onmCtrl" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div class="row">\n        <h2 class="title" apiman-i18n-key="new-member">New Member</h2>\n      </div>\n      <!-- Helpful hint -->\n      <div class="row">\n        <p apiman-i18n-key="new-member-help-text" class="col-md-6 apiman-label-faded">Add a member to this organization by searching for a User below.  Once the User is located, simply select their roles and click \'Add Member\'.</p>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- User search bar -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="find-user">Find a User</dt>\n          <dd>\n            <div class="" style="line-height: normal">\n              <form ng-submit="findUsers(searchText)">\n                <input ng-model="searchText" type="text" class="apiman-form-control form-control input-search" apiman-i18n-key="new-member.search-by-user" placeholder="Search by user name..."></input>\n                <button type="submit" apiman-action-btn="" class="btn btn-default btn-search" data-field="searchButton" apiman-i18n-key="search" data-icon="fa-cog" placeholder="Searching">Search</button>\n              </form>\n            </div>\n          </dd>\n        </dl>\n      </div>\n      <!-- User search results -->\n      <div class="row">\n        <div class="panel panel-default input-search-results">\n          <div class="panel-body container-fluid">\n            <div ng-hide="searchBoxValue.length > 0" apiman-i18n-key="new-member.search-for-users">(Search for users above)</div>\n            <div ng-show="searchBoxValue.length > 0 && queriedUsers.length == 0" apiman-i18n-key="new-member.no-users-found">(No users found)</div>\n            <apiman-user-entry user="user" selected-users="selectedUsers" ng-repeat="user in queriedUsers"></apiman-user-entry>\n          </div>\n        </div>\n      </div>\n      <!-- Role selections -->\n      <div class="row">\n        <dl>\n          <dt apiman-i18n-key="roles">Role(s)</dt>\n          <dd>\n            <div>\n              <select apiman-i18n-key="new-member.select-roles" title="Select role(s)..." ng-options="role.id as role.name for role in roles"\n                ng-model="selectedRoles" class="selectpicker" apiman-select-picker=""\n                multiple>\n              </select>\n            </div>\n          </dd>\n        </dl>\n      </div>\n      <!-- HR -->\n      <div class="row hr-row">\n        <hr/>\n      </div>\n      <!-- Create Button -->\n      <div class="row">\n        <button class="btn btn-primary" apiman-i18n-key="add-members" data-icon="fa-cog" placeholder="Adding..."\n                ng-click="addMembers()" data-field="addMembersButton" apiman-action-btn\n                ng-disabled="selectedRoles.length === 0 || countObjectKeys(selectedUsers) === 0">\n          Add Member(s)\n        </button>\n        <a href="javascript:window.history.back()" class="btn btn-default btn-cancel" apiman-i18n-key="cancel">Cancel</a>\n      </div>\n    </div> <!-- /container -->\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/org/org-plans.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.OrgPlansController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/org/org_bc.include\'"></div>\n      <div class="row">\n        <div ng-include="\'plugins/api-manager/html/org/org_entity.include\'"></div>\n        <!-- Center Content -->\n        <div class="col-md-8">\n          <div class="apiman-entitytabs">\n            <div ng-include="\'plugins/api-manager/html/org/org_tabs.include\'"></div>\n            <div id="entitytabsContent" class="tab-content">\n\n              <!-- Plans Tab Content -->\n              <div class="tab-pane active" id="tab-plans">\n                <div class="apiman-filters apiman-plans-filters">\n                  <div>\n                    <apiman-search-box id="plans-filter" apiman-i18n-key="filter-org-plans" function="filterPlans" placeholder="Filter by plan name..." />\n                  </div>\n                  <a apiman-permission="planEdit" data-field="toNewPlan" apiman-i18n-key="new-plan" href="{{ pluginName }}/new-plan" class="btn btn-primary pull-right">New Plan</a>\n                </div>\n                <div class="clearfix"></div>\n                <!-- The list of plans in this organization -->\n                <div class="apiman-plans" data-field="plans">\n\n                  <div class="apiman-no-content container-fluid" ng-hide="plans.length > 0">\n                    <div class="row">\n                      <div class="col-md-9">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-plans-found-for-org">There aren\'t any plans configured for this organization. That means all published services in this organization must be public.</p>\n                      </div>\n                      <div class="col-md-3">\n                        <div class="apiman-no-entities-arrow"></div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="apiman-no-content container-fluid" ng-show="plans.length > 0 && filteredPlans.length == 0">\n                    <div class="row">\n                      <div class="col-md-12">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-plans-found-for-filter">No plans found matching your filter criteria - please try searching for something different.</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="container-fluid apiman-summaryrow" ng-repeat="plan in filteredPlans">\n                    <div class="row">\n                      <span class="title"><a href="{{ pluginName }}/orgs/{{ org.id }}/plans/{{ plan.id}}">{{ plan.name }}</a></span>\n                    </div>\n                    <div class="row">\n                      <span class="description">{{ plan.description }}\n                      </span>\n                    </div>\n                    <hr/>\n                  </div>\n                </div>\n              </div>\n              <!-- End Plans Tab Content -->\n\n            </div>\n          </div>\n        </div>\n        <!-- /Center Content -->\n        \n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/org/org-services.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.OrgServicesController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/org/org_bc.include\'"></div>\n      <div class="row">\n        <div ng-include="\'plugins/api-manager/html/org/org_entity.include\'"></div>\n        <!-- Center Content -->\n        <div class="col-md-8">\n          <div class="apiman-entitytabs">\n            <div ng-include="\'plugins/api-manager/html/org/org_tabs.include\'"></div>\n            <div id="entitytabsContent" class="tab-content">\n\n              <!-- Services Tab Content -->\n              <div class="tab-pane active" id="tab-services">\n                <div class="apiman-filters apiman-services-filters">\n                  <div>\n                    <apiman-search-box id="services-filter" apiman-i18n-key="filter-org-services" function="filterServices" placeholder="Filter by service name..." />\n                  </div>\n                  <div apiman-permission="svcEdit" class="btn-group pull-right">\n                    <a data-field="toNewService" href="{{ pluginName }}/new-service" class="btn btn-primary" apiman-i18n-key="new-service">New Service</a>\n<!--                     <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"> -->\n<!--                       <span class="caret"></span> -->\n<!--                       <span class="sr-only" apiman-i18n-key="toggle-dropdown">Toggle Dropdown</span> -->\n<!--                     </button> -->\n<!--                     <ul class="dropdown-menu" role="menu"> -->\n<!--                       <li><a href="import-services.html" disabled="disabled" data-field="toImportServices" apiman-i18n-key="import-services">Import Service(s)</a></li> -->\n<!--                     </ul> -->\n                  </div>\n                </div>\n                <div class="clearfix"></div>\n                <!-- The list of services the user has access to -->\n                <div class="apiman-services" data-field="services">\n\n                  <div class="apiman-no-content container-fluid" ng-hide="services.length > 0">\n                    <div class="row">\n                      <div class="col-md-9">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-services-found-for-org">We couldn\'t find any services in this organization. Probably because none exist. We hope. Try creating one using the New Service button.</p>\n                      </div>\n                      <div class="col-md-3">\n                        <div class="apiman-no-entities-arrow"></div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="apiman-no-content container-fluid" ng-show="services.length > 0 && filteredServices.length == 0">\n                    <div class="row">\n                      <div class="col-md-12">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-services-found-for-filter">No services found matching your filter criteria - please try searching for something different.</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="container-fluid apiman-summaryrow" ng-repeat="service in filteredServices">\n                    <div class="row">\n                      <span class="title"><a href="{{ pluginName }}/orgs/{{ service.organizationId }}/services/{{ service.id }}">{{ service.name }}</a></span>\n                      <a class="apiman-summaryrow-icon">\n                        <i class="fa fa-clock-o fa-fw"></i>\n                        <span class="title-summary-item" apiman-i18n-key="created-on">Created on</span>\n                        <span class="title-summary-item">{{ service.createdOn | date:\'yyyy-MM-dd\' }}</span>\n                      </a>\n                    </div>\n                    <div class="row">\n                      <span class="description">{{ service.description }}\n                      </span>\n                    </div>\n                    <hr/>\n                  </div>\n                </div>\n              </div>\n              <!-- End Services Tab Content -->\n              \n            </div>\n          </div>\n        </div>\n        <!-- /Center Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/org/org.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.OrgRedirectController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/plan/plan-activity.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.PlanActivityController" class="container page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/plan/plan_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/plan/plan_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/plan/plan_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content apiman-entity-overview" >\n          <!-- Title and help text -->\n          <div class="title" apiman-i18n-key="plan-activity">Plan Activity</div>\n          <div class="description" apiman-i18n-key="plan-activity-help">The list below is all of the activity (configuration changes made by apiman users) associated with this Plan.</div>\n          <hr />\n          <apiman-activity model="auditEntries" next="getNextPage"/>\n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/plan/plan-overview.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.PlanOverviewController" class="container page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/plan/plan_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/plan/plan_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/plan/plan_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content apiman-entity-overview" >\n          <!-- Content Summary -->\n          <div class="col-md-12">\n            <h1 apiman-i18n-key="plan-details">Plan Details</h1>\n            <p apiman-i18n-key="plan-overview.plan-description">\n              This is the plan details page.  Use this page to modify the Plan\'s meta-data and policies.\n              Once you have fully configured the Plan, don\'t forget to "Lock" it so that it can be used\n              by Services in the org.\n            </p>\n\n            <h2 apiman-i18n-key="policies">Policies</h2>\n            <p apiman-i18n-key="plan-overview.policies-description">\n              The \'Policies\' tab allows you to manage the Policy-level policies that should\n              be applied whenever a request is made to a Service via this Plan.\n            </p>\n\n            <h2 apiman-i18n-key="activity">Activity</h2>\n            <p apiman-i18n-key="plan-overview.activity-description">\n              The \'Activity\' tab shows a history of all the changes made to the Plan.  Essentially\n              it is an audit log.\n            </p>\n          </div>\n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/plan/plan-policies.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.PlanPoliciesController" class="container page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/plan/plan_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/plan/plan_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/plan/plan_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content apiman-entity-overview" >\n          <div class="col-md-9">\n            <!-- Title and help text -->\n            <div class="title" apiman-i18n-key="plan-policies">Plan Policies</div>\n            <div class="description" apiman-i18n-key="plan-policies-help">Here is a list of all Policies defined for this Plan.  These Policies will be applied to all Service invocations made by Applications using this Plan in a Contract (in addition to whatever Policies are defined individually by the Application and/or Service).</div>\n            <hr />\n            <!-- The list of policies -->\n            <div apiman-permission="planEdit" apiman-status="Created,Ready" class="apiman-filters apiman-policies-filters">\n              <a apiman-i18n-key="add-policy" href="{{ pluginName }}/orgs/{{ org.id }}/plans/{{ plan.id }}/{{ version.version }}/new-policy" class="btn btn-primary pull-right">Add Policy</a>\n            </div>\n            <div class="clearfix"></div>\n            <div class="apiman-policies" data-field="policies">\n\n              <div class="apiman-no-content container-fluid" ng-hide="policies.length > 0">\n                <div class="row">\n                  <div class="col-md-9">\n                    <p class="apiman-no-entities-description" apiman-i18n-key="no-policies-for-plan">It looks like there aren\'t any policies defined! That may be exactly what you want (of course) but if not, you may try defining one using the Add Policy button above...</p>\n                  </div>\n                  <div apiman-permission="planEdit" apiman-status="Created,Ready" class="col-md-3">\n                    <div class="apiman-no-entities-arrow"></div>\n                  </div>\n                </div>\n              </div>\n              <div class="clearfix"></div>\n              <apiman-policy-list ng-model="policies" remove-function="removePolicy" reorder-function="reorderPolicies" type="plans" org-id="{{ org.id }}" page-id="{{ plan.id }}" version="{{ version.version }}"></policy-list>\n            </div>\n          </div>\n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),
e.put("plugins/api-manager/html/plan/plan.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.PlanRedirectController" class="container page" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/service/service-activity.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.ServiceActivityController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/service/service_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/service/service_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/service/service_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content">\n          <!-- Title and help text -->\n          <div class="title" apiman-i18n-key="service-activity">Service Activity</div>\n          <div class="description" apiman-i18n-key="service-activity-help">The list below is all of the activity (configuration changes made by apiman users) associated with this Service.</div>\n          <hr />\n          <apiman-activity model="auditEntries" next="getNextPage"/> \n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/service/service-contracts.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.ServiceContractsController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/service/service_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/service/service_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/service/service_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content">\n          <div class="col-md-9">\n            <div class="title" apiman-i18n-key="service-contracts">Service Contracts</div>\n            <div class="description" apiman-i18n-key="service-contracts-help">Here is a list of all contracts between all Applications and this Service.  This provides a list of all Applications that may potentially consume this Service.</div>\n          </div>\n          <div class="col-md-12" ng-show="isPublicOnly">\n            <div aria-hidden="false" style="background-color: rgb(255, 213, 185);" apiman-i18n-key="warning-public-only" data-field="onlyPublicWarning" class="alert alert-warning">Warning: this service is exclusively public, which means that it is impossible for Applications to create Service Contracts with it.</div>\n          </div>\n          <div class="col-md-12">\n            <div class="table-responsive">\n              <table class="table table-striped table-bordered table-hover" data-field="contracts">\n                <thead>\n                  <tr>\n                    <th width="70%" apiman-i18n-key="application" nowrap="nowrap">Application</th>\n                    <th apiman-i18n-key="plan" nowrap="nowrap">Plan</th>\n                    <th apiman-i18n-key="created-on_capitalized" nowrap="nowrap">Created On</th>\n                  </tr>\n                </thead>\n                <tbody>\n\n                  <tr ng-hide="contracts.length > 0">\n                    <td colspan="4">\n                      <div class="apiman-no-content container-fluid">\n                        <div class="row">\n                          <div class="col-md-12">\n                            <p class="apiman-no-entities-description" apiman-i18n-key="no-service-contracts">This service doesn\'t appear to have any contracts. This means that there aren\'t any applications consuming this service.  Note: if this is a public service, then no contracts are necessary to invoke the service!</p>\n                          </div>\n                        </div>\n                      </div>\n                    </td>\n                  </tr>\n\n                  <tr ng-repeat="contract in contracts">\n                    <td>\n                      <span>\n                        <a href="{{ pluginName }}/browse/orgs/{{ contract.appOrganizationId }}"><span>{{ contract.appOrganizationName }}</span></a>\n                        <span apiman-i18n-skip>/</span>\n                        <span class="emphasis">{{ contract.appName }}</span>\n                        <span apiman-i18n-skip>&#8680;</span>\n                        <span>{{ contract.appVersion }}</span>\n                      </span>\n                    </td>\n                    <td><span>{{ contract.planName }}</span></td>\n                    <td><span>{{ contract.createdOn | date:\'yyyy-MM-dd\' }}</span></td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <div style="text-align: center" ng-hide="contracts.length == 0">\n              <button ng-show="hasMore" ng-click="getNextPage()" class="btn btn-default" data-field="moreButton" apiman-i18n-key="show-more-contracts" placeholder="Loading..." data-icon="fa-cog">Show More Contracts</button>\n            </div>\n          </div>\n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/service/service-def.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.ServiceDefController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/service/service_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/service/service_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/service/service_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content">\n          <div class="col-md-10">\n            <div class="title" apiman-i18n-key="service-def">Service Definition</div>\n            <div class="apiman-label-faded">\n              <p apiman-i18n-key="service-def-explanation">\n                Here you can (optionally) provide definition information about your service.  This\n                information should take the form of a Swagger service definition file.  Adding a \n                definition file will allow consumers to better understand how to use your API.\n                Simply copy/paste (or drag and drop!) your Swagger API definition into the text\n                area below.\n              </p>\n            </div>\n            <div>\n              <span class="clearfix" apiman-i18n-key="svc-definition-label">Service Definition:</span>\n              <select apiman-i18n-key="service-def.choose-type" title="Choose a type..." apiman-select-picker="" ng-model="selectedDefinitionType" class="selectpicker" ng-options="type.label for type in typeOptions track by type.value">\n              </select>\n              <textarea apiman-i18n-key="enter-service-definition" id="service-definition" placeholder="Copy/paste or drag and drop your Service Definition in here!" style="width: 100%;" apiman-drop-text ng-model="updatedServiceDefinition" data-field="data" class="apiman-form-control form-control apiman-form-data"></textarea>\n            </div>\n            <div apiman-permission="svcEdit" apiman-status="Created,Ready" class="actions" style="margin-top: 20px">\n              <button ng-disabled="!isDirty" apiman-action-btn="" ng-click="saveService()" class="btn btn-primary" data-field="saveButton" apiman-i18n-key="save" placeholder="Saving..." data-icon="fa-cog" >Save</button>\n              <button ng-disabled="!isDirty" ng-click="reset()" class="btn btn-default" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</button>\n            </div>\n          </div>\n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/service/service-endpoint.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.ServiceEndpointController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/service/service_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/service/service_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/service/service_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content apiman-entity-overview">\n          <!-- Content Summary -->\n          <div class="col-md-12">\n            <div class="title" apiman-i18n-key="managed-endpoint-impl">Managed Endpoint Information</div>\n            <p class="explanation" apiman-i18n-key="managed-endpoint-explanation">\n                To successfully invoke this managed service, a client must send the request \n                to the appropriate API Gateway endpoint.  When invoking the Service through\n                a Service Contract, a valid API Key must be included in each request.  If \n                the Service is public, it can be invoked directly (without an API Key) through\n                the endpoint below.\n            </p>\n            <div ng-show="!version.publicService">\n              <div class="apiman-divider-40"></div>\n              <div apiman-i18n-key="warning-not-public" class="alert alert-warning">Warning: this Service is not public - this endpoint will only work if a valid Service Contract API key is included in requests made to it.</div>\n            </div>\n            <hr />\n            <div class="apiman-form-label" apiman-i18n-key="managed-endpoint">Managed Endpoint</div>\n            <textarea readonly="readonly" class="apiman-endpoint" style="width:100%" data-field="mangedEndpoint">{{ managedEndpoint.managedEndpoint }}</textarea>\n          </div>\n          <!-- /Content Summary -->\n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/service/service-impl.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.ServiceImplController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/service/service_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/service/service_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/service/service_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content">\n          <div class="col-md-8">\n            <div class="title" apiman-i18n-key="service-impl">Service Implementation</div>\n            <div class="apiman-label-faded">\n              <p apiman-i18n-key="service-impl-explanation">\n                Please provide us with details about the back-end service implementation\n                so that the API Gateway can successfully proxy Service requests.  Please\n                include any security you wish to enable between the API Gateway and the\n                back-end service.\n              </p>\n            </div>\n            <div>\n              <span apiman-i18n-key="api-endpoint-label">API Endpoint:</span>\n              <input ng-model="updatedService.endpoint" data-field="endpoint" class="apiman-form-control form-control" type="text"></input>\n            </div>\n            <div style="margin-top: 10px">\n              <span class="clearfix" apiman-i18n-key="api-type-label">API Type:</span>\n              <select apiman-i18n-key="service-impl.choose-type" title="Choose a type..." apiman-select-picker="" ng-model="updatedService.endpointType" class="selectpicker" ng-options="type.toUpperCase() for type in typeOptions">\n              </select>\n            </div>\n            \n            <div class="">\n              <span class="clearfix" apiman-i18n-key="api-security-label">API Security:</span>\n              <select apiman-select-picker="" ng-model="apiSecurity.type" class="selectpicker">\n                <option value="none" apiman-i18n-key="none">None</option>\n                <option value="mtls" apiman-i18n-key="mtls">MTLS/Two-Way-SSL</option>\n                <option value="basic" apiman-i18n-key="basic-auth">BASIC Authentication</option>\n              </select>\n            </div>\n\n            <div class="" ng-show="apiSecurity.type == \'mtls\'">\n              <div class="alert alert-info" style="">\n                 <span class="pficon pficon-info"></span>\n                 <span apiman-i18n-key="service-impl.mtsl-info">When using MTLS/Two-Way-SSL you must configure the relevant settings globally in the apiman.properties file.  Please refer to the apiman Installation Guide for details.</span>\n              </div>\n            </div>\n\n            <div class="panel panel-default" ng-show="apiSecurity.type == \'basic\'">\n              <div class="panel-body">\n                <table width="100%" class="form-table">\n                  <tr>\n                    <td width="1%" nowrap="nowrap" align="right"><span apiman-i18n-key="username-label" class="">Username:</span></td>\n                    <td><input id="basic-auth.username" ng-model="apiSecurity.basic.username" class="apiman-form-control form-control" width="100%" type="text"></input></td>\n                  </tr>\n                  <tr>\n                    <td width="1%" nowrap="nowrap" align="right"><span apiman-i18n-key="password-label" class="">Password:</span></td>\n                    <td><input id="basic-auth.password" ng-model="apiSecurity.basic.password" class="apiman-form-control form-control" width="100%" type="password"></input></td>\n                  </tr>\n                  <tr>\n                    <td width="1%" nowrap="nowrap" align="right"><span apiman-i18n-key="confirm-password-label" class="">Confirm Password:</span></td>\n                    <td><input id="basic-auth.confirm-password" ng-model="apiSecurity.basic.confirmPassword" class="apiman-form-control form-control" width="100%" type="password"></input></td>\n                  </tr>\n                  <tr>\n                    <td width="1%" nowrap="nowrap" align="right"></td>\n                    <td>\n                      <input ng-model="apiSecurity.basic.requireSSL" type="checkbox" id="require-ssl"></input>\n                      <label for="require-ssl" apiman-i18n-key="endpoint-security.require-ssl" style="padding-left: 3px">Require transport security (SSL)</label>\n                    </td>\n                  </tr>\n                </table>\n              </div>\n            </div>            \n            \n            <div id="gateway-info" ng-show="gateways.length > 1">\n              <hr />\n              <div class="title" apiman-i18n-key="gateway">Gateway</div>\n              <div class="apiman-label-faded">\n                <p apiman-i18n-key="service-impl-gateway-explanation">\n                  There are multiple API Gateways configured - you\'ll need to tell us which one you\n                  want to use for this service.\n                </p>\n              </div>\n              <div>\n                <span class="clearfix" apiman-i18n-key="publish-to">Publish To:</span>\n                <select ng-model="selectedGateway" apiman-select-picker="" class="selectpicker" ng-options="gateway.name for gateway in gateways | orderBy: name">\n                </select>\n              </div>\n            </div>\n            <div apiman-permission="svcEdit" apiman-status="Created,Ready" class="actions" style="margin-top: 20px">\n              <button ng-disabled="!isDirty || !isValid" apiman-action-btn="" ng-click="saveService()" class="btn btn-primary" data-field="saveButton" apiman-i18n-key="save" placeholder="Saving..." data-icon="fa-cog" >Save</button>\n              <button ng-disabled="!isDirty" ng-click="reset()" class="btn btn-default" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</button>\n            </div>\n          </div>\n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/service/service-metrics.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div id="form-page" ng-controller="Apiman.ServiceMetricsController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/service/service_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/service/service_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/service/service_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content apiman-entity-overview">\n          <!-- Content Summary -->\n          <div class="col-md-12">\n            <div class="title" apiman-i18n-key="service-metrics">Service Metrics</div>\n            <p class="explanation" apiman-i18n-key="service-metrics-explanation">\n                Now that this service is published to the gateway, it *may* be consumed by\n                API clients.  Use this tab to view basic metrics/analytics for the service.\n            </p>\n            <div id="apiman-svc-metrics-selector" style="margin-top: 15px; padding-top: 8px; border-top: 1px solid #ddd; border-bottom: 1px solid #ddd">\n              <span style="margin-right: 5px" apiman-i18n-key="service-metrics.show">Show</span>\n                <select ng-model="metricsType" apiman-select-picker="" ng-model="apiSecurity.type" class="selectpicker apiman-inline-form-dropdown" data-style="btn-default apiman-inline-form-dropdown">\n                  <option value="usage" apiman-i18n-key="metrics-usage">usage</option>\n                  <option value="responseType" apiman-i18n-key="metrics-responseType">response type</option>\n                </select>\n              <span style="margin-right: 5px" apiman-i18n-key="service-metrics.show-metrics-for">metrics data for the</span>\n              <select ng-model="metricsRange" apiman-select-picker="" ng-model="apiSecurity.type" class="selectpicker apiman-inline-form-dropdown" data-style="btn-default apiman-inline-form-dropdown">\n                <option value="90days" apiman-i18n-key="metrics-90days">last 90 days</option>\n                <option value="30days" apiman-i18n-key="metrics-30days">last 30 days</option>\n                <option value="7days" apiman-i18n-key="metrics-7days">last 7 days</option>\n                <option value="24hours" apiman-i18n-key="metrics-24hours">last 24 hours</option>\n                <option value="hour" apiman-i18n-key="metrics-hour">last hour</option>\n              </select>\n            </div>\n          </div>\n          <!-- /Content Summary -->\n\n          <!-- Usage Metrics -->\n          <div id="usage-metrics" ng-show="metricsType == \'usage\'">\n            <div class="col-md-12">\n              <h3 class="apiman-chart-title" apiman-i18n-key="overall-usage">Overall Usage</h3>\n              <div id="usage-chart"></div>\n              <div style="text-align: center" ng-show="usageChartLoading">\n                <div class="spinner spinner-lg" style="display: inline-block"></div>\n              </div>\n              <div style="text-align: center" ng-show="usageChartNoData">\n                <span apiman-i18n-key="metrics-no-data">No data found.</span>\n              </div>\n            </div>\n            <div class="col-md-6">\n              <h3 class="apiman-chart-title" apiman-i18n-key="top-app-usage">Top App Usage</h3>\n              <div id="app-usage-chart"></div>\n              <div style="text-align: center" ng-show="appUsageChartLoading">\n                <div class="spinner spinner-lg" style="display: inline-block"></div>\n              </div>\n              <div style="text-align: center" ng-show="appUsageChartNoData">\n                <span apiman-i18n-key="metrics-no-data">No data found.</span>\n              </div>\n            </div>\n            <div class="col-md-6">\n              <h3 class="apiman-chart-title" apiman-i18n-key="usage-by-plan">Usage by Plan</h3>\n              <div id="plan-usage-chart"></div>\n              <div style="text-align: center" ng-show="planUsageChartLoading">\n                <div class="spinner spinner-lg" style="display: inline-block"></div>\n              </div>\n              <div style="text-align: center" ng-show="planUsageChartNoData">\n                <span apiman-i18n-key="metrics-no-data">No data found.</span>\n              </div>\n            </div>\n          </div>\n\n          <!-- Response Type Metrics -->\n          <div id="response-type-metrics" ng-show="metricsType == \'responseType\'">\n            <div class="col-md-12">\n              <h3 class="apiman-chart-title" apiman-i18n-key="Responses">Responses</h3>\n              <div id="responseType-chart"></div>\n              <div style="text-align: center" ng-show="responseTypeChartLoading">\n                <div class="spinner spinner-lg" style="display: inline-block"></div>\n              </div>\n              <div style="text-align: center" ng-show="responseTypeChartNoData">\n                <span apiman-i18n-key="metrics-no-data">No data found.</span>\n              </div>\n            </div>\n            <div class="col-md-4">\n              <h3 class="apiman-chart-title" apiman-i18n-key="successful-responses">Successful Responses</h3>\n              <div id="responseType-chart-success"></div>\n              <div style="text-align: center" ng-show="responseTypeSuccessChartLoading">\n                <div class="spinner spinner-lg" style="display: inline-block"></div>\n              </div>\n              <div style="text-align: center" ng-show="responseTypeSuccessChartNoData">\n                <span apiman-i18n-key="metrics-no-data">No data found.</span>\n              </div>\n            </div>\n            <div class="col-md-4">\n              <h3 class="apiman-chart-title" apiman-i18n-key="top-app-usage">Failed Responses</h3>\n              <div id="responseType-chart-failed"></div>\n              <div style="text-align: center" ng-show="responseTypeFailedChartLoading">\n                <div class="spinner spinner-lg" style="display: inline-block"></div>\n              </div>\n              <div style="text-align: center" ng-show="responseTypeFailedChartNoData">\n                <span apiman-i18n-key="metrics-no-data">No data found.</span>\n              </div>\n            </div>\n            <div class="col-md-4">\n              <h3 class="apiman-chart-title" apiman-i18n-key="top-app-usage">Error Responses</h3>\n              <div id="responseType-chart-error"></div>\n              <div style="text-align: center" ng-show="responseTypeErrorChartLoading">\n                <div class="spinner spinner-lg" style="display: inline-block"></div>\n              </div>\n              <div style="text-align: center" ng-show="responseTypeErrorChartNoData">\n                <span apiman-i18n-key="metrics-no-data">No data found.</span>\n              </div>\n            </div>\n          </div>\n\n          \n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/service/service-overview.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.ServiceOverviewController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/service/service_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/service/service_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/service/service_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content apiman-entity-overview">\n          <!-- Content Summary -->\n          <div class="col-md-12">\n            <h1 apiman-i18n-key="service-details">Service Details</h1>\n            <p apiman-i18n-key="service-overview.service-description">\n              This is the service details page.  Use this page to modify the meta-data, plans, and \n              policies for the service.  There is no need to follow the tabs in order, but note that\n              you will need to fill out a minimum amount of data before the service can be published\n              to the Gateway.  In particular, the Implementation and Plans tabs are important (more\n              information below).\n            </p>\n            \n            <h2 apiman-i18n-key="impl">Implementation</h2>\n            <p apiman-i18n-key="service-overview.impl-description">\n              The \'Implementation\' tab is where you go to configure the details of the real service\n              being managed.  This is where you tell apiman where the service is, so that we can \n              actually invoke it at runtime.\n            </p>\n            \n            <h2 apiman-i18n-key="definition">Definition</h2>\n            <p apiman-i18n-key="service-overview.definition-description">\n              The \'Definition\' tab allows you to configure an optional Service Definition document\n              for your service.  A Service Definition is a detailed description of the capabilities\n              of your Service (operation names, http verbs, data models).  For example, you might\n              add a Swagger spec document as your Service Definition.\n            </p>\n\n            <h2 apiman-i18n-key="plans">Plans</h2>\n            <p apiman-i18n-key="service-overview.plans-description">\n              The \'Plans\' tab is used to configure which Plans (already defined in the Organization)\n              are available when an Application wishes to create a Service Contract with this \n              Service.  Optionally, a Service can also be marked as "Public", which means that no\n              Service Contract is required (the Service can be invoked without sending an API Key).\n            </p>\n            \n            <h2 apiman-i18n-key="policies">Policies</h2>\n            <p apiman-i18n-key="service-overview.policies-description">\n              The \'Policies\' tab is where you go if you wish to configure any policies that should\n              be enforced for *all* requests to the Service, regardless of which user, application,\n              or plan is being used.  In other words, Service-level policies.\n            </p>\n            \n            <h2 apiman-i18n-key="contracts">Contracts</h2>\n            <p apiman-i18n-key="service-overview.contracts-description">\n              The \'Contracts\' tab will show a table of all Applications that have created Service\n              Contracts to this Service.  In other words, it shows all of the registered \n              consumers of the Service.  Note that if the Service is marked as "Public", this tab\n              will likely be empty.\n            </p>\n\n            <h2 apiman-i18n-key="endpoint">Endpoint</h2>\n            <p apiman-i18n-key="service-overview.endpoint-description">\n              The \'Endpoint\' tab will show you information about how to invoke the Service once\n              it is published to the API Gateway.\n            </p>\n\n            <h2 apiman-i18n-key="activity">Activity</h2>\n            <p apiman-i18n-key="service-overview.activity-description">\n              The \'Activity\' tab shows a history of all the changes made to the Service.  Essentially\n              it is an audit log.\n            </p>\n            \n          </div>\n          <!-- /Content Summary -->\n          \n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/service/service-plans.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.ServicePlansController" id="page-content" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/service/service_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/service/service_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/service/service_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content">\n          <div class="col-md-10">\n            <div class="title" apiman-i18n-key="public-service">Public Service</div>\n            <div>\n              <span apiman-i18n-key="public-service-help">Select this option if you wish this service to be accessible directly, without a Service Contract.  Typically (but not always) this option is used instead of selecting plan(s).</span>\n            </div>\n            <div style="padding: 8px; margin-bottom: 10px">\n              <input ng-model="updatedService.publicService" type="checkbox" id="public-service" data-field="publicService"></input>\n              <label for="public-service" apiman-i18n-key="make-service-public" style="padding-left: 3px">Make this service public</label>\n            </div>\n            <div class="title" apiman-i18n-key="available-plans">Available Plans</div>\n            <div>\n              <span apiman-i18n-key="available-plans-help">Choose which plans should be presented when Applications create a link (Contract) to this Service. Note that only plans in a \'Locked\' state show up in this list.</span>\n            </div>\n            <!-- The plans to choose from -->\n            <div class="apiman-plan-selector apiman-divider-40">\n              <div class="container-fluid apiman-summaryrow" ng-repeat="plan in plans">\n                <div class="row">\n                  <input ng-model="plan.checked" data-field="checkbox" type="checkbox"></input>\n                  <span class="title"><a href="{{ pluginName }}/orgs/{{ plan.organizationId }}/plans/{{ plan.id }}" data-field="name" title="{{ plan.description }}">{{ plan.name }}</a></span>\n                  <select apiman-select-picker="" ng-model="plan.selectedVersion" ng-options="version for version in plan.lockedVersions" class="selectpicker pull-right">\n                  </select>\n                </div>\n                <hr>\n              </div>\n            </div>\n            \n            <div apiman-permission="svcEdit" apiman-status="Created,Ready" class="actions">\n              <button ng-disabled="!isDirty" apiman-action-btn="" ng-click="saveService()" class="btn btn-primary" data-field="saveButton" apiman-i18n-key="save" placeholder="Saving..." data-icon="fa-cog">Save</button>\n              <button ng-disabled="!isDirty" class="btn btn-default" ng-click="reset()" data-field="cancelButton" apiman-i18n-key="cancel">Cancel</button>\n            </div>\n            \n          </div>\n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),
e.put("plugins/api-manager/html/service/service-policies.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.ServicePoliciesController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/service/service_bc.include\'"></div>\n      <!-- Entity Summary Row -->\n      <div ng-include="\'plugins/api-manager/html/service/service_entity.include\'"></div>\n\n      <!-- Navigation + Content Row -->\n      <div class="row">\n        <!-- Left hand nav -->\n        <div ng-include="\'plugins/api-manager/html/service/service_tabs.include\'"></div>\n        <!-- /Left hand nav -->\n\n        <!-- Content -->\n        <div class="col-md-10 apiman-entity-content">\n          <div class="col-md-9">\n            <!-- Title and help text -->\n            <div class="title" apiman-i18n-key="service-policies">Service Policies</div>\n            <div class="description" apiman-i18n-key="service-policies-help">Here is a list of all Policies defined for this Service.  These Policies will be applied to all invocations of this Service by any Application, regardless of the Plan used in its Contract.</div>\n            <hr />\n            <!-- The list of policies -->\n            <div apiman-permission="svcEdit" apiman-status="Created,Ready" class="apiman-filters apiman-policies-filters">\n              <a apiman-i18n-key="add-policy" href="{{ pluginName }}/orgs/{{ org.id }}/services/{{ service.id }}/{{ version.version }}/new-policy" class="btn btn-primary pull-right">Add Policy</a>\n            </div>\n            <div class="clearfix"></div>\n            <div class="apiman-policies" data-field="policies">\n\n              <div class="apiman-no-content container-fluid" ng-hide="policies.length > 0">\n                <div class="row">\n                  <div class="col-md-9">\n                    <p class="apiman-no-entities-description" apiman-i18n-key="no-policies-for-service">It looks like there aren\'t any policies defined! That may be exactly what you want (of course) but if not, you may try defining one using the Add Policy button above...</p>\n                  </div>\n                  <div apiman-permission="svcEdit" apiman-status="Created,Ready" class="col-md-3">\n                    <div class="apiman-no-entities-arrow"></div>\n                  </div>\n                </div>\n              </div>\n              <div class="clearfix"></div>\n              <apiman-policy-list ng-model="policies" remove-function="removePolicy" reorder-function="reorderPolicies" type="services" org-id="{{ org.id }}" page-id="{{ service.id }}" version="{{ version.version }}"></policy-list>\n            </div>\n          </div>\n        </div>\n        <!-- /Content -->\n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/service/service.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.ServiceRedirectController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/user/user-activity.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.UserActivityController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/user/user_bc.include\'"></div>\n      <div class="row">\n        <!-- Left Hand Side -->\n        <div ng-include="\'plugins/api-manager/html/user/user_entity.include\'"></div>\n        <!-- /Left Hand Side -->\n\n        <!-- Center Content -->\n        <div class="col-md-8">\n          <div class="apiman-entitytabs">\n            <div ng-include="\'plugins/api-manager/html/user/user_tabs.include\'"></div>\n            <div id="entitytabsContent" class="tab-content">\n\n              <!-- Activity Tab Content -->\n              <div class="tab-pane active" id="tab-activity">\n                <div class="clearfix"></div>\n                <!-- The user\'s activity stream -->\n                <apiman-activity model="auditEntries" next="getNextPage"/>\n              </div>\n              <!-- End Activity Tab Content -->\n              \n            </div>\n          </div>\n        </div>\n        <!-- /Center Content -->\n        \n      </div>\n    </div> <!-- /container -->\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/user/user-apps.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>   \n    <div ng-controller="Apiman.UserAppsController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/user/user_bc.include\'"></div>\n      <div class="row">\n        <!-- Left Hand Side -->\n        <div ng-include="\'plugins/api-manager/html/user/user_entity.include\'"></div>\n        <!-- /Left Hand Side -->\n\n        <!-- Center Content -->\n        <div class="col-md-8">\n          <div class="apiman-entitytabs">\n            <div ng-include="\'plugins/api-manager/html/user/user_tabs.include\'"></div>\n            <div id="entitytabsContent" class="tab-content">\n\n              <!-- Applications Tab Content -->\n              <div class="tab-pane active" id="tab-apps">\n                <div class="apiman-filters apiman-applications-filters">\n                  <div>\n                    <apiman-search-box id="apps-filter" apiman-i18n-key="filter-user-apps" function="filterApps" placeholder="Filter by org or app name..." />\n                  </div>\n                  <a id="new-app" apiman-i18n-key="new-app" data-field="toNewApp" href="{{ pluginName }}/new-app" class="btn btn-primary pull-right">New App</a>\n                </div>\n                <div class="clearfix"></div>\n                <!-- The list of applications the user has access to -->\n                <div class="apiman-applications" data-field="applications">\n                  \n                  <div class="apiman-no-content container-fluid" ng-hide="applications.length > 0">\n                    <div class="row">\n                      <div class="col-md-9">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-apps-found-for-user">User is not managing any applications. Perhaps that\'s just not her thing. But if it is, she can create a new Application using the New App button above.</p>\n                      </div>\n                      <div class="col-md-3">\n                        <div class="apiman-no-entities-arrow"></div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="apiman-no-content container-fluid" ng-show="applications.length > 0 && filteredApps.length == 0">\n                    <div class="row">\n                      <div class="col-md-12">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-apps-found-for-filter">No applications found matching your filter criteria - please try searching for something different.</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="container-fluid apiman-summaryrow" ng-repeat="app in filteredApps">\n                    <div class="row">\n                      <a href="{{ pluginName}}/orgs/{{ app.organizationId }}/apps">{{ app.organizationName }}</a>\n                      <span apiman-i18n-skip>/</span>\n                      <span class="title"><a href="{{ pluginName }}/orgs/{{ app.organizationId }}/apps/{{ app.id}}">{{ app.name }}</a></span>\n                    </div>\n                    <div class="row">\n                      <span class="description">\n                        {{ app.description }}\n                      </span>\n                    </div>\n                    <hr/>\n                  </div>\n                </div>\n              </div>\n              <!-- End Applications Tab Content -->\n              \n            </div>\n          </div>\n        </div>\n        <!-- /Center Content -->\n        \n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/user/user-orgs.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.UserOrgsController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/user/user_bc.include\'"></div>\n      <div class="row">\n        <!-- Left Hand Side -->\n        <div ng-include="\'plugins/api-manager/html/user/user_entity.include\'"></div>\n        <!-- /Left Hand Side -->\n\n        <!-- Center Content -->\n        <div class="col-md-8">\n          <div class="apiman-entitytabs">\n            <div ng-include="\'plugins/api-manager/html/user/user_tabs.include\'"></div>\n            <div id="entitytabsContent" class="tab-content">\n              \n              <!-- Organizations Tab Content -->\n              <div class="tab-pane active" id="tab-orgs">\n                <div class="apiman-filters apiman-organizations-filters">\n                  <div>\n                    <apiman-search-box filter="orgs-filter" apiman-i18n-key="filter-user-orgs" function="filterOrgs" placeholder="Filter by organization name..." />\n                  </div>\n                  <a id="new-org" data-field="toNewOrg" href="{{ pluginName }}/new-org" class="btn btn-primary pull-right" apiman-i18n-key="new-org">New Org</a>\n                </div>\n                <div class="clearfix"></div>\n                <!-- The list of organizations the user belongs to -->\n                <div class="apiman-organizations">\n\n                  <div class="apiman-no-content container-fluid" ng-hide="organizations.length > 0">\n                    <div class="row">\n                      <div class="col-md-9">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-orgs-found-for-user">No organizations found. This user should be granted membership in an organization or perhaps she can create a new one with the button above.</p>\n                      </div>\n                      <div class="col-md-3">\n                        <div class="apiman-no-entities-arrow"></div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="apiman-no-content container-fluid" ng-show="organizations.length > 0 && filteredOrgs.length == 0">\n                    <div class="row">\n                      <div class="col-md-12">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-orgs-found-for-filter">No organizations found matching your filter criteria - please try searching for something different.</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="container-fluid apiman-summaryrow" ng-repeat="org in filteredOrgs">\n                    <div class="row">\n                      <span class="title"><a href="{{ pluginName }}/orgs/{{ org.id }}">{{ org.name }}</a></span>\n                    </div>\n                    <div class="row">\n                      <span class="description">{{ org.description }}</span>\n                    </div>\n                    <hr/>\n                  </div>\n                </div>\n              </div>\n              <!-- End Organizations Tab Content -->\n              \n            </div>\n          </div>\n        </div>\n        <!-- /Center Content -->\n        \n      </div>\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/user/user-services.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n    \n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.UserServicesController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n      <div ng-include="\'plugins/api-manager/html/user/user_bc.include\'"></div>\n      <div class="row">\n        <!-- Left Hand Side -->\n        <div ng-include="\'plugins/api-manager/html/user/user_entity.include\'"></div>\n        <!-- /Left Hand Side -->\n\n        <!-- Center Content -->\n        <div class="col-md-8">\n          <div class="apiman-entitytabs">\n            <div ng-include="\'plugins/api-manager/html/user/user_tabs.include\'"></div>\n            <div id="entitytabsContent" class="tab-content">\n\n              <!-- Services Tab Content -->\n              <div class="tab-pane active" id="tab-services">\n                <div class="apiman-filters apiman-services-filters">\n                  <div>\n                    <apiman-search-box id="services-filter" apiman-i18n-key="filter-user-services" function="filterServices" placeholder="Filter by org or service name..." />\n                  </div>\n                  <a id="new-service" apiman-i18n-key="new-service" data-field="toNewService" apiman-i18n-key="new-service" href="{{ pluginName}}/new-service" class="btn btn-primary pull-right">New Service</a>\n                </div>\n                <div class="clearfix"></div>\n                <!-- The list of services the user has access to -->\n                <div class="apiman-services" data-field="services">\n                  \n                  <div class="apiman-no-content container-fluid" ng-hide="services.length > 0">\n                    <div class="row">\n                      <div class="col-md-9">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-services-found-for-user">It looks like this user isn\'t responsible for any services. Maybe she\'s just all about the applications? If not, maybe she could log in and try creating a New Service.</p>\n                      </div>\n                      <div class="col-md-3">\n                        <div class="apiman-no-entities-arrow"></div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="apiman-no-content container-fluid" ng-show="services.length > 0 && filteredServices.length == 0">\n                    <div class="row">\n                      <div class="col-md-12">\n                        <p class="apiman-no-entities-description" apiman-i18n-key="no-services-found-for-filter">No services found matching your filter criteria - please try searching for something different.</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="container-fluid apiman-summaryrow" ng-repeat="service in filteredServices">\n                    <div class="row">\n                      <a href="{{ pluginName }}/orgs/{{ service.organizationId }}/services">{{ service.organizationName }}</a>\n                      <span apiman-i18n-skip>/</span>\n                      <span class="title"><a href="{{ pluginName }}/orgs/{{ service.organizationId }}/services/{{ service.id }}">{{ service.name }}</a></span>\n                      <a class="apiman-summaryrow-icon">\n                        <i class="fa fa-clock-o fa-fw"></i>\n                        <span class="title-summary-item" apiman-i18n-key="created-on">Created on</span>\n                        <span class="title-summary-item">{{ service.createdOn | date:\'yyyy-MM-dd\' }}</span>\n                      </a>\n                    </div>\n                    <div class="row">\n                      <span class="description">\n                        {{ service.description }}\n                      </span>\n                    </div>\n                    <hr/>\n                  </div>\n                </div>\n              </div>\n              <!-- End Services Tab Content -->\n              \n            </div>\n          </div>\n        </div>\n        <!-- /Center Content -->\n        \n      </div>\n    </div> <!-- /container -->\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/user/user.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>\n  </head>\n\n  <body>\n  <div>\n    <div ng-include="\'plugins/api-manager/html/progress.include\'"></div>\n    <div id="apiman-header" ng-include="\'plugins/api-manager/html/navbar.include\'"></div>\n    <div ng-controller="Apiman.UserRedirectController" class="page container" data-field="page" ng-cloak="" ng-show="pageState == \'loaded\'">\n    </div> <!-- /container -->\n  </div>\n  </body>\n</html>\n'),e.put("plugins/api-manager/html/directives/audit/auditUnknown.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.did-something-unknown">did something we didn\'t recognize!</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Application/auditAddPolicy.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.added-policy-to">added a policy to</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <span apiman-i18n-key="audit.policy-added">Policy added:</span>\n  <span class="emphasis">{{ data.policyDefId }}</span>\n</div>'),e.put("plugins/api-manager/html/directives/audit/Application/auditBreakContract.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.broke-contract-from-app">broke a contract from application</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <span apiman-i18n-key="audit.contract-broken-between-app">A contract was broken between application</span>\n  <a href="{{ pluginName }}/orgs/{{ data.appOrgId }}/apps">{{ data.appOrgId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a href="{{ pluginName }}/orgs/{{ data.appOrgId }}/apps/{{ data.appId }}">{{ data.appId }}</a>\n  <span apiman-i18n-skip>:</span>\n  <a href="{{ pluginName }}/orgs/{{ data.appOrgId }}/apps/{{ data.appId }}/{{ data.appVersion }}">{{ data.appVersion }}</a>\n  <span apiman-i18n-key="audit.and-service">and service</span>\n  <a href="{{ pluginName }}/orgs/{{ data.serviceOrgId }}/services">{{ data.serviceOrgId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a href="{{ pluginName }}/orgs/{{ data.serviceOrgId }}/services/{{ data.serviceId }}">{{ data.serviceId }}</a>\n  <span apiman-i18n-skip>:</span>\n  <a href="{{ pluginName }}/orgs/{{ data.serviceOrgId }}/services/{{ data.serviceId }}/{{ data.serviceVersion }}">{{ data.serviceVersion }}</a>\n  <span apiman-i18n-key="audit.through-version">through version</span>\n  <a href="{{ pluginName }}/orgs/{{ data.planOrgId }}/plans/{{ data.planId }}/{{ data.planVersion }}">{{ data.planVersion }}</a>\n  <span apiman-i18n-key="audit.of-plan">of plan</span>\n  <a href="{{ pluginName }}/orgs/{{ data.planOrgId }}/plans/{{ data.planId }}">{{ data.planId }}</a>\n  <span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Application/auditCreate.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.created-app">created application</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span ng-show="entry.entityVersion">\n    <span apiman-i18n-key="audit.version">version</span>\n    <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a>\n  </span>\n  <span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Application/auditCreateContract.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.created-contract-from-app">created a contract from application</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <span apiman-i18n-key="audit.contract-created-between-app">A contract was created between application</span>\n  <a href="{{ pluginName }}/orgs/{{ data.appOrgId }}/apps">{{ data.appOrgId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a href="{{ pluginName }}/orgs/{{ data.appOrgId }}/apps/{{ data.appId }}">{{ data.appId }}</a>\n  <span apiman-i18n-skip>:</span>\n  <a href="{{ pluginName }}/orgs/{{ data.appOrgId }}/apps/{{ data.appId }}/{{ data.appVersion }}">{{ data.appVersion }}</a>\n  <span apiman-i18n-key="audit.and-service">and service</span>\n  <a href="{{ pluginName }}/orgs/{{ data.serviceOrgId }}/services">{{ data.serviceOrgId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a href="{{ pluginName }}/orgs/{{ data.serviceOrgId }}/services/{{ data.serviceId }}">{{ data.serviceId }}</a>\n  <span apiman-i18n-skip>:</span>\n  <a href="{{ pluginName }}/orgs/{{ data.serviceOrgId }}/services/{{ data.serviceId }}/{{ data.serviceVersion }}">{{ data.serviceVersion }}</a>\n  <span apiman-i18n-key="audit.through-version">through version</span>\n  <a href="{{ pluginName }}/orgs/{{ data.planOrgId }}/plans/{{ data.planId }}/{{ data.planVersion }}">{{ data.planVersion }}</a>\n  <span apiman-i18n-key="audit.of-plan">of plan</span>\n  <a href="{{ pluginName }}/orgs/{{ data.planOrgId }}/plans/{{ data.planId }}">{{ data.planId }}</a>\n  <span apiman-i18n-skip>.</span>\n</div>'),e.put("plugins/api-manager/html/directives/audit/Application/auditDelete.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.deleted-app">deleted application</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Application/auditRegister.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.registered-app">registered application</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Application/auditRemovePolicy.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.removed-policy-from">removed a policy from</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <span apiman-i18n-key="audit.policy-removed">Policy removed:</span>\n  <span class="emphasis">{{ data.policyDefId }}</span>\n</div>'),e.put("plugins/api-manager/html/directives/audit/Application/auditReorderPolicies.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.reordered-policies-in">reordered policies in</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Application/auditUnregister.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.retired-app">retired application</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Application/auditUpdate.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.updated-application">updated application</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span ng-show="entry.entityVersion">\n    <span apiman-i18n-key="audit.version">version</span>\n    <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a>\n  </span>\n  <span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <div ng-repeat="item in data.changes">\n    <div>\n      <span class="capitalized emphasis">{{ item.name }}</span>\n    </div>\n    <div class="activity-value">\n      <span>{{ item.after }}</span>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Application/auditUpdatePolicy.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.updated-policy-in">updated a policy in</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/apps/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <span apiman-i18n-key="audit.policy-updated">Policy updated:</span>\n  <span class="emphasis">{{ data.policyDefId }}</span>\n</div>'),e.put("plugins/api-manager/html/directives/audit/Plan/auditAddPolicy.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.added-policy-to">added a policy to</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <span apiman-i18n-key="audit.policy-added">Policy added:</span>\n  <span class="emphasis">{{ data.policyDefId }}</span>\n</div>'),e.put("plugins/api-manager/html/directives/audit/Plan/auditCreate.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.created-plan">created plan</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span ng-show="entry.entityVersion">\n    <span apiman-i18n-key="audit.version">version</span>\n    <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a>\n  </span>\n  <span apiman-i18n-skip>.</span>\n</div>\n'),
e.put("plugins/api-manager/html/directives/audit/Plan/auditDelete.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.deleted-plan">deleted plan</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span ng-show="entry.entityVersion">\n    <span apiman-i18n-key="audit.version">version</span>\n    <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a>\n  </span>\n  <span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Plan/auditLock.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.locked-plan">locked plan</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>'),e.put("plugins/api-manager/html/directives/audit/Plan/auditRemovePolicy.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.removed-policy-from">removed a policy from</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <span apiman-i18n-key="audit.policy-removed">Policy removed:</span>\n  <span class="emphasis">{{ data.policyDefId }}</span>\n</div>'),e.put("plugins/api-manager/html/directives/audit/Plan/auditReorderPolicies.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.reordered-policies">reordered policies in</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Plan/auditUpdate.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.updated-plan">updated plan</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span ng-show="entry.entityVersion">\n    <span apiman-i18n-key="audit.version">version</span>\n    <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a>\n  </span>\n  <span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <div ng-repeat="item in data.changes">\n    <div>\n      <span class="capitalized emphasis">{{ item.name }}</span>\n    </div>\n    <div class="activity-value">\n      <span>{{ item.after }}</span>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Plan/auditUpdatePolicy.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.updated-policy-in">updated a policy in</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <span apiman-i18n-key="audit.policy-updated">Policy updated:</span>\n  <span class="emphasis">{{ data.policyDefId }}</span>\n</div>'),e.put("plugins/api-manager/html/directives/audit/Organization/auditCreate.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.created-org">created organization</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a><span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Organization/auditDelete.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.deleted-org">deleted organization</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a><span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Organization/auditGrant.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.granted-memberships">granted membership(s) in </span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <ul>\n    <li ng-repeat="role in data.roles">\n      <span>\n        <a href="{{ pluginName }}/users/{{ data.userId }}/apps">{{ data.userId }}</a>\n        <span apiman-i18n-key="audit.was-given-role">was given role</span>\n        <span class="emphasis">{{ role }}</span>\n      </span>\n    </li>\n  </ul>\n</div>'),e.put("plugins/api-manager/html/directives/audit/Organization/auditRevoke.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.revoked-memberships">revoked membership(s) in </span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <ul>\n    <li ng-repeat="role in data.roles" ng-show="data.roles[0] != \'*\'">\n      <span>\n        <span apiman-i18n-key="audit.role">Role</span>\n        <span class="emphasis">{{ role }}</span>\n        <span apiman-i18n-key="audit.was-taken-away-from">was taken away from</span>\n        <a href="{{ pluginName }}/users/{{ data.userId }}/apps">{{ data.userId }}</a><span apiman-i18n-skip>.</span>\n      </span>\n    </li>\n  </ul>\n  <span ng-show="data.roles[0] == \'*\'">\n    <span class="emphasis" apiman-i18n-key="audit.all-roles">All roles</span>\n    <span apiman-i18n-key="audit.were-taken-away-from">were taken away from</span>\n    <a href="{{ pluginName }}/users/{{ data.userId }}/apps">{{ data.userId }}</a><span apiman-i18n-skip>.</span>\n  </span>\n</div>'),e.put("plugins/api-manager/html/directives/audit/Organization/auditUpdate.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.updated-org">updated organization</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <div ng-repeat="item in data.changes">\n    <div>\n      <span class="capitalized emphasis">{{ item.name }}</span>\n    </div>\n    <div class="activity-value">\n      <span>{{ item.after }}</span>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Service/auditAddPolicy.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.added-policy-to">added a policy to</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <span apiman-i18n-key="audit.policy-added">Policy added:</span>\n  <span class="emphasis">{{ data.policyDefId }}</span>\n</div>'),e.put("plugins/api-manager/html/directives/audit/Service/auditBreakContract.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.broke-contract-with-service">broke a contract with service</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <span apiman-i18n-key="audit.contract-broken-between-app">A contract was broken between application</span>\n  <a href="{{ pluginName }}/orgs/{{ data.appOrgId }}/apps">{{ data.appOrgId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a href="{{ pluginName }}/orgs/{{ data.appOrgId }}/apps/{{ data.appId }}">{{ data.appId }}</a>\n  <span apiman-i18n-skip>:</span>\n  <a href="{{ pluginName }}/orgs/{{ data.appOrgId }}/apps/{{ data.appId }}/{{ data.appVersion }}">{{ data.appVersion }}</a>\n  <span apiman-i18n-key="audit.and-service">and service</span>\n  <a href="{{ pluginName }}/orgs/{{ data.serviceOrgId }}/services">{{ data.serviceOrgId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a href="{{ pluginName }}/orgs/{{ data.serviceOrgId }}/services/{{ data.serviceId }}">{{ data.serviceId }}</a>\n  <span apiman-i18n-skip>:</span>\n  <a href="{{ pluginName }}/orgs/{{ data.serviceOrgId }}/services/{{ data.serviceId }}/{{ data.serviceVersion }}">{{ data.serviceVersion }}</a>\n  <span apiman-i18n-key="audit.through-version">through version</span>\n  <a href="{{ pluginName }}/orgs/{{ data.planOrgId }}/plans/{{ data.planId }}/{{ data.planVersion }}">{{ data.planVersion }}</a>\n  <span apiman-i18n-key="audit.of-plan">of plan</span>\n  <a href="{{ pluginName }}/orgs/{{ data.planOrgId }}/plans/{{ data.planId }}">{{ data.planId }}</a>\n  <span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Service/auditCreate.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.created-service">created service</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span ng-show="entry.entityVersion">\n    <span apiman-i18n-key="audit.version">version</span>\n    <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a>\n  </span>\n  <span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Service/auditCreateContract.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.created-contract-with-service">created a contract with service</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <span apiman-i18n-key="audit.contract-created-between-app">A contract was created between application</span>\n  <a href="{{ pluginName }}/orgs/{{ data.appOrgId }}/apps">{{ data.appOrgId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a href="{{ pluginName }}/orgs/{{ data.appOrgId }}/apps/{{ data.appId }}">{{ data.appId }}</a>\n  <span apiman-i18n-skip>:</span>\n  <a href="{{ pluginName }}/orgs/{{ data.appOrgId }}/apps/{{ data.appId }}/{{ data.appVersion }}">{{ data.appVersion }}</a>\n  <span apiman-i18n-key="audit.and-service">and service</span>\n  <a href="{{ pluginName }}/orgs/{{ data.serviceOrgId }}/apps">{{ data.serviceOrgId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a href="{{ pluginName }}/orgs/{{ data.serviceOrgId }}/services/{{ data.serviceId }}">{{ data.serviceId }}</a>\n  <span apiman-i18n-skip>:</span>\n  <a href="{{ pluginName }}/orgs/{{ data.serviceOrgId }}/services/{{ data.serviceId }}/{{ data.serviceVersion }}">{{ data.serviceVersion }}</a>\n  <span apiman-i18n-key="audit.through-version">through version</span>\n  <a href="{{ pluginName }}/orgs/{{ data.planOrgId }}/plans/{{ data.planId }}/{{ data.planVersion }}">{{ data.planVersion }}</a>\n  <span apiman-i18n-key="audit.of-plan">of plan</span>\n  <a href="{{ pluginName }}/orgs/{{ data.planOrgId }}/plans/{{ data.planId }}">{{ data.planId }}</a>\n  <span apiman-i18n-skip>.</span>\n</div>'),e.put("plugins/api-manager/html/directives/audit/Service/auditDelete.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.deleted-service">deleted service</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span ng-show="entry.entityVersion">\n    <span apiman-i18n-key="audit.version">version</span>\n    <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a>\n  </span>\n  <span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Service/auditDeleteDefinition.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.deleted-service-def">deleted the service definition from</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Service/auditPublish.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.published-service">published service</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Service/auditRemovePolicy.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.removed-policy-from">removed a policy from</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <span apiman-i18n-key="audit.policy-removed">Policy removed:</span>\n  <span class="emphasis">{{ data.policyDefId }}</span>\n</div>'),e.put("plugins/api-manager/html/directives/audit/Service/auditReorderPolicies.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.reordered-policies">reordered policies in</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Service/auditRetire.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.retired-service">retired service</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Service/auditUpdate.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.updated-service">updated service</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span ng-show="entry.entityVersion">\n    <span apiman-i18n-key="audit.version">version</span>\n    <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a>\n  </span>\n  <span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <div ng-repeat="item in data.changes">\n    <div>\n      <span class="capitalized emphasis">{{ item.name }}</span>\n    </div>\n    <div class="activity-value">\n      <span>{{ item.after }}</span>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Service/auditUpdateDefinition.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.updated-service-def">updated the service definition for</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n'),e.put("plugins/api-manager/html/directives/audit/Service/auditUpdatePolicy.html",'<div class="row">\n  <a href="{{ pluginName }}/users/{{ entry.who }}">{{ entry.who }}</a>\n  <span apiman-i18n-key="audit.updated-policy-in">updated a policy in</span>\n  <a href="{{ pluginName }}/orgs/{{ entry.organizationId }}/plans">{{ entry.organizationId }}</a>\n  <span apiman-i18n-skip>/</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}">{{ entry.entityId }}</a>\n  <span apiman-i18n-key="audit.version">version</span>\n  <a class="emphasis" href="{{ pluginName }}/orgs/{{ entry.organizationId }}/services/{{ entry.entityId }}/{{ entry.entityVersion }}">{{ entry.entityVersion }}</a><span apiman-i18n-skip>.</span>\n</div>\n<div class="row boxed-row">\n  <span apiman-i18n-key="audit.policy-updated">Policy updated:</span>\n  <span class="emphasis">{{ data.policyDefId }}</span>\n</div>'),e.put("plugins/api-manager/html/navbar.include",'    <!-- Top header/nav bar -->\n      <div class="main-header container" ng-controller="Apiman.NavbarController" ng-show="showHeader">\n        <div class="row">\n          <div class="col-md-12">\n            <a href="{{ pluginName }}/dash">\n              <div class="logo"></div>\n            </a>\n            <ul class="user-menu pull-right">\n              <li class="dropdown">\n                <a id="navbar-dropdown" href="#" class="dropdown-toggle" data-toggle="dropdown">\n                  <span class="pficon pficon-user"></span>\n                  <span>{{ username }}</span>\n                  <b class="caret"></b>\n                </a>\n                <ul class="dropdown-menu">\n                  <li>\n                    <a id="navbar-home" href="{{ pluginName }}/dash" apiman-i18n-key="home">Home</a>\n                  </li>\n                  <li>\n                    <a id="navbar-my-stuff" href="{{ pluginName }}/users/{{ username }}/orgs" apiman-i18n-key="my-stuff">My Stuff</a>\n                  </li>\n                  <li>\n                    <a id="navbar-profile" href="{{ pluginName }}/profile" apiman-i18n-key="profile">Profile</a>\n                  </li>\n                  <li class="divider"></li>\n                  <li>\n                    <a id="navbar-about" href="{{ pluginName }}/about" apiman-i18n-key="about-apiman">About apiman</a>\n                  </li>\n                  <li class="divider"></li>\n                  <li>\n                    <a id="navbar-logout" href="{{ logoutUrl }}" target="_self" apiman-i18n-key="logout">Logout</a>\n                  </li>\n                </ul>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n'),e.put("plugins/api-manager/html/progress.include",'<div id="apiman-progress-indicator" ng-class="pageState" ng-show="showHeader"></div>'),e.put("plugins/api-manager/html/app/app_bc.include",'      <div class="row">\n        <div class="col-md-12">\n          <ol class="breadcrumb" data-field="breadcrumb">\n            <li><a id="bc-home" href="{{ pluginName }}/dash"><i class="fa fa-home fa-fw"></i><span apiman-i18n-key="home">Home</span></a></li>\n            <li><a id="bc-apps" href="{{ pluginName }}/orgs/{{ org.id }}/apps"><i class="fa fa-shield fa-fw"></i><span>{{ org.name }}</span></a></li>\n            <li class="active"><i class="fa fa-gears fa-fw"></i><span>{{ app.name }}</span></li>\n          </ol>\n        </div>\n      </div>\n'),e.put("plugins/api-manager/html/app/app_entity.include",'      <div class="apiman-entity-summary" ng-controller="Apiman.AppEntityController">\n        <div class="row apiman-entity-breadcrumb">\n          <div class="col-md-12">\n            <div class="title container-fluid">\n              <i class="breadcrumb-icon fa fa-gears"></i>\n              <div class="entity emphasis">\n                <a data-field="application" href="{{ pluginName }}/orgs/{{ org.id }}/apps/{{ app.id }}">{{ app.name }}</a>\n              </div>\n              <div class="versions">\n                <div class="btn-group apiman-entity-action" data-field="versions">\n                  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n                    <span apiman-i18n-key="version_">Version:</span> {{version.version}}\n                    <span class="caret"></span>\n                  </button>\n                  <ul class="dropdown-menu" role="menu">\n                    <li ng-repeat="appVersion in versions"><a href="#" ng-click="setVersion( appVersion )">{{ appVersion.version }}</a></li>\n                  </ul>\n                </div>\n                <a apiman-permission="appEdit" href="{{ pluginName }}/orgs/{{ org.id }}/apps/{{ app.id}}/{{ version.version }}/new-version" class="btn btn-primary apiman-entity-action" data-field="toNewAppVersion" apiman-i18n-key="new-version">New Version</a>\n              </div>\n            </div>\n            <hr />\n          </div>\n        </div>\n        <div class="row apiman-entity-metadata">\n          <div class="col-md-7" style="margin-bottom: 8px">\n            <!-- Service Summary -->\n            <apiman-editable-description description="app.description" callback="updateAppDescription"\n                default-value="no description"></apiman-editable-description>\n            <div style="padding: 8px">\n              <div class="entity-info-with-icon">\n                <i class="fa fa-clock-o fa-fw"></i>\n                <span class="apiman-label-faded" apiman-i18n-key="created-on">Created on</span>\n                <span data-field="createdOn" >{{ app.createdOn | date:\'yyyy-MM-dd\' }}</span>\n              </div>\n              <div class="entity-info-with-icon">\n                <i class="fa fa-user fa-fw"></i>\n                <span class="apiman-label-faded" apiman-i18n-key="created-by">Created by</span>\n                <span><a href="{{ pluginName }}/users/{{ app.createdBy }}" data-field="createdBy">{{ app.createdBy }}</a></span>\n              </div>\n            </div>\n            <div class="entity-info-with-icon">\n              <span apiman-i18n-key="status-label">Status:</span>\n              <span apiman-entity-status />\n            </div>\n          </div>\n          <div class="col-md-5" apiman-permission="appEdit">\n            <div>\n              <div apiman-status="Created,Ready"><a apiman-i18n-key="ttdo-consume-services" data-field="ttd_toConsumeServices" href="{{ pluginName }}/browse/services">Search for Services to consume</a></div>\n              <div apiman-status="Created,Ready"><a apiman-i18n-key="ttdo-new-contract" data-field="ttd_toNewContract" href="{{ pluginName }}/new-contract">Create a new Service Contract for this Application</a></div>\n              <div><a apiman-i18n-key="ttdo-new-version" data-field="ttd_toNewVersion" href="{{ pluginName }}/orgs/{{ org.id }}/apps/{{ app.id}}/{{ version.version }}/new-version">Create a new version of this Application (New Version)</a></div>\n            </div>\n            <!-- The Publish Action -->\n            <div class="apiman-divider-40"></div>\n            <div class="">\n              <button ng-disabled="getEntityStatus() == \'Created\'" apiman-action-btn="" apiman-status="Created,Ready" class="btn btn-primary" data-field="registerButton" apiman-i18n-key="register" placeholder="Registering..." data-icon="fa-cog" ng-click="registerApp()">Register</button>\n              <button apiman-action-btn="" apiman-status="Registered" class="btn btn-warning" data-field="unregisterButton" apiman-i18n-key="unregister" placeholder="Unregistering..." data-icon="fa-cog" ng-click="unregisterApp()">Unregister</button>\n            </div>\n          </div>\n        </div>\n      </div>\n'),e.put("plugins/api-manager/html/app/app_tabs.include",'        <div class="col-md-2 apiman-entity-nav">\n          <ul class="nav nav-pills nav-stacked">\n            <li class="first"><a apiman-i18n-skip>&nbsp;</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'overview\']"><a id="tab-overview" data-field="toAppOverview" href="{{ pluginName }}/orgs/{{ org.id }}/apps/{{ app.id }}/{{version.version}}" apiman-i18n-key="overview">Overview</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'contracts\']"><a id="tab-contracts" data-field="toAppContracts" href="{{ pluginName }}/orgs/{{ org.id }}/apps/{{ app.id }}/{{version.version}}/contracts" apiman-i18n-key="contracts">Contracts</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'policies\']"><a id="tab-policies" data-field="toAppPolicies" href="{{ pluginName }}/orgs/{{ org.id }}/apps/{{ app.id }}/{{version.version}}/policies" apiman-i18n-key="policies">Policies</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'apis\']" apiman-status="Registered"><a id="tab-apis" data-field="toAppApis" href="{{ pluginName }}/orgs/{{ org.id }}/apps/{{ app.id }}/{{version.version}}/apis" apiman-i18n-key="apis">APIs</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'activity\']"><a id="tab-activity" data-field="toAppActivity" href="{{ pluginName }}/orgs/{{ org.id }}/apps/{{ app.id }}/{{version.version}}/activity" apiman-i18n-key="activity">Activity</a></li>\n            <li class="last"><a apiman-i18n-skip>&nbsp;</a></li>\n          </ul>\n        </div>\n'),e.put("plugins/api-manager/html/admin/admin_bc.include",'          <ol class="breadcrumb" data-field="breadcrumb">\n            <li><a id="bc-home" href="{{ pluginName }}/dash"><i class="fa fa-home fa-fw"></i><span apiman-i18n-key="home">Home</span></a></li>\n            <li class="active"><i class="fa fa-gavel fa-fw"></i><span apiman-i18n-key="system-administration">System Administration</span></li>\n          </ol>\n'),e.put("plugins/api-manager/html/admin/admin_tabs.include",'         <ul class="side-nav nav nav-pills nav-stacked">\n           <li ng-class="{ true: \'active\' } [tab == \'roles\']"><a data-field="toRoles" apiman-i18n-key="admin-nav.admin-roles" href="{{ pluginName }}/admin/roles">Roles</a></li>\n           <li ng-class="{ true: \'active\' } [tab == \'policyDefs\']"><a data-field="toPolicyDefs" apiman-i18n-key="admin-nav.policy-definitions" href="{{ pluginName }}/admin/policyDefs">Policy Definitions</a></li>\n           <li ng-class="{ true: \'active\' } [tab == \'gateways\']"><a data-field="toGateways" apiman-i18n-key="admin-nav.gateways" href="{{ pluginName }}/admin/gateways">Gateways</a></li>\n           <li ng-class="{ true: \'active\' } [tab == \'plugins\']"><a data-field="toPlugins" apiman-i18n-key="admin-nav.plugins" href="{{ pluginName }}/admin/plugins">Plugins</a></li>\n         </ul>\n'),
e.put("plugins/api-manager/html/org/org-manage-members_bc.include",'<div class="row">\n  <div class="col-md-12">\n    <ol class="breadcrumb">\n      <li><a id="bc-home" href="{{ pluginName }}/dash"><i class="fa fa-home fa-fw"></i><span apiman-i18n-key="home">Home</span></a></li>\n      <li><a id="bc-members" href="{{ pluginName }}/orgs/{{organizationId}}/members"><i class="fa fa-shield fa-fw"></i><span>{{ org.name }}</span></a></li>\n      <li class="active"><span apiman-i18n-key="manage-members">Manage Members</span></li>\n    </ol>\n  </div>\n</div>\n<div class="row">\n  <div class="apiman-divider-20"></div>\n</div>\n'),e.put("plugins/api-manager/html/org/org_bc.include",'      <div class="row">\n        <div class="col-md-12">\n          <ol class="breadcrumb" data-field="breadcrumb">\n            <li><a id="bc-home" href="{{ pluginName }}/dash"><i class="fa fa-home fa-fw"></i><span apiman-i18n-key="home">Home</span></a></li>\n            <li class="active"><i class="fa fa-shield fa-fw"></i><span>{{ org.name }}</span></li>\n          </ol>\n        </div>\n      </div>\n'),e.put("plugins/api-manager/html/org/org_entity.include",'        <!-- Left Hand Side -->\n        <div class="col-md-4 apiman-entitysummary" ng-controller="Apiman.OrgSidebarController">\n          <div class="container-fluid">\n            <div class="row">\n              <div class="col-md-12 apiman-header" data-field="name">{{ org.name }}</div>\n            </div>\n            <div class="row">\n              <hr />\n            </div>\n            <div class="row">\n              <div class="col-md-12 metadata-with-icon">\n                <i class="fa fa-clock-o fa-fw"></i>\n                <div class="apiman-label-faded" apiman-i18n-key="created-on">Created on</div>\n                <div data-field="createdOn">{{ org.createdOn | date:\'yyyy-MM-dd\' }}</div>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-md-12 metadata-with-icon">\n                <i class="fa fa-users fa-fw"></i>\n                <div data-field="numMembers">{{ members.length }}</div>\n                <div class="apiman-label-faded" apiman-i18n-key="members">Members</div>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-md-12" style="padding-left: 10px">\n                <apiman-editable-description description="org.description" callback="updateOrgDescription"\n                    default-value="no description" style="width: 100%;"></apiman-editable-description>\n              </div>\n            </div>\n          </div>\n        </div>\n        <!-- /Left Hand Side -->\n'),e.put("plugins/api-manager/html/org/org_tabs.include",'            <ul id="entitytabs" class="nav nav-tabs">\n              <li ng-class="{ true: \'active\' } [tab == \'plans\']" apiman-permission="planView"><a id="tab-plans" href="{{ pluginName }}/orgs/{{org.id}}/plans" data-field="toOrgPlans" apiman-i18n-key="plans">Plans</a></li>\n              <li ng-class="{ true: \'active\' } [tab == \'services\']" apiman-permission="svcView"><a id="tab-services" href="{{ pluginName }}/orgs/{{org.id}}/services" data-field="toOrgServices" apiman-i18n-key="services">Services</a></li>\n              <li ng-class="{ true: \'active\' } [tab == \'applications\']" apiman-permission="appView"><a id="tab-apps" href="{{ pluginName }}/orgs/{{org.id}}/apps" data-field="toOrgApps" apiman-i18n-key="applications">Applications</a></li>\n              <li ng-class="{ true: \'active\' } [tab == \'members\']"><a id="tab-members" href="{{ pluginName }}/orgs/{{org.id}}/members" data-field="toOrgMembers" apiman-i18n-key="members">Members</a></li>\n              <li ng-class="{ true: \'active\' } [tab == \'activity\']" class="pull-right"><a id="tab-activity" href="{{ pluginName }}/orgs/{{org.id}}/activity" data-field="toOrgActivity" apiman-i18n-key="activity">Activity</a></li>\n            </ul>\n'),e.put("plugins/api-manager/html/plan/plan_bc.include",'      <div class="row">\n        <div class="col-md-12">\n          <ol class="breadcrumb" data-field="breadcrumb">\n            <li><a id="bc-home" href="{{ pluginName }}/dash"><i class="fa fa-home fa-fw"></i><span apiman-i18n-key="home">Home</span></a></li>\n            <li><a id="bc-plans" href="{{ pluginName }}/orgs/{{ org.id }}/plans"><i class="fa fa-shield fa-fw"></i><span>{{ org.name }}</span></a></li>\n            <li class="active"><i class="fa fa-bar-chart-o fa-fw"></i><span>{{ plan.name }}</span></li>\n          </ol>\n        </div>\n      </div>\n'),e.put("plugins/api-manager/html/plan/plan_entity.include",'      <div class="apiman-entity-summary" ng-controller="Apiman.PlanEntityController">\n        <div class="row apiman-entity-breadcrumb">\n          <div class="col-md-12">\n            <div class="title container-fluid">\n              <i class="breadcrumb-icon fa fa-bar-chart-o"></i>\n              <div class="entity emphasis">\n                <a data-field="thePlan" href="{{ pluginName }}/orgs/{{plan.organization.id}}/plans/{{plan.id}}">{{ plan.name }}</a>\n              </div>\n              <div class="versions">\n                <div class="btn-group apiman-entity-action" data-field="versions">\n                  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n                    Version: {{ version.version }}<span class="caret"></span>\n                  </button>\n                  <ul class="dropdown-menu" role="menu">\n                    <li ng-repeat="planVersion in versions"><a href="#" ng-click="setVersion( planVersion )">{{ planVersion.version }}</a></li>\n                  </ul>\n                </div>\n                <a apiman-permission="planEdit" href="{{ pluginName }}/orgs/{{ org.id }}/plans/{{ plan.id }}/{{version.version}}/new-version" class="btn btn-primary apiman-entity-action" data-field="toNewPlanVersion" apiman-i18n-key="new-version">New Version</a>\n              </div>\n            </div>\n            <hr />\n          </div>\n        </div>\n        <div class="row apiman-entity-metadata">\n          <div class="col-md-7" style="margin-bottom: 8px">\n            <!-- Service Summary -->\n            <div style="padding: 8px">\n              <apiman-editable-description description="plan.description" callback="updatePlanDescription"\n                default-value="no description"></apiman-editable-description>\n\n              <div class="entity-info-with-icon">\n                <i class="fa fa-clock-o fa-fw"></i>\n                <span class="apiman-label-faded" apiman-i18n-key="created-on">Created on</span>\n                <span data-field="createdOn" >{{ plan.createdOn | date:\'yyyy-MM-dd\' }}</span>\n              </div>\n              <div class="entity-info-with-icon">\n                <i class="fa fa-user fa-fw"></i>\n                <span class="apiman-label-faded" apiman-i18n-key="created-by">Created by</span>\n                <span><a href="{{ pluginName }}/users/{{ plan.createdBy }}" data-field="createdBy">{{ plan.createdBy }}</a></span>\n              </div>\n            </div>\n            <div class="entity-info-with-icon">\n              <span apiman-i18n-key="status-label">Status:</span>\n              <span apiman-entity-status="" />\n            </div>\n          </div>\n          <div class="col-md-5" apiman-permission="planEdit">\n            <div>\n              <div><a apiman-i18n-key="ttdo-new-plan-version" data-field="ttd_toNewVersion" href="{{ pluginName }}/orgs/{{ org.id }}/plans/{{ plan.id }}/{{version.version}}/new-version">Create a new version of this Plan (New Version)</a></div>\n            </div>\n            <!-- The Publish Action -->\n            <div class="apiman-divider-40"></div>\n            <div class="">\n              <button apiman-status="Created,Ready" apiman-action-btn="" class="btn btn-primary" data-field="lockButton" apiman-i18n-key="lock" placeholder="Locking..." data-icon="fa-cog"  ng-click="lockPlan()">Lock Plan</button>\n            </div>\n          </div>\n        </div>\n      </div>\n'),e.put("plugins/api-manager/html/plan/plan_tabs.include",'        <div class="col-md-2 apiman-entity-nav">\n          <ul class="nav nav-pills nav-stacked">\n            <li class="first"><a apiman-i18n-skip>&nbsp;</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'overview\']"><a id="tab-overview" data-field="toPlanOverview" href="{{ pluginName }}/orgs/{{ org.id }}/plans/{{ plan.id }}/{{ version.version }}" apiman-i18n-key="overview">Overview</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'policies\']"><a id="tab-policies" data-field="toPlanPolicies" href="{{ pluginName }}/orgs/{{ org.id }}/plans/{{ plan.id }}/{{ version.version }}/policies" apiman-i18n-key="policies">Policies</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'activity\']"><a id="tab-activity" data-field="toPlanActivity" href="{{ pluginName }}/orgs/{{ org.id }}/plans/{{ plan.id }}/{{ version.version }}/activity" apiman-i18n-key="activity">Activity</a></li>\n            <li class="last"><a apiman-i18n-skip>&nbsp;</a></li>\n          </ul>\n        </div>\n'),e.put("plugins/api-manager/html/policyForms/Default.include",'<div class="form policy-config default" ng-controller="Apiman.DefaultPolicyConfigFormController">\n  <span apiman-i18n-key="default-policy-config-msg">Please manually configure your policy\'s JSON configuration below.</span>\n  <textarea id="raw-config" ng-model="rawConfig"></textarea>\n</div>\n'),e.put("plugins/api-manager/html/policyForms/JsonSchema.include",'<div class="form policy-config json-schema" ng-controller="Apiman.JsonSchemaPolicyConfigFormController">\n  <div ng-show="schemaState == \'loading\'">\n    <div class="spinner spinner-sm pull-left"></div>\n    <span apiman-i18n-key="loading-policy-config-schema" style="margin-left: 5px">Loading policy configuration schema...</span>\n  </div>\n  <div id="json-editor-holder">\n  </div>\n</div>\n'),e.put("plugins/api-manager/html/policyForms/authorization.include",'<div class="form policy-config authorization-form" data-field="form" ng-controller="Apiman.AuthorizationFormController">\n  <style>\n    .authorization-form .help {\n      margin-bottom: 15px;\n    }\n    .authorization-form table {\n      width: 100%;\n      margin-bottom: 10px;\n    }\n    .authorization-form .panel {\n    }\n    .authorization-form .panel span {\n      padding-left: 3px;\n      padding-right: 3px;\n      margin-top: 4px;\n    }\n    .authorization-form .panel button {\n      margin-top: 15px;\n    }\n    .authorization-form .panel input.apiman-form-control[type="text"] {\n      display: inline;\n      width: 120px;\n      margin-top: 4px;\n    }\n    #form-page .authorization-form dl dd .inline-form-select {\n      display: inline-table;\n      width: auto;\n      margin-top: 4px;\n    }\n  </style>\n  <div class="help" apiman-i18n-key="authorization-message">Manage the list of fine-grained authorization rules in the box below.  If you want a single required role to protect your entire API, simply add one item with a path of ".*" and a verb of "*".</div>\n  \n  <div class="panel panel-default">\n    <div class="panel-heading">\n      <h3 class="panel-title" apiman-i18n-key="add-authorization-rule">Add Authorization Rule</h3>\n    </div>\n    <div class="panel-body">\n      <span apiman-i18n-key="authorization.to-access">To access resource</span>\n      <input id="path" ng-model="path" class="apiman-form-control form-control" style="" type="text" apiman-i18n-key="authorization.enter-path" placeholder="(/path/to/.*)"></input>\n      <span apiman-i18n-key="authorization.using-verb">using verb/action</span>\n      <input id="verb" ng-model="verb" class="apiman-form-control form-control" style="" type="text" apiman-i18n-key="authorization.enter-verb" placeholder="(verb)"></input>\n      <span apiman-i18n-key="authorization.must-have-role">the user must have role</span>\n      <input id="role" ng-model="role" class="apiman-form-control form-control" style="" type="text" apiman-i18n-key="authorization.enter-role" placeholder="(required role)"></input>\n      <span apiman-i18n-key="authorization.period">.</span>\n      <div>\n        <button id="add-rule" ng-disabled="!path || !verb || !role" ng-click="add(path, verb, role)" apiman-i18n-key="add" class="btn btn-default" style="min-width: 75px">Add</button>\n      </div>\n    </div>\n  </div>\n  \n  <div>\n    <dl>\n      <dt apiman-i18n-key="configured-authorization-rules">Configured Authorization Rules</dt>\n    </dl>\n  </div>\n  \n  <table class="table table-striped table-bordered">\n    <thead>\n      <tr>\n        <th width="60%" apiman-i18n-key="path">Path</th>\n        <th width="20%" apiman-i18n-key="verb">Verb</th>\n        <th width="20%" apiman-i18n-key="required-role">Required Role</th>\n        <th width="1%"></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="item in config.rules | orderBy: \'pathPattern\'">\n        <td>{{ item.pathPattern }}</td>\n        <td>{{ item.verb }}</td>\n        <td>{{ item.role }}</td>\n        <td>\n          <button ng-click="remove(item)" class="btn btn-default"><i class="fa fa-times fa-fw"></i></button>\n        </td>\n      </tr>\n      <tr>\n        <td colspan="4" ng-show="!config.rules.length">\n          <div class="apiman-no-content">\n            <p class="apiman-no-entities-description" apiman-i18n-key="authorization.no-authentication-rules">No authorization rules have been added!  You\'ll need at least one, otherwise no authorization will be performed.</p>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  \n  <div>\n    <dl>\n      <dt apiman-i18n-key="unmatched-request-action">Unmatched Request Action</dt>\n      <dd>\n        <span apiman-i18n-key="auth.if-request-unmatched-pre">I want the request to</span>\n        <select id="unmatched-request-action" ng-model="config.requestUnmatched" apiman-select-picker="" class="inline-form-select selectpicker" data-live-search="false">\n          <option value="fail" apiman-i18n-key="auth.fail">fail</option>\n          <option value="pass" apiman-i18n-key="auth.pass">pass</option>\n        </select>\n        <span apiman-i18n-key="auth.if-request-unmatched-post">if it does not match any of the authorization rules defined above.</span>\n      </dd>\n    </dl>\n  </div>\n\n</div>'),e.put("plugins/api-manager/html/policyForms/basic-auth.include",'<div class="form policy-config basic-auth" ng-controller="Apiman.BasicAuthFormController">\n  <div>\n    <dl>\n      <dt apiman-i18n-key="auth-realm">Authentication Realm</dt>\n      <dd>\n        <input id="realm" ng-model="config.realm" class="apiman-form-control form-control" style="" type="text" apiman-i18n-key="basic-auth.enter-realm" placeholder="Realm..."></input>\n      </dd>\n      <dt apiman-i18n-key="require-transport-security">Require Transport Security</dt>\n      <dd>\n        <input id="requireTS" type="checkbox" ng-model="config.requireTransportSecurity"></input>\n        <label for="requireTS" apiman-i18n-key="basic-auth.transport-security-required" title="When enabled, requests must be received on a secure channel (e.g. SSL) otherwise they will fail.">Transport security required</label>\n      </dd>\n      <dt apiman-i18n-key="forward-authenticated-user">Forward Authenticated Username as HTTP Header</dt>\n      <dd>\n        <input id="forward-identity" ng-model="config.forwardIdentityHttpHeader" class="apiman-form-control form-control" style="" type="text" apiman-i18n-key="base-auth.enter-auth-user-header" placeholder="HTTP header or leave blank to disable..."></input>\n      </dd>\n      <dt apiman-i18n-key="identity-source">Identity Source</dt>\n      <dd>\n        <select id="identity-source" ng-model="identitySourceType" apiman-select-picker="" class="selectpicker" data-live-search="false">\n          <option value="" selected="selected" data-content="<span class=\'apiman-label-faded\'>Choose an Identity Source...</span>" apiman-i18n-key="basic-auth.choose-identity-source">Choose an Identity Source...</option>\n          <option value="static" apiman-i18n-key="basic-auth.static" data-content="<span>Static</span>">Static</option>\n          <option value="jdbc" apiman-i18n-key="basic-auth.jdbc" data-content="<span>JDBC</span>">JDBC</option>\n          <option value="ldap" apiman-i18n-key="basic-auth.ldap" data-content="<span>LDAP</span>">LDAP</option>\n        </select>\n      </dd>\n    </dl>\n  </div>\n  \n  <!-- Static Identity Source - Form Fields -->\n  <div id="static-form-fields" class="sub-form-fields" style="clear:both" ng-show="identitySourceType == \'static\'">\n    <div class="alert alert-warning" role="alert">\n      <p apiman-i18n-key="basic-auth.static-type-warning">The "static" identity source is typically only useful for testing - you probably don\'t want to use it in production!</p>\n    </div>\n    <div>\n      <dt apiman-i18n-key="static-identities">Static Identities</dt>\n    </div>\n    <div style="width: 100%; float: left; margin-bottom: 5px;">\n      <select id="static-identities" ng-model="selectedIdentity" multiple class="apiman-form-control form-control" style="height: 150px; width: 200px; float: left;" ng-options="(item.username) for item in config.staticIdentity.identities | orderBy: \'username\'">\n      </select>\n      <div style="margin-left: 5px; float: left">\n        <button id="static-clear" ng-click="clear()" ng-disabled="!config.staticIdentity.identities" apiman-i18n-key="clear" class="btn btn-default" style="min-width: 75px">Clear</button>\n        <div class="clear:both"></div>\n        <button id="static-remove" ng-click="remove(selectedIdentity)" ng-disabled="!selectedIdentity" apiman-i18n-key="remove" class="btn btn-default" style="min-width: 75px; margin-top: 5px;">Remove</button>\n      </div>\n    </div>\n    <div style="width: 100%; float: left; margin-bottom: 10px; margin-top: 5px">\n      <input id="static-username" ng-model="username" class="apiman-form-control form-control" style="width: 85px; float: left; margin-right: 5px" type="text" apiman-i18n-key="basic-auth.enter-username" placeholder="Username..."></input>\n      <div style="width: 8px; float: left; line-height: 28px" apiman-i18n-skip>:</div>\n      <input id="static-password" ng-model="password" class="apiman-form-control form-control" style="width: 102px; float: left; margin-right: 5px" type="password" apiman-i18n-key="basic-auth.enter-password" placeholder="Password..."></input>\n      <button id="static-add" ng-disabled="!username || !password" ng-click="add(username, password)" apiman-i18n-key="add" class="btn btn-default" style="min-width: 75px">Add</button>\n    </div>\n  </div>\n\n  <!-- JDBC Identity Source - Form Fields -->\n  <div id="jdbc-form-fields" class="sub-form-fields" style="clear:both" ng-show="identitySourceType == \'jdbc\'">\n    <div>\n      <dl>\n        <dt apiman-i18n-key="jdbc-datasource">JDBC Datasource (JNDI Location)</dt>\n        <dd>\n          <input id="jdbc-datasource" ng-model="config.jdbcIdentity.datasourcePath" class="apiman-form-control form-control" type="text" apiman-i18n-key="basic-auth.ds.enter-jndi-loc" placeholder="JNDI Datasource location (example: jdbc/ExampleDS)"></input>\n        </dd>\n        <dt apiman-i18n-key="jdbc-query">SQL Query</dt>\n        <dd>\n          <textarea id="jdbc-query" ng-model="config.jdbcIdentity.query" class="apiman-form-control form-control" type="text" apiman-i18n-key="basic-auth.ds.enter-sql-query" placeholder="SQL Query (example: SELECT * FROM users WHERE u=? AND p=?)"></textarea>\n        </dd>\n        <dt apiman-i18n-key="jdbc-hash-algorithm">Password Hash Algorithm</dt>\n        <dd>\n          <select id="jdbc-pwd-hash" ng-model="config.jdbcIdentity.hashAlgorithm" apiman-select-picker="" class="selectpicker" data-live-search="false">\n            <option value="None" apiman-i18n-key="basic-auth.none">None</option>\n            <option value="SHA1" apiman-i18n-key="basic-auth.sha1">SHA1</option>\n            <option value="MD5" apiman-i18n-key="basic-auth.md5">MD5</option>\n            <option value="SHA256" apiman-i18n-key="basic-auth.sha256">SHA256</option>\n            <option value="SHA384" apiman-i18n-key="basic-auth.sha384">SHA384</option>\n            <option value="SHA512" apiman-i18n-key="basic-auth.sha512">SHA512</option>\n          </select>\n        </dd>\n        <dd>\n          <input id="jdbc-extract-roles" type="checkbox" ng-model="config.jdbcIdentity.extractRoles" style="margin-top: 15px"></input>\n          <label for="jdbc-extract-roles" apiman-i18n-key="basic-auth.extract-jdbc-roles" title="When enabled, roles can also be extracted from the database for use in the Authorization Policy (sold separately).">Also extract user roles from the DB</label>\n        </dd>\n        <dt ng-show="config.jdbcIdentity.extractRoles == true" apiman-i18n-key="roles-sql-query">Roles SQL Query</dt>\n        <dd ng-show="config.jdbcIdentity.extractRoles == true">\n          <textarea id="jdbc-role-query" ng-model="config.jdbcIdentity.roleQuery" class="apiman-form-control form-control" type="text" apiman-i18n-key="basic-auth.ds.enter-role-sql-query" placeholder="Role SQL Query (example: SELECT r.rolename FROM roles r WHERE r.user=?)"></textarea>\n        </dd>\n      </dl>\n    </div>\n  </div>\n\n  <!-- LDAP Identity Source - Form Fields -->\n  <div id="ldap-form-fields" class="sub-form-fields" style="clear:both" ng-show="identitySourceType == \'ldap\'">\n    <div>\n      <dl>\n        <dt apiman-i18n-key="ldap-server-url">LDAP Server URL</dt>\n        <dd>\n          <input id="ldap-url" ng-model="config.ldapIdentity.url" class="apiman-form-control form-control" type="text" apiman-i18n-key="basic-auth.ldap.enter-url" placeholder="LDAP Url (example: ldap://example.org)"></input>\n        </dd>\n        <dt apiman-i18n-key="ldap-bind-dn">LDAP Bind DN</dt>\n        <dd>\n          <input id="ldap-bind-dn" ng-model="config.ldapIdentity.dnPattern" class="apiman-form-control form-control" type="text" apiman-i18n-key="basic-auth.ldap.enter-binddn" placeholder="LDAP Bind DN (example: cn=${username},dc=overlord,dc=org)"></input>\n        </dd>\n        <dt apiman-i18n-key="bind-as">Bind to LDAP As...</dt>\n        <dd>\n          <select id="ldap-bind-as" ng-model="config.ldapIdentity.bindAs" apiman-select-picker="" class="selectpicker" data-live-search="false">\n            <option selected="selected" value="UserAccount" apiman-i18n-key="ldap-auth.inbound-user">The inbound user</option>\n            <option value="ServiceAccount" apiman-i18n-key="ldap-auth.service-account">A service account</option>\n          </select>\n        </dd>\n        <div ng-show="config.ldapIdentity.bindAs == \'ServiceAccount\'" style="margin-top: 15px">\n	        <dt apiman-i18n-key="service-account-username">Service Account Username</dt>\n	        <dd>\n	          <input id="ldap-sa-username" ng-model="config.ldapIdentity.credentials.username" class="apiman-form-control form-control" type="text" apiman-i18n-key="basic-auth.ldap.credentials.username" placeholder="Enter a username..."></input>\n	        </dd>\n	        <dt apiman-i18n-key="service-account-password">Service Account Password</dt>\n	        <dd>\n	          <input id="ldap-sa-pass" ng-model="config.ldapIdentity.credentials.password" class="apiman-form-control form-control" type="password" apiman-i18n-key="basic-auth.ldap.credentials.password" placeholder="Enter a password..."></input>\n              <input id="ldap-sa-pass-confirm" style="margin-top: 3px" ng-model="repeatPassword" class="apiman-form-control form-control" type="password" apiman-i18n-key="basic-auth.ldap.credentials.repeat-password" placeholder="Repeat password"></input>\n	        </dd>\n            <dt apiman-i18n-key="user-search-base-dn">User Search Base DN</dt>\n            <dd>\n              <input id="ldap-us-base-dn" ng-model="config.ldapIdentity.userSearch.baseDn" class="apiman-form-control form-control" type="text" apiman-i18n-key="basic-auth.ldap.userSearch.baseDn" placeholder="Enter a Base DN..."></input>\n            </dd>\n            <dt apiman-i18n-key="user-search-expression">User Search Expression</dt>\n            <dd>\n              <input id="ldap-us-expr" ng-model="config.ldapIdentity.userSearch.expression" class="apiman-form-control form-control" type="text" apiman-i18n-key="basic-auth.ldap.userSearch.expression" placeholder="Enter an expression..."></input>\n            </dd>\n        </div>\n        <dd>\n          <input id="ldap-extract-roles" type="checkbox" ng-model="config.ldapIdentity.extractRoles" style="margin-top: 15px"></input>\n          <label for="ldap-extract-roles" apiman-i18n-key="basic-auth.extract-ldap-roles" title="When enabled, roles can also be extracted from the directory for use in the Authorization Policy (sold separately).">Also extract user roles from the directory</label>\n        </dd>\n        <dt ng-show="config.ldapIdentity.extractRoles == true" apiman-i18n-key="ldap-membership-attr">Group Membership Attribute</dt>\n        <dd ng-show="config.ldapIdentity.extractRoles == true">\n          <input id="ldap-group-attr" ng-model="config.ldapIdentity.membershipAttribute" class="apiman-form-control form-control" type="text" apiman-i18n-key="basic-auth.ldap.enter-membership-attr" placeholder="memberOf"></input>\n        </dd>\n        <dt ng-show="config.ldapIdentity.extractRoles == true" apiman-i18n-key="ldap-rolename-attr">Role Name Attribute</dt>\n        <dd ng-show="config.ldapIdentity.extractRoles == true">\n          <input id="ldap-role-name-attr" ng-model="config.ldapIdentity.rolenameAttribute" class="apiman-form-control form-control" type="text" apiman-i18n-key="basic-auth.ldap.enter-rolename-attr" placeholder="objectGUID"></input>\n        </dd>\n      </dl>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/api-manager/html/policyForms/ignored-resources.include",'<div class="form policy-config ip-list" data-field="form" ng-controller="Apiman.IgnoredResourcesFormController">\n  <div apiman-i18n-key="ignored-resources-message">Manage the list of regular expressions to be ignored in the box below.</div>\n  <div style="width: 100%; float: left; margin-bottom: 5px; margin-top: 5px">\n    <select id="paths" ng-model="selectedPath" data-field="pathsToIgnore" multiple class="apiman-form-control form-control" style="height: 150px; width: 200px; float: left;" ng-options="item for item in config.pathsToIgnore | orderBy: \'toString()\'">\n    </select>\n    <div style="margin-left: 5px; float: left">\n      <button id="clear" ng-click="clear()" ng-disabled="!config.pathsToIgnore" data-field="clear" apiman-i18n-key="clear" class="btn btn-default" style="min-width: 75px">Clear</button>\n      <div class="clear:both"></div>\n      <button id="remove" ng-click="remove(selectedPath)" ng-disabled="!selectedPath" data-field="remove" apiman-i18n-key="remove" class="btn btn-default" style="min-width: 75px; margin-top: 5px;">Remove</button>\n    </div>\n  </div>\n  <input id="path" ng-model="path" data-field="pathToIgnore" class="apiman-form-control form-control" style="width: 200px; float: left; margin-right: 5px" type="text" apiman-i18n-key="ignored-resources.enter-path" placeholder="Enter a Path to ignore..."></input>\n  <button id="add" ng-disabled="!path" ng-click="add(path)" data-field="add" apiman-i18n-key="add" class="btn btn-default" style="min-width: 75px">Add</button>\n</div>'),e.put("plugins/api-manager/html/policyForms/ip-list.include",'<div class="form policy-config ip-list" data-field="form" ng-controller="Apiman.IPListFormController">\n  <div style="width: 100%; float: left">\n    <dl style="margin-bottom: 0px">\n      <dt apiman-i18n-key="ip-http-header">IP Address HTTP Header</dt>\n      <dd>\n        <input id="http-header" ng-model="config.httpHeader" data-field="httpHeader" class="apiman-form-control form-control" style="" type="text" apiman-i18n-key="iplist.enter-http-header" placeholder="HTTP header (optional)..."></input>\n      </dd>\n      <dt apiman-i18n-key="failure-code">Failure Response</dt>\n      <dd>\n        <p apiman-i18n-key="ip-list.response-code-explanation">Choose how apiman should respond to a client if the request fails due to a violation of this policy.</p>\n        <select id="failure-code" ng-model="config.responseCode" apiman-select-picker="" class="selectpicker" data-live-search="false">\n          <option value="403" apiman-i18n-key="ip-list.auth-failure-403">Authentication Failure (403)</option>\n          <option value="404" apiman-i18n-key="ip-list.not-found-404">Not Found (404)</option>\n          <option value="500" apiman-i18n-key="ip-list.server-error-500">Server Error (500)</option>\n        </select>\n      </dd>\n      <dt apiman-i18n-key="ip-addresses">IP Addresses</dt>\n    </dl>\n  </div>\n  <div style="width: 300px" apiman-i18n-key="ip-list-message">Manage the list of IP addresses in the box below.  Wildcards can be used by specifying "*" as one of the components of the IP address, such as "10.0.*.*".</div>\n  <div style="width: 100%; float: left; margin-bottom: 5px; margin-top: 5px">\n    <select id="ip-addresses" ng-model="selectedIP" data-field="ipAddresses" multiple class="apiman-form-control form-control" style="height: 150px; width: 200px; float: left;" ng-options="item for item in config.ipList | orderBy: \'toString()\'">\n    </select>\n    <div style="margin-left: 5px; float: left">\n      <button id="clear" ng-click="clear()" ng-disabled="!config.ipList" data-field="clear" apiman-i18n-key="clear" class="btn btn-default" style="min-width: 75px">Clear</button>\n      <div class="clear:both"></div>\n      <button id="remove" ng-click="remove(selectedIP)" ng-disabled="!selectedIP" data-field="remove" apiman-i18n-key="remove" class="btn btn-default" style="min-width: 75px; margin-top: 5px;">Remove</button>\n    </div>\n  </div>\n  <input id="ip-address" ng-model="ipAddress" data-field="ipAddress" class="apiman-form-control form-control" style="width: 200px; float: left; margin-right: 5px" type="text" apiman-i18n-key="iplist.enter-ip-address" placeholder="Enter an IP address..."></input>\n  <button id="add" ng-disabled="!ipAddress" ng-click="add(ipAddress)" data-field="add" apiman-i18n-key="add" class="btn btn-default" style="min-width: 75px">Add</button>\n</div>'),e.put("plugins/api-manager/html/policyForms/rate-limiting.include",'<div class="form policy-config rates" data-field="form" ng-controller="Apiman.RateLimitingFormController" style="margin-top: 10px">\n  <div>\n    <span apiman-i18n-key="config-sentence-preamble">I want to limit request rates to</span>\n    <input id="num-requests" ng-model="config.limit" class="apiman-form-control form-control inline-apiman-form-control form-control" style="width: 100px" type="number" apiman-i18n-key="rate-limiting.enter-num-requests" placeholder="# of requests"></input>\n    <span apiman-i18n-key="requests-per">requests per</span>\n    <select id="granularity" ng-model="config.granularity" apiman-select-picker="" data-field="granularity" class="selectpicker inline-line apiman-inline-form-dropdown" data-style="btn-default apiman-inline-form-dropdown" style="width: 100px">\n      <option value="" data-content="<span class=\'apiman-label-faded\'>Granularity</span>" apiman-i18n-key="granularity">Granularity</option>\n      <option value="Application" apiman-i18n-key="rate-limiting.application">Application</option>\n      <option value="User" apiman-i18n-key="rate-limiting.user">User</option>\n      <option value="Service" apiman-i18n-key="rate-limiting.service">Service</option>\n    </select>\n    <span apiman-i18n-key="per">per</span>\n    <select id="period" ng-model="config.period" apiman-select-picker="" data-field="period" class="selectpicker inline-line apiman-inline-form-dropdown" data-style="btn-default apiman-inline-form-dropdown" style="width: 100px">\n      <option value="" data-content="<span class=\'apiman-label-faded\'>Period</span>" apiman-i18n-key="rate-limiting.period">Period</option>\n      <option value="Second" apiman-i18n-key="rate-limiting.second">Second</option>\n      <option value="Minute" apiman-i18n-key="rate-limiting.minute">Minute</option>\n      <option value="Hour" apiman-i18n-key="rate-limiting.hour">Hour</option>\n      <option value="Day" apiman-i18n-key="rate-limiting.day">Day</option>\n      <option value="Month" apiman-i18n-key="rate-limiting.month">Month</option>\n      <option value="Year" apiman-i18n-key="rate-limiting.year">Year</option>\n    </select>\n  </div>\n  <div style="margin-top: 8px;" id="userRow" ng-show="config.granularity == \'User\'">\n    <span apiman-i18n-key="reate-limiting.get-user-id-from">Get the user\'s id from:</span>\n    <input id="user-header" ng-model="config.userHeader" data-field="userHeader" class="apiman-form-control form-control inline-apiman-form-control form-control" style="width: 250px" type="text" apiman-i18n-key="rate-limiting.enter-user-header" placeholder="Enter header (e.g. X-Identity)..."></input>\n  </div>\n  <hr/>\n  <div>\n    <p apiman-i18n-key="rate-limiting.rate-limit-headers-help">\n      Configure the rate limiting related response headers below - these headers will \n      convey useful information to clients such as imposed limits and when the rate\n      period will be reset.  You may override the default header names by supplying \n      your own in the fields below (or leave them blank to accept the defaults).\n    </p>\n  </div>\n  <div>\n    <dl>\n      <dt apiman-i18n-key="rate-limiting.limit-header">Limit Response Header</dt>\n      <dd>\n        <input id="limit-header" ng-model="config.headerLimit" data-field="limitHeader" class="apiman-form-control form-control" style="" type="text" apiman-i18n-key="rate-limiting.enter-limit-header" placeholder="X-RateLimit-Limit"></input>\n      </dd>\n      <dt apiman-i18n-key="rate-limiting.remaining-header">Remaining Response Header</dt>\n      <dd>\n        <input id="remaining-header" ng-model="config.headerRemaining" data-field="remainingHeader" class="apiman-form-control form-control" style="" type="text" apiman-i18n-key="rate-limiting.enter-remaining-header" placeholder="X-Rate-Limit-Remaining"></input>\n      </dd>\n      <dt apiman-i18n-key="rate-limiting.reset-header">Reset Response Header</dt>\n      <dd>\n        <input id="reset-header" ng-model="config.headerReset" data-field="resetHeader" class="apiman-form-control form-control" style="" type="text" apiman-i18n-key="rate-limiting.enter-reset-header" placeholder="X-Rate-Limit-Reset"></input>\n      </dd>\n    </dl>\n  </div>\n</div>'),
e.put("plugins/api-manager/html/service/service_bc.include",'      <div class="row">\n        <div class="col-md-12">\n          <ol class="breadcrumb" data-field="breadcrumb">\n            <li><a id="bc-home" href="{{ pluginName }}/dash"><i class="fa fa-home fa-fw"></i><span apiman-i18n-key="home">Home</span></a></li>\n            <li><a id="bc-services" href="{{ pluginName }}/orgs/{{ service.organization.id }}/services"><i class="fa fa-shield fa-fw"></i><span>{{ service.organization.name }}</span></a></li>\n            <li class="active"><i class="fa fa-puzzle-piece fa-fw"></i><span>{{ service.name }}</span></li>\n          </ol>\n        </div>\n      </div>'),e.put("plugins/api-manager/html/service/service_entity.include",'      <div class="apiman-entity-summary" ng-controller="Apiman.ServiceEntityController">\n        <div class="row apiman-entity-breadcrumb">\n          <div class="col-md-12">\n            <div class="title container-fluid">\n              <i class="breadcrumb-icon fa fa-puzzle-piece"></i>\n              <div class="entity emphasis">\n                <a data-field="serviceName" href="{{ pluginName }}/orgs/{{ service.organization.id }}/services/{{ service.id }}">{{ service.name }}</a>\n              </div>\n              <div class="versions">\n                <div class="btn-group apiman-entity-action" data-field="versions">\n                  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n                    Version: {{ version.version }}\n                    <span class="caret"></span>\n                  </button>\n                  <ul class="dropdown-menu" role="menu">\n                    <li ng-repeat="serviceVersion in versions"><a href="#" ng-click="setVersion( serviceVersion )">{{ serviceVersion.version }}</a></li>\n                  </ul>\n                </div>\n                <a apiman-permission="svcEdit" href="{{ pluginName }}/orgs/{{ org.id }}/services/{{ service.id}}/{{ version.version }}/new-version" class="btn btn-primary apiman-entity-action" apiman-i18n-key="new-version">New Version</a>\n              </div>\n            </div>\n            <hr />\n          </div>\n        </div>\n        <div class="row apiman-entity-metadata">\n          <div class="col-md-7" style="margin-bottom: 8px">\n            <!-- Service Summary -->\n            <apiman-editable-description description="service.description" callback="updateServiceDescription"\n              default-value="no description"></apiman-editable-description>\n            <div style="padding: 8px">\n              <div class="entity-info-with-icon">\n                <i class="fa fa-clock-o fa-fw"></i>\n                <span class="apiman-label-faded" apiman-i18n-key="created-on">Created on</span>\n                <span data-field="createdOn" >{{ service.createdOn | date:\'yyyy-MM-dd\' }}</span>\n              </div>\n              <div class="entity-info-with-icon">\n                <i class="fa fa-user fa-fw"></i>\n                <span class="apiman-label-faded" apiman-i18n-key="created-by">Created by</span>\n                <span><a href="{{ pluginName }}/users/{{ service.createdBy }}" data-field="createdBy">{{ service.createdBy }}</a></span>\n              </div>\n            </div>\n            <div class="entity-info-with-icon">\n              <span apiman-i18n-key="status-label">Status:</span>\n              <span apiman-entity-status />\n            </div>\n          </div>\n          <div class="col-md-5" apiman-permission="svcEdit">\n            <div>\n              <div apiman-status="Published">\n                <a apiman-i18n-key="ttdo-new-svc-contract" data-field="ttd_toNewContract" href="{{ pluginName }}/new-contract?svc={{ params.service }}&amp;svcorg={{ params.org }}&amp;svcv={{ params.version }}">Link my Application to this Service (New Contract)</a>\n              </div>\n              <div>\n                <a apiman-i18n-key="ttdo-new-svc-version" data-field="ttd_toNewServiceVersion" href="{{ pluginName }}/orgs/{{ org.id }}/services/{{ service.id}}/{{ version.version }}/new-version">Create a new version of this Service (New Version)</a>\n              </div>\n            </div>\n            <!-- The Publish Action -->\n            <div class="apiman-divider-40"></div>\n            <div class="">\n              <button ng-disabled="getEntityStatus() == \'Created\'" apiman-action-btn="" apiman-status="Created,Ready" class="btn btn-primary" data-field="publishButton" apiman-i18n-key="publish" placeholder="Publishing..." data-icon="fa-cog" ng-click="publishService()">Publish</button>\n              <button apiman-action-btn="" apiman-status="Published" class="btn btn-warning" data-field="retireButton" apiman-i18n-key="retire" placeholder="Retiring..." data-icon="fa-cog" ng-click="retireService()">Retire</button>\n            </div>\n          </div>\n        </div>\n      </div>\n'),e.put("plugins/api-manager/html/service/service_tabs.include",'        <div class="col-md-2 apiman-entity-nav">\n          <ul class="nav nav-pills nav-stacked">\n            <li class="first"><a apiman-i18n-skip>&nbsp;</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'overview\']"><a id="tab-overview" href="{{ pluginName }}/orgs/{{ service.organization.id }}/services/{{ service.id }}/{{ version.version }}" apiman-i18n-key="overview">Overview</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'impl\']"><a id="tab-impl" href="{{ pluginName }}/orgs/{{ service.organization.id }}/services/{{ service.id }}/{{ version.version }}/impl" apiman-i18n-key="implementation.tab">Implementation</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'def\']"><a id="tab-def" href="{{ pluginName }}/orgs/{{ service.organization.id }}/services/{{ service.id }}/{{ version.version }}/def" apiman-i18n-key="definition.tab">Definition</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'plans\']"><a id="tab-plans" href="{{ pluginName }}/orgs/{{ service.organization.id }}/services/{{ service.id }}/{{ version.version }}/plans" apiman-i18n-key="plans">Plans</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'policies\']"><a id="tab-policies" href="{{ pluginName }}/orgs/{{ service.organization.id }}/services/{{ service.id }}/{{ version.version }}/policies" apiman-i18n-key="policies">Policies</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'contracts\']" apiman-status="Published"><a id="tab-contracts" href="{{ pluginName }}/orgs/{{ service.organization.id }}/services/{{ service.id }}/{{ version.version }}/contracts" apiman-i18n-key="contracts">Contracts</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'endpoint\']" apiman-status="Published"><a id="tab-endpoint" href="{{ pluginName }}/orgs/{{ service.organization.id }}/services/{{ service.id }}/{{ version.version }}/endpoint" apiman-i18n-key="endpoint">Endpoint</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'metrics\']" apiman-status="Published"><a id="tab-metrics" href="{{ pluginName }}/orgs/{{ service.organization.id }}/services/{{ service.id }}/{{ version.version }}/metrics" apiman-i18n-key="metrics">Metrics</a></li>\n            <li ng-class="{ true: \'active\' } [tab == \'activity\']"><a id="tab-activity" href="{{ pluginName }}/orgs/{{ service.organization.id }}/services/{{ service.id }}/{{ version.version }}/activity" apiman-i18n-key="activity">Activity</a></li>\n            <li class="last"><a apiman-i18n-skip>&nbsp;</a></li>\n          </ul>\n        </div>'),e.put("plugins/api-manager/html/user/user_bc.include",'      <div class="row">\n        <div class="col-md-12">\n          <ol class="breadcrumb" data-field="breadcrumb">\n            <li><a id="bc-home" href="{{ pluginName }}/dash"><i class="fa fa-home fa-fw"></i><span apiman-i18n-key="home">Home</span></a></li>\n            <li class="active"><i class="fa fa-user fa-fw"></i><span>{{ user.fullName }}</span></li>\n          </ol>\n        </div>\n      </div>\n'),e.put("plugins/api-manager/html/user/user_entity.include",'<div class="col-md-4 apiman-entitysummary">\n  <div class="container-fluid">\n    <div class="row">\n      <div class="col-md-12 apiman-header">{{ user.fullName }}</div>\n    </div>\n    <div class="row">\n      <div class="col-md-12 apiman-subheader">{{ user.username }}</div>\n    </div>\n    <div class="row">\n      <hr />\n    </div>\n    <div class="row" ng-show="user.email">\n      <div class="col-md-12 metadata-with-icon">\n        <i class="fa fa-envelope-o fa-fw"></i>\n        <div><a href="mailto:{{ user.email }}">{{ user.email }}</a></div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-md-12 metadata-with-icon">\n        <i class="fa fa-clock-o fa-fw"></i>\n        <div class="apiman-label-faded" apiman-i18n-key="joined-on">Joined on</div>\n        <div>{{ user.joinedOn | date : "yyyy-MM-dd" }}</div>\n      </div>\n    </div>\n  </div>\n</div>'),e.put("plugins/api-manager/html/user/user_tabs.include",'            <ul id="entitytabs" class="nav nav-tabs">\n              <li ng-class="{ true: \'active\' } [tab == \'organizations\']"><a id="tab-orgs" href="{{ pluginName }}/users/{{ user.username }}/orgs" apiman-i18n-key="organizations">Organizations</a></li>\n              <li ng-class="{ true: \'active\' } [tab == \'applications\']"><a id="tab-apps" href="{{ pluginName }}/users/{{ user.username }}/apps" apiman-i18n-key="applications">Applications</a></li>\n              <li ng-class="{ true: \'active\' } [tab == \'services\']"><a id="tab-services" href="{{ pluginName }}/users/{{ user.username }}/services" apiman-i18n-key="services">Services</a></li>\n              <li ng-class="{ true: \'active\' } [tab == \'activity\']" class="pull-right"><a id="tab-activity" href="{{ pluginName }}/users/{{ user.username }}/activity" apiman-i18n-key="activity">Activity</a></li>\n            </ul>\n')}]),hawtioPluginLoader.addModule("apiman-manager-templates"),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(e){function t(t){if(t.getOption("disableInput"))return e.Pass;for(var n=t.listSelections(),i=[],l=0;l<n.length;l++){if(!n[l].empty())return e.Pass;var c=n[l].head,u=t.getTokenAt(c),d=e.innerMode(t.getMode(),u.state),p=d.state;if("xml"!=d.mode.name||!p.tagName)return e.Pass;var h=t.getOption("autoCloseTags"),f="html"==d.mode.configuration,g="object"==typeof h&&h.dontCloseTags||f&&o,m="object"==typeof h&&h.indentTags||f&&s,v=p.tagName;u.end>c.ch&&(v=v.slice(0,v.length-u.end+c.ch));var y=v.toLowerCase();if(!v||"string"==u.type&&(u.end!=c.ch||!/[\"\']/.test(u.string.charAt(u.string.length-1))||1==u.string.length)||"tag"==u.type&&"closeTag"==p.type||u.string.indexOf("/")==u.string.length-1||g&&r(g,y)>-1||a(t,v,c,p,!0))return e.Pass;var b=m&&r(m,y)>-1;i[l]={indent:b,text:">"+(b?"\n\n":"")+"</"+v+">",newPos:b?e.Pos(c.line+1,0):e.Pos(c.line,c.ch+1)}}for(var l=n.length-1;l>=0;l--){var w=i[l];t.replaceRange(w.text,n[l].head,n[l].anchor,"+insert");var x=t.listSelections().slice(0);x[l]={head:w.newPos,anchor:w.newPos},t.setSelections(x),w.indent&&(t.indentLine(w.newPos.line,null,!0),t.indentLine(w.newPos.line+1,null,!0))}}function n(t,n){for(var i=t.listSelections(),r=[],o=n?"/":"</",s=0;s<i.length;s++){if(!i[s].empty())return e.Pass;var l=i[s].head,c=t.getTokenAt(l),u=e.innerMode(t.getMode(),c.state),d=u.state;if(n&&("string"==c.type||"<"!=c.string.charAt(0)||c.start!=l.ch-1))return e.Pass;if("xml"!=u.mode.name)if("htmlmixed"==t.getMode().name&&"javascript"==u.mode.name)r[s]=o+"script>";else{if("htmlmixed"!=t.getMode().name||"css"!=u.mode.name)return e.Pass;r[s]=o+"style>"}else{if(!d.context||!d.context.tagName||a(t,d.context.tagName,l,d))return e.Pass;r[s]=o+d.context.tagName+">"}}t.replaceSelections(r),i=t.listSelections();for(var s=0;s<i.length;s++)(s==i.length-1||i[s].head.line<i[s+1].head.line)&&t.indentLine(i[s].head.line)}function i(t){return t.getOption("disableInput")?e.Pass:n(t,!0)}function r(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;i>n;++n)if(e[n]==t)return n;return-1}function a(t,n,i,r,a){if(!e.scanForClosingTag)return!1;var o=Math.min(t.lastLine()+1,i.line+500),s=e.scanForClosingTag(t,i,null,o);if(!s||s.tag!=n)return!1;for(var l=r.context,c=a?1:0;l&&l.tagName==n;l=l.prev)++c;i=s.to;for(var u=1;c>u;u++){var d=e.scanForClosingTag(t,i,null,o);if(!d||d.tag!=n)return!1;i=d.to}return!0}e.defineOption("autoCloseTags",!1,function(n,r,a){if(a!=e.Init&&a&&n.removeKeyMap("autoCloseTags"),r){var o={name:"autoCloseTags"};("object"!=typeof r||r.whenClosing)&&(o["'/'"]=function(e){return i(e)}),("object"!=typeof r||r.whenOpening)&&(o["'>'"]=function(e){return t(e)}),n.addKeyMap(o)}});var o=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],s=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];e.commands.closeTag=function(e){return n(e)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var t=/^(\s*)(>[> ]*|[*+-]\s|(\d+)([.)]))(\s*)/,n=/^(\s*)(>[> ]*|[*+-]|(\d+)[.)])(\s*)$/,i=/[*+-]\s/;e.commands.newlineAndIndentContinueMarkdownList=function(r){if(r.getOption("disableInput"))return e.Pass;for(var a=r.listSelections(),o=[],s=0;s<a.length;s++){var l=a[s].head,c=r.getStateAfter(l.line),u=c.list!==!1,d=0!==c.quote,p=r.getLine(l.line),h=t.exec(p);if(!a[s].empty()||!u&&!d||!h)return void r.execCommand("newlineAndIndent");if(n.test(p))r.replaceRange("",{line:l.line,ch:0},{line:l.line,ch:l.ch+1}),o[s]="\n";else{var f=h[1],g=h[5],m=i.test(h[2])||h[2].indexOf(">")>=0?h[2]:parseInt(h[3],10)+1+h[4];o[s]="\n"+f+m+g}}r.replaceSelections(o)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,i,r){var a=e.getLineHandle(t.line),l=t.ch-1,c=l>=0&&s[a.text.charAt(l)]||s[a.text.charAt(++l)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(i&&u>0!=(l==t.ch))return null;var d=e.getTokenTypeAt(o(t.line,l+1)),p=n(e,o(t.line,l+(u>0?1:0)),u,d||null,r);return null==p?null:{from:o(t.line,l),to:p&&p.pos,match:p&&p.ch==c.charAt(0),forward:u>0}}function n(e,t,n,i,r){for(var a=r&&r.maxScanLineLength||1e4,l=r&&r.maxScanLines||1e3,c=[],u=r&&r.bracketRegex?r.bracketRegex:/[(){}[\]]/,d=n>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),p=t.line;p!=d;p+=n){var h=e.getLine(p);if(h){var f=n>0?0:h.length-1,g=n>0?h.length:-1;if(!(h.length>a))for(p==t.line&&(f=t.ch-(0>n?1:0));f!=g;f+=n){var m=h.charAt(f);if(u.test(m)&&(void 0===i||e.getTokenTypeAt(o(p,f+1))==i)){var v=s[m];if(">"==v.charAt(1)==n>0)c.push(m);else{if(!c.length)return{pos:o(p,f),ch:m};c.pop()}}}}}return p-n==(n>0?e.lastLine():e.firstLine())?!1:null}function i(e,n,i){for(var r=e.state.matchBrackets.maxHighlightLineLength||1e3,s=[],l=e.listSelections(),c=0;c<l.length;c++){var u=l[c].empty()&&t(e,l[c].head,!1,i);if(u&&e.getLine(u.from.line).length<=r){var d=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";s.push(e.markText(u.from,o(u.from.line,u.from.ch+1),{className:d})),u.to&&e.getLine(u.to.line).length<=r&&s.push(e.markText(u.to,o(u.to.line,u.to.ch+1),{className:d}))}}if(s.length){a&&e.state.focused&&e.focus();var p=function(){e.operation(function(){for(var e=0;e<s.length;e++)s[e].clear()})};if(!n)return p;setTimeout(p,800)}}function r(e){e.operation(function(){l&&(l(),l=null),l=i(e,!1,e.state.matchBrackets)})}var a=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),o=e.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;e.defineOption("matchBrackets",!1,function(t,n,i){i&&i!=e.Init&&t.off("cursorActivity",r),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",r))}),e.defineExtension("matchBrackets",function(){i(this,!0)}),e.defineExtension("findMatchingBracket",function(e,n,i){return t(this,e,n,i)}),e.defineExtension("scanForBracket",function(e,t,i,r){return n(this,e,t,i,r)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,r,a,o){function s(e){var n=l(t,r);if(!n||n.to.line-n.from.line<c)return null;for(var i=t.findMarksAt(n.from),a=0;a<i.length;++a)if(i[a].__isFold&&"fold"!==o){if(!e)return null;n.cleared=!0,i[a].clear()}return n}if(a&&a.call){var l=a;a=null}else var l=i(t,a,"rangeFinder");"number"==typeof r&&(r=e.Pos(r,0));var c=i(t,a,"minFoldSize"),u=s(!0);if(i(t,a,"scanUp"))for(;!u&&r.line>t.firstLine();)r=e.Pos(r.line-1,0),u=s(!1);if(u&&!u.cleared&&"unfold"!==o){var d=n(t,a);e.on(d,"mousedown",function(t){p.clear(),e.e_preventDefault(t)});var p=t.markText(u.from,u.to,{replacedWith:d,clearOnEnter:!0,__isFold:!0});p.on("clear",function(n,i){e.signal(t,"unfold",t,n,i)}),e.signal(t,"fold",t,u.from,u.to)}}function n(e,t){var n=i(e,t,"widget");if("string"==typeof n){var r=document.createTextNode(n);n=document.createElement("span"),n.appendChild(r),n.className="CodeMirror-foldmarker"}return n}function i(e,t,n){if(t&&void 0!==t[n])return t[n];var i=e.options.foldOptions;return i&&void 0!==i[n]?i[n]:r[n]}e.newFoldFunction=function(e,n){return function(i,r){t(i,r,{rangeFinder:e,widget:n})}},e.defineExtension("foldCode",function(e,n,i){t(this,e,n,i)}),e.defineExtension("isFolded",function(e){for(var t=this.findMarksAt(e),n=0;n<t.length;++n)if(t[n].__isFold)return!0}),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},e.commands.foldAll=function(t){t.operation(function(){for(var n=t.firstLine(),i=t.lastLine();i>=n;n++)t.foldCode(e.Pos(n,0),null,"fold")})},e.commands.unfoldAll=function(t){t.operation(function(){for(var n=t.firstLine(),i=t.lastLine();i>=n;n++)t.foldCode(e.Pos(n,0),null,"unfold")})},e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,n){for(var i=0;i<e.length;++i){var r=e[i](t,n);if(r)return r}}}),e.registerHelper("fold","auto",function(e,t){for(var n=e.getHelpers(t,"fold"),i=0;i<n.length;i++){var r=n[i](e,t);if(r)return r}});var r={rangeFinder:e.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1};e.defineOption("foldOptions",null),e.defineExtension("foldOption",function(e,t){return i(this,e,t)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerHelper("fold","brace",function(t,n){function i(i){for(var r=n.ch,l=0;;){var c=0>=r?-1:s.lastIndexOf(i,r-1);if(-1!=c){if(1==l&&c<n.ch)break;if(a=t.getTokenTypeAt(e.Pos(o,c+1)),!/^(comment|string)/.test(a))return c+1;r=c-1}else{if(1==l)break;l=1,r=s.length}}}var r,a,o=n.line,s=t.getLine(o),l="{",c="}",r=i("{");if(null==r&&(l="[",c="]",r=i("[")),null!=r){var u,d,p=1,h=t.lastLine();e:for(var f=o;h>=f;++f)for(var g=t.getLine(f),m=f==o?r:0;;){var v=g.indexOf(l,m),y=g.indexOf(c,m);if(0>v&&(v=g.length),0>y&&(y=g.length),m=Math.min(v,y),m==g.length)break;if(t.getTokenTypeAt(e.Pos(f,m+1))==a)if(m==v)++p;else if(!--p){u=f,d=m;break e}++m}if(null!=u&&(o!=u||d!=r))return{from:e.Pos(o,r),to:e.Pos(u,d)}}}),e.registerHelper("fold","import",function(t,n){function i(n){if(n<t.firstLine()||n>t.lastLine())return null;var i=t.getTokenAt(e.Pos(n,1));if(/\S/.test(i.string)||(i=t.getTokenAt(e.Pos(n,i.end+1))),"keyword"!=i.type||"import"!=i.string)return null;for(var r=n,a=Math.min(t.lastLine(),n+10);a>=r;++r){var o=t.getLine(r),s=o.indexOf(";");if(-1!=s)return{startCh:i.end,end:e.Pos(r,s)}}}var r,n=n.line,a=i(n);if(!a||i(n-1)||(r=i(n-2))&&r.end.line==n-1)return null;for(var o=a.end;;){var s=i(o.line+1);if(null==s)break;o=s.end}return{from:t.clipPos(e.Pos(n,a.startCh+1)),to:o}}),e.registerHelper("fold","include",function(t,n){function i(n){if(n<t.firstLine()||n>t.lastLine())return null;var i=t.getTokenAt(e.Pos(n,1));return/\S/.test(i.string)||(i=t.getTokenAt(e.Pos(n,i.end+1))),"meta"==i.type&&"#include"==i.string.slice(0,8)?i.start+8:void 0}var n=n.line,r=i(n);if(null==r||null!=i(n-1))return null;for(var a=n;;){var o=i(a+1);if(null==o)break;++a}return{from:e.Pos(n,r+1),to:t.clipPos(e.Pos(a))}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return e.line-t.line||e.ch-t.ch}function n(e,t,n,i){this.line=t,this.ch=n,this.cm=e,this.text=e.getLine(t),this.min=i?i.from:e.firstLine(),this.max=i?i.to-1:e.lastLine()}function i(e,t){var n=e.cm.getTokenTypeAt(p(e.line,t));return n&&/\btag\b/.test(n)}function r(e){return e.line>=e.max?void 0:(e.ch=0,e.text=e.cm.getLine(++e.line),!0)}function a(e){return e.line<=e.min?void 0:(e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0)}function o(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(r(e))continue;return}{if(i(e,t+1)){var n=e.text.lastIndexOf("/",t),a=n>-1&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,a?"selfClose":"regular"}e.ch=t+1}}}function s(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(a(e))continue;return}if(i(e,t+1)){g.lastIndex=t,e.ch=t;var n=g.exec(e.text);if(n&&n.index==t)return n}else e.ch=t}}function l(e){for(;;){g.lastIndex=e.ch;var t=g.exec(e.text);if(!t){if(r(e))continue;return}{if(i(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}}function c(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(a(e))continue;return}{if(i(e,t+1)){var n=e.text.lastIndexOf("/",t),r=n>-1&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,r?"selfClose":"regular"}e.ch=t}}}function u(e,t){for(var n=[];;){var i,r=l(e),a=e.line,s=e.ch-(r?r[0].length:0);if(!r||!(i=o(e)))return;if("selfClose"!=i)if(r[1]){for(var c=n.length-1;c>=0;--c)if(n[c]==r[2]){n.length=c;break}if(0>c&&(!t||t==r[2]))return{tag:r[2],from:p(a,s),to:p(e.line,e.ch)}}else n.push(r[2])}}function d(e,t){for(var n=[];;){var i=c(e);if(!i)return;if("selfClose"!=i){var r=e.line,a=e.ch,o=s(e);if(!o)return;if(o[1])n.push(o[2]);else{for(var l=n.length-1;l>=0;--l)if(n[l]==o[2]){n.length=l;break}if(0>l&&(!t||t==o[2]))return{tag:o[2],from:p(e.line,e.ch),to:p(r,a)}}}else s(e)}}var p=e.Pos,h="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",f=h+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",g=new RegExp("<(/?)(["+h+"]["+f+"]*)","g");e.registerHelper("fold","xml",function(e,t){for(var i=new n(e,t.line,0);;){var r,a=l(i);if(!a||i.line!=t.line||!(r=o(i)))return;if(!a[1]&&"selfClose"!=r){var t=p(i.line,i.ch),s=u(i,a[2]);return s&&{from:t,to:s.from}}}}),e.findMatchingTag=function(e,i,r){var a=new n(e,i.line,i.ch,r);if(-1!=a.text.indexOf(">")||-1!=a.text.indexOf("<")){var l=o(a),c=l&&p(a.line,a.ch),h=l&&s(a);if(l&&h&&!(t(a,i)>0)){var f={from:p(a.line,a.ch),to:c,tag:h[2]};return"selfClose"==l?{open:f,close:null,at:"open"}:h[1]?{open:d(a,h[2]),close:f,at:"close"}:(a=new n(e,c.line,c.ch,r),{open:f,close:u(a,h[2]),at:"open"})}}},e.findEnclosingTag=function(e,t,i){for(var r=new n(e,t.line,t.ch,i);;){var a=d(r);if(!a)break;var o=new n(e,t.line,t.ch,i),s=u(o,a.tag);if(s)return{open:a,close:s}}},e.scanForClosingTag=function(e,t,i,r){var a=new n(e,t.line,t.ch,r?{from:0,to:r}:null);return u(a,i)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,n){function i(e){for(var t,n=!1,i=!1;null!=(t=e.next());){if(!n){if("/"==t&&!i)return;"["==t?i=!0:i&&"]"==t&&(i=!1)}n=!n&&"\\"==t}}function r(e,t,n){return ve=e,ye=n,t}function a(e,t){var n=e.next();if('"'==n||"'"==n)return t.tokenize=o(n),t.tokenize(e,t);if("."==n&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return r("number","number");if("."==n&&e.match(".."))return r("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return r(n);if("="==n&&e.eat(">"))return r("=>","operator");if("0"==n&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),r("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),r("number","number");if("/"==n)return e.eat("*")?(t.tokenize=s,s(e,t)):e.eat("/")?(e.skipToEnd(),r("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(i(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),r("regexp","string-2")):(e.eatWhile(Te),r("operator","operator",e.current()));if("`"==n)return t.tokenize=l,l(e,t);if("#"==n)return e.skipToEnd(),r("error","error");if(Te.test(n))return e.eatWhile(Te),r("operator","operator",e.current());if(Se.test(n)){e.eatWhile(Se);var a=e.current(),c=_e.propertyIsEnumerable(a)&&_e[a];return c&&"."!=t.lastType?r(c.type,c.style,a):r("variable","variable",a)}}function o(e){return function(t,n){var i,o=!1;if(xe&&"@"==t.peek()&&t.match($e))return n.tokenize=a,r("jsonld-keyword","meta");for(;null!=(i=t.next())&&(i!=e||o);)o=!o&&"\\"==i;return o||(n.tokenize=a),r("string","string")}}function s(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=a;break}i="*"==n}return r("comment","comment")}function l(e,t){for(var n,i=!1;null!=(n=e.next());){if(!i&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=a;break}i=!i&&"\\"==n}return r("quasi","string-2",e.current())}function c(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(0>n)){for(var i=0,r=!1,a=n-1;a>=0;--a){var o=e.string.charAt(a),s=Ae.indexOf(o);if(s>=0&&3>s){if(!i){++a;break}if(0==--i)break}else if(s>=3&&6>s)++i;else if(Se.test(o))r=!0;else{if(/["'\/]/.test(o))return;if(r&&!i){++a;break}}}r&&!i&&(t.fatArrowAt=a)}}function u(e,t,n,i,r,a){this.indented=e,this.column=t,this.type=n,this.prev=r,this.info=a,null!=i&&(this.align=i)}function d(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var i=e.context;i;i=i.prev)for(var n=i.vars;n;n=n.next)if(n.name==t)return!0}function p(e,t,n,i,r){var a=e.cc;for(Pe.state=e,Pe.stream=r,Pe.marked=null,Pe.cc=a,Pe.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var o=a.length?a.pop():ke?k:x;if(o(n,i)){for(;a.length&&a[a.length-1].lex;)a.pop()();return Pe.marked?Pe.marked:"variable"==n&&d(e,i)?"variable-2":t}}}function h(){for(var e=arguments.length-1;e>=0;e--)Pe.cc.push(arguments[e])}function f(){return h.apply(null,arguments),!0}function g(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var i=Pe.state;if(i.context){if(Pe.marked="def",t(i.localVars))return;i.localVars={name:e,next:i.localVars}}else{if(t(i.globalVars))return;n.globalVars&&(i.globalVars={name:e,next:i.globalVars})}}function m(){Pe.state.context={prev:Pe.state.context,vars:Pe.state.localVars},Pe.state.localVars=Ie}function v(){Pe.state.localVars=Pe.state.context.vars,Pe.state.context=Pe.state.context.prev}function y(e,t){var n=function(){var n=Pe.state,i=n.indented;if("stat"==n.lexical.type)i=n.lexical.indented;else for(var r=n.lexical;r&&")"==r.type&&r.align;r=r.prev)i=r.indented;n.lexical=new u(i,Pe.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function b(){var e=Pe.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function w(e){function t(n){return n==e?f():";"==e?h():f(t)}return t}function x(e,t){return"var"==e?f(y("vardef",t.length),H,w(";"),b):"keyword a"==e?f(y("form"),k,x,b):"keyword b"==e?f(y("form"),x,b):"{"==e?f(y("}"),U,b):";"==e?f():"if"==e?("else"==Pe.state.lexical.info&&Pe.state.cc[Pe.state.cc.length-1]==b&&Pe.state.cc.pop()(),f(y("form"),k,x,b,X)):"function"==e?f(te):"for"==e?f(y("form"),Y,x,b):"variable"==e?f(y("stat"),M):"switch"==e?f(y("form"),k,y("}","switch"),w("{"),U,b,b):"case"==e?f(k,w(":")):"default"==e?f(w(":")):"catch"==e?f(y("form"),m,w("("),ne,w(")"),x,b,v):"module"==e?f(y("form"),m,se,v,b):"class"==e?f(y("form"),ie,b):"export"==e?f(y("form"),le,b):"import"==e?f(y("form"),ce,b):h(y("stat"),k,w(";"),b)}function k(e){return S(e,!1)}function C(e){return S(e,!0)}function S(e,t){if(Pe.state.fatArrowAt==Pe.stream.start){var n=t?D:I;if("("==e)return f(m,y(")"),R(V,")"),b,w("=>"),n,v);if("variable"==e)return h(m,V,w("=>"),n,v)}var i=t?A:$;return Ee.hasOwnProperty(e)?f(i):"function"==e?f(te,i):"keyword c"==e?f(t?T:_):"("==e?f(y(")"),_,ge,w(")"),b,i):"operator"==e||"spread"==e?f(t?C:k):"["==e?f(y("]"),he,b,i):"{"==e?F(j,"}",null,i):"quasi"==e?h(E,i):f()}function _(e){return e.match(/[;\}\)\],]/)?h():h(k)}function T(e){return e.match(/[;\}\)\],]/)?h():h(C)}function $(e,t){return","==e?f(k):A(e,t,!1)}function A(e,t,n){var i=0==n?$:A,r=0==n?k:C;return"=>"==e?f(m,n?D:I,v):"operator"==e?/\+\+|--/.test(t)?f(i):"?"==t?f(k,w(":"),r):f(r):"quasi"==e?h(E,i):";"!=e?"("==e?F(C,")","call",i):"."==e?f(N,i):"["==e?f(y("]"),_,w("]"),b,i):void 0:void 0}function E(e,t){return"quasi"!=e?h():"${"!=t.slice(t.length-2)?f(E):f(k,P)}function P(e){return"}"==e?(Pe.marked="string-2",Pe.state.tokenize=l,f(E)):void 0}function I(e){return c(Pe.stream,Pe.state),h("{"==e?x:k)}function D(e){return c(Pe.stream,Pe.state),h("{"==e?x:C)}function M(e){return":"==e?f(b,x):h($,w(";"),b)}function N(e){return"variable"==e?(Pe.marked="property",f()):void 0}function j(e,t){return"variable"==e||"keyword"==Pe.style?(Pe.marked="property",f("get"==t||"set"==t?O:L)):"number"==e||"string"==e?(Pe.marked=xe?"property":Pe.style+" property",f(L)):"jsonld-keyword"==e?f(L):"["==e?f(k,w("]"),L):void 0}function O(e){return"variable"!=e?h(L):(Pe.marked="property",f(te))}function L(e){return":"==e?f(C):"("==e?h(te):void 0}function R(e,t){function n(i){if(","==i){var r=Pe.state.lexical;return"call"==r.info&&(r.pos=(r.pos||0)+1),f(e,n)}return i==t?f():f(w(t))}return function(i){return i==t?f():h(e,n)}}function F(e,t,n){for(var i=3;i<arguments.length;i++)Pe.cc.push(arguments[i]);return f(y(t,n),R(e,t),b)}function U(e){return"}"==e?f():h(x,U)}function z(e){return Ce&&":"==e?f(B):void 0}function q(e,t){return"="==t?f(C):void 0}function B(e){return"variable"==e?(Pe.marked="variable-3",f()):void 0}function H(){return h(V,z,G,K)}function V(e,t){return"variable"==e?(g(t),f()):"["==e?F(V,"]"):"{"==e?F(W,"}"):void 0}function W(e,t){return"variable"!=e||Pe.stream.match(/^\s*:/,!1)?("variable"==e&&(Pe.marked="property"),f(w(":"),V,G)):(g(t),f(G))}function G(e,t){return"="==t?f(C):void 0}function K(e){return","==e?f(H):void 0}function X(e,t){return"keyword b"==e&&"else"==t?f(y("form","else"),x,b):void 0}function Y(e){return"("==e?f(y(")"),J,w(")"),b):void 0}function J(e){return"var"==e?f(H,w(";"),Z):";"==e?f(Z):"variable"==e?f(Q):h(k,w(";"),Z)}function Q(e,t){return"in"==t||"of"==t?(Pe.marked="keyword",f(k)):f($,Z)}function Z(e,t){return";"==e?f(ee):"in"==t||"of"==t?(Pe.marked="keyword",f(k)):h(k,w(";"),ee)}function ee(e){")"!=e&&f(k)}function te(e,t){return"*"==t?(Pe.marked="keyword",f(te)):"variable"==e?(g(t),f(te)):"("==e?f(m,y(")"),R(ne,")"),b,x,v):void 0}function ne(e){return"spread"==e?f(ne):h(V,z,q)}function ie(e,t){return"variable"==e?(g(t),f(re)):void 0}function re(e,t){return"extends"==t?f(k,re):"{"==e?f(y("}"),ae,b):void 0}function ae(e,t){return"variable"==e||"keyword"==Pe.style?"static"==t?(Pe.marked="keyword",f(ae)):(Pe.marked="property","get"==t||"set"==t?f(oe,te,ae):f(te,ae)):"*"==t?(Pe.marked="keyword",
f(ae)):";"==e?f(ae):"}"==e?f():void 0}function oe(e){return"variable"!=e?h():(Pe.marked="property",f())}function se(e,t){return"string"==e?f(x):"variable"==e?(g(t),f(pe)):void 0}function le(e,t){return"*"==t?(Pe.marked="keyword",f(pe,w(";"))):"default"==t?(Pe.marked="keyword",f(k,w(";"))):h(x)}function ce(e){return"string"==e?f():h(ue,pe)}function ue(e,t){return"{"==e?F(ue,"}"):("variable"==e&&g(t),"*"==t&&(Pe.marked="keyword"),f(de))}function de(e,t){return"as"==t?(Pe.marked="keyword",f(ue)):void 0}function pe(e,t){return"from"==t?(Pe.marked="keyword",f(k)):void 0}function he(e){return"]"==e?f():h(C,fe)}function fe(e){return"for"==e?h(ge,w("]")):","==e?f(R(T,"]")):h(R(C,"]"))}function ge(e){return"for"==e?f(Y,ge):"if"==e?f(k,ge):void 0}function me(e,t){return"operator"==e.lastType||","==e.lastType||Te.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}var ve,ye,be=t.indentUnit,we=n.statementIndent,xe=n.jsonld,ke=n.json||xe,Ce=n.typescript,Se=n.wordCharacters||/[\w$\xa1-\uffff]/,_e=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("operator"),a={type:"atom",style:"atom"},o={"if":e("if"),"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":i,"break":i,"continue":i,"new":i,"delete":i,"throw":i,"debugger":i,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":r,"typeof":r,"instanceof":r,"true":a,"false":a,"null":a,undefined:a,NaN:a,Infinity:a,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),"yield":i,"export":e("export"),"import":e("import"),"extends":i};if(Ce){var s={type:"variable",style:"variable-3"},l={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:s,number:s,bool:s,any:s};for(var c in l)o[c]=l[c]}return o}(),Te=/[+\-*&%=<>!?|~^]/,$e=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Ae="([{}])",Ee={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Pe={state:null,column:null,marked:null,cc:null},Ie={name:"this",next:{name:"arguments"}};return b.lex=!0,{startState:function(e){var t={tokenize:a,lastType:"sof",cc:[],lexical:new u((e||0)-be,0,"block",!1),localVars:n.localVars,context:n.localVars&&{vars:n.localVars},indented:0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),c(e,t)),t.tokenize!=s&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==ve?n:(t.lastType="operator"!=ve||"++"!=ye&&"--"!=ye?ve:"incdec",p(t,n,ve,ye,e))},indent:function(t,i){if(t.tokenize==s)return e.Pass;if(t.tokenize!=a)return 0;var r=i&&i.charAt(0),o=t.lexical;if(!/^\s*else\b/.test(i))for(var l=t.cc.length-1;l>=0;--l){var c=t.cc[l];if(c==b)o=o.prev;else if(c!=X)break}"stat"==o.type&&"}"==r&&(o=o.prev),we&&")"==o.type&&"stat"==o.prev.type&&(o=o.prev);var u=o.type,d=r==u;return"vardef"==u?o.indented+("operator"==t.lastType||","==t.lastType?o.info+1:0):"form"==u&&"{"==r?o.indented:"form"==u?o.indented+be:"stat"==u?o.indented+(me(t,i)?we||be:0):"switch"!=o.info||d||0==n.doubleIndentSwitch?o.align?o.column+(d?0:1):o.indented+(d?0:be):o.indented+(/^(?:case|default)\b/.test(i)?be:2*be)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:ke?null:"/*",blockCommentEnd:ke?null:"*/",lineComment:ke?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:ke?"json":"javascript",jsonldMode:xe,jsonMode:ke}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("xml",function(t,n){function i(e,t){function n(n){return t.tokenize=n,n(e,t)}var i=e.next();if("<"==i)return e.eat("!")?e.eat("[")?e.match("CDATA[")?n(o("atom","]]>")):null:e.match("--")?n(o("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(s(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=o("meta","?>"),"meta"):(C=e.eat("/")?"closeTag":"openTag",t.tokenize=r,"tag bracket");if("&"==i){var a;return a=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),a?"atom":"error"}return e.eatWhile(/[^&<]/),null}function r(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=i,C=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return C="equals",null;if("<"==n){t.tokenize=i,t.state=d,t.tagName=t.tagStart=null;var r=t.tokenize(e,t);return r?r+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=a(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function a(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=r;break}return"string"};return t.isInAttribute=!0,t}function o(e,t){return function(n,r){for(;!n.eol();){if(n.match(t)){r.tokenize=i;break}n.next()}return e}}function s(e){return function(t,n){for(var r;null!=(r=t.next());){if("<"==r)return n.tokenize=s(e+1),n.tokenize(t,n);if(">"==r){if(1==e){n.tokenize=i;break}return n.tokenize=s(e-1),n.tokenize(t,n)}}return"meta"}}function l(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(_.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function c(e){e.context&&(e.context=e.context.prev)}function u(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!_.contextGrabbers.hasOwnProperty(n)||!_.contextGrabbers[n].hasOwnProperty(t))return;c(e)}}function d(e,t,n){return"openTag"==e?(n.tagStart=t.column(),p):"closeTag"==e?h:d}function p(e,t,n){return"word"==e?(n.tagName=t.current(),S="tag",m):(S="error",p)}function h(e,t,n){if("word"==e){var i=t.current();return n.context&&n.context.tagName!=i&&_.implicitlyClosed.hasOwnProperty(n.context.tagName)&&c(n),n.context&&n.context.tagName==i?(S="tag",f):(S="tag error",g)}return S="error",g}function f(e,t,n){return"endTag"!=e?(S="error",f):(c(n),d)}function g(e,t,n){return S="error",f(e,t,n)}function m(e,t,n){if("word"==e)return S="attribute",v;if("endTag"==e||"selfcloseTag"==e){var i=n.tagName,r=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||_.autoSelfClosers.hasOwnProperty(i)?u(n,i):(u(n,i),n.context=new l(n,i,r==n.indented)),d}return S="error",m}function v(e,t,n){return"equals"==e?y:(_.allowMissing||(S="error"),m(e,t,n))}function y(e,t,n){return"string"==e?b:"word"==e&&_.allowUnquoted?(S="string",m):(S="error",m(e,t,n))}function b(e,t,n){return"string"==e?b:m(e,t,n)}var w=t.indentUnit,x=n.multilineTagIndentFactor||1,k=n.multilineTagIndentPastTag;null==k&&(k=!0);var C,S,_=n.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},T=n.alignCDATA;return{startState:function(){return{tokenize:i,state:d,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;C=null;var n=t.tokenize(e,t);return(n||C)&&"comment"!=n&&(S=null,t.state=t.state(C||n,e,t),S&&(n="error"==S?n+" error":S)),n},indent:function(t,n,a){var o=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+w;if(o&&o.noIndent)return e.Pass;if(t.tokenize!=r&&t.tokenize!=i)return a?a.match(/^(\s*)/)[0].length:0;if(t.tagName)return k?t.tagStart+t.tagName.length+2:t.tagStart+w*x;if(T&&/<!\[CDATA\[/.test(n))return 0;var s=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(s&&s[1])for(;o;){if(o.tagName==s[2]){o=o.prev;break}if(!_.implicitlyClosed.hasOwnProperty(o.tagName))break;o=o.prev}else if(s)for(;o;){var l=_.contextGrabbers[o.tagName];if(!l||!l.hasOwnProperty(s[2]))break;o=o.prev}for(;o&&!o.startOfLine;)o=o.prev;return o?o.indent+w:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:n.htmlMode?"html":"xml",helperType:n.htmlMode?"html":"xml"}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=!0;return t}function n(e,t){for(var n,i=!1;null!=(n=e.next());){if(i&&"/"==n){t.tokenize=null;break}i="*"==n}return["comment","comment"]}e.defineMode("css",function(t,n){function i(e,t){return h=t,e}function r(e,t){var n=e.next();if(m[n]){var r=m[n](e,t);if(r!==!1)return r}return"@"==n?(e.eatWhile(/[\w\\\-]/),i("def",e.current())):"="==n||("~"==n||"|"==n)&&e.eat("=")?i(null,"compare"):'"'==n||"'"==n?(t.tokenize=a(n),t.tokenize(e,t)):"#"==n?(e.eatWhile(/[\w\\\-]/),i("atom","hash")):"!"==n?(e.match(/^\s*\w*/),i("keyword","important")):/\d/.test(n)||"."==n&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),i("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?i(null,"select-op"):"."==n&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?i("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?i(null,n):"u"==n&&e.match(/rl(-prefix)?\(/)||"d"==n&&e.match("omain(")||"r"==n&&e.match("egexp(")?(e.backUp(1),t.tokenize=o,i("property","word")):/[\w\\\-]/.test(n)?(e.eatWhile(/[\w\\\-]/),i("property","word")):i(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),i("number","unit")):e.match(/^-[\w\\\-]+/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?i("variable-2","variable-definition"):i("variable-2","variable")):e.match(/^\w+-/)?i("meta","meta"):void 0}function a(e){return function(t,n){for(var r,a=!1;null!=(r=t.next());){if(r==e&&!a){")"==e&&t.backUp(1);break}a=!a&&"\\"==r}return(r==e||!a&&")"!=e)&&(n.tokenize=null),i("string","string")}}function o(e,t){return e.next(),t.tokenize=e.match(/\s*[\"\')]/,!1)?null:a(")"),i(null,"(")}function s(e,t,n){this.type=e,this.indent=t,this.prev=n}function l(e,t,n){return e.context=new s(n,t.indentation()+g,e.context),n}function c(e){return e.context=e.context.prev,e.context.type}function u(e,t,n){return $[n.context.type](e,t,n)}function d(e,t,n,i){for(var r=i||1;r>0;r--)n.context=n.context.prev;return u(e,t,n)}function p(e){var t=e.current().toLowerCase();f=_.hasOwnProperty(t)?"atom":S.hasOwnProperty(t)?"keyword":"variable"}n.propertyKeywords||(n=e.resolveMode("text/css"));var h,f,g=t.indentUnit,m=n.tokenHooks,v=n.documentTypes||{},y=n.mediaTypes||{},b=n.mediaFeatures||{},w=n.propertyKeywords||{},x=n.nonStandardPropertyKeywords||{},k=n.fontProperties||{},C=n.counterDescriptors||{},S=n.colorKeywords||{},_=n.valueKeywords||{},T=n.allowNested,$={};return $.top=function(e,t,n){if("{"==e)return l(n,t,"block");if("}"==e&&n.context.prev)return c(n);if(/@(media|supports|(-moz-)?document)/.test(e))return l(n,t,"atBlock");if(/@(font-face|counter-style)/.test(e))return n.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return l(n,t,"at");if("hash"==e)f="builtin";else if("word"==e)f="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return l(n,t,"interpolation");if(":"==e)return"pseudo";if(T&&"("==e)return l(n,t,"parens")}return n.context.type},$.block=function(e,t,n){if("word"==e){var i=t.current().toLowerCase();return w.hasOwnProperty(i)?(f="property","maybeprop"):x.hasOwnProperty(i)?(f="string-2","maybeprop"):T?(f=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(f+=" error","maybeprop")}return"meta"==e?"block":T||"hash"!=e&&"qualifier"!=e?$.top(e,t,n):(f="error","block")},$.maybeprop=function(e,t,n){return":"==e?l(n,t,"prop"):u(e,t,n)},$.prop=function(e,t,n){if(";"==e)return c(n);if("{"==e&&T)return l(n,t,"propBlock");if("}"==e||"{"==e)return d(e,t,n);if("("==e)return l(n,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){if("word"==e)p(t);else if("interpolation"==e)return l(n,t,"interpolation")}else f+=" error";return"prop"},$.propBlock=function(e,t,n){return"}"==e?c(n):"word"==e?(f="property","maybeprop"):n.context.type},$.parens=function(e,t,n){return"{"==e||"}"==e?d(e,t,n):")"==e?c(n):"("==e?l(n,t,"parens"):"interpolation"==e?l(n,t,"interpolation"):("word"==e&&p(t),"parens")},$.pseudo=function(e,t,n){return"word"==e?(f="variable-3",n.context.type):u(e,t,n)},$.atBlock=function(e,t,n){if("("==e)return l(n,t,"atBlock_parens");if("}"==e)return d(e,t,n);if("{"==e)return c(n)&&l(n,t,T?"block":"top");if("word"==e){var i=t.current().toLowerCase();f="only"==i||"not"==i||"and"==i||"or"==i?"keyword":v.hasOwnProperty(i)?"tag":y.hasOwnProperty(i)?"attribute":b.hasOwnProperty(i)?"property":w.hasOwnProperty(i)?"property":x.hasOwnProperty(i)?"string-2":_.hasOwnProperty(i)?"atom":"error"}return n.context.type},$.atBlock_parens=function(e,t,n){return")"==e?c(n):"{"==e||"}"==e?d(e,t,n,2):$.atBlock(e,t,n)},$.restricted_atBlock_before=function(e,t,n){return"{"==e?l(n,t,"restricted_atBlock"):"word"==e&&"@counter-style"==n.stateArg?(f="variable","restricted_atBlock_before"):u(e,t,n)},$.restricted_atBlock=function(e,t,n){return"}"==e?(n.stateArg=null,c(n)):"word"==e?(f="@font-face"==n.stateArg&&!k.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==n.stateArg&&!C.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},$.keyframes=function(e,t,n){return"word"==e?(f="variable","keyframes"):"{"==e?l(n,t,"top"):u(e,t,n)},$.at=function(e,t,n){return";"==e?c(n):"{"==e||"}"==e?d(e,t,n):("word"==e?f="tag":"hash"==e&&(f="builtin"),"at")},$.interpolation=function(e,t,n){return"}"==e?c(n):"{"==e||";"==e?d(e,t,n):("word"==e?f="variable":"variable"!=e&&"("!=e&&")"!=e&&(f="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",stateArg:null,context:new s("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||r)(e,t);return n&&"object"==typeof n&&(h=n[1],n=n[0]),f=n,t.state=$[t.state](h,e,t),f},indent:function(e,t){var n=e.context,i=t&&t.charAt(0),r=n.indent;return"prop"!=n.type||"}"!=i&&")"!=i||(n=n.prev),!n.prev||("}"!=i||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"restricted_atBlock"!=n.type)&&(")"!=i||"parens"!=n.type&&"atBlock_parens"!=n.type)&&("{"!=i||"at"!=n.type&&"atBlock"!=n.type)||(r=n.indent-g,n=n.prev),r},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var i=["domain","regexp","url","url-prefix"],r=t(i),a=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=t(a),s=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],l=t(s),c=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],u=t(c),d=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],p=t(d),h=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],f=t(h),g=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],m=t(g),v=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],y=t(v),b=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scale","scale3d","scaleX","scaleY","scaleZ","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","x-large","x-small","xor","xx-large","xx-small"],w=t(b),x=i.concat(a).concat(s).concat(c).concat(d).concat(v).concat(b);e.registerHelper("hintWords","css",x),e.defineMIME("text/css",{documentTypes:r,mediaTypes:o,mediaFeatures:l,propertyKeywords:u,nonStandardPropertyKeywords:p,fontProperties:f,counterDescriptors:m,colorKeywords:y,valueKeywords:w,tokenHooks:{"/":function(e,t){return e.eat("*")?(t.tokenize=n,n(e,t)):!1}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:l,propertyKeywords:u,nonStandardPropertyKeywords:p,colorKeywords:y,valueKeywords:w,fontProperties:f,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=n,n(e,t)):["operator","operator"]},":":function(e){return e.match(/\s*\{/)?[null,"{"]:!1},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return e.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:l,
propertyKeywords:u,nonStandardPropertyKeywords:p,colorKeywords:y,valueKeywords:w,fontProperties:f,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=n,n(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)?!1:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("htmlmixed",function(t,n){function i(e,t){var n=t.htmlState.tagName;n&&(n=n.toLowerCase());var i=s.token(e,t.htmlState);if("script"==n&&/\btag\b/.test(i)&&">"==e.current()){var r=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);r=r?r[1]:"",r&&/[\"\']/.test(r.charAt(0))&&(r=r.slice(1,r.length-1));for(var u=0;u<c.length;++u){var d=c[u];if("string"==typeof d.matches?r==d.matches:d.matches.test(r)){d.mode&&(t.token=a,t.localMode=d.mode,t.localState=d.mode.startState&&d.mode.startState(s.indent(t.htmlState,"")));break}}}else"style"==n&&/\btag\b/.test(i)&&">"==e.current()&&(t.token=o,t.localMode=l,t.localState=l.startState(s.indent(t.htmlState,"")));return i}function r(e,t,n){var i=e.current(),r=i.search(t);return r>-1?e.backUp(i.length-r):i.match(/<\/?$/)&&(e.backUp(i.length),e.match(t,!1)||e.match(i)),n}function a(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=i,t.localState=t.localMode=null,null):r(e,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function o(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=i,t.localState=t.localMode=null,null):r(e,/<\/\s*style\s*>/,l.token(e,t.localState))}var s=e.getMode(t,{name:"xml",htmlMode:!0,multilineTagIndentFactor:n.multilineTagIndentFactor,multilineTagIndentPastTag:n.multilineTagIndentPastTag}),l=e.getMode(t,"css"),c=[],u=n&&n.scriptTypes;if(c.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:e.getMode(t,"javascript")}),u)for(var d=0;d<u.length;++d){var p=u[d];c.push({matches:p.matches,mode:p.mode&&e.getMode(t,p.mode)})}return c.push({matches:/./,mode:e.getMode(t,"text/plain")}),{startState:function(){var e=s.startState();return{token:i,localMode:null,localState:null,htmlState:e}},copyState:function(t){if(t.localState)var n=e.copyState(t.localMode,t.localState);return{token:t.token,localMode:t.localMode,localState:n,htmlState:e.copyState(s,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,n){return!t.localMode||/^\s*<\//.test(n)?s.indent(t.htmlState,n):t.localMode.indent?t.localMode.indent(t.localState,n):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||s}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../meta")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../meta"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("markdown",function(t,n){function i(n){if(e.findModeByName){var i=e.findModeByName(n);i&&(n=i.mime||i.mimes[0])}var r=e.getMode(t,n);return"null"==r.name?null:r}function r(e,t,n){return t.f=t.inline=n,n(e,t)}function a(e,t,n){return t.f=t.block=n,n(e,t)}function o(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,x||e.f!=l||(e.f=h,e.block=s),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.thisLineHasContent=!1,null}function s(e,t){var a=e.sol(),o=t.list!==!1,s=t.indentedCode;t.indentedCode=!1,o&&(t.indentationDiff>=0?(t.indentationDiff<4&&(t.indentation-=t.indentationDiff),t.list=null):t.indentation>0?(t.list=null,t.listDepth=Math.floor(t.indentation/4)):(t.list=!1,t.listDepth=0));var l=null;if(t.indentationDiff>=4)return e.skipToEnd(),s||!t.prevLineHasContent?(t.indentation-=4,t.indentedCode=!0,_):null;if(e.eatSpace())return null;if((l=e.match(H))&&l[1].length<=6)return t.header=l[1].length,n.highlightFormatting&&(t.formatting="header"),t.f=t.inline,d(t);if(t.prevLineHasContent&&!t.quote&&!o&&!s&&(l=e.match(V)))return t.header="="==l[0].charAt(0)?1:2,n.highlightFormatting&&(t.formatting="header"),t.f=t.inline,d(t);if(e.eat(">"))return t.quote=a?1:t.quote+1,n.highlightFormatting&&(t.formatting="quote"),e.eatSpace(),d(t);if("["===e.peek())return r(e,t,v);if(e.match(U,!0))return t.hr=!0,P;if((!t.prevLineHasContent||o)&&(e.match(z,!1)||e.match(q,!1))){var u=null;return e.match(z,!0)?u="ul":(e.match(q,!0),u="ol"),t.indentation+=4,t.list=!0,t.listDepth++,n.taskLists&&e.match(B,!1)&&(t.taskList=!0),t.f=t.inline,n.highlightFormatting&&(t.formatting=["list","list-"+u]),d(t)}return n.fencedCodeBlocks&&e.match(/^```[ \t]*([\w+#]*)/,!0)?(t.localMode=i(RegExp.$1),t.localMode&&(t.localState=t.localMode.startState()),t.f=t.block=c,n.highlightFormatting&&(t.formatting="code-block"),t.code=!0,d(t)):r(e,t,t.inline)}function l(e,t){var n=k.token(e,t.htmlState);return(x&&null===t.htmlState.tagStart&&!t.htmlState.context||t.md_inside&&e.current().indexOf(">")>-1)&&(t.f=h,t.block=s,t.htmlState=null),n}function c(e,t){return e.sol()&&e.match("```",!1)?(t.localMode=t.localState=null,t.f=t.block=u,null):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),_)}function u(e,t){e.match("```"),t.block=s,t.f=h,n.highlightFormatting&&(t.formatting="code-block"),t.code=!0;var i=d(t);return t.code=!1,i}function d(e){var t=[];if(e.formatting){t.push(D),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var i=0;i<e.formatting.length;i++)t.push(D+"-"+e.formatting[i]),"header"===e.formatting[i]&&t.push(D+"-"+e.formatting[i]+"-"+e.header),"quote"===e.formatting[i]&&t.push(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?D+"-"+e.formatting[i]+"-"+e.quote:"error")}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(O,"url"):(e.strong&&t.push(R),e.em&&t.push(L),e.strikethrough&&t.push(F),e.linkText&&t.push(j),e.code&&t.push(_)),e.header&&(t.push(S),t.push(S+"-"+e.header)),e.quote&&(t.push(T),t.push(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?T+"-"+e.quote:T+"-"+n.maxBlockquoteDepth)),e.list!==!1){var r=(e.listDepth-1)%3;t.push(r?1===r?A:E:$)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function p(e,t){return e.match(W,!0)?d(t):void 0}function h(t,i){var r=i.text(t,i);if("undefined"!=typeof r)return r;if(i.list)return i.list=null,d(i);if(i.taskList){var o="x"!==t.match(B,!0)[1];return o?i.taskOpen=!0:i.taskClosed=!0,n.highlightFormatting&&(i.formatting="task"),i.taskList=!1,d(i)}if(i.taskOpen=!1,i.taskClosed=!1,i.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(i.formatting="header"),d(i);var s=t.sol(),c=t.next();if("\\"===c&&(t.next(),n.highlightFormatting)){var u=d(i);return u?u+" formatting-escape":"formatting-escape"}if(i.linkTitle){i.linkTitle=!1;var p=c;"("===c&&(p=")"),p=(p+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var h="^\\s*(?:[^"+p+"\\\\]+|\\\\\\\\|\\\\.)"+p;if(t.match(new RegExp(h),!0))return O}if("`"===c){var m=i.formatting;n.highlightFormatting&&(i.formatting="code");var v=d(i),y=t.pos;t.eatWhile("`");var b=1+t.pos-y;return i.code?b===C?(i.code=!1,v):(i.formatting=m,d(i)):(C=b,i.code=!0,d(i))}if(i.code)return d(i);if("!"===c&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.match(/\[[^\]]*\]/),i.inline=i.f=g,I;if("["===c&&t.match(/.*\](\(.*\)| ?\[.*\])/,!1))return i.linkText=!0,n.highlightFormatting&&(i.formatting="link"),d(i);if("]"===c&&i.linkText&&t.match(/\(.*\)| ?\[.*\]/,!1)){n.highlightFormatting&&(i.formatting="link");var u=d(i);return i.linkText=!1,i.inline=i.f=g,u}if("<"===c&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){i.f=i.inline=f,n.highlightFormatting&&(i.formatting="link");var u=d(i);return u?u+=" ":u="",u+M}if("<"===c&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){i.f=i.inline=f,n.highlightFormatting&&(i.formatting="link");var u=d(i);return u?u+=" ":u="",u+N}if("<"===c&&t.match(/^\w/,!1)){if(-1!=t.string.indexOf(">")){var w=t.string.substring(1,t.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(w)&&(i.md_inside=!0)}return t.backUp(1),i.htmlState=e.startState(k),a(t,i,l)}if("<"===c&&t.match(/^\/\w*?>/))return i.md_inside=!1,"tag";var x=!1;if(!n.underscoresBreakWords&&"_"===c&&"_"!==t.peek()&&t.match(/(\w)/,!1)){var S=t.pos-2;if(S>=0){var _=t.string.charAt(S);"_"!==_&&_.match(/(\w)/,!1)&&(x=!0)}}if("*"===c||"_"===c&&!x)if(s&&" "===t.peek());else{if(i.strong===c&&t.eat(c)){n.highlightFormatting&&(i.formatting="strong");var v=d(i);return i.strong=!1,v}if(!i.strong&&t.eat(c))return i.strong=c,n.highlightFormatting&&(i.formatting="strong"),d(i);if(i.em===c){n.highlightFormatting&&(i.formatting="em");var v=d(i);return i.em=!1,v}if(!i.em)return i.em=c,n.highlightFormatting&&(i.formatting="em"),d(i)}else if(" "===c&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return d(i);t.backUp(1)}if(n.strikethrough)if("~"===c&&t.eatWhile(c)){if(i.strikethrough){n.highlightFormatting&&(i.formatting="strikethrough");var v=d(i);return i.strikethrough=!1,v}if(t.match(/^[^\s]/,!1))return i.strikethrough=!0,n.highlightFormatting&&(i.formatting="strikethrough"),d(i)}else if(" "===c&&t.match(/^~~/,!0)){if(" "===t.peek())return d(i);t.backUp(2)}return" "===c&&(t.match(/ +$/,!1)?i.trailingSpace++:i.trailingSpace&&(i.trailingSpaceNewLine=!0)),d(i)}function f(e,t){var i=e.next();if(">"===i){t.f=t.inline=h,n.highlightFormatting&&(t.formatting="link");var r=d(t);return r?r+=" ":r="",r+M}return e.match(/^[^>]+/,!0),M}function g(e,t){if(e.eatSpace())return null;var i=e.next();return"("===i||"["===i?(t.f=t.inline=m("("===i?")":"]"),n.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,d(t)):"error"}function m(e){return function(t,i){var r=t.next();if(r===e){i.f=i.inline=h,n.highlightFormatting&&(i.formatting="link-string");var a=d(i);return i.linkHref=!1,a}return t.match(w(e),!0)&&t.backUp(1),i.linkHref=!0,d(i)}}function v(e,t){return e.match(/^[^\]]*\]:/,!1)?(t.f=y,e.next(),n.highlightFormatting&&(t.formatting="link"),t.linkText=!0,d(t)):r(e,t,h)}function y(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=b,n.highlightFormatting&&(t.formatting="link");var i=d(t);return t.linkText=!1,i}return e.match(/^[^\]]+/,!0),j}function b(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=h,O+" url")}function w(e){return G[e]||(e=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),G[e]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+e+")")),G[e]}var x=e.modes.hasOwnProperty("xml"),k=e.getMode(t,x?{name:"xml",htmlMode:!0}:"text/plain");void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.underscoresBreakWords&&(n.underscoresBreakWords=!0),void 0===n.fencedCodeBlocks&&(n.fencedCodeBlocks=!1),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1);var C=0,S="header",_="comment",T="quote",$="variable-2",A="variable-3",E="keyword",P="hr",I="tag",D="formatting",M="link",N="link",j="link",O="string",L="em",R="strong",F="strikethrough",U=/^([*\-_])(?:\s*\1){2,}\s*$/,z=/^[*\-+]\s+/,q=/^[0-9]+([.)])\s+/,B=/^\[(x| )\](?=\s)/,H=/^(#+)(?: |$)/,V=/^ *(?:\={1,}|-{1,})\s*$/,W=/^[^#!\[\]*_\\<>` "'(~]+/,G=[],K={startState:function(){return{f:s,prevLineHasContent:!1,thisLineHasContent:!1,block:s,htmlState:null,indentation:0,inline:h,text:p,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1}},copyState:function(t){return{f:t.f,prevLineHasContent:t.prevLineHasContent,thisLineHasContent:t.thisLineHasContent,block:t.block,htmlState:t.htmlState&&e.copyState(k,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkTitle:t.linkTitle,em:t.em,strong:t.strong,strikethrough:t.strikethrough,header:t.header,hr:t.hr,taskList:t.taskList,list:t.list,listDepth:t.listDepth,quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside}},token:function(e,t){if(t.formatting=!1,e.sol()){var n=!!t.header||t.hr;if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0)||n)return t.prevLineHasContent=!1,o(t),n?this.token(e,t):null;t.prevLineHasContent=t.thisLineHasContent,t.thisLineHasContent=!0,t.taskList=!1,t.code=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.f=t.block;var i=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,r=4*Math.floor((i-t.indentation)/4);r>4&&(r=4);var a=t.indentation+r;if(t.indentationDiff=a-t.indentation,t.indentation=a,i>0)return null}return t.f(e,t)},innerMode:function(e){return e.block==l?{state:e.htmlState,mode:k}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:K}},blankLine:o,getType:d,fold:"markdown"};return K},"xml"),e.defineMIME("text/x-markdown","markdown")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("diff",function(){var e={"+":"positive","-":"negative","@":"meta"};return{token:function(t){var n=t.string.search(/[\t ]+?$/);if(!t.sol()||0===n)return t.skipToEnd(),("error "+(e[t.string.charAt(0)]||"")).replace(/ $/,"");var i=e[t.peek()]||t.skipToEnd();return-1===n?t.skipToEnd():t.pos=n,i}}}),e.defineMIME("text/x-diff","diff")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("properties",function(){return{token:function(e,t){var n=e.sol()||t.afterSection,i=e.eol();if(t.afterSection=!1,n&&(t.nextMultiline?(t.inMultiline=!0,t.nextMultiline=!1):t.position="def"),i&&!t.nextMultiline&&(t.inMultiline=!1,t.position="def"),n)for(;e.eatSpace(););var r=e.next();return!n||"#"!==r&&"!"!==r&&";"!==r?n&&"["===r?(t.afterSection=!0,e.skipTo("]"),e.eat("]"),"header"):"="===r||":"===r?(t.position="quote",null):("\\"===r&&"quote"===t.position&&e.eol()&&(t.nextMultiline=!0),t.position):(t.position="comment",e.skipToEnd(),"comment")},startState:function(){return{position:"def",nextMultiline:!1,inMultiline:!1,afterSection:!1}}}}),e.defineMIME("text/x-properties","properties"),e.defineMIME("text/x-ini","properties")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},n=e.split(" "),i=0;i<n.length;++i)t[n[i]]=!0;return t}function n(e,t){if(!t.startOfLine)return!1;for(;;){if(!e.skipTo("\\")){e.skipToEnd(),t.tokenize=null;break}if(e.next(),e.eol()){t.tokenize=n;break}}return"meta"}function i(e,t){return"variable-3"==t.prevToken?"variable-3":!1}function r(e,t){if(e.backUp(1),e.match(/(R|u8R|uR|UR|LR)/)){var n=e.match(/"([^\s\\()]{0,16})\(/);return n?(t.cpp11RawStringDelim=n[1],t.tokenize=s,s(e,t)):!1}return e.match(/(u8|u|U|L)/)?e.match(/["']/,!1)?"string":!1:(e.next(),!1)}function a(e){var t=/(\w+)::(\w+)$/.exec(e);return t&&t[1]==t[2]}function o(e,t){for(var n;null!=(n=e.next());)if('"'==n&&!e.eat('"')){t.tokenize=null;break}return"string"}function s(e,t){var n=t.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),i=e.match(new RegExp(".*?\\)"+n+'"'));return i?t.tokenize=null:e.skipToEnd(),"string"}function l(t,n){function i(e){if(e)for(var t in e)e.hasOwnProperty(t)&&r.push(t)}"string"==typeof t&&(t=[t]);var r=[];i(n.keywords),i(n.types),i(n.builtin),i(n.atoms),r.length&&(n.helperType=t[0],e.registerHelper("hintWords",t[0],r));for(var a=0;a<t.length;++a)e.defineMIME(t[a],n)}function c(e,t){for(var n=!1;!e.eol();){if(!n&&e.match('"""')){t.tokenize=null;break}n="\\"==e.next()&&!n}return"string"}e.defineMode("clike",function(t,n){function i(e,t){var n=e.next();if(C[n]){var i=C[n](e,t);if(i!==!1)return i}if('"'==n||"'"==n)return t.tokenize=r(n),t.tokenize(e,t);if(/[\[\]{}\(\),;\:\.]/.test(n))return p=n,null;if(/\d/.test(n))return e.eatWhile(/[\w\.]/),"number";if("/"==n){if(e.eat("*"))return t.tokenize=a,a(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(A.test(n))return e.eatWhile(A),"operator";if(e.eatWhile(/[\w\$_\xa1-\uffff]/),$)for(;e.match($);)e.eatWhile(/[\w\$_\xa1-\uffff]/);var o=e.current();return v.propertyIsEnumerable(o)?(w.propertyIsEnumerable(o)&&(p="newstatement"),x.propertyIsEnumerable(o)&&(h=!0),"keyword"):y.propertyIsEnumerable(o)?"variable-3":b.propertyIsEnumerable(o)?(w.propertyIsEnumerable(o)&&(p="newstatement"),"builtin"):k.propertyIsEnumerable(o)?"atom":"variable"}function r(e){return function(t,n){for(var i,r=!1,a=!1;null!=(i=t.next());){if(i==e&&!r){a=!0;break}r=!r&&"\\"==i}return(a||!r&&!S)&&(n.tokenize=null),"string"}}function a(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=null;break}i="*"==n}return"comment"}function o(e,t,n,i,r){this.indented=e,this.column=t,this.type=n,this.align=i,this.prev=r}function s(e){return"statement"==e||"switchstatement"==e||"namespace"==e}function l(e,t,n){var i=e.indented;return e.context&&s(e.context.type)&&!s(n)&&(i=e.context.indented),e.context=new o(i,t,n,null,e.context)}function c(e){var t=e.context.type;return(")"==t||"]"==t||"}"==t)&&(e.indented=e.context.indented),e.context=e.context.prev}function u(e,t){return"variable"==t.prevToken||"variable-3"==t.prevToken?!0:/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(e.string.slice(0,e.start))?!0:void 0}function d(e){for(;;){if(!e||"top"==e.type)return!0;if("}"==e.type&&"namespace"!=e.prev.type)return!1;e=e.prev}}var p,h,f=t.indentUnit,g=n.statementIndentUnit||f,m=n.dontAlignCalls,v=n.keywords||{},y=n.types||{},b=n.builtin||{},w=n.blockKeywords||{},x=n.defKeywords||{},k=n.atoms||{},C=n.hooks||{},S=n.multiLineStrings,_=n.indentStatements!==!1,T=n.indentSwitch!==!1,$=n.namespaceSeparator,A=/[+\-*&%=<>!?|\/]/;return{startState:function(e){return{tokenize:null,context:new o((e||0)-f,0,"top",!1),indented:0,startOfLine:!0,prevToken:null}},token:function(e,t){var r=t.context;if(e.sol()&&(null==r.align&&(r.align=!1),t.indented=e.indentation(),t.startOfLine=!0),e.eatSpace())return null;p=h=null;var a=(t.tokenize||i)(e,t);if("comment"==a||"meta"==a)return a;if(null==r.align&&(r.align=!0),";"==p||":"==p||","==p)for(;s(t.context.type);)c(t);else if("{"==p)l(t,e.column(),"}");else if("["==p)l(t,e.column(),"]");else if("("==p)l(t,e.column(),")");else if("}"==p){for(;s(r.type);)r=c(t);for("}"==r.type&&(r=c(t));s(r.type);)r=c(t)}else if(p==r.type)c(t);else if(_&&(("}"==r.type||"top"==r.type)&&";"!=p||s(r.type)&&"newstatement"==p)){var o="statement";"newstatement"==p&&T&&"switch"==e.current()?o="switchstatement":"keyword"==a&&"namespace"==e.current()&&(o="namespace"),l(t,e.column(),o)}if("variable"==a&&("def"==t.prevToken||n.typeFirstDefinitions&&u(e,t)&&d(t.context)&&e.match(/^\s*\(/,!1))&&(a="def"),C.token){var f=C.token(e,t,a);void 0!==f&&(a=f)}return"def"==a&&n.styleDefs===!1&&(a="variable"),t.startOfLine=!1,t.prevToken=h?"def":a||p,a},indent:function(t,n){if(t.tokenize!=i&&null!=t.tokenize)return e.Pass;var r=t.context,a=n&&n.charAt(0);s(r.type)&&"}"==a&&(r=r.prev);var o=a==r.type,l=r.prev&&"switchstatement"==r.prev.type;return s(r.type)?r.indented+("{"==a?0:g):!r.align||m&&")"==r.type?")"!=r.type||o?r.indented+(o?0:f)+(o||!l||/^(?:case|default)\b/.test(n)?0:f):r.indented+g:r.column+(o?0:1)},electricInput:T?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});var u="auto if break case register continue return default do sizeof static else struct switch extern typedef float union for goto while enum const volatile",d="int long char short double float unsigned signed void size_t ptrdiff_t";l(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:t(u),types:t(d+" bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:t("case do else for if switch while struct"),defKeywords:t("struct"),typeFirstDefinitions:!0,atoms:t("null true false"),hooks:{"#":n,"*":i},modeProps:{fold:["brace","include"]}}),l(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:t(u+" asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),types:t(d+" bool wchar_t"),blockKeywords:t("catch class do else finally for if struct switch try while"),defKeywords:t("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:t("true false null"),hooks:{"#":n,"*":i,u:r,U:r,L:r,R:r,token:function(e,t,n){return"variable"!=n||"("!=e.peek()||";"!=t.prevToken&&null!=t.prevToken&&"}"!=t.prevToken||!a(e.current())?void 0:"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),l("text/x-java",{name:"clike",keywords:t("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while"),types:t("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:t("catch class do else finally for if switch try while"),defKeywords:t("class interface package enum"),typeFirstDefinitions:!0,atoms:t("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}},modeProps:{fold:["brace","import"]}}),l("text/x-csharp",{name:"clike",keywords:t("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:t("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:t("catch class do else finally for foreach if struct switch try while"),defKeywords:t("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:t("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=o,o(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),l("text/x-scala",{name:"clike",keywords:t("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble :: #:: "),types:t("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:t("catch class do else finally for forSome if match switch try while"),defKeywords:t("class def object package trait type val var"),atoms:t("true false null"),indentStatements:!1,indentSwitch:!1,hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},'"':function(e,t){return e.match('""')?(t.tokenize=c,t.tokenize(e,t)):!1},"'":function(e){return e.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"}},modeProps:{closeBrackets:{triples:'"'}}}),l(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:t("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:t("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:t("for while do if else struct"),builtin:t("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:t("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":n},modeProps:{fold:["brace","include"]}}),l("text/x-nesc",{name:"clike",keywords:t(u+"as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:t(d),blockKeywords:t("case do else for if switch while struct"),atoms:t("null true false"),hooks:{"#":n},modeProps:{fold:["brace","include"]}}),l("text/x-objectivec",{name:"clike",keywords:t(u+"inline restrict _Bool _Complex _Imaginery BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),types:t(d),atoms:t("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(e){return e.eatWhile(/[\w\$]/),"keyword"},"#":n},modeProps:{fold:"brace"}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("yaml",function(){var e=["true","false","on","off","yes","no"],t=new RegExp("\\b(("+e.join(")|(")+"))$","i");return{token:function(e,n){var i=e.peek(),r=n.escaped;if(n.escaped=!1,"#"==i&&(0==e.pos||/\s/.test(e.string.charAt(e.pos-1))))return e.skipToEnd(),"comment";if(e.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(n.literal&&e.indentation()>n.keyCol)return e.skipToEnd(),"string";if(n.literal&&(n.literal=!1),e.sol()){if(n.keyCol=0,n.pair=!1,n.pairStart=!1,e.match(/---/))return"def";if(e.match(/\.\.\./))return"def";if(e.match(/\s*-\s+/))return"meta"}if(e.match(/^(\{|\}|\[|\])/))return"{"==i?n.inlinePairs++:"}"==i?n.inlinePairs--:"["==i?n.inlineList++:n.inlineList--,"meta";if(n.inlineList>0&&!r&&","==i)return e.next(),"meta";if(n.inlinePairs>0&&!r&&","==i)return n.keyCol=0,n.pair=!1,n.pairStart=!1,e.next(),"meta";if(n.pairStart){if(e.match(/^\s*(\||\>)\s*/))return n.literal=!0,"meta";if(e.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable-2";if(0==n.inlinePairs&&e.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(n.inlinePairs>0&&e.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(e.match(t))return"keyword"}return!n.pair&&e.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(n.pair=!0,n.keyCol=e.indentation(),"atom"):n.pair&&e.match(/^:\s*/)?(n.pairStart=!0,"meta"):(n.pairStart=!1,n.escaped="\\"==i,e.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}}}}),e.defineMIME("text/x-yaml","yaml")});var apimanUrl=UrlHelpers.join("http://localhost:8998/",Kubernetes.kubernetesApiUrl(),Kubernetes.kubernetesNamespacePath(),"/services/apiman"),APIMAN_CONFIG_DATA={apiman:{version:"1.1.1",builtOn:"fabric8",logoutUrl:"/notavailable"},user:{username:"n/a"},ui:{header:!1},api:{endpoint:apimanUrl,auth:{type:"none"}}};if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.alert");r||n.data("bs.alert",r=new i(this)),"string"==typeof t&&r[t].call(n)})}var n='[data-dismiss="alert"]',i=function(t){e(t).on("click",n,this.close)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,
i.prototype.close=function(t){function n(){o.detach().trigger("closed.bs.alert").remove()}var r=e(this),a=r.attr("data-target");a||(a=r.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,""));var o=e(a);t&&t.preventDefault(),o.length||(o=r.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var r=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.button"),a="object"==typeof t&&t;r||i.data("bs.button",r=new n(this,a)),"toggle"==t?r.toggle():t&&r.setState(t)})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.5",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",a=i.data();t+="Text",null==a.resetText&&i.data("resetText",i[r]()),setTimeout(e.proxy(function(){i[r](null==a[t]?this.options[t]:a[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=e(n.target);i.hasClass("btn")||(i=i.closest(".btn")),t.call(i,"toggle"),e(n.target).is('input[type="radio"]')||e(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.carousel"),a=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t),o="string"==typeof t?t:a.slide;r||i.data("bs.carousel",r=new n(this,a)),"number"==typeof t?r.to(t):o?r[o]():a.interval&&r.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),i="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(i&&!this.options.wrap)return t;var r="prev"==e?-1:1,a=(n+r)%this.$items.length;return this.$items.eq(a)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,i){var r=this.$element.find(".item.active"),a=i||this.getItemForDirection(t,r),o=this.interval,s="next"==t?"left":"right",l=this;if(a.hasClass("active"))return this.sliding=!1;var c=a[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(a)]);d&&d.addClass("active")}var p=e.Event("slid.bs.carousel",{relatedTarget:c,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(a.addClass(t),a[0].offsetWidth,r.addClass(s),a.addClass(s),r.one("bsTransitionEnd",function(){a.removeClass([t,s].join(" ")).addClass("active"),r.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(r.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(p)),o&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this};var r=function(n){var i,r=e(this),a=e(r.attr("data-target")||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(a.hasClass("carousel")){var o=e.extend({},a.data(),r.data()),s=r.attr("data-slide-to");s&&(o.interval=!1),t.call(a,o),s&&a.data("bs.carousel").to(s),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function n(t){return this.each(function(){var n=e(this),r=n.data("bs.collapse"),a=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!r&&a.toggle&&/show|hide/.test(t)&&(a.toggle=!1),r||n.data("bs.collapse",r=new i(this,a)),"string"==typeof t&&r[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.5",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(t=r.data("bs.collapse"),t&&t.transitioning))){var a=e.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){r&&r.length&&(n.call(r,"hide"),t||r.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[o](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION):r.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,i){var r=e(i);this.addAriaAndCollapsedClass(t(r),r)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var r=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var r=e(this);r.attr("data-target")||i.preventDefault();var a=t(r),o=a.data("bs.collapse"),s=o?"toggle":r.data();n.call(a,s)})}(jQuery),+function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}function n(n){n&&3===n.which||(e(r).remove(),e(a).each(function(){var i=e(this),r=t(i),a={relatedTarget:this};r.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(r[0],n.target)||(r.trigger(n=e.Event("hide.bs.dropdown",a)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),r.removeClass("open").trigger("hidden.bs.dropdown",a))))}))}function i(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new o(this)),"string"==typeof t&&i[t].call(n)})}var r=".dropdown-backdrop",a='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.5",o.prototype.toggle=function(i){var r=e(this);if(!r.is(".disabled, :disabled")){var a=t(r),o=a.hasClass("open");if(n(),!o){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var s={relatedTarget:this};if(a.trigger(i=e.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},o.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=e(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var r=t(i),o=r.hasClass("open");if(!o&&27!=n.which||o&&27==n.which)return 27==n.which&&r.find(a).trigger("focus"),i.trigger("click");var s=" li:not(.disabled):visible a",l=r.find(".dropdown-menu"+s);if(l.length){var c=l.index(n.target);38==n.which&&c>0&&c--,40==n.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=i,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,o.prototype.toggle).on("keydown.bs.dropdown.data-api",a,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,i){return this.each(function(){var r=e(this),a=r.data("bs.modal"),o=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t);a||r.data("bs.modal",a=new n(this,o)),"string"==typeof t?a[t](i):o.show&&a.show(i)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var i=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});r?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(a)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&r;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;a?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=e(this),r=i.attr("href"),a=e(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),o=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},a.data(),i.data());i.is("a")&&n.preventDefault(),a.one("show.bs.modal",function(e){e.isDefaultPrevented()||a.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),t.call(a,o,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.tooltip"),a="object"==typeof t&&t;(r||!/destroy|hide/.test(t))&&(r||i.data("bs.tooltip",r=new n(this,a)),"string"==typeof t&&r[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,i){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),a=r.length;a--;){var o=r[a];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var r=this,a=this.tip(),o=this.getUID(this.type);this.setContent(),a.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&a.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(s);c&&(s=s.replace(l,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),d=a[0].offsetWidth,p=a[0].offsetHeight;if(c){var h=s,f=this.getPosition(this.$viewport);s="bottom"==s&&u.bottom+p>f.bottom?"top":"top"==s&&u.top-p<f.top?"bottom":"right"==s&&u.right+d>f.width?"left":"left"==s&&u.left-d<f.left?"right":s,a.removeClass(h).addClass(s)}var g=this.getCalculatedOffset(s,u,d,p);this.applyPlacement(g,s);var m=function(){var e=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==e&&r.leave(r)};e.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(t,n){var i=this.tip(),r=i[0].offsetWidth,a=i[0].offsetHeight,o=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(s)&&(s=0),t.top+=o,t.left+=s,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=a&&(t.top=t.top+a-c);var u=this.getViewportAdjustedDelta(n,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var d=/top|bottom/.test(n),p=d?2*u.left-r+l:2*u.top-a+c,h=d?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(p,i[0][h],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function i(){"in"!=r.hoverState&&a.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),t&&t()}var r=this,a=e(this.$tip),o=e.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=e.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var a=i?{top:0,left:0}:t.offset(),o={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},r,o,s,a)},n.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var a=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-a-o.scroll,l=t.top+a-o.scroll+i;s<o.top?r.top=o.top-s:l>o.top+o.height&&(r.top=o.top+o.height-l)}else{var c=t.left-a,u=t.left+a+n;c<o.left?r.left=o.left-c:u>o.right&&(r.left=o.left+o.width-u)}return r},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var i=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.popover"),a="object"==typeof t&&t;(r||!/destroy|hide/.test(t))&&(r||i.data("bs.popover",r=new n(this,a)),"string"==typeof t&&r[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.5",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery),+function(e){"use strict";function t(n,i){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=e(this),r=i.data("bs.scrollspy"),a="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new t(this,a)),"string"==typeof n&&r[n]()})}t.VERSION="3.3.5",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),r=t.data("target")||t.attr("href"),a=/^#./.test(r)&&e(r);return a&&a.length&&a.is(":visible")&&[[a[n]().top+i,r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),r=this.offsets,a=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=i)return o!=(e=a[a.length-1])&&this.activate(e);if(o&&t<r[0])return this.activeTarget=null,this.clear();for(e=r.length;e--;)o!=a[e]&&t>=r[e]&&(void 0===r[e+1]||t<r[e+1])&&this.activate(a[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new n(this)),"string"==typeof t&&r[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=n.find(".active:last a"),a=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(a),t.trigger(o),!o.isDefaultPrevented()&&!a.isDefaultPrevented()){var s=e(i);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},n.prototype.activate=function(t,i,r){function a(){
o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var o=i.find("> .active"),s=r&&e.support.transition&&(o.length&&o.hasClass("fade")||!!i.find("> .fade").length);o.length&&s?o.one("bsTransitionEnd",a).emulateTransitionEnd(n.TRANSITION_DURATION):a(),o.removeClass("in")};var i=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=i,this};var r=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.affix"),a="object"==typeof t&&t;r||i.data("bs.affix",r=new n(this,a)),"string"==typeof t&&r[t]()})}var n=function(t,i){this.options=e.extend({},n.DEFAULTS,i),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.5",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,i){var r=this.$target.scrollTop(),a=this.$element.offset(),o=this.$target.height();if(null!=n&&"top"==this.affixed)return n>r?"top":!1;if("bottom"==this.affixed)return null!=n?r+this.unpin<=a.top?!1:"bottom":e-i>=r+o?!1:"bottom";var s=null==this.affixed,l=s?r:a.top,c=s?o:t;return null!=n&&n>=r?"top":null!=i&&l+c>=e-i?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),i=this.options.offset,r=i.top,a=i.bottom,o=Math.max(e(document).height(),e(document.body).height());"object"!=typeof i&&(a=r=i),"function"==typeof r&&(r=i.top(this.$element)),"function"==typeof a&&(a=i.bottom(this.$element));var s=this.getState(o,t,r,a);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),c=e.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:o-t-a})}};var i=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),t.call(n,i)})})}(jQuery);var PatternFly=PatternFly||{};!function(e){sidebar=function(){var t=0,n=0,i=0;e(".navbar-pf .navbar-toggle").is(":hidden")&&(t=e(document).height(),n=e(".navbar-pf").outerHeight(),i=t-n),e(".sidebar-pf").parent(".row").children('[class*="col-"]').css({"min-height":i})},e(document).ready(function(){e(".sidebar-pf").length>0&&0==e(".datatable").length&&sidebar()}),e(window).resize(function(){e(".sidebar-pf").length>0&&sidebar()})}(jQuery),function(e){PatternFly.popovers=function(t){var n=e(t);n.popover(),n.filter("[data-close=true]").each(function(t,n){var i=e(n),r=i.attr("data-original-title")+'<button type="button" class="close" aria-hidden="true"><span class="pficon pficon-close"></span></button>';i.attr("data-original-title",r)}),n.on("click",function(t){var n=e(this);$title=n.next(".popover").find(".popover-title"),$title.find(".close").parent(".popover-title").addClass("closable"),$title.find(".close").on("click",function(){n.popover("toggle")}),t.preventDefault()})}}(jQuery),function(e){e.fn.dataTableExt&&(e.extend(!0,e.fn.dataTable.defaults,{bDestroy:!0,bAutoWidth:!1,iDisplayLength:20,sDom:"<'dataTables_header' f i r ><'table-responsive'  t ><'dataTables_footer' p >",oLanguage:{sInfo:"Showing <b>_START_</b> to <b>_END_</b> of <b>_TOTAL_</b> Items",sInfoFiltered:"(of <b>_MAX_</b>)",sInfoEmpty:"Showing <b>0</b> Results",sZeroRecords:"<p>Suggestions</p><ul><li>Check the syntax of the search term.</li><li>Check that the correct menu option is chosen (token ID vs. user ID).</li><li>Use wildcards (* to match zero or more characters or ? to match a single character).</li><li>Clear the search field, then click Search to return to the 20 most recent records.</li></ul>",sSearch:""},sPaginationType:"bootstrap_input"}),e.extend(e.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper"}),e.fn.dataTableExt.oApi.fnPagingInfo=function(e){return{iStart:e._iDisplayStart,iEnd:e.fnDisplayEnd(),iLength:e._iDisplayLength,iTotal:e.fnRecordsTotal(),iFilteredTotal:e.fnRecordsDisplay(),iPage:-1===e._iDisplayLength?0:Math.ceil(e._iDisplayStart/e._iDisplayLength),iTotalPages:-1===e._iDisplayLength?0:Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength)}},e.extend(e.fn.dataTableExt.oPagination,{bootstrap_input:{fnInit:function(t,n,i){var r=(t.oLanguage.oPaginate,function(e){e.preventDefault(),t.oApi._fnPageChange(t,e.data.action)&&i(t)});e(n).append('<ul class="pagination"><li class="first disabled"><span class="i fa fa-angle-double-left"></span></li><li class="prev disabled"><span class="i fa fa-angle-left"></span></li></ul><div class="pagination-input"><input type="text" class="paginate_input"><span class="paginate_of">of <b>3</b></span></div><ul class="pagination"><li class="next disabled"><span class="i fa fa-angle-right"></span></li><li class="last disabled"><span class="i fa fa-angle-double-right"></span></li></ul>');var a=e("li",n);e(a[0]).bind("click.DT",{action:"first"},r),e(a[1]).bind("click.DT",{action:"previous"},r),e(a[2]).bind("click.DT",{action:"next"},r),e(a[3]).bind("click.DT",{action:"last"},r);var o=e("input",n);e(o).keyup(function(e){if(38==e.which||39==e.which?this.value++:(37==e.which||40==e.which)&&this.value>1&&this.value--,""!=this.value&&!this.value.match(/[^0-9]/)){var n=t._iDisplayLength*(this.value-1);if(n>t.fnRecordsDisplay())return t._iDisplayStart=(Math.ceil((t.fnRecordsDisplay()-1)/t._iDisplayLength)-1)*t._iDisplayLength,void i(t);t._iDisplayStart=n,i(t)}})},fnUpdate:function(t,n){var i,r,a=t.oInstance.fnPagingInfo(),o=t.aanFeatures.p,s=Math.ceil(t.fnRecordsDisplay()/t._iDisplayLength),l=Math.ceil(t._iDisplayStart/t._iDisplayLength)+1;for(i=0,r=o.length;r>i;i++)e(".paginate_input").val(l),e(".paginate_of b").html(s),0===a.iPage?(e("li.first",o[i]).addClass("disabled"),e("li.prev",o[i]).addClass("disabled")):(e("li.first",o[i]).removeClass("disabled"),e("li.prev",o[i]).removeClass("disabled")),a.iPage===a.iTotalPages-1||0===a.iTotalPages?(e("li.next",o[i]).addClass("disabled"),e("li.last",o[i]).addClass("disabled")):(e("li.next",o[i]).removeClass("disabled"),e("li.last",o[i]).removeClass("disabled"))}}}))}(jQuery);